function US(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(n,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function BS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var tp={exports:{}},Vl={},np={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u0;function zS(){if(u0)return De;u0=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.iterator;function E(O){return O===null||typeof O!="object"?null:(O=_&&O[_]||O["@@iterator"],typeof O=="function"?O:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,D={};function P(O,Y,re){this.props=O,this.context=Y,this.refs=D,this.updater=re||I}P.prototype.isReactComponent={},P.prototype.setState=function(O,Y){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,Y,"setState")},P.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function W(){}W.prototype=P.prototype;function q(O,Y,re){this.props=O,this.context=Y,this.refs=D,this.updater=re||I}var M=q.prototype=new W;M.constructor=q,R(M,P.prototype),M.isPureReactComponent=!0;var Q=Array.isArray,Z=Object.prototype.hasOwnProperty,ie={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function A(O,Y,re){var le,we={},Pe=null,Ne=null;if(Y!=null)for(le in Y.ref!==void 0&&(Ne=Y.ref),Y.key!==void 0&&(Pe=""+Y.key),Y)Z.call(Y,le)&&!N.hasOwnProperty(le)&&(we[le]=Y[le]);var Ve=arguments.length-2;if(Ve===1)we.children=re;else if(1<Ve){for(var Me=Array(Ve),at=0;at<Ve;at++)Me[at]=arguments[at+2];we.children=Me}if(O&&O.defaultProps)for(le in Ve=O.defaultProps,Ve)we[le]===void 0&&(we[le]=Ve[le]);return{$$typeof:n,type:O,key:Pe,ref:Ne,props:we,_owner:ie.current}}function k(O,Y){return{$$typeof:n,type:O.type,key:Y,ref:O.ref,props:O.props,_owner:O._owner}}function V(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function U(O){var Y={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(re){return Y[re]})}var B=/\/+/g;function b(O,Y){return typeof O=="object"&&O!==null&&O.key!=null?U(""+O.key):Y.toString(36)}function he(O,Y,re,le,we){var Pe=typeof O;(Pe==="undefined"||Pe==="boolean")&&(O=null);var Ne=!1;if(O===null)Ne=!0;else switch(Pe){case"string":case"number":Ne=!0;break;case"object":switch(O.$$typeof){case n:case e:Ne=!0}}if(Ne)return Ne=O,we=we(Ne),O=le===""?"."+b(Ne,0):le,Q(we)?(re="",O!=null&&(re=O.replace(B,"$&/")+"/"),he(we,Y,re,"",function(at){return at})):we!=null&&(V(we)&&(we=k(we,re+(!we.key||Ne&&Ne.key===we.key?"":(""+we.key).replace(B,"$&/")+"/")+O)),Y.push(we)),1;if(Ne=0,le=le===""?".":le+":",Q(O))for(var Ve=0;Ve<O.length;Ve++){Pe=O[Ve];var Me=le+b(Pe,Ve);Ne+=he(Pe,Y,re,Me,we)}else if(Me=E(O),typeof Me=="function")for(O=Me.call(O),Ve=0;!(Pe=O.next()).done;)Pe=Pe.value,Me=le+b(Pe,Ve++),Ne+=he(Pe,Y,re,Me,we);else if(Pe==="object")throw Y=String(O),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return Ne}function Ke(O,Y,re){if(O==null)return O;var le=[],we=0;return he(O,le,"","",function(Pe){return Y.call(re,Pe,we++)}),le}function Re(O){if(O._status===-1){var Y=O._result;Y=Y(),Y.then(function(re){(O._status===0||O._status===-1)&&(O._status=1,O._result=re)},function(re){(O._status===0||O._status===-1)&&(O._status=2,O._result=re)}),O._status===-1&&(O._status=0,O._result=Y)}if(O._status===1)return O._result.default;throw O._result}var Ce={current:null},oe={transition:null},pe={ReactCurrentDispatcher:Ce,ReactCurrentBatchConfig:oe,ReactCurrentOwner:ie};function ue(){throw Error("act(...) is not supported in production builds of React.")}return De.Children={map:Ke,forEach:function(O,Y,re){Ke(O,function(){Y.apply(this,arguments)},re)},count:function(O){var Y=0;return Ke(O,function(){Y++}),Y},toArray:function(O){return Ke(O,function(Y){return Y})||[]},only:function(O){if(!V(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},De.Component=P,De.Fragment=t,De.Profiler=s,De.PureComponent=q,De.StrictMode=r,De.Suspense=f,De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pe,De.act=ue,De.cloneElement=function(O,Y,re){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var le=R({},O.props),we=O.key,Pe=O.ref,Ne=O._owner;if(Y!=null){if(Y.ref!==void 0&&(Pe=Y.ref,Ne=ie.current),Y.key!==void 0&&(we=""+Y.key),O.type&&O.type.defaultProps)var Ve=O.type.defaultProps;for(Me in Y)Z.call(Y,Me)&&!N.hasOwnProperty(Me)&&(le[Me]=Y[Me]===void 0&&Ve!==void 0?Ve[Me]:Y[Me])}var Me=arguments.length-2;if(Me===1)le.children=re;else if(1<Me){Ve=Array(Me);for(var at=0;at<Me;at++)Ve[at]=arguments[at+2];le.children=Ve}return{$$typeof:n,type:O.type,key:we,ref:Pe,props:le,_owner:Ne}},De.createContext=function(O){return O={$$typeof:u,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:a,_context:O},O.Consumer=O},De.createElement=A,De.createFactory=function(O){var Y=A.bind(null,O);return Y.type=O,Y},De.createRef=function(){return{current:null}},De.forwardRef=function(O){return{$$typeof:h,render:O}},De.isValidElement=V,De.lazy=function(O){return{$$typeof:y,_payload:{_status:-1,_result:O},_init:Re}},De.memo=function(O,Y){return{$$typeof:m,type:O,compare:Y===void 0?null:Y}},De.startTransition=function(O){var Y=oe.transition;oe.transition={};try{O()}finally{oe.transition=Y}},De.unstable_act=ue,De.useCallback=function(O,Y){return Ce.current.useCallback(O,Y)},De.useContext=function(O){return Ce.current.useContext(O)},De.useDebugValue=function(){},De.useDeferredValue=function(O){return Ce.current.useDeferredValue(O)},De.useEffect=function(O,Y){return Ce.current.useEffect(O,Y)},De.useId=function(){return Ce.current.useId()},De.useImperativeHandle=function(O,Y,re){return Ce.current.useImperativeHandle(O,Y,re)},De.useInsertionEffect=function(O,Y){return Ce.current.useInsertionEffect(O,Y)},De.useLayoutEffect=function(O,Y){return Ce.current.useLayoutEffect(O,Y)},De.useMemo=function(O,Y){return Ce.current.useMemo(O,Y)},De.useReducer=function(O,Y,re){return Ce.current.useReducer(O,Y,re)},De.useRef=function(O){return Ce.current.useRef(O)},De.useState=function(O){return Ce.current.useState(O)},De.useSyncExternalStore=function(O,Y,re){return Ce.current.useSyncExternalStore(O,Y,re)},De.useTransition=function(){return Ce.current.useTransition()},De.version="18.3.1",De}var c0;function bm(){return c0||(c0=1,np.exports=zS()),np.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h0;function $S(){if(h0)return Vl;h0=1;var n=bm(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(h,f,m){var y,_={},E=null,I=null;m!==void 0&&(E=""+m),f.key!==void 0&&(E=""+f.key),f.ref!==void 0&&(I=f.ref);for(y in f)r.call(f,y)&&!a.hasOwnProperty(y)&&(_[y]=f[y]);if(h&&h.defaultProps)for(y in f=h.defaultProps,f)_[y]===void 0&&(_[y]=f[y]);return{$$typeof:e,type:h,key:E,ref:I,props:_,_owner:s.current}}return Vl.Fragment=t,Vl.jsx=u,Vl.jsxs=u,Vl}var d0;function qS(){return d0||(d0=1,tp.exports=$S()),tp.exports}var p=qS(),j=bm();const km=BS(j),WS=US({__proto__:null,default:km},[j]);var eh={},rp={exports:{}},gn={},ip={exports:{}},sp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f0;function HS(){return f0||(f0=1,function(n){function e(oe,pe){var ue=oe.length;oe.push(pe);e:for(;0<ue;){var O=ue-1>>>1,Y=oe[O];if(0<s(Y,pe))oe[O]=pe,oe[ue]=Y,ue=O;else break e}}function t(oe){return oe.length===0?null:oe[0]}function r(oe){if(oe.length===0)return null;var pe=oe[0],ue=oe.pop();if(ue!==pe){oe[0]=ue;e:for(var O=0,Y=oe.length,re=Y>>>1;O<re;){var le=2*(O+1)-1,we=oe[le],Pe=le+1,Ne=oe[Pe];if(0>s(we,ue))Pe<Y&&0>s(Ne,we)?(oe[O]=Ne,oe[Pe]=ue,O=Pe):(oe[O]=we,oe[le]=ue,O=le);else if(Pe<Y&&0>s(Ne,ue))oe[O]=Ne,oe[Pe]=ue,O=Pe;else break e}}return pe}function s(oe,pe){var ue=oe.sortIndex-pe.sortIndex;return ue!==0?ue:oe.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var f=[],m=[],y=1,_=null,E=3,I=!1,R=!1,D=!1,P=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(oe){for(var pe=t(m);pe!==null;){if(pe.callback===null)r(m);else if(pe.startTime<=oe)r(m),pe.sortIndex=pe.expirationTime,e(f,pe);else break;pe=t(m)}}function Q(oe){if(D=!1,M(oe),!R)if(t(f)!==null)R=!0,Re(Z);else{var pe=t(m);pe!==null&&Ce(Q,pe.startTime-oe)}}function Z(oe,pe){R=!1,D&&(D=!1,W(A),A=-1),I=!0;var ue=E;try{for(M(pe),_=t(f);_!==null&&(!(_.expirationTime>pe)||oe&&!U());){var O=_.callback;if(typeof O=="function"){_.callback=null,E=_.priorityLevel;var Y=O(_.expirationTime<=pe);pe=n.unstable_now(),typeof Y=="function"?_.callback=Y:_===t(f)&&r(f),M(pe)}else r(f);_=t(f)}if(_!==null)var re=!0;else{var le=t(m);le!==null&&Ce(Q,le.startTime-pe),re=!1}return re}finally{_=null,E=ue,I=!1}}var ie=!1,N=null,A=-1,k=5,V=-1;function U(){return!(n.unstable_now()-V<k)}function B(){if(N!==null){var oe=n.unstable_now();V=oe;var pe=!0;try{pe=N(!0,oe)}finally{pe?b():(ie=!1,N=null)}}else ie=!1}var b;if(typeof q=="function")b=function(){q(B)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,Ke=he.port2;he.port1.onmessage=B,b=function(){Ke.postMessage(null)}}else b=function(){P(B,0)};function Re(oe){N=oe,ie||(ie=!0,b())}function Ce(oe,pe){A=P(function(){oe(n.unstable_now())},pe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(oe){oe.callback=null},n.unstable_continueExecution=function(){R||I||(R=!0,Re(Z))},n.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<oe?Math.floor(1e3/oe):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(oe){switch(E){case 1:case 2:case 3:var pe=3;break;default:pe=E}var ue=E;E=pe;try{return oe()}finally{E=ue}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(oe,pe){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var ue=E;E=oe;try{return pe()}finally{E=ue}},n.unstable_scheduleCallback=function(oe,pe,ue){var O=n.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?O+ue:O):ue=O,oe){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=ue+Y,oe={id:y++,callback:pe,priorityLevel:oe,startTime:ue,expirationTime:Y,sortIndex:-1},ue>O?(oe.sortIndex=ue,e(m,oe),t(f)===null&&oe===t(m)&&(D?(W(A),A=-1):D=!0,Ce(Q,ue-O))):(oe.sortIndex=Y,e(f,oe),R||I||(R=!0,Re(Z))),oe},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(oe){var pe=E;return function(){var ue=E;E=pe;try{return oe.apply(this,arguments)}finally{E=ue}}}}(sp)),sp}var p0;function GS(){return p0||(p0=1,ip.exports=HS()),ip.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m0;function KS(){if(m0)return gn;m0=1;var n=bm(),e=GS();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,l=1;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){u(i,o),u(i+"Capture",o)}function u(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},_={};function E(i){return f.call(_,i)?!0:f.call(y,i)?!1:m.test(i)?_[i]=!0:(y[i]=!0,!1)}function I(i,o,l,d){if(l!==null&&l.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return d?!1:l!==null?!l.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function R(i,o,l,d){if(o===null||typeof o>"u"||I(i,o,l,d))return!0;if(d)return!1;if(l!==null)switch(l.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function D(i,o,l,d,g,w,T){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=d,this.attributeNamespace=g,this.mustUseProperty=l,this.propertyName=i,this.type=o,this.sanitizeURL=w,this.removeEmptyString=T}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){P[i]=new D(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];P[o]=new D(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){P[i]=new D(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){P[i]=new D(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){P[i]=new D(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){P[i]=new D(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){P[i]=new D(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){P[i]=new D(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){P[i]=new D(i,5,!1,i.toLowerCase(),null,!1,!1)});var W=/[\-:]([a-z])/g;function q(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(W,q);P[o]=new D(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(W,q);P[o]=new D(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(W,q);P[o]=new D(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){P[i]=new D(i,1,!1,i.toLowerCase(),null,!1,!1)}),P.xlinkHref=new D("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){P[i]=new D(i,1,!1,i.toLowerCase(),null,!0,!0)});function M(i,o,l,d){var g=P.hasOwnProperty(o)?P[o]:null;(g!==null?g.type!==0:d||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(R(o,l,g,d)&&(l=null),d||g===null?E(o)&&(l===null?i.removeAttribute(o):i.setAttribute(o,""+l)):g.mustUseProperty?i[g.propertyName]=l===null?g.type===3?!1:"":l:(o=g.attributeName,d=g.attributeNamespace,l===null?i.removeAttribute(o):(g=g.type,l=g===3||g===4&&l===!0?"":""+l,d?i.setAttributeNS(d,o,l):i.setAttribute(o,l))))}var Q=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Z=Symbol.for("react.element"),ie=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),U=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),Ke=Symbol.for("react.memo"),Re=Symbol.for("react.lazy"),Ce=Symbol.for("react.offscreen"),oe=Symbol.iterator;function pe(i){return i===null||typeof i!="object"?null:(i=oe&&i[oe]||i["@@iterator"],typeof i=="function"?i:null)}var ue=Object.assign,O;function Y(i){if(O===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);O=o&&o[1]||""}return`
`+O+i}var re=!1;function le(i,o){if(!i||re)return"";re=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(G){var d=G}Reflect.construct(i,[],o)}else{try{o.call()}catch(G){d=G}i.call(o.prototype)}else{try{throw Error()}catch(G){d=G}i()}}catch(G){if(G&&d&&typeof G.stack=="string"){for(var g=G.stack.split(`
`),w=d.stack.split(`
`),T=g.length-1,C=w.length-1;1<=T&&0<=C&&g[T]!==w[C];)C--;for(;1<=T&&0<=C;T--,C--)if(g[T]!==w[C]){if(T!==1||C!==1)do if(T--,C--,0>C||g[T]!==w[C]){var L=`
`+g[T].replace(" at new "," at ");return i.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",i.displayName)),L}while(1<=T&&0<=C);break}}}finally{re=!1,Error.prepareStackTrace=l}return(i=i?i.displayName||i.name:"")?Y(i):""}function we(i){switch(i.tag){case 5:return Y(i.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return i=le(i.type,!1),i;case 11:return i=le(i.type.render,!1),i;case 1:return i=le(i.type,!0),i;default:return""}}function Pe(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case N:return"Fragment";case ie:return"Portal";case k:return"Profiler";case A:return"StrictMode";case b:return"Suspense";case he:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case U:return(i.displayName||"Context")+".Consumer";case V:return(i._context.displayName||"Context")+".Provider";case B:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Ke:return o=i.displayName||null,o!==null?o:Pe(i.type)||"Memo";case Re:o=i._payload,i=i._init;try{return Pe(i(o))}catch{}}return null}function Ne(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pe(o);case 8:return o===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Ve(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Me(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function at(i){var o=Me(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),d=""+i[o];if(!i.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,w=l.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return g.call(this)},set:function(T){d=""+T,w.call(this,T)}}),Object.defineProperty(i,o,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(T){d=""+T},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Lt(i){i._valueTracker||(i._valueTracker=at(i))}function ps(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var l=o.getValue(),d="";return i&&(d=Me(i)?i.checked?"true":"false":i.value),i=d,i!==l?(o.setValue(i),!0):!1}function mi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function ms(i,o){var l=o.checked;return ue({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??i._wrapperState.initialChecked})}function yo(i,o){var l=o.defaultValue==null?"":o.defaultValue,d=o.checked!=null?o.checked:o.defaultChecked;l=Ve(o.value!=null?o.value:l),i._wrapperState={initialChecked:d,initialValue:l,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Ba(i,o){o=o.checked,o!=null&&M(i,"checked",o,!1)}function za(i,o){Ba(i,o);var l=Ve(o.value),d=o.type;if(l!=null)d==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+l):i.value!==""+l&&(i.value=""+l);else if(d==="submit"||d==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?vo(i,o.type,l):o.hasOwnProperty("defaultValue")&&vo(i,o.type,Ve(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function Fu(i,o,l){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var d=o.type;if(!(d!=="submit"&&d!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,l||o===i.value||(i.value=o),i.defaultValue=o}l=i.name,l!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,l!==""&&(i.name=l)}function vo(i,o,l){(o!=="number"||mi(i.ownerDocument)!==i)&&(l==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+l&&(i.defaultValue=""+l))}var Mr=Array.isArray;function Or(i,o,l,d){if(i=i.options,o){o={};for(var g=0;g<l.length;g++)o["$"+l[g]]=!0;for(l=0;l<i.length;l++)g=o.hasOwnProperty("$"+i[l].value),i[l].selected!==g&&(i[l].selected=g),g&&d&&(i[l].defaultSelected=!0)}else{for(l=""+Ve(l),o=null,g=0;g<i.length;g++){if(i[g].value===l){i[g].selected=!0,d&&(i[g].defaultSelected=!0);return}o!==null||i[g].disabled||(o=i[g])}o!==null&&(o.selected=!0)}}function $a(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return ue({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function wo(i,o){var l=o.value;if(l==null){if(l=o.children,o=o.defaultValue,l!=null){if(o!=null)throw Error(t(92));if(Mr(l)){if(1<l.length)throw Error(t(93));l=l[0]}o=l}o==null&&(o=""),l=o}i._wrapperState={initialValue:Ve(l)}}function _o(i,o){var l=Ve(o.value),d=Ve(o.defaultValue);l!=null&&(l=""+l,l!==i.value&&(i.value=l),o.defaultValue==null&&i.defaultValue!==l&&(i.defaultValue=l)),d!=null&&(i.defaultValue=""+d)}function qa(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function It(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function St(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?It(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Fr,Wa=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,l,d,g){MSApp.execUnsafeLocalFunction(function(){return i(o,l,d,g)})}:i}(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Fr=Fr||document.createElement("div"),Fr.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Fr.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function gi(i,o){if(o){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=o;return}}i.textContent=o}var gs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ys=["Webkit","ms","Moz","O"];Object.keys(gs).forEach(function(i){ys.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),gs[o]=gs[i]})});function Ha(i,o,l){return o==null||typeof o=="boolean"||o===""?"":l||typeof o!="number"||o===0||gs.hasOwnProperty(i)&&gs[i]?(""+o).trim():o+"px"}function Ga(i,o){i=i.style;for(var l in o)if(o.hasOwnProperty(l)){var d=l.indexOf("--")===0,g=Ha(l,o[l],d);l==="float"&&(l="cssFloat"),d?i.setProperty(l,g):i[l]=g}}var Ka=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qa(i,o){if(o){if(Ka[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Ya(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vs=null;function xo(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Eo=null,Nn=null,mr=null;function To(i){if(i=_l(i)){if(typeof Eo!="function")throw Error(t(280));var o=i.stateNode;o&&(o=mc(o),Eo(i.stateNode,i.type,o))}}function gr(i){Nn?mr?mr.push(i):mr=[i]:Nn=i}function Xa(){if(Nn){var i=Nn,o=mr;if(mr=Nn=null,To(i),o)for(i=0;i<o.length;i++)To(o[i])}}function ws(i,o){return i(o)}function Ja(){}var Ur=!1;function Za(i,o,l){if(Ur)return i(o,l);Ur=!0;try{return ws(i,o,l)}finally{Ur=!1,(Nn!==null||mr!==null)&&(Ja(),Xa())}}function ft(i,o){var l=i.stateNode;if(l===null)return null;var d=mc(l);if(d===null)return null;l=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(t(231,o,typeof l));return l}var Io=!1;if(h)try{var Kn={};Object.defineProperty(Kn,"passive",{get:function(){Io=!0}}),window.addEventListener("test",Kn,Kn),window.removeEventListener("test",Kn,Kn)}catch{Io=!1}function _s(i,o,l,d,g,w,T,C,L){var G=Array.prototype.slice.call(arguments,3);try{o.apply(l,G)}catch(ee){this.onError(ee)}}var xs=!1,So=null,Qn=!1,el=null,bd={onError:function(i){xs=!0,So=i}};function Po(i,o,l,d,g,w,T,C,L){xs=!1,So=null,_s.apply(bd,arguments)}function Uu(i,o,l,d,g,w,T,C,L){if(Po.apply(this,arguments),xs){if(xs){var G=So;xs=!1,So=null}else throw Error(t(198));Qn||(Qn=!0,el=G)}}function Yn(i){var o=i,l=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(l=o.return),i=o.return;while(i)}return o.tag===3?l:null}function Es(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Xn(i){if(Yn(i)!==i)throw Error(t(188))}function Bu(i){var o=i.alternate;if(!o){if(o=Yn(i),o===null)throw Error(t(188));return o!==i?null:i}for(var l=i,d=o;;){var g=l.return;if(g===null)break;var w=g.alternate;if(w===null){if(d=g.return,d!==null){l=d;continue}break}if(g.child===w.child){for(w=g.child;w;){if(w===l)return Xn(g),i;if(w===d)return Xn(g),o;w=w.sibling}throw Error(t(188))}if(l.return!==d.return)l=g,d=w;else{for(var T=!1,C=g.child;C;){if(C===l){T=!0,l=g,d=w;break}if(C===d){T=!0,d=g,l=w;break}C=C.sibling}if(!T){for(C=w.child;C;){if(C===l){T=!0,l=w,d=g;break}if(C===d){T=!0,d=w,l=g;break}C=C.sibling}if(!T)throw Error(t(189))}}if(l.alternate!==d)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?i:o}function tl(i){return i=Bu(i),i!==null?Ao(i):null}function Ao(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=Ao(i);if(o!==null)return o;i=i.sibling}return null}var bo=e.unstable_scheduleCallback,nl=e.unstable_cancelCallback,zu=e.unstable_shouldYield,kd=e.unstable_requestPaint,Je=e.unstable_now,$u=e.unstable_getCurrentPriorityLevel,Ts=e.unstable_ImmediatePriority,yi=e.unstable_UserBlockingPriority,Dn=e.unstable_NormalPriority,rl=e.unstable_LowPriority,qu=e.unstable_IdlePriority,Is=null,En=null;function Wu(i){if(En&&typeof En.onCommitFiberRoot=="function")try{En.onCommitFiberRoot(Is,i,void 0,(i.current.flags&128)===128)}catch{}}var tn=Math.clz32?Math.clz32:Gu,il=Math.log,Hu=Math.LN2;function Gu(i){return i>>>=0,i===0?32:31-(il(i)/Hu|0)|0}var ko=64,Co=4194304;function vi(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Ss(i,o){var l=i.pendingLanes;if(l===0)return 0;var d=0,g=i.suspendedLanes,w=i.pingedLanes,T=l&268435455;if(T!==0){var C=T&~g;C!==0?d=vi(C):(w&=T,w!==0&&(d=vi(w)))}else T=l&~g,T!==0?d=vi(T):w!==0&&(d=vi(w));if(d===0)return 0;if(o!==0&&o!==d&&(o&g)===0&&(g=d&-d,w=o&-o,g>=w||g===16&&(w&4194240)!==0))return o;if((d&4)!==0&&(d|=l&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=d;0<o;)l=31-tn(o),g=1<<l,d|=i[l],o&=~g;return d}function Cd(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Br(i,o){for(var l=i.suspendedLanes,d=i.pingedLanes,g=i.expirationTimes,w=i.pendingLanes;0<w;){var T=31-tn(w),C=1<<T,L=g[T];L===-1?((C&l)===0||(C&d)!==0)&&(g[T]=Cd(C,o)):L<=o&&(i.expiredLanes|=C),w&=~C}}function Tn(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Ps(){var i=ko;return ko<<=1,(ko&4194240)===0&&(ko=64),i}function wi(i){for(var o=[],l=0;31>l;l++)o.push(i);return o}function _i(i,o,l){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-tn(o),i[o]=l}function Xe(i,o){var l=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var d=i.eventTimes;for(i=i.expirationTimes;0<l;){var g=31-tn(l),w=1<<g;o[g]=0,d[g]=-1,i[g]=-1,l&=~w}}function xi(i,o){var l=i.entangledLanes|=o;for(i=i.entanglements;l;){var d=31-tn(l),g=1<<d;g&o|i[d]&o&&(i[d]|=o),l&=~g}}var Fe=0;function Ei(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Ku,Ro,Qu,Yu,Xu,sl=!1,yr=[],Mt=null,Jn=null,Zn=null,Ti=new Map,jn=new Map,vr=[],Rd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ju(i,o){switch(i){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":Jn=null;break;case"mouseover":case"mouseout":Zn=null;break;case"pointerover":case"pointerout":Ti.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":jn.delete(o.pointerId)}}function un(i,o,l,d,g,w){return i===null||i.nativeEvent!==w?(i={blockedOn:o,domEventName:l,eventSystemFlags:d,nativeEvent:w,targetContainers:[g]},o!==null&&(o=_l(o),o!==null&&Ro(o)),i):(i.eventSystemFlags|=d,o=i.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),i)}function Nd(i,o,l,d,g){switch(o){case"focusin":return Mt=un(Mt,i,o,l,d,g),!0;case"dragenter":return Jn=un(Jn,i,o,l,d,g),!0;case"mouseover":return Zn=un(Zn,i,o,l,d,g),!0;case"pointerover":var w=g.pointerId;return Ti.set(w,un(Ti.get(w)||null,i,o,l,d,g)),!0;case"gotpointercapture":return w=g.pointerId,jn.set(w,un(jn.get(w)||null,i,o,l,d,g)),!0}return!1}function Zu(i){var o=Rs(i.target);if(o!==null){var l=Yn(o);if(l!==null){if(o=l.tag,o===13){if(o=Es(l),o!==null){i.blockedOn=o,Xu(i.priority,function(){Qu(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function zr(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var l=No(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(l===null){l=i.nativeEvent;var d=new l.constructor(l.type,l);vs=d,l.target.dispatchEvent(d),vs=null}else return o=_l(l),o!==null&&Ro(o),i.blockedOn=l,!1;o.shift()}return!0}function As(i,o,l){zr(i)&&l.delete(o)}function ec(){sl=!1,Mt!==null&&zr(Mt)&&(Mt=null),Jn!==null&&zr(Jn)&&(Jn=null),Zn!==null&&zr(Zn)&&(Zn=null),Ti.forEach(As),jn.forEach(As)}function er(i,o){i.blockedOn===o&&(i.blockedOn=null,sl||(sl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ec)))}function tr(i){function o(g){return er(g,i)}if(0<yr.length){er(yr[0],i);for(var l=1;l<yr.length;l++){var d=yr[l];d.blockedOn===i&&(d.blockedOn=null)}}for(Mt!==null&&er(Mt,i),Jn!==null&&er(Jn,i),Zn!==null&&er(Zn,i),Ti.forEach(o),jn.forEach(o),l=0;l<vr.length;l++)d=vr[l],d.blockedOn===i&&(d.blockedOn=null);for(;0<vr.length&&(l=vr[0],l.blockedOn===null);)Zu(l),l.blockedOn===null&&vr.shift()}var $r=Q.ReactCurrentBatchConfig,Ii=!0;function st(i,o,l,d){var g=Fe,w=$r.transition;$r.transition=null;try{Fe=1,ol(i,o,l,d)}finally{Fe=g,$r.transition=w}}function Dd(i,o,l,d){var g=Fe,w=$r.transition;$r.transition=null;try{Fe=4,ol(i,o,l,d)}finally{Fe=g,$r.transition=w}}function ol(i,o,l,d){if(Ii){var g=No(i,o,l,d);if(g===null)qd(i,o,d,bs,l),Ju(i,d);else if(Nd(g,i,o,l,d))d.stopPropagation();else if(Ju(i,d),o&4&&-1<Rd.indexOf(i)){for(;g!==null;){var w=_l(g);if(w!==null&&Ku(w),w=No(i,o,l,d),w===null&&qd(i,o,d,bs,l),w===g)break;g=w}g!==null&&d.stopPropagation()}else qd(i,o,d,null,l)}}var bs=null;function No(i,o,l,d){if(bs=null,i=xo(d),i=Rs(i),i!==null)if(o=Yn(i),o===null)i=null;else if(l=o.tag,l===13){if(i=Es(o),i!==null)return i;i=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return bs=i,null}function al(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($u()){case Ts:return 1;case yi:return 4;case Dn:case rl:return 16;case qu:return 536870912;default:return 16}default:return 16}}var In=null,Do=null,cn=null;function ll(){if(cn)return cn;var i,o=Do,l=o.length,d,g="value"in In?In.value:In.textContent,w=g.length;for(i=0;i<l&&o[i]===g[i];i++);var T=l-i;for(d=1;d<=T&&o[l-d]===g[w-d];d++);return cn=g.slice(i,1<d?1-d:void 0)}function jo(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function wr(){return!0}function ul(){return!1}function Ot(i){function o(l,d,g,w,T){this._reactName=l,this._targetInst=g,this.type=d,this.nativeEvent=w,this.target=T,this.currentTarget=null;for(var C in i)i.hasOwnProperty(C)&&(l=i[C],this[C]=l?l(w):w[C]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?wr:ul,this.isPropagationStopped=ul,this}return ue(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=wr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=wr)},persist:function(){},isPersistent:wr}),o}var nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vo=Ot(nr),_r=ue({},nr,{view:0,detail:0}),jd=Ot(_r),Lo,qr,Si,ks=ue({},_r,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Si&&(Si&&i.type==="mousemove"?(Lo=i.screenX-Si.screenX,qr=i.screenY-Si.screenY):qr=Lo=0,Si=i),Lo)},movementY:function(i){return"movementY"in i?i.movementY:qr}}),Mo=Ot(ks),cl=ue({},ks,{dataTransfer:0}),tc=Ot(cl),Oo=ue({},_r,{relatedTarget:0}),Fo=Ot(Oo),nc=ue({},nr,{animationName:0,elapsedTime:0,pseudoElement:0}),Wr=Ot(nc),rc=ue({},nr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),ic=Ot(rc),sc=ue({},nr,{data:0}),hl=Ot(sc),Uo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ac(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=oc[i])?!!o[i]:!1}function xr(){return ac}var c=ue({},_r,{key:function(i){if(i.key){var o=Uo[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=jo(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?nn[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xr,charCode:function(i){return i.type==="keypress"?jo(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?jo(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),v=Ot(c),x=ue({},ks,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),S=Ot(x),z=ue({},_r,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xr}),K=Ot(z),ae=ue({},nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qe=Ot(ae),Pt=ue({},ks,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),ze=Ot(Pt),Ct=[9,13,27,32],vt=h&&"CompositionEvent"in window,Vn=null;h&&"documentMode"in document&&(Vn=document.documentMode);var Sn=h&&"TextEvent"in window&&!Vn,Cs=h&&(!vt||Vn&&8<Vn&&11>=Vn),Bo=" ",ry=!1;function iy(i,o){switch(i){case"keyup":return Ct.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sy(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var zo=!1;function M1(i,o){switch(i){case"compositionend":return sy(o);case"keypress":return o.which!==32?null:(ry=!0,Bo);case"textInput":return i=o.data,i===Bo&&ry?null:i;default:return null}}function O1(i,o){if(zo)return i==="compositionend"||!vt&&iy(i,o)?(i=ll(),cn=Do=In=null,zo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Cs&&o.locale!=="ko"?null:o.data;default:return null}}var F1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oy(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!F1[i.type]:o==="textarea"}function ay(i,o,l,d){gr(d),o=dc(o,"onChange"),0<o.length&&(l=new Vo("onChange","change",null,l,d),i.push({event:l,listeners:o}))}var dl=null,fl=null;function U1(i){Sy(i,0)}function lc(i){var o=Go(i);if(ps(o))return i}function B1(i,o){if(i==="change")return o}var ly=!1;if(h){var Vd;if(h){var Ld="oninput"in document;if(!Ld){var uy=document.createElement("div");uy.setAttribute("oninput","return;"),Ld=typeof uy.oninput=="function"}Vd=Ld}else Vd=!1;ly=Vd&&(!document.documentMode||9<document.documentMode)}function cy(){dl&&(dl.detachEvent("onpropertychange",hy),fl=dl=null)}function hy(i){if(i.propertyName==="value"&&lc(fl)){var o=[];ay(o,fl,i,xo(i)),Za(U1,o)}}function z1(i,o,l){i==="focusin"?(cy(),dl=o,fl=l,dl.attachEvent("onpropertychange",hy)):i==="focusout"&&cy()}function $1(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return lc(fl)}function q1(i,o){if(i==="click")return lc(o)}function W1(i,o){if(i==="input"||i==="change")return lc(o)}function H1(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var rr=typeof Object.is=="function"?Object.is:H1;function pl(i,o){if(rr(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var l=Object.keys(i),d=Object.keys(o);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var g=l[d];if(!f.call(o,g)||!rr(i[g],o[g]))return!1}return!0}function dy(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function fy(i,o){var l=dy(i);i=0;for(var d;l;){if(l.nodeType===3){if(d=i+l.textContent.length,i<=o&&d>=o)return{node:l,offset:o-i};i=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=dy(l)}}function py(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?py(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function my(){for(var i=window,o=mi();o instanceof i.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)i=o.contentWindow;else break;o=mi(i.document)}return o}function Md(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function G1(i){var o=my(),l=i.focusedElem,d=i.selectionRange;if(o!==l&&l&&l.ownerDocument&&py(l.ownerDocument.documentElement,l)){if(d!==null&&Md(l)){if(o=d.start,i=d.end,i===void 0&&(i=o),"selectionStart"in l)l.selectionStart=o,l.selectionEnd=Math.min(i,l.value.length);else if(i=(o=l.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var g=l.textContent.length,w=Math.min(d.start,g);d=d.end===void 0?w:Math.min(d.end,g),!i.extend&&w>d&&(g=d,d=w,w=g),g=fy(l,w);var T=fy(l,d);g&&T&&(i.rangeCount!==1||i.anchorNode!==g.node||i.anchorOffset!==g.offset||i.focusNode!==T.node||i.focusOffset!==T.offset)&&(o=o.createRange(),o.setStart(g.node,g.offset),i.removeAllRanges(),w>d?(i.addRange(o),i.extend(T.node,T.offset)):(o.setEnd(T.node,T.offset),i.addRange(o)))}}for(o=[],i=l;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<o.length;l++)i=o[l],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var K1=h&&"documentMode"in document&&11>=document.documentMode,$o=null,Od=null,ml=null,Fd=!1;function gy(i,o,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Fd||$o==null||$o!==mi(d)||(d=$o,"selectionStart"in d&&Md(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),ml&&pl(ml,d)||(ml=d,d=dc(Od,"onSelect"),0<d.length&&(o=new Vo("onSelect","select",null,o,l),i.push({event:o,listeners:d}),o.target=$o)))}function uc(i,o){var l={};return l[i.toLowerCase()]=o.toLowerCase(),l["Webkit"+i]="webkit"+o,l["Moz"+i]="moz"+o,l}var qo={animationend:uc("Animation","AnimationEnd"),animationiteration:uc("Animation","AnimationIteration"),animationstart:uc("Animation","AnimationStart"),transitionend:uc("Transition","TransitionEnd")},Ud={},yy={};h&&(yy=document.createElement("div").style,"AnimationEvent"in window||(delete qo.animationend.animation,delete qo.animationiteration.animation,delete qo.animationstart.animation),"TransitionEvent"in window||delete qo.transitionend.transition);function cc(i){if(Ud[i])return Ud[i];if(!qo[i])return i;var o=qo[i],l;for(l in o)if(o.hasOwnProperty(l)&&l in yy)return Ud[i]=o[l];return i}var vy=cc("animationend"),wy=cc("animationiteration"),_y=cc("animationstart"),xy=cc("transitionend"),Ey=new Map,Ty="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pi(i,o){Ey.set(i,o),a(o,[i])}for(var Bd=0;Bd<Ty.length;Bd++){var zd=Ty[Bd],Q1=zd.toLowerCase(),Y1=zd[0].toUpperCase()+zd.slice(1);Pi(Q1,"on"+Y1)}Pi(vy,"onAnimationEnd"),Pi(wy,"onAnimationIteration"),Pi(_y,"onAnimationStart"),Pi("dblclick","onDoubleClick"),Pi("focusin","onFocus"),Pi("focusout","onBlur"),Pi(xy,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),X1=new Set("cancel close invalid load scroll toggle".split(" ").concat(gl));function Iy(i,o,l){var d=i.type||"unknown-event";i.currentTarget=l,Uu(d,o,void 0,i),i.currentTarget=null}function Sy(i,o){o=(o&4)!==0;for(var l=0;l<i.length;l++){var d=i[l],g=d.event;d=d.listeners;e:{var w=void 0;if(o)for(var T=d.length-1;0<=T;T--){var C=d[T],L=C.instance,G=C.currentTarget;if(C=C.listener,L!==w&&g.isPropagationStopped())break e;Iy(g,C,G),w=L}else for(T=0;T<d.length;T++){if(C=d[T],L=C.instance,G=C.currentTarget,C=C.listener,L!==w&&g.isPropagationStopped())break e;Iy(g,C,G),w=L}}}if(Qn)throw i=el,Qn=!1,el=null,i}function nt(i,o){var l=o[Yd];l===void 0&&(l=o[Yd]=new Set);var d=i+"__bubble";l.has(d)||(Py(o,i,2,!1),l.add(d))}function $d(i,o,l){var d=0;o&&(d|=4),Py(l,i,d,o)}var hc="_reactListening"+Math.random().toString(36).slice(2);function yl(i){if(!i[hc]){i[hc]=!0,r.forEach(function(l){l!=="selectionchange"&&(X1.has(l)||$d(l,!1,i),$d(l,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[hc]||(o[hc]=!0,$d("selectionchange",!1,o))}}function Py(i,o,l,d){switch(al(o)){case 1:var g=st;break;case 4:g=Dd;break;default:g=ol}l=g.bind(null,o,l,i),g=void 0,!Io||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),d?g!==void 0?i.addEventListener(o,l,{capture:!0,passive:g}):i.addEventListener(o,l,!0):g!==void 0?i.addEventListener(o,l,{passive:g}):i.addEventListener(o,l,!1)}function qd(i,o,l,d,g){var w=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var T=d.tag;if(T===3||T===4){var C=d.stateNode.containerInfo;if(C===g||C.nodeType===8&&C.parentNode===g)break;if(T===4)for(T=d.return;T!==null;){var L=T.tag;if((L===3||L===4)&&(L=T.stateNode.containerInfo,L===g||L.nodeType===8&&L.parentNode===g))return;T=T.return}for(;C!==null;){if(T=Rs(C),T===null)return;if(L=T.tag,L===5||L===6){d=w=T;continue e}C=C.parentNode}}d=d.return}Za(function(){var G=w,ee=xo(l),ne=[];e:{var J=Ey.get(i);if(J!==void 0){var de=Vo,me=i;switch(i){case"keypress":if(jo(l)===0)break e;case"keydown":case"keyup":de=v;break;case"focusin":me="focus",de=Fo;break;case"focusout":me="blur",de=Fo;break;case"beforeblur":case"afterblur":de=Fo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=Mo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=tc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=K;break;case vy:case wy:case _y:de=Wr;break;case xy:de=Qe;break;case"scroll":de=jd;break;case"wheel":de=ze;break;case"copy":case"cut":case"paste":de=ic;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=S}var ge=(o&4)!==0,pt=!ge&&i==="scroll",$=ge?J!==null?J+"Capture":null:J;ge=[];for(var F=G,H;F!==null;){H=F;var se=H.stateNode;if(H.tag===5&&se!==null&&(H=se,$!==null&&(se=ft(F,$),se!=null&&ge.push(vl(F,se,H)))),pt)break;F=F.return}0<ge.length&&(J=new de(J,me,null,l,ee),ne.push({event:J,listeners:ge}))}}if((o&7)===0){e:{if(J=i==="mouseover"||i==="pointerover",de=i==="mouseout"||i==="pointerout",J&&l!==vs&&(me=l.relatedTarget||l.fromElement)&&(Rs(me)||me[Hr]))break e;if((de||J)&&(J=ee.window===ee?ee:(J=ee.ownerDocument)?J.defaultView||J.parentWindow:window,de?(me=l.relatedTarget||l.toElement,de=G,me=me?Rs(me):null,me!==null&&(pt=Yn(me),me!==pt||me.tag!==5&&me.tag!==6)&&(me=null)):(de=null,me=G),de!==me)){if(ge=Mo,se="onMouseLeave",$="onMouseEnter",F="mouse",(i==="pointerout"||i==="pointerover")&&(ge=S,se="onPointerLeave",$="onPointerEnter",F="pointer"),pt=de==null?J:Go(de),H=me==null?J:Go(me),J=new ge(se,F+"leave",de,l,ee),J.target=pt,J.relatedTarget=H,se=null,Rs(ee)===G&&(ge=new ge($,F+"enter",me,l,ee),ge.target=H,ge.relatedTarget=pt,se=ge),pt=se,de&&me)t:{for(ge=de,$=me,F=0,H=ge;H;H=Wo(H))F++;for(H=0,se=$;se;se=Wo(se))H++;for(;0<F-H;)ge=Wo(ge),F--;for(;0<H-F;)$=Wo($),H--;for(;F--;){if(ge===$||$!==null&&ge===$.alternate)break t;ge=Wo(ge),$=Wo($)}ge=null}else ge=null;de!==null&&Ay(ne,J,de,ge,!1),me!==null&&pt!==null&&Ay(ne,pt,me,ge,!0)}}e:{if(J=G?Go(G):window,de=J.nodeName&&J.nodeName.toLowerCase(),de==="select"||de==="input"&&J.type==="file")var ve=B1;else if(oy(J))if(ly)ve=W1;else{ve=$1;var xe=z1}else(de=J.nodeName)&&de.toLowerCase()==="input"&&(J.type==="checkbox"||J.type==="radio")&&(ve=q1);if(ve&&(ve=ve(i,G))){ay(ne,ve,l,ee);break e}xe&&xe(i,J,G),i==="focusout"&&(xe=J._wrapperState)&&xe.controlled&&J.type==="number"&&vo(J,"number",J.value)}switch(xe=G?Go(G):window,i){case"focusin":(oy(xe)||xe.contentEditable==="true")&&($o=xe,Od=G,ml=null);break;case"focusout":ml=Od=$o=null;break;case"mousedown":Fd=!0;break;case"contextmenu":case"mouseup":case"dragend":Fd=!1,gy(ne,l,ee);break;case"selectionchange":if(K1)break;case"keydown":case"keyup":gy(ne,l,ee)}var Ee;if(vt)e:{switch(i){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else zo?iy(i,l)&&(Se="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Se="onCompositionStart");Se&&(Cs&&l.locale!=="ko"&&(zo||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&zo&&(Ee=ll()):(In=ee,Do="value"in In?In.value:In.textContent,zo=!0)),xe=dc(G,Se),0<xe.length&&(Se=new hl(Se,i,null,l,ee),ne.push({event:Se,listeners:xe}),Ee?Se.data=Ee:(Ee=sy(l),Ee!==null&&(Se.data=Ee)))),(Ee=Sn?M1(i,l):O1(i,l))&&(G=dc(G,"onBeforeInput"),0<G.length&&(ee=new hl("onBeforeInput","beforeinput",null,l,ee),ne.push({event:ee,listeners:G}),ee.data=Ee))}Sy(ne,o)})}function vl(i,o,l){return{instance:i,listener:o,currentTarget:l}}function dc(i,o){for(var l=o+"Capture",d=[];i!==null;){var g=i,w=g.stateNode;g.tag===5&&w!==null&&(g=w,w=ft(i,l),w!=null&&d.unshift(vl(i,w,g)),w=ft(i,o),w!=null&&d.push(vl(i,w,g))),i=i.return}return d}function Wo(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Ay(i,o,l,d,g){for(var w=o._reactName,T=[];l!==null&&l!==d;){var C=l,L=C.alternate,G=C.stateNode;if(L!==null&&L===d)break;C.tag===5&&G!==null&&(C=G,g?(L=ft(l,w),L!=null&&T.unshift(vl(l,L,C))):g||(L=ft(l,w),L!=null&&T.push(vl(l,L,C)))),l=l.return}T.length!==0&&i.push({event:o,listeners:T})}var J1=/\r\n?/g,Z1=/\u0000|\uFFFD/g;function by(i){return(typeof i=="string"?i:""+i).replace(J1,`
`).replace(Z1,"")}function fc(i,o,l){if(o=by(o),by(i)!==o&&l)throw Error(t(425))}function pc(){}var Wd=null,Hd=null;function Gd(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Kd=typeof setTimeout=="function"?setTimeout:void 0,eS=typeof clearTimeout=="function"?clearTimeout:void 0,ky=typeof Promise=="function"?Promise:void 0,tS=typeof queueMicrotask=="function"?queueMicrotask:typeof ky<"u"?function(i){return ky.resolve(null).then(i).catch(nS)}:Kd;function nS(i){setTimeout(function(){throw i})}function Qd(i,o){var l=o,d=0;do{var g=l.nextSibling;if(i.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"){if(d===0){i.removeChild(g),tr(o);return}d--}else l!=="$"&&l!=="$?"&&l!=="$!"||d++;l=g}while(l);tr(o)}function Ai(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function Cy(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return i;o--}else l==="/$"&&o++}i=i.previousSibling}return null}var Ho=Math.random().toString(36).slice(2),Er="__reactFiber$"+Ho,wl="__reactProps$"+Ho,Hr="__reactContainer$"+Ho,Yd="__reactEvents$"+Ho,rS="__reactListeners$"+Ho,iS="__reactHandles$"+Ho;function Rs(i){var o=i[Er];if(o)return o;for(var l=i.parentNode;l;){if(o=l[Hr]||l[Er]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(i=Cy(i);i!==null;){if(l=i[Er])return l;i=Cy(i)}return o}i=l,l=i.parentNode}return null}function _l(i){return i=i[Er]||i[Hr],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Go(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function mc(i){return i[wl]||null}var Xd=[],Ko=-1;function bi(i){return{current:i}}function rt(i){0>Ko||(i.current=Xd[Ko],Xd[Ko]=null,Ko--)}function Ze(i,o){Ko++,Xd[Ko]=i.current,i.current=o}var ki={},Wt=bi(ki),hn=bi(!1),Ns=ki;function Qo(i,o){var l=i.type.contextTypes;if(!l)return ki;var d=i.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===o)return d.__reactInternalMemoizedMaskedChildContext;var g={},w;for(w in l)g[w]=o[w];return d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=g),g}function dn(i){return i=i.childContextTypes,i!=null}function gc(){rt(hn),rt(Wt)}function Ry(i,o,l){if(Wt.current!==ki)throw Error(t(168));Ze(Wt,o),Ze(hn,l)}function Ny(i,o,l){var d=i.stateNode;if(o=o.childContextTypes,typeof d.getChildContext!="function")return l;d=d.getChildContext();for(var g in d)if(!(g in o))throw Error(t(108,Ne(i)||"Unknown",g));return ue({},l,d)}function yc(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||ki,Ns=Wt.current,Ze(Wt,i),Ze(hn,hn.current),!0}function Dy(i,o,l){var d=i.stateNode;if(!d)throw Error(t(169));l?(i=Ny(i,o,Ns),d.__reactInternalMemoizedMergedChildContext=i,rt(hn),rt(Wt),Ze(Wt,i)):rt(hn),Ze(hn,l)}var Gr=null,vc=!1,Jd=!1;function jy(i){Gr===null?Gr=[i]:Gr.push(i)}function sS(i){vc=!0,jy(i)}function Ci(){if(!Jd&&Gr!==null){Jd=!0;var i=0,o=Fe;try{var l=Gr;for(Fe=1;i<l.length;i++){var d=l[i];do d=d(!0);while(d!==null)}Gr=null,vc=!1}catch(g){throw Gr!==null&&(Gr=Gr.slice(i+1)),bo(Ts,Ci),g}finally{Fe=o,Jd=!1}}return null}var Yo=[],Xo=0,wc=null,_c=0,Ln=[],Mn=0,Ds=null,Kr=1,Qr="";function js(i,o){Yo[Xo++]=_c,Yo[Xo++]=wc,wc=i,_c=o}function Vy(i,o,l){Ln[Mn++]=Kr,Ln[Mn++]=Qr,Ln[Mn++]=Ds,Ds=i;var d=Kr;i=Qr;var g=32-tn(d)-1;d&=~(1<<g),l+=1;var w=32-tn(o)+g;if(30<w){var T=g-g%5;w=(d&(1<<T)-1).toString(32),d>>=T,g-=T,Kr=1<<32-tn(o)+g|l<<g|d,Qr=w+i}else Kr=1<<w|l<<g|d,Qr=i}function Zd(i){i.return!==null&&(js(i,1),Vy(i,1,0))}function ef(i){for(;i===wc;)wc=Yo[--Xo],Yo[Xo]=null,_c=Yo[--Xo],Yo[Xo]=null;for(;i===Ds;)Ds=Ln[--Mn],Ln[Mn]=null,Qr=Ln[--Mn],Ln[Mn]=null,Kr=Ln[--Mn],Ln[Mn]=null}var Pn=null,An=null,ot=!1,ir=null;function Ly(i,o){var l=Bn(5,null,null,0);l.elementType="DELETED",l.stateNode=o,l.return=i,o=i.deletions,o===null?(i.deletions=[l],i.flags|=16):o.push(l)}function My(i,o){switch(i.tag){case 5:var l=i.type;return o=o.nodeType!==1||l.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,Pn=i,An=Ai(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,Pn=i,An=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(l=Ds!==null?{id:Kr,overflow:Qr}:null,i.memoizedState={dehydrated:o,treeContext:l,retryLane:1073741824},l=Bn(18,null,null,0),l.stateNode=o,l.return=i,i.child=l,Pn=i,An=null,!0):!1;default:return!1}}function tf(i){return(i.mode&1)!==0&&(i.flags&128)===0}function nf(i){if(ot){var o=An;if(o){var l=o;if(!My(i,o)){if(tf(i))throw Error(t(418));o=Ai(l.nextSibling);var d=Pn;o&&My(i,o)?Ly(d,l):(i.flags=i.flags&-4097|2,ot=!1,Pn=i)}}else{if(tf(i))throw Error(t(418));i.flags=i.flags&-4097|2,ot=!1,Pn=i}}}function Oy(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Pn=i}function xc(i){if(i!==Pn)return!1;if(!ot)return Oy(i),ot=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Gd(i.type,i.memoizedProps)),o&&(o=An)){if(tf(i))throw Fy(),Error(t(418));for(;o;)Ly(i,o),o=Ai(o.nextSibling)}if(Oy(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"){if(o===0){An=Ai(i.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++}i=i.nextSibling}An=null}}else An=Pn?Ai(i.stateNode.nextSibling):null;return!0}function Fy(){for(var i=An;i;)i=Ai(i.nextSibling)}function Jo(){An=Pn=null,ot=!1}function rf(i){ir===null?ir=[i]:ir.push(i)}var oS=Q.ReactCurrentBatchConfig;function xl(i,o,l){if(i=l.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var d=l.stateNode}if(!d)throw Error(t(147,i));var g=d,w=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===w?o.ref:(o=function(T){var C=g.refs;T===null?delete C[w]:C[w]=T},o._stringRef=w,o)}if(typeof i!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,i))}return i}function Ec(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function Uy(i){var o=i._init;return o(i._payload)}function By(i){function o($,F){if(i){var H=$.deletions;H===null?($.deletions=[F],$.flags|=16):H.push(F)}}function l($,F){if(!i)return null;for(;F!==null;)o($,F),F=F.sibling;return null}function d($,F){for($=new Map;F!==null;)F.key!==null?$.set(F.key,F):$.set(F.index,F),F=F.sibling;return $}function g($,F){return $=Oi($,F),$.index=0,$.sibling=null,$}function w($,F,H){return $.index=H,i?(H=$.alternate,H!==null?(H=H.index,H<F?($.flags|=2,F):H):($.flags|=2,F)):($.flags|=1048576,F)}function T($){return i&&$.alternate===null&&($.flags|=2),$}function C($,F,H,se){return F===null||F.tag!==6?(F=Qf(H,$.mode,se),F.return=$,F):(F=g(F,H),F.return=$,F)}function L($,F,H,se){var ve=H.type;return ve===N?ee($,F,H.props.children,se,H.key):F!==null&&(F.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===Re&&Uy(ve)===F.type)?(se=g(F,H.props),se.ref=xl($,F,H),se.return=$,se):(se=Hc(H.type,H.key,H.props,null,$.mode,se),se.ref=xl($,F,H),se.return=$,se)}function G($,F,H,se){return F===null||F.tag!==4||F.stateNode.containerInfo!==H.containerInfo||F.stateNode.implementation!==H.implementation?(F=Yf(H,$.mode,se),F.return=$,F):(F=g(F,H.children||[]),F.return=$,F)}function ee($,F,H,se,ve){return F===null||F.tag!==7?(F=zs(H,$.mode,se,ve),F.return=$,F):(F=g(F,H),F.return=$,F)}function ne($,F,H){if(typeof F=="string"&&F!==""||typeof F=="number")return F=Qf(""+F,$.mode,H),F.return=$,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Z:return H=Hc(F.type,F.key,F.props,null,$.mode,H),H.ref=xl($,null,F),H.return=$,H;case ie:return F=Yf(F,$.mode,H),F.return=$,F;case Re:var se=F._init;return ne($,se(F._payload),H)}if(Mr(F)||pe(F))return F=zs(F,$.mode,H,null),F.return=$,F;Ec($,F)}return null}function J($,F,H,se){var ve=F!==null?F.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return ve!==null?null:C($,F,""+H,se);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case Z:return H.key===ve?L($,F,H,se):null;case ie:return H.key===ve?G($,F,H,se):null;case Re:return ve=H._init,J($,F,ve(H._payload),se)}if(Mr(H)||pe(H))return ve!==null?null:ee($,F,H,se,null);Ec($,H)}return null}function de($,F,H,se,ve){if(typeof se=="string"&&se!==""||typeof se=="number")return $=$.get(H)||null,C(F,$,""+se,ve);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case Z:return $=$.get(se.key===null?H:se.key)||null,L(F,$,se,ve);case ie:return $=$.get(se.key===null?H:se.key)||null,G(F,$,se,ve);case Re:var xe=se._init;return de($,F,H,xe(se._payload),ve)}if(Mr(se)||pe(se))return $=$.get(H)||null,ee(F,$,se,ve,null);Ec(F,se)}return null}function me($,F,H,se){for(var ve=null,xe=null,Ee=F,Se=F=0,Dt=null;Ee!==null&&Se<H.length;Se++){Ee.index>Se?(Dt=Ee,Ee=null):Dt=Ee.sibling;var We=J($,Ee,H[Se],se);if(We===null){Ee===null&&(Ee=Dt);break}i&&Ee&&We.alternate===null&&o($,Ee),F=w(We,F,Se),xe===null?ve=We:xe.sibling=We,xe=We,Ee=Dt}if(Se===H.length)return l($,Ee),ot&&js($,Se),ve;if(Ee===null){for(;Se<H.length;Se++)Ee=ne($,H[Se],se),Ee!==null&&(F=w(Ee,F,Se),xe===null?ve=Ee:xe.sibling=Ee,xe=Ee);return ot&&js($,Se),ve}for(Ee=d($,Ee);Se<H.length;Se++)Dt=de(Ee,$,Se,H[Se],se),Dt!==null&&(i&&Dt.alternate!==null&&Ee.delete(Dt.key===null?Se:Dt.key),F=w(Dt,F,Se),xe===null?ve=Dt:xe.sibling=Dt,xe=Dt);return i&&Ee.forEach(function(Fi){return o($,Fi)}),ot&&js($,Se),ve}function ge($,F,H,se){var ve=pe(H);if(typeof ve!="function")throw Error(t(150));if(H=ve.call(H),H==null)throw Error(t(151));for(var xe=ve=null,Ee=F,Se=F=0,Dt=null,We=H.next();Ee!==null&&!We.done;Se++,We=H.next()){Ee.index>Se?(Dt=Ee,Ee=null):Dt=Ee.sibling;var Fi=J($,Ee,We.value,se);if(Fi===null){Ee===null&&(Ee=Dt);break}i&&Ee&&Fi.alternate===null&&o($,Ee),F=w(Fi,F,Se),xe===null?ve=Fi:xe.sibling=Fi,xe=Fi,Ee=Dt}if(We.done)return l($,Ee),ot&&js($,Se),ve;if(Ee===null){for(;!We.done;Se++,We=H.next())We=ne($,We.value,se),We!==null&&(F=w(We,F,Se),xe===null?ve=We:xe.sibling=We,xe=We);return ot&&js($,Se),ve}for(Ee=d($,Ee);!We.done;Se++,We=H.next())We=de(Ee,$,Se,We.value,se),We!==null&&(i&&We.alternate!==null&&Ee.delete(We.key===null?Se:We.key),F=w(We,F,Se),xe===null?ve=We:xe.sibling=We,xe=We);return i&&Ee.forEach(function(FS){return o($,FS)}),ot&&js($,Se),ve}function pt($,F,H,se){if(typeof H=="object"&&H!==null&&H.type===N&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case Z:e:{for(var ve=H.key,xe=F;xe!==null;){if(xe.key===ve){if(ve=H.type,ve===N){if(xe.tag===7){l($,xe.sibling),F=g(xe,H.props.children),F.return=$,$=F;break e}}else if(xe.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===Re&&Uy(ve)===xe.type){l($,xe.sibling),F=g(xe,H.props),F.ref=xl($,xe,H),F.return=$,$=F;break e}l($,xe);break}else o($,xe);xe=xe.sibling}H.type===N?(F=zs(H.props.children,$.mode,se,H.key),F.return=$,$=F):(se=Hc(H.type,H.key,H.props,null,$.mode,se),se.ref=xl($,F,H),se.return=$,$=se)}return T($);case ie:e:{for(xe=H.key;F!==null;){if(F.key===xe)if(F.tag===4&&F.stateNode.containerInfo===H.containerInfo&&F.stateNode.implementation===H.implementation){l($,F.sibling),F=g(F,H.children||[]),F.return=$,$=F;break e}else{l($,F);break}else o($,F);F=F.sibling}F=Yf(H,$.mode,se),F.return=$,$=F}return T($);case Re:return xe=H._init,pt($,F,xe(H._payload),se)}if(Mr(H))return me($,F,H,se);if(pe(H))return ge($,F,H,se);Ec($,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,F!==null&&F.tag===6?(l($,F.sibling),F=g(F,H),F.return=$,$=F):(l($,F),F=Qf(H,$.mode,se),F.return=$,$=F),T($)):l($,F)}return pt}var Zo=By(!0),zy=By(!1),Tc=bi(null),Ic=null,ea=null,sf=null;function of(){sf=ea=Ic=null}function af(i){var o=Tc.current;rt(Tc),i._currentValue=o}function lf(i,o,l){for(;i!==null;){var d=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),i===l)break;i=i.return}}function ta(i,o){Ic=i,sf=ea=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(fn=!0),i.firstContext=null)}function On(i){var o=i._currentValue;if(sf!==i)if(i={context:i,memoizedValue:o,next:null},ea===null){if(Ic===null)throw Error(t(308));ea=i,Ic.dependencies={lanes:0,firstContext:i}}else ea=ea.next=i;return o}var Vs=null;function uf(i){Vs===null?Vs=[i]:Vs.push(i)}function $y(i,o,l,d){var g=o.interleaved;return g===null?(l.next=l,uf(o)):(l.next=g.next,g.next=l),o.interleaved=l,Yr(i,d)}function Yr(i,o){i.lanes|=o;var l=i.alternate;for(l!==null&&(l.lanes|=o),l=i,i=i.return;i!==null;)i.childLanes|=o,l=i.alternate,l!==null&&(l.childLanes|=o),l=i,i=i.return;return l.tag===3?l.stateNode:null}var Ri=!1;function cf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qy(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Xr(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function Ni(i,o,l){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(qe&2)!==0){var g=d.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),d.pending=o,Yr(i,l)}return g=d.interleaved,g===null?(o.next=o,uf(d)):(o.next=g.next,g.next=o),d.interleaved=o,Yr(i,l)}function Sc(i,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194240)!==0)){var d=o.lanes;d&=i.pendingLanes,l|=d,o.lanes=l,xi(i,l)}}function Wy(i,o){var l=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var g=null,w=null;if(l=l.firstBaseUpdate,l!==null){do{var T={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};w===null?g=w=T:w=w.next=T,l=l.next}while(l!==null);w===null?g=w=o:w=w.next=o}else g=w=o;l={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:w,shared:d.shared,effects:d.effects},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=o:i.next=o,l.lastBaseUpdate=o}function Pc(i,o,l,d){var g=i.updateQueue;Ri=!1;var w=g.firstBaseUpdate,T=g.lastBaseUpdate,C=g.shared.pending;if(C!==null){g.shared.pending=null;var L=C,G=L.next;L.next=null,T===null?w=G:T.next=G,T=L;var ee=i.alternate;ee!==null&&(ee=ee.updateQueue,C=ee.lastBaseUpdate,C!==T&&(C===null?ee.firstBaseUpdate=G:C.next=G,ee.lastBaseUpdate=L))}if(w!==null){var ne=g.baseState;T=0,ee=G=L=null,C=w;do{var J=C.lane,de=C.eventTime;if((d&J)===J){ee!==null&&(ee=ee.next={eventTime:de,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var me=i,ge=C;switch(J=o,de=l,ge.tag){case 1:if(me=ge.payload,typeof me=="function"){ne=me.call(de,ne,J);break e}ne=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=ge.payload,J=typeof me=="function"?me.call(de,ne,J):me,J==null)break e;ne=ue({},ne,J);break e;case 2:Ri=!0}}C.callback!==null&&C.lane!==0&&(i.flags|=64,J=g.effects,J===null?g.effects=[C]:J.push(C))}else de={eventTime:de,lane:J,tag:C.tag,payload:C.payload,callback:C.callback,next:null},ee===null?(G=ee=de,L=ne):ee=ee.next=de,T|=J;if(C=C.next,C===null){if(C=g.shared.pending,C===null)break;J=C,C=J.next,J.next=null,g.lastBaseUpdate=J,g.shared.pending=null}}while(!0);if(ee===null&&(L=ne),g.baseState=L,g.firstBaseUpdate=G,g.lastBaseUpdate=ee,o=g.shared.interleaved,o!==null){g=o;do T|=g.lane,g=g.next;while(g!==o)}else w===null&&(g.shared.lanes=0);Os|=T,i.lanes=T,i.memoizedState=ne}}function Hy(i,o,l){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var d=i[o],g=d.callback;if(g!==null){if(d.callback=null,d=l,typeof g!="function")throw Error(t(191,g));g.call(d)}}}var El={},Tr=bi(El),Tl=bi(El),Il=bi(El);function Ls(i){if(i===El)throw Error(t(174));return i}function hf(i,o){switch(Ze(Il,o),Ze(Tl,i),Ze(Tr,El),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:St(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=St(o,i)}rt(Tr),Ze(Tr,o)}function na(){rt(Tr),rt(Tl),rt(Il)}function Gy(i){Ls(Il.current);var o=Ls(Tr.current),l=St(o,i.type);o!==l&&(Ze(Tl,i),Ze(Tr,l))}function df(i){Tl.current===i&&(rt(Tr),rt(Tl))}var lt=bi(0);function Ac(i){for(var o=i;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var ff=[];function pf(){for(var i=0;i<ff.length;i++)ff[i]._workInProgressVersionPrimary=null;ff.length=0}var bc=Q.ReactCurrentDispatcher,mf=Q.ReactCurrentBatchConfig,Ms=0,ut=null,At=null,Rt=null,kc=!1,Sl=!1,Pl=0,aS=0;function Ht(){throw Error(t(321))}function gf(i,o){if(o===null)return!1;for(var l=0;l<o.length&&l<i.length;l++)if(!rr(i[l],o[l]))return!1;return!0}function yf(i,o,l,d,g,w){if(Ms=w,ut=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,bc.current=i===null||i.memoizedState===null?hS:dS,i=l(d,g),Sl){w=0;do{if(Sl=!1,Pl=0,25<=w)throw Error(t(301));w+=1,Rt=At=null,o.updateQueue=null,bc.current=fS,i=l(d,g)}while(Sl)}if(bc.current=Nc,o=At!==null&&At.next!==null,Ms=0,Rt=At=ut=null,kc=!1,o)throw Error(t(300));return i}function vf(){var i=Pl!==0;return Pl=0,i}function Ir(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?ut.memoizedState=Rt=i:Rt=Rt.next=i,Rt}function Fn(){if(At===null){var i=ut.alternate;i=i!==null?i.memoizedState:null}else i=At.next;var o=Rt===null?ut.memoizedState:Rt.next;if(o!==null)Rt=o,At=i;else{if(i===null)throw Error(t(310));At=i,i={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},Rt===null?ut.memoizedState=Rt=i:Rt=Rt.next=i}return Rt}function Al(i,o){return typeof o=="function"?o(i):o}function wf(i){var o=Fn(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var d=At,g=d.baseQueue,w=l.pending;if(w!==null){if(g!==null){var T=g.next;g.next=w.next,w.next=T}d.baseQueue=g=w,l.pending=null}if(g!==null){w=g.next,d=d.baseState;var C=T=null,L=null,G=w;do{var ee=G.lane;if((Ms&ee)===ee)L!==null&&(L=L.next={lane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),d=G.hasEagerState?G.eagerState:i(d,G.action);else{var ne={lane:ee,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null};L===null?(C=L=ne,T=d):L=L.next=ne,ut.lanes|=ee,Os|=ee}G=G.next}while(G!==null&&G!==w);L===null?T=d:L.next=C,rr(d,o.memoizedState)||(fn=!0),o.memoizedState=d,o.baseState=T,o.baseQueue=L,l.lastRenderedState=d}if(i=l.interleaved,i!==null){g=i;do w=g.lane,ut.lanes|=w,Os|=w,g=g.next;while(g!==i)}else g===null&&(l.lanes=0);return[o.memoizedState,l.dispatch]}function _f(i){var o=Fn(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var d=l.dispatch,g=l.pending,w=o.memoizedState;if(g!==null){l.pending=null;var T=g=g.next;do w=i(w,T.action),T=T.next;while(T!==g);rr(w,o.memoizedState)||(fn=!0),o.memoizedState=w,o.baseQueue===null&&(o.baseState=w),l.lastRenderedState=w}return[w,d]}function Ky(){}function Qy(i,o){var l=ut,d=Fn(),g=o(),w=!rr(d.memoizedState,g);if(w&&(d.memoizedState=g,fn=!0),d=d.queue,xf(Jy.bind(null,l,d,i),[i]),d.getSnapshot!==o||w||Rt!==null&&Rt.memoizedState.tag&1){if(l.flags|=2048,bl(9,Xy.bind(null,l,d,g,o),void 0,null),Nt===null)throw Error(t(349));(Ms&30)!==0||Yy(l,o,g)}return g}function Yy(i,o,l){i.flags|=16384,i={getSnapshot:o,value:l},o=ut.updateQueue,o===null?(o={lastEffect:null,stores:null},ut.updateQueue=o,o.stores=[i]):(l=o.stores,l===null?o.stores=[i]:l.push(i))}function Xy(i,o,l,d){o.value=l,o.getSnapshot=d,Zy(o)&&ev(i)}function Jy(i,o,l){return l(function(){Zy(o)&&ev(i)})}function Zy(i){var o=i.getSnapshot;i=i.value;try{var l=o();return!rr(i,l)}catch{return!0}}function ev(i){var o=Yr(i,1);o!==null&&lr(o,i,1,-1)}function tv(i){var o=Ir();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Al,lastRenderedState:i},o.queue=i,i=i.dispatch=cS.bind(null,ut,i),[o.memoizedState,i]}function bl(i,o,l,d){return i={tag:i,create:o,destroy:l,deps:d,next:null},o=ut.updateQueue,o===null?(o={lastEffect:null,stores:null},ut.updateQueue=o,o.lastEffect=i.next=i):(l=o.lastEffect,l===null?o.lastEffect=i.next=i:(d=l.next,l.next=i,i.next=d,o.lastEffect=i)),i}function nv(){return Fn().memoizedState}function Cc(i,o,l,d){var g=Ir();ut.flags|=i,g.memoizedState=bl(1|o,l,void 0,d===void 0?null:d)}function Rc(i,o,l,d){var g=Fn();d=d===void 0?null:d;var w=void 0;if(At!==null){var T=At.memoizedState;if(w=T.destroy,d!==null&&gf(d,T.deps)){g.memoizedState=bl(o,l,w,d);return}}ut.flags|=i,g.memoizedState=bl(1|o,l,w,d)}function rv(i,o){return Cc(8390656,8,i,o)}function xf(i,o){return Rc(2048,8,i,o)}function iv(i,o){return Rc(4,2,i,o)}function sv(i,o){return Rc(4,4,i,o)}function ov(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function av(i,o,l){return l=l!=null?l.concat([i]):null,Rc(4,4,ov.bind(null,o,i),l)}function Ef(){}function lv(i,o){var l=Fn();o=o===void 0?null:o;var d=l.memoizedState;return d!==null&&o!==null&&gf(o,d[1])?d[0]:(l.memoizedState=[i,o],i)}function uv(i,o){var l=Fn();o=o===void 0?null:o;var d=l.memoizedState;return d!==null&&o!==null&&gf(o,d[1])?d[0]:(i=i(),l.memoizedState=[i,o],i)}function cv(i,o,l){return(Ms&21)===0?(i.baseState&&(i.baseState=!1,fn=!0),i.memoizedState=l):(rr(l,o)||(l=Ps(),ut.lanes|=l,Os|=l,i.baseState=!0),o)}function lS(i,o){var l=Fe;Fe=l!==0&&4>l?l:4,i(!0);var d=mf.transition;mf.transition={};try{i(!1),o()}finally{Fe=l,mf.transition=d}}function hv(){return Fn().memoizedState}function uS(i,o,l){var d=Li(i);if(l={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null},dv(i))fv(o,l);else if(l=$y(i,o,l,d),l!==null){var g=sn();lr(l,i,d,g),pv(l,o,d)}}function cS(i,o,l){var d=Li(i),g={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null};if(dv(i))fv(o,g);else{var w=i.alternate;if(i.lanes===0&&(w===null||w.lanes===0)&&(w=o.lastRenderedReducer,w!==null))try{var T=o.lastRenderedState,C=w(T,l);if(g.hasEagerState=!0,g.eagerState=C,rr(C,T)){var L=o.interleaved;L===null?(g.next=g,uf(o)):(g.next=L.next,L.next=g),o.interleaved=g;return}}catch{}finally{}l=$y(i,o,g,d),l!==null&&(g=sn(),lr(l,i,d,g),pv(l,o,d))}}function dv(i){var o=i.alternate;return i===ut||o!==null&&o===ut}function fv(i,o){Sl=kc=!0;var l=i.pending;l===null?o.next=o:(o.next=l.next,l.next=o),i.pending=o}function pv(i,o,l){if((l&4194240)!==0){var d=o.lanes;d&=i.pendingLanes,l|=d,o.lanes=l,xi(i,l)}}var Nc={readContext:On,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useInsertionEffect:Ht,useLayoutEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useMutableSource:Ht,useSyncExternalStore:Ht,useId:Ht,unstable_isNewReconciler:!1},hS={readContext:On,useCallback:function(i,o){return Ir().memoizedState=[i,o===void 0?null:o],i},useContext:On,useEffect:rv,useImperativeHandle:function(i,o,l){return l=l!=null?l.concat([i]):null,Cc(4194308,4,ov.bind(null,o,i),l)},useLayoutEffect:function(i,o){return Cc(4194308,4,i,o)},useInsertionEffect:function(i,o){return Cc(4,2,i,o)},useMemo:function(i,o){var l=Ir();return o=o===void 0?null:o,i=i(),l.memoizedState=[i,o],i},useReducer:function(i,o,l){var d=Ir();return o=l!==void 0?l(o):o,d.memoizedState=d.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},d.queue=i,i=i.dispatch=uS.bind(null,ut,i),[d.memoizedState,i]},useRef:function(i){var o=Ir();return i={current:i},o.memoizedState=i},useState:tv,useDebugValue:Ef,useDeferredValue:function(i){return Ir().memoizedState=i},useTransition:function(){var i=tv(!1),o=i[0];return i=lS.bind(null,i[1]),Ir().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,l){var d=ut,g=Ir();if(ot){if(l===void 0)throw Error(t(407));l=l()}else{if(l=o(),Nt===null)throw Error(t(349));(Ms&30)!==0||Yy(d,o,l)}g.memoizedState=l;var w={value:l,getSnapshot:o};return g.queue=w,rv(Jy.bind(null,d,w,i),[i]),d.flags|=2048,bl(9,Xy.bind(null,d,w,l,o),void 0,null),l},useId:function(){var i=Ir(),o=Nt.identifierPrefix;if(ot){var l=Qr,d=Kr;l=(d&~(1<<32-tn(d)-1)).toString(32)+l,o=":"+o+"R"+l,l=Pl++,0<l&&(o+="H"+l.toString(32)),o+=":"}else l=aS++,o=":"+o+"r"+l.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},dS={readContext:On,useCallback:lv,useContext:On,useEffect:xf,useImperativeHandle:av,useInsertionEffect:iv,useLayoutEffect:sv,useMemo:uv,useReducer:wf,useRef:nv,useState:function(){return wf(Al)},useDebugValue:Ef,useDeferredValue:function(i){var o=Fn();return cv(o,At.memoizedState,i)},useTransition:function(){var i=wf(Al)[0],o=Fn().memoizedState;return[i,o]},useMutableSource:Ky,useSyncExternalStore:Qy,useId:hv,unstable_isNewReconciler:!1},fS={readContext:On,useCallback:lv,useContext:On,useEffect:xf,useImperativeHandle:av,useInsertionEffect:iv,useLayoutEffect:sv,useMemo:uv,useReducer:_f,useRef:nv,useState:function(){return _f(Al)},useDebugValue:Ef,useDeferredValue:function(i){var o=Fn();return At===null?o.memoizedState=i:cv(o,At.memoizedState,i)},useTransition:function(){var i=_f(Al)[0],o=Fn().memoizedState;return[i,o]},useMutableSource:Ky,useSyncExternalStore:Qy,useId:hv,unstable_isNewReconciler:!1};function sr(i,o){if(i&&i.defaultProps){o=ue({},o),i=i.defaultProps;for(var l in i)o[l]===void 0&&(o[l]=i[l]);return o}return o}function Tf(i,o,l,d){o=i.memoizedState,l=l(d,o),l=l==null?o:ue({},o,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var Dc={isMounted:function(i){return(i=i._reactInternals)?Yn(i)===i:!1},enqueueSetState:function(i,o,l){i=i._reactInternals;var d=sn(),g=Li(i),w=Xr(d,g);w.payload=o,l!=null&&(w.callback=l),o=Ni(i,w,g),o!==null&&(lr(o,i,g,d),Sc(o,i,g))},enqueueReplaceState:function(i,o,l){i=i._reactInternals;var d=sn(),g=Li(i),w=Xr(d,g);w.tag=1,w.payload=o,l!=null&&(w.callback=l),o=Ni(i,w,g),o!==null&&(lr(o,i,g,d),Sc(o,i,g))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var l=sn(),d=Li(i),g=Xr(l,d);g.tag=2,o!=null&&(g.callback=o),o=Ni(i,g,d),o!==null&&(lr(o,i,d,l),Sc(o,i,d))}};function mv(i,o,l,d,g,w,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,w,T):o.prototype&&o.prototype.isPureReactComponent?!pl(l,d)||!pl(g,w):!0}function gv(i,o,l){var d=!1,g=ki,w=o.contextType;return typeof w=="object"&&w!==null?w=On(w):(g=dn(o)?Ns:Wt.current,d=o.contextTypes,w=(d=d!=null)?Qo(i,g):ki),o=new o(l,w),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Dc,i.stateNode=o,o._reactInternals=i,d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=g,i.__reactInternalMemoizedMaskedChildContext=w),o}function yv(i,o,l,d){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,d),o.state!==i&&Dc.enqueueReplaceState(o,o.state,null)}function If(i,o,l,d){var g=i.stateNode;g.props=l,g.state=i.memoizedState,g.refs={},cf(i);var w=o.contextType;typeof w=="object"&&w!==null?g.context=On(w):(w=dn(o)?Ns:Wt.current,g.context=Qo(i,w)),g.state=i.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(Tf(i,o,w,l),g.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(o=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),o!==g.state&&Dc.enqueueReplaceState(g,g.state,null),Pc(i,l,g,d),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308)}function ra(i,o){try{var l="",d=o;do l+=we(d),d=d.return;while(d);var g=l}catch(w){g=`
Error generating stack: `+w.message+`
`+w.stack}return{value:i,source:o,stack:g,digest:null}}function Sf(i,o,l){return{value:i,source:null,stack:l??null,digest:o??null}}function Pf(i,o){try{console.error(o.value)}catch(l){setTimeout(function(){throw l})}}var pS=typeof WeakMap=="function"?WeakMap:Map;function vv(i,o,l){l=Xr(-1,l),l.tag=3,l.payload={element:null};var d=o.value;return l.callback=function(){Uc||(Uc=!0,Bf=d),Pf(i,o)},l}function wv(i,o,l){l=Xr(-1,l),l.tag=3;var d=i.type.getDerivedStateFromError;if(typeof d=="function"){var g=o.value;l.payload=function(){return d(g)},l.callback=function(){Pf(i,o)}}var w=i.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(l.callback=function(){Pf(i,o),typeof d!="function"&&(ji===null?ji=new Set([this]):ji.add(this));var T=o.stack;this.componentDidCatch(o.value,{componentStack:T!==null?T:""})}),l}function _v(i,o,l){var d=i.pingCache;if(d===null){d=i.pingCache=new pS;var g=new Set;d.set(o,g)}else g=d.get(o),g===void 0&&(g=new Set,d.set(o,g));g.has(l)||(g.add(l),i=bS.bind(null,i,o,l),o.then(i,i))}function xv(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function Ev(i,o,l,d,g){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(o=Xr(-1,1),o.tag=2,Ni(l,o,1))),l.lanes|=1),i):(i.flags|=65536,i.lanes=g,i)}var mS=Q.ReactCurrentOwner,fn=!1;function rn(i,o,l,d){o.child=i===null?zy(o,null,l,d):Zo(o,i.child,l,d)}function Tv(i,o,l,d,g){l=l.render;var w=o.ref;return ta(o,g),d=yf(i,o,l,d,w,g),l=vf(),i!==null&&!fn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~g,Jr(i,o,g)):(ot&&l&&Zd(o),o.flags|=1,rn(i,o,d,g),o.child)}function Iv(i,o,l,d,g){if(i===null){var w=l.type;return typeof w=="function"&&!Kf(w)&&w.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(o.tag=15,o.type=w,Sv(i,o,w,d,g)):(i=Hc(l.type,null,d,o,o.mode,g),i.ref=o.ref,i.return=o,o.child=i)}if(w=i.child,(i.lanes&g)===0){var T=w.memoizedProps;if(l=l.compare,l=l!==null?l:pl,l(T,d)&&i.ref===o.ref)return Jr(i,o,g)}return o.flags|=1,i=Oi(w,d),i.ref=o.ref,i.return=o,o.child=i}function Sv(i,o,l,d,g){if(i!==null){var w=i.memoizedProps;if(pl(w,d)&&i.ref===o.ref)if(fn=!1,o.pendingProps=d=w,(i.lanes&g)!==0)(i.flags&131072)!==0&&(fn=!0);else return o.lanes=i.lanes,Jr(i,o,g)}return Af(i,o,l,d,g)}function Pv(i,o,l){var d=o.pendingProps,g=d.children,w=i!==null?i.memoizedState:null;if(d.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(sa,bn),bn|=l;else{if((l&1073741824)===0)return i=w!==null?w.baseLanes|l:l,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,Ze(sa,bn),bn|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=w!==null?w.baseLanes:l,Ze(sa,bn),bn|=d}else w!==null?(d=w.baseLanes|l,o.memoizedState=null):d=l,Ze(sa,bn),bn|=d;return rn(i,o,g,l),o.child}function Av(i,o){var l=o.ref;(i===null&&l!==null||i!==null&&i.ref!==l)&&(o.flags|=512,o.flags|=2097152)}function Af(i,o,l,d,g){var w=dn(l)?Ns:Wt.current;return w=Qo(o,w),ta(o,g),l=yf(i,o,l,d,w,g),d=vf(),i!==null&&!fn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~g,Jr(i,o,g)):(ot&&d&&Zd(o),o.flags|=1,rn(i,o,l,g),o.child)}function bv(i,o,l,d,g){if(dn(l)){var w=!0;yc(o)}else w=!1;if(ta(o,g),o.stateNode===null)Vc(i,o),gv(o,l,d),If(o,l,d,g),d=!0;else if(i===null){var T=o.stateNode,C=o.memoizedProps;T.props=C;var L=T.context,G=l.contextType;typeof G=="object"&&G!==null?G=On(G):(G=dn(l)?Ns:Wt.current,G=Qo(o,G));var ee=l.getDerivedStateFromProps,ne=typeof ee=="function"||typeof T.getSnapshotBeforeUpdate=="function";ne||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(C!==d||L!==G)&&yv(o,T,d,G),Ri=!1;var J=o.memoizedState;T.state=J,Pc(o,d,T,g),L=o.memoizedState,C!==d||J!==L||hn.current||Ri?(typeof ee=="function"&&(Tf(o,l,ee,d),L=o.memoizedState),(C=Ri||mv(o,l,C,d,J,L,G))?(ne||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(o.flags|=4194308)):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=L),T.props=d,T.state=L,T.context=G,d=C):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{T=o.stateNode,qy(i,o),C=o.memoizedProps,G=o.type===o.elementType?C:sr(o.type,C),T.props=G,ne=o.pendingProps,J=T.context,L=l.contextType,typeof L=="object"&&L!==null?L=On(L):(L=dn(l)?Ns:Wt.current,L=Qo(o,L));var de=l.getDerivedStateFromProps;(ee=typeof de=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(C!==ne||J!==L)&&yv(o,T,d,L),Ri=!1,J=o.memoizedState,T.state=J,Pc(o,d,T,g);var me=o.memoizedState;C!==ne||J!==me||hn.current||Ri?(typeof de=="function"&&(Tf(o,l,de,d),me=o.memoizedState),(G=Ri||mv(o,l,G,d,J,me,L)||!1)?(ee||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(d,me,L),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(d,me,L)),typeof T.componentDidUpdate=="function"&&(o.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof T.componentDidUpdate!="function"||C===i.memoizedProps&&J===i.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&J===i.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=me),T.props=d,T.state=me,T.context=L,d=G):(typeof T.componentDidUpdate!="function"||C===i.memoizedProps&&J===i.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&J===i.memoizedState||(o.flags|=1024),d=!1)}return bf(i,o,l,d,w,g)}function bf(i,o,l,d,g,w){Av(i,o);var T=(o.flags&128)!==0;if(!d&&!T)return g&&Dy(o,l,!1),Jr(i,o,w);d=o.stateNode,mS.current=o;var C=T&&typeof l.getDerivedStateFromError!="function"?null:d.render();return o.flags|=1,i!==null&&T?(o.child=Zo(o,i.child,null,w),o.child=Zo(o,null,C,w)):rn(i,o,C,w),o.memoizedState=d.state,g&&Dy(o,l,!0),o.child}function kv(i){var o=i.stateNode;o.pendingContext?Ry(i,o.pendingContext,o.pendingContext!==o.context):o.context&&Ry(i,o.context,!1),hf(i,o.containerInfo)}function Cv(i,o,l,d,g){return Jo(),rf(g),o.flags|=256,rn(i,o,l,d),o.child}var kf={dehydrated:null,treeContext:null,retryLane:0};function Cf(i){return{baseLanes:i,cachePool:null,transitions:null}}function Rv(i,o,l){var d=o.pendingProps,g=lt.current,w=!1,T=(o.flags&128)!==0,C;if((C=T)||(C=i!==null&&i.memoizedState===null?!1:(g&2)!==0),C?(w=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(g|=1),Ze(lt,g&1),i===null)return nf(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(T=d.children,i=d.fallback,w?(d=o.mode,w=o.child,T={mode:"hidden",children:T},(d&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=T):w=Gc(T,d,0,null),i=zs(i,d,l,null),w.return=o,i.return=o,w.sibling=i,o.child=w,o.child.memoizedState=Cf(l),o.memoizedState=kf,i):Rf(o,T));if(g=i.memoizedState,g!==null&&(C=g.dehydrated,C!==null))return gS(i,o,T,d,C,g,l);if(w){w=d.fallback,T=o.mode,g=i.child,C=g.sibling;var L={mode:"hidden",children:d.children};return(T&1)===0&&o.child!==g?(d=o.child,d.childLanes=0,d.pendingProps=L,o.deletions=null):(d=Oi(g,L),d.subtreeFlags=g.subtreeFlags&14680064),C!==null?w=Oi(C,w):(w=zs(w,T,l,null),w.flags|=2),w.return=o,d.return=o,d.sibling=w,o.child=d,d=w,w=o.child,T=i.child.memoizedState,T=T===null?Cf(l):{baseLanes:T.baseLanes|l,cachePool:null,transitions:T.transitions},w.memoizedState=T,w.childLanes=i.childLanes&~l,o.memoizedState=kf,d}return w=i.child,i=w.sibling,d=Oi(w,{mode:"visible",children:d.children}),(o.mode&1)===0&&(d.lanes=l),d.return=o,d.sibling=null,i!==null&&(l=o.deletions,l===null?(o.deletions=[i],o.flags|=16):l.push(i)),o.child=d,o.memoizedState=null,d}function Rf(i,o){return o=Gc({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function jc(i,o,l,d){return d!==null&&rf(d),Zo(o,i.child,null,l),i=Rf(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function gS(i,o,l,d,g,w,T){if(l)return o.flags&256?(o.flags&=-257,d=Sf(Error(t(422))),jc(i,o,T,d)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(w=d.fallback,g=o.mode,d=Gc({mode:"visible",children:d.children},g,0,null),w=zs(w,g,T,null),w.flags|=2,d.return=o,w.return=o,d.sibling=w,o.child=d,(o.mode&1)!==0&&Zo(o,i.child,null,T),o.child.memoizedState=Cf(T),o.memoizedState=kf,w);if((o.mode&1)===0)return jc(i,o,T,null);if(g.data==="$!"){if(d=g.nextSibling&&g.nextSibling.dataset,d)var C=d.dgst;return d=C,w=Error(t(419)),d=Sf(w,d,void 0),jc(i,o,T,d)}if(C=(T&i.childLanes)!==0,fn||C){if(d=Nt,d!==null){switch(T&-T){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(d.suspendedLanes|T))!==0?0:g,g!==0&&g!==w.retryLane&&(w.retryLane=g,Yr(i,g),lr(d,i,g,-1))}return Gf(),d=Sf(Error(t(421))),jc(i,o,T,d)}return g.data==="$?"?(o.flags|=128,o.child=i.child,o=kS.bind(null,i),g._reactRetry=o,null):(i=w.treeContext,An=Ai(g.nextSibling),Pn=o,ot=!0,ir=null,i!==null&&(Ln[Mn++]=Kr,Ln[Mn++]=Qr,Ln[Mn++]=Ds,Kr=i.id,Qr=i.overflow,Ds=o),o=Rf(o,d.children),o.flags|=4096,o)}function Nv(i,o,l){i.lanes|=o;var d=i.alternate;d!==null&&(d.lanes|=o),lf(i.return,o,l)}function Nf(i,o,l,d,g){var w=i.memoizedState;w===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:g}:(w.isBackwards=o,w.rendering=null,w.renderingStartTime=0,w.last=d,w.tail=l,w.tailMode=g)}function Dv(i,o,l){var d=o.pendingProps,g=d.revealOrder,w=d.tail;if(rn(i,o,d.children,l),d=lt.current,(d&2)!==0)d=d&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Nv(i,l,o);else if(i.tag===19)Nv(i,l,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}d&=1}if(Ze(lt,d),(o.mode&1)===0)o.memoizedState=null;else switch(g){case"forwards":for(l=o.child,g=null;l!==null;)i=l.alternate,i!==null&&Ac(i)===null&&(g=l),l=l.sibling;l=g,l===null?(g=o.child,o.child=null):(g=l.sibling,l.sibling=null),Nf(o,!1,g,l,w);break;case"backwards":for(l=null,g=o.child,o.child=null;g!==null;){if(i=g.alternate,i!==null&&Ac(i)===null){o.child=g;break}i=g.sibling,g.sibling=l,l=g,g=i}Nf(o,!0,l,null,w);break;case"together":Nf(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Vc(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function Jr(i,o,l){if(i!==null&&(o.dependencies=i.dependencies),Os|=o.lanes,(l&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,l=Oi(i,i.pendingProps),o.child=l,l.return=o;i.sibling!==null;)i=i.sibling,l=l.sibling=Oi(i,i.pendingProps),l.return=o;l.sibling=null}return o.child}function yS(i,o,l){switch(o.tag){case 3:kv(o),Jo();break;case 5:Gy(o);break;case 1:dn(o.type)&&yc(o);break;case 4:hf(o,o.stateNode.containerInfo);break;case 10:var d=o.type._context,g=o.memoizedProps.value;Ze(Tc,d._currentValue),d._currentValue=g;break;case 13:if(d=o.memoizedState,d!==null)return d.dehydrated!==null?(Ze(lt,lt.current&1),o.flags|=128,null):(l&o.child.childLanes)!==0?Rv(i,o,l):(Ze(lt,lt.current&1),i=Jr(i,o,l),i!==null?i.sibling:null);Ze(lt,lt.current&1);break;case 19:if(d=(l&o.childLanes)!==0,(i.flags&128)!==0){if(d)return Dv(i,o,l);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Ze(lt,lt.current),d)break;return null;case 22:case 23:return o.lanes=0,Pv(i,o,l)}return Jr(i,o,l)}var jv,Df,Vv,Lv;jv=function(i,o){for(var l=o.child;l!==null;){if(l.tag===5||l.tag===6)i.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Df=function(){},Vv=function(i,o,l,d){var g=i.memoizedProps;if(g!==d){i=o.stateNode,Ls(Tr.current);var w=null;switch(l){case"input":g=ms(i,g),d=ms(i,d),w=[];break;case"select":g=ue({},g,{value:void 0}),d=ue({},d,{value:void 0}),w=[];break;case"textarea":g=$a(i,g),d=$a(i,d),w=[];break;default:typeof g.onClick!="function"&&typeof d.onClick=="function"&&(i.onclick=pc)}Qa(l,d);var T;l=null;for(G in g)if(!d.hasOwnProperty(G)&&g.hasOwnProperty(G)&&g[G]!=null)if(G==="style"){var C=g[G];for(T in C)C.hasOwnProperty(T)&&(l||(l={}),l[T]="")}else G!=="dangerouslySetInnerHTML"&&G!=="children"&&G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&G!=="autoFocus"&&(s.hasOwnProperty(G)?w||(w=[]):(w=w||[]).push(G,null));for(G in d){var L=d[G];if(C=g?.[G],d.hasOwnProperty(G)&&L!==C&&(L!=null||C!=null))if(G==="style")if(C){for(T in C)!C.hasOwnProperty(T)||L&&L.hasOwnProperty(T)||(l||(l={}),l[T]="");for(T in L)L.hasOwnProperty(T)&&C[T]!==L[T]&&(l||(l={}),l[T]=L[T])}else l||(w||(w=[]),w.push(G,l)),l=L;else G==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,C=C?C.__html:void 0,L!=null&&C!==L&&(w=w||[]).push(G,L)):G==="children"?typeof L!="string"&&typeof L!="number"||(w=w||[]).push(G,""+L):G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&(s.hasOwnProperty(G)?(L!=null&&G==="onScroll"&&nt("scroll",i),w||C===L||(w=[])):(w=w||[]).push(G,L))}l&&(w=w||[]).push("style",l);var G=w;(o.updateQueue=G)&&(o.flags|=4)}},Lv=function(i,o,l,d){l!==d&&(o.flags|=4)};function kl(i,o){if(!ot)switch(i.tailMode){case"hidden":o=i.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function Gt(i){var o=i.alternate!==null&&i.alternate.child===i.child,l=0,d=0;if(o)for(var g=i.child;g!==null;)l|=g.lanes|g.childLanes,d|=g.subtreeFlags&14680064,d|=g.flags&14680064,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)l|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=d,i.childLanes=l,o}function vS(i,o,l){var d=o.pendingProps;switch(ef(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(o),null;case 1:return dn(o.type)&&gc(),Gt(o),null;case 3:return d=o.stateNode,na(),rt(hn),rt(Wt),pf(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(i===null||i.child===null)&&(xc(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,ir!==null&&(qf(ir),ir=null))),Df(i,o),Gt(o),null;case 5:df(o);var g=Ls(Il.current);if(l=o.type,i!==null&&o.stateNode!=null)Vv(i,o,l,d,g),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!d){if(o.stateNode===null)throw Error(t(166));return Gt(o),null}if(i=Ls(Tr.current),xc(o)){d=o.stateNode,l=o.type;var w=o.memoizedProps;switch(d[Er]=o,d[wl]=w,i=(o.mode&1)!==0,l){case"dialog":nt("cancel",d),nt("close",d);break;case"iframe":case"object":case"embed":nt("load",d);break;case"video":case"audio":for(g=0;g<gl.length;g++)nt(gl[g],d);break;case"source":nt("error",d);break;case"img":case"image":case"link":nt("error",d),nt("load",d);break;case"details":nt("toggle",d);break;case"input":yo(d,w),nt("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!w.multiple},nt("invalid",d);break;case"textarea":wo(d,w),nt("invalid",d)}Qa(l,w),g=null;for(var T in w)if(w.hasOwnProperty(T)){var C=w[T];T==="children"?typeof C=="string"?d.textContent!==C&&(w.suppressHydrationWarning!==!0&&fc(d.textContent,C,i),g=["children",C]):typeof C=="number"&&d.textContent!==""+C&&(w.suppressHydrationWarning!==!0&&fc(d.textContent,C,i),g=["children",""+C]):s.hasOwnProperty(T)&&C!=null&&T==="onScroll"&&nt("scroll",d)}switch(l){case"input":Lt(d),Fu(d,w,!0);break;case"textarea":Lt(d),qa(d);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(d.onclick=pc)}d=g,o.updateQueue=d,d!==null&&(o.flags|=4)}else{T=g.nodeType===9?g:g.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=It(l)),i==="http://www.w3.org/1999/xhtml"?l==="script"?(i=T.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof d.is=="string"?i=T.createElement(l,{is:d.is}):(i=T.createElement(l),l==="select"&&(T=i,d.multiple?T.multiple=!0:d.size&&(T.size=d.size))):i=T.createElementNS(i,l),i[Er]=o,i[wl]=d,jv(i,o,!1,!1),o.stateNode=i;e:{switch(T=Ya(l,d),l){case"dialog":nt("cancel",i),nt("close",i),g=d;break;case"iframe":case"object":case"embed":nt("load",i),g=d;break;case"video":case"audio":for(g=0;g<gl.length;g++)nt(gl[g],i);g=d;break;case"source":nt("error",i),g=d;break;case"img":case"image":case"link":nt("error",i),nt("load",i),g=d;break;case"details":nt("toggle",i),g=d;break;case"input":yo(i,d),g=ms(i,d),nt("invalid",i);break;case"option":g=d;break;case"select":i._wrapperState={wasMultiple:!!d.multiple},g=ue({},d,{value:void 0}),nt("invalid",i);break;case"textarea":wo(i,d),g=$a(i,d),nt("invalid",i);break;default:g=d}Qa(l,g),C=g;for(w in C)if(C.hasOwnProperty(w)){var L=C[w];w==="style"?Ga(i,L):w==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&Wa(i,L)):w==="children"?typeof L=="string"?(l!=="textarea"||L!=="")&&gi(i,L):typeof L=="number"&&gi(i,""+L):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(s.hasOwnProperty(w)?L!=null&&w==="onScroll"&&nt("scroll",i):L!=null&&M(i,w,L,T))}switch(l){case"input":Lt(i),Fu(i,d,!1);break;case"textarea":Lt(i),qa(i);break;case"option":d.value!=null&&i.setAttribute("value",""+Ve(d.value));break;case"select":i.multiple=!!d.multiple,w=d.value,w!=null?Or(i,!!d.multiple,w,!1):d.defaultValue!=null&&Or(i,!!d.multiple,d.defaultValue,!0);break;default:typeof g.onClick=="function"&&(i.onclick=pc)}switch(l){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Gt(o),null;case 6:if(i&&o.stateNode!=null)Lv(i,o,i.memoizedProps,d);else{if(typeof d!="string"&&o.stateNode===null)throw Error(t(166));if(l=Ls(Il.current),Ls(Tr.current),xc(o)){if(d=o.stateNode,l=o.memoizedProps,d[Er]=o,(w=d.nodeValue!==l)&&(i=Pn,i!==null))switch(i.tag){case 3:fc(d.nodeValue,l,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&fc(d.nodeValue,l,(i.mode&1)!==0)}w&&(o.flags|=4)}else d=(l.nodeType===9?l:l.ownerDocument).createTextNode(d),d[Er]=o,o.stateNode=d}return Gt(o),null;case 13:if(rt(lt),d=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(ot&&An!==null&&(o.mode&1)!==0&&(o.flags&128)===0)Fy(),Jo(),o.flags|=98560,w=!1;else if(w=xc(o),d!==null&&d.dehydrated!==null){if(i===null){if(!w)throw Error(t(318));if(w=o.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(t(317));w[Er]=o}else Jo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Gt(o),w=!1}else ir!==null&&(qf(ir),ir=null),w=!0;if(!w)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=l,o):(d=d!==null,d!==(i!==null&&i.memoizedState!==null)&&d&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(lt.current&1)!==0?bt===0&&(bt=3):Gf())),o.updateQueue!==null&&(o.flags|=4),Gt(o),null);case 4:return na(),Df(i,o),i===null&&yl(o.stateNode.containerInfo),Gt(o),null;case 10:return af(o.type._context),Gt(o),null;case 17:return dn(o.type)&&gc(),Gt(o),null;case 19:if(rt(lt),w=o.memoizedState,w===null)return Gt(o),null;if(d=(o.flags&128)!==0,T=w.rendering,T===null)if(d)kl(w,!1);else{if(bt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(T=Ac(i),T!==null){for(o.flags|=128,kl(w,!1),d=T.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),o.subtreeFlags=0,d=l,l=o.child;l!==null;)w=l,i=d,w.flags&=14680066,T=w.alternate,T===null?(w.childLanes=0,w.lanes=i,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=T.childLanes,w.lanes=T.lanes,w.child=T.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=T.memoizedProps,w.memoizedState=T.memoizedState,w.updateQueue=T.updateQueue,w.type=T.type,i=T.dependencies,w.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),l=l.sibling;return Ze(lt,lt.current&1|2),o.child}i=i.sibling}w.tail!==null&&Je()>oa&&(o.flags|=128,d=!0,kl(w,!1),o.lanes=4194304)}else{if(!d)if(i=Ac(T),i!==null){if(o.flags|=128,d=!0,l=i.updateQueue,l!==null&&(o.updateQueue=l,o.flags|=4),kl(w,!0),w.tail===null&&w.tailMode==="hidden"&&!T.alternate&&!ot)return Gt(o),null}else 2*Je()-w.renderingStartTime>oa&&l!==1073741824&&(o.flags|=128,d=!0,kl(w,!1),o.lanes=4194304);w.isBackwards?(T.sibling=o.child,o.child=T):(l=w.last,l!==null?l.sibling=T:o.child=T,w.last=T)}return w.tail!==null?(o=w.tail,w.rendering=o,w.tail=o.sibling,w.renderingStartTime=Je(),o.sibling=null,l=lt.current,Ze(lt,d?l&1|2:l&1),o):(Gt(o),null);case 22:case 23:return Hf(),d=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==d&&(o.flags|=8192),d&&(o.mode&1)!==0?(bn&1073741824)!==0&&(Gt(o),o.subtreeFlags&6&&(o.flags|=8192)):Gt(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function wS(i,o){switch(ef(o),o.tag){case 1:return dn(o.type)&&gc(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return na(),rt(hn),rt(Wt),pf(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return df(o),null;case 13:if(rt(lt),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));Jo()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return rt(lt),null;case 4:return na(),null;case 10:return af(o.type._context),null;case 22:case 23:return Hf(),null;case 24:return null;default:return null}}var Lc=!1,Kt=!1,_S=typeof WeakSet=="function"?WeakSet:Set,fe=null;function ia(i,o){var l=i.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(d){dt(i,o,d)}else l.current=null}function jf(i,o,l){try{l()}catch(d){dt(i,o,d)}}var Mv=!1;function xS(i,o){if(Wd=Ii,i=my(),Md(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var g=d.anchorOffset,w=d.focusNode;d=d.focusOffset;try{l.nodeType,w.nodeType}catch{l=null;break e}var T=0,C=-1,L=-1,G=0,ee=0,ne=i,J=null;t:for(;;){for(var de;ne!==l||g!==0&&ne.nodeType!==3||(C=T+g),ne!==w||d!==0&&ne.nodeType!==3||(L=T+d),ne.nodeType===3&&(T+=ne.nodeValue.length),(de=ne.firstChild)!==null;)J=ne,ne=de;for(;;){if(ne===i)break t;if(J===l&&++G===g&&(C=T),J===w&&++ee===d&&(L=T),(de=ne.nextSibling)!==null)break;ne=J,J=ne.parentNode}ne=de}l=C===-1||L===-1?null:{start:C,end:L}}else l=null}l=l||{start:0,end:0}}else l=null;for(Hd={focusedElem:i,selectionRange:l},Ii=!1,fe=o;fe!==null;)if(o=fe,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,fe=i;else for(;fe!==null;){o=fe;try{var me=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(me!==null){var ge=me.memoizedProps,pt=me.memoizedState,$=o.stateNode,F=$.getSnapshotBeforeUpdate(o.elementType===o.type?ge:sr(o.type,ge),pt);$.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var H=o.stateNode.containerInfo;H.nodeType===1?H.textContent="":H.nodeType===9&&H.documentElement&&H.removeChild(H.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(se){dt(o,o.return,se)}if(i=o.sibling,i!==null){i.return=o.return,fe=i;break}fe=o.return}return me=Mv,Mv=!1,me}function Cl(i,o,l){var d=o.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var g=d=d.next;do{if((g.tag&i)===i){var w=g.destroy;g.destroy=void 0,w!==void 0&&jf(o,l,w)}g=g.next}while(g!==d)}}function Mc(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&i)===i){var d=l.create;l.destroy=d()}l=l.next}while(l!==o)}}function Vf(i){var o=i.ref;if(o!==null){var l=i.stateNode;switch(i.tag){case 5:i=l;break;default:i=l}typeof o=="function"?o(i):o.current=i}}function Ov(i){var o=i.alternate;o!==null&&(i.alternate=null,Ov(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Er],delete o[wl],delete o[Yd],delete o[rS],delete o[iS])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Fv(i){return i.tag===5||i.tag===3||i.tag===4}function Uv(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Fv(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Lf(i,o,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?l.nodeType===8?l.parentNode.insertBefore(i,o):l.insertBefore(i,o):(l.nodeType===8?(o=l.parentNode,o.insertBefore(i,l)):(o=l,o.appendChild(i)),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=pc));else if(d!==4&&(i=i.child,i!==null))for(Lf(i,o,l),i=i.sibling;i!==null;)Lf(i,o,l),i=i.sibling}function Mf(i,o,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?l.insertBefore(i,o):l.appendChild(i);else if(d!==4&&(i=i.child,i!==null))for(Mf(i,o,l),i=i.sibling;i!==null;)Mf(i,o,l),i=i.sibling}var Ft=null,or=!1;function Di(i,o,l){for(l=l.child;l!==null;)Bv(i,o,l),l=l.sibling}function Bv(i,o,l){if(En&&typeof En.onCommitFiberUnmount=="function")try{En.onCommitFiberUnmount(Is,l)}catch{}switch(l.tag){case 5:Kt||ia(l,o);case 6:var d=Ft,g=or;Ft=null,Di(i,o,l),Ft=d,or=g,Ft!==null&&(or?(i=Ft,l=l.stateNode,i.nodeType===8?i.parentNode.removeChild(l):i.removeChild(l)):Ft.removeChild(l.stateNode));break;case 18:Ft!==null&&(or?(i=Ft,l=l.stateNode,i.nodeType===8?Qd(i.parentNode,l):i.nodeType===1&&Qd(i,l),tr(i)):Qd(Ft,l.stateNode));break;case 4:d=Ft,g=or,Ft=l.stateNode.containerInfo,or=!0,Di(i,o,l),Ft=d,or=g;break;case 0:case 11:case 14:case 15:if(!Kt&&(d=l.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){g=d=d.next;do{var w=g,T=w.destroy;w=w.tag,T!==void 0&&((w&2)!==0||(w&4)!==0)&&jf(l,o,T),g=g.next}while(g!==d)}Di(i,o,l);break;case 1:if(!Kt&&(ia(l,o),d=l.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=l.memoizedProps,d.state=l.memoizedState,d.componentWillUnmount()}catch(C){dt(l,o,C)}Di(i,o,l);break;case 21:Di(i,o,l);break;case 22:l.mode&1?(Kt=(d=Kt)||l.memoizedState!==null,Di(i,o,l),Kt=d):Di(i,o,l);break;default:Di(i,o,l)}}function zv(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var l=i.stateNode;l===null&&(l=i.stateNode=new _S),o.forEach(function(d){var g=CS.bind(null,i,d);l.has(d)||(l.add(d),d.then(g,g))})}}function ar(i,o){var l=o.deletions;if(l!==null)for(var d=0;d<l.length;d++){var g=l[d];try{var w=i,T=o,C=T;e:for(;C!==null;){switch(C.tag){case 5:Ft=C.stateNode,or=!1;break e;case 3:Ft=C.stateNode.containerInfo,or=!0;break e;case 4:Ft=C.stateNode.containerInfo,or=!0;break e}C=C.return}if(Ft===null)throw Error(t(160));Bv(w,T,g),Ft=null,or=!1;var L=g.alternate;L!==null&&(L.return=null),g.return=null}catch(G){dt(g,o,G)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)$v(o,i),o=o.sibling}function $v(i,o){var l=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(ar(o,i),Sr(i),d&4){try{Cl(3,i,i.return),Mc(3,i)}catch(ge){dt(i,i.return,ge)}try{Cl(5,i,i.return)}catch(ge){dt(i,i.return,ge)}}break;case 1:ar(o,i),Sr(i),d&512&&l!==null&&ia(l,l.return);break;case 5:if(ar(o,i),Sr(i),d&512&&l!==null&&ia(l,l.return),i.flags&32){var g=i.stateNode;try{gi(g,"")}catch(ge){dt(i,i.return,ge)}}if(d&4&&(g=i.stateNode,g!=null)){var w=i.memoizedProps,T=l!==null?l.memoizedProps:w,C=i.type,L=i.updateQueue;if(i.updateQueue=null,L!==null)try{C==="input"&&w.type==="radio"&&w.name!=null&&Ba(g,w),Ya(C,T);var G=Ya(C,w);for(T=0;T<L.length;T+=2){var ee=L[T],ne=L[T+1];ee==="style"?Ga(g,ne):ee==="dangerouslySetInnerHTML"?Wa(g,ne):ee==="children"?gi(g,ne):M(g,ee,ne,G)}switch(C){case"input":za(g,w);break;case"textarea":_o(g,w);break;case"select":var J=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!w.multiple;var de=w.value;de!=null?Or(g,!!w.multiple,de,!1):J!==!!w.multiple&&(w.defaultValue!=null?Or(g,!!w.multiple,w.defaultValue,!0):Or(g,!!w.multiple,w.multiple?[]:"",!1))}g[wl]=w}catch(ge){dt(i,i.return,ge)}}break;case 6:if(ar(o,i),Sr(i),d&4){if(i.stateNode===null)throw Error(t(162));g=i.stateNode,w=i.memoizedProps;try{g.nodeValue=w}catch(ge){dt(i,i.return,ge)}}break;case 3:if(ar(o,i),Sr(i),d&4&&l!==null&&l.memoizedState.isDehydrated)try{tr(o.containerInfo)}catch(ge){dt(i,i.return,ge)}break;case 4:ar(o,i),Sr(i);break;case 13:ar(o,i),Sr(i),g=i.child,g.flags&8192&&(w=g.memoizedState!==null,g.stateNode.isHidden=w,!w||g.alternate!==null&&g.alternate.memoizedState!==null||(Uf=Je())),d&4&&zv(i);break;case 22:if(ee=l!==null&&l.memoizedState!==null,i.mode&1?(Kt=(G=Kt)||ee,ar(o,i),Kt=G):ar(o,i),Sr(i),d&8192){if(G=i.memoizedState!==null,(i.stateNode.isHidden=G)&&!ee&&(i.mode&1)!==0)for(fe=i,ee=i.child;ee!==null;){for(ne=fe=ee;fe!==null;){switch(J=fe,de=J.child,J.tag){case 0:case 11:case 14:case 15:Cl(4,J,J.return);break;case 1:ia(J,J.return);var me=J.stateNode;if(typeof me.componentWillUnmount=="function"){d=J,l=J.return;try{o=d,me.props=o.memoizedProps,me.state=o.memoizedState,me.componentWillUnmount()}catch(ge){dt(d,l,ge)}}break;case 5:ia(J,J.return);break;case 22:if(J.memoizedState!==null){Hv(ne);continue}}de!==null?(de.return=J,fe=de):Hv(ne)}ee=ee.sibling}e:for(ee=null,ne=i;;){if(ne.tag===5){if(ee===null){ee=ne;try{g=ne.stateNode,G?(w=g.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(C=ne.stateNode,L=ne.memoizedProps.style,T=L!=null&&L.hasOwnProperty("display")?L.display:null,C.style.display=Ha("display",T))}catch(ge){dt(i,i.return,ge)}}}else if(ne.tag===6){if(ee===null)try{ne.stateNode.nodeValue=G?"":ne.memoizedProps}catch(ge){dt(i,i.return,ge)}}else if((ne.tag!==22&&ne.tag!==23||ne.memoizedState===null||ne===i)&&ne.child!==null){ne.child.return=ne,ne=ne.child;continue}if(ne===i)break e;for(;ne.sibling===null;){if(ne.return===null||ne.return===i)break e;ee===ne&&(ee=null),ne=ne.return}ee===ne&&(ee=null),ne.sibling.return=ne.return,ne=ne.sibling}}break;case 19:ar(o,i),Sr(i),d&4&&zv(i);break;case 21:break;default:ar(o,i),Sr(i)}}function Sr(i){var o=i.flags;if(o&2){try{e:{for(var l=i.return;l!==null;){if(Fv(l)){var d=l;break e}l=l.return}throw Error(t(160))}switch(d.tag){case 5:var g=d.stateNode;d.flags&32&&(gi(g,""),d.flags&=-33);var w=Uv(i);Mf(i,w,g);break;case 3:case 4:var T=d.stateNode.containerInfo,C=Uv(i);Lf(i,C,T);break;default:throw Error(t(161))}}catch(L){dt(i,i.return,L)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function ES(i,o,l){fe=i,qv(i)}function qv(i,o,l){for(var d=(i.mode&1)!==0;fe!==null;){var g=fe,w=g.child;if(g.tag===22&&d){var T=g.memoizedState!==null||Lc;if(!T){var C=g.alternate,L=C!==null&&C.memoizedState!==null||Kt;C=Lc;var G=Kt;if(Lc=T,(Kt=L)&&!G)for(fe=g;fe!==null;)T=fe,L=T.child,T.tag===22&&T.memoizedState!==null?Gv(g):L!==null?(L.return=T,fe=L):Gv(g);for(;w!==null;)fe=w,qv(w),w=w.sibling;fe=g,Lc=C,Kt=G}Wv(i)}else(g.subtreeFlags&8772)!==0&&w!==null?(w.return=g,fe=w):Wv(i)}}function Wv(i){for(;fe!==null;){var o=fe;if((o.flags&8772)!==0){var l=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Kt||Mc(5,o);break;case 1:var d=o.stateNode;if(o.flags&4&&!Kt)if(l===null)d.componentDidMount();else{var g=o.elementType===o.type?l.memoizedProps:sr(o.type,l.memoizedProps);d.componentDidUpdate(g,l.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var w=o.updateQueue;w!==null&&Hy(o,w,d);break;case 3:var T=o.updateQueue;if(T!==null){if(l=null,o.child!==null)switch(o.child.tag){case 5:l=o.child.stateNode;break;case 1:l=o.child.stateNode}Hy(o,T,l)}break;case 5:var C=o.stateNode;if(l===null&&o.flags&4){l=C;var L=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&l.focus();break;case"img":L.src&&(l.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var G=o.alternate;if(G!==null){var ee=G.memoizedState;if(ee!==null){var ne=ee.dehydrated;ne!==null&&tr(ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Kt||o.flags&512&&Vf(o)}catch(J){dt(o,o.return,J)}}if(o===i){fe=null;break}if(l=o.sibling,l!==null){l.return=o.return,fe=l;break}fe=o.return}}function Hv(i){for(;fe!==null;){var o=fe;if(o===i){fe=null;break}var l=o.sibling;if(l!==null){l.return=o.return,fe=l;break}fe=o.return}}function Gv(i){for(;fe!==null;){var o=fe;try{switch(o.tag){case 0:case 11:case 15:var l=o.return;try{Mc(4,o)}catch(L){dt(o,l,L)}break;case 1:var d=o.stateNode;if(typeof d.componentDidMount=="function"){var g=o.return;try{d.componentDidMount()}catch(L){dt(o,g,L)}}var w=o.return;try{Vf(o)}catch(L){dt(o,w,L)}break;case 5:var T=o.return;try{Vf(o)}catch(L){dt(o,T,L)}}}catch(L){dt(o,o.return,L)}if(o===i){fe=null;break}var C=o.sibling;if(C!==null){C.return=o.return,fe=C;break}fe=o.return}}var TS=Math.ceil,Oc=Q.ReactCurrentDispatcher,Of=Q.ReactCurrentOwner,Un=Q.ReactCurrentBatchConfig,qe=0,Nt=null,wt=null,Ut=0,bn=0,sa=bi(0),bt=0,Rl=null,Os=0,Fc=0,Ff=0,Nl=null,pn=null,Uf=0,oa=1/0,Zr=null,Uc=!1,Bf=null,ji=null,Bc=!1,Vi=null,zc=0,Dl=0,zf=null,$c=-1,qc=0;function sn(){return(qe&6)!==0?Je():$c!==-1?$c:$c=Je()}function Li(i){return(i.mode&1)===0?1:(qe&2)!==0&&Ut!==0?Ut&-Ut:oS.transition!==null?(qc===0&&(qc=Ps()),qc):(i=Fe,i!==0||(i=window.event,i=i===void 0?16:al(i.type)),i)}function lr(i,o,l,d){if(50<Dl)throw Dl=0,zf=null,Error(t(185));_i(i,l,d),((qe&2)===0||i!==Nt)&&(i===Nt&&((qe&2)===0&&(Fc|=l),bt===4&&Mi(i,Ut)),mn(i,d),l===1&&qe===0&&(o.mode&1)===0&&(oa=Je()+500,vc&&Ci()))}function mn(i,o){var l=i.callbackNode;Br(i,o);var d=Ss(i,i===Nt?Ut:0);if(d===0)l!==null&&nl(l),i.callbackNode=null,i.callbackPriority=0;else if(o=d&-d,i.callbackPriority!==o){if(l!=null&&nl(l),o===1)i.tag===0?sS(Qv.bind(null,i)):jy(Qv.bind(null,i)),tS(function(){(qe&6)===0&&Ci()}),l=null;else{switch(Ei(d)){case 1:l=Ts;break;case 4:l=yi;break;case 16:l=Dn;break;case 536870912:l=qu;break;default:l=Dn}l=r0(l,Kv.bind(null,i))}i.callbackPriority=o,i.callbackNode=l}}function Kv(i,o){if($c=-1,qc=0,(qe&6)!==0)throw Error(t(327));var l=i.callbackNode;if(aa()&&i.callbackNode!==l)return null;var d=Ss(i,i===Nt?Ut:0);if(d===0)return null;if((d&30)!==0||(d&i.expiredLanes)!==0||o)o=Wc(i,d);else{o=d;var g=qe;qe|=2;var w=Xv();(Nt!==i||Ut!==o)&&(Zr=null,oa=Je()+500,Us(i,o));do try{PS();break}catch(C){Yv(i,C)}while(!0);of(),Oc.current=w,qe=g,wt!==null?o=0:(Nt=null,Ut=0,o=bt)}if(o!==0){if(o===2&&(g=Tn(i),g!==0&&(d=g,o=$f(i,g))),o===1)throw l=Rl,Us(i,0),Mi(i,d),mn(i,Je()),l;if(o===6)Mi(i,d);else{if(g=i.current.alternate,(d&30)===0&&!IS(g)&&(o=Wc(i,d),o===2&&(w=Tn(i),w!==0&&(d=w,o=$f(i,w))),o===1))throw l=Rl,Us(i,0),Mi(i,d),mn(i,Je()),l;switch(i.finishedWork=g,i.finishedLanes=d,o){case 0:case 1:throw Error(t(345));case 2:Bs(i,pn,Zr);break;case 3:if(Mi(i,d),(d&130023424)===d&&(o=Uf+500-Je(),10<o)){if(Ss(i,0)!==0)break;if(g=i.suspendedLanes,(g&d)!==d){sn(),i.pingedLanes|=i.suspendedLanes&g;break}i.timeoutHandle=Kd(Bs.bind(null,i,pn,Zr),o);break}Bs(i,pn,Zr);break;case 4:if(Mi(i,d),(d&4194240)===d)break;for(o=i.eventTimes,g=-1;0<d;){var T=31-tn(d);w=1<<T,T=o[T],T>g&&(g=T),d&=~w}if(d=g,d=Je()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*TS(d/1960))-d,10<d){i.timeoutHandle=Kd(Bs.bind(null,i,pn,Zr),d);break}Bs(i,pn,Zr);break;case 5:Bs(i,pn,Zr);break;default:throw Error(t(329))}}}return mn(i,Je()),i.callbackNode===l?Kv.bind(null,i):null}function $f(i,o){var l=Nl;return i.current.memoizedState.isDehydrated&&(Us(i,o).flags|=256),i=Wc(i,o),i!==2&&(o=pn,pn=l,o!==null&&qf(o)),i}function qf(i){pn===null?pn=i:pn.push.apply(pn,i)}function IS(i){for(var o=i;;){if(o.flags&16384){var l=o.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var d=0;d<l.length;d++){var g=l[d],w=g.getSnapshot;g=g.value;try{if(!rr(w(),g))return!1}catch{return!1}}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Mi(i,o){for(o&=~Ff,o&=~Fc,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var l=31-tn(o),d=1<<l;i[l]=-1,o&=~d}}function Qv(i){if((qe&6)!==0)throw Error(t(327));aa();var o=Ss(i,0);if((o&1)===0)return mn(i,Je()),null;var l=Wc(i,o);if(i.tag!==0&&l===2){var d=Tn(i);d!==0&&(o=d,l=$f(i,d))}if(l===1)throw l=Rl,Us(i,0),Mi(i,o),mn(i,Je()),l;if(l===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,Bs(i,pn,Zr),mn(i,Je()),null}function Wf(i,o){var l=qe;qe|=1;try{return i(o)}finally{qe=l,qe===0&&(oa=Je()+500,vc&&Ci())}}function Fs(i){Vi!==null&&Vi.tag===0&&(qe&6)===0&&aa();var o=qe;qe|=1;var l=Un.transition,d=Fe;try{if(Un.transition=null,Fe=1,i)return i()}finally{Fe=d,Un.transition=l,qe=o,(qe&6)===0&&Ci()}}function Hf(){bn=sa.current,rt(sa)}function Us(i,o){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;if(l!==-1&&(i.timeoutHandle=-1,eS(l)),wt!==null)for(l=wt.return;l!==null;){var d=l;switch(ef(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&gc();break;case 3:na(),rt(hn),rt(Wt),pf();break;case 5:df(d);break;case 4:na();break;case 13:rt(lt);break;case 19:rt(lt);break;case 10:af(d.type._context);break;case 22:case 23:Hf()}l=l.return}if(Nt=i,wt=i=Oi(i.current,null),Ut=bn=o,bt=0,Rl=null,Ff=Fc=Os=0,pn=Nl=null,Vs!==null){for(o=0;o<Vs.length;o++)if(l=Vs[o],d=l.interleaved,d!==null){l.interleaved=null;var g=d.next,w=l.pending;if(w!==null){var T=w.next;w.next=g,d.next=T}l.pending=d}Vs=null}return i}function Yv(i,o){do{var l=wt;try{if(of(),bc.current=Nc,kc){for(var d=ut.memoizedState;d!==null;){var g=d.queue;g!==null&&(g.pending=null),d=d.next}kc=!1}if(Ms=0,Rt=At=ut=null,Sl=!1,Pl=0,Of.current=null,l===null||l.return===null){bt=1,Rl=o,wt=null;break}e:{var w=i,T=l.return,C=l,L=o;if(o=Ut,C.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var G=L,ee=C,ne=ee.tag;if((ee.mode&1)===0&&(ne===0||ne===11||ne===15)){var J=ee.alternate;J?(ee.updateQueue=J.updateQueue,ee.memoizedState=J.memoizedState,ee.lanes=J.lanes):(ee.updateQueue=null,ee.memoizedState=null)}var de=xv(T);if(de!==null){de.flags&=-257,Ev(de,T,C,w,o),de.mode&1&&_v(w,G,o),o=de,L=G;var me=o.updateQueue;if(me===null){var ge=new Set;ge.add(L),o.updateQueue=ge}else me.add(L);break e}else{if((o&1)===0){_v(w,G,o),Gf();break e}L=Error(t(426))}}else if(ot&&C.mode&1){var pt=xv(T);if(pt!==null){(pt.flags&65536)===0&&(pt.flags|=256),Ev(pt,T,C,w,o),rf(ra(L,C));break e}}w=L=ra(L,C),bt!==4&&(bt=2),Nl===null?Nl=[w]:Nl.push(w),w=T;do{switch(w.tag){case 3:w.flags|=65536,o&=-o,w.lanes|=o;var $=vv(w,L,o);Wy(w,$);break e;case 1:C=L;var F=w.type,H=w.stateNode;if((w.flags&128)===0&&(typeof F.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(ji===null||!ji.has(H)))){w.flags|=65536,o&=-o,w.lanes|=o;var se=wv(w,C,o);Wy(w,se);break e}}w=w.return}while(w!==null)}Zv(l)}catch(ve){o=ve,wt===l&&l!==null&&(wt=l=l.return);continue}break}while(!0)}function Xv(){var i=Oc.current;return Oc.current=Nc,i===null?Nc:i}function Gf(){(bt===0||bt===3||bt===2)&&(bt=4),Nt===null||(Os&268435455)===0&&(Fc&268435455)===0||Mi(Nt,Ut)}function Wc(i,o){var l=qe;qe|=2;var d=Xv();(Nt!==i||Ut!==o)&&(Zr=null,Us(i,o));do try{SS();break}catch(g){Yv(i,g)}while(!0);if(of(),qe=l,Oc.current=d,wt!==null)throw Error(t(261));return Nt=null,Ut=0,bt}function SS(){for(;wt!==null;)Jv(wt)}function PS(){for(;wt!==null&&!zu();)Jv(wt)}function Jv(i){var o=n0(i.alternate,i,bn);i.memoizedProps=i.pendingProps,o===null?Zv(i):wt=o,Of.current=null}function Zv(i){var o=i;do{var l=o.alternate;if(i=o.return,(o.flags&32768)===0){if(l=vS(l,o,bn),l!==null){wt=l;return}}else{if(l=wS(l,o),l!==null){l.flags&=32767,wt=l;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{bt=6,wt=null;return}}if(o=o.sibling,o!==null){wt=o;return}wt=o=i}while(o!==null);bt===0&&(bt=5)}function Bs(i,o,l){var d=Fe,g=Un.transition;try{Un.transition=null,Fe=1,AS(i,o,l,d)}finally{Un.transition=g,Fe=d}return null}function AS(i,o,l,d){do aa();while(Vi!==null);if((qe&6)!==0)throw Error(t(327));l=i.finishedWork;var g=i.finishedLanes;if(l===null)return null;if(i.finishedWork=null,i.finishedLanes=0,l===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var w=l.lanes|l.childLanes;if(Xe(i,w),i===Nt&&(wt=Nt=null,Ut=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Bc||(Bc=!0,r0(Dn,function(){return aa(),null})),w=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||w){w=Un.transition,Un.transition=null;var T=Fe;Fe=1;var C=qe;qe|=4,Of.current=null,xS(i,l),$v(l,i),G1(Hd),Ii=!!Wd,Hd=Wd=null,i.current=l,ES(l),kd(),qe=C,Fe=T,Un.transition=w}else i.current=l;if(Bc&&(Bc=!1,Vi=i,zc=g),w=i.pendingLanes,w===0&&(ji=null),Wu(l.stateNode),mn(i,Je()),o!==null)for(d=i.onRecoverableError,l=0;l<o.length;l++)g=o[l],d(g.value,{componentStack:g.stack,digest:g.digest});if(Uc)throw Uc=!1,i=Bf,Bf=null,i;return(zc&1)!==0&&i.tag!==0&&aa(),w=i.pendingLanes,(w&1)!==0?i===zf?Dl++:(Dl=0,zf=i):Dl=0,Ci(),null}function aa(){if(Vi!==null){var i=Ei(zc),o=Un.transition,l=Fe;try{if(Un.transition=null,Fe=16>i?16:i,Vi===null)var d=!1;else{if(i=Vi,Vi=null,zc=0,(qe&6)!==0)throw Error(t(331));var g=qe;for(qe|=4,fe=i.current;fe!==null;){var w=fe,T=w.child;if((fe.flags&16)!==0){var C=w.deletions;if(C!==null){for(var L=0;L<C.length;L++){var G=C[L];for(fe=G;fe!==null;){var ee=fe;switch(ee.tag){case 0:case 11:case 15:Cl(8,ee,w)}var ne=ee.child;if(ne!==null)ne.return=ee,fe=ne;else for(;fe!==null;){ee=fe;var J=ee.sibling,de=ee.return;if(Ov(ee),ee===G){fe=null;break}if(J!==null){J.return=de,fe=J;break}fe=de}}}var me=w.alternate;if(me!==null){var ge=me.child;if(ge!==null){me.child=null;do{var pt=ge.sibling;ge.sibling=null,ge=pt}while(ge!==null)}}fe=w}}if((w.subtreeFlags&2064)!==0&&T!==null)T.return=w,fe=T;else e:for(;fe!==null;){if(w=fe,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:Cl(9,w,w.return)}var $=w.sibling;if($!==null){$.return=w.return,fe=$;break e}fe=w.return}}var F=i.current;for(fe=F;fe!==null;){T=fe;var H=T.child;if((T.subtreeFlags&2064)!==0&&H!==null)H.return=T,fe=H;else e:for(T=F;fe!==null;){if(C=fe,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:Mc(9,C)}}catch(ve){dt(C,C.return,ve)}if(C===T){fe=null;break e}var se=C.sibling;if(se!==null){se.return=C.return,fe=se;break e}fe=C.return}}if(qe=g,Ci(),En&&typeof En.onPostCommitFiberRoot=="function")try{En.onPostCommitFiberRoot(Is,i)}catch{}d=!0}return d}finally{Fe=l,Un.transition=o}}return!1}function e0(i,o,l){o=ra(l,o),o=vv(i,o,1),i=Ni(i,o,1),o=sn(),i!==null&&(_i(i,1,o),mn(i,o))}function dt(i,o,l){if(i.tag===3)e0(i,i,l);else for(;o!==null;){if(o.tag===3){e0(o,i,l);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(ji===null||!ji.has(d))){i=ra(l,i),i=wv(o,i,1),o=Ni(o,i,1),i=sn(),o!==null&&(_i(o,1,i),mn(o,i));break}}o=o.return}}function bS(i,o,l){var d=i.pingCache;d!==null&&d.delete(o),o=sn(),i.pingedLanes|=i.suspendedLanes&l,Nt===i&&(Ut&l)===l&&(bt===4||bt===3&&(Ut&130023424)===Ut&&500>Je()-Uf?Us(i,0):Ff|=l),mn(i,o)}function t0(i,o){o===0&&((i.mode&1)===0?o=1:(o=Co,Co<<=1,(Co&130023424)===0&&(Co=4194304)));var l=sn();i=Yr(i,o),i!==null&&(_i(i,o,l),mn(i,l))}function kS(i){var o=i.memoizedState,l=0;o!==null&&(l=o.retryLane),t0(i,l)}function CS(i,o){var l=0;switch(i.tag){case 13:var d=i.stateNode,g=i.memoizedState;g!==null&&(l=g.retryLane);break;case 19:d=i.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(o),t0(i,l)}var n0;n0=function(i,o,l){if(i!==null)if(i.memoizedProps!==o.pendingProps||hn.current)fn=!0;else{if((i.lanes&l)===0&&(o.flags&128)===0)return fn=!1,yS(i,o,l);fn=(i.flags&131072)!==0}else fn=!1,ot&&(o.flags&1048576)!==0&&Vy(o,_c,o.index);switch(o.lanes=0,o.tag){case 2:var d=o.type;Vc(i,o),i=o.pendingProps;var g=Qo(o,Wt.current);ta(o,l),g=yf(null,o,d,i,g,l);var w=vf();return o.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,dn(d)?(w=!0,yc(o)):w=!1,o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,cf(o),g.updater=Dc,o.stateNode=g,g._reactInternals=o,If(o,d,i,l),o=bf(null,o,d,!0,w,l)):(o.tag=0,ot&&w&&Zd(o),rn(null,o,g,l),o=o.child),o;case 16:d=o.elementType;e:{switch(Vc(i,o),i=o.pendingProps,g=d._init,d=g(d._payload),o.type=d,g=o.tag=NS(d),i=sr(d,i),g){case 0:o=Af(null,o,d,i,l);break e;case 1:o=bv(null,o,d,i,l);break e;case 11:o=Tv(null,o,d,i,l);break e;case 14:o=Iv(null,o,d,sr(d.type,i),l);break e}throw Error(t(306,d,""))}return o;case 0:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:sr(d,g),Af(i,o,d,g,l);case 1:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:sr(d,g),bv(i,o,d,g,l);case 3:e:{if(kv(o),i===null)throw Error(t(387));d=o.pendingProps,w=o.memoizedState,g=w.element,qy(i,o),Pc(o,d,null,l);var T=o.memoizedState;if(d=T.element,w.isDehydrated)if(w={element:d,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},o.updateQueue.baseState=w,o.memoizedState=w,o.flags&256){g=ra(Error(t(423)),o),o=Cv(i,o,d,l,g);break e}else if(d!==g){g=ra(Error(t(424)),o),o=Cv(i,o,d,l,g);break e}else for(An=Ai(o.stateNode.containerInfo.firstChild),Pn=o,ot=!0,ir=null,l=zy(o,null,d,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Jo(),d===g){o=Jr(i,o,l);break e}rn(i,o,d,l)}o=o.child}return o;case 5:return Gy(o),i===null&&nf(o),d=o.type,g=o.pendingProps,w=i!==null?i.memoizedProps:null,T=g.children,Gd(d,g)?T=null:w!==null&&Gd(d,w)&&(o.flags|=32),Av(i,o),rn(i,o,T,l),o.child;case 6:return i===null&&nf(o),null;case 13:return Rv(i,o,l);case 4:return hf(o,o.stateNode.containerInfo),d=o.pendingProps,i===null?o.child=Zo(o,null,d,l):rn(i,o,d,l),o.child;case 11:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:sr(d,g),Tv(i,o,d,g,l);case 7:return rn(i,o,o.pendingProps,l),o.child;case 8:return rn(i,o,o.pendingProps.children,l),o.child;case 12:return rn(i,o,o.pendingProps.children,l),o.child;case 10:e:{if(d=o.type._context,g=o.pendingProps,w=o.memoizedProps,T=g.value,Ze(Tc,d._currentValue),d._currentValue=T,w!==null)if(rr(w.value,T)){if(w.children===g.children&&!hn.current){o=Jr(i,o,l);break e}}else for(w=o.child,w!==null&&(w.return=o);w!==null;){var C=w.dependencies;if(C!==null){T=w.child;for(var L=C.firstContext;L!==null;){if(L.context===d){if(w.tag===1){L=Xr(-1,l&-l),L.tag=2;var G=w.updateQueue;if(G!==null){G=G.shared;var ee=G.pending;ee===null?L.next=L:(L.next=ee.next,ee.next=L),G.pending=L}}w.lanes|=l,L=w.alternate,L!==null&&(L.lanes|=l),lf(w.return,l,o),C.lanes|=l;break}L=L.next}}else if(w.tag===10)T=w.type===o.type?null:w.child;else if(w.tag===18){if(T=w.return,T===null)throw Error(t(341));T.lanes|=l,C=T.alternate,C!==null&&(C.lanes|=l),lf(T,l,o),T=w.sibling}else T=w.child;if(T!==null)T.return=w;else for(T=w;T!==null;){if(T===o){T=null;break}if(w=T.sibling,w!==null){w.return=T.return,T=w;break}T=T.return}w=T}rn(i,o,g.children,l),o=o.child}return o;case 9:return g=o.type,d=o.pendingProps.children,ta(o,l),g=On(g),d=d(g),o.flags|=1,rn(i,o,d,l),o.child;case 14:return d=o.type,g=sr(d,o.pendingProps),g=sr(d.type,g),Iv(i,o,d,g,l);case 15:return Sv(i,o,o.type,o.pendingProps,l);case 17:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:sr(d,g),Vc(i,o),o.tag=1,dn(d)?(i=!0,yc(o)):i=!1,ta(o,l),gv(o,d,g),If(o,d,g,l),bf(null,o,d,!0,i,l);case 19:return Dv(i,o,l);case 22:return Pv(i,o,l)}throw Error(t(156,o.tag))};function r0(i,o){return bo(i,o)}function RS(i,o,l,d){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bn(i,o,l,d){return new RS(i,o,l,d)}function Kf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function NS(i){if(typeof i=="function")return Kf(i)?1:0;if(i!=null){if(i=i.$$typeof,i===B)return 11;if(i===Ke)return 14}return 2}function Oi(i,o){var l=i.alternate;return l===null?(l=Bn(i.tag,o,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=o,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&14680064,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,o=i.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l}function Hc(i,o,l,d,g,w){var T=2;if(d=i,typeof i=="function")Kf(i)&&(T=1);else if(typeof i=="string")T=5;else e:switch(i){case N:return zs(l.children,g,w,o);case A:T=8,g|=8;break;case k:return i=Bn(12,l,o,g|2),i.elementType=k,i.lanes=w,i;case b:return i=Bn(13,l,o,g),i.elementType=b,i.lanes=w,i;case he:return i=Bn(19,l,o,g),i.elementType=he,i.lanes=w,i;case Ce:return Gc(l,g,w,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case V:T=10;break e;case U:T=9;break e;case B:T=11;break e;case Ke:T=14;break e;case Re:T=16,d=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=Bn(T,l,o,g),o.elementType=i,o.type=d,o.lanes=w,o}function zs(i,o,l,d){return i=Bn(7,i,d,o),i.lanes=l,i}function Gc(i,o,l,d){return i=Bn(22,i,d,o),i.elementType=Ce,i.lanes=l,i.stateNode={isHidden:!1},i}function Qf(i,o,l){return i=Bn(6,i,null,o),i.lanes=l,i}function Yf(i,o,l){return o=Bn(4,i.children!==null?i.children:[],i.key,o),o.lanes=l,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function DS(i,o,l,d,g){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wi(0),this.expirationTimes=wi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wi(0),this.identifierPrefix=d,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Xf(i,o,l,d,g,w,T,C,L){return i=new DS(i,o,l,C,L),o===1?(o=1,w===!0&&(o|=8)):o=0,w=Bn(3,null,null,o),i.current=w,w.stateNode=i,w.memoizedState={element:d,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},cf(w),i}function jS(i,o,l){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ie,key:d==null?null:""+d,children:i,containerInfo:o,implementation:l}}function i0(i){if(!i)return ki;i=i._reactInternals;e:{if(Yn(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(dn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var l=i.type;if(dn(l))return Ny(i,l,o)}return o}function s0(i,o,l,d,g,w,T,C,L){return i=Xf(l,d,!0,i,g,w,T,C,L),i.context=i0(null),l=i.current,d=sn(),g=Li(l),w=Xr(d,g),w.callback=o??null,Ni(l,w,g),i.current.lanes=g,_i(i,g,d),mn(i,d),i}function Kc(i,o,l,d){var g=o.current,w=sn(),T=Li(g);return l=i0(l),o.context===null?o.context=l:o.pendingContext=l,o=Xr(w,T),o.payload={element:i},d=d===void 0?null:d,d!==null&&(o.callback=d),i=Ni(g,o,T),i!==null&&(lr(i,g,T,w),Sc(i,g,T)),T}function Qc(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function o0(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<o?l:o}}function Jf(i,o){o0(i,o),(i=i.alternate)&&o0(i,o)}function VS(){return null}var a0=typeof reportError=="function"?reportError:function(i){console.error(i)};function Zf(i){this._internalRoot=i}Yc.prototype.render=Zf.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));Kc(i,o,null,null)},Yc.prototype.unmount=Zf.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Fs(function(){Kc(null,i,null,null)}),o[Hr]=null}};function Yc(i){this._internalRoot=i}Yc.prototype.unstable_scheduleHydration=function(i){if(i){var o=Yu();i={blockedOn:null,target:i,priority:o};for(var l=0;l<vr.length&&o!==0&&o<vr[l].priority;l++);vr.splice(l,0,i),l===0&&Zu(i)}};function ep(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Xc(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function l0(){}function LS(i,o,l,d,g){if(g){if(typeof d=="function"){var w=d;d=function(){var G=Qc(T);w.call(G)}}var T=s0(o,d,i,0,null,!1,!1,"",l0);return i._reactRootContainer=T,i[Hr]=T.current,yl(i.nodeType===8?i.parentNode:i),Fs(),T}for(;g=i.lastChild;)i.removeChild(g);if(typeof d=="function"){var C=d;d=function(){var G=Qc(L);C.call(G)}}var L=Xf(i,0,!1,null,null,!1,!1,"",l0);return i._reactRootContainer=L,i[Hr]=L.current,yl(i.nodeType===8?i.parentNode:i),Fs(function(){Kc(o,L,l,d)}),L}function Jc(i,o,l,d,g){var w=l._reactRootContainer;if(w){var T=w;if(typeof g=="function"){var C=g;g=function(){var L=Qc(T);C.call(L)}}Kc(o,T,i,g)}else T=LS(l,o,i,g,d);return Qc(T)}Ku=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var l=vi(o.pendingLanes);l!==0&&(xi(o,l|1),mn(o,Je()),(qe&6)===0&&(oa=Je()+500,Ci()))}break;case 13:Fs(function(){var d=Yr(i,1);if(d!==null){var g=sn();lr(d,i,1,g)}}),Jf(i,1)}},Ro=function(i){if(i.tag===13){var o=Yr(i,134217728);if(o!==null){var l=sn();lr(o,i,134217728,l)}Jf(i,134217728)}},Qu=function(i){if(i.tag===13){var o=Li(i),l=Yr(i,o);if(l!==null){var d=sn();lr(l,i,o,d)}Jf(i,o)}},Yu=function(){return Fe},Xu=function(i,o){var l=Fe;try{return Fe=i,o()}finally{Fe=l}},Eo=function(i,o,l){switch(o){case"input":if(za(i,l),o=l.name,l.type==="radio"&&o!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<l.length;o++){var d=l[o];if(d!==i&&d.form===i.form){var g=mc(d);if(!g)throw Error(t(90));ps(d),za(d,g)}}}break;case"textarea":_o(i,l);break;case"select":o=l.value,o!=null&&Or(i,!!l.multiple,o,!1)}},ws=Wf,Ja=Fs;var MS={usingClientEntryPoint:!1,Events:[_l,Go,mc,gr,Xa,Wf]},jl={findFiberByHostInstance:Rs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},OS={bundleType:jl.bundleType,version:jl.version,rendererPackageName:jl.rendererPackageName,rendererConfig:jl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Q.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=tl(i),i===null?null:i.stateNode},findFiberByHostInstance:jl.findFiberByHostInstance||VS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zc.isDisabled&&Zc.supportsFiber)try{Is=Zc.inject(OS),En=Zc}catch{}}return gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MS,gn.createPortal=function(i,o){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ep(o))throw Error(t(200));return jS(i,o,null,l)},gn.createRoot=function(i,o){if(!ep(i))throw Error(t(299));var l=!1,d="",g=a0;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),o=Xf(i,1,!1,null,null,l,!1,d,g),i[Hr]=o.current,yl(i.nodeType===8?i.parentNode:i),new Zf(o)},gn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=tl(o),i=i===null?null:i.stateNode,i},gn.flushSync=function(i){return Fs(i)},gn.hydrate=function(i,o,l){if(!Xc(o))throw Error(t(200));return Jc(null,i,o,!0,l)},gn.hydrateRoot=function(i,o,l){if(!ep(i))throw Error(t(405));var d=l!=null&&l.hydratedSources||null,g=!1,w="",T=a0;if(l!=null&&(l.unstable_strictMode===!0&&(g=!0),l.identifierPrefix!==void 0&&(w=l.identifierPrefix),l.onRecoverableError!==void 0&&(T=l.onRecoverableError)),o=s0(o,null,i,1,l??null,g,!1,w,T),i[Hr]=o.current,yl(i),d)for(i=0;i<d.length;i++)l=d[i],g=l._getVersion,g=g(l._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[l,g]:o.mutableSourceEagerHydrationData.push(l,g);return new Yc(o)},gn.render=function(i,o,l){if(!Xc(o))throw Error(t(200));return Jc(null,i,o,!1,l)},gn.unmountComponentAtNode=function(i){if(!Xc(i))throw Error(t(40));return i._reactRootContainer?(Fs(function(){Jc(null,null,i,!1,function(){i._reactRootContainer=null,i[Hr]=null})}),!0):!1},gn.unstable_batchedUpdates=Wf,gn.unstable_renderSubtreeIntoContainer=function(i,o,l,d){if(!Xc(l))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Jc(i,o,l,!1,d)},gn.version="18.3.1-next-f1338f8080-20240426",gn}var g0;function ox(){if(g0)return rp.exports;g0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),rp.exports=KS(),rp.exports}var y0;function QS(){if(y0)return eh;y0=1;var n=ox();return eh.createRoot=n.createRoot,eh.hydrateRoot=n.hydrateRoot,eh}var YS=QS();ox();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nu(){return nu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},nu.apply(this,arguments)}var Ki;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Ki||(Ki={}));const v0="popstate";function XS(n){n===void 0&&(n={});function e(r,s){let{pathname:a,search:u,hash:h}=r.location;return Lp("",{pathname:a,search:u,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:Eh(s)}return ZS(e,t,null,n)}function yt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ax(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function JS(){return Math.random().toString(36).substr(2,8)}function w0(n,e){return{usr:n.state,key:n.key,idx:e}}function Lp(n,e,t,r){return t===void 0&&(t=null),nu({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Da(e):e,{state:t,key:e&&e.key||r||JS()})}function Eh(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Da(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function ZS(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,u=s.history,h=Ki.Pop,f=null,m=y();m==null&&(m=0,u.replaceState(nu({},u.state,{idx:m}),""));function y(){return(u.state||{idx:null}).idx}function _(){h=Ki.Pop;let P=y(),W=P==null?null:P-m;m=P,f&&f({action:h,location:D.location,delta:W})}function E(P,W){h=Ki.Push;let q=Lp(D.location,P,W);m=y()+1;let M=w0(q,m),Q=D.createHref(q);try{u.pushState(M,"",Q)}catch(Z){if(Z instanceof DOMException&&Z.name==="DataCloneError")throw Z;s.location.assign(Q)}a&&f&&f({action:h,location:D.location,delta:1})}function I(P,W){h=Ki.Replace;let q=Lp(D.location,P,W);m=y();let M=w0(q,m),Q=D.createHref(q);u.replaceState(M,"",Q),a&&f&&f({action:h,location:D.location,delta:0})}function R(P){let W=s.location.origin!=="null"?s.location.origin:s.location.href,q=typeof P=="string"?P:Eh(P);return q=q.replace(/ $/,"%20"),yt(W,"No window.location.(origin|href) available to create URL for href: "+q),new URL(q,W)}let D={get action(){return h},get location(){return n(s,u)},listen(P){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(v0,_),f=P,()=>{s.removeEventListener(v0,_),f=null}},createHref(P){return e(s,P)},createURL:R,encodeLocation(P){let W=R(P);return{pathname:W.pathname,search:W.search,hash:W.hash}},push:E,replace:I,go(P){return u.go(P)}};return D}var _0;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(_0||(_0={}));function eP(n,e,t){return t===void 0&&(t="/"),tP(n,e,t)}function tP(n,e,t,r){let s=typeof e=="string"?Da(e):e,a=Cm(s.pathname||"/",t);if(a==null)return null;let u=lx(n);nP(u);let h=null;for(let f=0;h==null&&f<u.length;++f){let m=pP(a);h=hP(u[f],m)}return h}function lx(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(a,u,h)=>{let f={relativePath:h===void 0?a.path||"":h,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};f.relativePath.startsWith("/")&&(yt(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let m=Yi([r,f.relativePath]),y=t.concat(f);a.children&&a.children.length>0&&(yt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),lx(a.children,e,y,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:uP(m,a.index),routesMeta:y})};return n.forEach((a,u)=>{var h;if(a.path===""||!((h=a.path)!=null&&h.includes("?")))s(a,u);else for(let f of ux(a.path))s(a,u,f)}),e}function ux(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let u=ux(r.join("/")),h=[];return h.push(...u.map(f=>f===""?a:[a,f].join("/"))),s&&h.push(...u),h.map(f=>n.startsWith("/")&&f===""?"/":f)}function nP(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:cP(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const rP=/^:[\w-]+$/,iP=3,sP=2,oP=1,aP=10,lP=-2,x0=n=>n==="*";function uP(n,e){let t=n.split("/"),r=t.length;return t.some(x0)&&(r+=lP),e&&(r+=sP),t.filter(s=>!x0(s)).reduce((s,a)=>s+(rP.test(a)?iP:a===""?oP:aP),r)}function cP(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function hP(n,e,t){let{routesMeta:r}=n,s={},a="/",u=[];for(let h=0;h<r.length;++h){let f=r[h],m=h===r.length-1,y=a==="/"?e:e.slice(a.length)||"/",_=dP({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},y),E=f.route;if(!_)return null;Object.assign(s,_.params),u.push({params:s,pathname:Yi([a,_.pathname]),pathnameBase:vP(Yi([a,_.pathnameBase])),route:E}),_.pathnameBase!=="/"&&(a=Yi([a,_.pathnameBase]))}return u}function dP(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=fP(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],u=a.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:r.reduce((m,y,_)=>{let{paramName:E,isOptional:I}=y;if(E==="*"){let D=h[_]||"";u=a.slice(0,a.length-D.length).replace(/(.)\/+$/,"$1")}const R=h[_];return I&&!R?m[E]=void 0:m[E]=(R||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:u,pattern:n}}function fP(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),ax(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,f)=>(r.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function pP(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ax(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Cm(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function mP(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?Da(n):n;return{pathname:t?t.startsWith("/")?t:gP(t,e):e,search:wP(r),hash:_P(s)}}function gP(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function op(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function yP(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Rm(n,e){let t=yP(n);return e?t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function Nm(n,e,t,r){r===void 0&&(r=!1);let s;typeof n=="string"?s=Da(n):(s=nu({},n),yt(!s.pathname||!s.pathname.includes("?"),op("?","pathname","search",s)),yt(!s.pathname||!s.pathname.includes("#"),op("#","pathname","hash",s)),yt(!s.search||!s.search.includes("#"),op("#","search","hash",s)));let a=n===""||s.pathname==="",u=a?"/":s.pathname,h;if(u==null)h=t;else{let _=e.length-1;if(!r&&u.startsWith("..")){let E=u.split("/");for(;E[0]==="..";)E.shift(),_-=1;s.pathname=E.join("/")}h=_>=0?e[_]:"/"}let f=mP(s,h),m=u&&u!=="/"&&u.endsWith("/"),y=(a||u===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(m||y)&&(f.pathname+="/"),f}const Yi=n=>n.join("/").replace(/\/\/+/g,"/"),vP=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),wP=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,_P=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function xP(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const cx=["post","put","patch","delete"];new Set(cx);const EP=["get",...cx];new Set(EP);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ru(){return ru=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ru.apply(this,arguments)}const Dm=j.createContext(null),TP=j.createContext(null),ls=j.createContext(null),Kh=j.createContext(null),di=j.createContext({outlet:null,matches:[],isDataRoute:!1}),hx=j.createContext(null);function IP(n,e){let{relative:t}=e===void 0?{}:e;ja()||yt(!1);let{basename:r,navigator:s}=j.useContext(ls),{hash:a,pathname:u,search:h}=px(n,{relative:t}),f=u;return r!=="/"&&(f=u==="/"?r:Yi([r,u])),s.createHref({pathname:f,search:h,hash:a})}function ja(){return j.useContext(Kh)!=null}function Va(){return ja()||yt(!1),j.useContext(Kh).location}function dx(n){j.useContext(ls).static||j.useLayoutEffect(n)}function fi(){let{isDataRoute:n}=j.useContext(di);return n?MP():SP()}function SP(){ja()||yt(!1);let n=j.useContext(Dm),{basename:e,future:t,navigator:r}=j.useContext(ls),{matches:s}=j.useContext(di),{pathname:a}=Va(),u=JSON.stringify(Rm(s,t.v7_relativeSplatPath)),h=j.useRef(!1);return dx(()=>{h.current=!0}),j.useCallback(function(m,y){if(y===void 0&&(y={}),!h.current)return;if(typeof m=="number"){r.go(m);return}let _=Nm(m,JSON.parse(u),a,y.relative==="path");n==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Yi([e,_.pathname])),(y.replace?r.replace:r.push)(_,y.state,y)},[e,r,u,a,n])}function fx(){let{matches:n}=j.useContext(di),e=n[n.length-1];return e?e.params:{}}function px(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=j.useContext(ls),{matches:s}=j.useContext(di),{pathname:a}=Va(),u=JSON.stringify(Rm(s,r.v7_relativeSplatPath));return j.useMemo(()=>Nm(n,JSON.parse(u),a,t==="path"),[n,u,a,t])}function PP(n,e){return AP(n,e)}function AP(n,e,t,r){ja()||yt(!1);let{navigator:s}=j.useContext(ls),{matches:a}=j.useContext(di),u=a[a.length-1],h=u?u.params:{};u&&u.pathname;let f=u?u.pathnameBase:"/";u&&u.route;let m=Va(),y;if(e){var _;let P=typeof e=="string"?Da(e):e;f==="/"||(_=P.pathname)!=null&&_.startsWith(f)||yt(!1),y=P}else y=m;let E=y.pathname||"/",I=E;if(f!=="/"){let P=f.replace(/^\//,"").split("/");I="/"+E.replace(/^\//,"").split("/").slice(P.length).join("/")}let R=eP(n,{pathname:I}),D=NP(R&&R.map(P=>Object.assign({},P,{params:Object.assign({},h,P.params),pathname:Yi([f,s.encodeLocation?s.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?f:Yi([f,s.encodeLocation?s.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),a,t,r);return e&&D?j.createElement(Kh.Provider,{value:{location:ru({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:Ki.Pop}},D):D}function bP(){let n=LP(),e=xP(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),t?j.createElement("pre",{style:s},t):null,null)}const kP=j.createElement(bP,null);class CP extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?j.createElement(di.Provider,{value:this.props.routeContext},j.createElement(hx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RP(n){let{routeContext:e,match:t,children:r}=n,s=j.useContext(Dm);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),j.createElement(di.Provider,{value:e},r)}function NP(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let u=n,h=(s=t)==null?void 0:s.errors;if(h!=null){let y=u.findIndex(_=>_.route.id&&h?.[_.route.id]!==void 0);y>=0||yt(!1),u=u.slice(0,Math.min(u.length,y+1))}let f=!1,m=-1;if(t&&r&&r.v7_partialHydration)for(let y=0;y<u.length;y++){let _=u[y];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(m=y),_.route.id){let{loaderData:E,errors:I}=t,R=_.route.loader&&E[_.route.id]===void 0&&(!I||I[_.route.id]===void 0);if(_.route.lazy||R){f=!0,m>=0?u=u.slice(0,m+1):u=[u[0]];break}}}return u.reduceRight((y,_,E)=>{let I,R=!1,D=null,P=null;t&&(I=h&&_.route.id?h[_.route.id]:void 0,D=_.route.errorElement||kP,f&&(m<0&&E===0?(OP("route-fallback"),R=!0,P=null):m===E&&(R=!0,P=_.route.hydrateFallbackElement||null)));let W=e.concat(u.slice(0,E+1)),q=()=>{let M;return I?M=D:R?M=P:_.route.Component?M=j.createElement(_.route.Component,null):_.route.element?M=_.route.element:M=y,j.createElement(RP,{match:_,routeContext:{outlet:y,matches:W,isDataRoute:t!=null},children:M})};return t&&(_.route.ErrorBoundary||_.route.errorElement||E===0)?j.createElement(CP,{location:t.location,revalidation:t.revalidation,component:D,error:I,children:q(),routeContext:{outlet:null,matches:W,isDataRoute:!0}}):q()},null)}var mx=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(mx||{}),gx=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(gx||{});function DP(n){let e=j.useContext(Dm);return e||yt(!1),e}function jP(n){let e=j.useContext(TP);return e||yt(!1),e}function VP(n){let e=j.useContext(di);return e||yt(!1),e}function yx(n){let e=VP(),t=e.matches[e.matches.length-1];return t.route.id||yt(!1),t.route.id}function LP(){var n;let e=j.useContext(hx),t=jP(),r=yx();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function MP(){let{router:n}=DP(mx.UseNavigateStable),e=yx(gx.UseNavigateStable),t=j.useRef(!1);return dx(()=>{t.current=!0}),j.useCallback(function(s,a){a===void 0&&(a={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,ru({fromRouteId:e},a)))},[n,e])}const E0={};function OP(n,e,t){E0[n]||(E0[n]=!0)}function FP(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function vx(n){let{to:e,replace:t,state:r,relative:s}=n;ja()||yt(!1);let{future:a,static:u}=j.useContext(ls),{matches:h}=j.useContext(di),{pathname:f}=Va(),m=fi(),y=Nm(e,Rm(h,a.v7_relativeSplatPath),f,s==="path"),_=JSON.stringify(y);return j.useEffect(()=>m(JSON.parse(_),{replace:t,state:r,relative:s}),[m,_,s,t,r]),null}function Pr(n){yt(!1)}function UP(n){let{basename:e="/",children:t=null,location:r,navigationType:s=Ki.Pop,navigator:a,static:u=!1,future:h}=n;ja()&&yt(!1);let f=e.replace(/^\/*/,"/"),m=j.useMemo(()=>({basename:f,navigator:a,static:u,future:ru({v7_relativeSplatPath:!1},h)}),[f,h,a,u]);typeof r=="string"&&(r=Da(r));let{pathname:y="/",search:_="",hash:E="",state:I=null,key:R="default"}=r,D=j.useMemo(()=>{let P=Cm(y,f);return P==null?null:{location:{pathname:P,search:_,hash:E,state:I,key:R},navigationType:s}},[f,y,_,E,I,R,s]);return D==null?null:j.createElement(ls.Provider,{value:m},j.createElement(Kh.Provider,{children:t,value:D}))}function BP(n){let{children:e,location:t}=n;return PP(Mp(e),t)}new Promise(()=>{});function Mp(n,e){e===void 0&&(e=[]);let t=[];return j.Children.forEach(n,(r,s)=>{if(!j.isValidElement(r))return;let a=[...e,s];if(r.type===j.Fragment){t.push.apply(t,Mp(r.props.children,a));return}r.type!==Pr&&yt(!1),!r.props.index||!r.props.children||yt(!1);let u={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=Mp(r.props.children,a)),t.push(u)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Op(){return Op=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Op.apply(this,arguments)}function zP(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function $P(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function qP(n,e){return n.button===0&&(!e||e==="_self")&&!$P(n)}function Fp(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(s=>[t,s]):[[t,r]])},[]))}function WP(n,e){let t=Fp(n);return e&&e.forEach((r,s)=>{t.has(s)||e.getAll(s).forEach(a=>{t.append(s,a)})}),t}const HP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],GP="6";try{window.__reactRouterVersion=GP}catch{}const KP="startTransition",T0=WS[KP];function QP(n){let{basename:e,children:t,future:r,window:s}=n,a=j.useRef();a.current==null&&(a.current=XS({window:s,v5Compat:!0}));let u=a.current,[h,f]=j.useState({action:u.action,location:u.location}),{v7_startTransition:m}=r||{},y=j.useCallback(_=>{m&&T0?T0(()=>f(_)):f(_)},[f,m]);return j.useLayoutEffect(()=>u.listen(y),[u,y]),j.useEffect(()=>FP(r),[r]),j.createElement(UP,{basename:e,children:t,location:h.location,navigationType:h.action,navigator:u,future:r})}const YP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",XP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ge=j.forwardRef(function(e,t){let{onClick:r,relative:s,reloadDocument:a,replace:u,state:h,target:f,to:m,preventScrollReset:y,viewTransition:_}=e,E=zP(e,HP),{basename:I}=j.useContext(ls),R,D=!1;if(typeof m=="string"&&XP.test(m)&&(R=m,YP))try{let M=new URL(window.location.href),Q=m.startsWith("//")?new URL(M.protocol+m):new URL(m),Z=Cm(Q.pathname,I);Q.origin===M.origin&&Z!=null?m=Z+Q.search+Q.hash:D=!0}catch{}let P=IP(m,{relative:s}),W=JP(m,{replace:u,state:h,target:f,preventScrollReset:y,relative:s,viewTransition:_});function q(M){r&&r(M),M.defaultPrevented||W(M)}return j.createElement("a",Op({},E,{href:R||P,onClick:D||a?r:q,ref:t,target:f}))});var I0;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(I0||(I0={}));var S0;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(S0||(S0={}));function JP(n,e){let{target:t,replace:r,state:s,preventScrollReset:a,relative:u,viewTransition:h}=e===void 0?{}:e,f=fi(),m=Va(),y=px(n,{relative:u});return j.useCallback(_=>{if(qP(_,t)){_.preventDefault();let E=r!==void 0?r:Eh(m)===Eh(y);f(n,{replace:E,state:s,preventScrollReset:a,relative:u,viewTransition:h})}},[m,f,y,r,s,t,n,a,u,h])}function ZP(n){let e=j.useRef(Fp(n)),t=j.useRef(!1),r=Va(),s=j.useMemo(()=>WP(r.search,t.current?null:e.current),[r.search]),a=fi(),u=j.useCallback((h,f)=>{const m=Fp(typeof h=="function"?h(s):h);t.current=!0,a("?"+m,f)},[a,s]);return[s,u]}var P0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},eA=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],u=n[t++],h=n[t++],f=((s&7)<<18|(a&63)<<12|(u&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],u=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|u&63)}}return e.join("")},_x={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const a=n[s],u=s+1<n.length,h=u?n[s+1]:0,f=s+2<n.length,m=f?n[s+2]:0,y=a>>2,_=(a&3)<<4|h>>4;let E=(h&15)<<2|m>>6,I=m&63;f||(I=64,u||(E=64)),r.push(t[y],t[_],t[E],t[I])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(wx(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):eA(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],h=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const _=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||h==null||m==null||_==null)throw new tA;const E=a<<2|h>>4;if(r.push(E),m!==64){const I=h<<4&240|m>>2;if(r.push(I),_!==64){const R=m<<6&192|_;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class tA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nA=function(n){const e=wx(n);return _x.encodeByteArray(e,!0)},Th=function(n){return nA(n).replace(/\./g,"")},xx=function(n){try{return _x.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=()=>rA().__FIREBASE_DEFAULTS__,sA=()=>{if(typeof process>"u"||typeof P0>"u")return;const n=P0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},oA=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&xx(n[1]);return e&&JSON.parse(e)},Qh=()=>{try{return iA()||sA()||oA()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Ex=n=>{var e,t;return(t=(e=Qh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},aA=n=>{const e=Ex(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Tx=()=>{var n;return(n=Qh())===null||n===void 0?void 0:n.config},Ix=n=>{var e;return(e=Qh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Th(JSON.stringify(t)),Th(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(en())}function hA(){var n;const e=(n=Qh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Sx(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function fA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function pA(){const n=en();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function mA(){return!hA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Px(){try{return typeof indexedDB=="object"}catch{return!1}}function Ax(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}function gA(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA="FirebaseError";class pr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=yA,Object.setPrototypeOf(this,pr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,uo.prototype.create)}}class uo{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],u=a?vA(a,r):"Error",h=`${this.serviceName}: ${u} (${s}).`;return new pr(s,h,r)}}function vA(n,e){return n.replace(wA,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const wA=/\{\$([^}]+)}/g;function _A(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function iu(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const a=n[s],u=e[s];if(A0(a)&&A0(u)){if(!iu(a,u))return!1}else if(a!==u)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function A0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Fl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function Ul(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function xA(n,e){const t=new EA(n,e);return t.subscribe.bind(t)}class EA{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");TA(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=ap),s.error===void 0&&(s.error=ap),s.complete===void 0&&(s.complete=ap);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function TA(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ap(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA=1e3,SA=2,PA=14400*1e3,AA=.5;function b0(n,e=IA,t=SA){const r=e*Math.pow(t,n),s=Math.round(AA*r*(Math.random()-.5)*2);return Math.min(PA,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(n){return n&&n._delegate?n._delegate:n}class hr{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new lA;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),s=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CA(e))try{this.getOrInitializeService({instanceIdentifier:qs})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=qs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qs){return this.instances.has(e)}getOptions(e=qs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);r===h&&u.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const u=this.instances.get(s);return u&&e(u,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:kA(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=qs){return this.component?this.component.multipleInstances?e:qs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kA(n){return n===qs?void 0:n}function CA(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new bA(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ue||(Ue={}));const NA={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},DA=Ue.INFO,jA={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},VA=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=jA[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Yh{constructor(e){this.name=e,this._logLevel=DA,this._logHandler=VA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?NA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const LA=(n,e)=>e.some(t=>n instanceof t);let k0,C0;function MA(){return k0||(k0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OA(){return C0||(C0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bx=new WeakMap,Up=new WeakMap,kx=new WeakMap,lp=new WeakMap,jm=new WeakMap;function FA(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(Xi(n.result)),s()},u=()=>{r(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&bx.set(t,n)}).catch(()=>{}),jm.set(e,n),e}function UA(n){if(Up.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),s()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});Up.set(n,e)}let Bp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Up.get(n);if(e==="objectStoreNames")return n.objectStoreNames||kx.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Xi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function BA(n){Bp=n(Bp)}function zA(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(up(this),e,...t);return kx.set(r,e.sort?e.sort():[e]),Xi(r)}:OA().includes(n)?function(...e){return n.apply(up(this),e),Xi(bx.get(this))}:function(...e){return Xi(n.apply(up(this),e))}}function $A(n){return typeof n=="function"?zA(n):(n instanceof IDBTransaction&&UA(n),LA(n,MA())?new Proxy(n,Bp):n)}function Xi(n){if(n instanceof IDBRequest)return FA(n);if(lp.has(n))return lp.get(n);const e=$A(n);return e!==n&&(lp.set(n,e),jm.set(e,n)),e}const up=n=>jm.get(n);function Cx(n,e,{blocked:t,upgrade:r,blocking:s,terminated:a}={}){const u=indexedDB.open(n,e),h=Xi(u);return r&&u.addEventListener("upgradeneeded",f=>{r(Xi(u.result),f.oldVersion,f.newVersion,Xi(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),h.then(f=>{a&&f.addEventListener("close",()=>a()),s&&f.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const qA=["get","getKey","getAll","getAllKeys","count"],WA=["put","add","delete","clear"],cp=new Map;function R0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(cp.get(e))return cp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=WA.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||qA.includes(t)))return;const a=async function(u,...h){const f=this.transaction(u,s?"readwrite":"readonly");let m=f.store;return r&&(m=m.index(h.shift())),(await Promise.all([m[t](...h),s&&f.done]))[0]};return cp.set(e,a),a}BA(n=>({...n,get:(e,t,r)=>R0(e,t)||n.get(e,t,r),has:(e,t)=>!!R0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(GA(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function GA(n){const e=n.getComponent();return e?.type==="VERSION"}const zp="@firebase/app",N0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai=new Yh("@firebase/app"),KA="@firebase/app-compat",QA="@firebase/analytics-compat",YA="@firebase/analytics",XA="@firebase/app-check-compat",JA="@firebase/app-check",ZA="@firebase/auth",eb="@firebase/auth-compat",tb="@firebase/database",nb="@firebase/data-connect",rb="@firebase/database-compat",ib="@firebase/functions",sb="@firebase/functions-compat",ob="@firebase/installations",ab="@firebase/installations-compat",lb="@firebase/messaging",ub="@firebase/messaging-compat",cb="@firebase/performance",hb="@firebase/performance-compat",db="@firebase/remote-config",fb="@firebase/remote-config-compat",pb="@firebase/storage",mb="@firebase/storage-compat",gb="@firebase/firestore",yb="@firebase/vertexai-preview",vb="@firebase/firestore-compat",wb="firebase",_b="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p="[DEFAULT]",xb={[zp]:"fire-core",[KA]:"fire-core-compat",[YA]:"fire-analytics",[QA]:"fire-analytics-compat",[JA]:"fire-app-check",[XA]:"fire-app-check-compat",[ZA]:"fire-auth",[eb]:"fire-auth-compat",[tb]:"fire-rtdb",[nb]:"fire-data-connect",[rb]:"fire-rtdb-compat",[ib]:"fire-fn",[sb]:"fire-fn-compat",[ob]:"fire-iid",[ab]:"fire-iid-compat",[lb]:"fire-fcm",[ub]:"fire-fcm-compat",[cb]:"fire-perf",[hb]:"fire-perf-compat",[db]:"fire-rc",[fb]:"fire-rc-compat",[pb]:"fire-gcs",[mb]:"fire-gcs-compat",[gb]:"fire-fst",[vb]:"fire-fst-compat",[yb]:"fire-vertex","fire-js":"fire-js",[wb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih=new Map,Eb=new Map,qp=new Map;function D0(n,e){try{n.container.addComponent(e)}catch(t){ai.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function jr(n){const e=n.name;if(qp.has(e))return ai.debug(`There were multiple attempts to register component ${e}.`),!1;qp.set(e,n);for(const t of Ih.values())D0(t,n);for(const t of Eb.values())D0(t,n);return!0}function co(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function cr(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ji=new uo("app","Firebase",Tb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ji.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La=_b;function Rx(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:$p,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ji.create("bad-app-name",{appName:String(s)});if(t||(t=Tx()),!t)throw Ji.create("no-options");const a=Ih.get(s);if(a){if(iu(t,a.options)&&iu(r,a.config))return a;throw Ji.create("duplicate-app",{appName:s})}const u=new RA(s);for(const f of qp.values())u.addComponent(f);const h=new Ib(t,r,u);return Ih.set(s,h),h}function Vm(n=$p){const e=Ih.get(n);if(!e&&n===$p&&Tx())return Rx();if(!e)throw Ji.create("no-app",{appName:n});return e}function qn(n,e,t){var r;let s=(r=xb[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const h=[`Unable to register library "${s}" with version "${e}":`];a&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ai.warn(h.join(" "));return}jr(new hr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb="firebase-heartbeat-database",Pb=1,su="firebase-heartbeat-store";let hp=null;function Nx(){return hp||(hp=Cx(Sb,Pb,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(su)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ji.create("idb-open",{originalErrorMessage:n.message})})),hp}async function Ab(n){try{const t=(await Nx()).transaction(su),r=await t.objectStore(su).get(Dx(n));return await t.done,r}catch(e){if(e instanceof pr)ai.warn(e.message);else{const t=Ji.create("idb-get",{originalErrorMessage:e?.message});ai.warn(t.message)}}}async function j0(n,e){try{const r=(await Nx()).transaction(su,"readwrite");await r.objectStore(su).put(e,Dx(n)),await r.done}catch(t){if(t instanceof pr)ai.warn(t.message);else{const r=Ji.create("idb-set",{originalErrorMessage:t?.message});ai.warn(r.message)}}}function Dx(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb=1024,kb=720*60*60*1e3;class Cb{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Nb(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=V0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(u=>{const h=new Date(u.date).valueOf();return Date.now()-h<=kb}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ai.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=V0(),{heartbeatsToSend:r,unsentEntries:s}=Rb(this._heartbeatsCache.heartbeats),a=Th(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return ai.warn(t),""}}}function V0(){return new Date().toISOString().substring(0,10)}function Rb(n,e=bb){const t=[];let r=n.slice();for(const s of n){const a=t.find(u=>u.agent===s.agent);if(a){if(a.dates.push(s.date),L0(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),L0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Nb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Px()?Ax().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Ab(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return j0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return j0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function L0(n){return Th(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(n){jr(new hr("platform-logger",e=>new HA(e),"PRIVATE")),jr(new hr("heartbeat",e=>new Cb(e),"PRIVATE")),qn(zp,N0,n),qn(zp,N0,"esm2017"),qn("fire-js","")}Db("");function Lm(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function jx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jb=jx,Vx=new uo("auth","Firebase",jx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh=new Yh("@firebase/auth");function Vb(n,...e){Sh.logLevel<=Ue.WARN&&Sh.warn(`Auth (${La}): ${n}`,...e)}function hh(n,...e){Sh.logLevel<=Ue.ERROR&&Sh.error(`Auth (${La}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(n,...e){throw Mm(n,...e)}function Ar(n,...e){return Mm(n,...e)}function Lx(n,e,t){const r=Object.assign(Object.assign({},jb()),{[e]:t});return new uo("auth","Firebase",r).create(e,{appName:n.name})}function br(n){return Lx(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Mm(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Vx.create(n,...e)}function Ie(n,e,...t){if(!n)throw Mm(e,...t)}function ei(n){const e="INTERNAL ASSERTION FAILED: "+n;throw hh(e),new Error(e)}function li(n,e){n||ei(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Lb(){return M0()==="http:"||M0()==="https:"}function M0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Lb()||Sx()||"connection"in navigator)?navigator.onLine:!0}function Ob(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,t){this.shortDelay=e,this.longDelay=t,li(t>e,"Short delay should be less than long delay!"),this.isMobile=cA()||fA()}get(){return Mb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(n,e){li(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ei("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ei("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ei("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub=new _u(3e4,6e4);function us(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Lr(n,e,t,r,s={}){return Ox(n,s,async()=>{let a={},u={};r&&(e==="GET"?u=r:a={body:JSON.stringify(r)});const h=wu(Object.assign({key:n.config.apiKey},u)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:f},a);return dA()||(m.referrerPolicy="no-referrer"),Mx.fetch()(Fx(n,n.config.apiHost,t,h),m)})}async function Ox(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},Fb),e);try{const s=new zb(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw th(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const h=a.ok?u.errorMessage:u.error.message,[f,m]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw th(n,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw th(n,"email-already-in-use",u);if(f==="USER_DISABLED")throw th(n,"user-disabled",u);const y=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Lx(n,y,m);dr(n,y)}}catch(s){if(s instanceof pr)throw s;dr(n,"network-request-failed",{message:String(s)})}}async function xu(n,e,t,r,s={}){const a=await Lr(n,e,t,r,s);return"mfaPendingCredential"in a&&dr(n,"multi-factor-auth-required",{_serverResponse:a}),a}function Fx(n,e,t,r){const s=`${e}${t}?${r}`;return n.config.emulator?Om(n.config,s):`${n.config.apiScheme}://${s}`}function Bb(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zb{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ar(this.auth,"network-request-failed")),Ub.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function th(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Ar(n,e,r);return s.customData._tokenResponse=t,s}function O0(n){return n!==void 0&&n.enterprise!==void 0}class $b{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Bb(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function qb(n,e){return Lr(n,"GET","/v2/recaptchaConfig",us(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wb(n,e){return Lr(n,"POST","/v1/accounts:delete",e)}async function Ux(n,e){return Lr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Hb(n,e=!1){const t=tt(n),r=await t.getIdToken(e),s=Fm(r);Ie(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,u=a?.sign_in_provider;return{claims:s,token:r,authTime:Hl(dp(s.auth_time)),issuedAtTime:Hl(dp(s.iat)),expirationTime:Hl(dp(s.exp)),signInProvider:u||null,signInSecondFactor:a?.sign_in_second_factor||null}}function dp(n){return Number(n)*1e3}function Fm(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return hh("JWT malformed, contained fewer than 3 sections"),null;try{const s=xx(t);return s?JSON.parse(s):(hh("Failed to decode base64 JWT payload"),null)}catch(s){return hh("Caught error parsing JWT payload as JSON",s?.toString()),null}}function F0(n){const e=Fm(n);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eo(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof pr&&Gb(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Gb({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hl(this.lastLoginAt),this.creationTime=Hl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ph(n){var e;const t=n.auth,r=await n.getIdToken(),s=await eo(n,Ux(t,{idToken:r}));Ie(s?.users.length,t,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?Bx(a.providerUserInfo):[],h=Yb(n.providerData,u),f=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!h?.length,y=f?m:!1,_={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new Hp(a.createdAt,a.lastLoginAt),isAnonymous:y};Object.assign(n,_)}async function Qb(n){const e=tt(n);await Ph(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Yb(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Bx(n){return n.map(e=>{var{providerId:t}=e,r=Lm(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xb(n,e){const t=await Ox(n,{},async()=>{const r=wu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,u=Fx(n,s,"/v1/token",`key=${a}`),h=await n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",Mx.fetch()(u,{method:"POST",headers:h,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Jb(n,e){return Lr(n,"POST","/v2/accounts:revokeToken",us(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):F0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=F0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:a}=await Xb(e,t);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:a}=t,u=new wa;return r&&(Ie(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),s&&(Ie(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),a&&(Ie(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wa,this.toJSON())}_performRefresh(){return ei("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(n,e){Ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ti{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,a=Lm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Kb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Hp(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await eo(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Hb(this,e)}reload(){return Qb(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ti(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Ph(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(cr(this.auth.app))return Promise.reject(br(this.auth));const e=await this.getIdToken();return await eo(this,Wb(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,a,u,h,f,m,y;const _=(r=t.displayName)!==null&&r!==void 0?r:void 0,E=(s=t.email)!==null&&s!==void 0?s:void 0,I=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,R=(u=t.photoURL)!==null&&u!==void 0?u:void 0,D=(h=t.tenantId)!==null&&h!==void 0?h:void 0,P=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,W=(m=t.createdAt)!==null&&m!==void 0?m:void 0,q=(y=t.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:M,emailVerified:Q,isAnonymous:Z,providerData:ie,stsTokenManager:N}=t;Ie(M&&N,e,"internal-error");const A=wa.fromJSON(this.name,N);Ie(typeof M=="string",e,"internal-error"),Ui(_,e.name),Ui(E,e.name),Ie(typeof Q=="boolean",e,"internal-error"),Ie(typeof Z=="boolean",e,"internal-error"),Ui(I,e.name),Ui(R,e.name),Ui(D,e.name),Ui(P,e.name),Ui(W,e.name),Ui(q,e.name);const k=new ti({uid:M,auth:e,email:E,emailVerified:Q,displayName:_,isAnonymous:Z,photoURL:R,phoneNumber:I,tenantId:D,stsTokenManager:A,createdAt:W,lastLoginAt:q});return ie&&Array.isArray(ie)&&(k.providerData=ie.map(V=>Object.assign({},V))),P&&(k._redirectEventId=P),k}static async _fromIdTokenResponse(e,t,r=!1){const s=new wa;s.updateFromServerResponse(t);const a=new ti({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ph(a),a}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Ie(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?Bx(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!a?.length,h=new wa;h.updateFromIdToken(r);const f=new ti({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:u}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Hp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!a?.length};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0=new Map;function ni(n){li(n instanceof Function,"Expected a class definition");let e=U0.get(n);return e?(li(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,U0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}zx.type="NONE";const B0=zx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(n,e,t){return`firebase:${n}:${e}:${t}`}class _a{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=dh(this.userKey,s.apiKey,a),this.fullPersistenceKey=dh("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ti._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new _a(ni(B0),e,r);const s=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=s[0]||ni(B0);const u=dh(r,e.config.apiKey,e.name);let h=null;for(const m of t)try{const y=await m._get(u);if(y){const _=ti._fromJSON(e,y);m!==a&&(h=_),a=m;break}}catch{}const f=s.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new _a(a,e,r):(a=f[0],h&&await a._set(u,h.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(u)}catch{}})),new _a(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Hx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($x(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Kx(e))return"Blackberry";if(Qx(e))return"Webos";if(qx(e))return"Safari";if((e.includes("chrome/")||Wx(e))&&!e.includes("edge/"))return"Chrome";if(Gx(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function $x(n=en()){return/firefox\//i.test(n)}function qx(n=en()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Wx(n=en()){return/crios\//i.test(n)}function Hx(n=en()){return/iemobile/i.test(n)}function Gx(n=en()){return/android/i.test(n)}function Kx(n=en()){return/blackberry/i.test(n)}function Qx(n=en()){return/webos/i.test(n)}function Um(n=en()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Zb(n=en()){var e;return Um(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ek(){return pA()&&document.documentMode===10}function Yx(n=en()){return Um(n)||Gx(n)||Qx(n)||Kx(n)||/windows phone/i.test(n)||Hx(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(n,e=[]){let t;switch(n){case"Browser":t=z0(en());break;case"Worker":t=`${z0(en())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${La}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((u,h)=>{try{const f=e(a);u(f)}catch(f){h(f)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nk(n,e={}){return Lr(n,"GET","/v2/passwordPolicy",us(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk=6;class ik{constructor(e){var t,r,s,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:rk,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,a,u,h;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(s=f.containsLowercaseLetter)!==null&&s!==void 0?s:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(h=f.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),f}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $0(this),this.idTokenSubscription=new $0(this),this.beforeStateQueue=new tk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Vx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ni(t)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await _a.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ux(this,{idToken:e}),r=await ti._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(cr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=s?._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===h)&&f?.user&&(s=f.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ph(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Ob()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(cr(this.app))return Promise.reject(br(this));const t=e?tt(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return cr(this.app)?Promise.reject(br(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return cr(this.app)?Promise.reject(br(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ni(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nk(this),t=new ik(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new uo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Jb(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ni(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await _a.create(this,[ni(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(h,this,"internal-error"),h.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,s);return()=>{u=!0,f()}}else{const f=e.addObserver(t);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Xx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&Vb(`Error while retrieving App Check token: ${t.error}`),t?.token}}function ho(n){return tt(n)}class $0{constructor(e){this.auth=e,this.observer=null,this.addObserver=xA(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ok(n){Xh=n}function Jx(n){return Xh.loadJS(n)}function ak(){return Xh.recaptchaEnterpriseScript}function lk(){return Xh.gapiScript}function uk(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const ck="recaptcha-enterprise",hk="NO_RECAPTCHA";class dk{constructor(e){this.type=ck,this.auth=ho(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,h)=>{qb(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new $b(f);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,u(m.siteKey)}}).catch(f=>{h(f)})})}function s(a,u,h){const f=window.grecaptcha;O0(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(m=>{u(m)}).catch(()=>{u(hk)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,u)=>{r(this.auth).then(h=>{if(!t&&O0(window.grecaptcha))s(h,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let f=ak();f.length!==0&&(f+=h),Jx(f).then(()=>{s(h,a,u)}).catch(m=>{u(m)})}}).catch(h=>{u(h)})})}}async function q0(n,e,t,r=!1){const s=new dk(n);let a;try{a=await s.verify(t)}catch{a=await s.verify(t,!0)}const u=Object.assign({},e);return r?Object.assign(u,{captchaResp:a}):Object.assign(u,{captchaResponse:a}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Gp(n,e,t,r){var s;if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await q0(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await q0(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fk(n,e){const t=co(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(iu(a,e??{}))return s;dr(s,"already-initialized")}return t.initialize({options:e})}function pk(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ni);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function mk(n,e,t){const r=ho(n);Ie(r._canInitEmulator,r,"emulator-config-failed"),Ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=Zx(e),{host:u,port:h}=gk(e),f=h===null?"":`:${h}`;r.config.emulator={url:`${a}//${u}${f}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),yk()}function Zx(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function gk(n){const e=Zx(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:W0(r.substr(a.length+1))}}else{const[a,u]=r.split(":");return{host:a,port:W0(u)}}}function W0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function yk(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ei("not implemented")}_getIdTokenResponse(e){return ei("not implemented")}_linkToIdToken(e,t){return ei("not implemented")}_getReauthenticationResolver(e){return ei("not implemented")}}async function vk(n,e){return Lr(n,"POST","/v1/accounts:update",e)}async function wk(n,e){return Lr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _k(n,e){return xu(n,"POST","/v1/accounts:signInWithPassword",us(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xk(n,e){return xu(n,"POST","/v1/accounts:signInWithEmailLink",us(n,e))}async function Ek(n,e){return xu(n,"POST","/v1/accounts:signInWithEmailLink",us(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou extends Bm{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new ou(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new ou(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gp(e,t,"signInWithPassword",_k);case"emailLink":return xk(e,{email:this._email,oobCode:this._password});default:dr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gp(e,r,"signUpPassword",wk);case"emailLink":return Ek(e,{idToken:t,email:this._email,oobCode:this._password});default:dr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xa(n,e){return xu(n,"POST","/v1/accounts:signInWithIdp",us(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk="http://localhost";class to extends Bm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new to(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):dr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,a=Lm(t,["providerId","signInMethod"]);if(!r||!s)return null;const u=new to(r,s);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return xa(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,xa(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,xa(e,t)}buildRequest(){const e={requestUri:Tk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=wu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Sk(n){const e=Fl(Ul(n)).link,t=e?Fl(Ul(e)).deep_link_id:null,r=Fl(Ul(n)).deep_link_id;return(r?Fl(Ul(r)).link:null)||r||t||e||n}class zm{constructor(e){var t,r,s,a,u,h;const f=Fl(Ul(e)),m=(t=f.apiKey)!==null&&t!==void 0?t:null,y=(r=f.oobCode)!==null&&r!==void 0?r:null,_=Ik((s=f.mode)!==null&&s!==void 0?s:null);Ie(m&&y&&_,"argument-error"),this.apiKey=m,this.operation=_,this.code=y,this.continueUrl=(a=f.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(u=f.languageCode)!==null&&u!==void 0?u:null,this.tenantId=(h=f.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const t=Sk(e);try{return new zm(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(){this.providerId=ns.PROVIDER_ID}static credential(e,t){return ou._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=zm.parseLink(t);return Ie(r,"argument-error"),ou._fromEmailAndCode(e,r.code,r.tenantId)}}ns.PROVIDER_ID="password";ns.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ns.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu extends eE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i extends Eu{constructor(){super("facebook.com")}static credential(e){return to._fromParams({providerId:$i.PROVIDER_ID,signInMethod:$i.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $i.credentialFromTaggedObject(e)}static credentialFromError(e){return $i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $i.credential(e.oauthAccessToken)}catch{return null}}}$i.FACEBOOK_SIGN_IN_METHOD="facebook.com";$i.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends Eu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return to._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return qi.credential(t,r)}catch{return null}}}qi.GOOGLE_SIGN_IN_METHOD="google.com";qi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends Eu{constructor(){super("github.com")}static credential(e){return to._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wi.credential(e.oauthAccessToken)}catch{return null}}}Wi.GITHUB_SIGN_IN_METHOD="github.com";Wi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends Eu{constructor(){super("twitter.com")}static credential(e,t){return to._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Hi.credentialFromTaggedObject(e)}static credentialFromError(e){return Hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Hi.credential(t,r)}catch{return null}}}Hi.TWITTER_SIGN_IN_METHOD="twitter.com";Hi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pk(n,e){return xu(n,"POST","/v1/accounts:signUp",us(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const a=await ti._fromIdTokenResponse(e,r,s),u=H0(r);return new no({user:a,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=H0(r);return new no({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function H0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah extends pr{constructor(e,t,r,s){var a;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ah.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Ah(e,t,r,s)}}function tE(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Ah._fromErrorAndOperation(n,a,e,r):a})}async function Ak(n,e,t=!1){const r=await eo(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return no._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nE(n,e,t=!1){const{auth:r}=n;if(cr(r.app))return Promise.reject(br(r));const s="reauthenticate";try{const a=await eo(n,tE(r,s,e,n),t);Ie(a.idToken,r,"internal-error");const u=Fm(a.idToken);Ie(u,r,"internal-error");const{sub:h}=u;return Ie(n.uid===h,r,"user-mismatch"),no._forOperation(n,s,a)}catch(a){throw a?.code==="auth/user-not-found"&&dr(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rE(n,e,t=!1){if(cr(n.app))return Promise.reject(br(n));const r="signIn",s=await tE(n,r,e),a=await no._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(a.user),a}async function bk(n,e){return rE(ho(n),e)}async function G0(n,e){return nE(tt(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iE(n){const e=ho(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function kk(n,e,t){if(cr(n.app))return Promise.reject(br(n));const r=ho(n),u=await Gp(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Pk).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&iE(n),f}),h=await no._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(h.user),h}function Ck(n,e,t){return cr(n.app)?Promise.reject(br(n)):bk(tt(n),ns.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&iE(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rk(n,e){return Lr(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kp(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=tt(n),a={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await eo(r,Rk(r.auth,a));r.displayName=u.displayName||null,r.photoURL=u.photoUrl||null;const h=r.providerData.find(({providerId:f})=>f==="password");h&&(h.displayName=r.displayName,h.photoURL=r.photoURL),await r._updateTokensIfNecessary(u)}function Nk(n,e){const t=tt(n);return cr(t.auth.app)?Promise.reject(br(t.auth)):sE(t,e,null)}function Dk(n,e){return sE(tt(n),null,e)}async function sE(n,e,t){const{auth:r}=n,a={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(a.email=e),t&&(a.password=t);const u=await eo(n,vk(r,a));await n._updateTokensIfNecessary(u,!0)}function jk(n,e,t,r){return tt(n).onIdTokenChanged(e,t,r)}function Vk(n,e,t){return tt(n).beforeAuthStateChanged(e,t)}function Lk(n,e,t,r){return tt(n).onAuthStateChanged(e,t,r)}function Mk(n){return tt(n).signOut()}const bh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(bh,"1"),this.storage.removeItem(bh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok=1e3,Fk=10;class aE extends oE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Yx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,h,f)=>{this.notifyListeners(u,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},a=this.storage.getItem(r);ek()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Fk):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},Ok)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}aE.type="LOCAL";const Uk=aE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE extends oE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}lE.type="SESSION";const uE=lE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Jh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:a}=t.data,u=this.handlersMap[s];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const h=Array.from(u).map(async m=>m(t.origin,a)),f=await Bk(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Jh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,u;return new Promise((h,f)=>{const m=$m("",20);s.port1.start();const y=setTimeout(()=>{f(new Error("unsupported_event"))},r);u={messageChannel:s,onMessage(_){const E=_;if(E.data.eventId===m)switch(E.data.status){case"ack":clearTimeout(y),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(E.data.response);break;default:clearTimeout(y),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(){return window}function $k(n){kr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(){return typeof kr().WorkerGlobalScope<"u"&&typeof kr().importScripts=="function"}async function qk(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Wk(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Hk(){return cE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="firebaseLocalStorageDb",Gk=1,kh="firebaseLocalStorage",dE="fbase_key";class Tu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Zh(n,e){return n.transaction([kh],e?"readwrite":"readonly").objectStore(kh)}function Kk(){const n=indexedDB.deleteDatabase(hE);return new Tu(n).toPromise()}function Qp(){const n=indexedDB.open(hE,Gk);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(kh,{keyPath:dE})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(kh)?e(r):(r.close(),await Kk(),e(await Qp()))})})}async function K0(n,e,t){const r=Zh(n,!0).put({[dE]:e,value:t});return new Tu(r).toPromise()}async function Qk(n,e){const t=Zh(n,!1).get(e),r=await new Tu(t).toPromise();return r===void 0?null:r.value}function Q0(n,e){const t=Zh(n,!0).delete(e);return new Tu(t).toPromise()}const Yk=800,Xk=3;class fE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>Xk)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jh._getInstance(Hk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await qk(),!this.activeServiceWorker)return;this.sender=new zk(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Wk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qp();return await K0(e,bh,"1"),await Q0(e,bh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>K0(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>Qk(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Q0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=Zh(s,!1).getAll();return new Tu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Yk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}fE.type="LOCAL";const Jk=fE;new _u(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(n,e){return e?ni(e):(Ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm extends Bm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return xa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return xa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function eC(n){return rE(n.auth,new qm(n),n.bypassAuthState)}function tC(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),nE(t,new qm(n),n.bypassAuthState)}async function nC(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),Ak(t,new qm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e,t,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:a,error:u,type:h}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eC;case"linkViaPopup":case"linkViaRedirect":return nC;case"reauthViaPopup":case"reauthViaRedirect":return tC;default:dr(this.auth,"internal-error")}}resolve(e){li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=new _u(2e3,1e4);class ha extends pE{constructor(e,t,r,s,a){super(e,t,s,a),this.provider=r,this.authWindow=null,this.pollId=null,ha.currentPopupAction&&ha.currentPopupAction.cancel(),ha.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){li(this.filter.length===1,"Popup operations only handle one event");const e=$m();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ar(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ar(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ha.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ar(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rC.get())};e()}}ha.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC="pendingRedirect",fh=new Map;class sC extends pE{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=fh.get(this.auth._key());if(!e){try{const r=await oC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}fh.set(this.auth._key(),e)}return this.bypassAuthState||fh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function oC(n,e){const t=uC(e),r=lC(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function aC(n,e){fh.set(n._key(),e)}function lC(n){return ni(n._redirectPersistence)}function uC(n){return dh(iC,n.config.apiKey,n.name)}async function cC(n,e,t=!1){if(cr(n.app))return Promise.reject(br(n));const r=ho(n),s=Zk(r,e),u=await new sC(r,s,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=600*1e3;class dC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!mE(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ar(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Y0(e))}saveEventToCache(e){this.cachedEventUids.add(Y0(e)),this.lastProcessedEventTime=Date.now()}}function Y0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function mE({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function fC(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mE(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pC(n,e={}){return Lr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gC=/^https?/;async function yC(n){if(n.config.emulator)return;const{authorizedDomains:e}=await pC(n);for(const t of e)try{if(vC(t))return}catch{}dr(n,"unauthorized-domain")}function vC(n){const e=Wp(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!gC.test(t))return!1;if(mC.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=new _u(3e4,6e4);function X0(){const n=kr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function _C(n){return new Promise((e,t)=>{var r,s,a;function u(){X0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{X0(),t(Ar(n,"network-request-failed"))},timeout:wC.get()})}if(!((s=(r=kr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=kr().gapi)===null||a===void 0)&&a.load)u();else{const h=uk("iframefcb");return kr()[h]=()=>{gapi.load?u():t(Ar(n,"network-request-failed"))},Jx(`${lk()}?onload=${h}`).catch(f=>t(f))}}).catch(e=>{throw ph=null,e})}let ph=null;function xC(n){return ph=ph||_C(n),ph}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=new _u(5e3,15e3),TC="__/auth/iframe",IC="emulator/auth/iframe",SC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},PC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function AC(n){const e=n.config;Ie(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Om(e,IC):`https://${n.config.authDomain}/${TC}`,r={apiKey:e.apiKey,appName:n.name,v:La},s=PC.get(n.config.apiHost);s&&(r.eid=s);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${wu(r).slice(1)}`}async function bC(n){const e=await xC(n),t=kr().gapi;return Ie(t,n,"internal-error"),e.open({where:document.body,url:AC(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:SC,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const u=Ar(n,"network-request-failed"),h=kr().setTimeout(()=>{a(u)},EC.get());function f(){kr().clearTimeout(h),s(r)}r.ping(f).then(f,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},CC=500,RC=600,NC="_blank",DC="http://localhost";class J0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jC(n,e,t,r=CC,s=RC){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const f=Object.assign(Object.assign({},kC),{width:r.toString(),height:s.toString(),top:a,left:u}),m=en().toLowerCase();t&&(h=Wx(m)?NC:t),$x(m)&&(e=e||DC,f.scrollbars="yes");const y=Object.entries(f).reduce((E,[I,R])=>`${E}${I}=${R},`,"");if(Zb(m)&&h!=="_self")return VC(e||"",h),new J0(null);const _=window.open(e||"",h,y);Ie(_,n,"popup-blocked");try{_.focus()}catch{}return new J0(_)}function VC(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC="__/auth/handler",MC="emulator/auth/handler",OC=encodeURIComponent("fac");async function Z0(n,e,t,r,s,a){Ie(n.config.authDomain,n,"auth-domain-config-required"),Ie(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:La,eventId:s};if(e instanceof eE){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",_A(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,_]of Object.entries({}))u[y]=_}if(e instanceof Eu){const y=e.getScopes().filter(_=>_!=="");y.length>0&&(u.scopes=y.join(","))}n.tenantId&&(u.tid=n.tenantId);const h=u;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const f=await n._getAppCheckToken(),m=f?`#${OC}=${encodeURIComponent(f)}`:"";return`${FC(n)}?${wu(h).slice(1)}${m}`}function FC({config:n}){return n.emulator?Om(n,MC):`https://${n.authDomain}/${LC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp="webStorageSupport";class UC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uE,this._completeRedirectFn=cC,this._overrideRedirectResult=aC}async _openPopup(e,t,r,s){var a;li((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await Z0(e,t,r,Wp(),s);return jC(e,u,$m())}async _openRedirect(e,t,r,s){await this._originValidation(e);const a=await Z0(e,t,r,Wp(),s);return $k(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(li(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await bC(e),r=new dC(e);return t.register("authEvent",s=>(Ie(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(fp,{type:fp},s=>{var a;const u=(a=s?.[0])===null||a===void 0?void 0:a[fp];u!==void 0&&t(!!u),dr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=yC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Yx()||qx()||Um()}}const BC=UC;var ew="@firebase/auth",tw="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qC(n){jr(new hr("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=r.options;Ie(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xx(n)},m=new sk(r,s,a,f);return pk(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),jr(new hr("auth-internal",e=>{const t=ho(e.getProvider("auth").getImmediate());return(r=>new zC(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),qn(ew,tw,$C(n)),qn(ew,tw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC=300,HC=Ix("authIdTokenMaxAge")||WC;let nw=null;const GC=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>HC)return;const s=t?.token;nw!==s&&(nw=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function KC(n=Vm()){const e=co(n,"auth");if(e.isInitialized())return e.getImmediate();const t=fk(n,{popupRedirectResolver:BC,persistence:[Jk,Uk,uE]}),r=Ix("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const u=GC(a.toString());Vk(t,u,()=>u(t.currentUser)),jk(t,h=>u(h))}}const s=Ex("auth");return s&&mk(t,`http://${s}`),t}function QC(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}ok({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const a=Ar("internal-error");a.customData=s,t(a)},r.type="text/javascript",r.charset="UTF-8",QC().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qC("Browser");var rw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Js,gE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,A){function k(){}k.prototype=A.prototype,N.D=A.prototype,N.prototype=new k,N.prototype.constructor=N,N.C=function(V,U,B){for(var b=Array(arguments.length-2),he=2;he<arguments.length;he++)b[he-2]=arguments[he];return A.prototype[U].apply(V,b)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,A,k){k||(k=0);var V=Array(16);if(typeof A=="string")for(var U=0;16>U;++U)V[U]=A.charCodeAt(k++)|A.charCodeAt(k++)<<8|A.charCodeAt(k++)<<16|A.charCodeAt(k++)<<24;else for(U=0;16>U;++U)V[U]=A[k++]|A[k++]<<8|A[k++]<<16|A[k++]<<24;A=N.g[0],k=N.g[1],U=N.g[2];var B=N.g[3],b=A+(B^k&(U^B))+V[0]+3614090360&4294967295;A=k+(b<<7&4294967295|b>>>25),b=B+(U^A&(k^U))+V[1]+3905402710&4294967295,B=A+(b<<12&4294967295|b>>>20),b=U+(k^B&(A^k))+V[2]+606105819&4294967295,U=B+(b<<17&4294967295|b>>>15),b=k+(A^U&(B^A))+V[3]+3250441966&4294967295,k=U+(b<<22&4294967295|b>>>10),b=A+(B^k&(U^B))+V[4]+4118548399&4294967295,A=k+(b<<7&4294967295|b>>>25),b=B+(U^A&(k^U))+V[5]+1200080426&4294967295,B=A+(b<<12&4294967295|b>>>20),b=U+(k^B&(A^k))+V[6]+2821735955&4294967295,U=B+(b<<17&4294967295|b>>>15),b=k+(A^U&(B^A))+V[7]+4249261313&4294967295,k=U+(b<<22&4294967295|b>>>10),b=A+(B^k&(U^B))+V[8]+1770035416&4294967295,A=k+(b<<7&4294967295|b>>>25),b=B+(U^A&(k^U))+V[9]+2336552879&4294967295,B=A+(b<<12&4294967295|b>>>20),b=U+(k^B&(A^k))+V[10]+4294925233&4294967295,U=B+(b<<17&4294967295|b>>>15),b=k+(A^U&(B^A))+V[11]+2304563134&4294967295,k=U+(b<<22&4294967295|b>>>10),b=A+(B^k&(U^B))+V[12]+1804603682&4294967295,A=k+(b<<7&4294967295|b>>>25),b=B+(U^A&(k^U))+V[13]+4254626195&4294967295,B=A+(b<<12&4294967295|b>>>20),b=U+(k^B&(A^k))+V[14]+2792965006&4294967295,U=B+(b<<17&4294967295|b>>>15),b=k+(A^U&(B^A))+V[15]+1236535329&4294967295,k=U+(b<<22&4294967295|b>>>10),b=A+(U^B&(k^U))+V[1]+4129170786&4294967295,A=k+(b<<5&4294967295|b>>>27),b=B+(k^U&(A^k))+V[6]+3225465664&4294967295,B=A+(b<<9&4294967295|b>>>23),b=U+(A^k&(B^A))+V[11]+643717713&4294967295,U=B+(b<<14&4294967295|b>>>18),b=k+(B^A&(U^B))+V[0]+3921069994&4294967295,k=U+(b<<20&4294967295|b>>>12),b=A+(U^B&(k^U))+V[5]+3593408605&4294967295,A=k+(b<<5&4294967295|b>>>27),b=B+(k^U&(A^k))+V[10]+38016083&4294967295,B=A+(b<<9&4294967295|b>>>23),b=U+(A^k&(B^A))+V[15]+3634488961&4294967295,U=B+(b<<14&4294967295|b>>>18),b=k+(B^A&(U^B))+V[4]+3889429448&4294967295,k=U+(b<<20&4294967295|b>>>12),b=A+(U^B&(k^U))+V[9]+568446438&4294967295,A=k+(b<<5&4294967295|b>>>27),b=B+(k^U&(A^k))+V[14]+3275163606&4294967295,B=A+(b<<9&4294967295|b>>>23),b=U+(A^k&(B^A))+V[3]+4107603335&4294967295,U=B+(b<<14&4294967295|b>>>18),b=k+(B^A&(U^B))+V[8]+1163531501&4294967295,k=U+(b<<20&4294967295|b>>>12),b=A+(U^B&(k^U))+V[13]+2850285829&4294967295,A=k+(b<<5&4294967295|b>>>27),b=B+(k^U&(A^k))+V[2]+4243563512&4294967295,B=A+(b<<9&4294967295|b>>>23),b=U+(A^k&(B^A))+V[7]+1735328473&4294967295,U=B+(b<<14&4294967295|b>>>18),b=k+(B^A&(U^B))+V[12]+2368359562&4294967295,k=U+(b<<20&4294967295|b>>>12),b=A+(k^U^B)+V[5]+4294588738&4294967295,A=k+(b<<4&4294967295|b>>>28),b=B+(A^k^U)+V[8]+2272392833&4294967295,B=A+(b<<11&4294967295|b>>>21),b=U+(B^A^k)+V[11]+1839030562&4294967295,U=B+(b<<16&4294967295|b>>>16),b=k+(U^B^A)+V[14]+4259657740&4294967295,k=U+(b<<23&4294967295|b>>>9),b=A+(k^U^B)+V[1]+2763975236&4294967295,A=k+(b<<4&4294967295|b>>>28),b=B+(A^k^U)+V[4]+1272893353&4294967295,B=A+(b<<11&4294967295|b>>>21),b=U+(B^A^k)+V[7]+4139469664&4294967295,U=B+(b<<16&4294967295|b>>>16),b=k+(U^B^A)+V[10]+3200236656&4294967295,k=U+(b<<23&4294967295|b>>>9),b=A+(k^U^B)+V[13]+681279174&4294967295,A=k+(b<<4&4294967295|b>>>28),b=B+(A^k^U)+V[0]+3936430074&4294967295,B=A+(b<<11&4294967295|b>>>21),b=U+(B^A^k)+V[3]+3572445317&4294967295,U=B+(b<<16&4294967295|b>>>16),b=k+(U^B^A)+V[6]+76029189&4294967295,k=U+(b<<23&4294967295|b>>>9),b=A+(k^U^B)+V[9]+3654602809&4294967295,A=k+(b<<4&4294967295|b>>>28),b=B+(A^k^U)+V[12]+3873151461&4294967295,B=A+(b<<11&4294967295|b>>>21),b=U+(B^A^k)+V[15]+530742520&4294967295,U=B+(b<<16&4294967295|b>>>16),b=k+(U^B^A)+V[2]+3299628645&4294967295,k=U+(b<<23&4294967295|b>>>9),b=A+(U^(k|~B))+V[0]+4096336452&4294967295,A=k+(b<<6&4294967295|b>>>26),b=B+(k^(A|~U))+V[7]+1126891415&4294967295,B=A+(b<<10&4294967295|b>>>22),b=U+(A^(B|~k))+V[14]+2878612391&4294967295,U=B+(b<<15&4294967295|b>>>17),b=k+(B^(U|~A))+V[5]+4237533241&4294967295,k=U+(b<<21&4294967295|b>>>11),b=A+(U^(k|~B))+V[12]+1700485571&4294967295,A=k+(b<<6&4294967295|b>>>26),b=B+(k^(A|~U))+V[3]+2399980690&4294967295,B=A+(b<<10&4294967295|b>>>22),b=U+(A^(B|~k))+V[10]+4293915773&4294967295,U=B+(b<<15&4294967295|b>>>17),b=k+(B^(U|~A))+V[1]+2240044497&4294967295,k=U+(b<<21&4294967295|b>>>11),b=A+(U^(k|~B))+V[8]+1873313359&4294967295,A=k+(b<<6&4294967295|b>>>26),b=B+(k^(A|~U))+V[15]+4264355552&4294967295,B=A+(b<<10&4294967295|b>>>22),b=U+(A^(B|~k))+V[6]+2734768916&4294967295,U=B+(b<<15&4294967295|b>>>17),b=k+(B^(U|~A))+V[13]+1309151649&4294967295,k=U+(b<<21&4294967295|b>>>11),b=A+(U^(k|~B))+V[4]+4149444226&4294967295,A=k+(b<<6&4294967295|b>>>26),b=B+(k^(A|~U))+V[11]+3174756917&4294967295,B=A+(b<<10&4294967295|b>>>22),b=U+(A^(B|~k))+V[2]+718787259&4294967295,U=B+(b<<15&4294967295|b>>>17),b=k+(B^(U|~A))+V[9]+3951481745&4294967295,N.g[0]=N.g[0]+A&4294967295,N.g[1]=N.g[1]+(U+(b<<21&4294967295|b>>>11))&4294967295,N.g[2]=N.g[2]+U&4294967295,N.g[3]=N.g[3]+B&4294967295}r.prototype.u=function(N,A){A===void 0&&(A=N.length);for(var k=A-this.blockSize,V=this.B,U=this.h,B=0;B<A;){if(U==0)for(;B<=k;)s(this,N,B),B+=this.blockSize;if(typeof N=="string"){for(;B<A;)if(V[U++]=N.charCodeAt(B++),U==this.blockSize){s(this,V),U=0;break}}else for(;B<A;)if(V[U++]=N[B++],U==this.blockSize){s(this,V),U=0;break}}this.h=U,this.o+=A},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var A=1;A<N.length-8;++A)N[A]=0;var k=8*this.o;for(A=N.length-8;A<N.length;++A)N[A]=k&255,k/=256;for(this.u(N),N=Array(16),A=k=0;4>A;++A)for(var V=0;32>V;V+=8)N[k++]=this.g[A]>>>V&255;return N};function a(N,A){var k=h;return Object.prototype.hasOwnProperty.call(k,N)?k[N]:k[N]=A(N)}function u(N,A){this.h=A;for(var k=[],V=!0,U=N.length-1;0<=U;U--){var B=N[U]|0;V&&B==A||(k[U]=B,V=!1)}this.g=k}var h={};function f(N){return-128<=N&&128>N?a(N,function(A){return new u([A|0],0>A?-1:0)}):new u([N|0],0>N?-1:0)}function m(N){if(isNaN(N)||!isFinite(N))return _;if(0>N)return P(m(-N));for(var A=[],k=1,V=0;N>=k;V++)A[V]=N/k|0,k*=4294967296;return new u(A,0)}function y(N,A){if(N.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(N.charAt(0)=="-")return P(y(N.substring(1),A));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=m(Math.pow(A,8)),V=_,U=0;U<N.length;U+=8){var B=Math.min(8,N.length-U),b=parseInt(N.substring(U,U+B),A);8>B?(B=m(Math.pow(A,B)),V=V.j(B).add(m(b))):(V=V.j(k),V=V.add(m(b)))}return V}var _=f(0),E=f(1),I=f(16777216);n=u.prototype,n.m=function(){if(D(this))return-P(this).m();for(var N=0,A=1,k=0;k<this.g.length;k++){var V=this.i(k);N+=(0<=V?V:4294967296+V)*A,A*=4294967296}return N},n.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(R(this))return"0";if(D(this))return"-"+P(this).toString(N);for(var A=m(Math.pow(N,6)),k=this,V="";;){var U=Q(k,A).g;k=W(k,U.j(A));var B=((0<k.g.length?k.g[0]:k.h)>>>0).toString(N);if(k=U,R(k))return B+V;for(;6>B.length;)B="0"+B;V=B+V}},n.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function R(N){if(N.h!=0)return!1;for(var A=0;A<N.g.length;A++)if(N.g[A]!=0)return!1;return!0}function D(N){return N.h==-1}n.l=function(N){return N=W(this,N),D(N)?-1:R(N)?0:1};function P(N){for(var A=N.g.length,k=[],V=0;V<A;V++)k[V]=~N.g[V];return new u(k,~N.h).add(E)}n.abs=function(){return D(this)?P(this):this},n.add=function(N){for(var A=Math.max(this.g.length,N.g.length),k=[],V=0,U=0;U<=A;U++){var B=V+(this.i(U)&65535)+(N.i(U)&65535),b=(B>>>16)+(this.i(U)>>>16)+(N.i(U)>>>16);V=b>>>16,B&=65535,b&=65535,k[U]=b<<16|B}return new u(k,k[k.length-1]&-2147483648?-1:0)};function W(N,A){return N.add(P(A))}n.j=function(N){if(R(this)||R(N))return _;if(D(this))return D(N)?P(this).j(P(N)):P(P(this).j(N));if(D(N))return P(this.j(P(N)));if(0>this.l(I)&&0>N.l(I))return m(this.m()*N.m());for(var A=this.g.length+N.g.length,k=[],V=0;V<2*A;V++)k[V]=0;for(V=0;V<this.g.length;V++)for(var U=0;U<N.g.length;U++){var B=this.i(V)>>>16,b=this.i(V)&65535,he=N.i(U)>>>16,Ke=N.i(U)&65535;k[2*V+2*U]+=b*Ke,q(k,2*V+2*U),k[2*V+2*U+1]+=B*Ke,q(k,2*V+2*U+1),k[2*V+2*U+1]+=b*he,q(k,2*V+2*U+1),k[2*V+2*U+2]+=B*he,q(k,2*V+2*U+2)}for(V=0;V<A;V++)k[V]=k[2*V+1]<<16|k[2*V];for(V=A;V<2*A;V++)k[V]=0;return new u(k,0)};function q(N,A){for(;(N[A]&65535)!=N[A];)N[A+1]+=N[A]>>>16,N[A]&=65535,A++}function M(N,A){this.g=N,this.h=A}function Q(N,A){if(R(A))throw Error("division by zero");if(R(N))return new M(_,_);if(D(N))return A=Q(P(N),A),new M(P(A.g),P(A.h));if(D(A))return A=Q(N,P(A)),new M(P(A.g),A.h);if(30<N.g.length){if(D(N)||D(A))throw Error("slowDivide_ only works with positive integers.");for(var k=E,V=A;0>=V.l(N);)k=Z(k),V=Z(V);var U=ie(k,1),B=ie(V,1);for(V=ie(V,2),k=ie(k,2);!R(V);){var b=B.add(V);0>=b.l(N)&&(U=U.add(k),B=b),V=ie(V,1),k=ie(k,1)}return A=W(N,U.j(A)),new M(U,A)}for(U=_;0<=N.l(A);){for(k=Math.max(1,Math.floor(N.m()/A.m())),V=Math.ceil(Math.log(k)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),B=m(k),b=B.j(A);D(b)||0<b.l(N);)k-=V,B=m(k),b=B.j(A);R(B)&&(B=E),U=U.add(B),N=W(N,b)}return new M(U,N)}n.A=function(N){return Q(this,N).h},n.and=function(N){for(var A=Math.max(this.g.length,N.g.length),k=[],V=0;V<A;V++)k[V]=this.i(V)&N.i(V);return new u(k,this.h&N.h)},n.or=function(N){for(var A=Math.max(this.g.length,N.g.length),k=[],V=0;V<A;V++)k[V]=this.i(V)|N.i(V);return new u(k,this.h|N.h)},n.xor=function(N){for(var A=Math.max(this.g.length,N.g.length),k=[],V=0;V<A;V++)k[V]=this.i(V)^N.i(V);return new u(k,this.h^N.h)};function Z(N){for(var A=N.g.length+1,k=[],V=0;V<A;V++)k[V]=N.i(V)<<1|N.i(V-1)>>>31;return new u(k,N.h)}function ie(N,A){var k=A>>5;A%=32;for(var V=N.g.length-k,U=[],B=0;B<V;B++)U[B]=0<A?N.i(B+k)>>>A|N.i(B+k+1)<<32-A:N.i(B+k);return new u(U,N.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,gE=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=y,Js=u}).apply(typeof rw<"u"?rw:typeof self<"u"?self:typeof window<"u"?window:{});var nh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yE,Bl,vE,mh,Yp,wE,_E,xE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,v,x){return c==Array.prototype||c==Object.prototype||(c[v]=x.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof nh=="object"&&nh];for(var v=0;v<c.length;++v){var x=c[v];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var r=t(this);function s(c,v){if(v)e:{var x=r;c=c.split(".");for(var S=0;S<c.length-1;S++){var z=c[S];if(!(z in x))break e;x=x[z]}c=c[c.length-1],S=x[c],v=v(S),v!=S&&v!=null&&e(x,c,{configurable:!0,writable:!0,value:v})}}function a(c,v){c instanceof String&&(c+="");var x=0,S=!1,z={next:function(){if(!S&&x<c.length){var K=x++;return{value:v(K,c[K]),done:!1}}return S=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}s("Array.prototype.values",function(c){return c||function(){return a(this,function(v,x){return x})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function f(c){var v=typeof c;return v=v!="object"?v:c?Array.isArray(c)?"array":v:"null",v=="array"||v=="object"&&typeof c.length=="number"}function m(c){var v=typeof c;return v=="object"&&c!=null||v=="function"}function y(c,v,x){return c.call.apply(c.bind,arguments)}function _(c,v,x){if(!c)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,S),c.apply(v,z)}}return function(){return c.apply(v,arguments)}}function E(c,v,x){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:_,E.apply(null,arguments)}function I(c,v){var x=Array.prototype.slice.call(arguments,1);return function(){var S=x.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function R(c,v){function x(){}x.prototype=v.prototype,c.aa=v.prototype,c.prototype=new x,c.prototype.constructor=c,c.Qb=function(S,z,K){for(var ae=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)ae[Qe-2]=arguments[Qe];return v.prototype[z].apply(S,ae)}}function D(c){const v=c.length;if(0<v){const x=Array(v);for(let S=0;S<v;S++)x[S]=c[S];return x}return[]}function P(c,v){for(let x=1;x<arguments.length;x++){const S=arguments[x];if(f(S)){const z=c.length||0,K=S.length||0;c.length=z+K;for(let ae=0;ae<K;ae++)c[z+ae]=S[ae]}else c.push(S)}}class W{constructor(v,x){this.i=v,this.j=x,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function q(c){return/^[\s\xa0]*$/.test(c)}function M(){var c=h.navigator;return c&&(c=c.userAgent)?c:""}function Q(c){return Q[" "](c),c}Q[" "]=function(){};var Z=M().indexOf("Gecko")!=-1&&!(M().toLowerCase().indexOf("webkit")!=-1&&M().indexOf("Edge")==-1)&&!(M().indexOf("Trident")!=-1||M().indexOf("MSIE")!=-1)&&M().indexOf("Edge")==-1;function ie(c,v,x){for(const S in c)v.call(x,c[S],S,c)}function N(c,v){for(const x in c)v.call(void 0,c[x],x,c)}function A(c){const v={};for(const x in c)v[x]=c[x];return v}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(c,v){let x,S;for(let z=1;z<arguments.length;z++){S=arguments[z];for(x in S)c[x]=S[x];for(let K=0;K<k.length;K++)x=k[K],Object.prototype.hasOwnProperty.call(S,x)&&(c[x]=S[x])}}function U(c){var v=1;c=c.split(":");const x=[];for(;0<v&&c.length;)x.push(c.shift()),v--;return c.length&&x.push(c.join(":")),x}function B(c){h.setTimeout(()=>{throw c},0)}function b(){var c=pe;let v=null;return c.g&&(v=c.g,c.g=c.g.next,c.g||(c.h=null),v.next=null),v}class he{constructor(){this.h=this.g=null}add(v,x){const S=Ke.get();S.set(v,x),this.h?this.h.next=S:this.g=S,this.h=S}}var Ke=new W(()=>new Re,c=>c.reset());class Re{constructor(){this.next=this.g=this.h=null}set(v,x){this.h=v,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let Ce,oe=!1,pe=new he,ue=()=>{const c=h.Promise.resolve(void 0);Ce=()=>{c.then(O)}};var O=()=>{for(var c;c=b();){try{c.h.call(c.g)}catch(x){B(x)}var v=Ke;v.j(c),100>v.h&&(v.h++,c.next=v.g,v.g=c)}oe=!1};function Y(){this.s=this.s,this.C=this.C}Y.prototype.s=!1,Y.prototype.ma=function(){this.s||(this.s=!0,this.N())},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(c,v){this.type=c,this.g=this.target=v,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var le=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,v=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const x=()=>{};h.addEventListener("test",x,v),h.removeEventListener("test",x,v)}catch{}return c}();function we(c,v){if(re.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var x=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=v,v=c.relatedTarget){if(Z){e:{try{Q(v.nodeName);var z=!0;break e}catch{}z=!1}z||(v=null)}}else x=="mouseover"?v=c.fromElement:x=="mouseout"&&(v=c.toElement);this.relatedTarget=v,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Pe[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&we.aa.h.call(this)}}R(we,re);var Pe={2:"touch",3:"pen",4:"mouse"};we.prototype.h=function(){we.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ne="closure_listenable_"+(1e6*Math.random()|0),Ve=0;function Me(c,v,x,S,z){this.listener=c,this.proxy=null,this.src=v,this.type=x,this.capture=!!S,this.ha=z,this.key=++Ve,this.da=this.fa=!1}function at(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Lt(c){this.src=c,this.g={},this.h=0}Lt.prototype.add=function(c,v,x,S,z){var K=c.toString();c=this.g[K],c||(c=this.g[K]=[],this.h++);var ae=mi(c,v,S,z);return-1<ae?(v=c[ae],x||(v.fa=!1)):(v=new Me(v,this.src,K,!!S,z),v.fa=x,c.push(v)),v};function ps(c,v){var x=v.type;if(x in c.g){var S=c.g[x],z=Array.prototype.indexOf.call(S,v,void 0),K;(K=0<=z)&&Array.prototype.splice.call(S,z,1),K&&(at(v),c.g[x].length==0&&(delete c.g[x],c.h--))}}function mi(c,v,x,S){for(var z=0;z<c.length;++z){var K=c[z];if(!K.da&&K.listener==v&&K.capture==!!x&&K.ha==S)return z}return-1}var ms="closure_lm_"+(1e6*Math.random()|0),yo={};function Ba(c,v,x,S,z){if(Array.isArray(v)){for(var K=0;K<v.length;K++)Ba(c,v[K],x,S,z);return null}return x=qa(x),c&&c[Ne]?c.K(v,x,m(S)?!!S.capture:!1,z):za(c,v,x,!1,S,z)}function za(c,v,x,S,z,K){if(!v)throw Error("Invalid event type");var ae=m(z)?!!z.capture:!!z,Qe=wo(c);if(Qe||(c[ms]=Qe=new Lt(c)),x=Qe.add(v,x,S,ae,K),x.proxy)return x;if(S=Fu(),x.proxy=S,S.src=c,S.listener=x,c.addEventListener)le||(z=ae),z===void 0&&(z=!1),c.addEventListener(v.toString(),S,z);else if(c.attachEvent)c.attachEvent(Or(v.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Fu(){function c(x){return v.call(c.src,c.listener,x)}const v=$a;return c}function vo(c,v,x,S,z){if(Array.isArray(v))for(var K=0;K<v.length;K++)vo(c,v[K],x,S,z);else S=m(S)?!!S.capture:!!S,x=qa(x),c&&c[Ne]?(c=c.i,v=String(v).toString(),v in c.g&&(K=c.g[v],x=mi(K,x,S,z),-1<x&&(at(K[x]),Array.prototype.splice.call(K,x,1),K.length==0&&(delete c.g[v],c.h--)))):c&&(c=wo(c))&&(v=c.g[v.toString()],c=-1,v&&(c=mi(v,x,S,z)),(x=-1<c?v[c]:null)&&Mr(x))}function Mr(c){if(typeof c!="number"&&c&&!c.da){var v=c.src;if(v&&v[Ne])ps(v.i,c);else{var x=c.type,S=c.proxy;v.removeEventListener?v.removeEventListener(x,S,c.capture):v.detachEvent?v.detachEvent(Or(x),S):v.addListener&&v.removeListener&&v.removeListener(S),(x=wo(v))?(ps(x,c),x.h==0&&(x.src=null,v[ms]=null)):at(c)}}}function Or(c){return c in yo?yo[c]:yo[c]="on"+c}function $a(c,v){if(c.da)c=!0;else{v=new we(v,this);var x=c.listener,S=c.ha||c.src;c.fa&&Mr(c),c=x.call(S,v)}return c}function wo(c){return c=c[ms],c instanceof Lt?c:null}var _o="__closure_events_fn_"+(1e9*Math.random()>>>0);function qa(c){return typeof c=="function"?c:(c[_o]||(c[_o]=function(v){return c.handleEvent(v)}),c[_o])}function It(){Y.call(this),this.i=new Lt(this),this.M=this,this.F=null}R(It,Y),It.prototype[Ne]=!0,It.prototype.removeEventListener=function(c,v,x,S){vo(this,c,v,x,S)};function St(c,v){var x,S=c.F;if(S)for(x=[];S;S=S.F)x.push(S);if(c=c.M,S=v.type||v,typeof v=="string")v=new re(v,c);else if(v instanceof re)v.target=v.target||c;else{var z=v;v=new re(S,c),V(v,z)}if(z=!0,x)for(var K=x.length-1;0<=K;K--){var ae=v.g=x[K];z=Fr(ae,S,!0,v)&&z}if(ae=v.g=c,z=Fr(ae,S,!0,v)&&z,z=Fr(ae,S,!1,v)&&z,x)for(K=0;K<x.length;K++)ae=v.g=x[K],z=Fr(ae,S,!1,v)&&z}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var c=this.i,v;for(v in c.g){for(var x=c.g[v],S=0;S<x.length;S++)at(x[S]);delete c.g[v],c.h--}}this.F=null},It.prototype.K=function(c,v,x,S){return this.i.add(String(c),v,!1,x,S)},It.prototype.L=function(c,v,x,S){return this.i.add(String(c),v,!0,x,S)};function Fr(c,v,x,S){if(v=c.i.g[String(v)],!v)return!0;v=v.concat();for(var z=!0,K=0;K<v.length;++K){var ae=v[K];if(ae&&!ae.da&&ae.capture==x){var Qe=ae.listener,Pt=ae.ha||ae.src;ae.fa&&ps(c.i,ae),z=Qe.call(Pt,S)!==!1&&z}}return z&&!S.defaultPrevented}function Wa(c,v,x){if(typeof c=="function")x&&(c=E(c,x));else if(c&&typeof c.handleEvent=="function")c=E(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:h.setTimeout(c,v||0)}function gi(c){c.g=Wa(()=>{c.g=null,c.i&&(c.i=!1,gi(c))},c.l);const v=c.h;c.h=null,c.m.apply(null,v)}class gs extends Y{constructor(v,x){super(),this.m=v,this.l=x,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:gi(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ys(c){Y.call(this),this.h=c,this.g={}}R(ys,Y);var Ha=[];function Ga(c){ie(c.g,function(v,x){this.g.hasOwnProperty(x)&&Mr(v)},c),c.g={}}ys.prototype.N=function(){ys.aa.N.call(this),Ga(this)},ys.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ka=h.JSON.stringify,Qa=h.JSON.parse,Ya=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function vs(){}vs.prototype.h=null;function xo(c){return c.h||(c.h=c.i())}function Eo(){}var Nn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function mr(){re.call(this,"d")}R(mr,re);function To(){re.call(this,"c")}R(To,re);var gr={},Xa=null;function ws(){return Xa=Xa||new It}gr.La="serverreachability";function Ja(c){re.call(this,gr.La,c)}R(Ja,re);function Ur(c){const v=ws();St(v,new Ja(v))}gr.STAT_EVENT="statevent";function Za(c,v){re.call(this,gr.STAT_EVENT,c),this.stat=v}R(Za,re);function ft(c){const v=ws();St(v,new Za(v,c))}gr.Ma="timingevent";function Io(c,v){re.call(this,gr.Ma,c),this.size=v}R(Io,re);function Kn(c,v){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},v)}function _s(){this.g=!0}_s.prototype.xa=function(){this.g=!1};function xs(c,v,x,S,z,K){c.info(function(){if(c.g)if(K)for(var ae="",Qe=K.split("&"),Pt=0;Pt<Qe.length;Pt++){var ze=Qe[Pt].split("=");if(1<ze.length){var Ct=ze[0];ze=ze[1];var vt=Ct.split("_");ae=2<=vt.length&&vt[1]=="type"?ae+(Ct+"="+ze+"&"):ae+(Ct+"=redacted&")}}else ae=null;else ae=K;return"XMLHTTP REQ ("+S+") [attempt "+z+"]: "+v+`
`+x+`
`+ae})}function So(c,v,x,S,z,K,ae){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+z+"]: "+v+`
`+x+`
`+K+" "+ae})}function Qn(c,v,x,S){c.info(function(){return"XMLHTTP TEXT ("+v+"): "+bd(c,x)+(S?" "+S:"")})}function el(c,v){c.info(function(){return"TIMEOUT: "+v})}_s.prototype.info=function(){};function bd(c,v){if(!c.g)return v;if(!v)return null;try{var x=JSON.parse(v);if(x){for(c=0;c<x.length;c++)if(Array.isArray(x[c])){var S=x[c];if(!(2>S.length)){var z=S[1];if(Array.isArray(z)&&!(1>z.length)){var K=z[0];if(K!="noop"&&K!="stop"&&K!="close")for(var ae=1;ae<z.length;ae++)z[ae]=""}}}}return Ka(x)}catch{return v}}var Po={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Uu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Yn;function Es(){}R(Es,vs),Es.prototype.g=function(){return new XMLHttpRequest},Es.prototype.i=function(){return{}},Yn=new Es;function Xn(c,v,x,S){this.j=c,this.i=v,this.l=x,this.R=S||1,this.U=new ys(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Bu}function Bu(){this.i=null,this.g="",this.h=!1}var tl={},Ao={};function bo(c,v,x){c.L=1,c.v=xi(Tn(v)),c.m=x,c.P=!0,nl(c,null)}function nl(c,v){c.F=Date.now(),Je(c),c.A=Tn(c.v);var x=c.A,S=c.R;Array.isArray(S)||(S=[String(S)]),Ti(x.i,"t",S),c.C=0,x=c.j.J,c.h=new Bu,c.g=sc(c.j,x?v:null,!c.m),0<c.O&&(c.M=new gs(E(c.Y,c,c.g),c.O)),v=c.U,x=c.g,S=c.ca;var z="readystatechange";Array.isArray(z)||(z&&(Ha[0]=z.toString()),z=Ha);for(var K=0;K<z.length;K++){var ae=Ba(x,z[K],S||v.handleEvent,!1,v.h||v);if(!ae)break;v.g[ae.key]=ae}v=c.H?A(c.H):{},c.m?(c.u||(c.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,v)):(c.u="GET",c.g.ea(c.A,c.u,null,v)),Ur(),xs(c.i,c.u,c.A,c.l,c.R,c.m)}Xn.prototype.ca=function(c){c=c.target;const v=this.M;v&&cn(c)==3?v.j():this.Y(c)},Xn.prototype.Y=function(c){try{if(c==this.g)e:{const vt=cn(this.g);var v=this.g.Ba();const Vn=this.g.Z();if(!(3>vt)&&(vt!=3||this.g&&(this.h.h||this.g.oa()||ll(this.g)))){this.J||vt!=4||v==7||(v==8||0>=Vn?Ur(3):Ur(2)),Ts(this);var x=this.g.Z();this.X=x;t:if(zu(this)){var S=ll(this.g);c="";var z=S.length,K=cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Dn(this),yi(this);var ae="";break t}this.h.i=new h.TextDecoder}for(v=0;v<z;v++)this.h.h=!0,c+=this.h.i.decode(S[v],{stream:!(K&&v==z-1)});S.length=0,this.h.g+=c,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=x==200,So(this.i,this.u,this.A,this.l,this.R,vt,x),this.o){if(this.T&&!this.K){t:{if(this.g){var Qe,Pt=this.g;if((Qe=Pt.g?Pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(Qe)){var ze=Qe;break t}}ze=null}if(x=ze)Qn(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rl(this,x);else{this.o=!1,this.s=3,ft(12),Dn(this),yi(this);break e}}if(this.P){x=!0;let Sn;for(;!this.J&&this.C<ae.length;)if(Sn=kd(this,ae),Sn==Ao){vt==4&&(this.s=4,ft(14),x=!1),Qn(this.i,this.l,null,"[Incomplete Response]");break}else if(Sn==tl){this.s=4,ft(15),Qn(this.i,this.l,ae,"[Invalid Chunk]"),x=!1;break}else Qn(this.i,this.l,Sn,null),rl(this,Sn);if(zu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vt!=4||ae.length!=0||this.h.h||(this.s=1,ft(16),x=!1),this.o=this.o&&x,!x)Qn(this.i,this.l,ae,"[Invalid Chunked Response]"),Dn(this),yi(this);else if(0<ae.length&&!this.W){this.W=!0;var Ct=this.j;Ct.g==this&&Ct.ba&&!Ct.M&&(Ct.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),cl(Ct),Ct.M=!0,ft(11))}}else Qn(this.i,this.l,ae,null),rl(this,ae);vt==4&&Dn(this),this.o&&!this.J&&(vt==4?Fo(this.j,this):(this.o=!1,Je(this)))}else jo(this.g),x==400&&0<ae.indexOf("Unknown SID")?(this.s=3,ft(12)):(this.s=0,ft(13)),Dn(this),yi(this)}}}catch{}finally{}};function zu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function kd(c,v){var x=c.C,S=v.indexOf(`
`,x);return S==-1?Ao:(x=Number(v.substring(x,S)),isNaN(x)?tl:(S+=1,S+x>v.length?Ao:(v=v.slice(S,S+x),c.C=S+x,v)))}Xn.prototype.cancel=function(){this.J=!0,Dn(this)};function Je(c){c.S=Date.now()+c.I,$u(c,c.I)}function $u(c,v){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Kn(E(c.ba,c),v)}function Ts(c){c.B&&(h.clearTimeout(c.B),c.B=null)}Xn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(el(this.i,this.A),this.L!=2&&(Ur(),ft(17)),Dn(this),this.s=2,yi(this)):$u(this,this.S-c)};function yi(c){c.j.G==0||c.J||Fo(c.j,c)}function Dn(c){Ts(c);var v=c.M;v&&typeof v.ma=="function"&&v.ma(),c.M=null,Ga(c.U),c.g&&(v=c.g,c.g=null,v.abort(),v.ma())}function rl(c,v){try{var x=c.j;if(x.G!=0&&(x.g==c||tn(x.h,c))){if(!c.K&&tn(x.h,c)&&x.G==3){try{var S=x.Da.g.parse(v)}catch{S=null}if(Array.isArray(S)&&S.length==3){var z=S;if(z[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<c.F)Oo(x),nr(x);else break e;Mo(x),ft(18)}}else x.za=z[1],0<x.za-x.T&&37500>z[2]&&x.F&&x.v==0&&!x.C&&(x.C=Kn(E(x.Za,x),6e3));if(1>=Wu(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else Wr(x,11)}else if((c.K||x.g==c)&&Oo(x),!q(v))for(z=x.Da.g.parse(v),v=0;v<z.length;v++){let ze=z[v];if(x.T=ze[0],ze=ze[1],x.G==2)if(ze[0]=="c"){x.K=ze[1],x.ia=ze[2];const Ct=ze[3];Ct!=null&&(x.la=Ct,x.j.info("VER="+x.la));const vt=ze[4];vt!=null&&(x.Aa=vt,x.j.info("SVER="+x.Aa));const Vn=ze[5];Vn!=null&&typeof Vn=="number"&&0<Vn&&(S=1.5*Vn,x.L=S,x.j.info("backChannelRequestTimeoutMs_="+S)),S=x;const Sn=c.g;if(Sn){const Cs=Sn.g?Sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Cs){var K=S.h;K.g||Cs.indexOf("spdy")==-1&&Cs.indexOf("quic")==-1&&Cs.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(il(K,K.h),K.h=null))}if(S.D){const Bo=Sn.g?Sn.g.getResponseHeader("X-HTTP-Session-Id"):null;Bo&&(S.ya=Bo,Xe(S.I,S.D,Bo))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-c.F,x.j.info("Handshake RTT: "+x.R+"ms")),S=x;var ae=c;if(S.qa=ic(S,S.J?S.ia:null,S.W),ae.K){Hu(S.h,ae);var Qe=ae,Pt=S.L;Pt&&(Qe.I=Pt),Qe.B&&(Ts(Qe),Je(Qe)),S.g=ae}else ks(S);0<x.i.length&&_r(x)}else ze[0]!="stop"&&ze[0]!="close"||Wr(x,7);else x.G==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?Wr(x,7):Ot(x):ze[0]!="noop"&&x.l&&x.l.ta(ze),x.v=0)}}Ur(4)}catch{}}var qu=class{constructor(c,v){this.g=c,this.map=v}};function Is(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function En(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Wu(c){return c.h?1:c.g?c.g.size:0}function tn(c,v){return c.h?c.h==v:c.g?c.g.has(v):!1}function il(c,v){c.g?c.g.add(v):c.h=v}function Hu(c,v){c.h&&c.h==v?c.h=null:c.g&&c.g.has(v)&&c.g.delete(v)}Is.prototype.cancel=function(){if(this.i=Gu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Gu(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let v=c.i;for(const x of c.g.values())v=v.concat(x.D);return v}return D(c.i)}function ko(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var v=[],x=c.length,S=0;S<x;S++)v.push(c[S]);return v}v=[],x=0;for(S in c)v[x++]=c[S];return v}function Co(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var v=[];c=c.length;for(var x=0;x<c;x++)v.push(x);return v}v=[],x=0;for(const S in c)v[x++]=S;return v}}}function vi(c,v){if(c.forEach&&typeof c.forEach=="function")c.forEach(v,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,v,void 0);else for(var x=Co(c),S=ko(c),z=S.length,K=0;K<z;K++)v.call(void 0,S[K],x&&x[K],c)}var Ss=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cd(c,v){if(c){c=c.split("&");for(var x=0;x<c.length;x++){var S=c[x].indexOf("="),z=null;if(0<=S){var K=c[x].substring(0,S);z=c[x].substring(S+1)}else K=c[x];v(K,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Br(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Br){this.h=c.h,Ps(this,c.j),this.o=c.o,this.g=c.g,wi(this,c.s),this.l=c.l;var v=c.i,x=new yr;x.i=v.i,v.g&&(x.g=new Map(v.g),x.h=v.h),_i(this,x),this.m=c.m}else c&&(v=String(c).match(Ss))?(this.h=!1,Ps(this,v[1]||"",!0),this.o=Fe(v[2]||""),this.g=Fe(v[3]||"",!0),wi(this,v[4]),this.l=Fe(v[5]||"",!0),_i(this,v[6]||"",!0),this.m=Fe(v[7]||"")):(this.h=!1,this.i=new yr(null,this.h))}Br.prototype.toString=function(){var c=[],v=this.j;v&&c.push(Ei(v,Ro,!0),":");var x=this.g;return(x||v=="file")&&(c.push("//"),(v=this.o)&&c.push(Ei(v,Ro,!0),"@"),c.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&c.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&c.push("/"),c.push(Ei(x,x.charAt(0)=="/"?Yu:Qu,!0))),(x=this.i.toString())&&c.push("?",x),(x=this.m)&&c.push("#",Ei(x,sl)),c.join("")};function Tn(c){return new Br(c)}function Ps(c,v,x){c.j=x?Fe(v,!0):v,c.j&&(c.j=c.j.replace(/:$/,""))}function wi(c,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);c.s=v}else c.s=null}function _i(c,v,x){v instanceof yr?(c.i=v,vr(c.i,c.h)):(x||(v=Ei(v,Xu)),c.i=new yr(v,c.h))}function Xe(c,v,x){c.i.set(v,x)}function xi(c){return Xe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Fe(c,v){return c?v?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ei(c,v,x){return typeof c=="string"?(c=encodeURI(c).replace(v,Ku),x&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Ku(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Ro=/[#\/\?@]/g,Qu=/[#\?:]/g,Yu=/[#\?]/g,Xu=/[#\?@]/g,sl=/#/g;function yr(c,v){this.h=this.g=null,this.i=c||null,this.j=!!v}function Mt(c){c.g||(c.g=new Map,c.h=0,c.i&&Cd(c.i,function(v,x){c.add(decodeURIComponent(v.replace(/\+/g," ")),x)}))}n=yr.prototype,n.add=function(c,v){Mt(this),this.i=null,c=jn(this,c);var x=this.g.get(c);return x||this.g.set(c,x=[]),x.push(v),this.h+=1,this};function Jn(c,v){Mt(c),v=jn(c,v),c.g.has(v)&&(c.i=null,c.h-=c.g.get(v).length,c.g.delete(v))}function Zn(c,v){return Mt(c),v=jn(c,v),c.g.has(v)}n.forEach=function(c,v){Mt(this),this.g.forEach(function(x,S){x.forEach(function(z){c.call(v,z,S,this)},this)},this)},n.na=function(){Mt(this);const c=Array.from(this.g.values()),v=Array.from(this.g.keys()),x=[];for(let S=0;S<v.length;S++){const z=c[S];for(let K=0;K<z.length;K++)x.push(v[S])}return x},n.V=function(c){Mt(this);let v=[];if(typeof c=="string")Zn(this,c)&&(v=v.concat(this.g.get(jn(this,c))));else{c=Array.from(this.g.values());for(let x=0;x<c.length;x++)v=v.concat(c[x])}return v},n.set=function(c,v){return Mt(this),this.i=null,c=jn(this,c),Zn(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[v]),this.h+=1,this},n.get=function(c,v){return c?(c=this.V(c),0<c.length?String(c[0]):v):v};function Ti(c,v,x){Jn(c,v),0<x.length&&(c.i=null,c.g.set(jn(c,v),D(x)),c.h+=x.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],v=Array.from(this.g.keys());for(var x=0;x<v.length;x++){var S=v[x];const K=encodeURIComponent(String(S)),ae=this.V(S);for(S=0;S<ae.length;S++){var z=K;ae[S]!==""&&(z+="="+encodeURIComponent(String(ae[S]))),c.push(z)}}return this.i=c.join("&")};function jn(c,v){return v=String(v),c.j&&(v=v.toLowerCase()),v}function vr(c,v){v&&!c.j&&(Mt(c),c.i=null,c.g.forEach(function(x,S){var z=S.toLowerCase();S!=z&&(Jn(this,S),Ti(this,z,x))},c)),c.j=v}function Rd(c,v){const x=new _s;if(h.Image){const S=new Image;S.onload=I(un,x,"TestLoadImage: loaded",!0,v,S),S.onerror=I(un,x,"TestLoadImage: error",!1,v,S),S.onabort=I(un,x,"TestLoadImage: abort",!1,v,S),S.ontimeout=I(un,x,"TestLoadImage: timeout",!1,v,S),h.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else v(!1)}function Ju(c,v){const x=new _s,S=new AbortController,z=setTimeout(()=>{S.abort(),un(x,"TestPingServer: timeout",!1,v)},1e4);fetch(c,{signal:S.signal}).then(K=>{clearTimeout(z),K.ok?un(x,"TestPingServer: ok",!0,v):un(x,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(z),un(x,"TestPingServer: error",!1,v)})}function un(c,v,x,S,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),S(x)}catch{}}function Nd(){this.g=new Ya}function Zu(c,v,x){const S=x||"";try{vi(c,function(z,K){let ae=z;m(z)&&(ae=Ka(z)),v.push(S+K+"="+encodeURIComponent(ae))})}catch(z){throw v.push(S+"type="+encodeURIComponent("_badmap")),z}}function zr(c){this.l=c.Ub||null,this.j=c.eb||!1}R(zr,vs),zr.prototype.g=function(){return new As(this.l,this.j)},zr.prototype.i=function(c){return function(){return c}}({});function As(c,v){It.call(this),this.D=c,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(As,It),n=As.prototype,n.open=function(c,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=v,this.readyState=1,tr(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(v.body=c),(this.D||h).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,er(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,tr(this)),this.g&&(this.readyState=3,tr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ec(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function ec(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var v=c.value?c.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!c.done}))&&(this.response=this.responseText+=v)}c.done?er(this):tr(this),this.readyState==3&&ec(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,er(this))},n.Qa=function(c){this.g&&(this.response=c,er(this))},n.ga=function(){this.g&&er(this)};function er(c){c.readyState=4,c.l=null,c.j=null,c.v=null,tr(c)}n.setRequestHeader=function(c,v){this.u.append(c,v)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],v=this.h.entries();for(var x=v.next();!x.done;)x=x.value,c.push(x[0]+": "+x[1]),x=v.next();return c.join(`\r
`)};function tr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(As.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function $r(c){let v="";return ie(c,function(x,S){v+=S,v+=":",v+=x,v+=`\r
`}),v}function Ii(c,v,x){e:{for(S in x){var S=!1;break e}S=!0}S||(x=$r(x),typeof c=="string"?x!=null&&encodeURIComponent(String(x)):Xe(c,v,x))}function st(c){It.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(st,It);var Dd=/^https?$/i,ol=["POST","PUT"];n=st.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,v,x,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);v=v?v.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Yn.g(),this.v=this.o?xo(this.o):xo(Yn),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(v,String(c),!0),this.B=!1}catch(K){bs(this,K);return}if(c=x||"",x=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var z in S)x.set(z,S[z]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const K of S.keys())x.set(K,S.get(K));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(x.keys()).find(K=>K.toLowerCase()=="content-type"),z=h.FormData&&c instanceof h.FormData,!(0<=Array.prototype.indexOf.call(ol,v,void 0))||S||z||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ae]of x)this.g.setRequestHeader(K,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Do(this),this.u=!0,this.g.send(c),this.u=!1}catch(K){bs(this,K)}};function bs(c,v){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=v,c.m=5,No(c),In(c)}function No(c){c.A||(c.A=!0,St(c,"complete"),St(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,St(this,"complete"),St(this,"abort"),In(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),In(this,!0)),st.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?al(this):this.bb())},n.bb=function(){al(this)};function al(c){if(c.h&&typeof u<"u"&&(!c.v[1]||cn(c)!=4||c.Z()!=2)){if(c.u&&cn(c)==4)Wa(c.Ea,0,c);else if(St(c,"readystatechange"),cn(c)==4){c.h=!1;try{const ae=c.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var x;if(!(x=v)){var S;if(S=ae===0){var z=String(c.D).match(Ss)[1]||null;!z&&h.self&&h.self.location&&(z=h.self.location.protocol.slice(0,-1)),S=!Dd.test(z?z.toLowerCase():"")}x=S}if(x)St(c,"complete"),St(c,"success");else{c.m=6;try{var K=2<cn(c)?c.g.statusText:""}catch{K=""}c.l=K+" ["+c.Z()+"]",No(c)}}finally{In(c)}}}}function In(c,v){if(c.g){Do(c);const x=c.g,S=c.v[0]?()=>{}:null;c.g=null,c.v=null,v||St(c,"ready");try{x.onreadystatechange=S}catch{}}}function Do(c){c.I&&(h.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function cn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<cn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var v=this.g.responseText;return c&&v.indexOf(c)==0&&(v=v.substring(c.length)),Qa(v)}};function ll(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function jo(c){const v={};c=(c.g&&2<=cn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(q(c[S]))continue;var x=U(c[S]);const z=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const K=v[z]||[];v[z]=K,K.push(x)}N(v,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function wr(c,v,x){return x&&x.internalChannelParams&&x.internalChannelParams[c]||v}function ul(c){this.Aa=0,this.i=[],this.j=new _s,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=wr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=wr("baseRetryDelayMs",5e3,c),this.cb=wr("retryDelaySeedMs",1e4,c),this.Wa=wr("forwardChannelMaxRetries",2,c),this.wa=wr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Is(c&&c.concurrentRequestLimit),this.Da=new Nd,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ul.prototype,n.la=8,n.G=1,n.connect=function(c,v,x,S){ft(0),this.W=c,this.H=v||{},x&&S!==void 0&&(this.H.OSID=x,this.H.OAID=S),this.F=this.X,this.I=ic(this,null,this.W),_r(this)};function Ot(c){if(Vo(c),c.G==3){var v=c.U++,x=Tn(c.I);if(Xe(x,"SID",c.K),Xe(x,"RID",v),Xe(x,"TYPE","terminate"),qr(c,x),v=new Xn(c,c.j,v),v.L=2,v.v=xi(Tn(x)),x=!1,h.navigator&&h.navigator.sendBeacon)try{x=h.navigator.sendBeacon(v.v.toString(),"")}catch{}!x&&h.Image&&(new Image().src=v.v,x=!0),x||(v.g=sc(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Je(v)}rc(c)}function nr(c){c.g&&(cl(c),c.g.cancel(),c.g=null)}function Vo(c){nr(c),c.u&&(h.clearTimeout(c.u),c.u=null),Oo(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&h.clearTimeout(c.s),c.s=null)}function _r(c){if(!En(c.h)&&!c.s){c.s=!0;var v=c.Ga;Ce||ue(),oe||(Ce(),oe=!0),pe.add(v,c),c.B=0}}function jd(c,v){return Wu(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=v.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Kn(E(c.Ga,c,v),nc(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const z=new Xn(this,this.j,c);let K=this.o;if(this.S&&(K?(K=A(K),V(K,this.S)):K=this.S),this.m!==null||this.O||(z.H=K,K=null),this.P)e:{for(var v=0,x=0;x<this.i.length;x++){t:{var S=this.i[x];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(v+=S,4096<v){v=x;break e}if(v===4096||x===this.i.length-1){v=x+1;break e}}v=1e3}else v=1e3;v=Si(this,z,v),x=Tn(this.I),Xe(x,"RID",c),Xe(x,"CVER",22),this.D&&Xe(x,"X-HTTP-Session-Id",this.D),qr(this,x),K&&(this.O?v="headers="+encodeURIComponent(String($r(K)))+"&"+v:this.m&&Ii(x,this.m,K)),il(this.h,z),this.Ua&&Xe(x,"TYPE","init"),this.P?(Xe(x,"$req",v),Xe(x,"SID","null"),z.T=!0,bo(z,x,null)):bo(z,x,v),this.G=2}}else this.G==3&&(c?Lo(this,c):this.i.length==0||En(this.h)||Lo(this))};function Lo(c,v){var x;v?x=v.l:x=c.U++;const S=Tn(c.I);Xe(S,"SID",c.K),Xe(S,"RID",x),Xe(S,"AID",c.T),qr(c,S),c.m&&c.o&&Ii(S,c.m,c.o),x=new Xn(c,c.j,x,c.B+1),c.m===null&&(x.H=c.o),v&&(c.i=v.D.concat(c.i)),v=Si(c,x,1e3),x.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),il(c.h,x),bo(x,S,v)}function qr(c,v){c.H&&ie(c.H,function(x,S){Xe(v,S,x)}),c.l&&vi({},function(x,S){Xe(v,S,x)})}function Si(c,v,x){x=Math.min(c.i.length,x);var S=c.l?E(c.l.Na,c.l,c):null;e:{var z=c.i;let K=-1;for(;;){const ae=["count="+x];K==-1?0<x?(K=z[0].g,ae.push("ofs="+K)):K=0:ae.push("ofs="+K);let Qe=!0;for(let Pt=0;Pt<x;Pt++){let ze=z[Pt].g;const Ct=z[Pt].map;if(ze-=K,0>ze)K=Math.max(0,z[Pt].g-100),Qe=!1;else try{Zu(Ct,ae,"req"+ze+"_")}catch{S&&S(Ct)}}if(Qe){S=ae.join("&");break e}}}return c=c.i.splice(0,x),v.D=c,S}function ks(c){if(!c.g&&!c.u){c.Y=1;var v=c.Fa;Ce||ue(),oe||(Ce(),oe=!0),pe.add(v,c),c.v=0}}function Mo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Kn(E(c.Fa,c),nc(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,tc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Kn(E(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ft(10),nr(this),tc(this))};function cl(c){c.A!=null&&(h.clearTimeout(c.A),c.A=null)}function tc(c){c.g=new Xn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var v=Tn(c.qa);Xe(v,"RID","rpc"),Xe(v,"SID",c.K),Xe(v,"AID",c.T),Xe(v,"CI",c.F?"0":"1"),!c.F&&c.ja&&Xe(v,"TO",c.ja),Xe(v,"TYPE","xmlhttp"),qr(c,v),c.m&&c.o&&Ii(v,c.m,c.o),c.L&&(c.g.I=c.L);var x=c.g;c=c.ia,x.L=1,x.v=xi(Tn(v)),x.m=null,x.P=!0,nl(x,c)}n.Za=function(){this.C!=null&&(this.C=null,nr(this),Mo(this),ft(19))};function Oo(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function Fo(c,v){var x=null;if(c.g==v){Oo(c),cl(c),c.g=null;var S=2}else if(tn(c.h,v))x=v.D,Hu(c.h,v),S=1;else return;if(c.G!=0){if(v.o)if(S==1){x=v.m?v.m.length:0,v=Date.now()-v.F;var z=c.B;S=ws(),St(S,new Io(S,x)),_r(c)}else ks(c);else if(z=v.s,z==3||z==0&&0<v.X||!(S==1&&jd(c,v)||S==2&&Mo(c)))switch(x&&0<x.length&&(v=c.h,v.i=v.i.concat(x)),z){case 1:Wr(c,5);break;case 4:Wr(c,10);break;case 3:Wr(c,6);break;default:Wr(c,2)}}}function nc(c,v){let x=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(x*=2),x*v}function Wr(c,v){if(c.j.info("Error code "+v),v==2){var x=E(c.fb,c),S=c.Xa;const z=!S;S=new Br(S||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Ps(S,"https"),xi(S),z?Rd(S.toString(),x):Ju(S.toString(),x)}else ft(2);c.G=0,c.l&&c.l.sa(v),rc(c),Vo(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function rc(c){if(c.G=0,c.ka=[],c.l){const v=Gu(c.h);(v.length!=0||c.i.length!=0)&&(P(c.ka,v),P(c.ka,c.i),c.h.i.length=0,D(c.i),c.i.length=0),c.l.ra()}}function ic(c,v,x){var S=x instanceof Br?Tn(x):new Br(x);if(S.g!="")v&&(S.g=v+"."+S.g),wi(S,S.s);else{var z=h.location;S=z.protocol,v=v?v+"."+z.hostname:z.hostname,z=+z.port;var K=new Br(null);S&&Ps(K,S),v&&(K.g=v),z&&wi(K,z),x&&(K.l=x),S=K}return x=c.D,v=c.ya,x&&v&&Xe(S,x,v),Xe(S,"VER",c.la),qr(c,S),S}function sc(c,v,x){if(v&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=c.Ca&&!c.pa?new st(new zr({eb:x})):new st(c.pa),v.Ha(c.J),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function hl(){}n=hl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Uo(){}Uo.prototype.g=function(c,v){return new nn(c,v)};function nn(c,v){It.call(this),this.g=new ul(v),this.l=c,this.h=v&&v.messageUrlParams||null,c=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(c?c["X-WebChannel-Content-Type"]=v.messageContentType:c={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(c?c["X-WebChannel-Client-Profile"]=v.va:c={"X-WebChannel-Client-Profile":v.va}),this.g.S=c,(c=v&&v.Sb)&&!q(c)&&(this.g.m=c),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!q(v)&&(this.g.D=v,c=this.h,c!==null&&v in c&&(c=this.h,v in c&&delete c[v])),this.j=new xr(this)}R(nn,It),nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){Ot(this.g)},nn.prototype.o=function(c){var v=this.g;if(typeof c=="string"){var x={};x.__data__=c,c=x}else this.u&&(x={},x.__data__=Ka(c),c=x);v.i.push(new qu(v.Ya++,c)),v.G==3&&_r(v)},nn.prototype.N=function(){this.g.l=null,delete this.j,Ot(this.g),delete this.g,nn.aa.N.call(this)};function oc(c){mr.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var v=c.__sm__;if(v){e:{for(const x in v){c=x;break e}c=void 0}(this.i=c)&&(c=this.i,v=v!==null&&c in v?v[c]:void 0),this.data=v}else this.data=c}R(oc,mr);function ac(){To.call(this),this.status=1}R(ac,To);function xr(c){this.g=c}R(xr,hl),xr.prototype.ua=function(){St(this.g,"a")},xr.prototype.ta=function(c){St(this.g,new oc(c))},xr.prototype.sa=function(c){St(this.g,new ac)},xr.prototype.ra=function(){St(this.g,"b")},Uo.prototype.createWebChannel=Uo.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,xE=function(){return new Uo},_E=function(){return ws()},wE=gr,Yp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Po.NO_ERROR=0,Po.TIMEOUT=8,Po.HTTP_ERROR=6,mh=Po,Uu.COMPLETE="complete",vE=Uu,Eo.EventType=Nn,Nn.OPEN="a",Nn.CLOSE="b",Nn.ERROR="c",Nn.MESSAGE="d",It.prototype.listen=It.prototype.K,Bl=Eo,st.prototype.listenOnce=st.prototype.L,st.prototype.getLastError=st.prototype.Ka,st.prototype.getLastErrorCode=st.prototype.Ba,st.prototype.getStatus=st.prototype.Z,st.prototype.getResponseJson=st.prototype.Oa,st.prototype.getResponseText=st.prototype.oa,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Ha,yE=st}).apply(typeof nh<"u"?nh:typeof self<"u"?self:typeof window<"u"?window:{});const iw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Xt.UNAUTHENTICATED=new Xt(null),Xt.GOOGLE_CREDENTIALS=new Xt("google-credentials-uid"),Xt.FIRST_PARTY=new Xt("first-party-uid"),Xt.MOCK_USER=new Xt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ma="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=new Yh("@firebase/firestore");function Ll(){return ro.logLevel}function ye(n,...e){if(ro.logLevel<=Ue.DEBUG){const t=e.map(Wm);ro.debug(`Firestore (${Ma}): ${n}`,...t)}}function ui(n,...e){if(ro.logLevel<=Ue.ERROR){const t=e.map(Wm);ro.error(`Firestore (${Ma}): ${n}`,...t)}}function Ia(n,...e){if(ro.logLevel<=Ue.WARN){const t=e.map(Wm);ro.warn(`Firestore (${Ma}): ${n}`,...t)}}function Wm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(n="Unexpected state"){const e=`FIRESTORE (${Ma}) INTERNAL ASSERTION FAILED: `+n;throw ui(e),new Error(e)}function Ye(n,e){n||Ae()}function ke(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends pr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class YC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Xt.UNAUTHENTICATED))}shutdown(){}}class XC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class JC{constructor(e){this.t=e,this.currentUser=Xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ye(this.o===void 0);let r=this.i;const s=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let a=new ii;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ii,e.enqueueRetryable(()=>s(this.currentUser))};const u=()=>{const f=a;e.enqueueRetryable(async()=>{await f.promise,await s(this.currentUser)})},h=f=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(f=>h(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ii)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ye(typeof r.accessToken=="string"),new EE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ye(e===null||typeof e=="string"),new Xt(e)}}class ZC{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Xt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class eR{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new ZC(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class tR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ye(this.o===void 0);const r=a=>{a.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.R;return this.R=a.token,ye("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?s(a):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ye(typeof t.token=="string"),this.R=t.token,new tR(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=rR(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<t&&(r+=e.charAt(s[a]%e.length))}return r}}function He(n,e){return n<e?-1:n>e?1:0}function Sa(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ce(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return kt.fromMillis(Date.now())}static fromDate(e){return kt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new kt(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.timestamp=e}static fromTimestamp(e){return new be(e)}static min(){return new be(new kt(0,0))}static max(){return new be(new kt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ae(),r===void 0?r=e.length-t:r>e.length-t&&Ae(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return au.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof au?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const a=e.get(s),u=t.get(s);if(a<u)return-1;if(a>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class it extends au{construct(e,t,r){return new it(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ce(X.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new it(t)}static emptyPath(){return new it([])}}const iR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zt extends au{construct(e,t,r){return new zt(e,t,r)}static isValidIdentifier(e){return iR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new zt(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const a=()=>{if(r.length===0)throw new ce(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new ce(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ce(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else h==="`"?(u=!u,s++):h!=="."||u?(r+=h,s++):(a(),s++)}if(a(),u)throw new ce(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zt(t)}static emptyPath(){return new zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(it.fromString(e))}static fromName(e){return new _e(it.fromString(e).popFirst(5))}static empty(){return new _e(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&it.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return it.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new it(e.slice()))}}function sR(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=be.fromTimestamp(r===1e9?new kt(t+1,0):new kt(t,r));return new rs(s,_e.empty(),e)}function oR(n){return new rs(n.readTime,n.key,-1)}class rs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new rs(be.min(),_e.empty(),-1)}static max(){return new rs(be.max(),_e.empty(),-1)}}function aR(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(n.documentKey,e.documentKey),t!==0?t:He(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iu(n){if(n.code!==X.FAILED_PRECONDITION||n.message!==lR)throw n;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new te((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof te?t:te.resolve(t)}catch(t){return te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):te.reject(t)}static resolve(e){return new te((t,r)=>{t(e)})}static reject(e){return new te((t,r)=>{r(e)})}static waitFor(e){return new te((t,r)=>{let s=0,a=0,u=!1;e.forEach(h=>{++s,h.next(()=>{++a,u&&a===s&&t()},f=>r(f))}),u=!0,a===s&&t()})}static or(e){let t=te.resolve(!1);for(const r of e)t=t.next(s=>s?te.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,a)=>{r.push(t.call(this,s,a))}),this.waitFor(r)}static mapArray(e,t){return new te((r,s)=>{const a=e.length,u=new Array(a);let h=0;for(let f=0;f<a;f++){const m=f;t(e[m]).next(y=>{u[m]=y,++h,h===a&&r(u)},y=>s(y))}})}static doWhile(e,t){return new te((r,s)=>{const a=()=>{e()===!0?t().next(()=>{a()},s):r()};a()})}}function cR(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Su(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Hm.oe=-1;function ed(n){return n==null}function Ch(n){return n===0&&1/n==-1/0}function hR(n){return typeof n=="number"&&Number.isInteger(n)&&!Ch(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function fo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function IE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,t){this.comparator=e,this.root=t||Bt.EMPTY}insert(e,t){return new ht(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Bt.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rh(this.root,e,this.comparator,!1)}getReverseIterator(){return new rh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rh(this.root,e,this.comparator,!0)}}class rh{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bt{constructor(e,t,r,s,a){this.key=e,this.value=t,this.color=r??Bt.RED,this.left=s??Bt.EMPTY,this.right=a??Bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,a){return new Bt(e??this.key,t??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,r),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Bt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ae();const e=this.left.check();if(e!==this.right.check())throw Ae();return e+(this.isRed()?0:1)}}Bt.EMPTY=null,Bt.RED=!0,Bt.BLACK=!1;Bt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae()}get value(){throw Ae()}get color(){throw Ae()}get left(){throw Ae()}get right(){throw Ae()}copy(e,t,r,s,a){return this}insert(e,t,r){return new Bt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ow(this.data.getIterator())}getIteratorFrom(e){return new ow(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof $t)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new $t(this.comparator);return t.data=e,t}}class ow{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.fields=e,e.sort(zt.comparator)}static empty(){return new kn([])}unionWith(e){let t=new $t(zt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new kn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Sa(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new SE("Invalid base64 string: "+a):a}}(e);return new qt(t)}static fromUint8Array(e){const t=function(s){let a="";for(let u=0;u<s.length;++u)a+=String.fromCharCode(s[u]);return a}(e);return new qt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qt.EMPTY_BYTE_STRING=new qt("");const dR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function is(n){if(Ye(!!n),typeof n=="string"){let e=0;const t=dR.exec(n);if(Ye(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:mt(n.seconds),nanos:mt(n.nanos)}}function mt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function io(n){return typeof n=="string"?qt.fromBase64String(n):qt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Km(n){const e=n.mapValue.fields.__previous_value__;return Gm(e)?Km(e):e}function lu(n){const e=is(n.mapValue.fields.__local_write_time__.timestampValue);return new kt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,t,r,s,a,u,h,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=m}}class uu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new uu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof uu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih={mapValue:{}};function so(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Gm(n)?4:mR(n)?9007199254740991:pR(n)?10:11:Ae()}function Vr(n,e){if(n===e)return!0;const t=so(n);if(t!==so(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return lu(n).isEqual(lu(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const u=is(s.timestampValue),h=is(a.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,a){return io(s.bytesValue).isEqual(io(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,a){return mt(s.geoPointValue.latitude)===mt(a.geoPointValue.latitude)&&mt(s.geoPointValue.longitude)===mt(a.geoPointValue.longitude)}(n,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return mt(s.integerValue)===mt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const u=mt(s.doubleValue),h=mt(a.doubleValue);return u===h?Ch(u)===Ch(h):isNaN(u)&&isNaN(h)}return!1}(n,e);case 9:return Sa(n.arrayValue.values||[],e.arrayValue.values||[],Vr);case 10:case 11:return function(s,a){const u=s.mapValue.fields||{},h=a.mapValue.fields||{};if(sw(u)!==sw(h))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(h[f]===void 0||!Vr(u[f],h[f])))return!1;return!0}(n,e);default:return Ae()}}function cu(n,e){return(n.values||[]).find(t=>Vr(t,e))!==void 0}function Pa(n,e){if(n===e)return 0;const t=so(n),r=so(e);if(t!==r)return He(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return He(n.booleanValue,e.booleanValue);case 2:return function(a,u){const h=mt(a.integerValue||a.doubleValue),f=mt(u.integerValue||u.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1}(n,e);case 3:return aw(n.timestampValue,e.timestampValue);case 4:return aw(lu(n),lu(e));case 5:return He(n.stringValue,e.stringValue);case 6:return function(a,u){const h=io(a),f=io(u);return h.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(a,u){const h=a.split("/"),f=u.split("/");for(let m=0;m<h.length&&m<f.length;m++){const y=He(h[m],f[m]);if(y!==0)return y}return He(h.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,u){const h=He(mt(a.latitude),mt(u.latitude));return h!==0?h:He(mt(a.longitude),mt(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return lw(n.arrayValue,e.arrayValue);case 10:return function(a,u){var h,f,m,y;const _=a.fields||{},E=u.fields||{},I=(h=_.value)===null||h===void 0?void 0:h.arrayValue,R=(f=E.value)===null||f===void 0?void 0:f.arrayValue,D=He(((m=I?.values)===null||m===void 0?void 0:m.length)||0,((y=R?.values)===null||y===void 0?void 0:y.length)||0);return D!==0?D:lw(I,R)}(n.mapValue,e.mapValue);case 11:return function(a,u){if(a===ih.mapValue&&u===ih.mapValue)return 0;if(a===ih.mapValue)return 1;if(u===ih.mapValue)return-1;const h=a.fields||{},f=Object.keys(h),m=u.fields||{},y=Object.keys(m);f.sort(),y.sort();for(let _=0;_<f.length&&_<y.length;++_){const E=He(f[_],y[_]);if(E!==0)return E;const I=Pa(h[f[_]],m[y[_]]);if(I!==0)return I}return He(f.length,y.length)}(n.mapValue,e.mapValue);default:throw Ae()}}function aw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return He(n,e);const t=is(n),r=is(e),s=He(t.seconds,r.seconds);return s!==0?s:He(t.nanos,r.nanos)}function lw(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const a=Pa(t[s],r[s]);if(a)return a}return He(t.length,r.length)}function Aa(n){return Xp(n)}function Xp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=is(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return io(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return _e.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const a of t.values||[])s?s=!1:r+=",",r+=Xp(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const u of r)a?a=!1:s+=",",s+=`${u}:${Xp(t.fields[u])}`;return s+"}"}(n.mapValue):Ae()}function uw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Jp(n){return!!n&&"integerValue"in n}function Qm(n){return!!n&&"arrayValue"in n}function cw(n){return!!n&&"nullValue"in n}function hw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function gh(n){return!!n&&"mapValue"in n}function pR(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Gl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return fo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Gl(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Gl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function mR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.value=e}static empty(){return new yn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!gh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gl(t)}setAll(e){let t=zt.emptyPath(),r={},s=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const f=this.getFieldsMap(t);this.applyChanges(f,r,s),r={},s=[],t=h.popLast()}u?r[h.lastSegment()]=Gl(u):s.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,s)}delete(e){const t=this.field(e.popLast());gh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];gh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){fo(t,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new yn(Gl(this.value))}}function PE(n){const e=[];return fo(n.fields,(t,r)=>{const s=new zt([t]);if(gh(r)){const a=PE(r.mapValue).fields;if(a.length===0)e.push(s);else for(const u of a)e.push(s.child(u))}else e.push(s)}),new kn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,t,r,s,a,u,h){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=a,this.data=u,this.documentState=h}static newInvalidDocument(e){return new Jt(e,0,be.min(),be.min(),be.min(),yn.empty(),0)}static newFoundDocument(e,t,r,s){return new Jt(e,1,t,be.min(),r,s,0)}static newNoDocument(e,t){return new Jt(e,2,t,be.min(),be.min(),yn.empty(),0)}static newUnknownDocument(e,t){return new Jt(e,3,t,be.min(),be.min(),yn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,t){this.position=e,this.inclusive=t}}function dw(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const a=e[s],u=n.position[s];if(a.field.isKeyField()?r=_e.comparator(_e.fromName(u.referenceValue),t.key):r=Pa(u,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function fw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Vr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,t="asc"){this.field=e,this.dir=t}}function gR(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let AE=class{};class Et extends AE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new vR(e,t,r):t==="array-contains"?new xR(e,r):t==="in"?new ER(e,r):t==="not-in"?new TR(e,r):t==="array-contains-any"?new IR(e,r):new Et(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new wR(e,r):new _R(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Pa(t,this.value)):t!==null&&so(this.value)===so(t)&&this.matchesComparison(Pa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fr extends AE{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new fr(e,t)}matches(e){return bE(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function bE(n){return n.op==="and"}function kE(n){return yR(n)&&bE(n)}function yR(n){for(const e of n.filters)if(e instanceof fr)return!1;return!0}function Zp(n){if(n instanceof Et)return n.field.canonicalString()+n.op.toString()+Aa(n.value);if(kE(n))return n.filters.map(e=>Zp(e)).join(",");{const e=n.filters.map(t=>Zp(t)).join(",");return`${n.op}(${e})`}}function CE(n,e){return n instanceof Et?function(r,s){return s instanceof Et&&r.op===s.op&&r.field.isEqual(s.field)&&Vr(r.value,s.value)}(n,e):n instanceof fr?function(r,s){return s instanceof fr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,u,h)=>a&&CE(u,s.filters[h]),!0):!1}(n,e):void Ae()}function RE(n){return n instanceof Et?function(t){return`${t.field.canonicalString()} ${t.op} ${Aa(t.value)}`}(n):n instanceof fr?function(t){return t.op.toString()+" {"+t.getFilters().map(RE).join(" ,")+"}"}(n):"Filter"}class vR extends Et{constructor(e,t,r){super(e,t,r),this.key=_e.fromName(r.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class wR extends Et{constructor(e,t){super(e,"in",t),this.keys=NE("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class _R extends Et{constructor(e,t){super(e,"not-in",t),this.keys=NE("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function NE(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>_e.fromName(r.referenceValue))}class xR extends Et{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Qm(t)&&cu(t.arrayValue,this.value)}}class ER extends Et{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&cu(this.value.arrayValue,t)}}class TR extends Et{constructor(e,t){super(e,"not-in",t)}matches(e){if(cu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!cu(this.value.arrayValue,t)}}class IR extends Et{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Qm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>cu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e,t=null,r=[],s=[],a=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=u,this.endAt=h,this.ue=null}}function pw(n,e=null,t=[],r=[],s=null,a=null,u=null){return new SR(n,e,t,r,s,a,u)}function Ym(n){const e=ke(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Zp(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),ed(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Aa(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Aa(r)).join(",")),e.ue=t}return e.ue}function Xm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!gR(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!CE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!fw(n.startAt,e.startAt)&&fw(n.endAt,e.endAt)}function em(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,t=null,r=[],s=[],a=null,u="F",h=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=u,this.startAt=h,this.endAt=f,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function PR(n,e,t,r,s,a,u,h){return new Oa(n,e,t,r,s,a,u,h)}function Jm(n){return new Oa(n)}function mw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function DE(n){return n.collectionGroup!==null}function Kl(n){const e=ke(n);if(e.ce===null){e.ce=[];const t=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new $t(zt.comparator);return u.filters.forEach(f=>{f.getFlattenedFilters().forEach(m=>{m.isInequality()&&(h=h.add(m.field))})}),h})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.ce.push(new hu(a,r))}),t.has(zt.keyField().canonicalString())||e.ce.push(new hu(zt.keyField(),r))}return e.ce}function Cr(n){const e=ke(n);return e.le||(e.le=AR(e,Kl(n))),e.le}function AR(n,e){if(n.limitType==="F")return pw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new hu(s.field,a)});const t=n.endAt?new Rh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Rh(n.startAt.position,n.startAt.inclusive):null;return pw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function tm(n,e){const t=n.filters.concat([e]);return new Oa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Nh(n,e,t){return new Oa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function td(n,e){return Xm(Cr(n),Cr(e))&&n.limitType===e.limitType}function jE(n){return`${Ym(Cr(n))}|lt:${n.limitType}`}function la(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>RE(s)).join(", ")}]`),ed(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>Aa(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>Aa(s)).join(",")),`Target(${r})`}(Cr(n))}; limitType=${n.limitType})`}function nd(n,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):_e.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,s){for(const a of Kl(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(u,h,f){const m=dw(u,h,f);return u.inclusive?m<=0:m<0}(r.startAt,Kl(r),s)||r.endAt&&!function(u,h,f){const m=dw(u,h,f);return u.inclusive?m>=0:m>0}(r.endAt,Kl(r),s))}(n,e)}function bR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function VE(n){return(e,t)=>{let r=!1;for(const s of Kl(n)){const a=kR(s,e,t);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function kR(n,e,t){const r=n.field.isKeyField()?_e.comparator(e.key,t.key):function(a,u,h){const f=u.data.field(a),m=h.data.field(a);return f!==null&&m!==null?Pa(f,m):Ae()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){fo(this.inner,(t,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return IE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR=new ht(_e.comparator);function ci(){return CR}const LE=new ht(_e.comparator);function zl(...n){let e=LE;for(const t of n)e=e.insert(t.key,t);return e}function ME(n){let e=LE;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Qs(){return Ql()}function OE(){return Ql()}function Ql(){return new Fa(n=>n.toString(),(n,e)=>n.isEqual(e))}const RR=new ht(_e.comparator),NR=new $t(_e.comparator);function Oe(...n){let e=NR;for(const t of n)e=e.add(t);return e}const DR=new $t(He);function jR(){return DR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ch(e)?"-0":e}}function FE(n){return{integerValue:""+n}}function UE(n,e){return hR(e)?FE(e):Zm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(){this._=void 0}}function VR(n,e,t){return n instanceof Dh?function(s,a){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Gm(a)&&(a=Km(a)),a&&(u.fields.__previous_value__=a),{mapValue:u}}(t,e):n instanceof du?zE(n,e):n instanceof fu?$E(n,e):function(s,a){const u=BE(s,a),h=gw(u)+gw(s.Pe);return Jp(u)&&Jp(s.Pe)?FE(h):Zm(s.serializer,h)}(n,e)}function LR(n,e,t){return n instanceof du?zE(n,e):n instanceof fu?$E(n,e):t}function BE(n,e){return n instanceof pu?function(r){return Jp(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class Dh extends rd{}class du extends rd{constructor(e){super(),this.elements=e}}function zE(n,e){const t=qE(e);for(const r of n.elements)t.some(s=>Vr(s,r))||t.push(r);return{arrayValue:{values:t}}}class fu extends rd{constructor(e){super(),this.elements=e}}function $E(n,e){let t=qE(e);for(const r of n.elements)t=t.filter(s=>!Vr(s,r));return{arrayValue:{values:t}}}class pu extends rd{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function gw(n){return mt(n.integerValue||n.doubleValue)}function qE(n){return Qm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e,t){this.field=e,this.transform=t}}function OR(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof du&&s instanceof du||r instanceof fu&&s instanceof fu?Sa(r.elements,s.elements,Vr):r instanceof pu&&s instanceof pu?Vr(r.Pe,s.Pe):r instanceof Dh&&s instanceof Dh}(n.transform,e.transform)}class FR{constructor(e,t){this.version=e,this.transformResults=t}}class an{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new an}static exists(e){return new an(void 0,e)}static updateTime(e){return new an(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class id{}function WE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new sd(n.key,an.none()):new Pu(n.key,n.data,an.none());{const t=n.data,r=yn.empty();let s=new $t(zt.comparator);for(let a of e.fields)if(!s.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?r.delete(a):r.set(a,u),s=s.add(a)}return new cs(n.key,r,new kn(s.toArray()),an.none())}}function UR(n,e,t){n instanceof Pu?function(s,a,u){const h=s.value.clone(),f=vw(s.fieldTransforms,a,u.transformResults);h.setAll(f),a.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,e,t):n instanceof cs?function(s,a,u){if(!yh(s.precondition,a))return void a.convertToUnknownDocument(u.version);const h=vw(s.fieldTransforms,a,u.transformResults),f=a.data;f.setAll(HE(s)),f.setAll(h),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):function(s,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function Yl(n,e,t,r){return n instanceof Pu?function(a,u,h,f){if(!yh(a.precondition,u))return h;const m=a.value.clone(),y=ww(a.fieldTransforms,f,u);return m.setAll(y),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof cs?function(a,u,h,f){if(!yh(a.precondition,u))return h;const m=ww(a.fieldTransforms,f,u),y=u.data;return y.setAll(HE(a)),y.setAll(m),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(_=>_.field))}(n,e,t,r):function(a,u,h){return yh(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h}(n,e,t)}function BR(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),a=BE(r.transform,s||null);a!=null&&(t===null&&(t=yn.empty()),t.set(r.field,a))}return t||null}function yw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Sa(r,s,(a,u)=>OR(a,u))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Pu extends id{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class cs extends id{constructor(e,t,r,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function HE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function vw(n,e,t){const r=new Map;Ye(n.length===t.length);for(let s=0;s<t.length;s++){const a=n[s],u=a.transform,h=e.data.field(a.field);r.set(a.field,LR(u,h,t[s]))}return r}function ww(n,e,t){const r=new Map;for(const s of n){const a=s.transform,u=t.data.field(s.field);r.set(s.field,VR(a,u,e))}return r}class sd extends id{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zR extends id{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&UR(a,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Yl(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Yl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=OE();return this.mutations.forEach(s=>{const a=e.get(s.key),u=a.overlayedDocument;let h=this.applyToLocalView(u,a.mutatedFields);h=t.has(s.key)?null:h;const f=WE(u,h);f!==null&&r.set(s.key,f),u.isValidDocument()||u.convertToNoDocument(be.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Oe())}isEqual(e){return this.batchId===e.batchId&&Sa(this.mutations,e.mutations,(t,r)=>yw(t,r))&&Sa(this.baseMutations,e.baseMutations,(t,r)=>yw(t,r))}}class eg{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Ye(e.mutations.length===r.length);let s=function(){return RR}();const a=e.mutations;for(let u=0;u<a.length;u++)s=s.insert(a[u].key,r[u].version);return new eg(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _t,$e;function HR(n){switch(n){default:return Ae();case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0}}function GE(n){if(n===void 0)return ui("GRPC error has no .code"),X.UNKNOWN;switch(n){case _t.OK:return X.OK;case _t.CANCELLED:return X.CANCELLED;case _t.UNKNOWN:return X.UNKNOWN;case _t.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case _t.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case _t.INTERNAL:return X.INTERNAL;case _t.UNAVAILABLE:return X.UNAVAILABLE;case _t.UNAUTHENTICATED:return X.UNAUTHENTICATED;case _t.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case _t.NOT_FOUND:return X.NOT_FOUND;case _t.ALREADY_EXISTS:return X.ALREADY_EXISTS;case _t.PERMISSION_DENIED:return X.PERMISSION_DENIED;case _t.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case _t.ABORTED:return X.ABORTED;case _t.OUT_OF_RANGE:return X.OUT_OF_RANGE;case _t.UNIMPLEMENTED:return X.UNIMPLEMENTED;case _t.DATA_LOSS:return X.DATA_LOSS;default:return Ae()}}($e=_t||(_t={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=new Js([4294967295,4294967295],0);function _w(n){const e=GR().encode(n),t=new gE;return t.update(e),new Uint8Array(t.digest())}function xw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Js([t,r],0),new Js([s,a],0)]}class tg{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new $l(`Invalid padding: ${t}`);if(r<0)throw new $l(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $l(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new $l(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Js.fromNumber(this.Ie)}Ee(e,t,r){let s=e.add(t.multiply(Js.fromNumber(r)));return s.compare(KR)===1&&(s=new Js([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=_w(e),[r,s]=xw(t);for(let a=0;a<this.hashCount;a++){const u=this.Ee(r,s,a);if(!this.de(u))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new tg(a,s,t);return r.forEach(h=>u.insert(h)),u}insert(e){if(this.Ie===0)return;const t=_w(e),[r,s]=xw(t);for(let a=0;a<this.hashCount;a++){const u=this.Ee(r,s,a);this.Ae(u)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class $l extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,t,r,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Au.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new od(be.min(),s,new ht(He),ci(),Oe())}}class Au{constructor(e,t,r,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Au(r,t,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,t,r,s){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=s}}class KE{constructor(e,t){this.targetId=e,this.me=t}}class QE{constructor(e,t,r=qt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Ew{constructor(){this.fe=0,this.ge=Iw(),this.pe=qt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Oe(),t=Oe(),r=Oe();return this.ge.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Ae()}}),new Au(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=Iw()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ye(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class QR{constructor(e){this.Le=e,this.Be=new Map,this.ke=ci(),this.qe=Tw(),this.Qe=new ht(He)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Ae()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,s)=>{this.ze(s)&&t(s)})}He(e){const t=e.targetId,r=e.me.count,s=this.Je(t);if(s){const a=s.target;if(em(a))if(r===0){const u=new _e(a.path);this.Ue(t,u,Jt.newNoDocument(u,be.min()))}else Ye(r===1);else{const u=this.Ye(t);if(u!==r){const h=this.Ze(e),f=h?this.Xe(h,e,u):1;if(f!==0){this.je(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,m)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=t;let u,h;try{u=io(r).toUint8Array()}catch(f){if(f instanceof SE)return Ia("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new tg(u,s,a)}catch(f){return Ia(f instanceof $l?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.Ie===0?null:h}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let s=0;return r.forEach(a=>{const u=this.Le.tt(),h=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.Ue(t,a,null),s++)}),s}rt(e){const t=new Map;this.Be.forEach((a,u)=>{const h=this.Je(u);if(h){if(a.current&&em(h.target)){const f=new _e(h.target.path);this.ke.get(f)!==null||this.it(u,f)||this.Ue(u,f,Jt.newNoDocument(f,e))}a.be&&(t.set(u,a.ve()),a.Ce())}});let r=Oe();this.qe.forEach((a,u)=>{let h=!0;u.forEachWhile(f=>{const m=this.Je(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(a))}),this.ke.forEach((a,u)=>u.setReadTime(e));const s=new od(e,t,this.Qe,this.ke,r);return this.ke=ci(),this.qe=Tw(),this.Qe=new ht(He),s}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,t)?s.Fe(t,1):s.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Ew,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new $t(He),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||ye("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ew),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Tw(){return new ht(_e.comparator)}function Iw(){return new ht(_e.comparator)}const YR={asc:"ASCENDING",desc:"DESCENDING"},XR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},JR={and:"AND",or:"OR"};class ZR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function nm(n,e){return n.useProto3Json||ed(e)?e:{value:e}}function jh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function YE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function eN(n,e){return jh(n,e.toTimestamp())}function Rr(n){return Ye(!!n),be.fromTimestamp(function(t){const r=is(t);return new kt(r.seconds,r.nanos)}(n))}function ng(n,e){return rm(n,e).canonicalString()}function rm(n,e){const t=function(s){return new it(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function XE(n){const e=it.fromString(n);return Ye(nT(e)),e}function im(n,e){return ng(n.databaseId,e.path)}function pp(n,e){const t=XE(e);if(t.get(1)!==n.databaseId.projectId)throw new ce(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ce(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new _e(ZE(t))}function JE(n,e){return ng(n.databaseId,e)}function tN(n){const e=XE(n);return e.length===4?it.emptyPath():ZE(e)}function sm(n){return new it(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ZE(n){return Ye(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Sw(n,e,t){return{name:im(n,e),fields:t.value.mapValue.fields}}function nN(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(m,y){return m.useProto3Json?(Ye(y===void 0||typeof y=="string"),qt.fromBase64String(y||"")):(Ye(y===void 0||y instanceof Buffer||y instanceof Uint8Array),qt.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(m){const y=m.code===void 0?X.UNKNOWN:GE(m.code);return new ce(y,m.message||"")}(u);t=new QE(r,s,a,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=pp(n,r.document.name),a=Rr(r.document.updateTime),u=r.document.createTime?Rr(r.document.createTime):be.min(),h=new yn({mapValue:{fields:r.document.fields}}),f=Jt.newFoundDocument(s,a,u,h),m=r.targetIds||[],y=r.removedTargetIds||[];t=new vh(m,y,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=pp(n,r.document),a=r.readTime?Rr(r.readTime):be.min(),u=Jt.newNoDocument(s,a),h=r.removedTargetIds||[];t=new vh([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=pp(n,r.document),a=r.removedTargetIds||[];t=new vh([],a,s,null)}else{if(!("filter"in e))return Ae();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,u=new WR(s,a),h=r.targetId;t=new KE(h,u)}}return t}function rN(n,e){let t;if(e instanceof Pu)t={update:Sw(n,e.key,e.value)};else if(e instanceof sd)t={delete:im(n,e.key)};else if(e instanceof cs)t={update:Sw(n,e.key,e.data),updateMask:dN(e.fieldMask)};else{if(!(e instanceof zR))return Ae();t={verify:im(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,u){const h=u.transform;if(h instanceof Dh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof du)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof fu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof pu)return{fieldPath:u.field.canonicalString(),increment:h.Pe};throw Ae()}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:eN(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ae()}(n,e.precondition)),t}function iN(n,e){return n&&n.length>0?(Ye(e!==void 0),n.map(t=>function(s,a){let u=s.updateTime?Rr(s.updateTime):Rr(a);return u.isEqual(be.min())&&(u=Rr(a)),new FR(u,s.transformResults||[])}(t,e))):[]}function sN(n,e){return{documents:[JE(n,e.path)]}}function oN(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=JE(n,s);const a=function(m){if(m.length!==0)return tT(fr.create(m,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const u=function(m){if(m.length!==0)return m.map(y=>function(E){return{field:ua(E.field),direction:uN(E.dir)}}(y))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=nm(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{_t:t,parent:s}}function aN(n){let e=tN(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Ye(r===1);const y=t.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let a=[];t.where&&(a=function(_){const E=eT(_);return E instanceof fr&&kE(E)?E.getFilters():[E]}(t.where));let u=[];t.orderBy&&(u=function(_){return _.map(E=>function(R){return new hu(ca(R.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(E))}(t.orderBy));let h=null;t.limit&&(h=function(_){let E;return E=typeof _=="object"?_.value:_,ed(E)?null:E}(t.limit));let f=null;t.startAt&&(f=function(_){const E=!!_.before,I=_.values||[];return new Rh(I,E)}(t.startAt));let m=null;return t.endAt&&(m=function(_){const E=!_.before,I=_.values||[];return new Rh(I,E)}(t.endAt)),PR(e,s,u,a,h,"F",f,m)}function lN(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function eT(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ca(t.unaryFilter.field);return Et.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ca(t.unaryFilter.field);return Et.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ca(t.unaryFilter.field);return Et.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ca(t.unaryFilter.field);return Et.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Ae()}}(n):n.fieldFilter!==void 0?function(t){return Et.create(ca(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ae()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return fr.create(t.compositeFilter.filters.map(r=>eT(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ae()}}(t.compositeFilter.op))}(n):Ae()}function uN(n){return YR[n]}function cN(n){return XR[n]}function hN(n){return JR[n]}function ua(n){return{fieldPath:n.canonicalString()}}function ca(n){return zt.fromServerFormat(n.fieldPath)}function tT(n){return n instanceof Et?function(t){if(t.op==="=="){if(hw(t.value))return{unaryFilter:{field:ua(t.field),op:"IS_NAN"}};if(cw(t.value))return{unaryFilter:{field:ua(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(hw(t.value))return{unaryFilter:{field:ua(t.field),op:"IS_NOT_NAN"}};if(cw(t.value))return{unaryFilter:{field:ua(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ua(t.field),op:cN(t.op),value:t.value}}}(n):n instanceof fr?function(t){const r=t.getFilters().map(s=>tT(s));return r.length===1?r[0]:{compositeFilter:{op:hN(t.op),filters:r}}}(n):Ae()}function dN(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function nT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,t,r,s,a=be.min(),u=be.min(),h=qt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new Qi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Qi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e){this.ct=e}}function pN(n){const e=aN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Nh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(){this.un=new gN}addToCollectionParentIndex(e,t){return this.un.add(t),te.resolve()}getCollectionParents(e,t){return te.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return te.resolve()}deleteFieldIndex(e,t){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,t){return te.resolve()}getDocumentsMatchingTarget(e,t){return te.resolve(null)}getIndexType(e,t){return te.resolve(0)}getFieldIndexes(e,t){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,t){return te.resolve(rs.min())}getMinOffsetFromCollectionGroup(e,t){return te.resolve(rs.min())}updateCollectionGroup(e,t,r){return te.resolve()}updateIndexEntries(e,t){return te.resolve()}}class gN{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new $t(it.comparator),a=!s.has(r);return this.index[t]=s.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new $t(it.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ba(0)}static kn(){return new ba(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(){this.changes=new Fa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Jt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?te.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&Yl(r.mutation,s,kn.empty(),kt.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Oe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Oe()){const s=Qs();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(a=>{let u=zl();return a.forEach((h,f)=>{u=u.insert(h,f.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=Qs();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Oe()))}populateOverlays(e,t,r){const s=[];return r.forEach(a=>{t.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((u,h)=>{t.set(u,h)})})}computeViews(e,t,r,s){let a=ci();const u=Ql(),h=function(){return Ql()}();return t.forEach((f,m)=>{const y=r.get(m.key);s.has(m.key)&&(y===void 0||y.mutation instanceof cs)?a=a.insert(m.key,m):y!==void 0?(u.set(m.key,y.mutation.getFieldMask()),Yl(y.mutation,m,y.mutation.getFieldMask(),kt.now())):u.set(m.key,kn.empty())}),this.recalculateAndSaveOverlays(e,a).next(f=>(f.forEach((m,y)=>u.set(m,y)),t.forEach((m,y)=>{var _;return h.set(m,new vN(y,(_=u.get(m))!==null&&_!==void 0?_:null))}),h))}recalculateAndSaveOverlays(e,t){const r=Ql();let s=new ht((u,h)=>u-h),a=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const h of u)h.keys().forEach(f=>{const m=t.get(f);if(m===null)return;let y=r.get(f)||kn.empty();y=h.applyToLocalView(m,y),r.set(f,y);const _=(s.get(h.batchId)||Oe()).add(f);s=s.insert(h.batchId,_)})}).next(()=>{const u=[],h=s.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),m=f.key,y=f.value,_=OE();y.forEach(E=>{if(!a.has(E)){const I=WE(t.get(E),r.get(E));I!==null&&_.set(E,I),a=a.add(E)}}),u.push(this.documentOverlayCache.saveOverlays(e,m,_))}return te.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(u){return _e.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):DE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(a=>{const u=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-a.size):te.resolve(Qs());let h=-1,f=a;return u.next(m=>te.forEach(m,(y,_)=>(h<_.largestBatchId&&(h=_.largestBatchId),a.get(y)?te.resolve():this.remoteDocumentCache.getEntry(e,y).next(E=>{f=f.insert(y,E)}))).next(()=>this.populateOverlays(e,m,a)).next(()=>this.computeViews(e,f,m,Oe())).next(y=>({batchId:h,changes:ME(y)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next(r=>{let s=zl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const a=t.collectionGroup;let u=zl();return this.indexManager.getCollectionParents(e,a).next(h=>te.forEach(h,f=>{const m=function(_,E){return new Oa(E,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next(y=>{y.forEach((_,E)=>{u=u.insert(_,E)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,s))).next(u=>{a.forEach((f,m)=>{const y=m.getKey();u.get(y)===null&&(u=u.insert(y,Jt.newInvalidDocument(y)))});let h=zl();return u.forEach((f,m)=>{const y=a.get(f);y!==void 0&&Yl(y.mutation,m,kn.empty(),kt.now()),nd(t,m)&&(h=h.insert(f,m))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return te.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:Rr(s.createTime)}}(t)),te.resolve()}getNamedQuery(e,t){return te.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(s){return{name:s.name,query:pN(s.bundledQuery),readTime:Rr(s.readTime)}}(t)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(){this.overlays=new ht(_e.comparator),this.Ir=new Map}getOverlay(e,t){return te.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Qs();return te.forEach(t,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,a)=>{this.ht(e,t,a)}),te.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(r)),te.resolve()}getOverlaysForCollection(e,t,r){const s=Qs(),a=t.length+1,u=new _e(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const f=h.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>r&&s.set(f.getKey(),f)}return te.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let a=new ht((m,y)=>m-y);const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let y=a.get(m.largestBatchId);y===null&&(y=Qs(),a=a.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}const h=Qs(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((m,y)=>h.set(m,y)),!(h.size()>=s)););return te.resolve(h)}ht(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const u=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new qR(t,r));let a=this.Ir.get(t);a===void 0&&(a=Oe(),this.Ir.set(t,a)),this.Ir.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(){this.sessionToken=qt.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(){this.Tr=new $t(jt.Er),this.dr=new $t(jt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new jt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new jt(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new _e(new it([])),r=new jt(t,e),s=new jt(t,e+1),a=[];return this.dr.forEachInRange([r,s],u=>{this.Vr(u),a.push(u.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new _e(new it([])),r=new jt(t,e),s=new jt(t,e+1);let a=Oe();return this.dr.forEachInRange([r,s],u=>{a=a.add(u.key)}),a}containsKey(e){const t=new jt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class jt{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return _e.comparator(e.key,t.key)||He(e.wr,t.wr)}static Ar(e,t){return He(e.wr,t.wr)||_e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new $t(jt.Er)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new $R(a,t,r,s);this.mutationQueue.push(u);for(const h of s)this.br=this.br.add(new jt(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return te.resolve(u)}lookupMutationBatch(e,t){return te.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.vr(r),a=s<0?0:s;return te.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new jt(t,0),s=new jt(t,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,s],u=>{const h=this.Dr(u.wr);a.push(h)}),te.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new $t(He);return t.forEach(s=>{const a=new jt(s,0),u=new jt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,u],h=>{r=r.add(h.wr)})}),te.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let a=r;_e.isDocumentKey(a)||(a=a.child(""));const u=new jt(new _e(a),0);let h=new $t(He);return this.br.forEachWhile(f=>{const m=f.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(h=h.add(f.wr)),!0)},u),te.resolve(this.Cr(h))}Cr(e){const t=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){Ye(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return te.forEach(t.mutations,s=>{const a=new jt(s.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new jt(t,0),s=this.br.firstAfterOrEqual(r);return te.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e){this.Mr=e,this.docs=function(){return new ht(_e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),a=s?s.size:0,u=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return te.resolve(r?r.document.mutableCopy():Jt.newInvalidDocument(t))}getEntries(e,t){let r=ci();return t.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():Jt.newInvalidDocument(s))}),te.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let a=ci();const u=t.path,h=new _e(u.child("")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:m,value:{document:y}}=f.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||aR(oR(y),r)<=0||(s.has(y.key)||nd(t,y))&&(a=a.insert(y.key,y.mutableCopy()))}return te.resolve(a)}getAllFromCollectionGroup(e,t,r,s){Ae()}Or(e,t){return te.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new SN(this)}getSize(e){return te.resolve(this.size)}}class SN extends yN{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),te.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e){this.persistence=e,this.Nr=new Fa(t=>Ym(t),Xm),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.Lr=0,this.Br=new rg,this.targetCount=0,this.kr=ba.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,s)=>t(s)),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),te.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new ba(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,te.resolve()}updateTargetData(e,t){return this.Kn(t),te.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,t,r){let s=0;const a=[];return this.Nr.forEach((u,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.Nr.delete(u),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),te.waitFor(a).next(()=>s)}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return te.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),te.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach(u=>{a.push(s.markPotentiallyOrphaned(e,u))}),te.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),te.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return te.resolve(r)}containsKey(e,t){return te.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Hm(0),this.Kr=!1,this.Kr=!0,this.$r=new EN,this.referenceDelegate=e(this),this.Ur=new PN(this),this.indexManager=new mN,this.remoteDocumentCache=function(s){return new IN(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new fN(t),this.Gr=new _N(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new xN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new TN(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){ye("MemoryPersistence","Starting transaction:",e);const s=new bN(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(a=>this.referenceDelegate.jr(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Hr(e,t){return te.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class bN extends uR{constructor(e){super(),this.currentSequenceNumber=e}}class ig{constructor(e){this.persistence=e,this.Jr=new rg,this.Yr=null}static Zr(e){return new ig(e)}get Xr(){if(this.Yr)return this.Yr;throw Ae()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),te.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),te.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),te.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(a=>this.Xr.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.Xr,r=>{const s=_e.fromPath(r);return this.ei(e,s).next(a=>{a||t.removeEntry(s,be.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return te.or([()=>te.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=s}static Wi(e,t){let r=Oe(),s=Oe();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new sg(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return mA()?8:cR(en())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,s){const a={result:null};return this.Yi(e,t).next(u=>{a.result=u}).next(()=>{if(!a.result)return this.Zi(e,t,s,r).next(u=>{a.result=u})}).next(()=>{if(a.result)return;const u=new kN;return this.Xi(e,t,u).next(h=>{if(a.result=h,this.zi)return this.es(e,t,u,h.size)})}).next(()=>a.result)}es(e,t,r,s){return r.documentReadCount<this.ji?(Ll()<=Ue.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",la(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),te.resolve()):(Ll()<=Ue.DEBUG&&ye("QueryEngine","Query:",la(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Ll()<=Ue.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",la(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Cr(t))):te.resolve())}Yi(e,t){if(mw(t))return te.resolve(null);let r=Cr(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=Nh(t,null,"F"),r=Cr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const u=Oe(...a);return this.Ji.getDocuments(e,u).next(h=>this.indexManager.getMinOffset(e,r).next(f=>{const m=this.ts(t,h);return this.ns(t,m,u,f.readTime)?this.Yi(e,Nh(t,null,"F")):this.rs(e,m,t,f)}))})))}Zi(e,t,r,s){return mw(t)||s.isEqual(be.min())?te.resolve(null):this.Ji.getDocuments(e,r).next(a=>{const u=this.ts(t,a);return this.ns(t,u,r,s)?te.resolve(null):(Ll()<=Ue.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),la(t)),this.rs(e,u,t,sR(s,-1)).next(h=>h))})}ts(e,t){let r=new $t(VE(e));return t.forEach((s,a)=>{nd(e,a)&&(r=r.add(a))}),r}ns(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Xi(e,t,r){return Ll()<=Ue.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",la(t)),this.Ji.getDocumentsMatchingQuery(e,t,rs.min(),r)}rs(e,t,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(a=>(t.forEach(u=>{a=a.insert(u.key,u)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e,t,r,s){this.persistence=e,this.ss=t,this.serializer=s,this.os=new ht(He),this._s=new Fa(a=>Ym(a),Xm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wN(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function NN(n,e,t,r){return new RN(n,e,t,r)}async function rT(n,e){const t=ke(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const u=[],h=[];let f=Oe();for(const m of s){u.push(m.batchId);for(const y of m.mutations)f=f.add(y.key)}for(const m of a){h.push(m.batchId);for(const y of m.mutations)f=f.add(y.key)}return t.localDocuments.getDocuments(r,f).next(m=>({hs:m,removedBatchIds:u,addedBatchIds:h}))})})}function DN(n,e){const t=ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=t.cs.newChangeBuffer({trackRemovals:!0});return function(h,f,m,y){const _=m.batch,E=_.keys();let I=te.resolve();return E.forEach(R=>{I=I.next(()=>y.getEntry(f,R)).next(D=>{const P=m.docVersions.get(R);Ye(P!==null),D.version.compareTo(P)<0&&(_.applyToRemoteDocument(D,m),D.isValidDocument()&&(D.setReadTime(m.commitVersion),y.addEntry(D)))})}),I.next(()=>h.mutationQueue.removeMutationBatch(f,_))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let f=Oe();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(f=f.add(h.batch.mutations[m].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function iT(n){const e=ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function jN(n,e){const t=ke(n),r=e.snapshotVersion;let s=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=t.cs.newChangeBuffer({trackRemovals:!0});s=t.os;const h=[];e.targetChanges.forEach((y,_)=>{const E=s.get(_);if(!E)return;h.push(t.Ur.removeMatchingKeys(a,y.removedDocuments,_).next(()=>t.Ur.addMatchingKeys(a,y.addedDocuments,_)));let I=E.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(_)!==null?I=I.withResumeToken(qt.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):y.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(y.resumeToken,r)),s=s.insert(_,I),function(D,P,W){return D.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0}(E,I,y)&&h.push(t.Ur.updateTargetData(a,I))});let f=ci(),m=Oe();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,y))}),h.push(VN(a,u,e.documentUpdates).next(y=>{f=y.Ps,m=y.Is})),!r.isEqual(be.min())){const y=t.Ur.getLastRemoteSnapshotVersion(a).next(_=>t.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(y)}return te.waitFor(h).next(()=>u.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,f,m)).next(()=>f)}).then(a=>(t.os=s,a))}function VN(n,e,t){let r=Oe(),s=Oe();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let u=ci();return t.forEach((h,f)=>{const m=a.get(h);f.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(h)),f.isNoDocument()&&f.version.isEqual(be.min())?(e.removeEntry(h,f.readTime),u=u.insert(h,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),u=u.insert(h,f)):ye("LocalStore","Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",f.version)}),{Ps:u,Is:s}})}function LN(n,e){const t=ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function MN(n,e){const t=ke(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Ur.getTargetData(r,e).next(a=>a?(s=a,te.resolve(s)):t.Ur.allocateTargetId(r).next(u=>(s=new Qi(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}async function om(n,e,t){const r=ke(n),s=r.os.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,u=>r.persistence.referenceDelegate.removeTarget(u,s))}catch(u){if(!Su(u))throw u;ye("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Pw(n,e,t){const r=ke(n);let s=be.min(),a=Oe();return r.persistence.runTransaction("Execute query","readwrite",u=>function(f,m,y){const _=ke(f),E=_._s.get(y);return E!==void 0?te.resolve(_.os.get(E)):_.Ur.getTargetData(m,y)}(r,u,Cr(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(u,h.targetId).next(f=>{a=f})}).next(()=>r.ss.getDocumentsMatchingQuery(u,e,t?s:be.min(),t?a:Oe())).next(h=>(ON(r,bR(e),h),{documents:h,Ts:a})))}function ON(n,e,t){let r=n.us.get(e)||be.min();t.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.us.set(e,r)}class Aw{constructor(){this.activeTargetIds=jR()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class FN{constructor(){this.so=new Aw,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Aw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ye("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ye("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sh=null;function mp(){return sh===null?sh=function(){return 268435456+Math.round(2147483648*Math.random())}():sh++,"0x"+sh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qt="WebChannelConnection";class $N extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${s}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${a}`}get Fo(){return!1}Mo(t,r,s,a,u){const h=mp(),f=this.xo(t,r.toUriEncodedString());ye("RestConnection",`Sending RPC '${t}' ${h}:`,f,s);const m={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(m,a,u),this.No(t,f,m,s).then(y=>(ye("RestConnection",`Received RPC '${t}' ${h}: `,y),y),y=>{throw Ia("RestConnection",`RPC '${t}' ${h} failed with error: `,y,"url: ",f,"request:",s),y})}Lo(t,r,s,a,u,h){return this.Mo(t,r,s,a,u)}Oo(t,r,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ma}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,u)=>t[u]=a),s&&s.headers.forEach((a,u)=>t[u]=a)}xo(t,r){const s=BN[t];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,s){const a=mp();return new Promise((u,h)=>{const f=new yE;f.setWithCredentials(!0),f.listenOnce(vE.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case mh.NO_ERROR:const y=f.getResponseJson();ye(Qt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(y)),u(y);break;case mh.TIMEOUT:ye(Qt,`RPC '${e}' ${a} timed out`),h(new ce(X.DEADLINE_EXCEEDED,"Request time out"));break;case mh.HTTP_ERROR:const _=f.getStatus();if(ye(Qt,`RPC '${e}' ${a} failed with status:`,_,"response text:",f.getResponseText()),_>0){let E=f.getResponseJson();Array.isArray(E)&&(E=E[0]);const I=E?.error;if(I&&I.status&&I.message){const R=function(P){const W=P.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(W)>=0?W:X.UNKNOWN}(I.status);h(new ce(R,I.message))}else h(new ce(X.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new ce(X.UNAVAILABLE,"Connection failed."));break;default:Ae()}}finally{ye(Qt,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(s);ye(Qt,`RPC '${e}' ${a} sending request:`,s),f.send(t,"POST",m,r,15)})}Bo(e,t,r){const s=mp(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=xE(),h=_E(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Oo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const y=a.join("");ye(Qt,`Creating RPC '${e}' stream ${s}: ${y}`,f);const _=u.createWebChannel(y,f);let E=!1,I=!1;const R=new zN({Io:P=>{I?ye(Qt,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(E||(ye(Qt,`Opening RPC '${e}' stream ${s} transport.`),_.open(),E=!0),ye(Qt,`RPC '${e}' stream ${s} sending:`,P),_.send(P))},To:()=>_.close()}),D=(P,W,q)=>{P.listen(W,M=>{try{q(M)}catch(Q){setTimeout(()=>{throw Q},0)}})};return D(_,Bl.EventType.OPEN,()=>{I||(ye(Qt,`RPC '${e}' stream ${s} transport opened.`),R.yo())}),D(_,Bl.EventType.CLOSE,()=>{I||(I=!0,ye(Qt,`RPC '${e}' stream ${s} transport closed`),R.So())}),D(_,Bl.EventType.ERROR,P=>{I||(I=!0,Ia(Qt,`RPC '${e}' stream ${s} transport errored:`,P),R.So(new ce(X.UNAVAILABLE,"The operation could not be completed")))}),D(_,Bl.EventType.MESSAGE,P=>{var W;if(!I){const q=P.data[0];Ye(!!q);const M=q,Q=M.error||((W=M[0])===null||W===void 0?void 0:W.error);if(Q){ye(Qt,`RPC '${e}' stream ${s} received error:`,Q);const Z=Q.status;let ie=function(k){const V=_t[k];if(V!==void 0)return GE(V)}(Z),N=Q.message;ie===void 0&&(ie=X.INTERNAL,N="Unknown error status: "+Z+" with message "+Q.message),I=!0,R.So(new ce(ie,N)),_.close()}else ye(Qt,`RPC '${e}' stream ${s} received:`,q),R.bo(q)}}),D(h,wE.STAT_EVENT,P=>{P.stat===Yp.PROXY?ye(Qt,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===Yp.NOPROXY&&ye(Qt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{R.wo()},0),R}}function gp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(n){return new ZR(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e,t,r=1e3,s=1.5,a=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=s,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,t-r);s>0&&ye("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e,t,r,s,a,u,h,f){this.ui=e,this.Ho=r,this.Jo=s,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new sT(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===X.RESOURCE_EXHAUSTED?(ui(t.toString()),ui("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===t&&this.P_(r,s)},r=>{e(()=>{const s=new ce(X.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ye("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(ye("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class qN extends oT{constructor(e,t,r,s,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,u),this.serializer=a}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=nN(this.serializer,e),r=function(a){if(!("targetChange"in a))return be.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?be.min():u.readTime?Rr(u.readTime):be.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=sm(this.serializer),t.addTarget=function(a,u){let h;const f=u.target;if(h=em(f)?{documents:sN(a,f)}:{query:oN(a,f)._t},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=YE(a,u.resumeToken);const m=nm(a,u.expectedCount);m!==null&&(h.expectedCount=m)}else if(u.snapshotVersion.compareTo(be.min())>0){h.readTime=jh(a,u.snapshotVersion.toTimestamp());const m=nm(a,u.expectedCount);m!==null&&(h.expectedCount=m)}return h}(this.serializer,e);const r=lN(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=sm(this.serializer),t.removeTarget=e,this.a_(t)}}class WN extends oT{constructor(e,t,r,s,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,u),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Ye(!!e.streamToken),this.lastStreamToken=e.streamToken,Ye(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=iN(e.writeResults,e.commitTime),r=Rr(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=sm(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>rN(this.serializer,r))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new ce(X.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Mo(e,rm(t,r),s,a,u)).catch(a=>{throw a.name==="FirebaseError"?(a.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ce(X.UNKNOWN,a.toString())})}Lo(e,t,r,s,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.Lo(e,rm(t,r),s,u,h,a)).catch(u=>{throw u.name==="FirebaseError"?(u.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ce(X.UNKNOWN,u.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class GN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ui(t),this.D_=!1):ye("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e,t,r,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(u=>{r.enqueueAndForget(async()=>{po(this)&&(ye("RemoteStore","Restarting streams for network reachability change."),await async function(f){const m=ke(f);m.L_.add(4),await bu(m),m.q_.set("Unknown"),m.L_.delete(4),await ld(m)}(this))})}),this.q_=new GN(r,s)}}async function ld(n){if(po(n))for(const e of n.B_)await e(!0)}async function bu(n){for(const e of n.B_)await e(!1)}function aT(n,e){const t=ke(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),ug(t)?lg(t):Ua(t).r_()&&ag(t,e))}function og(n,e){const t=ke(n),r=Ua(t);t.N_.delete(e),r.r_()&&lT(t,e),t.N_.size===0&&(r.r_()?r.o_():po(t)&&t.q_.set("Unknown"))}function ag(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ua(n).A_(e)}function lT(n,e){n.Q_.xe(e),Ua(n).R_(e)}function lg(n){n.Q_=new QR({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Ua(n).start(),n.q_.v_()}function ug(n){return po(n)&&!Ua(n).n_()&&n.N_.size>0}function po(n){return ke(n).L_.size===0}function uT(n){n.Q_=void 0}async function QN(n){n.q_.set("Online")}async function YN(n){n.N_.forEach((e,t)=>{ag(n,e)})}async function XN(n,e){uT(n),ug(n)?(n.q_.M_(e),lg(n)):n.q_.set("Unknown")}async function JN(n,e,t){if(n.q_.set("Online"),e instanceof QE&&e.state===2&&e.cause)try{await async function(s,a){const u=a.cause;for(const h of a.targetIds)s.N_.has(h)&&(await s.remoteSyncer.rejectListen(h,u),s.N_.delete(h),s.Q_.removeTarget(h))}(n,e)}catch(r){ye("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Vh(n,r)}else if(e instanceof vh?n.Q_.Ke(e):e instanceof KE?n.Q_.He(e):n.Q_.We(e),!t.isEqual(be.min()))try{const r=await iT(n.localStore);t.compareTo(r)>=0&&await function(a,u){const h=a.Q_.rt(u);return h.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const y=a.N_.get(m);y&&a.N_.set(m,y.withResumeToken(f.resumeToken,u))}}),h.targetMismatches.forEach((f,m)=>{const y=a.N_.get(f);if(!y)return;a.N_.set(f,y.withResumeToken(qt.EMPTY_BYTE_STRING,y.snapshotVersion)),lT(a,f);const _=new Qi(y.target,f,m,y.sequenceNumber);ag(a,_)}),a.remoteSyncer.applyRemoteEvent(h)}(n,t)}catch(r){ye("RemoteStore","Failed to raise snapshot:",r),await Vh(n,r)}}async function Vh(n,e,t){if(!Su(e))throw e;n.L_.add(1),await bu(n),n.q_.set("Offline"),t||(t=()=>iT(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ye("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await ld(n)})}function cT(n,e){return e().catch(t=>Vh(n,t,e))}async function ud(n){const e=ke(n),t=ss(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;ZN(e);)try{const s=await LN(e.localStore,r);if(s===null){e.O_.length===0&&t.o_();break}r=s.batchId,e2(e,s)}catch(s){await Vh(e,s)}hT(e)&&dT(e)}function ZN(n){return po(n)&&n.O_.length<10}function e2(n,e){n.O_.push(e);const t=ss(n);t.r_()&&t.V_&&t.m_(e.mutations)}function hT(n){return po(n)&&!ss(n).n_()&&n.O_.length>0}function dT(n){ss(n).start()}async function t2(n){ss(n).p_()}async function n2(n){const e=ss(n);for(const t of n.O_)e.m_(t.mutations)}async function r2(n,e,t){const r=n.O_.shift(),s=eg.from(r,e,t);await cT(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await ud(n)}async function i2(n,e){e&&ss(n).V_&&await async function(r,s){if(function(u){return HR(u)&&u!==X.ABORTED}(s.code)){const a=r.O_.shift();ss(r).s_(),await cT(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await ud(r)}}(n,e),hT(n)&&dT(n)}async function kw(n,e){const t=ke(n);t.asyncQueue.verifyOperationInProgress(),ye("RemoteStore","RemoteStore received new credentials");const r=po(t);t.L_.add(3),await bu(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await ld(t)}async function s2(n,e){const t=ke(n);e?(t.L_.delete(2),await ld(t)):e||(t.L_.add(2),await bu(t),t.q_.set("Unknown"))}function Ua(n){return n.K_||(n.K_=function(t,r,s){const a=ke(t);return a.w_(),new qN(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{Eo:QN.bind(null,n),Ro:YN.bind(null,n),mo:XN.bind(null,n),d_:JN.bind(null,n)}),n.B_.push(async e=>{e?(n.K_.s_(),ug(n)?lg(n):n.q_.set("Unknown")):(await n.K_.stop(),uT(n))})),n.K_}function ss(n){return n.U_||(n.U_=function(t,r,s){const a=ke(t);return a.w_(),new WN(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:t2.bind(null,n),mo:i2.bind(null,n),f_:n2.bind(null,n),g_:r2.bind(null,n)}),n.B_.push(async e=>{e?(n.U_.s_(),await ud(n)):(await n.U_.stop(),n.O_.length>0&&(ye("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))})),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,t,r,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,a){const u=Date.now()+r,h=new cg(e,t,u,s,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hg(n,e){if(ui("AsyncQueue",`${e}: ${n}`),Su(n))return new ce(X.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e){this.comparator=e?(t,r)=>e(t,r)||_e.comparator(t.key,r.key):(t,r)=>_e.comparator(t.key,r.key),this.keyedMap=zl(),this.sortedSet=new ht(this.comparator)}static emptySet(e){return new Ea(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ea)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ea;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(){this.W_=new ht(_e.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Ae():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class ka{constructor(e,t,r,s,a,u,h,f,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,s,a){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new ka(e,t,Ea.emptySet(t),u,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&td(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class a2{constructor(){this.queries=Rw(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const s=ke(t),a=s.queries;s.queries=Rw(),a.forEach((u,h)=>{for(const f of h.j_)f.onError(r)})})(this,new ce(X.ABORTED,"Firestore shutting down"))}}function Rw(){return new Fa(n=>jE(n),td)}async function fT(n,e){const t=ke(n);let r=3;const s=e.query;let a=t.queries.get(s);a?!a.H_()&&e.J_()&&(r=2):(a=new o2,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await t.onListen(s,!0);break;case 1:a.z_=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(u){const h=hg(u,`Initialization of query '${la(e.query)}' failed`);return void e.onError(h)}t.queries.set(s,a),a.j_.push(e),e.Z_(t.onlineState),a.z_&&e.X_(a.z_)&&dg(t)}async function pT(n,e){const t=ke(n),r=e.query;let s=3;const a=t.queries.get(r);if(a){const u=a.j_.indexOf(e);u>=0&&(a.j_.splice(u,1),a.j_.length===0?s=e.J_()?0:1:!a.H_()&&e.J_()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function l2(n,e){const t=ke(n);let r=!1;for(const s of e){const a=s.query,u=t.queries.get(a);if(u){for(const h of u.j_)h.X_(s)&&(r=!0);u.z_=s}}r&&dg(t)}function u2(n,e,t){const r=ke(n),s=r.queries.get(e);if(s)for(const a of s.j_)a.onError(t);r.queries.delete(e)}function dg(n){n.Y_.forEach(e=>{e.next()})}var am,Nw;(Nw=am||(am={})).ea="default",Nw.Cache="cache";class mT{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ka(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=ka.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==am.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e){this.key=e}}class yT{constructor(e){this.key=e}}class c2{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Oe(),this.mutatedKeys=Oe(),this.Aa=VE(e),this.Ra=new Ea(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new Cw,s=t?t.Ra:this.Ra;let a=t?t.mutatedKeys:this.mutatedKeys,u=s,h=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((y,_)=>{const E=s.get(y),I=nd(this.query,_)?_:null,R=!!E&&this.mutatedKeys.has(E.key),D=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let P=!1;E&&I?E.data.isEqual(I.data)?R!==D&&(r.track({type:3,doc:I}),P=!0):this.ga(E,I)||(r.track({type:2,doc:I}),P=!0,(f&&this.Aa(I,f)>0||m&&this.Aa(I,m)<0)&&(h=!0)):!E&&I?(r.track({type:0,doc:I}),P=!0):E&&!I&&(r.track({type:1,doc:E}),P=!0,(f||m)&&(h=!0)),P&&(I?(u=u.add(I),a=D?a.add(y):a.delete(y)):(u=u.delete(y),a=a.delete(y)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const y=this.query.limitType==="F"?u.last():u.first();u=u.delete(y.key),a=a.delete(y.key),r.track({type:1,doc:y})}return{Ra:u,fa:r,ns:h,mutatedKeys:a}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const u=e.fa.G_();u.sort((y,_)=>function(I,R){const D=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae()}};return D(I)-D(R)}(y.type,_.type)||this.Aa(y.doc,_.doc)),this.pa(r),s=s!=null&&s;const h=t&&!s?this.ya():[],f=this.da.size===0&&this.current&&!s?1:0,m=f!==this.Ea;return this.Ea=f,u.length!==0||m?{snapshot:new ka(this.query,e.Ra,a,u,e.mutatedKeys,f===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:h}:{wa:h}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Cw,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Oe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new yT(r))}),this.da.forEach(r=>{e.has(r)||t.push(new gT(r))}),t}ba(e){this.Ta=e.Ts,this.da=Oe();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return ka.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class h2{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class d2{constructor(e){this.key=e,this.va=!1}}class f2{constructor(e,t,r,s,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Ca={},this.Fa=new Fa(h=>jE(h),td),this.Ma=new Map,this.xa=new Set,this.Oa=new ht(_e.comparator),this.Na=new Map,this.La=new rg,this.Ba={},this.ka=new Map,this.qa=ba.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function p2(n,e,t=!0){const r=TT(n);let s;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Da()):s=await vT(r,e,t,!0),s}async function m2(n,e){const t=TT(n);await vT(t,e,!0,!1)}async function vT(n,e,t,r){const s=await MN(n.localStore,Cr(e)),a=s.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let h;return r&&(h=await g2(n,e,a,u==="current",s.resumeToken)),n.isPrimaryClient&&t&&aT(n.remoteStore,s),h}async function g2(n,e,t,r,s){n.Ka=(_,E,I)=>async function(D,P,W,q){let M=P.view.ma(W);M.ns&&(M=await Pw(D.localStore,P.query,!1).then(({documents:N})=>P.view.ma(N,M)));const Q=q&&q.targetChanges.get(P.targetId),Z=q&&q.targetMismatches.get(P.targetId)!=null,ie=P.view.applyChanges(M,D.isPrimaryClient,Q,Z);return jw(D,P.targetId,ie.wa),ie.snapshot}(n,_,E,I);const a=await Pw(n.localStore,e,!0),u=new c2(e,a.Ts),h=u.ma(a.documents),f=Au.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),m=u.applyChanges(h,n.isPrimaryClient,f);jw(n,t,m.wa);const y=new h2(e,t,u);return n.Fa.set(e,y),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),m.snapshot}async function y2(n,e,t){const r=ke(n),s=r.Fa.get(e),a=r.Ma.get(s.targetId);if(a.length>1)return r.Ma.set(s.targetId,a.filter(u=>!td(u,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await om(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&og(r.remoteStore,s.targetId),lm(r,s.targetId)}).catch(Iu)):(lm(r,s.targetId),await om(r.localStore,s.targetId,!0))}async function v2(n,e){const t=ke(n),r=t.Fa.get(e),s=t.Ma.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),og(t.remoteStore,r.targetId))}async function w2(n,e,t){const r=P2(n);try{const s=await function(u,h){const f=ke(u),m=kt.now(),y=h.reduce((I,R)=>I.add(R.key),Oe());let _,E;return f.persistence.runTransaction("Locally write mutations","readwrite",I=>{let R=ci(),D=Oe();return f.cs.getEntries(I,y).next(P=>{R=P,R.forEach((W,q)=>{q.isValidDocument()||(D=D.add(W))})}).next(()=>f.localDocuments.getOverlayedDocuments(I,R)).next(P=>{_=P;const W=[];for(const q of h){const M=BR(q,_.get(q.key).overlayedDocument);M!=null&&W.push(new cs(q.key,M,PE(M.value.mapValue),an.exists(!0)))}return f.mutationQueue.addMutationBatch(I,m,W,h)}).next(P=>{E=P;const W=P.applyToLocalDocumentSet(_,D);return f.documentOverlayCache.saveOverlays(I,P.batchId,W)})}).then(()=>({batchId:E.batchId,changes:ME(_)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,h,f){let m=u.Ba[u.currentUser.toKey()];m||(m=new ht(He)),m=m.insert(h,f),u.Ba[u.currentUser.toKey()]=m}(r,s.batchId,t),await ku(r,s.changes),await ud(r.remoteStore)}catch(s){const a=hg(s,"Failed to persist write");t.reject(a)}}async function wT(n,e){const t=ke(n);try{const r=await jN(t.localStore,e);e.targetChanges.forEach((s,a)=>{const u=t.Na.get(a);u&&(Ye(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?u.va=!0:s.modifiedDocuments.size>0?Ye(u.va):s.removedDocuments.size>0&&(Ye(u.va),u.va=!1))}),await ku(t,r,e)}catch(r){await Iu(r)}}function Dw(n,e,t){const r=ke(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Fa.forEach((a,u)=>{const h=u.view.Z_(e);h.snapshot&&s.push(h.snapshot)}),function(u,h){const f=ke(u);f.onlineState=h;let m=!1;f.queries.forEach((y,_)=>{for(const E of _.j_)E.Z_(h)&&(m=!0)}),m&&dg(f)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function _2(n,e,t){const r=ke(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Na.get(e),a=s&&s.key;if(a){let u=new ht(_e.comparator);u=u.insert(a,Jt.newNoDocument(a,be.min()));const h=Oe().add(a),f=new od(be.min(),new Map,new ht(He),u,h);await wT(r,f),r.Oa=r.Oa.remove(a),r.Na.delete(e),fg(r)}else await om(r.localStore,e,!1).then(()=>lm(r,e,t)).catch(Iu)}async function x2(n,e){const t=ke(n),r=e.batch.batchId;try{const s=await DN(t.localStore,e);xT(t,r,null),_T(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ku(t,s)}catch(s){await Iu(s)}}async function E2(n,e,t){const r=ke(n);try{const s=await function(u,h){const f=ke(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let y;return f.mutationQueue.lookupMutationBatch(m,h).next(_=>(Ye(_!==null),y=_.keys(),f.mutationQueue.removeMutationBatch(m,_))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,y,h)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y)).next(()=>f.localDocuments.getDocuments(m,y))})}(r.localStore,e);xT(r,e,t),_T(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ku(r,s)}catch(s){await Iu(s)}}function _T(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function xT(n,e,t){const r=ke(n);let s=r.Ba[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function lm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||ET(n,r)})}function ET(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(og(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),fg(n))}function jw(n,e,t){for(const r of t)r instanceof gT?(n.La.addReference(r.key,e),T2(n,r)):r instanceof yT?(ye("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||ET(n,r.key)):Ae()}function T2(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(ye("SyncEngine","New document in limbo: "+t),n.xa.add(r),fg(n))}function fg(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new _e(it.fromString(e)),r=n.qa.next();n.Na.set(r,new d2(t)),n.Oa=n.Oa.insert(t,r),aT(n.remoteStore,new Qi(Cr(Jm(t.path)),r,"TargetPurposeLimboResolution",Hm.oe))}}async function ku(n,e,t){const r=ke(n),s=[],a=[],u=[];r.Fa.isEmpty()||(r.Fa.forEach((h,f)=>{u.push(r.Ka(f,e,t).then(m=>{var y;if((m||t)&&r.isPrimaryClient){const _=m?!m.fromCache:(y=t?.targetChanges.get(f.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(f.targetId,_?"current":"not-current")}if(m){s.push(m);const _=sg.Wi(f.targetId,m);a.push(_)}}))}),await Promise.all(u),r.Ca.d_(s),await async function(f,m){const y=ke(f);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>te.forEach(m,E=>te.forEach(E.$i,I=>y.persistence.referenceDelegate.addReference(_,E.targetId,I)).next(()=>te.forEach(E.Ui,I=>y.persistence.referenceDelegate.removeReference(_,E.targetId,I)))))}catch(_){if(!Su(_))throw _;ye("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of m){const E=_.targetId;if(!_.fromCache){const I=y.os.get(E),R=I.snapshotVersion,D=I.withLastLimboFreeSnapshotVersion(R);y.os=y.os.insert(E,D)}}}(r.localStore,a))}async function I2(n,e){const t=ke(n);if(!t.currentUser.isEqual(e)){ye("SyncEngine","User change. New user:",e.toKey());const r=await rT(t.localStore,e);t.currentUser=e,function(a,u){a.ka.forEach(h=>{h.forEach(f=>{f.reject(new ce(X.CANCELLED,u))})}),a.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ku(t,r.hs)}}function S2(n,e){const t=ke(n),r=t.Na.get(e);if(r&&r.va)return Oe().add(r.key);{let s=Oe();const a=t.Ma.get(e);if(!a)return s;for(const u of a){const h=t.Fa.get(u);s=s.unionWith(h.view.Va)}return s}}function TT(n){const e=ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=wT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=S2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_2.bind(null,e),e.Ca.d_=l2.bind(null,e.eventManager),e.Ca.$a=u2.bind(null,e.eventManager),e}function P2(n){const e=ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=x2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=E2.bind(null,e),e}class Lh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ad(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return NN(this.persistence,new CN,e.initialUser,this.serializer)}Ga(e){return new AN(ig.Zr,this.serializer)}Wa(e){return new FN}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lh.provider={build:()=>new Lh};class um{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Dw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=I2.bind(null,this.syncEngine),await s2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new a2}()}createDatastore(e){const t=ad(e.databaseInfo.databaseId),r=function(a){return new $N(a)}(e.databaseInfo);return function(a,u,h,f){return new HN(a,u,h,f)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,a,u,h){return new KN(r,s,a,u,h)}(this.localStore,this.datastore,e.asyncQueue,t=>Dw(this.syncEngine,t,0),function(){return bw.D()?new bw:new UN}())}createSyncEngine(e,t){return function(s,a,u,h,f,m,y){const _=new f2(s,a,u,h,f,m);return y&&(_.Qa=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const a=ke(s);ye("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await bu(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}um.provider={build:()=>new um};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ui("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e,t,r,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Xt.UNAUTHENTICATED,this.clientId=TE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async u=>{ye("FirestoreClient","Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(r,u=>(ye("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=hg(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function yp(n,e){n.asyncQueue.verifyOperationInProgress(),ye("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await rT(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Vw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await b2(n);ye("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>kw(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>kw(e.remoteStore,s)),n._onlineComponents=e}async function b2(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ye("FirestoreClient","Using user provided OfflineComponentProvider");try{await yp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===X.FAILED_PRECONDITION||s.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;Ia("Error using user provided cache. Falling back to memory cache: "+t),await yp(n,new Lh)}}else ye("FirestoreClient","Using default OfflineComponentProvider"),await yp(n,new Lh);return n._offlineComponents}async function ST(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ye("FirestoreClient","Using user provided OnlineComponentProvider"),await Vw(n,n._uninitializedComponentsProvider._online)):(ye("FirestoreClient","Using default OnlineComponentProvider"),await Vw(n,new um))),n._onlineComponents}function k2(n){return ST(n).then(e=>e.syncEngine)}async function PT(n){const e=await ST(n),t=e.eventManager;return t.onListen=p2.bind(null,e.syncEngine),t.onUnlisten=y2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=m2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=v2.bind(null,e.syncEngine),t}function C2(n,e,t={}){const r=new ii;return n.asyncQueue.enqueueAndForget(async()=>function(a,u,h,f,m){const y=new IT({next:E=>{y.Za(),u.enqueueAndForget(()=>pT(a,_));const I=E.docs.has(h);!I&&E.fromCache?m.reject(new ce(X.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&E.fromCache&&f&&f.source==="server"?m.reject(new ce(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(E)},error:E=>m.reject(E)}),_=new mT(Jm(h.path),y,{includeMetadataChanges:!0,_a:!0});return fT(a,_)}(await PT(n),n.asyncQueue,e,t,r)),r.promise}function R2(n,e,t={}){const r=new ii;return n.asyncQueue.enqueueAndForget(async()=>function(a,u,h,f,m){const y=new IT({next:E=>{y.Za(),u.enqueueAndForget(()=>pT(a,_)),E.fromCache&&f.source==="server"?m.reject(new ce(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(E)},error:E=>m.reject(E)}),_=new mT(h,y,{includeMetadataChanges:!0,_a:!0});return fT(a,_)}(await PT(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(n,e,t){if(!t)throw new ce(X.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function N2(n,e,t,r){if(e===!0&&r===!0)throw new ce(X.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Mw(n){if(!_e.isDocumentKey(n))throw new ce(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Ow(n){if(_e.isDocumentKey(n))throw new ce(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function cd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ae()}function Gn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ce(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=cd(n);throw new ce(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function D2(n,e){if(e<=0)throw new ce(X.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ce(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ce(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}N2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=AT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ce(X.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ce(X.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ce(X.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hd{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new YC;switch(r.type){case"firstParty":return new eR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ce(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=Lw.get(t);r&&(ye("ComponentProvider","Removing Datastore"),Lw.delete(t),r.terminate())}(this),Promise.resolve()}}function j2(n,e,t,r={}){var s;const a=(n=Gn(n,hd))._getSettings(),u=`${e}:${t}`;if(a.host!=="firestore.googleapis.com"&&a.host!==u&&Ia("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:u,ssl:!1})),r.mockUserToken){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Xt.MOCK_USER;else{h=uA(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new ce(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Xt(m)}n._authCredentials=new XC(new EE(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new hs(this.firestore,e,this._query)}}class ln{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ln(this.firestore,e,this._key)}}class Zi extends hs{constructor(e,t,r){super(e,t,Jm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ln(this.firestore,null,new _e(e))}withConverter(e){return new Zi(this.firestore,e,this._path)}}function Vt(n,e,...t){if(n=tt(n),bT("collection","path",e),n instanceof hd){const r=it.fromString(e,...t);return Ow(r),new Zi(n,null,r)}{if(!(n instanceof ln||n instanceof Zi))throw new ce(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(it.fromString(e,...t));return Ow(r),new Zi(n.firestore,null,r)}}function Tt(n,e,...t){if(n=tt(n),arguments.length===1&&(e=TE.newId()),bT("doc","path",e),n instanceof hd){const r=it.fromString(e,...t);return Mw(r),new ln(n,null,new _e(r))}{if(!(n instanceof ln||n instanceof Zi))throw new ce(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(it.fromString(e,...t));return Mw(r),new ln(n.firestore,n instanceof Zi?n.converter:null,new _e(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new sT(this,"async_queue_retry"),this.Vu=()=>{const r=gp();r&&ye("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=gp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=gp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new ii;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Su(e))throw e;ye("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),h}(r);throw ui("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const s=cg.createAndSchedule(this,e,t,r,a=>this.yu(a));return this.Tu.push(s),s}fu(){this.Eu&&Ae()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class ds extends hd{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new Uw,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Uw(e),this._firestoreClient=void 0,await e}}}function V2(n,e){const t=typeof n=="object"?n:Vm(),r=typeof n=="string"?n:"(default)",s=co(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=aA("firestore");a&&j2(s,...a)}return s}function dd(n){if(n._terminated)throw new ce(X.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||L2(n),n._firestoreClient}function L2(n){var e,t,r;const s=n._freezeSettings(),a=function(h,f,m,y){return new fR(h,f,m,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,AT(y.experimentalLongPollingOptions),y.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new A2(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(h){const f=h?._online.build();return{_offline:h?._offline.build(f),_online:f}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ca(qt.fromBase64String(e))}catch(t){throw new ce(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ca(qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ce(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2=/^__.*__$/;class O2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new cs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pu(e,this.data,t,this.fieldTransforms)}}class kT{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new cs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function CT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae()}}class gg{constructor(e,t,r,s,a,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new gg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Mh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(CT(this.Cu)&&M2.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class F2{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ad(e)}Qu(e,t,r,s=!1){return new gg({Cu:e,methodName:t,qu:r,path:zt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ru(n){const e=n._freezeSettings(),t=ad(n._databaseId);return new F2(n._databaseId,!!e.ignoreUndefinedProperties,t)}function yg(n,e,t,r,s,a={}){const u=n.Qu(a.merge||a.mergeFields?2:0,e,t,s);wg("Data must be an object, but it was:",u,r);const h=DT(r,u);let f,m;if(a.merge)f=new kn(u.fieldMask),m=u.fieldTransforms;else if(a.mergeFields){const y=[];for(const _ of a.mergeFields){const E=cm(e,_,t);if(!u.contains(E))throw new ce(X.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);VT(y,E)||y.push(E)}f=new kn(y),m=u.fieldTransforms.filter(_=>f.covers(_.field))}else f=null,m=u.fieldTransforms;return new O2(new yn(h),f,m)}class pd extends fd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof pd}}class vg extends fd{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new pu(e.serializer,UE(e.serializer,this.$u));return new MR(e.path,t)}isEqual(e){return e instanceof vg&&this.$u===e.$u}}function RT(n,e,t,r){const s=n.Qu(1,e,t);wg("Data must be an object, but it was:",s,r);const a=[],u=yn.empty();fo(r,(f,m)=>{const y=_g(e,f,t);m=tt(m);const _=s.Nu(y);if(m instanceof pd)a.push(y);else{const E=Nu(m,_);E!=null&&(a.push(y),u.set(y,E))}});const h=new kn(a);return new kT(u,h,s.fieldTransforms)}function NT(n,e,t,r,s,a){const u=n.Qu(1,e,t),h=[cm(e,r,t)],f=[s];if(a.length%2!=0)throw new ce(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<a.length;E+=2)h.push(cm(e,a[E])),f.push(a[E+1]);const m=[],y=yn.empty();for(let E=h.length-1;E>=0;--E)if(!VT(m,h[E])){const I=h[E];let R=f[E];R=tt(R);const D=u.Nu(I);if(R instanceof pd)m.push(I);else{const P=Nu(R,D);P!=null&&(m.push(I),y.set(I,P))}}const _=new kn(m);return new kT(y,_,u.fieldTransforms)}function U2(n,e,t,r=!1){return Nu(t,n.Qu(r?4:3,e))}function Nu(n,e){if(jT(n=tt(n)))return wg("Unsupported field value:",e,n),DT(n,e);if(n instanceof fd)return function(r,s){if(!CT(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const a=[];let u=0;for(const h of r){let f=Nu(h,s.Lu(u));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),u++}return{arrayValue:{values:a}}}(n,e)}return function(r,s){if((r=tt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return UE(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=kt.fromDate(r);return{timestampValue:jh(s.serializer,a)}}if(r instanceof kt){const a=new kt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:jh(s.serializer,a)}}if(r instanceof pg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ca)return{bytesValue:YE(s.serializer,r._byteString)};if(r instanceof ln){const a=s.databaseId,u=r.firestore._databaseId;if(!u.isEqual(a))throw s.Bu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:ng(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof mg)return function(u,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:u.toArray().map(f=>{if(typeof f!="number")throw h.Bu("VectorValues must only contain numeric values.");return Zm(h.serializer,f)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${cd(r)}`)}(n,e)}function DT(n,e){const t={};return IE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fo(n,(r,s)=>{const a=Nu(s,e.Mu(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function jT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof kt||n instanceof pg||n instanceof Ca||n instanceof ln||n instanceof fd||n instanceof mg)}function wg(n,e,t){if(!jT(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const r=cd(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function cm(n,e,t){if((e=tt(e))instanceof Cu)return e._internalPath;if(typeof e=="string")return _g(n,e);throw Mh("Field path arguments must be of type string or ",n,!1,void 0,t)}const B2=new RegExp("[~\\*/\\[\\]]");function _g(n,e,t){if(e.search(B2)>=0)throw Mh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Cu(...e.split("."))._internalPath}catch{throw Mh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Mh(n,e,t,r,s){const a=r&&!r.isEmpty(),u=s!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${r}`),u&&(f+=` in document ${s}`),f+=")"),new ce(X.INVALID_ARGUMENT,h+n+f)}function VT(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,t,r,s,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new z2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(md("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class z2 extends LT{data(){return super.data()}}function md(n,e){return typeof e=="string"?_g(n,e):e instanceof Cu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ce(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xg{}class Eg extends xg{}function vn(n,e,...t){let r=[];e instanceof xg&&r.push(e),r=r.concat(t),function(a){const u=a.filter(f=>f instanceof Tg).length,h=a.filter(f=>f instanceof gd).length;if(u>1||u>0&&h>0)throw new ce(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class gd extends Eg{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new gd(e,t,r)}_apply(e){const t=this._parse(e);return MT(e._query,t),new hs(e.firestore,e.converter,tm(e._query,t))}_parse(e){const t=Ru(e.firestore);return function(a,u,h,f,m,y,_){let E;if(m.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new ce(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){zw(_,y);const I=[];for(const R of _)I.push(Bw(f,a,R));E={arrayValue:{values:I}}}else E=Bw(f,a,_)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||zw(_,y),E=U2(h,u,_,y==="in"||y==="not-in");return Et.create(m,y,E)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function wn(n,e,t){const r=e,s=md("where",n);return gd._create(s,r,t)}class Tg extends xg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Tg(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:fr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,a){let u=s;const h=a.getFlattenedFilters();for(const f of h)MT(u,f),u=tm(u,f)}(e._query,t),new hs(e.firestore,e.converter,tm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ig extends Eg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ig(e,t)}_apply(e){const t=function(s,a,u){if(s.startAt!==null)throw new ce(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ce(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new hu(a,u)}(e._query,this._field,this._direction);return new hs(e.firestore,e.converter,function(s,a){const u=s.explicitOrderBy.concat([a]);return new Oa(s.path,s.collectionGroup,u,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function da(n,e="asc"){const t=e,r=md("orderBy",n);return Ig._create(r,t)}class Sg extends Eg{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Sg(e,t,r)}_apply(e){return new hs(e.firestore,e.converter,Nh(e._query,this._limit,this._limitType))}}function fa(n){return D2("limit",n),Sg._create("limit",n,"F")}function Bw(n,e,t){if(typeof(t=tt(t))=="string"){if(t==="")throw new ce(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!DE(e)&&t.indexOf("/")!==-1)throw new ce(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(it.fromString(t));if(!_e.isDocumentKey(r))throw new ce(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return uw(n,new _e(r))}if(t instanceof ln)return uw(n,t._key);throw new ce(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cd(t)}.`)}function zw(n,e){if(!Array.isArray(n)||n.length===0)throw new ce(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function MT(n,e){const t=function(s,a){for(const u of s)for(const h of u.getFlattenedFilters())if(a.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ce(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class q2{convertValue(e,t="none"){switch(so(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(io(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return fo(e,(s,a)=>{r[s]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,s;const a=(s=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(u=>mt(u.doubleValue));return new mg(a)}convertGeoPoint(e){return new pg(mt(e.latitude),mt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Km(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(lu(e));default:return null}}convertTimestamp(e){const t=is(e);return new kt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=it.fromString(e);Ye(nT(r));const s=new uu(r.get(1),r.get(3)),a=new _e(r.popFirst(5));return s.isEqual(t)||ui(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class OT extends LT{constructor(e,t,r,s,a,u){super(e,t,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new wh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(md("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class wh extends OT{data(e={}){return super.data(e)}}class W2{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new ql(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new wh(this._firestore,this._userDataWriter,r.key,r,new ql(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map(h=>{const f=new wh(s._firestore,s._userDataWriter,h.doc.key,h.doc,new ql(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}})}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>a||h.type!==3).map(h=>{const f=new wh(s._firestore,s._userDataWriter,h.doc.key,h.doc,new ql(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,y=-1;return h.type!==0&&(m=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),y=u.indexOf(h.doc.key)),{type:H2(h.type),doc:f,oldIndex:m,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function H2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Du(n){n=Gn(n,ln);const e=Gn(n.firestore,ds);return C2(dd(e),n._key).then(t=>K2(e,n,t))}class FT extends q2{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ca(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ln(this.firestore,null,t)}}function Zt(n){n=Gn(n,hs);const e=Gn(n.firestore,ds),t=dd(e),r=new FT(e);return $2(n._query),R2(t,n._query).then(s=>new W2(e,r,n,s))}function yd(n,e,t){n=Gn(n,ln);const r=Gn(n.firestore,ds),s=Pg(n.converter,e,t);return ju(r,[yg(Ru(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,an.none())])}function oo(n,e,t,...r){n=Gn(n,ln);const s=Gn(n.firestore,ds),a=Ru(s);let u;return u=typeof(e=tt(e))=="string"||e instanceof Cu?NT(a,"updateDoc",n._key,e,t,r):RT(a,"updateDoc",n._key,e),ju(s,[u.toMutation(n._key,an.exists(!0))])}function pa(n){return ju(Gn(n.firestore,ds),[new sd(n._key,an.none())])}function G2(n,e){const t=Gn(n.firestore,ds),r=Tt(n),s=Pg(n.converter,e);return ju(t,[yg(Ru(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,an.exists(!1))]).then(()=>r)}function ju(n,e){return function(r,s){const a=new ii;return r.asyncQueue.enqueueAndForget(async()=>w2(await k2(r),s,a)),a.promise}(dd(n),e)}function K2(n,e,t){const r=t.docs.get(e._key),s=new FT(n);return new OT(n,s,e._key,r,new ql(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ru(e)}set(e,t,r){this._verifyNotCommitted();const s=vp(e,this._firestore),a=Pg(s.converter,t,r),u=yg(this._dataReader,"WriteBatch.set",s._key,a,s.converter!==null,r);return this._mutations.push(u.toMutation(s._key,an.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const a=vp(e,this._firestore);let u;return u=typeof(t=tt(t))=="string"||t instanceof Cu?NT(this._dataReader,"WriteBatch.update",a._key,t,r,s):RT(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(u.toMutation(a._key,an.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=vp(e,this._firestore);return this._mutations=this._mutations.concat(new sd(t._key,an.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ce(X.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function vp(n,e){if((n=tt(n)).firestore!==e)throw new ce(X.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function mu(n){return new vg("increment",n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(n){return dd(n=Gn(n,ds)),new Q2(n,e=>ju(n,e))}(function(e,t=!0){(function(s){Ma=s})(La),jr(new hr("firestore",(r,{instanceIdentifier:s,options:a})=>{const u=r.getProvider("app").getImmediate(),h=new ds(new JC(r.getProvider("auth-internal")),new nR(r.getProvider("app-check-internal")),function(m,y){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ce(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uu(m.options.projectId,y)}(u,s),u);return a=Object.assign({useFetchStreams:t},a),h._setSettings(a),h},"PUBLIC").setMultipleInstances(!0)),qn(iw,"4.7.3",e),qn(iw,"4.7.3","esm2017")})();var X2="firebase",J2="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qn(X2,J2,"app");const UT="@firebase/installations",Ag="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT=1e4,zT=`w:${Ag}`,$T="FIS_v2",Z2="https://firebaseinstallations.googleapis.com/v1",eD=3600*1e3,tD="installations",nD="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ao=new uo(tD,nD,rD);function qT(n){return n instanceof pr&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT({projectId:n}){return`${Z2}/projects/${n}/installations`}function HT(n){return{token:n.token,requestStatus:2,expiresIn:sD(n.expiresIn),creationTime:Date.now()}}async function GT(n,e){const r=(await e.json()).error;return ao.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function KT({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function iD(n,{refreshToken:e}){const t=KT(n);return t.append("Authorization",oD(e)),t}async function QT(n){const e=await n();return e.status>=500&&e.status<600?n():e}function sD(n){return Number(n.replace("s","000"))}function oD(n){return`${$T} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aD({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=WT(n),s=KT(n),a=e.getImmediate({optional:!0});if(a){const m=await a.getHeartbeatsHeader();m&&s.append("x-firebase-client",m)}const u={fid:t,authVersion:$T,appId:n.appId,sdkVersion:zT},h={method:"POST",headers:s,body:JSON.stringify(u)},f=await QT(()=>fetch(r,h));if(f.ok){const m=await f.json();return{fid:m.fid||t,registrationStatus:2,refreshToken:m.refreshToken,authToken:HT(m.authToken)}}else throw await GT("Create Installation",f)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD=/^[cdef][\w-]{21}$/,hm="";function cD(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=hD(n);return uD.test(t)?t:hm}catch{return hm}}function hD(n){return lD(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT=new Map;function JT(n,e){const t=vd(n);ZT(t,e),dD(t,e)}function ZT(n,e){const t=XT.get(n);if(t)for(const r of t)r(e)}function dD(n,e){const t=fD();t&&t.postMessage({key:n,fid:e}),pD()}let Ys=null;function fD(){return!Ys&&"BroadcastChannel"in self&&(Ys=new BroadcastChannel("[Firebase] FID Change"),Ys.onmessage=n=>{ZT(n.data.key,n.data.fid)}),Ys}function pD(){XT.size===0&&Ys&&(Ys.close(),Ys=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD="firebase-installations-database",gD=1,lo="firebase-installations-store";let wp=null;function bg(){return wp||(wp=Cx(mD,gD,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(lo)}}})),wp}async function Oh(n,e){const t=vd(n),s=(await bg()).transaction(lo,"readwrite"),a=s.objectStore(lo),u=await a.get(t);return await a.put(e,t),await s.done,(!u||u.fid!==e.fid)&&JT(n,e.fid),e}async function eI(n){const e=vd(n),r=(await bg()).transaction(lo,"readwrite");await r.objectStore(lo).delete(e),await r.done}async function wd(n,e){const t=vd(n),s=(await bg()).transaction(lo,"readwrite"),a=s.objectStore(lo),u=await a.get(t),h=e(u);return h===void 0?await a.delete(t):await a.put(h,t),await s.done,h&&(!u||u.fid!==h.fid)&&JT(n,h.fid),h}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kg(n){let e;const t=await wd(n.appConfig,r=>{const s=yD(r),a=vD(n,s);return e=a.registrationPromise,a.installationEntry});return t.fid===hm?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function yD(n){const e=n||{fid:cD(),registrationStatus:0};return tI(e)}function vD(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(ao.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=wD(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:_D(n)}:{installationEntry:e}}async function wD(n,e){try{const t=await aD(n,e);return Oh(n.appConfig,t)}catch(t){throw qT(t)&&t.customData.serverCode===409?await eI(n.appConfig):await Oh(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function _D(n){let e=await $w(n.appConfig);for(;e.registrationStatus===1;)await YT(100),e=await $w(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await kg(n);return r||t}return e}function $w(n){return wd(n,e=>{if(!e)throw ao.create("installation-not-found");return tI(e)})}function tI(n){return xD(n)?{fid:n.fid,registrationStatus:0}:n}function xD(n){return n.registrationStatus===1&&n.registrationTime+BT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ED({appConfig:n,heartbeatServiceProvider:e},t){const r=TD(n,t),s=iD(n,t),a=e.getImmediate({optional:!0});if(a){const m=await a.getHeartbeatsHeader();m&&s.append("x-firebase-client",m)}const u={installation:{sdkVersion:zT,appId:n.appId}},h={method:"POST",headers:s,body:JSON.stringify(u)},f=await QT(()=>fetch(r,h));if(f.ok){const m=await f.json();return HT(m)}else throw await GT("Generate Auth Token",f)}function TD(n,{fid:e}){return`${WT(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cg(n,e=!1){let t;const r=await wd(n.appConfig,a=>{if(!nI(a))throw ao.create("not-registered");const u=a.authToken;if(!e&&PD(u))return a;if(u.requestStatus===1)return t=ID(n,e),a;{if(!navigator.onLine)throw ao.create("app-offline");const h=bD(a);return t=SD(n,h),h}});return t?await t:r.authToken}async function ID(n,e){let t=await qw(n.appConfig);for(;t.authToken.requestStatus===1;)await YT(100),t=await qw(n.appConfig);const r=t.authToken;return r.requestStatus===0?Cg(n,e):r}function qw(n){return wd(n,e=>{if(!nI(e))throw ao.create("not-registered");const t=e.authToken;return kD(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function SD(n,e){try{const t=await ED(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await Oh(n.appConfig,r),t}catch(t){if(qT(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await eI(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Oh(n.appConfig,r)}throw t}}function nI(n){return n!==void 0&&n.registrationStatus===2}function PD(n){return n.requestStatus===2&&!AD(n)}function AD(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+eD}function bD(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function kD(n){return n.requestStatus===1&&n.requestTime+BT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CD(n){const e=n,{installationEntry:t,registrationPromise:r}=await kg(e);return r?r.catch(console.error):Cg(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RD(n,e=!1){const t=n;return await ND(t),(await Cg(t,e)).token}async function ND(n){const{registrationPromise:e}=await kg(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DD(n){if(!n||!n.options)throw _p("App Configuration");if(!n.name)throw _p("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw _p(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function _p(n){return ao.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI="installations",jD="installations-internal",VD=n=>{const e=n.getProvider("app").getImmediate(),t=DD(e),r=co(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},LD=n=>{const e=n.getProvider("app").getImmediate(),t=co(e,rI).getImmediate();return{getId:()=>CD(t),getToken:s=>RD(t,s)}};function MD(){jr(new hr(rI,VD,"PUBLIC")),jr(new hr(jD,LD,"PRIVATE"))}MD();qn(UT,Ag);qn(UT,Ag,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh="analytics",OD="firebase_id",FD="origin",UD=60*1e3,BD="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Rg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n=new Yh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zD={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Cn=new uo("analytics","Analytics",zD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(n){if(!n.startsWith(Rg)){const e=Cn.create("invalid-gtag-resource",{gtagURL:n});return _n.warn(e.message),""}return n}function iI(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function qD(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function WD(n,e){const t=qD("firebase-js-sdk-policy",{createScriptURL:$D}),r=document.createElement("script"),s=`${Rg}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function HD(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function GD(n,e,t,r,s,a){const u=r[s];try{if(u)await e[u];else{const f=(await iI(t)).find(m=>m.measurementId===s);f&&await e[f.appId]}}catch(h){_n.error(h)}n("config",s,a)}async function KD(n,e,t,r,s){try{let a=[];if(s&&s.send_to){let u=s.send_to;Array.isArray(u)||(u=[u]);const h=await iI(t);for(const f of u){const m=h.find(_=>_.measurementId===f),y=m&&e[m.appId];if(y)a.push(y);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),n("event",r,s||{})}catch(a){_n.error(a)}}function QD(n,e,t,r){async function s(a,...u){try{if(a==="event"){const[h,f]=u;await KD(n,e,t,h,f)}else if(a==="config"){const[h,f]=u;await GD(n,e,t,r,h,f)}else if(a==="consent"){const[h,f]=u;n("consent",h,f)}else if(a==="get"){const[h,f,m]=u;n("get",h,f,m)}else if(a==="set"){const[h]=u;n("set",h)}else n(a,...u)}catch(h){_n.error(h)}}return s}function YD(n,e,t,r,s){let a=function(...u){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(a=window[s]),window[s]=QD(a,n,e,t),{gtagCore:a,wrappedGtag:window[s]}}function XD(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Rg)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=30,ZD=1e3;class ej{constructor(e={},t=ZD){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const sI=new ej;function tj(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function nj(n){var e;const{appId:t,apiKey:r}=n,s={method:"GET",headers:tj(r)},a=BD.replace("{app-id}",t),u=await fetch(a,s);if(u.status!==200&&u.status!==304){let h="";try{const f=await u.json();!((e=f.error)===null||e===void 0)&&e.message&&(h=f.error.message)}catch{}throw Cn.create("config-fetch-failed",{httpStatus:u.status,responseMessage:h})}return u.json()}async function rj(n,e=sI,t){const{appId:r,apiKey:s,measurementId:a}=n.options;if(!r)throw Cn.create("no-app-id");if(!s){if(a)return{measurementId:a,appId:r};throw Cn.create("no-api-key")}const u=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},h=new oj;return setTimeout(async()=>{h.abort()},UD),oI({appId:r,apiKey:s,measurementId:a},u,h,e)}async function oI(n,{throttleEndTimeMillis:e,backoffCount:t},r,s=sI){var a;const{appId:u,measurementId:h}=n;try{await ij(r,e)}catch(f){if(h)return _n.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:u,measurementId:h};throw f}try{const f=await nj(n);return s.deleteThrottleMetadata(u),f}catch(f){const m=f;if(!sj(m)){if(s.deleteThrottleMetadata(u),h)return _n.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:u,measurementId:h};throw f}const y=Number((a=m?.customData)===null||a===void 0?void 0:a.httpStatus)===503?b0(t,s.intervalMillis,JD):b0(t,s.intervalMillis),_={throttleEndTimeMillis:Date.now()+y,backoffCount:t+1};return s.setThrottleMetadata(u,_),_n.debug(`Calling attemptFetch again in ${y} millis`),oI(n,_,r,s)}}function ij(n,e){return new Promise((t,r)=>{const s=Math.max(e-Date.now(),0),a=setTimeout(t,s);n.addEventListener(()=>{clearTimeout(a),r(Cn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function sj(n){if(!(n instanceof pr)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class oj{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function aj(n,e,t,r,s){if(s&&s.global){n("event",t,r);return}else{const a=await e,u=Object.assign(Object.assign({},r),{send_to:a});n("event",t,u)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lj(){if(Px())try{await Ax()}catch(n){return _n.warn(Cn.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return _n.warn(Cn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function uj(n,e,t,r,s,a,u){var h;const f=rj(n);f.then(I=>{t[I.measurementId]=I.appId,n.options.measurementId&&I.measurementId!==n.options.measurementId&&_n.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${I.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(I=>_n.error(I)),e.push(f);const m=lj().then(I=>{if(I)return r.getId()}),[y,_]=await Promise.all([f,m]);XD(a)||WD(a,y.measurementId),s("js",new Date);const E=(h=u?.config)!==null&&h!==void 0?h:{};return E[FD]="firebase",E.update=!0,_!=null&&(E[OD]=_),s("config",y.measurementId,E),y.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e){this.app=e}_delete(){return delete Xl[this.app.options.appId],Promise.resolve()}}let Xl={},Ww=[];const Hw={};let xp="dataLayer",hj="gtag",Gw,aI,Kw=!1;function dj(){const n=[];if(Sx()&&n.push("This is a browser extension environment."),gA()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,s)=>`(${s+1}) ${r}`).join(" "),t=Cn.create("invalid-analytics-context",{errorInfo:e});_n.warn(t.message)}}function fj(n,e,t){dj();const r=n.options.appId;if(!r)throw Cn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)_n.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Cn.create("no-api-key");if(Xl[r]!=null)throw Cn.create("already-exists",{id:r});if(!Kw){HD(xp);const{wrappedGtag:a,gtagCore:u}=YD(Xl,Ww,Hw,xp,hj);aI=a,Gw=u,Kw=!0}return Xl[r]=uj(n,Ww,Hw,e,Gw,xp,t),new cj(n)}function pj(n=Vm()){n=tt(n);const e=co(n,Fh);return e.isInitialized()?e.getImmediate():mj(n)}function mj(n,e={}){const t=co(n,Fh);if(t.isInitialized()){const s=t.getImmediate();if(iu(e,t.getOptions()))return s;throw Cn.create("already-initialized")}return t.initialize({options:e})}function gj(n,e,t,r){n=tt(n),aj(aI,Xl[n.app.options.appId],e,t,r).catch(s=>_n.error(s))}const Qw="@firebase/analytics",Yw="0.10.8";function yj(){jr(new hr(Fh,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return fj(r,s,t)},"PUBLIC")),jr(new hr("analytics-internal",n,"PRIVATE")),qn(Qw,Yw),qn(Qw,Yw,"esm2017");function n(e){try{const t=e.getProvider(Fh).getImmediate();return{logEvent:(r,s,a)=>gj(t,r,s,a)}}catch(t){throw Cn.create("interop-component-reg-failed",{reason:t})}}}yj();const vj={apiKey:"AIzaSyDSplfIeCdHaXnAgH1WnmaY78uINeUHHeA",authDomain:"glyphmart.firebaseapp.com",projectId:"glyphmart",storageBucket:"glyphmart.firebasestorage.app",messagingSenderId:"582834377960",appId:"1:582834377960:web:2f844d65c9c0f92f93255d",measurementId:"G-1RC8D5PY66"},Ng=Rx(vj),oh=KC(Ng),Le=V2(Ng);pj(Ng);const lI=j.createContext(),pi=()=>{const n=j.useContext(lI);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},wj=({children:n})=>{const[e,t]=j.useState(null),[r,s]=j.useState(!0),[a,u]=j.useState(null),h=async(E,I,R,D)=>{const W=(await kk(oh,E,I)).user;return await Kp(W,{displayName:D}),await yd(Tt(Le,"users",W.uid),{uid:W.uid,email:E,username:R,displayName:D,createdAt:new Date,glyphsCount:0,bio:"",website:"",location:""}),W},f=(E,I)=>Ck(oh,E,I),m=()=>Mk(oh),y=async E=>{try{const I=await Du(Tt(Le,"users",E));I.exists()&&u(I.data())}catch(I){console.error("Error fetching user profile:",I)}};j.useEffect(()=>Lk(oh,I=>{t(I),I?y(I.uid):u(null),s(!1)}),[]);const _={currentUser:e,userProfile:a,signup:h,signin:f,logout:m,fetchUserProfile:y};return p.jsx(lI.Provider,{value:_,children:!r&&n})};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _j={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Be=(n,e)=>{const t=j.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:u,className:h="",children:f,...m},y)=>j.createElement("svg",{ref:y,..._j,width:s,height:s,stroke:r,strokeWidth:u?Number(a)*24/Number(s):a,className:["lucide",`lucide-${xj(n)}`,h].join(" "),...m},[...e.map(([_,E])=>j.createElement(_,E)),...Array.isArray(f)?f:[f]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dm=Be("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=Be("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=Be("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=Be("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dg=Be("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=Be("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=Be("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=Be("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=Be("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=Be("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=Be("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=Be("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=Be("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=Be("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uI=Be("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=Be("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=Be("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fm=Be("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=Be("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gi=Be("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xw=Be("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jg=Be("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=Be("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=Be("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cI=Be("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jw=Be("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=Be("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pm=Be("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=Be("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zw=Be("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=Be("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e_=Be("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=Be("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hI=Be("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=Be("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),dI=j.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),_d=j.createContext({}),xd=j.createContext(null),Ed=typeof document<"u",Vg=Ed?j.useLayoutEffect:j.useEffect,fI=j.createContext({strict:!1}),Lg=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Mj="framerAppearId",pI="data-"+Lg(Mj);function Oj(n,e,t,r){const{visualElement:s}=j.useContext(_d),a=j.useContext(fI),u=j.useContext(xd),h=j.useContext(dI).reducedMotion,f=j.useRef();r=r||a.renderer,!f.current&&r&&(f.current=r(n,{visualState:e,parent:s,props:t,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:h}));const m=f.current;j.useInsertionEffect(()=>{m&&m.update(t,u)});const y=j.useRef(!!(t[pI]&&!window.HandoffComplete));return Vg(()=>{m&&(m.render(),y.current&&m.animationState&&m.animationState.animateChanges())}),j.useEffect(()=>{m&&(m.updateFeatures(),!y.current&&m.animationState&&m.animationState.animateChanges(),y.current&&(y.current=!1,window.HandoffComplete=!0))}),m}function ma(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function Fj(n,e,t){return j.useCallback(r=>{r&&n.mount&&n.mount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):ma(t)&&(t.current=r))},[e])}function gu(n){return typeof n=="string"||Array.isArray(n)}function Td(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const Mg=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Og=["initial",...Mg];function Id(n){return Td(n.animate)||Og.some(e=>gu(n[e]))}function mI(n){return!!(Id(n)||n.variants)}function Uj(n,e){if(Id(n)){const{initial:t,animate:r}=n;return{initial:t===!1||gu(t)?t:void 0,animate:gu(r)?r:void 0}}return n.inherit!==!1?e:{}}function Bj(n){const{initial:e,animate:t}=Uj(n,j.useContext(_d));return j.useMemo(()=>({initial:e,animate:t}),[t_(e),t_(t)])}function t_(n){return Array.isArray(n)?n.join(" "):n}const n_={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},yu={};for(const n in n_)yu[n]={isEnabled:e=>n_[n].some(t=>!!e[t])};function zj(n){for(const e in n)yu[e]={...yu[e],...n[e]}}const Fg=j.createContext({}),gI=j.createContext({}),$j=Symbol.for("motionComponentSymbol");function qj({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:s}){n&&zj(n);function a(h,f){let m;const y={...j.useContext(dI),...h,layoutId:Wj(h)},{isStatic:_}=y,E=Bj(h),I=r(h,_);if(!_&&Ed){E.visualElement=Oj(s,I,y,e);const R=j.useContext(gI),D=j.useContext(fI).strict;E.visualElement&&(m=E.visualElement.loadFeatures(y,D,n,R))}return j.createElement(_d.Provider,{value:E},m&&E.visualElement?j.createElement(m,{visualElement:E.visualElement,...y}):null,t(s,h,Fj(I,E.visualElement,f),I,_,E.visualElement))}const u=j.forwardRef(a);return u[$j]=s,u}function Wj({layoutId:n}){const e=j.useContext(Fg).id;return e&&n!==void 0?e+"-"+n:n}function Hj(n){function e(r,s={}){return qj(n(r,s))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(r,s)=>(t.has(s)||t.set(s,e(s)),t.get(s))})}const Gj=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ug(n){return typeof n!="string"||n.includes("-")?!1:!!(Gj.indexOf(n)>-1||/[A-Z]/.test(n))}const Uh={};function Kj(n){Object.assign(Uh,n)}const Vu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],mo=new Set(Vu);function yI(n,{layout:e,layoutId:t}){return mo.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Uh[n]||n==="opacity")}const xn=n=>!!(n&&n.getVelocity),Qj={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Yj=Vu.length;function Xj(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},r,s){let a="";for(let u=0;u<Yj;u++){const h=Vu[u];if(n[h]!==void 0){const f=Qj[h]||h;a+=`${f}(${n[h]}) `}}return e&&!n.z&&(a+="translateZ(0)"),a=a.trim(),s?a=s(n,r?"":a):t&&r&&(a="none"),a}const vI=n=>e=>typeof e=="string"&&e.startsWith(n),wI=vI("--"),mm=vI("var(--"),Jj=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,Zj=(n,e)=>e&&typeof n=="number"?e.transform(n):n,os=(n,e,t)=>Math.min(Math.max(t,n),e),go={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Jl={...go,transform:n=>os(0,1,n)},ah={...go,default:1},Zl=n=>Math.round(n*1e5)/1e5,Sd=/(-)?([\d]*\.?[\d])+/g,_I=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,eV=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Lu(n){return typeof n=="string"}const Mu=n=>({test:e=>Lu(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Bi=Mu("deg"),Dr=Mu("%"),Te=Mu("px"),tV=Mu("vh"),nV=Mu("vw"),r_={...Dr,parse:n=>Dr.parse(n)/100,transform:n=>Dr.transform(n*100)},i_={...go,transform:Math.round},xI={borderWidth:Te,borderTopWidth:Te,borderRightWidth:Te,borderBottomWidth:Te,borderLeftWidth:Te,borderRadius:Te,radius:Te,borderTopLeftRadius:Te,borderTopRightRadius:Te,borderBottomRightRadius:Te,borderBottomLeftRadius:Te,width:Te,maxWidth:Te,height:Te,maxHeight:Te,size:Te,top:Te,right:Te,bottom:Te,left:Te,padding:Te,paddingTop:Te,paddingRight:Te,paddingBottom:Te,paddingLeft:Te,margin:Te,marginTop:Te,marginRight:Te,marginBottom:Te,marginLeft:Te,rotate:Bi,rotateX:Bi,rotateY:Bi,rotateZ:Bi,scale:ah,scaleX:ah,scaleY:ah,scaleZ:ah,skew:Bi,skewX:Bi,skewY:Bi,distance:Te,translateX:Te,translateY:Te,translateZ:Te,x:Te,y:Te,z:Te,perspective:Te,transformPerspective:Te,opacity:Jl,originX:r_,originY:r_,originZ:Te,zIndex:i_,fillOpacity:Jl,strokeOpacity:Jl,numOctaves:i_};function Bg(n,e,t,r){const{style:s,vars:a,transform:u,transformOrigin:h}=n;let f=!1,m=!1,y=!0;for(const _ in e){const E=e[_];if(wI(_)){a[_]=E;continue}const I=xI[_],R=Zj(E,I);if(mo.has(_)){if(f=!0,u[_]=R,!y)continue;E!==(I.default||0)&&(y=!1)}else _.startsWith("origin")?(m=!0,h[_]=R):s[_]=R}if(e.transform||(f||r?s.transform=Xj(n.transform,t,y,r):s.transform&&(s.transform="none")),m){const{originX:_="50%",originY:E="50%",originZ:I=0}=h;s.transformOrigin=`${_} ${E} ${I}`}}const zg=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function EI(n,e,t){for(const r in e)!xn(e[r])&&!yI(r,t)&&(n[r]=e[r])}function rV({transformTemplate:n},e,t){return j.useMemo(()=>{const r=zg();return Bg(r,e,{enableHardwareAcceleration:!t},n),Object.assign({},r.vars,r.style)},[e])}function iV(n,e,t){const r=n.style||{},s={};return EI(s,r,n),Object.assign(s,rV(n,e,t)),n.transformValues?n.transformValues(s):s}function sV(n,e,t){const r={},s=iV(n,e,t);return n.drag&&n.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(r.tabIndex=0),r.style=s,r}const oV=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Bh(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||oV.has(n)}let TI=n=>!Bh(n);function aV(n){n&&(TI=e=>e.startsWith("on")?!Bh(e):n(e))}try{aV(require("@emotion/is-prop-valid").default)}catch{}function lV(n,e,t){const r={};for(const s in n)s==="values"&&typeof n.values=="object"||(TI(s)||t===!0&&Bh(s)||!e&&!Bh(s)||n.draggable&&s.startsWith("onDrag"))&&(r[s]=n[s]);return r}function s_(n,e,t){return typeof n=="string"?n:Te.transform(e+t*n)}function uV(n,e,t){const r=s_(e,n.x,n.width),s=s_(t,n.y,n.height);return`${r} ${s}`}const cV={offset:"stroke-dashoffset",array:"stroke-dasharray"},hV={offset:"strokeDashoffset",array:"strokeDasharray"};function dV(n,e,t=1,r=0,s=!0){n.pathLength=1;const a=s?cV:hV;n[a.offset]=Te.transform(-r);const u=Te.transform(e),h=Te.transform(t);n[a.array]=`${u} ${h}`}function $g(n,{attrX:e,attrY:t,attrScale:r,originX:s,originY:a,pathLength:u,pathSpacing:h=1,pathOffset:f=0,...m},y,_,E){if(Bg(n,m,y,E),_){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:I,style:R,dimensions:D}=n;I.transform&&(D&&(R.transform=I.transform),delete I.transform),D&&(s!==void 0||a!==void 0||R.transform)&&(R.transformOrigin=uV(D,s!==void 0?s:.5,a!==void 0?a:.5)),e!==void 0&&(I.x=e),t!==void 0&&(I.y=t),r!==void 0&&(I.scale=r),u!==void 0&&dV(I,u,h,f,!1)}const II=()=>({...zg(),attrs:{}}),qg=n=>typeof n=="string"&&n.toLowerCase()==="svg";function fV(n,e,t,r){const s=j.useMemo(()=>{const a=II();return $g(a,e,{enableHardwareAcceleration:!1},qg(r),n.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(n.style){const a={};EI(a,n.style,n),s.style={...a,...s.style}}return s}function pV(n=!1){return(t,r,s,{latestValues:a},u)=>{const f=(Ug(t)?fV:sV)(r,a,u,t),y={...lV(r,typeof t=="string",n),...f,ref:s},{children:_}=r,E=j.useMemo(()=>xn(_)?_.get():_,[_]);return j.createElement(t,{...y,children:E})}}function SI(n,{style:e,vars:t},r,s){Object.assign(n.style,e,s&&s.getProjectionStyles(r));for(const a in t)n.style.setProperty(a,t[a])}const PI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function AI(n,e,t,r){SI(n,e,void 0,r);for(const s in e.attrs)n.setAttribute(PI.has(s)?s:Lg(s),e.attrs[s])}function Wg(n,e){const{style:t}=n,r={};for(const s in t)(xn(t[s])||e.style&&xn(e.style[s])||yI(s,n))&&(r[s]=t[s]);return r}function bI(n,e){const t=Wg(n,e);for(const r in n)if(xn(n[r])||xn(e[r])){const s=Vu.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;t[s]=n[r]}return t}function Hg(n,e,t,r={},s={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,s)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,s)),e}function kI(n){const e=j.useRef(null);return e.current===null&&(e.current=n()),e.current}const zh=n=>Array.isArray(n),mV=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),gV=n=>zh(n)?n[n.length-1]||0:n;function _h(n){const e=xn(n)?n.get():n;return mV(e)?e.toValue():e}function yV({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},r,s,a){const u={latestValues:vV(r,s,a,n),renderState:e()};return t&&(u.mount=h=>t(r,h,u)),u}const CI=n=>(e,t)=>{const r=j.useContext(_d),s=j.useContext(xd),a=()=>yV(n,e,r,s);return t?a():kI(a)};function vV(n,e,t,r){const s={},a=r(n,{});for(const E in a)s[E]=_h(a[E]);let{initial:u,animate:h}=n;const f=Id(n),m=mI(n);e&&m&&!f&&n.inherit!==!1&&(u===void 0&&(u=e.initial),h===void 0&&(h=e.animate));let y=t?t.initial===!1:!1;y=y||u===!1;const _=y?h:u;return _&&typeof _!="boolean"&&!Td(_)&&(Array.isArray(_)?_:[_]).forEach(I=>{const R=Hg(n,I);if(!R)return;const{transitionEnd:D,transition:P,...W}=R;for(const q in W){let M=W[q];if(Array.isArray(M)){const Q=y?M.length-1:0;M=M[Q]}M!==null&&(s[q]=M)}for(const q in D)s[q]=D[q]}),s}const gt=n=>n;class o_{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function wV(n){let e=new o_,t=new o_,r=0,s=!1,a=!1;const u=new WeakSet,h={schedule:(f,m=!1,y=!1)=>{const _=y&&s,E=_?e:t;return m&&u.add(f),E.add(f)&&_&&s&&(r=e.order.length),f},cancel:f=>{t.remove(f),u.delete(f)},process:f=>{if(s){a=!0;return}if(s=!0,[e,t]=[t,e],t.clear(),r=e.order.length,r)for(let m=0;m<r;m++){const y=e.order[m];y(f),u.has(y)&&(h.schedule(y),n())}s=!1,a&&(a=!1,h.process(f))}};return h}const lh=["prepare","read","update","preRender","render","postRender"],_V=40;function xV(n,e){let t=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=lh.reduce((_,E)=>(_[E]=wV(()=>t=!0),_),{}),u=_=>a[_].process(s),h=()=>{const _=performance.now();t=!1,s.delta=r?1e3/60:Math.max(Math.min(_-s.timestamp,_V),1),s.timestamp=_,s.isProcessing=!0,lh.forEach(u),s.isProcessing=!1,t&&e&&(r=!1,n(h))},f=()=>{t=!0,r=!0,s.isProcessing||n(h)};return{schedule:lh.reduce((_,E)=>{const I=a[E];return _[E]=(R,D=!1,P=!1)=>(t||f(),I.schedule(R,D,P)),_},{}),cancel:_=>lh.forEach(E=>a[E].cancel(_)),state:s,steps:a}}const{schedule:et,cancel:hi,state:Yt,steps:Ep}=xV(typeof requestAnimationFrame<"u"?requestAnimationFrame:gt,!0),EV={useVisualState:CI({scrapeMotionValuesFromProps:bI,createRenderState:II,onMount:(n,e,{renderState:t,latestValues:r})=>{et.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),et.render(()=>{$g(t,r,{enableHardwareAcceleration:!1},qg(e.tagName),n.transformTemplate),AI(e,t)})}})},TV={useVisualState:CI({scrapeMotionValuesFromProps:Wg,createRenderState:zg})};function IV(n,{forwardMotionProps:e=!1},t,r){return{...Ug(n)?EV:TV,preloadedFeatures:t,useRender:pV(e),createVisualElement:r,Component:n}}function ri(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const RI=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function Pd(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const SV=n=>e=>RI(e)&&n(e,Pd(e));function si(n,e,t,r){return ri(n,e,SV(t),r)}const PV=(n,e)=>t=>e(n(t)),ts=(...n)=>n.reduce(PV);function NI(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const a_=NI("dragHorizontal"),l_=NI("dragVertical");function DI(n){let e=!1;if(n==="y")e=l_();else if(n==="x")e=a_();else{const t=a_(),r=l_();t&&r?e=()=>{t(),r()}:(t&&t(),r&&r())}return e}function jI(){const n=DI(!0);return n?(n(),!1):!0}class fs{constructor(e){this.isMounted=!1,this.node=e}update(){}}function u_(n,e){const t="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),s=(a,u)=>{if(a.pointerType==="touch"||jI())return;const h=n.getProps();n.animationState&&h.whileHover&&n.animationState.setActive("whileHover",e),h[r]&&et.update(()=>h[r](a,u))};return si(n.current,t,s,{passive:!n.getProps()[r]})}class AV extends fs{mount(){this.unmount=ts(u_(this.node,!0),u_(this.node,!1))}unmount(){}}class bV extends fs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ts(ri(this.node.current,"focus",()=>this.onFocus()),ri(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const VI=(n,e)=>e?n===e?!0:VI(n,e.parentElement):!1;function Tp(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,Pd(t))}class kV extends fs{constructor(){super(...arguments),this.removeStartListeners=gt,this.removeEndListeners=gt,this.removeAccessibleListeners=gt,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),a=si(window,"pointerup",(h,f)=>{if(!this.checkPressEnd())return;const{onTap:m,onTapCancel:y,globalTapTarget:_}=this.node.getProps();et.update(()=>{!_&&!VI(this.node.current,h.target)?y&&y(h,f):m&&m(h,f)})},{passive:!(r.onTap||r.onPointerUp)}),u=si(window,"pointercancel",(h,f)=>this.cancelPress(h,f),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=ts(a,u),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=a=>{if(a.key!=="Enter"||this.isPressing)return;const u=h=>{h.key!=="Enter"||!this.checkPressEnd()||Tp("up",(f,m)=>{const{onTap:y}=this.node.getProps();y&&et.update(()=>y(f,m))})};this.removeEndListeners(),this.removeEndListeners=ri(this.node.current,"keyup",u),Tp("down",(h,f)=>{this.startPress(h,f)})},t=ri(this.node.current,"keydown",e),r=()=>{this.isPressing&&Tp("cancel",(a,u)=>this.cancelPress(a,u))},s=ri(this.node.current,"blur",r);this.removeAccessibleListeners=ts(t,s)}}startPress(e,t){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&et.update(()=>r(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!jI()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&et.update(()=>r(e,t))}mount(){const e=this.node.getProps(),t=si(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=ri(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ts(t,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const gm=new WeakMap,Ip=new WeakMap,CV=n=>{const e=gm.get(n.target);e&&e(n)},RV=n=>{n.forEach(CV)};function NV({root:n,...e}){const t=n||document;Ip.has(t)||Ip.set(t,{});const r=Ip.get(t),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(RV,{root:n,...e})),r[s]}function DV(n,e,t){const r=NV(e);return gm.set(n,t),r.observe(n),()=>{gm.delete(n),r.unobserve(n)}}const jV={some:0,all:1};class VV extends fs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:s="some",once:a}=e,u={root:t?t.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:jV[s]},h=f=>{const{isIntersecting:m}=f;if(this.isInView===m||(this.isInView=m,a&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:y,onViewportLeave:_}=this.node.getProps(),E=m?y:_;E&&E(f)};return DV(this.node.current,u,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(LV(e,t))&&this.startObserver()}unmount(){}}function LV({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const MV={inView:{Feature:VV},tap:{Feature:kV},focus:{Feature:bV},hover:{Feature:AV}};function LI(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function OV(n){const e={};return n.values.forEach((t,r)=>e[r]=t.get()),e}function FV(n){const e={};return n.values.forEach((t,r)=>e[r]=t.getVelocity()),e}function Ad(n,e,t){const r=n.getProps();return Hg(r,e,t!==void 0?t:r.custom,OV(n),FV(n))}let Gg=gt;const Zs=n=>n*1e3,oi=n=>n/1e3,UV={current:!1},MI=n=>Array.isArray(n)&&typeof n[0]=="number";function OI(n){return!!(!n||typeof n=="string"&&FI[n]||MI(n)||Array.isArray(n)&&n.every(OI))}const Wl=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,FI={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Wl([0,.65,.55,1]),circOut:Wl([.55,0,1,.45]),backIn:Wl([.31,.01,.66,-.59]),backOut:Wl([.33,1.53,.69,.99])};function UI(n){if(n)return MI(n)?Wl(n):Array.isArray(n)?n.map(UI):FI[n]}function BV(n,e,t,{delay:r=0,duration:s,repeat:a=0,repeatType:u="loop",ease:h,times:f}={}){const m={[e]:t};f&&(m.offset=f);const y=UI(h);return Array.isArray(y)&&(m.easing=y),n.animate(m,{delay:r,duration:s,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:a+1,direction:u==="reverse"?"alternate":"normal"})}function zV(n,{repeat:e,repeatType:t="loop"}){const r=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[r]}const BI=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,$V=1e-7,qV=12;function WV(n,e,t,r,s){let a,u,h=0;do u=e+(t-e)/2,a=BI(u,r,s)-n,a>0?t=u:e=u;while(Math.abs(a)>$V&&++h<qV);return u}function Ou(n,e,t,r){if(n===e&&t===r)return gt;const s=a=>WV(a,0,1,n,t);return a=>a===0||a===1?a:BI(s(a),e,r)}const HV=Ou(.42,0,1,1),GV=Ou(0,0,.58,1),zI=Ou(.42,0,.58,1),KV=n=>Array.isArray(n)&&typeof n[0]!="number",$I=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,qI=n=>e=>1-n(1-e),Kg=n=>1-Math.sin(Math.acos(n)),WI=qI(Kg),QV=$I(Kg),HI=Ou(.33,1.53,.69,.99),Qg=qI(HI),YV=$I(Qg),XV=n=>(n*=2)<1?.5*Qg(n):.5*(2-Math.pow(2,-10*(n-1))),JV={linear:gt,easeIn:HV,easeInOut:zI,easeOut:GV,circIn:Kg,circInOut:QV,circOut:WI,backIn:Qg,backInOut:YV,backOut:HI,anticipate:XV},c_=n=>{if(Array.isArray(n)){Gg(n.length===4);const[e,t,r,s]=n;return Ou(e,t,r,s)}else if(typeof n=="string")return JV[n];return n},Yg=(n,e)=>t=>!!(Lu(t)&&eV.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),GI=(n,e,t)=>r=>{if(!Lu(r))return r;const[s,a,u,h]=r.match(Sd);return{[n]:parseFloat(s),[e]:parseFloat(a),[t]:parseFloat(u),alpha:h!==void 0?parseFloat(h):1}},ZV=n=>os(0,255,n),Sp={...go,transform:n=>Math.round(ZV(n))},Xs={test:Yg("rgb","red"),parse:GI("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+Sp.transform(n)+", "+Sp.transform(e)+", "+Sp.transform(t)+", "+Zl(Jl.transform(r))+")"};function eL(n){let e="",t="",r="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const ym={test:Yg("#"),parse:eL,transform:Xs.transform},ga={test:Yg("hsl","hue"),parse:GI("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Dr.transform(Zl(e))+", "+Dr.transform(Zl(t))+", "+Zl(Jl.transform(r))+")"},on={test:n=>Xs.test(n)||ym.test(n)||ga.test(n),parse:n=>Xs.test(n)?Xs.parse(n):ga.test(n)?ga.parse(n):ym.parse(n),transform:n=>Lu(n)?n:n.hasOwnProperty("red")?Xs.transform(n):ga.transform(n)},ct=(n,e,t)=>-t*n+t*e+n;function Pp(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function tL({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let s=0,a=0,u=0;if(!e)s=a=u=t;else{const h=t<.5?t*(1+e):t+e-t*e,f=2*t-h;s=Pp(f,h,n+1/3),a=Pp(f,h,n),u=Pp(f,h,n-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(u*255),alpha:r}}const Ap=(n,e,t)=>{const r=n*n;return Math.sqrt(Math.max(0,t*(e*e-r)+r))},nL=[ym,Xs,ga],rL=n=>nL.find(e=>e.test(n));function h_(n){const e=rL(n);let t=e.parse(n);return e===ga&&(t=tL(t)),t}const KI=(n,e)=>{const t=h_(n),r=h_(e),s={...t};return a=>(s.red=Ap(t.red,r.red,a),s.green=Ap(t.green,r.green,a),s.blue=Ap(t.blue,r.blue,a),s.alpha=ct(t.alpha,r.alpha,a),Xs.transform(s))};function iL(n){var e,t;return isNaN(n)&&Lu(n)&&(((e=n.match(Sd))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(_I))===null||t===void 0?void 0:t.length)||0)>0}const QI={regex:Jj,countKey:"Vars",token:"${v}",parse:gt},YI={regex:_I,countKey:"Colors",token:"${c}",parse:on.parse},XI={regex:Sd,countKey:"Numbers",token:"${n}",parse:go.parse};function bp(n,{regex:e,countKey:t,token:r,parse:s}){const a=n.tokenised.match(e);a&&(n["num"+t]=a.length,n.tokenised=n.tokenised.replace(e,r),n.values.push(...a.map(s)))}function $h(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&bp(t,QI),bp(t,YI),bp(t,XI),t}function JI(n){return $h(n).values}function ZI(n){const{values:e,numColors:t,numVars:r,tokenised:s}=$h(n),a=e.length;return u=>{let h=s;for(let f=0;f<a;f++)f<r?h=h.replace(QI.token,u[f]):f<r+t?h=h.replace(YI.token,on.transform(u[f])):h=h.replace(XI.token,Zl(u[f]));return h}}const sL=n=>typeof n=="number"?0:n;function oL(n){const e=JI(n);return ZI(n)(e.map(sL))}const as={test:iL,parse:JI,createTransformer:ZI,getAnimatableNone:oL},e1=(n,e)=>t=>`${t>0?e:n}`;function t1(n,e){return typeof n=="number"?t=>ct(n,e,t):on.test(n)?KI(n,e):n.startsWith("var(")?e1(n,e):r1(n,e)}const n1=(n,e)=>{const t=[...n],r=t.length,s=n.map((a,u)=>t1(a,e[u]));return a=>{for(let u=0;u<r;u++)t[u]=s[u](a);return t}},aL=(n,e)=>{const t={...n,...e},r={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(r[s]=t1(n[s],e[s]));return s=>{for(const a in r)t[a]=r[a](s);return t}},r1=(n,e)=>{const t=as.createTransformer(e),r=$h(n),s=$h(e);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?ts(n1(r.values,s.values),t):e1(n,e)},vu=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},d_=(n,e)=>t=>ct(n,e,t);function lL(n){return typeof n=="number"?d_:typeof n=="string"?on.test(n)?KI:r1:Array.isArray(n)?n1:typeof n=="object"?aL:d_}function uL(n,e,t){const r=[],s=t||lL(n[0]),a=n.length-1;for(let u=0;u<a;u++){let h=s(n[u],n[u+1]);if(e){const f=Array.isArray(e)?e[u]||gt:e;h=ts(f,h)}r.push(h)}return r}function i1(n,e,{clamp:t=!0,ease:r,mixer:s}={}){const a=n.length;if(Gg(a===e.length),a===1)return()=>e[0];n[0]>n[a-1]&&(n=[...n].reverse(),e=[...e].reverse());const u=uL(e,r,s),h=u.length,f=m=>{let y=0;if(h>1)for(;y<n.length-2&&!(m<n[y+1]);y++);const _=vu(n[y],n[y+1],m);return u[y](_)};return t?m=>f(os(n[0],n[a-1],m)):f}function cL(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const s=vu(0,e,r);n.push(ct(t,1,s))}}function hL(n){const e=[0];return cL(e,n.length-1),e}function dL(n,e){return n.map(t=>t*e)}function fL(n,e){return n.map(()=>e||zI).splice(0,n.length-1)}function qh({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const s=KV(r)?r.map(c_):c_(r),a={done:!1,value:e[0]},u=dL(t&&t.length===e.length?t:hL(e),n),h=i1(u,e,{ease:Array.isArray(s)?s:fL(e,s)});return{calculatedDuration:n,next:f=>(a.value=h(f),a.done=f>=n,a)}}function s1(n,e){return e?n*(1e3/e):0}const pL=5;function o1(n,e,t){const r=Math.max(e-pL,0);return s1(t-n(r),e-r)}const kp=.001,mL=.01,gL=10,yL=.05,vL=1;function wL({duration:n=800,bounce:e=.25,velocity:t=0,mass:r=1}){let s,a,u=1-e;u=os(yL,vL,u),n=os(mL,gL,oi(n)),u<1?(s=m=>{const y=m*u,_=y*n,E=y-t,I=vm(m,u),R=Math.exp(-_);return kp-E/I*R},a=m=>{const _=m*u*n,E=_*t+t,I=Math.pow(u,2)*Math.pow(m,2)*n,R=Math.exp(-_),D=vm(Math.pow(m,2),u);return(-s(m)+kp>0?-1:1)*((E-I)*R)/D}):(s=m=>{const y=Math.exp(-m*n),_=(m-t)*n+1;return-kp+y*_},a=m=>{const y=Math.exp(-m*n),_=(t-m)*(n*n);return y*_});const h=5/n,f=xL(s,a,h);if(n=Zs(n),isNaN(f))return{stiffness:100,damping:10,duration:n};{const m=Math.pow(f,2)*r;return{stiffness:m,damping:u*2*Math.sqrt(r*m),duration:n}}}const _L=12;function xL(n,e,t){let r=t;for(let s=1;s<_L;s++)r=r-n(r)/e(r);return r}function vm(n,e){return n*Math.sqrt(1-e*e)}const EL=["duration","bounce"],TL=["stiffness","damping","mass"];function f_(n,e){return e.some(t=>n[t]!==void 0)}function IL(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!f_(n,TL)&&f_(n,EL)){const t=wL(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function a1({keyframes:n,restDelta:e,restSpeed:t,...r}){const s=n[0],a=n[n.length-1],u={done:!1,value:s},{stiffness:h,damping:f,mass:m,duration:y,velocity:_,isResolvedFromDuration:E}=IL({...r,velocity:-oi(r.velocity||0)}),I=_||0,R=f/(2*Math.sqrt(h*m)),D=a-s,P=oi(Math.sqrt(h/m)),W=Math.abs(D)<5;t||(t=W?.01:2),e||(e=W?.005:.5);let q;if(R<1){const M=vm(P,R);q=Q=>{const Z=Math.exp(-R*P*Q);return a-Z*((I+R*P*D)/M*Math.sin(M*Q)+D*Math.cos(M*Q))}}else if(R===1)q=M=>a-Math.exp(-P*M)*(D+(I+P*D)*M);else{const M=P*Math.sqrt(R*R-1);q=Q=>{const Z=Math.exp(-R*P*Q),ie=Math.min(M*Q,300);return a-Z*((I+R*P*D)*Math.sinh(ie)+M*D*Math.cosh(ie))/M}}return{calculatedDuration:E&&y||null,next:M=>{const Q=q(M);if(E)u.done=M>=y;else{let Z=I;M!==0&&(R<1?Z=o1(q,M,Q):Z=0);const ie=Math.abs(Z)<=t,N=Math.abs(a-Q)<=e;u.done=ie&&N}return u.value=u.done?a:Q,u}}}function p_({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:u,min:h,max:f,restDelta:m=.5,restSpeed:y}){const _=n[0],E={done:!1,value:_},I=A=>h!==void 0&&A<h||f!==void 0&&A>f,R=A=>h===void 0?f:f===void 0||Math.abs(h-A)<Math.abs(f-A)?h:f;let D=t*e;const P=_+D,W=u===void 0?P:u(P);W!==P&&(D=W-_);const q=A=>-D*Math.exp(-A/r),M=A=>W+q(A),Q=A=>{const k=q(A),V=M(A);E.done=Math.abs(k)<=m,E.value=E.done?W:V};let Z,ie;const N=A=>{I(E.value)&&(Z=A,ie=a1({keyframes:[E.value,R(E.value)],velocity:o1(M,A,E.value),damping:s,stiffness:a,restDelta:m,restSpeed:y}))};return N(0),{calculatedDuration:null,next:A=>{let k=!1;return!ie&&Z===void 0&&(k=!0,Q(A),N(A)),Z!==void 0&&A>Z?ie.next(A-Z):(!k&&Q(A),E)}}}const SL=n=>{const e=({timestamp:t})=>n(t);return{start:()=>et.update(e,!0),stop:()=>hi(e),now:()=>Yt.isProcessing?Yt.timestamp:performance.now()}},m_=2e4;function g_(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<m_;)e+=t,r=n.next(e);return e>=m_?1/0:e}const PL={decay:p_,inertia:p_,tween:qh,keyframes:qh,spring:a1};function Wh({autoplay:n=!0,delay:e=0,driver:t=SL,keyframes:r,type:s="keyframes",repeat:a=0,repeatDelay:u=0,repeatType:h="loop",onPlay:f,onStop:m,onComplete:y,onUpdate:_,...E}){let I=1,R=!1,D,P;const W=()=>{P=new Promise(O=>{D=O})};W();let q;const M=PL[s]||qh;let Q;M!==qh&&typeof r[0]!="number"&&(Q=i1([0,100],r,{clamp:!1}),r=[0,100]);const Z=M({...E,keyframes:r});let ie;h==="mirror"&&(ie=M({...E,keyframes:[...r].reverse(),velocity:-(E.velocity||0)}));let N="idle",A=null,k=null,V=null;Z.calculatedDuration===null&&a&&(Z.calculatedDuration=g_(Z));const{calculatedDuration:U}=Z;let B=1/0,b=1/0;U!==null&&(B=U+u,b=B*(a+1)-u);let he=0;const Ke=O=>{if(k===null)return;I>0&&(k=Math.min(k,O)),I<0&&(k=Math.min(O-b/I,k)),A!==null?he=A:he=Math.round(O-k)*I;const Y=he-e*(I>=0?1:-1),re=I>=0?Y<0:Y>b;he=Math.max(Y,0),N==="finished"&&A===null&&(he=b);let le=he,we=Z;if(a){const Me=Math.min(he,b)/B;let at=Math.floor(Me),Lt=Me%1;!Lt&&Me>=1&&(Lt=1),Lt===1&&at--,at=Math.min(at,a+1),!!(at%2)&&(h==="reverse"?(Lt=1-Lt,u&&(Lt-=u/B)):h==="mirror"&&(we=ie)),le=os(0,1,Lt)*B}const Pe=re?{done:!1,value:r[0]}:we.next(le);Q&&(Pe.value=Q(Pe.value));let{done:Ne}=Pe;!re&&U!==null&&(Ne=I>=0?he>=b:he<=0);const Ve=A===null&&(N==="finished"||N==="running"&&Ne);return _&&_(Pe.value),Ve&&oe(),Pe},Re=()=>{q&&q.stop(),q=void 0},Ce=()=>{N="idle",Re(),D(),W(),k=V=null},oe=()=>{N="finished",y&&y(),Re(),D()},pe=()=>{if(R)return;q||(q=t(Ke));const O=q.now();f&&f(),A!==null?k=O-A:(!k||N==="finished")&&(k=O),N==="finished"&&W(),V=k,A=null,N="running",q.start()};n&&pe();const ue={then(O,Y){return P.then(O,Y)},get time(){return oi(he)},set time(O){O=Zs(O),he=O,A!==null||!q||I===0?A=O:k=q.now()-O/I},get duration(){const O=Z.calculatedDuration===null?g_(Z):Z.calculatedDuration;return oi(O)},get speed(){return I},set speed(O){O===I||!q||(I=O,ue.time=oi(he))},get state(){return N},play:pe,pause:()=>{N="paused",A=he},stop:()=>{R=!0,N!=="idle"&&(N="idle",m&&m(),Ce())},cancel:()=>{V!==null&&Ke(V),Ce()},complete:()=>{N="finished"},sample:O=>(k=0,Ke(O))};return ue}function AL(n){let e;return()=>(e===void 0&&(e=n()),e)}const bL=AL(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),kL=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),uh=10,CL=2e4,RL=(n,e)=>e.type==="spring"||n==="backgroundColor"||!OI(e.ease);function NL(n,e,{onUpdate:t,onComplete:r,...s}){if(!(bL()&&kL.has(e)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let u=!1,h,f,m=!1;const y=()=>{f=new Promise(M=>{h=M})};y();let{keyframes:_,duration:E=300,ease:I,times:R}=s;if(RL(e,s)){const M=Wh({...s,repeat:0,delay:0});let Q={done:!1,value:_[0]};const Z=[];let ie=0;for(;!Q.done&&ie<CL;)Q=M.sample(ie),Z.push(Q.value),ie+=uh;R=void 0,_=Z,E=ie-uh,I="linear"}const D=BV(n.owner.current,e,_,{...s,duration:E,ease:I,times:R}),P=()=>{m=!1,D.cancel()},W=()=>{m=!0,et.update(P),h(),y()};return D.onfinish=()=>{m||(n.set(zV(_,s)),r&&r(),W())},{then(M,Q){return f.then(M,Q)},attachTimeline(M){return D.timeline=M,D.onfinish=null,gt},get time(){return oi(D.currentTime||0)},set time(M){D.currentTime=Zs(M)},get speed(){return D.playbackRate},set speed(M){D.playbackRate=M},get duration(){return oi(E)},play:()=>{u||(D.play(),hi(P))},pause:()=>D.pause(),stop:()=>{if(u=!0,D.playState==="idle")return;const{currentTime:M}=D;if(M){const Q=Wh({...s,autoplay:!1});n.setWithVelocity(Q.sample(M-uh).value,Q.sample(M).value,uh)}W()},complete:()=>{m||D.finish()},cancel:W}}function DL({keyframes:n,delay:e,onUpdate:t,onComplete:r}){const s=()=>(t&&t(n[n.length-1]),r&&r(),{time:0,speed:1,duration:0,play:gt,pause:gt,stop:gt,then:a=>(a(),Promise.resolve()),cancel:gt,complete:gt});return e?Wh({keyframes:[0,1],duration:0,delay:e,onComplete:s}):s()}const jL={type:"spring",stiffness:500,damping:25,restSpeed:10},VL=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),LL={type:"keyframes",duration:.8},ML={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},OL=(n,{keyframes:e})=>e.length>2?LL:mo.has(n)?n.startsWith("scale")?VL(e[1]):jL:ML,wm=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(as.test(e)||e==="0")&&!e.startsWith("url(")),FL=new Set(["brightness","contrast","saturate","opacity"]);function UL(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(Sd)||[];if(!r)return n;const s=t.replace(r,"");let a=FL.has(e)?1:0;return r!==t&&(a*=100),e+"("+a+s+")"}const BL=/([a-z-]*)\(.*?\)/g,_m={...as,getAnimatableNone:n=>{const e=n.match(BL);return e?e.map(UL).join(" "):n}},zL={...xI,color:on,backgroundColor:on,outlineColor:on,fill:on,stroke:on,borderColor:on,borderTopColor:on,borderRightColor:on,borderBottomColor:on,borderLeftColor:on,filter:_m,WebkitFilter:_m},Xg=n=>zL[n];function l1(n,e){let t=Xg(n);return t!==_m&&(t=as),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const u1=n=>/^0[^.\s]+$/.test(n);function $L(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||u1(n)}function qL(n,e,t,r){const s=wm(e,t);let a;Array.isArray(t)?a=[...t]:a=[null,t];const u=r.from!==void 0?r.from:n.get();let h;const f=[];for(let m=0;m<a.length;m++)a[m]===null&&(a[m]=m===0?u:a[m-1]),$L(a[m])&&f.push(m),typeof a[m]=="string"&&a[m]!=="none"&&a[m]!=="0"&&(h=a[m]);if(s&&f.length&&h)for(let m=0;m<f.length;m++){const y=f[m];a[y]=l1(e,h)}return a}function WL({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:u,repeatDelay:h,from:f,elapsed:m,...y}){return!!Object.keys(y).length}function Jg(n,e){return n[e]||n.default||n}const HL={skipAnimations:!1},Zg=(n,e,t,r={})=>s=>{const a=Jg(r,n)||{},u=a.delay||r.delay||0;let{elapsed:h=0}=r;h=h-Zs(u);const f=qL(e,n,t,a),m=f[0],y=f[f.length-1],_=wm(n,m),E=wm(n,y);let I={keyframes:f,velocity:e.getVelocity(),ease:"easeOut",...a,delay:-h,onUpdate:R=>{e.set(R),a.onUpdate&&a.onUpdate(R)},onComplete:()=>{s(),a.onComplete&&a.onComplete()}};if(WL(a)||(I={...I,...OL(n,I)}),I.duration&&(I.duration=Zs(I.duration)),I.repeatDelay&&(I.repeatDelay=Zs(I.repeatDelay)),!_||!E||UV.current||a.type===!1||HL.skipAnimations)return DL(I);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const R=NL(e,n,I);if(R)return R}return Wh(I)};function Hh(n){return!!(xn(n)&&n.add)}const c1=n=>/^\-?\d*\.?\d+$/.test(n);function ey(n,e){n.indexOf(e)===-1&&n.push(e)}function ty(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class ny{constructor(){this.subscriptions=[]}add(e){return ey(this.subscriptions,e),()=>ty(this.subscriptions,e)}notify(e,t,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,r);else for(let a=0;a<s;a++){const u=this.subscriptions[a];u&&u(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const GL=n=>!isNaN(parseFloat(n));class KL{constructor(e,t={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:a,timestamp:u}=Yt;this.lastUpdated!==u&&(this.timeDelta=a,this.lastUpdated=u,et.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>et.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=GL(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new ny);const r=this.events[e].add(t);return e==="change"?()=>{r(),et.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?s1(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ra(n,e){return new KL(n,e)}const h1=n=>e=>e.test(n),QL={test:n=>n==="auto",parse:n=>n},d1=[go,Te,Dr,Bi,nV,tV,QL],Ml=n=>d1.find(h1(n)),YL=[...d1,on,as],XL=n=>YL.find(h1(n));function JL(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Ra(t))}function ZL(n,e){const t=Ad(n,e);let{transitionEnd:r={},transition:s={},...a}=t?n.makeTargetAnimatable(t,!1):{};a={...a,...r};for(const u in a){const h=gV(a[u]);JL(n,u,h)}}function eM(n,e,t){var r,s;const a=Object.keys(e).filter(h=>!n.hasValue(h)),u=a.length;if(u)for(let h=0;h<u;h++){const f=a[h],m=e[f];let y=null;Array.isArray(m)&&(y=m[0]),y===null&&(y=(s=(r=t[f])!==null&&r!==void 0?r:n.readValue(f))!==null&&s!==void 0?s:e[f]),y!=null&&(typeof y=="string"&&(c1(y)||u1(y))?y=parseFloat(y):!XL(y)&&as.test(m)&&(y=l1(f,m)),n.addValue(f,Ra(y,{owner:n})),t[f]===void 0&&(t[f]=y),y!==null&&n.setBaseTarget(f,y))}}function tM(n,e){return e?(e[n]||e.default||e).from:void 0}function nM(n,e,t){const r={};for(const s in n){const a=tM(s,e);if(a!==void 0)r[s]=a;else{const u=t.getValue(s);u&&(r[s]=u.get())}}return r}function rM({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function iM(n,e){const t=n.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}else return t!==e}function f1(n,e,{delay:t=0,transitionOverride:r,type:s}={}){let{transition:a=n.getDefaultTransition(),transitionEnd:u,...h}=n.makeTargetAnimatable(e);const f=n.getValue("willChange");r&&(a=r);const m=[],y=s&&n.animationState&&n.animationState.getState()[s];for(const _ in h){const E=n.getValue(_),I=h[_];if(!E||I===void 0||y&&rM(y,_))continue;const R={delay:t,elapsed:0,...Jg(a||{},_)};if(window.HandoffAppearAnimations){const W=n.getProps()[pI];if(W){const q=window.HandoffAppearAnimations(W,_,E,et);q!==null&&(R.elapsed=q,R.isHandoff=!0)}}let D=!R.isHandoff&&!iM(E,I);if(R.type==="spring"&&(E.getVelocity()||R.velocity)&&(D=!1),E.animation&&(D=!1),D)continue;E.start(Zg(_,E,I,n.shouldReduceMotion&&mo.has(_)?{type:!1}:R));const P=E.animation;Hh(f)&&(f.add(_),P.then(()=>f.remove(_))),m.push(P)}return u&&Promise.all(m).then(()=>{u&&ZL(n,u)}),m}function xm(n,e,t={}){const r=Ad(n,e,t.custom);let{transition:s=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const a=r?()=>Promise.all(f1(n,r,t)):()=>Promise.resolve(),u=n.variantChildren&&n.variantChildren.size?(f=0)=>{const{delayChildren:m=0,staggerChildren:y,staggerDirection:_}=s;return sM(n,e,m+f,y,_,t)}:()=>Promise.resolve(),{when:h}=s;if(h){const[f,m]=h==="beforeChildren"?[a,u]:[u,a];return f().then(()=>m())}else return Promise.all([a(),u(t.delay)])}function sM(n,e,t=0,r=0,s=1,a){const u=[],h=(n.variantChildren.size-1)*r,f=s===1?(m=0)=>m*r:(m=0)=>h-m*r;return Array.from(n.variantChildren).sort(oM).forEach((m,y)=>{m.notify("AnimationStart",e),u.push(xm(m,e,{...a,delay:t+f(y)}).then(()=>m.notify("AnimationComplete",e)))}),Promise.all(u)}function oM(n,e){return n.sortNodePosition(e)}function aM(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(a=>xm(n,a,t));r=Promise.all(s)}else if(typeof e=="string")r=xm(n,e,t);else{const s=typeof e=="function"?Ad(n,e,t.custom):e;r=Promise.all(f1(n,s,t))}return r.then(()=>n.notify("AnimationComplete",e))}const lM=[...Mg].reverse(),uM=Mg.length;function cM(n){return e=>Promise.all(e.map(({animation:t,options:r})=>aM(n,t,r)))}function hM(n){let e=cM(n);const t=fM();let r=!0;const s=(f,m)=>{const y=Ad(n,m);if(y){const{transition:_,transitionEnd:E,...I}=y;f={...f,...I,...E}}return f};function a(f){e=f(n)}function u(f,m){const y=n.getProps(),_=n.getVariantContext(!0)||{},E=[],I=new Set;let R={},D=1/0;for(let W=0;W<uM;W++){const q=lM[W],M=t[q],Q=y[q]!==void 0?y[q]:_[q],Z=gu(Q),ie=q===m?M.isActive:null;ie===!1&&(D=W);let N=Q===_[q]&&Q!==y[q]&&Z;if(N&&r&&n.manuallyAnimateOnMount&&(N=!1),M.protectedKeys={...R},!M.isActive&&ie===null||!Q&&!M.prevProp||Td(Q)||typeof Q=="boolean")continue;let k=dM(M.prevProp,Q)||q===m&&M.isActive&&!N&&Z||W>D&&Z,V=!1;const U=Array.isArray(Q)?Q:[Q];let B=U.reduce(s,{});ie===!1&&(B={});const{prevResolvedValues:b={}}=M,he={...b,...B},Ke=Re=>{k=!0,I.has(Re)&&(V=!0,I.delete(Re)),M.needsAnimating[Re]=!0};for(const Re in he){const Ce=B[Re],oe=b[Re];if(R.hasOwnProperty(Re))continue;let pe=!1;zh(Ce)&&zh(oe)?pe=!LI(Ce,oe):pe=Ce!==oe,pe?Ce!==void 0?Ke(Re):I.add(Re):Ce!==void 0&&I.has(Re)?Ke(Re):M.protectedKeys[Re]=!0}M.prevProp=Q,M.prevResolvedValues=B,M.isActive&&(R={...R,...B}),r&&n.blockInitialAnimation&&(k=!1),k&&(!N||V)&&E.push(...U.map(Re=>({animation:Re,options:{type:q,...f}})))}if(I.size){const W={};I.forEach(q=>{const M=n.getBaseTarget(q);M!==void 0&&(W[q]=M)}),E.push({animation:W})}let P=!!E.length;return r&&(y.initial===!1||y.initial===y.animate)&&!n.manuallyAnimateOnMount&&(P=!1),r=!1,P?e(E):Promise.resolve()}function h(f,m,y){var _;if(t[f].isActive===m)return Promise.resolve();(_=n.variantChildren)===null||_===void 0||_.forEach(I=>{var R;return(R=I.animationState)===null||R===void 0?void 0:R.setActive(f,m)}),t[f].isActive=m;const E=u(y,f);for(const I in t)t[I].protectedKeys={};return E}return{animateChanges:u,setActive:h,setAnimateFunction:a,getState:()=>t}}function dM(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!LI(e,n):!1}function $s(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function fM(){return{animate:$s(!0),whileInView:$s(),whileHover:$s(),whileTap:$s(),whileDrag:$s(),whileFocus:$s(),exit:$s()}}class pM extends fs{constructor(e){super(e),e.animationState||(e.animationState=hM(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Td(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let mM=0;class gM extends fs{constructor(){super(...arguments),this.id=mM++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const a=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});t&&!e&&a.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const yM={animation:{Feature:pM},exit:{Feature:gM}},y_=(n,e)=>Math.abs(n-e);function vM(n,e){const t=y_(n.x,e.x),r=y_(n.y,e.y);return Math.sqrt(t**2+r**2)}class p1{constructor(e,t,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=Rp(this.lastMoveEventInfo,this.history),E=this.startEvent!==null,I=vM(_.offset,{x:0,y:0})>=3;if(!E&&!I)return;const{point:R}=_,{timestamp:D}=Yt;this.history.push({...R,timestamp:D});const{onStart:P,onMove:W}=this.handlers;E||(P&&P(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),W&&W(this.lastMoveEvent,_)},this.handlePointerMove=(_,E)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=Cp(E,this.transformPagePoint),et.update(this.updatePoint,!0)},this.handlePointerUp=(_,E)=>{this.end();const{onEnd:I,onSessionEnd:R,resumeAnimation:D}=this.handlers;if(this.dragSnapToOrigin&&D&&D(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=Rp(_.type==="pointercancel"?this.lastMoveEventInfo:Cp(E,this.transformPagePoint),this.history);this.startEvent&&I&&I(_,P),R&&R(_,P)},!RI(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=r,this.contextWindow=s||window;const u=Pd(e),h=Cp(u,this.transformPagePoint),{point:f}=h,{timestamp:m}=Yt;this.history=[{...f,timestamp:m}];const{onSessionStart:y}=t;y&&y(e,Rp(h,this.history)),this.removeListeners=ts(si(this.contextWindow,"pointermove",this.handlePointerMove),si(this.contextWindow,"pointerup",this.handlePointerUp),si(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),hi(this.updatePoint)}}function Cp(n,e){return e?{point:e(n.point)}:n}function v_(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Rp({point:n},e){return{point:n,delta:v_(n,m1(e)),offset:v_(n,wM(e)),velocity:_M(e,.1)}}function wM(n){return n[0]}function m1(n){return n[n.length-1]}function _M(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const s=m1(n);for(;t>=0&&(r=n[t],!(s.timestamp-r.timestamp>Zs(e)));)t--;if(!r)return{x:0,y:0};const a=oi(s.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const u={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function Rn(n){return n.max-n.min}function Em(n,e=0,t=.01){return Math.abs(n-e)<=t}function w_(n,e,t,r=.5){n.origin=r,n.originPoint=ct(e.min,e.max,n.origin),n.scale=Rn(t)/Rn(e),(Em(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=ct(t.min,t.max,n.origin)-n.originPoint,(Em(n.translate)||isNaN(n.translate))&&(n.translate=0)}function eu(n,e,t,r){w_(n.x,e.x,t.x,r?r.originX:void 0),w_(n.y,e.y,t.y,r?r.originY:void 0)}function __(n,e,t){n.min=t.min+e.min,n.max=n.min+Rn(e)}function xM(n,e,t){__(n.x,e.x,t.x),__(n.y,e.y,t.y)}function x_(n,e,t){n.min=e.min-t.min,n.max=n.min+Rn(e)}function tu(n,e,t){x_(n.x,e.x,t.x),x_(n.y,e.y,t.y)}function EM(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?ct(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?ct(t,n,r.max):Math.min(n,t)),n}function E_(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function TM(n,{top:e,left:t,bottom:r,right:s}){return{x:E_(n.x,t,s),y:E_(n.y,e,r)}}function T_(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function IM(n,e){return{x:T_(n.x,e.x),y:T_(n.y,e.y)}}function SM(n,e){let t=.5;const r=Rn(n),s=Rn(e);return s>r?t=vu(e.min,e.max-r,n.min):r>s&&(t=vu(n.min,n.max-s,e.min)),os(0,1,t)}function PM(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Tm=.35;function AM(n=Tm){return n===!1?n=0:n===!0&&(n=Tm),{x:I_(n,"left","right"),y:I_(n,"top","bottom")}}function I_(n,e,t){return{min:S_(n,e),max:S_(n,t)}}function S_(n,e){return typeof n=="number"?n:n[e]||0}const P_=()=>({translate:0,scale:1,origin:0,originPoint:0}),ya=()=>({x:P_(),y:P_()}),A_=()=>({min:0,max:0}),xt=()=>({x:A_(),y:A_()});function $n(n){return[n("x"),n("y")]}function g1({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function bM({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function kM(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function Np(n){return n===void 0||n===1}function Im({scale:n,scaleX:e,scaleY:t}){return!Np(n)||!Np(e)||!Np(t)}function Ws(n){return Im(n)||y1(n)||n.z||n.rotate||n.rotateX||n.rotateY}function y1(n){return b_(n.x)||b_(n.y)}function b_(n){return n&&n!=="0%"}function Gh(n,e,t){const r=n-t,s=e*r;return t+s}function k_(n,e,t,r,s){return s!==void 0&&(n=Gh(n,s,r)),Gh(n,t,r)+e}function Sm(n,e=0,t=1,r,s){n.min=k_(n.min,e,t,r,s),n.max=k_(n.max,e,t,r,s)}function v1(n,{x:e,y:t}){Sm(n.x,e.translate,e.scale,e.originPoint),Sm(n.y,t.translate,t.scale,t.originPoint)}function CM(n,e,t,r=!1){const s=t.length;if(!s)return;e.x=e.y=1;let a,u;for(let h=0;h<s;h++){a=t[h],u=a.projectionDelta;const f=a.instance;f&&f.style&&f.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&va(n,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,v1(n,u)),r&&Ws(a.latestValues)&&va(n,a.latestValues))}e.x=C_(e.x),e.y=C_(e.y)}function C_(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function zi(n,e){n.min=n.min+e,n.max=n.max+e}function R_(n,e,[t,r,s]){const a=e[s]!==void 0?e[s]:.5,u=ct(n.min,n.max,a);Sm(n,e[t],e[r],u,e.scale)}const RM=["x","scaleX","originX"],NM=["y","scaleY","originY"];function va(n,e){R_(n.x,e,RM),R_(n.y,e,NM)}function w1(n,e){return g1(kM(n.getBoundingClientRect(),e))}function DM(n,e,t){const r=w1(n,t),{scroll:s}=e;return s&&(zi(r.x,s.offset.x),zi(r.y,s.offset.y)),r}const _1=({current:n})=>n?n.ownerDocument.defaultView:null,jM=new WeakMap;class VM{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=xt(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=y=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Pd(y,"page").point)},a=(y,_)=>{const{drag:E,dragPropagation:I,onDragStart:R}=this.getProps();if(E&&!I&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=DI(E),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),$n(P=>{let W=this.getAxisMotionValue(P).get()||0;if(Dr.test(W)){const{projection:q}=this.visualElement;if(q&&q.layout){const M=q.layout.layoutBox[P];M&&(W=Rn(M)*(parseFloat(W)/100))}}this.originPoint[P]=W}),R&&et.update(()=>R(y,_),!1,!0);const{animationState:D}=this.visualElement;D&&D.setActive("whileDrag",!0)},u=(y,_)=>{const{dragPropagation:E,dragDirectionLock:I,onDirectionLock:R,onDrag:D}=this.getProps();if(!E&&!this.openGlobalLock)return;const{offset:P}=_;if(I&&this.currentDirection===null){this.currentDirection=LM(P),this.currentDirection!==null&&R&&R(this.currentDirection);return}this.updateAxis("x",_.point,P),this.updateAxis("y",_.point,P),this.visualElement.render(),D&&D(y,_)},h=(y,_)=>this.stop(y,_),f=()=>$n(y=>{var _;return this.getAnimationState(y)==="paused"&&((_=this.getAxisMotionValue(y).animation)===null||_===void 0?void 0:_.play())}),{dragSnapToOrigin:m}=this.getProps();this.panSession=new p1(e,{onSessionStart:s,onStart:a,onMove:u,onSessionEnd:h,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,contextWindow:_1(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=t;this.startAnimation(s);const{onDragEnd:a}=this.getProps();a&&et.update(()=>a(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:s}=this.getProps();if(!r||!ch(e,s,this.currentDirection))return;const a=this.getAxisMotionValue(e);let u=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(u=EM(u,this.constraints[e],this.elastic[e])),a.set(u)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;t&&ma(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&s?this.constraints=TM(s.layoutBox,t):this.constraints=!1,this.elastic=AM(r),a!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&$n(u=>{this.getAxisMotionValue(u)&&(this.constraints[u]=PM(s.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!ma(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=DM(r,s.root,this.visualElement.getTransformPagePoint());let u=IM(s.layout.layoutBox,a);if(t){const h=t(bM(u));this.hasMutatedConstraints=!!h,h&&(u=g1(h))}return u}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:s,dragTransition:a,dragSnapToOrigin:u,onDragTransitionEnd:h}=this.getProps(),f=this.constraints||{},m=$n(y=>{if(!ch(y,t,this.currentDirection))return;let _=f&&f[y]||{};u&&(_={min:0,max:0});const E=s?200:1e6,I=s?40:1e7,R={type:"inertia",velocity:r?e[y]:0,bounceStiffness:E,bounceDamping:I,timeConstant:750,restDelta:1,restSpeed:10,...a,..._};return this.startAxisValueAnimation(y,R)});return Promise.all(m).then(h)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return r.start(Zg(e,r,0,t))}stopAnimation(){$n(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){$n(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),s=r[t];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){$n(t=>{const{drag:r}=this.getProps();if(!ch(t,r,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(t);if(s&&s.layout){const{min:u,max:h}=s.layout.layoutBox[t];a.set(e[t]-ct(u,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!ma(t)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};$n(u=>{const h=this.getAxisMotionValue(u);if(h){const f=h.get();s[u]=SM({min:f,max:f},this.constraints[u])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),$n(u=>{if(!ch(u,e,null))return;const h=this.getAxisMotionValue(u),{min:f,max:m}=this.constraints[u];h.set(ct(f,m,s[u]))})}addListeners(){if(!this.visualElement.current)return;jM.set(this.visualElement,this);const e=this.visualElement.current,t=si(e,"pointerdown",f=>{const{drag:m,dragListener:y=!0}=this.getProps();m&&y&&this.start(f)}),r=()=>{const{dragConstraints:f}=this.getProps();ma(f)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const u=ri(window,"resize",()=>this.scalePositionWithinConstraints()),h=s.addEventListener("didUpdate",({delta:f,hasLayoutChanged:m})=>{this.isDragging&&m&&($n(y=>{const _=this.getAxisMotionValue(y);_&&(this.originPoint[y]+=f[y].translate,_.set(_.get()+f[y].translate))}),this.visualElement.render())});return()=>{u(),t(),a(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:u=Tm,dragMomentum:h=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:s,dragConstraints:a,dragElastic:u,dragMomentum:h}}}function ch(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function LM(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class MM extends fs{constructor(e){super(e),this.removeGroupControls=gt,this.removeListeners=gt,this.controls=new VM(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||gt}unmount(){this.removeGroupControls(),this.removeListeners()}}const N_=n=>(e,t)=>{n&&et.update(()=>n(e,t))};class OM extends fs{constructor(){super(...arguments),this.removePointerDownListener=gt}onPointerDown(e){this.session=new p1(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:_1(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:N_(e),onStart:N_(t),onMove:r,onEnd:(a,u)=>{delete this.session,s&&et.update(()=>s(a,u))}}}mount(){this.removePointerDownListener=si(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function FM(){const n=j.useContext(xd);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:r}=n,s=j.useId();return j.useEffect(()=>r(s),[]),!e&&t?[!1,()=>t&&t(s)]:[!0]}const xh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function D_(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Ol={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Te.test(n))n=parseFloat(n);else return n;const t=D_(n,e.target.x),r=D_(n,e.target.y);return`${t}% ${r}%`}},UM={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,s=as.parse(n);if(s.length>5)return r;const a=as.createTransformer(n),u=typeof s[0]!="number"?1:0,h=t.x.scale*e.x,f=t.y.scale*e.y;s[0+u]/=h,s[1+u]/=f;const m=ct(h,f,.5);return typeof s[2+u]=="number"&&(s[2+u]/=m),typeof s[3+u]=="number"&&(s[3+u]/=m),a(s)}};class BM extends km.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:s}=this.props,{projection:a}=e;Kj(zM),a&&(t.group&&t.group.add(a),r&&r.register&&s&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),xh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:s,isPresent:a}=this.props,u=r.projection;return u&&(u.isPresent=a,s||e.layoutDependency!==t||t===void 0?u.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?u.promote():u.relegate()||et.postRender(()=>{const h=u.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function x1(n){const[e,t]=FM(),r=j.useContext(Fg);return km.createElement(BM,{...n,layoutGroup:r,switchLayoutGroup:j.useContext(gI),isPresent:e,safeToRemove:t})}const zM={borderRadius:{...Ol,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ol,borderTopRightRadius:Ol,borderBottomLeftRadius:Ol,borderBottomRightRadius:Ol,boxShadow:UM},E1=["TopLeft","TopRight","BottomLeft","BottomRight"],$M=E1.length,j_=n=>typeof n=="string"?parseFloat(n):n,V_=n=>typeof n=="number"||Te.test(n);function qM(n,e,t,r,s,a){s?(n.opacity=ct(0,t.opacity!==void 0?t.opacity:1,WM(r)),n.opacityExit=ct(e.opacity!==void 0?e.opacity:1,0,HM(r))):a&&(n.opacity=ct(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let u=0;u<$M;u++){const h=`border${E1[u]}Radius`;let f=L_(e,h),m=L_(t,h);if(f===void 0&&m===void 0)continue;f||(f=0),m||(m=0),f===0||m===0||V_(f)===V_(m)?(n[h]=Math.max(ct(j_(f),j_(m),r),0),(Dr.test(m)||Dr.test(f))&&(n[h]+="%")):n[h]=m}(e.rotate||t.rotate)&&(n.rotate=ct(e.rotate||0,t.rotate||0,r))}function L_(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const WM=T1(0,.5,WI),HM=T1(.5,.95,gt);function T1(n,e,t){return r=>r<n?0:r>e?1:t(vu(n,e,r))}function M_(n,e){n.min=e.min,n.max=e.max}function zn(n,e){M_(n.x,e.x),M_(n.y,e.y)}function O_(n,e,t,r,s){return n-=e,n=Gh(n,1/t,r),s!==void 0&&(n=Gh(n,1/s,r)),n}function GM(n,e=0,t=1,r=.5,s,a=n,u=n){if(Dr.test(e)&&(e=parseFloat(e),e=ct(u.min,u.max,e/100)-u.min),typeof e!="number")return;let h=ct(a.min,a.max,r);n===a&&(h-=e),n.min=O_(n.min,e,t,h,s),n.max=O_(n.max,e,t,h,s)}function F_(n,e,[t,r,s],a,u){GM(n,e[t],e[r],e[s],e.scale,a,u)}const KM=["x","scaleX","originX"],QM=["y","scaleY","originY"];function U_(n,e,t,r){F_(n.x,e,KM,t?t.x:void 0,r?r.x:void 0),F_(n.y,e,QM,t?t.y:void 0,r?r.y:void 0)}function B_(n){return n.translate===0&&n.scale===1}function I1(n){return B_(n.x)&&B_(n.y)}function YM(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function S1(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function z_(n){return Rn(n.x)/Rn(n.y)}class XM{constructor(){this.members=[]}add(e){ey(this.members,e),e.scheduleRender()}remove(e){if(ty(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let r;for(let s=t;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function $_(n,e,t){let r="";const s=n.x.translate/e.x,a=n.y.translate/e.y;if((s||a)&&(r=`translate3d(${s}px, ${a}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:f,rotateX:m,rotateY:y}=t;f&&(r+=`rotate(${f}deg) `),m&&(r+=`rotateX(${m}deg) `),y&&(r+=`rotateY(${y}deg) `)}const u=n.x.scale*e.x,h=n.y.scale*e.y;return(u!==1||h!==1)&&(r+=`scale(${u}, ${h})`),r||"none"}const JM=(n,e)=>n.depth-e.depth;class ZM{constructor(){this.children=[],this.isDirty=!1}add(e){ey(this.children,e),this.isDirty=!0}remove(e){ty(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(JM),this.isDirty=!1,this.children.forEach(e)}}function eO(n,e){const t=performance.now(),r=({timestamp:s})=>{const a=s-t;a>=e&&(hi(r),n(a-e))};return et.read(r,!0),()=>hi(r)}function tO(n){window.MotionDebug&&window.MotionDebug.record(n)}function nO(n){return n instanceof SVGElement&&n.tagName!=="svg"}function rO(n,e,t){const r=xn(n)?n:Ra(n);return r.start(Zg("",r,e,t)),r.animation}const q_=["","X","Y","Z"],iO={visibility:"hidden"},W_=1e3;let sO=0;const Hs={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function P1({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(u={},h=e?.()){this.id=sO++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Hs.totalNodes=Hs.resolvedTargetDeltas=Hs.recalculatedProjection=0,this.nodes.forEach(lO),this.nodes.forEach(fO),this.nodes.forEach(pO),this.nodes.forEach(uO),tO(Hs)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new ZM)}addEventListener(u,h){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new ny),this.eventHandlers.get(u).add(h)}notifyListeners(u,...h){const f=this.eventHandlers.get(u);f&&f.notify(...h)}hasListeners(u){return this.eventHandlers.has(u)}mount(u,h=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=nO(u),this.instance=u;const{layoutId:f,layout:m,visualElement:y}=this.options;if(y&&!y.current&&y.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),h&&(m||f)&&(this.isLayoutDirty=!0),n){let _;const E=()=>this.root.updateBlockedByResize=!1;n(u,()=>{this.root.updateBlockedByResize=!0,_&&_(),_=eO(E,250),xh.hasAnimatedSinceResize&&(xh.hasAnimatedSinceResize=!1,this.nodes.forEach(G_))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&y&&(f||m)&&this.addEventListener("didUpdate",({delta:_,hasLayoutChanged:E,hasRelativeTargetChanged:I,layout:R})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const D=this.options.transition||y.getDefaultTransition()||wO,{onLayoutAnimationStart:P,onLayoutAnimationComplete:W}=y.getProps(),q=!this.targetLayout||!S1(this.targetLayout,R)||I,M=!E&&I;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||M||E&&(q||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(_,M);const Q={...Jg(D,"layout"),onPlay:P,onComplete:W};(y.shouldReduceMotion||this.options.layoutRoot)&&(Q.delay=0,Q.type=!1),this.startAnimation(Q)}else E||G_(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=R})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,hi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(mO),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let y=0;y<this.path.length;y++){const _=this.path[y];_.shouldResetTransform=!0,_.updateScroll("snapshot"),_.options.layoutRoot&&_.willUpdate(!1)}const{layoutId:h,layout:f}=this.options;if(h===void 0&&!f)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(H_);return}this.isUpdating||this.nodes.forEach(hO),this.isUpdating=!1,this.nodes.forEach(dO),this.nodes.forEach(oO),this.nodes.forEach(aO),this.clearAllSnapshots();const h=performance.now();Yt.delta=os(0,1e3/60,h-Yt.timestamp),Yt.timestamp=h,Yt.isProcessing=!0,Ep.update.process(Yt),Ep.preRender.process(Yt),Ep.render.process(Yt),Yt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(cO),this.sharedNodes.forEach(gO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,et.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){et.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=xt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let h=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(h=!1),h&&(this.scroll={animationId:this.root.animationId,phase:u,isRoot:r(this.instance),offset:t(this.instance)})}resetTransform(){if(!s)return;const u=this.isLayoutDirty||this.shouldResetTransform,h=this.projectionDelta&&!I1(this.projectionDelta),f=this.getTransformTemplate(),m=f?f(this.latestValues,""):void 0,y=m!==this.prevTransformTemplateValue;u&&(h||Ws(this.latestValues)||y)&&(s(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const h=this.measurePageBox();let f=this.removeElementScroll(h);return u&&(f=this.removeTransform(f)),_O(f),{animationId:this.root.animationId,measuredBox:h,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:u}=this.options;if(!u)return xt();const h=u.measureViewportBox(),{scroll:f}=this.root;return f&&(zi(h.x,f.offset.x),zi(h.y,f.offset.y)),h}removeElementScroll(u){const h=xt();zn(h,u);for(let f=0;f<this.path.length;f++){const m=this.path[f],{scroll:y,options:_}=m;if(m!==this.root&&y&&_.layoutScroll){if(y.isRoot){zn(h,u);const{scroll:E}=this.root;E&&(zi(h.x,-E.offset.x),zi(h.y,-E.offset.y))}zi(h.x,y.offset.x),zi(h.y,y.offset.y)}}return h}applyTransform(u,h=!1){const f=xt();zn(f,u);for(let m=0;m<this.path.length;m++){const y=this.path[m];!h&&y.options.layoutScroll&&y.scroll&&y!==y.root&&va(f,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),Ws(y.latestValues)&&va(f,y.latestValues)}return Ws(this.latestValues)&&va(f,this.latestValues),f}removeTransform(u){const h=xt();zn(h,u);for(let f=0;f<this.path.length;f++){const m=this.path[f];if(!m.instance||!Ws(m.latestValues))continue;Im(m.latestValues)&&m.updateSnapshot();const y=xt(),_=m.measurePageBox();zn(y,_),U_(h,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,y)}return Ws(this.latestValues)&&U_(h,this.latestValues),h}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Yt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var h;const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const m=!!this.resumingFrom||this!==f;if(!(u||m&&this.isSharedProjectionDirty||this.isProjectionDirty||!((h=this.parent)===null||h===void 0)&&h.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:_,layoutId:E}=this.options;if(!(!this.layout||!(_||E))){if(this.resolvedRelativeTargetAt=Yt.timestamp,!this.targetDelta&&!this.relativeTarget){const I=this.getClosestProjectingParent();I&&I.layout&&this.animationProgress!==1?(this.relativeParent=I,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xt(),this.relativeTargetOrigin=xt(),tu(this.relativeTargetOrigin,this.layout.layoutBox,I.layout.layoutBox),zn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=xt(),this.targetWithTransforms=xt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),xM(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):zn(this.target,this.layout.layoutBox),v1(this.target,this.targetDelta)):zn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const I=this.getClosestProjectingParent();I&&!!I.resumingFrom==!!this.resumingFrom&&!I.options.layoutScroll&&I.target&&this.animationProgress!==1?(this.relativeParent=I,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xt(),this.relativeTargetOrigin=xt(),tu(this.relativeTargetOrigin,this.target,I.target),zn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Hs.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Im(this.parent.latestValues)||y1(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var u;const h=this.getLead(),f=!!this.resumingFrom||this!==h;let m=!0;if((this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty)&&(m=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(m=!1),this.resolvedRelativeTargetAt===Yt.timestamp&&(m=!1),m)return;const{layout:y,layoutId:_}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(y||_))return;zn(this.layoutCorrected,this.layout.layoutBox);const E=this.treeScale.x,I=this.treeScale.y;CM(this.layoutCorrected,this.treeScale,this.path,f),h.layout&&!h.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(h.target=h.layout.layoutBox);const{target:R}=h;if(!R){this.projectionTransform&&(this.projectionDelta=ya(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=ya(),this.projectionDeltaWithTransform=ya());const D=this.projectionTransform;eu(this.projectionDelta,this.layoutCorrected,R,this.latestValues),this.projectionTransform=$_(this.projectionDelta,this.treeScale),(this.projectionTransform!==D||this.treeScale.x!==E||this.treeScale.y!==I)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",R)),Hs.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),u){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(u,h=!1){const f=this.snapshot,m=f?f.latestValues:{},y={...this.latestValues},_=ya();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const E=xt(),I=f?f.source:void 0,R=this.layout?this.layout.source:void 0,D=I!==R,P=this.getStack(),W=!P||P.members.length<=1,q=!!(D&&!W&&this.options.crossfade===!0&&!this.path.some(vO));this.animationProgress=0;let M;this.mixTargetDelta=Q=>{const Z=Q/1e3;K_(_.x,u.x,Z),K_(_.y,u.y,Z),this.setTargetDelta(_),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(tu(E,this.layout.layoutBox,this.relativeParent.layout.layoutBox),yO(this.relativeTarget,this.relativeTargetOrigin,E,Z),M&&YM(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=xt()),zn(M,this.relativeTarget)),D&&(this.animationValues=y,qM(y,m,this.latestValues,Z,q,W)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(hi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=et.update(()=>{xh.hasAnimatedSinceResize=!0,this.currentAnimation=rO(0,W_,{...u,onUpdate:h=>{this.mixTargetDelta(h),u.onUpdate&&u.onUpdate(h)},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(W_),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:h,target:f,layout:m,latestValues:y}=u;if(!(!h||!f||!m)){if(this!==u&&this.layout&&m&&A1(this.options.animationType,this.layout.layoutBox,m.layoutBox)){f=this.target||xt();const _=Rn(this.layout.layoutBox.x);f.x.min=u.target.x.min,f.x.max=f.x.min+_;const E=Rn(this.layout.layoutBox.y);f.y.min=u.target.y.min,f.y.max=f.y.min+E}zn(h,f),va(h,y),eu(this.projectionDeltaWithTransform,this.layoutCorrected,h,y)}}registerSharedNode(u,h){this.sharedNodes.has(u)||this.sharedNodes.set(u,new XM),this.sharedNodes.get(u).add(h);const m=h.options.initialPromotionConfig;h.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(h):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var u;const{layoutId:h}=this.options;return h?((u=this.getStack())===null||u===void 0?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:h}=this.options;return h?(u=this.getStack())===null||u===void 0?void 0:u.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:h,preserveFollowOpacity:f}={}){const m=this.getStack();m&&m.promote(this,f),u&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetRotation(){const{visualElement:u}=this.options;if(!u)return;let h=!1;const{latestValues:f}=u;if((f.rotate||f.rotateX||f.rotateY||f.rotateZ)&&(h=!0),!h)return;const m={};for(let y=0;y<q_.length;y++){const _="rotate"+q_[y];f[_]&&(m[_]=f[_],u.setStaticValue(_,0))}u.render();for(const y in m)u.setStaticValue(y,m[y]);u.scheduleRender()}getProjectionStyles(u){var h,f;if(!this.instance||this.isSVG)return;if(!this.isVisible)return iO;const m={visibility:""},y=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,m.opacity="",m.pointerEvents=_h(u?.pointerEvents)||"",m.transform=y?y(this.latestValues,""):"none",m;const _=this.getLead();if(!this.projectionDelta||!this.layout||!_.target){const D={};return this.options.layoutId&&(D.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,D.pointerEvents=_h(u?.pointerEvents)||""),this.hasProjected&&!Ws(this.latestValues)&&(D.transform=y?y({},""):"none",this.hasProjected=!1),D}const E=_.animationValues||_.latestValues;this.applyTransformsToTarget(),m.transform=$_(this.projectionDeltaWithTransform,this.treeScale,E),y&&(m.transform=y(E,m.transform));const{x:I,y:R}=this.projectionDelta;m.transformOrigin=`${I.origin*100}% ${R.origin*100}% 0`,_.animationValues?m.opacity=_===this?(f=(h=E.opacity)!==null&&h!==void 0?h:this.latestValues.opacity)!==null&&f!==void 0?f:1:this.preserveOpacity?this.latestValues.opacity:E.opacityExit:m.opacity=_===this?E.opacity!==void 0?E.opacity:"":E.opacityExit!==void 0?E.opacityExit:0;for(const D in Uh){if(E[D]===void 0)continue;const{correct:P,applyTo:W}=Uh[D],q=m.transform==="none"?E[D]:P(E[D],_);if(W){const M=W.length;for(let Q=0;Q<M;Q++)m[W[Q]]=q}else m[D]=q}return this.options.layoutId&&(m.pointerEvents=_===this?_h(u?.pointerEvents)||"":"none"),m}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var h;return(h=u.currentAnimation)===null||h===void 0?void 0:h.stop()}),this.root.nodes.forEach(H_),this.root.sharedNodes.clear()}}}function oO(n){n.updateLayout()}function aO(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=n.layout,{animationType:a}=n.options,u=t.source!==n.layout.source;a==="size"?$n(_=>{const E=u?t.measuredBox[_]:t.layoutBox[_],I=Rn(E);E.min=r[_].min,E.max=E.min+I}):A1(a,t.layoutBox,r)&&$n(_=>{const E=u?t.measuredBox[_]:t.layoutBox[_],I=Rn(r[_]);E.max=E.min+I,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[_].max=n.relativeTarget[_].min+I)});const h=ya();eu(h,r,t.layoutBox);const f=ya();u?eu(f,n.applyTransform(s,!0),t.measuredBox):eu(f,r,t.layoutBox);const m=!I1(h);let y=!1;if(!n.resumeFrom){const _=n.getClosestProjectingParent();if(_&&!_.resumeFrom){const{snapshot:E,layout:I}=_;if(E&&I){const R=xt();tu(R,t.layoutBox,E.layoutBox);const D=xt();tu(D,r,I.layoutBox),S1(R,D)||(y=!0),_.options.layoutRoot&&(n.relativeTarget=D,n.relativeTargetOrigin=R,n.relativeParent=_)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:f,layoutDelta:h,hasLayoutChanged:m,hasRelativeTargetChanged:y})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function lO(n){Hs.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function uO(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function cO(n){n.clearSnapshot()}function H_(n){n.clearMeasurements()}function hO(n){n.isLayoutDirty=!1}function dO(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function G_(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function fO(n){n.resolveTargetDelta()}function pO(n){n.calcProjection()}function mO(n){n.resetRotation()}function gO(n){n.removeLeadSnapshot()}function K_(n,e,t){n.translate=ct(e.translate,0,t),n.scale=ct(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function Q_(n,e,t,r){n.min=ct(e.min,t.min,r),n.max=ct(e.max,t.max,r)}function yO(n,e,t,r){Q_(n.x,e.x,t.x,r),Q_(n.y,e.y,t.y,r)}function vO(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const wO={duration:.45,ease:[.4,0,.1,1]},Y_=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),X_=Y_("applewebkit/")&&!Y_("chrome/")?Math.round:gt;function J_(n){n.min=X_(n.min),n.max=X_(n.max)}function _O(n){J_(n.x),J_(n.y)}function A1(n,e,t){return n==="position"||n==="preserve-aspect"&&!Em(z_(e),z_(t),.2)}const xO=P1({attachResizeListener:(n,e)=>ri(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Dp={current:void 0},b1=P1({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Dp.current){const n=new xO({});n.mount(window),n.setOptions({layoutScroll:!0}),Dp.current=n}return Dp.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),EO={pan:{Feature:OM},drag:{Feature:MM,ProjectionNode:b1,MeasureLayout:x1}},TO=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function IO(n){const e=TO.exec(n);if(!e)return[,];const[,t,r]=e;return[t,r]}function Pm(n,e,t=1){const[r,s]=IO(n);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const u=a.trim();return c1(u)?parseFloat(u):u}else return mm(s)?Pm(s,e,t+1):s}function SO(n,{...e},t){const r=n.current;if(!(r instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(s=>{const a=s.get();if(!mm(a))return;const u=Pm(a,r);u&&s.set(u)});for(const s in e){const a=e[s];if(!mm(a))continue;const u=Pm(a,r);u&&(e[s]=u,t||(t={}),t[s]===void 0&&(t[s]=a))}return{target:e,transitionEnd:t}}const PO=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),k1=n=>PO.has(n),AO=n=>Object.keys(n).some(k1),Z_=n=>n===go||n===Te,ex=(n,e)=>parseFloat(n.split(", ")[e]),tx=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return ex(s[1],e);{const a=r.match(/^matrix\((.+)\)$/);return a?ex(a[1],n):0}},bO=new Set(["x","y","z"]),kO=Vu.filter(n=>!bO.has(n));function CO(n){const e=[];return kO.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const Na={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:tx(4,13),y:tx(5,14)};Na.translateX=Na.x;Na.translateY=Na.y;const RO=(n,e,t)=>{const r=e.measureViewportBox(),s=e.current,a=getComputedStyle(s),{display:u}=a,h={};u==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(m=>{h[m]=Na[m](r,a)}),e.render();const f=e.measureViewportBox();return t.forEach(m=>{const y=e.getValue(m);y&&y.jump(h[m]),n[m]=Na[m](f,a)}),n},NO=(n,e,t={},r={})=>{e={...e},r={...r};const s=Object.keys(e).filter(k1);let a=[],u=!1;const h=[];if(s.forEach(f=>{const m=n.getValue(f);if(!n.hasValue(f))return;let y=t[f],_=Ml(y);const E=e[f];let I;if(zh(E)){const R=E.length,D=E[0]===null?1:0;y=E[D],_=Ml(y);for(let P=D;P<R&&E[P]!==null;P++)I?Gg(Ml(E[P])===I):I=Ml(E[P])}else I=Ml(E);if(_!==I)if(Z_(_)&&Z_(I)){const R=m.get();typeof R=="string"&&m.set(parseFloat(R)),typeof E=="string"?e[f]=parseFloat(E):Array.isArray(E)&&I===Te&&(e[f]=E.map(parseFloat))}else _?.transform&&I?.transform&&(y===0||E===0)?y===0?m.set(I.transform(y)):e[f]=_.transform(E):(u||(a=CO(n),u=!0),h.push(f),r[f]=r[f]!==void 0?r[f]:e[f],m.jump(E))}),h.length){const f=h.indexOf("height")>=0?window.pageYOffset:null,m=RO(e,n,h);return a.length&&a.forEach(([y,_])=>{n.getValue(y).set(_)}),n.render(),Ed&&f!==null&&window.scrollTo({top:f}),{target:m,transitionEnd:r}}else return{target:e,transitionEnd:r}};function DO(n,e,t,r){return AO(e)?NO(n,e,t,r):{target:e,transitionEnd:r}}const jO=(n,e,t,r)=>{const s=SO(n,e,r);return e=s.target,r=s.transitionEnd,DO(n,e,t,r)},Am={current:null},C1={current:!1};function VO(){if(C1.current=!0,!!Ed)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Am.current=n.matches;n.addListener(e),e()}else Am.current=!1}function LO(n,e,t){const{willChange:r}=e;for(const s in e){const a=e[s],u=t[s];if(xn(a))n.addValue(s,a),Hh(r)&&r.add(s);else if(xn(u))n.addValue(s,Ra(a,{owner:n})),Hh(r)&&r.remove(s);else if(u!==a)if(n.hasValue(s)){const h=n.getValue(s);!h.hasAnimated&&h.set(a)}else{const h=n.getStaticValue(s);n.addValue(s,Ra(h!==void 0?h:a,{owner:n}))}}for(const s in t)e[s]===void 0&&n.removeValue(s);return e}const nx=new WeakMap,R1=Object.keys(yu),MO=R1.length,rx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],OO=Og.length;class FO{constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:s,visualState:a},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>et.render(this.render,!1,!0);const{latestValues:h,renderState:f}=a;this.latestValues=h,this.baseTarget={...h},this.initialValues=t.initial?{...h}:{},this.renderState=f,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=u,this.isControllingVariants=Id(t),this.isVariantNode=mI(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...y}=this.scrapeMotionValuesFromProps(t,{});for(const _ in y){const E=y[_];h[_]!==void 0&&xn(E)&&(E.set(h[_],!1),Hh(m)&&m.add(_))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,nx.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),C1.current||VO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Am.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){nx.delete(this.current),this.projection&&this.projection.unmount(),hi(this.notifyUpdate),hi(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const r=mo.has(e),s=t.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&et.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{s(),a()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},r,s,a){let u,h;for(let f=0;f<MO;f++){const m=R1[f],{isEnabled:y,Feature:_,ProjectionNode:E,MeasureLayout:I}=yu[m];E&&(u=E),y(t)&&(!this.features[m]&&_&&(this.features[m]=new _(this)),I&&(h=I))}if((this.type==="html"||this.type==="svg")&&!this.projection&&u){this.projection=new u(this.latestValues,this.parent&&this.parent.projection);const{layoutId:f,layout:m,drag:y,dragConstraints:_,layoutScroll:E,layoutRoot:I}=t;this.projection.setOptions({layoutId:f,layout:m,alwaysMeasureLayout:!!y||_&&ma(_),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof m=="string"?m:"both",initialPromotionConfig:a,layoutScroll:E,layoutRoot:I})}return h}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):xt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<rx.length;r++){const s=rx[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a=e["on"+s];a&&(this.propEventSubscriptions[s]=this.on(s,a))}this.prevMotionValues=LO(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const t={};for(let r=0;r<OO;r++){const s=Og[r],a=this.props[s];(gu(a)||a===!1)&&(t[s]=a)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Ra(t,{owner:this}),this.addValue(e,r)),r}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(t=Hg(this.props,r))===null||t===void 0?void 0:t[e]:void 0;if(r&&s!==void 0)return s;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!xn(a)?a:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new ny),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class N1 extends FO{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...r},{transformValues:s},a){let u=nM(r,e||{},this);if(s&&(t&&(t=s(t)),r&&(r=s(r)),u&&(u=s(u))),a){eM(this,r,u);const h=jO(this,r,u,t);t=h.transitionEnd,r=h.target}return{transition:e,transitionEnd:t,...r}}}function UO(n){return window.getComputedStyle(n)}class BO extends N1{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(mo.has(t)){const r=Xg(t);return r&&r.default||0}else{const r=UO(e),s=(wI(t)?r.getPropertyValue(t):r[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return w1(e,t)}build(e,t,r,s){Bg(e,t,r,s.transformTemplate)}scrapeMotionValuesFromProps(e,t){return Wg(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;xn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,r,s){SI(e,t,r,s)}}class zO extends N1{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(mo.has(t)){const r=Xg(t);return r&&r.default||0}return t=PI.has(t)?t:Lg(t),e.getAttribute(t)}measureInstanceViewportBox(){return xt()}scrapeMotionValuesFromProps(e,t){return bI(e,t)}build(e,t,r,s){$g(e,t,r,this.isSVGTag,s.transformTemplate)}renderInstance(e,t,r,s){AI(e,t,r,s)}mount(e){this.isSVGTag=qg(e.tagName),super.mount(e)}}const $O=(n,e)=>Ug(n)?new zO(e,{enableHardwareAcceleration:!1}):new BO(e,{enableHardwareAcceleration:!0}),qO={layout:{ProjectionNode:b1,MeasureLayout:x1}},WO={...yM,...MV,...EO,...qO},je=Hj((n,e)=>IV(n,e,WO,$O));function D1(){const n=j.useRef(!1);return Vg(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function HO(){const n=D1(),[e,t]=j.useState(0),r=j.useCallback(()=>{n.current&&t(e+1)},[e]);return[j.useCallback(()=>et.postRender(r),[r]),e]}class GO extends j.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function KO({children:n,isPresent:e}){const t=j.useId(),r=j.useRef(null),s=j.useRef({width:0,height:0,top:0,left:0});return j.useInsertionEffect(()=>{const{width:a,height:u,top:h,left:f}=s.current;if(e||!r.current||!a||!u)return;r.current.dataset.motionPopId=t;const m=document.createElement("style");return document.head.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${u}px !important;
            top: ${h}px !important;
            left: ${f}px !important;
          }
        `),()=>{document.head.removeChild(m)}},[e]),j.createElement(GO,{isPresent:e,childRef:r,sizeRef:s},j.cloneElement(n,{ref:r}))}const jp=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:s,presenceAffectsLayout:a,mode:u})=>{const h=kI(QO),f=j.useId(),m=j.useMemo(()=>({id:f,initial:e,isPresent:t,custom:s,onExitComplete:y=>{h.set(y,!0);for(const _ of h.values())if(!_)return;r&&r()},register:y=>(h.set(y,!1),()=>h.delete(y))}),a?void 0:[t]);return j.useMemo(()=>{h.forEach((y,_)=>h.set(_,!1))},[t]),j.useEffect(()=>{!t&&!h.size&&r&&r()},[t]),u==="popLayout"&&(n=j.createElement(KO,{isPresent:t},n)),j.createElement(xd.Provider,{value:m},n)};function QO(){return new Map}function YO(n){return j.useEffect(()=>()=>n(),[])}const Gs=n=>n.key||"";function XO(n,e){n.forEach(t=>{const r=Gs(t);e.set(r,t)})}function JO(n){const e=[];return j.Children.forEach(n,t=>{j.isValidElement(t)&&e.push(t)}),e}const ZO=({children:n,custom:e,initial:t=!0,onExitComplete:r,exitBeforeEnter:s,presenceAffectsLayout:a=!0,mode:u="sync"})=>{const h=j.useContext(Fg).forceRender||HO()[0],f=D1(),m=JO(n);let y=m;const _=j.useRef(new Map).current,E=j.useRef(y),I=j.useRef(new Map).current,R=j.useRef(!0);if(Vg(()=>{R.current=!1,XO(m,I),E.current=y}),YO(()=>{R.current=!0,I.clear(),_.clear()}),R.current)return j.createElement(j.Fragment,null,y.map(q=>j.createElement(jp,{key:Gs(q),isPresent:!0,initial:t?void 0:!1,presenceAffectsLayout:a,mode:u},q)));y=[...y];const D=E.current.map(Gs),P=m.map(Gs),W=D.length;for(let q=0;q<W;q++){const M=D[q];P.indexOf(M)===-1&&!_.has(M)&&_.set(M,void 0)}return u==="wait"&&_.size&&(y=[]),_.forEach((q,M)=>{if(P.indexOf(M)!==-1)return;const Q=I.get(M);if(!Q)return;const Z=D.indexOf(M);let ie=q;if(!ie){const N=()=>{_.delete(M);const A=Array.from(I.keys()).filter(k=>!P.includes(k));if(A.forEach(k=>I.delete(k)),E.current=m.filter(k=>{const V=Gs(k);return V===M||A.includes(V)}),!_.size){if(f.current===!1)return;h(),r&&r()}};ie=j.createElement(jp,{key:Gs(Q),isPresent:!1,onExitComplete:N,custom:e,presenceAffectsLayout:a,mode:u},Q),_.set(M,ie)}y.splice(Z,0,ie)}),y=y.map(q=>{const M=q.key;return _.has(M)?q:j.createElement(jp,{key:Gs(q),isPresent:!0,presenceAffectsLayout:a,mode:u},q)}),j.createElement(j.Fragment,null,_.size?y:y.map(q=>j.cloneElement(q)))},e4=()=>{const[n,e]=j.useState(!1),[t,r]=j.useState(""),{currentUser:s,userProfile:a,logout:u}=pi(),h=fi(),f=async()=>{try{await u(),h("/")}catch(y){console.error("Failed to log out:",y)}},m=y=>{y.preventDefault(),t.trim()&&h(`/search?q=${encodeURIComponent(t.trim())}`)};return p.jsxs("nav",{className:"bg-nothing-black border-b border-nothing-gray-800 sticky top-0 z-50",children:[p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[p.jsxs("div",{className:"flex justify-between items-center h-16",children:[p.jsx("div",{className:"flex-shrink-0",children:p.jsxs(Ge,{to:"/",className:"flex items-center space-x-2",children:[p.jsx("div",{className:"w-8 h-8 bg-nothing-red rounded-full flex items-center justify-center",children:p.jsx("div",{className:"w-4 h-4 bg-nothing-white rounded-full animate-glow"})}),p.jsx("span",{className:"text-xl font-bold text-nothing-white font-nothing",children:"GlyphMart"})]})}),p.jsx("div",{className:"hidden md:block flex-1 max-w-lg mx-8",children:p.jsxs("form",{onSubmit:m,className:"relative",children:[p.jsx("input",{type:"text",value:t,onChange:y=>r(y.target.value),placeholder:"Search glyphs...",className:"w-full bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg py-2 pl-10 pr-4 text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200"}),p.jsx(Ks,{className:"absolute left-3 top-2.5 h-5 w-5 text-nothing-gray-400"})]})}),p.jsx("div",{className:"hidden md:flex items-center space-x-4",children:s?p.jsxs(p.Fragment,{children:[p.jsxs(Ge,{to:"/upload",className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center space-x-2",children:[p.jsx(cI,{className:"h-4 w-4"}),p.jsx("span",{children:"Upload Glyph"})]}),p.jsxs("div",{className:"relative group",children:[p.jsxs("button",{className:"flex items-center space-x-2 text-nothing-white hover:text-nothing-gray-300 transition-colors duration-200",children:[p.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden border border-nothing-gray-600",children:a?.profilePicture||s.photoURL?p.jsx("img",{src:a?.profilePicture||s.photoURL,alt:"Profile",className:"w-full h-full object-cover"}):p.jsx("div",{className:"w-full h-full bg-nothing-gray-700 flex items-center justify-center",children:p.jsx(es,{className:"h-4 w-4"})})}),p.jsx("span",{className:"font-medium",children:a?.username||s.displayName})]}),p.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200",children:p.jsxs("div",{className:"py-1",children:[p.jsxs(Ge,{to:`/storefront/${a?.username||s.displayName}`,className:"block px-4 py-2 text-sm text-nothing-white hover:bg-nothing-gray-800 transition-colors duration-200 flex items-center space-x-2",children:[p.jsx(Zw,{className:"h-4 w-4"}),p.jsx("span",{children:"My Storefront"})]}),p.jsxs(Ge,{to:"/liked",className:"block px-4 py-2 text-sm text-nothing-white hover:bg-nothing-gray-800 transition-colors duration-200 flex items-center space-x-2",children:[p.jsx(Hn,{className:"h-4 w-4"}),p.jsx("span",{children:"Liked Posts"})]}),p.jsxs(Ge,{to:"/settings",className:"block px-4 py-2 text-sm text-nothing-white hover:bg-nothing-gray-800 transition-colors duration-200 flex items-center space-x-2",children:[p.jsx(pm,{className:"h-4 w-4"}),p.jsx("span",{children:"Settings"})]}),p.jsxs("button",{onClick:f,className:"w-full text-left block px-4 py-2 text-sm text-nothing-white hover:bg-nothing-gray-800 transition-colors duration-200 flex items-center space-x-2",children:[p.jsx(Xw,{className:"h-4 w-4"}),p.jsx("span",{children:"Logout"})]})]})})]})]}):p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsx(Ge,{to:"/login",className:"text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200",children:"Login"}),p.jsx(Ge,{to:"/signup",className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",children:"Sign Up"})]})}),p.jsx("div",{className:"md:hidden",children:p.jsx("button",{onClick:()=>e(!n),className:"text-nothing-white hover:text-nothing-gray-300 transition-colors duration-200",children:n?p.jsx(hI,{className:"h-6 w-6"}):p.jsx(jj,{className:"h-6 w-6"})})})]}),p.jsx("div",{className:"md:hidden pb-4",children:p.jsxs("form",{onSubmit:m,className:"relative",children:[p.jsx("input",{type:"text",value:t,onChange:y=>r(y.target.value),placeholder:"Search glyphs...",className:"w-full bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg py-2 pl-10 pr-4 text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200"}),p.jsx(Ks,{className:"absolute left-3 top-2.5 h-5 w-5 text-nothing-gray-400"})]})})]}),p.jsx(ZO,{children:n&&p.jsx(je.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden bg-nothing-gray-900 border-t border-nothing-gray-800",children:p.jsx("div",{className:"px-4 py-4 space-y-4",children:s?p.jsxs(p.Fragment,{children:[p.jsx(Ge,{to:"/upload",className:"block bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 text-center",onClick:()=>e(!1),children:"Upload Glyph"}),p.jsxs(Ge,{to:`/storefront/${a?.username||s.displayName}`,className:"block text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200 flex items-center space-x-2",onClick:()=>e(!1),children:[p.jsx(Zw,{className:"h-4 w-4"}),p.jsx("span",{children:"My Storefront"})]}),p.jsxs(Ge,{to:"/liked",className:"block text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200 flex items-center space-x-2",onClick:()=>e(!1),children:[p.jsx(Hn,{className:"h-4 w-4"}),p.jsx("span",{children:"Liked Posts"})]}),p.jsxs(Ge,{to:"/settings",className:"block text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200 flex items-center space-x-2",onClick:()=>e(!1),children:[p.jsx(pm,{className:"h-4 w-4"}),p.jsx("span",{children:"Settings"})]}),p.jsxs("button",{onClick:()=>{f(),e(!1)},className:"block w-full text-left text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200 flex items-center space-x-2",children:[p.jsx(Xw,{className:"h-4 w-4"}),p.jsx("span",{children:"Logout"})]})]}):p.jsxs(p.Fragment,{children:[p.jsx(Ge,{to:"/login",className:"block text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200",onClick:()=>e(!1),children:"Login"}),p.jsx(Ge,{to:"/signup",className:"block bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 text-center",onClick:()=>e(!1),children:"Sign Up"})]})})})})]})},j1=async n=>{try{const e=vn(Vt(Le,"glyphDownloads"),wn("glyphId","==",n));return(await Zt(e)).size}catch(e){return console.error("Error getting download count:",e),0}},V1=async()=>{try{return(await(await fetch("https://api.ipify.org?format=json")).json()).ip}catch(n){return console.error("Error getting IP:",n),`fallback_${Math.random().toString(36).substr(2,9)}`}},t4=async(n,e)=>{try{return(await Du(Tt(Le,"glyphViews",`${n}_${e}`))).exists()}catch(t){return console.error("Error checking view status:",t),!1}},n4=async(n,e)=>{try{return(await Du(Tt(Le,"glyphDownloads",`${n}_${e}`))).exists()}catch(t){return console.error("Error checking download status:",t),!1}},r4=async n=>{try{const e=await V1(),t=`${n}_${e}`;return await t4(n,e)?!1:(await yd(Tt(Le,"glyphViews",t),{glyphId:n,userIP:e,viewedAt:new Date}),await oo(Tt(Le,"glyphs",n),{views:mu(1)}),!0)}catch(e){return console.error("Error recording view:",e),!1}},ix=async n=>{try{const e=await V1(),t=`${n}_${e}`;return await n4(n,e)?!1:(await yd(Tt(Le,"glyphDownloads",t),{glyphId:n,userIP:e,downloadedAt:new Date}),await oo(Tt(Le,"glyphs",n),{downloads:mu(1)}),!0)}catch(e){return console.error("Error recording download:",e),!1}},L1=async n=>{try{const e=vn(Vt(Le,"glyphViews"),wn("glyphId","==",n));return(await Zt(e)).size}catch(e){return console.error("Error getting view count:",e),0}},i4=()=>{const[n,e]=j.useState([]),[t,r]=j.useState([]),[s,a]=j.useState(!0),[u,h]=j.useState("latest");j.useEffect(()=>{(async()=>{try{const y=vn(Vt(Le,"glyphs"),da("createdAt","desc"),fa(12)),E=(await Zt(y)).docs.map(P=>({id:P.id,...P.data()})),I=vn(Vt(Le,"glyphs"),da("downloads","desc"),fa(12)),D=(await Zt(I)).docs.map(P=>({id:P.id,...P.data()}));e(E),r(D)}catch(y){console.error("Error fetching glyphs:",y)}finally{a(!1)}})()},[]);const f=({glyph:m})=>{const[y,_]=j.useState(null),[E,I]=j.useState(null);return j.useEffect(()=>{let R=!0;return L1(m.id).then(D=>{R&&_(D)}),j1(m.id).then(D=>{R&&I(D)}),()=>{R=!1}},[m.id]),p.jsx(je.div,{whileHover:{y:-5},className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg overflow-hidden hover:border-nothing-gray-700 transition-all duration-300",children:p.jsxs(Ge,{to:`/glyph/${m.id}`,children:[p.jsxs("div",{className:"aspect-square bg-nothing-gray-800 relative overflow-hidden",children:[m.images&&m.images.length>0?p.jsx("img",{src:m.images[0],alt:m.title,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"}):p.jsx("div",{className:"w-full h-full flex items-center justify-center",children:p.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center glyph-animation",children:p.jsx(ur,{className:"h-8 w-8 text-nothing-white"})})}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-nothing-black/80 via-transparent to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300",children:p.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:p.jsxs("div",{className:"flex items-center justify-between text-nothing-white text-sm",children:[p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Nr,{className:"h-4 w-4"}),p.jsx("span",{children:E!==null?E:m.downloads||0})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Hn,{className:"h-4 w-4"}),p.jsx("span",{children:m.likes||0})]})]})})})]}),p.jsxs("div",{className:"p-4",children:[p.jsx("h3",{className:"text-nothing-white font-semibold text-lg mb-2 truncate",children:m.title}),p.jsx("p",{className:"text-nothing-gray-400 text-sm mb-3 line-clamp-2",children:m.description}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs(Ge,{to:`/storefront/${m.creatorUsername}`,className:"text-nothing-red hover:text-red-400 text-sm font-medium transition-colors duration-200",children:["@",m.creatorUsername]}),p.jsxs("div",{className:"flex items-center space-x-4 text-nothing-gray-500 text-sm",children:[p.jsxs("div",{className:"flex items-center space-x-1",children:[p.jsx(Nr,{className:"h-3 w-3"}),p.jsx("span",{children:E!==null?E:m.downloads||0})]}),p.jsxs("div",{className:"flex items-center space-x-1",children:[p.jsx(Wn,{className:"h-3 w-3"}),p.jsx("span",{children:y!==null?y:m.views||0})]})]})]})]})]})})};return s?p.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-4 glyph-animation",children:p.jsx(ur,{className:"h-8 w-8 text-nothing-white"})}),p.jsx("p",{className:"text-nothing-gray-400",children:"Loading latest glyphs..."})]})}):p.jsxs("div",{className:"min-h-screen bg-nothing-black",children:[p.jsxs("section",{className:"relative py-20 px-4 sm:px-6 lg:px-8",children:[p.jsx("div",{className:"max-w-7xl mx-auto text-center",children:p.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:[p.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-nothing-white mb-6 font-nothing",children:["Glyph",p.jsx("span",{className:"text-nothing-red",children:"Mart"})]}),p.jsx("p",{className:"text-xl md:text-2xl text-nothing-gray-300 mb-8 max-w-3xl mx-auto",children:"Discover, share, and download custom Nothing Phone(3) glyphs created by the community"}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[p.jsx(Ge,{to:"/browse",className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-8 py-3 rounded-lg font-semibold text-lg transition-colors duration-200",children:"Browse Glyphs"}),p.jsx(Ge,{to:"/upload",className:"border border-nothing-gray-700 hover:border-nothing-gray-600 text-nothing-white px-8 py-3 rounded-lg font-semibold text-lg transition-colors duration-200",children:"Upload Your Glyph"})]})]})}),p.jsx("div",{className:"absolute top-1/2 left-1/4 transform -translate-y-1/2 opacity-20",children:p.jsx("div",{className:"w-20 h-20 bg-nothing-red rounded-full flex items-center justify-center animate-float",children:p.jsx(ur,{className:"h-10 w-10 text-nothing-white"})})}),p.jsx("div",{className:"absolute top-1/3 right-1/4 transform -translate-y-1/2 opacity-10",children:p.jsx("div",{className:"w-16 h-16 bg-nothing-white rounded-full flex items-center justify-center animate-float",style:{animationDelay:"1s"},children:p.jsx(ur,{className:"h-8 w-8 text-nothing-black"})})})]}),p.jsx("section",{className:"px-4 sm:px-6 lg:px-8 mb-8",children:p.jsx("div",{className:"max-w-7xl mx-auto",children:p.jsxs("div",{className:"flex space-x-4 border-b border-nothing-gray-800",children:[p.jsxs("button",{onClick:()=>h("latest"),className:`flex items-center space-x-2 px-4 py-3 font-medium border-b-2 transition-colors duration-200 ${u==="latest"?"border-nothing-red text-nothing-red":"border-transparent text-nothing-gray-400 hover:text-nothing-white"}`,children:[p.jsx(Aj,{className:"h-4 w-4"}),p.jsx("span",{children:"Latest"})]}),p.jsxs("button",{onClick:()=>h("popular"),className:`flex items-center space-x-2 px-4 py-3 font-medium border-b-2 transition-colors duration-200 ${u==="popular"?"border-nothing-red text-nothing-red":"border-transparent text-nothing-gray-400 hover:text-nothing-white"}`,children:[p.jsx(Lj,{className:"h-4 w-4"}),p.jsx("span",{children:"Popular"})]})]})})}),p.jsx("section",{className:"px-4 sm:px-6 lg:px-8 pb-20",children:p.jsxs("div",{className:"max-w-7xl mx-auto",children:[p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:(u==="latest"?n:t).map((m,y)=>p.jsx(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:y*.1},children:p.jsx(f,{glyph:m})},m.id))}),(u==="latest"?n:t).length===0&&p.jsxs("div",{className:"text-center py-12",children:[p.jsx("div",{className:"w-16 h-16 bg-nothing-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:p.jsx(ur,{className:"h-8 w-8 text-nothing-gray-600"})}),p.jsx("p",{className:"text-nothing-gray-400 text-lg",children:"No glyphs found"}),p.jsx("p",{className:"text-nothing-gray-500 text-sm mt-2",children:"Be the first to share your custom Nothing Phone(3) glyph!"})]})]})})]})},s4=()=>{const[n,e]=j.useState({email:"",password:""}),[t,r]=j.useState(!1),[s,a]=j.useState(!1),[u,h]=j.useState(""),{signin:f}=pi(),m=fi(),y=E=>{e({...n,[E.target.name]:E.target.value}),h("")},_=async E=>{E.preventDefault(),a(!0),h("");try{await f(n.email,n.password),m("/")}catch(I){switch(console.error("Login error:",I),I.code){case"auth/user-not-found":h("No account found with this email address.");break;case"auth/wrong-password":h("Incorrect password.");break;case"auth/invalid-email":h("Invalid email address.");break;case"auth/too-many-requests":h("Too many failed attempts. Please try again later.");break;default:h("Failed to sign in. Please try again.")}}finally{a(!1)}};return p.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"max-w-md w-full space-y-8",children:[p.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center",children:[p.jsx("div",{className:"flex justify-center mb-6",children:p.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center glyph-animation",children:p.jsx(ur,{className:"h-8 w-8 text-nothing-white"})})}),p.jsx("h2",{className:"text-3xl font-bold text-nothing-white font-nothing",children:"Welcome back"}),p.jsx("p",{className:"mt-2 text-nothing-gray-400",children:"Sign in to your GlyphMart account"})]}),p.jsxs(je.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"mt-8 space-y-6",onSubmit:_,children:[p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:p.jsx(jg,{className:"h-5 w-5 text-nothing-gray-400"})}),p.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n.email,onChange:y,className:"appearance-none relative block w-full px-10 py-3 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Email address"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:p.jsx(Gi,{className:"h-5 w-5 text-nothing-gray-400"})}),p.jsx("input",{id:"password",name:"password",type:t?"text":"password",autoComplete:"current-password",required:!0,value:n.password,onChange:y,className:"appearance-none relative block w-full px-10 py-3 pr-10 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Password"}),p.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>r(!t),children:t?p.jsx(Ta,{className:"h-5 w-5 text-nothing-gray-400 hover:text-nothing-gray-300"}):p.jsx(Wn,{className:"h-5 w-5 text-nothing-gray-400 hover:text-nothing-gray-300"})})]})]})]}),u&&p.jsx(je.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-900/20 border border-red-700 text-red-400 px-4 py-3 rounded-lg text-sm",children:u}),p.jsx("div",{className:"flex items-center justify-between",children:p.jsx("div",{className:"text-sm",children:p.jsx(Ge,{to:"/forgot-password",className:"text-nothing-red hover:text-red-400 transition-colors duration-200",children:"Forgot your password?"})})}),p.jsx("div",{children:p.jsx("button",{type:"submit",disabled:s,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-nothing-white bg-nothing-red hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nothing-red disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:s?p.jsxs("div",{className:"flex items-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-nothing-white mr-2"}),"Signing in..."]}):"Sign in"})}),p.jsx("div",{className:"text-center",children:p.jsxs("p",{className:"text-nothing-gray-400",children:["Don't have an account?"," ",p.jsx(Ge,{to:"/signup",className:"text-nothing-red hover:text-red-400 font-medium transition-colors duration-200",children:"Sign up"})]})})]})]})})},o4=()=>{const[n,e]=j.useState({email:"",username:"",displayName:"",password:"",confirmPassword:""}),[t,r]=j.useState(!1),[s,a]=j.useState(!1),[u,h]=j.useState(!1),[f,m]=j.useState(""),{signup:y}=pi(),_=fi(),E=D=>{e({...n,[D.target.name]:D.target.value}),m("")},I=()=>n.password!==n.confirmPassword?(m("Passwords do not match"),!1):n.password.length<6?(m("Password must be at least 6 characters long"),!1):n.username.length<3?(m("Username must be at least 3 characters long"),!1):/^[a-zA-Z0-9_]+$/.test(n.username)?!0:(m("Username can only contain letters, numbers, and underscores"),!1),R=async D=>{if(D.preventDefault(),h(!0),m(""),!I()){h(!1);return}try{await y(n.email,n.password,n.username,n.displayName),_("/")}catch(P){switch(console.error("Signup error:",P),P.code){case"auth/email-already-in-use":m("An account with this email already exists.");break;case"auth/invalid-email":m("Invalid email address.");break;case"auth/weak-password":m("Password is too weak.");break;default:m("Failed to create account. Please try again.")}}finally{h(!1)}};return p.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center px-4 sm:px-6 lg:px-8 py-12",children:p.jsxs("div",{className:"max-w-md w-full space-y-8",children:[p.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center",children:[p.jsx("div",{className:"flex justify-center mb-6",children:p.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center glyph-animation",children:p.jsx(ur,{className:"h-8 w-8 text-nothing-white"})})}),p.jsx("h2",{className:"text-3xl font-bold text-nothing-white font-nothing",children:"Join GlyphMart"}),p.jsx("p",{className:"mt-2 text-nothing-gray-400",children:"Create your account and start sharing glyphs"})]}),p.jsxs(je.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"mt-8 space-y-6",onSubmit:R,children:[p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:p.jsx(jg,{className:"h-5 w-5 text-nothing-gray-400"})}),p.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n.email,onChange:E,className:"appearance-none relative block w-full px-10 py-3 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Email address"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"username",className:"sr-only",children:"Username"}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:p.jsx(Ij,{className:"h-5 w-5 text-nothing-gray-400"})}),p.jsx("input",{id:"username",name:"username",type:"text",autoComplete:"username",required:!0,value:n.username,onChange:E,className:"appearance-none relative block w-full px-10 py-3 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Username"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"displayName",className:"sr-only",children:"Display Name"}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:p.jsx(es,{className:"h-5 w-5 text-nothing-gray-400"})}),p.jsx("input",{id:"displayName",name:"displayName",type:"text",autoComplete:"name",required:!0,value:n.displayName,onChange:E,className:"appearance-none relative block w-full px-10 py-3 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Display Name"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:p.jsx(Gi,{className:"h-5 w-5 text-nothing-gray-400"})}),p.jsx("input",{id:"password",name:"password",type:t?"text":"password",autoComplete:"new-password",required:!0,value:n.password,onChange:E,className:"appearance-none relative block w-full px-10 py-3 pr-10 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Password"}),p.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>r(!t),children:t?p.jsx(Ta,{className:"h-5 w-5 text-nothing-gray-400 hover:text-nothing-gray-300"}):p.jsx(Wn,{className:"h-5 w-5 text-nothing-gray-400 hover:text-nothing-gray-300"})})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"confirmPassword",className:"sr-only",children:"Confirm Password"}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:p.jsx(Gi,{className:"h-5 w-5 text-nothing-gray-400"})}),p.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:s?"text":"password",autoComplete:"new-password",required:!0,value:n.confirmPassword,onChange:E,className:"appearance-none relative block w-full px-10 py-3 pr-10 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Confirm Password"}),p.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>a(!s),children:s?p.jsx(Ta,{className:"h-5 w-5 text-nothing-gray-400 hover:text-nothing-gray-300"}):p.jsx(Wn,{className:"h-5 w-5 text-nothing-gray-400 hover:text-nothing-gray-300"})})]})]})]}),f&&p.jsx(je.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-900/20 border border-red-700 text-red-400 px-4 py-3 rounded-lg text-sm",children:f}),p.jsx("div",{children:p.jsx("button",{type:"submit",disabled:u,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-nothing-white bg-nothing-red hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nothing-red disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:u?p.jsxs("div",{className:"flex items-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-nothing-white mr-2"}),"Creating account..."]}):"Create Account"})}),p.jsx("div",{className:"text-center",children:p.jsxs("p",{className:"text-nothing-gray-400",children:["Already have an account?"," ",p.jsx(Ge,{to:"/login",className:"text-nothing-red hover:text-red-400 font-medium transition-colors duration-200",children:"Sign in"})]})})]})]})})},a4=async(n,e)=>{if(!e)return!1;try{const t=vn(Vt(Le,"glyphLikes"),wn("glyphId","==",n),wn("userId","==",e));return!(await Zt(t)).empty}catch(t){return console.error("Error checking like status:",t),!1}},l4=async(n,e)=>{if(!e)return!1;try{const t=vn(Vt(Le,"glyphLikes"),wn("glyphId","==",n),wn("userId","==",e)),r=await Zt(t);if(r.empty){const s=Tt(Vt(Le,"glyphLikes"));return await yd(s,{glyphId:n,userId:e,likedAt:new Date}),await oo(Tt(Le,"glyphs",n),{likes:mu(1)}),!0}else{const s=r.docs[0].id;return await pa(Tt(Le,"glyphLikes",s)),await oo(Tt(Le,"glyphs",n),{likes:mu(-1)}),!1}}catch(t){return console.error("Error toggling like:",t),!1}},u4=async n=>{if(!n)return[];try{const e=vn(Vt(Le,"glyphLikes"),wn("userId","==",n)),r=(await Zt(e)).docs.map(u=>u.data().glyphId);if(r.length===0)return[];const s=[];for(const u of r)try{const h=await Du(Tt(Le,"glyphs",u));h.exists()&&s.push({id:h.id,...h.data()})}catch(h){console.error(`Error fetching glyph ${u}:`,h)}return s.sort((u,h)=>{const f=u.createdAt||new Date(0),m=h.createdAt||new Date(0);return new Date(m)-new Date(f)})}catch(e){return console.error("Error getting user liked glyphs:",e),[]}},c4=()=>{const{id:n}=fx(),[e,t]=j.useState(null),[r,s]=j.useState(!0),[a,u]=j.useState(!1),[h,f]=j.useState(!1),[m,y]=j.useState(null),[_,E]=j.useState(null),[I,R]=j.useState(!1),[D,P]=j.useState(!1),{currentUser:W,userProfile:q}=pi(),[M,Q]=j.useState(!1),[Z,ie]=j.useState(null),[N,A]=j.useState(!1),[k,V]=j.useState(""),[U,B]=j.useState(!1),[b,he]=j.useState(!1),Ke=fi();j.useEffect(()=>{n&&(async()=>{try{const le=await Du(Tt(Le,"glyphs",n));if(le.exists()){const we={id:le.id,...le.data()};t(we),await r4(n);const Pe=await L1(n);y(Pe);const Ne=await j1(n);if(E(Ne),W){const Ve=await a4(n,W.uid);f(Ve)}}else Ke("/404")}catch(le){console.error("Error fetching glyph:",le)}finally{s(!1)}})()},[n,Ke,W]);const Re=async()=>{if(!(!e.apkUrl&&!e.githubUrl)){if(e.apkUrl)P(!0);else if(e.githubUrl){window.open(e.githubUrl,"_blank");try{await ix(n)&&t(le=>({...le,downloads:(le.downloads||0)+1}))}catch(re){console.error("Error updating download count:",re)}}}},Ce=async()=>{u(!0);try{const re=await ix(n),le=document.createElement("a");le.href=e.apkUrl,le.download=`${e.title.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.apk`,document.body.appendChild(le),le.click(),document.body.removeChild(le),re&&t(we=>({...we,downloads:(we.downloads||0)+1}))}catch(re){console.error("Error downloading glyph:",re)}finally{u(!1),P(!1)}},oe=async()=>{if(!W||I){W||Ke("/login");return}R(!0);try{const re=h,le=await l4(n,W.uid);f(le),t(we=>({...we,likes:(we.likes||0)+(re&&!le?-1:!re&&le?1:0)}))}catch(re){console.error("Error liking glyph:",re)}finally{R(!1)}},pe=async()=>{const re=window.location.href;if(navigator.share)try{await navigator.share({title:e.title,text:e.description,url:re})}catch(le){console.error("Error sharing:",le),ue(re)}else ue(re)},ue=async re=>{try{await navigator.clipboard.writeText(re),alert("Link copied to clipboard!")}catch(le){console.error("Error copying to clipboard:",le)}};j.useEffect(()=>{M&&e&&ie({title:e.title,description:e.description,apkUrl:e.apkUrl||"",githubUrl:e.githubUrl||"",instructions:e.instructions||"",images:e.images||[]})},[M,e]);const O=re=>{const{name:le,value:we}=re.target;ie(Pe=>({...Pe,[le]:we})),V("")},Y=async re=>{re.preventDefault(),A(!0),V("");try{await oo(Tt(Le,"glyphs",e.id),{title:Z.title,description:Z.description,apkUrl:Z.apkUrl,githubUrl:Z.githubUrl,instructions:Z.instructions,images:Z.images}),Q(!1),t(le=>({...le,...Z}))}catch(le){V("Failed to update glyph: "+le.message)}finally{A(!1)}};return r?p.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-4 glyph-animation",children:p.jsx("div",{className:"w-8 h-8 bg-nothing-white rounded-full"})}),p.jsx("p",{className:"text-nothing-gray-400",children:"Loading glyph..."})]})}):e?e.deleted?p.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("h1",{className:"text-2xl font-bold text-red-500 mb-4",children:"Glyph Deleted"}),p.jsx("p",{className:"text-nothing-gray-400 mb-6",children:"This glyph has been deleted by its creator and is no longer available."}),p.jsx(Ge,{to:"/",className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-6 py-3 rounded-lg font-medium transition-colors duration-200",children:"Return to home"})]})}):p.jsxs("div",{className:"min-h-screen bg-nothing-black",children:[p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[p.jsxs("div",{className:"space-y-4",children:[p.jsx(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"aspect-square bg-nothing-gray-900 rounded-lg overflow-hidden",children:e.images&&e.images.length>0?p.jsx("img",{src:e.images[0],alt:e.title,className:"w-full h-full object-cover"}):p.jsx("div",{className:"w-full h-full flex items-center justify-center",children:p.jsx("div",{className:"w-24 h-24 bg-nothing-red rounded-full flex items-center justify-center glyph-animation",children:p.jsx("div",{className:"w-12 h-12 bg-nothing-white rounded-full"})})})}),q&&e.creatorUsername===q.username&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex space-x-3 mt-6",children:[p.jsx("button",{type:"button",onClick:()=>Q(!0),className:"px-6 py-3 bg-nothing-gray-700 hover:bg-nothing-gray-800 text-nothing-white rounded-lg font-medium transition-colors duration-200",children:"Edit Glyph"}),p.jsx("button",{type:"button",onClick:()=>B(!0),className:"px-6 py-3 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200",children:"Delete Glyph"})]}),U&&p.jsx("div",{className:"fixed inset-0 bg-nothing-black/80 flex items-center justify-center z-50 p-4",children:p.jsxs(je.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6 max-w-md w-full",children:[p.jsxs("div",{className:"text-center mb-6",children:[p.jsx("h2",{className:"text-2xl font-bold text-nothing-white mb-4",children:"Delete Glyph?"}),p.jsx("p",{className:"text-nothing-gray-300 mb-4",children:"Are you sure you want to permanently delete this glyph and all its related data? This action cannot be undone."})]}),p.jsxs("div",{className:"flex space-x-3",children:[p.jsx("button",{onClick:async()=>{if(!b){he(!0);try{await pa(Tt(Le,"glyphs",e.id));const re=vn(Vt(Le,"likes"),wn("glyphId","==",e.id)),le=await Zt(re);for(const Me of le.docs)await pa(Me.ref);const we=vn(Vt(Le,"glyphViews"),wn("glyphId","==",e.id)),Pe=await Zt(we);for(const Me of Pe.docs)await pa(Me.ref);const Ne=vn(Vt(Le,"glyphDownloads"),wn("glyphId","==",e.id)),Ve=await Zt(Ne);for(const Me of Ve.docs)await pa(Me.ref)}finally{he(!1),B(!1),Ke("/")}}},disabled:b,className:"flex-1 bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50",children:b?"Deleting...":"Yes, Delete"}),p.jsx("button",{onClick:()=>B(!1),disabled:b,className:"px-4 py-2 border border-nothing-gray-700 text-nothing-white hover:border-nothing-gray-600 rounded-lg font-medium transition-colors duration-200",children:"Cancel"})]})]})})]})]}),p.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-3xl font-bold text-nothing-white mb-4 font-nothing",children:e.title}),p.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[p.jsxs(Ge,{to:`/storefront/${e.creatorUsername||e.creatorId}`,className:"flex items-center space-x-2 text-nothing-red hover:text-red-400 transition-colors duration-200",children:[p.jsx(es,{className:"h-4 w-4"}),p.jsxs("span",{className:"font-medium",children:["@",e.creatorUsername||e.creatorId]})]}),p.jsxs("div",{className:"flex items-center space-x-1 text-nothing-gray-400",children:[p.jsx(Dg,{className:"h-4 w-4"}),p.jsx("span",{className:"text-sm",children:e.createdAt?.toDate?.()?.toLocaleDateString()||"Unknown date"})]})]}),p.jsx("p",{className:"text-nothing-gray-300 text-lg leading-relaxed mb-6",children:e.description})]}),p.jsxs("div",{className:"flex items-center space-x-6 py-4 border-y border-nothing-gray-800",children:[p.jsxs("div",{className:"flex items-center space-x-2 text-nothing-gray-400",children:[p.jsx(Nr,{className:"h-5 w-5"}),p.jsx("span",{children:(()=>{const re=_!==null?_:e.downloads||0;return`${re} ${re===1?"download":"downloads"}`})()})]}),p.jsxs("div",{className:"flex items-center space-x-2 text-nothing-gray-400",children:[p.jsx(Wn,{className:"h-5 w-5"}),p.jsx("span",{children:(()=>{const re=m!==null?m:e.views||0;return`${re} ${re===1?"view":"views"}`})()})]}),p.jsxs("div",{className:"flex items-center space-x-2 text-nothing-gray-400",children:[p.jsx(Hn,{className:"h-5 w-5"}),p.jsx("span",{children:(()=>{const re=e.likes||0;return`${re} ${re===1?"like":"likes"}`})()})]})]}),p.jsxs("div",{className:"flex space-x-4",children:[(e.apkUrl||e.githubUrl)&&p.jsxs("button",{onClick:Re,className:"flex-1 bg-nothing-red hover:bg-red-700 text-nothing-white px-6 py-3 rounded-lg font-semibold flex items-center justify-center space-x-2 transition-colors duration-200",children:[p.jsx(Nr,{className:"h-5 w-5"}),p.jsx("span",{children:e.apkUrl?"Download APK":"View on GitHub"})]}),p.jsxs("button",{onClick:oe,disabled:I,className:`px-6 py-3 rounded-lg font-semibold flex items-center justify-center space-x-2 transition-colors duration-200 min-w-[120px] ${h?"bg-nothing-red text-nothing-white":"border border-nothing-gray-700 text-nothing-white hover:border-nothing-gray-600"} ${I?"opacity-50 cursor-not-allowed":""}`,children:[p.jsx(Hn,{className:`h-5 w-5 ${h?"fill-current":""}`}),p.jsx("span",{children:I?"...":h?"Liked":"Like"})]}),p.jsx("button",{onClick:pe,className:"px-6 py-3 border border-nothing-gray-700 text-nothing-white hover:border-nothing-gray-600 rounded-lg font-semibold flex items-center justify-center space-x-2 transition-colors duration-200",children:p.jsx(Vj,{className:"h-5 w-5"})})]}),(e.githubUrl||e.instructions)&&p.jsxs("div",{className:"space-y-3",children:[p.jsx("h3",{className:"text-lg font-semibold text-nothing-white",children:e.githubUrl&&e.instructions?"Links & Instructions":e.githubUrl?"Repository":"Instructions"}),e.githubUrl&&p.jsxs("a",{href:e.githubUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 text-nothing-gray-300 hover:text-nothing-white transition-colors duration-200",children:[p.jsx(uI,{className:"h-5 w-5"}),p.jsx("span",{children:"View on GitHub"}),p.jsx(bj,{className:"h-4 w-4"})]}),e.instructions&&p.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-4",children:[p.jsx("h4",{className:"text-nothing-white font-medium mb-2",children:"Installation Instructions"}),p.jsx("p",{className:"text-nothing-gray-300 text-sm whitespace-pre-wrap",children:e.instructions})]})]})]})]})}),D&&p.jsx("div",{className:"fixed inset-0 bg-nothing-black/80 flex items-center justify-center z-50 p-4",children:p.jsxs(je.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6 max-w-md w-full",children:[p.jsxs("div",{className:"flex items-start space-x-3 mb-4",children:[p.jsx(Ej,{className:"h-6 w-6 text-yellow-500 flex-shrink-0 mt-0.5"}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-nothing-white mb-2",children:"Download Disclaimer"}),p.jsx("p",{className:"text-nothing-gray-300 text-sm",children:"This APK is shared by the community. GlyphMart does not guarantee the safety or functionality of third-party files. Download and install at your own risk."})]})]}),p.jsxs("div",{className:"flex space-x-3",children:[p.jsx("button",{onClick:Ce,disabled:a,className:"flex-1 bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50",children:a?"Downloading...":"I Understand, Download"}),p.jsx("button",{onClick:()=>P(!1),className:"px-4 py-2 border border-nothing-gray-700 text-nothing-white hover:border-nothing-gray-600 rounded-lg font-medium transition-colors duration-200",children:"Cancel"})]})]})}),M&&Z?p.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center p-4",children:p.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-8 max-w-lg w-full",children:[p.jsx("h2",{className:"text-2xl font-bold text-nothing-white mb-6",children:"Edit Glyph"}),p.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Title"}),p.jsx("input",{type:"text",name:"title",value:Z.title,onChange:O,className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Description"}),p.jsx("textarea",{name:"description",value:Z.description,onChange:O,rows:4,className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"APK URL"}),p.jsx("input",{type:"url",name:"apkUrl",value:Z.apkUrl,onChange:O,className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"GitHub URL"}),p.jsx("input",{type:"url",name:"githubUrl",value:Z.githubUrl,onChange:O,className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Instructions"}),p.jsx("textarea",{name:"instructions",value:Z.instructions,onChange:O,rows:2,className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Image URLs (comma separated)"}),p.jsx("input",{type:"text",name:"images",value:Z.images.join(", "),onChange:re=>ie(le=>({...le,images:re.target.value.split(",").map(we=>we.trim())})),className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white"})]}),k&&p.jsx("div",{className:"bg-red-900/20 border border-red-700 text-red-400 px-4 py-2 rounded-lg mb-4",children:k}),p.jsxs("div",{className:"flex space-x-3 mt-6",children:[p.jsx("button",{type:"submit",disabled:N,className:"px-6 py-3 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50",children:N?"Saving...":"Save Changes"}),p.jsx("button",{type:"button",onClick:()=>Q(!1),className:"px-6 py-3 bg-nothing-gray-700 hover:bg-nothing-gray-800 text-nothing-white rounded-lg font-medium transition-colors duration-200",children:"Cancel"})]})]})]})}):p.jsx(p.Fragment,{})]}):p.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("h1",{className:"text-2xl font-bold text-nothing-white mb-4",children:"Glyph not found"}),p.jsx(Ge,{to:"/",className:"text-nothing-red hover:text-red-400",children:"Return to home"})]})})},h4=()=>{const{username:n}=fx(),[e,t]=j.useState(null),[r,s]=j.useState([]),[a,u]=j.useState(!0),[h,f]=j.useState("latest"),[m,y]=j.useState(""),_=P=>{console.log(P),y(W=>W+`
`+P)};j.useEffect(()=>{n&&(async()=>{try{_("Fetching storefront for username: "+n);let W=vn(Vt(Le,"users"),wn("username","==",n)),q=await Zt(W);if(q.empty&&(_("No user found by username, trying displayName"),W=vn(Vt(Le,"users"),wn("displayName","==",n)),q=await Zt(W)),q.empty){_("No user found with username or displayName: "+n),u(!1);return}const M=q.docs[0].data();_("Found user data: "+JSON.stringify({uid:M.uid,username:M.username,displayName:M.displayName})),t(M),_("Fetching glyphs for creatorId: "+M.uid);let Q=vn(Vt(Le,"glyphs"),wn("creatorId","==",M.uid)),ie=(await Zt(Q)).docs.map(N=>({id:N.id,...N.data()}));ie=ie.sort((N,A)=>{const k=N.createdAt?.toDate?N.createdAt.toDate():new Date(N.createdAt||0);return(A.createdAt?.toDate?A.createdAt.toDate():new Date(A.createdAt||0))-k}),_("Found glyphs: "+ie.length),ie.length>0?_("First glyph: "+JSON.stringify({id:ie[0].id,title:ie[0].title,creatorId:ie[0].creatorId})):_("No glyphs found for this user. Check if glyphs were created with the correct creatorId."),s(ie)}catch(W){_("Error fetching user data: "+W.message),console.error("Error fetching user data:",W)}finally{u(!1)}})()},[n]);const E=()=>{switch(h){case"popular":return[...r].sort((P,W)=>(W.downloads||0)-(P.downloads||0));case"liked":return[...r].sort((P,W)=>(W.likes||0)-(P.likes||0));default:return r}},I=({glyph:P})=>p.jsx(je.div,{whileHover:{y:-5},className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg overflow-hidden hover:border-nothing-gray-700 transition-all duration-300",children:p.jsxs(Ge,{to:`/glyph/${P.id}`,children:[p.jsxs("div",{className:"aspect-square bg-nothing-gray-800 relative overflow-hidden",children:[P.images&&P.images.length>0?p.jsx("img",{src:P.images[0],alt:P.title,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"}):p.jsx("div",{className:"w-full h-full flex items-center justify-center",children:p.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center glyph-animation",children:p.jsx(ur,{className:"h-8 w-8 text-nothing-white"})})}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-nothing-black/80 via-transparent to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300",children:p.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:p.jsxs("div",{className:"flex items-center justify-between text-nothing-white text-sm",children:[p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Nr,{className:"h-4 w-4"}),p.jsx("span",{children:P.downloads||0})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Hn,{className:"h-4 w-4"}),p.jsx("span",{children:P.likes||0})]})]})})})]}),p.jsxs("div",{className:"p-4",children:[p.jsx("h3",{className:"text-nothing-white font-semibold text-lg mb-2 truncate",children:P.title}),p.jsx("p",{className:"text-nothing-gray-400 text-sm mb-3 line-clamp-2",children:P.description}),p.jsxs("div",{className:"flex items-center justify-between text-nothing-gray-500 text-sm",children:[p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsxs("div",{className:"flex items-center space-x-1",children:[p.jsx(Nr,{className:"h-3 w-3"}),p.jsx("span",{children:P.downloads||0})]}),p.jsxs("div",{className:"flex items-center space-x-1",children:[p.jsx(Wn,{className:"h-3 w-3"}),p.jsx("span",{children:P.views||0})]}),p.jsxs("div",{className:"flex items-center space-x-1",children:[p.jsx(Hn,{className:"h-3 w-3"}),p.jsx("span",{children:P.likes||0})]})]}),p.jsx("span",{className:"text-xs",children:P.createdAt?.toDate?.()?.toLocaleDateString()||"Unknown"})]})]})]})});if(a)return p.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-4 glyph-animation",children:p.jsx(ur,{className:"h-8 w-8 text-nothing-white"})}),p.jsx("p",{className:"text-nothing-gray-400",children:"Loading storefront..."})]})});if(!e)return p.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("h1",{className:"text-2xl font-bold text-nothing-white mb-4",children:"User not found"}),p.jsxs("p",{className:"text-nothing-gray-400 mb-6",children:["The user @",n," does not exist."]}),p.jsx(Ge,{to:"/",className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-6 py-3 rounded-lg font-medium transition-colors duration-200",children:"Return to home"})]})});const R=r.reduce((P,W)=>P+(W.downloads||0),0),D=r.reduce((P,W)=>P+(W.likes||0),0);return p.jsxs("div",{className:"min-h-screen bg-nothing-black",children:[p.jsxs("div",{className:"bg-nothing-gray-900 border-b border-nothing-gray-800 relative overflow-hidden",children:[e.bannerImage&&p.jsxs("div",{className:"absolute inset-0 w-full h-full",children:[p.jsx("img",{src:e.bannerImage,alt:"Profile banner",className:"w-full h-full object-cover opacity-30"}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-nothing-gray-900 via-nothing-gray-900/80 to-nothing-gray-900/40"})]}),p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 relative z-10",children:p.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center",children:[p.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden mx-auto mb-6 border-4 border-nothing-white shadow-lg",children:e.profilePicture?p.jsx("img",{src:e.profilePicture,alt:e.displayName||e.username,className:"w-full h-full object-cover"}):p.jsx("div",{className:"w-full h-full bg-nothing-red flex items-center justify-center",children:p.jsx("span",{className:"text-2xl font-bold text-nothing-white",children:e.displayName?.charAt(0).toUpperCase()||e.username?.charAt(0).toUpperCase()})})}),p.jsx("h1",{className:"text-3xl font-bold text-nothing-white mb-2 font-nothing",children:e.username}),p.jsxs("p",{className:"text-nothing-red text-lg mb-4",children:["@",e.username]}),e.bio&&p.jsx("p",{className:"text-nothing-gray-300 max-w-2xl mx-auto mb-6",children:e.bio}),p.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4 text-nothing-gray-400 text-sm mb-6",children:[e.location&&p.jsxs("div",{className:"flex items-center space-x-1",children:[p.jsx(Dj,{className:"h-4 w-4"}),p.jsx("span",{children:e.location})]}),e.website&&p.jsxs("a",{href:e.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 hover:text-nothing-white transition-colors duration-200",children:[p.jsx(Rj,{className:"h-4 w-4"}),p.jsx("span",{children:"Website"})]}),p.jsxs("div",{className:"flex items-center space-x-1",children:[p.jsx(Dg,{className:"h-4 w-4"}),p.jsxs("span",{children:["Joined ",e.createdAt?.toDate?.()?.toLocaleDateString()||"Unknown"]})]})]}),p.jsxs("div",{className:"flex items-center justify-center space-x-8",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-2xl font-bold text-nothing-white",children:r.length}),p.jsx("div",{className:"text-nothing-gray-400 text-sm",children:"Glyphs"})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-2xl font-bold text-nothing-white",children:R}),p.jsx("div",{className:"text-nothing-gray-400 text-sm",children:"Downloads"})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-2xl font-bold text-nothing-white",children:D}),p.jsx("div",{className:"text-nothing-gray-400 text-sm",children:"Likes"})]})]})]})})]}),p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[p.jsxs("div",{className:"flex space-x-4 border-b border-nothing-gray-800 mb-8",children:[p.jsx("button",{onClick:()=>f("latest"),className:`px-4 py-3 font-medium border-b-2 transition-colors duration-200 ${h==="latest"?"border-nothing-red text-nothing-red":"border-transparent text-nothing-gray-400 hover:text-nothing-white"}`,children:"Latest"}),p.jsx("button",{onClick:()=>f("popular"),className:`px-4 py-3 font-medium border-b-2 transition-colors duration-200 ${h==="popular"?"border-nothing-red text-nothing-red":"border-transparent text-nothing-gray-400 hover:text-nothing-white"}`,children:"Most Downloaded"}),p.jsx("button",{onClick:()=>f("liked"),className:`px-4 py-3 font-medium border-b-2 transition-colors duration-200 ${h==="liked"?"border-nothing-red text-nothing-red":"border-transparent text-nothing-gray-400 hover:text-nothing-white"}`,children:"Most Liked"})]}),r.length>0?p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:E().map((P,W)=>p.jsx(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:W*.1},children:p.jsx(I,{glyph:P})},P.id))}):p.jsxs("div",{className:"text-center py-12",children:[p.jsx("div",{className:"w-16 h-16 bg-nothing-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:p.jsx(ur,{className:"h-8 w-8 text-nothing-gray-600"})}),p.jsx("h3",{className:"text-nothing-white text-lg font-medium mb-2",children:"No glyphs yet"}),p.jsxs("p",{className:"text-nothing-gray-400",children:[e.username," hasn't shared any glyphs yet."]})]})]}),m&&p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:p.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg p-4",children:[p.jsx("h3",{className:"text-nothing-white font-bold mb-2",children:"Debug Info:"}),p.jsx("pre",{className:"text-nothing-gray-300 text-xs whitespace-pre-wrap overflow-auto",children:m})]})})]})},d4=()=>{const[n,e]=j.useState({title:"",description:"",images:[""],apkUrl:"",githubUrl:"",instructions:""}),[t,r]=j.useState(!1),[s,a]=j.useState(""),[u,h]=j.useState(""),{currentUser:f,userProfile:m}=pi(),y=fi(),_=async()=>{try{const M=(await Zt(Vt(Le,"glyphs"))).docs.map(ie=>({id:ie.id,...ie.data()})),Q=M.filter(ie=>ie.creatorId===f.uid),Z=`Total glyphs in database: ${M.length}
My glyphs: ${Q.length}
My UID: ${f.uid}
My username: ${m?.username}
My displayName: ${f.displayName}

My glyphs:
`+Q.map(ie=>`- ${ie.title} (ID: ${ie.id})`).join(`
`);h(Z),console.log("Debug info:",Z)}catch(q){console.error("Error checking glyphs:",q),h("Error checking glyphs: "+q.message)}};if(!f)return y("/login"),null;const E=q=>{const{name:M,value:Q}=q.target;e(Z=>({...Z,[M]:Q})),a("")},I=(q,M)=>{const Q=[...n.images];Q[q]=M,e(Z=>({...Z,images:Q}))},R=()=>{n.images.length<5&&e(q=>({...q,images:[...q.images,""]}))},D=q=>{if(n.images.length>1){const M=n.images.filter((Q,Z)=>Z!==q);e(Q=>({...Q,images:M}))}},P=()=>{if(!n.title.trim())return a("Title is required"),!1;if(!n.description.trim())return a("Description is required"),!1;if(!n.apkUrl.trim()&&!n.githubUrl.trim())return a("Either APK download URL or GitHub repository URL is required"),!1;const q=/^https?:\/\/.+/;if(n.apkUrl.trim()&&!q.test(n.apkUrl))return a("APK URL must be a valid HTTP/HTTPS URL"),!1;if(n.githubUrl.trim()&&!q.test(n.githubUrl))return a("GitHub URL must be a valid HTTP/HTTPS URL"),!1;const M=n.images.filter(Q=>Q.trim());for(const Q of M)if(!q.test(Q))return a("All image URLs must be valid HTTP/HTTPS URLs"),!1;return!0},W=async q=>{if(q.preventDefault(),r(!0),a(""),!P()){r(!1);return}try{const M=n.images.filter(ie=>ie.trim()),Q={title:n.title.trim(),description:n.description.trim(),images:M.length>0?M:[],apkUrl:n.apkUrl.trim()||null,githubUrl:n.githubUrl.trim()||null,instructions:n.instructions.trim()||null,creatorId:f.uid,creatorUsername:m?.username,downloads:0,views:0,likes:0,createdAt:new Date};console.log("Creating glyph with data:",Q);const Z=await G2(Vt(Le,"glyphs"),Q);console.log("Glyph created with ID:",Z.id),m&&await oo(Tt(Le,"users",f.uid),{glyphsCount:mu(1)}),y(`/glyph/${Z.id}`)}catch(M){console.error("Error creating glyph:",M),a("Failed to upload glyph. Please try again.")}finally{r(!1)}};return p.jsx("div",{className:"min-h-screen bg-nothing-black py-12",children:p.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[p.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[p.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-6 glyph-animation",children:p.jsx(e_,{className:"h-8 w-8 text-nothing-white"})}),p.jsx("h1",{className:"text-3xl font-bold text-nothing-white font-nothing mb-4",children:"Share Your Glyph"}),p.jsx("p",{className:"text-nothing-gray-400",children:"Upload your custom Nothing Phone(3) glyph and share it with the community"})]}),p.jsx(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-8",children:p.jsxs("form",{onSubmit:W,className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-nothing-white mb-2",children:"Glyph Title *"}),p.jsx("input",{type:"text",id:"title",name:"title",value:n.title,onChange:E,placeholder:"e.g., Custom Boot Animation Glyph",className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-nothing-white mb-2",children:"Description *"}),p.jsx("textarea",{id:"description",name:"description",value:n.description,onChange:E,rows:4,placeholder:"Describe your glyph, what it does, and any special features...",className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200 resize-vertical",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-nothing-white mb-2",children:"Image URLs (Optional)"}),p.jsx("p",{className:"text-sm text-nothing-gray-400 mb-4",children:"Add URLs to images showcasing your glyph (screenshots, demos, etc.)"}),n.images.map((q,M)=>p.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[p.jsxs("div",{className:"relative flex-1",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:p.jsx(fm,{className:"h-5 w-5 text-nothing-gray-400"})}),p.jsx("input",{type:"url",value:q,onChange:Q=>I(M,Q.target.value),placeholder:"https://example.com/image.jpg",className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200"})]}),n.images.length>1&&p.jsx("button",{type:"button",onClick:()=>D(M),className:"p-2 text-nothing-gray-400 hover:text-nothing-red transition-colors duration-200",children:p.jsx(hI,{className:"h-5 w-5"})})]},M)),n.images.length<5&&p.jsxs("button",{type:"button",onClick:R,className:"flex items-center space-x-2 text-nothing-red hover:text-red-400 text-sm font-medium transition-colors duration-200",children:[p.jsx(cI,{className:"h-4 w-4"}),p.jsx("span",{children:"Add another image"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"apkUrl",className:"block text-sm font-medium text-nothing-white mb-2",children:"APK Download URL"}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:p.jsx(Nj,{className:"h-5 w-5 text-nothing-gray-400"})}),p.jsx("input",{type:"url",id:"apkUrl",name:"apkUrl",value:n.apkUrl,onChange:E,placeholder:"https://github.com/username/repo/releases/download/v1.0/glyph.apk",className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200"})]}),p.jsx("p",{className:"text-sm text-nothing-gray-400 mt-2",children:"Direct link to your APK file (GitHub Releases, Google Drive, etc.)"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"githubUrl",className:"block text-sm font-medium text-nothing-white mb-2",children:"GitHub Repository"}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:p.jsx(uI,{className:"h-5 w-5 text-nothing-gray-400"})}),p.jsx("input",{type:"url",id:"githubUrl",name:"githubUrl",value:n.githubUrl,onChange:E,placeholder:"https://github.com/username/repository",className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200"})]}),p.jsx("p",{className:"text-sm text-nothing-gray-400 mt-2",children:"Link to your GitHub repository with source code"})]}),p.jsx("div",{className:"bg-blue-900/20 border border-blue-700 text-blue-400 px-4 py-3 rounded-lg",children:p.jsxs("div",{className:"flex items-start space-x-3",children:[p.jsx("div",{className:"flex-shrink-0 mt-0.5",children:p.jsx("div",{className:"w-4 h-4 bg-blue-400 rounded-full flex items-center justify-center",children:p.jsx("span",{className:"text-blue-900 text-xs font-bold",children:"!"})})}),p.jsxs("div",{className:"text-sm",children:[p.jsx("p",{className:"font-medium mb-1",children:"Download Requirement"}),p.jsx("p",{children:"You must provide either an APK download URL or a GitHub repository link (or both). Users need a way to access your glyph."})]})]})}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"instructions",className:"block text-sm font-medium text-nothing-white mb-2",children:"Installation Instructions (Optional)"}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute top-3 left-3 pointer-events-none",children:p.jsx(kj,{className:"h-5 w-5 text-nothing-gray-400"})}),p.jsx("textarea",{id:"instructions",name:"instructions",value:n.instructions,onChange:E,rows:4,placeholder:`1. Download the APK file
2. Enable installation from unknown sources
3. Install the APK
4. Open Nothing Glyph Composer...`,className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200 resize-vertical"})]})]}),s&&p.jsxs(je.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-900/20 border border-red-700 text-red-400 px-4 py-3 rounded-lg flex items-start space-x-3",children:[p.jsx(dm,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),p.jsx("span",{className:"text-sm",children:s})]}),p.jsx("div",{className:"bg-yellow-900/20 border border-yellow-700 text-yellow-400 px-4 py-3 rounded-lg",children:p.jsxs("div",{className:"flex items-start space-x-3",children:[p.jsx(dm,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),p.jsxs("div",{className:"text-sm",children:[p.jsx("p",{className:"font-medium mb-1",children:"Important Disclaimer"}),p.jsx("p",{children:"By uploading your glyph, you confirm that you own the rights to share this content. GlyphMart is not responsible for the safety or functionality of user-generated content."})]})]})}),p.jsxs("div",{className:"flex justify-end space-x-4",children:[p.jsx("button",{type:"button",onClick:()=>y("/"),className:"px-6 py-3 border border-nothing-gray-700 text-nothing-white hover:border-nothing-gray-600 rounded-lg font-medium transition-colors duration-200",children:"Cancel"}),p.jsx("button",{type:"submit",disabled:t,className:"px-6 py-3 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:t?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-nothing-white"}),p.jsx("span",{children:"Uploading..."})]}):p.jsxs(p.Fragment,{children:[p.jsx(e_,{className:"h-4 w-4"}),p.jsx("span",{children:"Share Glyph"})]})})]})]})}),p.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-nothing-gray-900 rounded-lg p-6 border border-nothing-gray-800 mt-6",children:[p.jsx("h2",{className:"text-nothing-white text-lg font-bold mb-4",children:"Debug: Check My Glyphs"}),p.jsx("button",{type:"button",onClick:_,className:"px-4 py-2 bg-nothing-gray-800 hover:bg-nothing-gray-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 mb-4",children:"Check Database"}),u&&p.jsx("div",{className:"bg-nothing-gray-800 rounded-lg p-4",children:p.jsx("pre",{className:"text-nothing-gray-300 text-xs whitespace-pre-wrap overflow-auto",children:u})})]})]})})},f4=()=>{const[n,e]=ZP(),[t,r]=j.useState(n.get("q")||""),[s,a]=j.useState([]),[u,h]=j.useState(!1),[f,m]=j.useState("latest"),[y,_]=j.useState("all");j.useEffect(()=>{const P=n.get("q");P&&(r(P),E(P))},[n]);const E=async(P,W=f,q=y)=>{if(P.trim()){h(!0);try{let M=Vt(Le,"glyphs");switch(W){case"popular":M=P(M,da("downloads","desc"),fa(100));break;case"liked":M=P(M,da("likes","desc"),fa(100));break;case"viewed":M=P(M,da("views","desc"),fa(100));break;default:M=P(M,da("createdAt","desc"),fa(100))}const Z=(await Zt(M)).docs.map(A=>({id:A.id,...A.data()})),ie=P.toLowerCase(),N=Z.filter(A=>A.title.toLowerCase().includes(ie)||A.description.toLowerCase().includes(ie)||A.creatorUsername.toLowerCase().includes(ie));a(N)}catch(M){console.error("Error searching glyphs:",M),a([])}finally{h(!1)}}},I=P=>{P.preventDefault(),t.trim()&&(e({q:t.trim()}),E(t.trim()))},R=P=>{m(P),t.trim()&&E(t,P,y)},D=({glyph:P})=>p.jsx(je.div,{whileHover:{y:-5},className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg overflow-hidden hover:border-nothing-gray-700 transition-all duration-300",children:p.jsxs(Ge,{to:`/glyph/${P.id}`,children:[p.jsxs("div",{className:"aspect-square bg-nothing-gray-800 relative overflow-hidden",children:[P.images&&P.images.length>0?p.jsx("img",{src:P.images[0],alt:P.title,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"}):p.jsx("div",{className:"w-full h-full flex items-center justify-center",children:p.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center glyph-animation",children:p.jsx(ur,{className:"h-8 w-8 text-nothing-white"})})}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-nothing-black/80 via-transparent to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300",children:p.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:p.jsxs("div",{className:"flex items-center justify-between text-nothing-white text-sm",children:[p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Nr,{className:"h-4 w-4"}),p.jsx("span",{children:P.downloads||0})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Hn,{className:"h-4 w-4"}),p.jsx("span",{children:P.likes||0})]})]})})})]}),p.jsxs("div",{className:"p-4",children:[p.jsx("h3",{className:"text-nothing-white font-semibold text-lg mb-2 truncate",children:P.title}),p.jsx("p",{className:"text-nothing-gray-400 text-sm mb-3 line-clamp-2",children:P.description}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs(Ge,{to:`/storefront/${P.creatorUsername}`,className:"text-nothing-red hover:text-red-400 text-sm font-medium transition-colors duration-200 flex items-center space-x-1",children:[p.jsx(es,{className:"h-3 w-3"}),p.jsxs("span",{children:["@",P.creatorUsername]})]}),p.jsxs("div",{className:"flex items-center space-x-4 text-nothing-gray-500 text-sm",children:[p.jsxs("div",{className:"flex items-center space-x-1",children:[p.jsx(Nr,{className:"h-3 w-3"}),p.jsx("span",{children:P.downloads||0})]}),p.jsxs("div",{className:"flex items-center space-x-1",children:[p.jsx(Wn,{className:"h-3 w-3"}),p.jsx("span",{children:P.views||0})]})]})]})]})]})});return p.jsx("div",{className:"min-h-screen bg-nothing-black",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[p.jsx("div",{className:"text-center mb-8",children:p.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[p.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-6 glyph-animation",children:p.jsx(Ks,{className:"h-8 w-8 text-nothing-white"})}),p.jsx("h1",{className:"text-3xl font-bold text-nothing-white font-nothing mb-4",children:"Search Glyphs"}),p.jsx("p",{className:"text-nothing-gray-400 max-w-2xl mx-auto",children:"Discover custom Nothing Phone(3) glyphs created by the community"})]})}),p.jsx(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"max-w-2xl mx-auto mb-8",children:p.jsxs("form",{onSubmit:I,className:"relative",children:[p.jsx("input",{type:"text",value:t,onChange:P=>r(P.target.value),placeholder:"Search for glyphs, creators, or keywords...",className:"w-full px-6 py-4 pl-14 pr-16 bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200 text-lg"}),p.jsx(Ks,{className:"absolute left-4 top-4 h-6 w-6 text-nothing-gray-400"}),p.jsx("button",{type:"submit",className:"absolute right-2 top-2 bottom-2 px-4 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-md font-medium transition-colors duration-200",children:"Search"})]})}),(s.length>0||u)&&p.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsx("span",{className:"text-nothing-gray-400 text-sm",children:u?"Searching...":`${s.length} results found`}),t&&p.jsxs("span",{className:"text-nothing-white text-sm",children:['for "',p.jsx("span",{className:"text-nothing-red",children:t}),'"']})]}),p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Cj,{className:"h-4 w-4 text-nothing-gray-400"}),p.jsx("span",{className:"text-nothing-gray-400 text-sm",children:"Sort by:"})]}),p.jsx("div",{className:"flex space-x-2",children:[{value:"latest",label:"Latest",icon:Tj},{value:"popular",label:"Popular",icon:Nr},{value:"liked",label:"Most Liked",icon:Hn},{value:"viewed",label:"Most Viewed",icon:Wn}].map(({value:P,label:W,icon:q})=>p.jsxs("button",{onClick:()=>R(P),className:`flex items-center space-x-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors duration-200 ${f===P?"bg-nothing-red text-nothing-white":"bg-nothing-gray-800 text-nothing-gray-300 hover:bg-nothing-gray-700"}`,children:[p.jsx(q,{className:"h-4 w-4"}),p.jsx("span",{className:"hidden sm:inline",children:W})]},P))})]})]}),u&&p.jsx("div",{className:"flex items-center justify-center py-12",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-4 glyph-animation",children:p.jsx(Ks,{className:"h-8 w-8 text-nothing-white"})}),p.jsx("p",{className:"text-nothing-gray-400",children:"Searching glyphs..."})]})}),!u&&s.length>0&&p.jsx(je.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:s.map((P,W)=>p.jsx(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:W*.1},children:p.jsx(D,{glyph:P})},P.id))}),!u&&t&&s.length===0&&p.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-12",children:[p.jsx("div",{className:"w-16 h-16 bg-nothing-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:p.jsx(Ks,{className:"h-8 w-8 text-nothing-gray-600"})}),p.jsx("h3",{className:"text-nothing-white text-lg font-medium mb-2",children:"No results found"}),p.jsx("p",{className:"text-nothing-gray-400 mb-6",children:"Try searching with different keywords or browse all glyphs."}),p.jsx(Ge,{to:"/",className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-6 py-3 rounded-lg font-medium transition-colors duration-200",children:"Browse All Glyphs"})]}),!u&&!t&&p.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-12",children:[p.jsx("div",{className:"w-16 h-16 bg-nothing-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:p.jsx(Ks,{className:"h-8 w-8 text-nothing-gray-600"})}),p.jsx("h3",{className:"text-nothing-white text-lg font-medium mb-2",children:"Start searching"}),p.jsx("p",{className:"text-nothing-gray-400 mb-6",children:"Enter a search term to find glyphs, creators, or specific features."}),p.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:["boot animation","notification","charging","custom"].map(P=>p.jsx("button",{onClick:()=>{r(P),e({q:P}),E(P)},className:"px-3 py-1 bg-nothing-gray-800 hover:bg-nothing-gray-700 text-nothing-gray-300 rounded-full text-sm transition-colors duration-200",children:P},P))})]})]})})},p4=()=>{const[n,e]=j.useState([]),[t,r]=j.useState(!0),{currentUser:s}=pi();return j.useEffect(()=>{(async()=>{if(!s){r(!1);return}try{console.log("Fetching liked glyphs for user:",s.uid);const u=await u4(s.uid);console.log("Retrieved liked glyphs:",u),e(u)}catch(u){console.error("Error fetching liked glyphs:",u)}finally{r(!1)}})()},[s]),s?t?p.jsx("div",{className:"min-h-screen bg-nothing-black text-nothing-white flex items-center justify-center",children:p.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-nothing-red"})}):p.jsx("div",{className:"min-h-screen bg-nothing-black text-nothing-white",children:p.jsxs("div",{className:"container mx-auto px-4 py-8",children:[p.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[p.jsxs("h1",{className:"text-4xl font-bold mb-2 flex items-center",children:[p.jsx(Hn,{className:"h-8 w-8 mr-3 text-nothing-red fill-current"}),"Liked Posts"]}),p.jsxs("p",{className:"text-nothing-gray-400",children:[n.length," glyph",n.length!==1?"s":""," you've liked"]})]}),n.length>0?p.jsx(je.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:n.map((a,u)=>p.jsx(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:u*.1},className:"group",children:p.jsx(Ge,{to:`/glyph/${a.id}`,children:p.jsxs("div",{className:"bg-nothing-gray-900 rounded-lg overflow-hidden border border-nothing-gray-800 hover:border-nothing-gray-700 transition-all duration-300 hover:scale-105",children:[p.jsxs("div",{className:"aspect-square bg-nothing-gray-800 relative overflow-hidden",children:[a.images&&a.images.length>0?p.jsx("img",{src:a.images[0],alt:a.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}):p.jsx("div",{className:"w-full h-full flex items-center justify-center",children:p.jsx("div",{className:"text-nothing-gray-500 text-6xl",children:""})}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-nothing-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:p.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:p.jsxs("div",{className:"flex items-center justify-between text-nothing-white text-sm",children:[p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Nr,{className:"h-4 w-4"}),p.jsx("span",{children:a.downloads||0})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Wn,{className:"h-4 w-4"}),p.jsx("span",{children:a.views||0})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Hn,{className:"h-4 w-4 fill-current text-nothing-red"}),p.jsx("span",{children:a.likes||0})]})]})})})]}),p.jsxs("div",{className:"p-4",children:[p.jsx("h3",{className:"font-semibold text-nothing-white mb-2 line-clamp-2",children:a.title}),p.jsx("p",{className:"text-nothing-gray-400 text-sm mb-3 line-clamp-2",children:a.description}),p.jsxs("div",{className:"flex items-center justify-between text-xs text-nothing-gray-500",children:[p.jsxs("div",{className:"flex items-center space-x-1",children:[p.jsx(es,{className:"h-3 w-3"}),p.jsx("span",{children:a.creatorUsername})]}),p.jsxs("div",{className:"flex items-center space-x-1",children:[p.jsx(Dg,{className:"h-3 w-3"}),p.jsx("span",{children:a.createdAt?.toDate?a.createdAt.toDate().toLocaleDateString():new Date(a.createdAt).toLocaleDateString()})]})]})]})]})})},a.id))}):p.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"text-center py-16",children:[p.jsx(Hn,{className:"h-16 w-16 mx-auto mb-4 text-nothing-gray-600"}),p.jsx("h2",{className:"text-2xl font-bold mb-2 text-nothing-gray-400",children:"No liked posts yet"}),p.jsx("p",{className:"text-nothing-gray-500 mb-6",children:"Start exploring glyphs and like the ones you love!"}),p.jsx(Ge,{to:"/",className:"bg-nothing-red text-nothing-white px-6 py-3 rounded-lg font-semibold hover:bg-red-600 transition-colors duration-200",children:"Explore Glyphs"})]})]})}):p.jsx("div",{className:"min-h-screen bg-nothing-black text-nothing-white flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Please log in to view your liked posts"}),p.jsx(Ge,{to:"/login",className:"bg-nothing-red text-nothing-white px-6 py-3 rounded-lg font-semibold hover:bg-red-600 transition-colors duration-200",children:"Log In"})]})})},m4=()=>{const{currentUser:n,userProfile:e,logout:t}=pi(),r=fi(),[s,a]=j.useState({displayName:"",username:"",email:"",bio:"",profilePicture:"",bannerImage:""}),[u,h]=j.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[f,m]=j.useState(!1),[y,_]=j.useState(!1),[E,I]=j.useState(!1),[R,D]=j.useState(!1),[P,W]=j.useState(""),[q,M]=j.useState(""),[Q,Z]=j.useState("profile"),[ie,N]=j.useState(""),[A,k]=j.useState(!1);j.useEffect(()=>{n&&e&&a({displayName:n.displayName||"",username:e.username||"",email:n.email||"",bio:e.bio||"",profilePicture:e.profilePicture||n.photoURL||"",bannerImage:e.bannerImage||""})},[n,e]);const V=async b=>{b.preventDefault(),D(!0),M(""),W("");try{s.displayName!==n.displayName&&await Kp(n,{displayName:s.displayName}),s.profilePicture!==n.photoURL&&await Kp(n,{photoURL:s.profilePicture}),s.email!==n.email&&await Nk(n,s.email),await oo(Tt(Le,"users",n.uid),{username:s.username,displayName:s.displayName,bio:s.bio,profilePicture:s.profilePicture,bannerImage:s.bannerImage,updatedAt:new Date}),W("Profile updated successfully!")}catch(he){console.error("Error updating profile:",he),he.code==="auth/requires-recent-login"?M("Please log out and log back in before updating your email."):M("Failed to update profile: "+he.message)}finally{D(!1)}},U=async b=>{if(b.preventDefault(),D(!0),M(""),W(""),u.newPassword!==u.confirmPassword){M("New passwords do not match"),D(!1);return}if(u.newPassword.length<6){M("Password must be at least 6 characters long"),D(!1);return}try{const he=ns.credential(n.email,u.currentPassword);await G0(n,he),await Dk(n,u.newPassword),W("Password updated successfully!"),h({currentPassword:"",newPassword:"",confirmPassword:""})}catch(he){console.error("Error updating password:",he),he.code==="auth/wrong-password"?M("Current password is incorrect"):M("Failed to update password: "+he.message)}finally{D(!1)}},B=async()=>{M(""),W(""),k(!0);try{if(!ie){M("Please enter your current password to confirm deletion."),k(!1);return}const b=ns.credential(n.email,ie);await G0(n,b);const he=Vt(Le,"glyphs"),Ke=vn(he,wn("creatorId","==",n.uid)),Re=await Zt(Ke),Ce=Y2(Le);Re.forEach(pe=>{Ce.delete(pe.ref)}),await Ce.commit();const oe=Tt(Le,"users",n.uid);await pa(oe),await n.delete(),W("Account and all glyphs deleted successfully."),t(),r("/")}catch(b){M("Failed to delete account: "+(b.message||b.code))}finally{k(!1)}};return n?p.jsx("div",{className:"min-h-screen bg-nothing-black text-nothing-white",children:p.jsxs("div",{className:"container mx-auto px-4 py-8",children:[p.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[p.jsxs("h1",{className:"text-4xl font-bold mb-2 flex items-center",children:[p.jsx(pm,{className:"h-8 w-8 mr-3 text-nothing-red"}),"Settings"]}),p.jsx("p",{className:"text-nothing-gray-400",children:"Manage your account and preferences"})]}),P&&p.jsxs(je.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-green-900/20 border border-green-700 text-green-400 px-4 py-3 rounded-lg mb-6 flex items-center",children:[p.jsx(Pj,{className:"h-5 w-5 mr-2"}),P]}),q&&p.jsxs(je.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-900/20 border border-red-700 text-red-400 px-4 py-3 rounded-lg mb-6 flex items-center",children:[p.jsx(dm,{className:"h-5 w-5 mr-2"}),q]}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[p.jsx(je.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},className:"lg:col-span-1",children:p.jsx("div",{className:"bg-nothing-gray-900 rounded-lg p-6 border border-nothing-gray-800",children:p.jsxs("nav",{className:"space-y-2",children:[p.jsxs("button",{onClick:()=>Z("profile"),className:`w-full text-left px-4 py-3 rounded-lg font-medium transition-colors duration-200 flex items-center space-x-3 ${Q==="profile"?"bg-nothing-red text-nothing-white":"text-nothing-gray-400 hover:text-nothing-white hover:bg-nothing-gray-800"}`,children:[p.jsx(es,{className:"h-5 w-5"}),p.jsx("span",{children:"Profile"})]}),p.jsxs("button",{onClick:()=>Z("security"),className:`w-full text-left px-4 py-3 rounded-lg font-medium transition-colors duration-200 flex items-center space-x-3 ${Q==="security"?"bg-nothing-red text-nothing-white":"text-nothing-gray-400 hover:text-nothing-white hover:bg-nothing-gray-800"}`,children:[p.jsx(Gi,{className:"h-5 w-5"}),p.jsx("span",{children:"Security"})]})]})})}),p.jsxs(je.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5},className:"lg:col-span-3",children:[Q==="profile"&&p.jsxs("div",{className:"bg-nothing-gray-900 rounded-lg p-6 border border-nothing-gray-800",children:[p.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Profile Information"}),p.jsxs("form",{onSubmit:V,className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Banner Image"}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"w-full h-32 bg-nothing-gray-800 rounded-lg border border-nothing-gray-700 overflow-hidden mb-3",children:s.bannerImage?p.jsx("img",{src:s.bannerImage,alt:"Banner preview",className:"w-full h-full object-cover"}):p.jsx("div",{className:"w-full h-full flex items-center justify-center",children:p.jsx(fm,{className:"h-8 w-8 text-nothing-gray-600"})})}),p.jsxs("div",{className:"relative",children:[p.jsx(fm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),p.jsx("input",{type:"url",value:s.bannerImage,onChange:b=>a(he=>({...he,bannerImage:b.target.value})),className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"https://example.com/banner-image.jpg"})]})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Profile Picture"}),p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsx("div",{className:"w-20 h-20 bg-nothing-gray-800 rounded-full border border-nothing-gray-700 overflow-hidden flex-shrink-0",children:s.profilePicture?p.jsx("img",{src:s.profilePicture,alt:"Profile preview",className:"w-full h-full object-cover"}):p.jsx("div",{className:"w-full h-full flex items-center justify-center",children:p.jsx(es,{className:"h-8 w-8 text-nothing-gray-600"})})}),p.jsxs("div",{className:"flex-1 relative",children:[p.jsx(Sj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),p.jsx("input",{type:"url",value:s.profilePicture,onChange:b=>a(he=>({...he,profilePicture:b.target.value})),className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"https://example.com/profile-picture.jpg"})]})]})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Display Name"}),p.jsxs("div",{className:"relative",children:[p.jsx(es,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),p.jsx("input",{type:"text",value:s.displayName,onChange:b=>a(he=>({...he,displayName:b.target.value})),className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"Your display name"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Username"}),p.jsx("input",{type:"text",value:s.username,onChange:b=>a(he=>({...he,username:b.target.value})),className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"Your username"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Email Address"}),p.jsxs("div",{className:"relative",children:[p.jsx(jg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),p.jsx("input",{type:"email",value:s.email,onChange:b=>a(he=>({...he,email:b.target.value})),className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"your@email.com"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Bio"}),p.jsx("textarea",{value:s.bio,onChange:b=>a(he=>({...he,bio:b.target.value})),rows:4,className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent resize-none",placeholder:"Tell us about yourself..."})]}),p.jsx("button",{type:"submit",disabled:R,className:"w-full md:w-auto px-6 py-3 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:R?p.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-nothing-white"}):p.jsxs(p.Fragment,{children:[p.jsx(Jw,{className:"h-5 w-5"}),p.jsx("span",{children:"Save Changes"})]})})]})]}),Q==="security"&&p.jsxs("div",{className:"space-y-8",children:[p.jsxs("div",{className:"bg-nothing-gray-900 rounded-lg p-6 border border-nothing-gray-800",children:[p.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Change Password"}),p.jsxs("form",{onSubmit:U,className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Current Password"}),p.jsxs("div",{className:"relative",children:[p.jsx(Gi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),p.jsx("input",{type:f?"text":"password",value:u.currentPassword,onChange:b=>h(he=>({...he,currentPassword:b.target.value})),className:"w-full pl-10 pr-12 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"Enter current password"}),p.jsx("button",{type:"button",onClick:()=>m(!f),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-nothing-gray-500 hover:text-nothing-white",children:f?p.jsx(Ta,{className:"h-5 w-5"}):p.jsx(Wn,{className:"h-5 w-5"})})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"New Password"}),p.jsxs("div",{className:"relative",children:[p.jsx(Gi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),p.jsx("input",{type:y?"text":"password",value:u.newPassword,onChange:b=>h(he=>({...he,newPassword:b.target.value})),className:"w-full pl-10 pr-12 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"Enter new password"}),p.jsx("button",{type:"button",onClick:()=>_(!y),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-nothing-gray-500 hover:text-nothing-white",children:y?p.jsx(Ta,{className:"h-5 w-5"}):p.jsx(Wn,{className:"h-5 w-5"})})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Confirm New Password"}),p.jsxs("div",{className:"relative",children:[p.jsx(Gi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),p.jsx("input",{type:E?"text":"password",value:u.confirmPassword,onChange:b=>h(he=>({...he,confirmPassword:b.target.value})),className:"w-full pl-10 pr-12 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"Confirm new password"}),p.jsx("button",{type:"button",onClick:()=>I(!E),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-nothing-gray-500 hover:text-nothing-white",children:E?p.jsx(Ta,{className:"h-5 w-5"}):p.jsx(Wn,{className:"h-5 w-5"})})]})]}),p.jsx("button",{type:"submit",disabled:R,className:"w-full md:w-auto px-6 py-3 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:R?p.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-nothing-white"}):p.jsxs(p.Fragment,{children:[p.jsx(Jw,{className:"h-5 w-5"}),p.jsx("span",{children:"Update Password"})]})})]})]}),p.jsxs("div",{className:"bg-red-900/10 border border-red-700/30 rounded-lg p-6",children:[p.jsx("h2",{className:"text-2xl font-bold mb-4 text-red-400",children:"Danger Zone"}),p.jsx("p",{className:"text-nothing-gray-400 mb-6",children:"Once you delete your account, there is no going back. This will permanently delete all your glyphs and data. Please be certain."}),p.jsxs("form",{onSubmit:b=>{b.preventDefault(),B()},className:"space-y-4",children:[p.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Current Password"}),p.jsxs("div",{className:"relative mb-4",children:[p.jsx(Gi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),p.jsx("input",{type:"password",value:ie,onChange:b=>N(b.target.value),className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"Enter your current password",required:!0})]}),p.jsx("button",{type:"submit",disabled:A,className:"px-6 py-3 bg-red-600 hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:A?"Deleting...":"Delete Account"})]})]})]})]})]})]})}):(r("/login"),null)},Vp=({children:n})=>{const{currentUser:e}=pi();return e?n:p.jsx(vx,{to:"/login"})},sx=({children:n})=>{const{currentUser:e}=pi();return e?p.jsx(vx,{to:"/"}):n};function g4(){return p.jsx(wj,{children:p.jsx(QP,{children:p.jsxs("div",{className:"App",children:[p.jsx(e4,{}),p.jsxs(BP,{children:[p.jsx(Pr,{path:"/",element:p.jsx(i4,{})}),p.jsx(Pr,{path:"/login",element:p.jsx(sx,{children:p.jsx(s4,{})})}),p.jsx(Pr,{path:"/signup",element:p.jsx(sx,{children:p.jsx(o4,{})})}),p.jsx(Pr,{path:"/glyph/:id",element:p.jsx(c4,{})}),p.jsx(Pr,{path:"/storefront/:username",element:p.jsx(h4,{})}),p.jsx(Pr,{path:"/upload",element:p.jsx(Vp,{children:p.jsx(d4,{})})}),p.jsx(Pr,{path:"/search",element:p.jsx(f4,{})}),p.jsx(Pr,{path:"/liked",element:p.jsx(Vp,{children:p.jsx(p4,{})})}),p.jsx(Pr,{path:"/settings",element:p.jsx(Vp,{children:p.jsx(m4,{})})})]})]})})})}YS.createRoot(document.getElementById("root")).render(p.jsx(j.StrictMode,{children:p.jsx(g4,{})}));
