function oS(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in n)){const a=Object.getOwnPropertyDescriptor(r,o);a&&Object.defineProperty(n,o,a.get?a:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function aS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Lf={exports:{}},Il={},Of={exports:{}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O0;function lS(){if(O0)return Oe;O0=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.iterator;function E(O){return O===null||typeof O!="object"?null:(O=w&&O[w]||O["@@iterator"],typeof O=="function"?O:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,V={};function k(O,X,fe){this.props=O,this.context=X,this.refs=V,this.updater=fe||b}k.prototype.isReactComponent={},k.prototype.setState=function(O,X){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,X,"setState")},k.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function D(){}D.prototype=k.prototype;function M(O,X,fe){this.props=O,this.context=X,this.refs=V,this.updater=fe||b}var j=M.prototype=new D;j.constructor=M,L(j,k.prototype),j.isPureReactComponent=!0;var W=Array.isArray,ee=Object.prototype.hasOwnProperty,ae={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function I(O,X,fe){var oe,he={},ve=null,De=null;if(X!=null)for(oe in X.ref!==void 0&&(De=X.ref),X.key!==void 0&&(ve=""+X.key),X)ee.call(X,oe)&&!R.hasOwnProperty(oe)&&(he[oe]=X[oe]);var Fe=arguments.length-2;if(Fe===1)he.children=fe;else if(1<Fe){for(var Ke=Array(Fe),rt=0;rt<Fe;rt++)Ke[rt]=arguments[rt+2];he.children=Ke}if(O&&O.defaultProps)for(oe in Fe=O.defaultProps,Fe)he[oe]===void 0&&(he[oe]=Fe[oe]);return{$$typeof:n,type:O,key:ve,ref:De,props:he,_owner:ae.current}}function N(O,X){return{$$typeof:n,type:O.type,key:X,ref:O.ref,props:O.props,_owner:O._owner}}function U(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function B(O){var X={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(fe){return X[fe]})}var $=/\/+/g;function A(O,X){return typeof O=="object"&&O!==null&&O.key!=null?B(""+O.key):X.toString(36)}function we(O,X,fe,oe,he){var ve=typeof O;(ve==="undefined"||ve==="boolean")&&(O=null);var De=!1;if(O===null)De=!0;else switch(ve){case"string":case"number":De=!0;break;case"object":switch(O.$$typeof){case n:case e:De=!0}}if(De)return De=O,he=he(De),O=oe===""?"."+A(De,0):oe,W(he)?(fe="",O!=null&&(fe=O.replace($,"$&/")+"/"),we(he,X,fe,"",function(rt){return rt})):he!=null&&(U(he)&&(he=N(he,fe+(!he.key||De&&De.key===he.key?"":(""+he.key).replace($,"$&/")+"/")+O)),X.push(he)),1;if(De=0,oe=oe===""?".":oe+":",W(O))for(var Fe=0;Fe<O.length;Fe++){ve=O[Fe];var Ke=oe+A(ve,Fe);De+=we(ve,X,fe,Ke,he)}else if(Ke=E(O),typeof Ke=="function")for(O=Ke.call(O),Fe=0;!(ve=O.next()).done;)ve=ve.value,Ke=oe+A(ve,Fe++),De+=we(ve,X,fe,Ke,he);else if(ve==="object")throw X=String(O),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return De}function Ue(O,X,fe){if(O==null)return O;var oe=[],he=0;return we(O,oe,"","",function(ve){return X.call(fe,ve,he++)}),oe}function Ve(O){if(O._status===-1){var X=O._result;X=X(),X.then(function(fe){(O._status===0||O._status===-1)&&(O._status=1,O._result=fe)},function(fe){(O._status===0||O._status===-1)&&(O._status=2,O._result=fe)}),O._status===-1&&(O._status=0,O._result=X)}if(O._status===1)return O._result.default;throw O._result}var Te={current:null},le={transition:null},J={ReactCurrentDispatcher:Te,ReactCurrentBatchConfig:le,ReactCurrentOwner:ae};function Z(){throw Error("act(...) is not supported in production builds of React.")}return Oe.Children={map:Ue,forEach:function(O,X,fe){Ue(O,function(){X.apply(this,arguments)},fe)},count:function(O){var X=0;return Ue(O,function(){X++}),X},toArray:function(O){return Ue(O,function(X){return X})||[]},only:function(O){if(!U(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Oe.Component=k,Oe.Fragment=t,Oe.Profiler=o,Oe.PureComponent=M,Oe.StrictMode=r,Oe.Suspense=p,Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J,Oe.act=Z,Oe.cloneElement=function(O,X,fe){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var oe=L({},O.props),he=O.key,ve=O.ref,De=O._owner;if(X!=null){if(X.ref!==void 0&&(ve=X.ref,De=ae.current),X.key!==void 0&&(he=""+X.key),O.type&&O.type.defaultProps)var Fe=O.type.defaultProps;for(Ke in X)ee.call(X,Ke)&&!R.hasOwnProperty(Ke)&&(oe[Ke]=X[Ke]===void 0&&Fe!==void 0?Fe[Ke]:X[Ke])}var Ke=arguments.length-2;if(Ke===1)oe.children=fe;else if(1<Ke){Fe=Array(Ke);for(var rt=0;rt<Ke;rt++)Fe[rt]=arguments[rt+2];oe.children=Fe}return{$$typeof:n,type:O.type,key:he,ref:ve,props:oe,_owner:De}},Oe.createContext=function(O){return O={$$typeof:c,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:a,_context:O},O.Consumer=O},Oe.createElement=I,Oe.createFactory=function(O){var X=I.bind(null,O);return X.type=O,X},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(O){return{$$typeof:d,render:O}},Oe.isValidElement=U,Oe.lazy=function(O){return{$$typeof:v,_payload:{_status:-1,_result:O},_init:Ve}},Oe.memo=function(O,X){return{$$typeof:m,type:O,compare:X===void 0?null:X}},Oe.startTransition=function(O){var X=le.transition;le.transition={};try{O()}finally{le.transition=X}},Oe.unstable_act=Z,Oe.useCallback=function(O,X){return Te.current.useCallback(O,X)},Oe.useContext=function(O){return Te.current.useContext(O)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(O){return Te.current.useDeferredValue(O)},Oe.useEffect=function(O,X){return Te.current.useEffect(O,X)},Oe.useId=function(){return Te.current.useId()},Oe.useImperativeHandle=function(O,X,fe){return Te.current.useImperativeHandle(O,X,fe)},Oe.useInsertionEffect=function(O,X){return Te.current.useInsertionEffect(O,X)},Oe.useLayoutEffect=function(O,X){return Te.current.useLayoutEffect(O,X)},Oe.useMemo=function(O,X){return Te.current.useMemo(O,X)},Oe.useReducer=function(O,X,fe){return Te.current.useReducer(O,X,fe)},Oe.useRef=function(O){return Te.current.useRef(O)},Oe.useState=function(O){return Te.current.useState(O)},Oe.useSyncExternalStore=function(O,X,fe){return Te.current.useSyncExternalStore(O,X,fe)},Oe.useTransition=function(){return Te.current.useTransition()},Oe.version="18.3.1",Oe}var M0;function am(){return M0||(M0=1,Of.exports=lS()),Of.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U0;function cS(){if(U0)return Il;U0=1;var n=am(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(d,p,m){var v,w={},E=null,b=null;m!==void 0&&(E=""+m),p.key!==void 0&&(E=""+p.key),p.ref!==void 0&&(b=p.ref);for(v in p)r.call(p,v)&&!a.hasOwnProperty(v)&&(w[v]=p[v]);if(d&&d.defaultProps)for(v in p=d.defaultProps,p)w[v]===void 0&&(w[v]=p[v]);return{$$typeof:e,type:d,key:E,ref:b,props:w,_owner:o.current}}return Il.Fragment=t,Il.jsx=c,Il.jsxs=c,Il}var F0;function uS(){return F0||(F0=1,Lf.exports=cS()),Lf.exports}var u=uS(),P=am();const Lh=aS(P),hS=oS({__proto__:null,default:Lh},[P]);var Fu={},Mf={exports:{}},pn={},Uf={exports:{}},Ff={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B0;function dS(){return B0||(B0=1,function(n){function e(le,J){var Z=le.length;le.push(J);e:for(;0<Z;){var O=Z-1>>>1,X=le[O];if(0<o(X,J))le[O]=J,le[Z]=X,Z=O;else break e}}function t(le){return le.length===0?null:le[0]}function r(le){if(le.length===0)return null;var J=le[0],Z=le.pop();if(Z!==J){le[0]=Z;e:for(var O=0,X=le.length,fe=X>>>1;O<fe;){var oe=2*(O+1)-1,he=le[oe],ve=oe+1,De=le[ve];if(0>o(he,Z))ve<X&&0>o(De,he)?(le[O]=De,le[ve]=Z,O=ve):(le[O]=he,le[oe]=Z,O=oe);else if(ve<X&&0>o(De,Z))le[O]=De,le[ve]=Z,O=ve;else break e}}return J}function o(le,J){var Z=le.sortIndex-J.sortIndex;return Z!==0?Z:le.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var p=[],m=[],v=1,w=null,E=3,b=!1,L=!1,V=!1,k=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(le){for(var J=t(m);J!==null;){if(J.callback===null)r(m);else if(J.startTime<=le)r(m),J.sortIndex=J.expirationTime,e(p,J);else break;J=t(m)}}function W(le){if(V=!1,j(le),!L)if(t(p)!==null)L=!0,Ve(ee);else{var J=t(m);J!==null&&Te(W,J.startTime-le)}}function ee(le,J){L=!1,V&&(V=!1,D(I),I=-1),b=!0;var Z=E;try{for(j(J),w=t(p);w!==null&&(!(w.expirationTime>J)||le&&!B());){var O=w.callback;if(typeof O=="function"){w.callback=null,E=w.priorityLevel;var X=O(w.expirationTime<=J);J=n.unstable_now(),typeof X=="function"?w.callback=X:w===t(p)&&r(p),j(J)}else r(p);w=t(p)}if(w!==null)var fe=!0;else{var oe=t(m);oe!==null&&Te(W,oe.startTime-J),fe=!1}return fe}finally{w=null,E=Z,b=!1}}var ae=!1,R=null,I=-1,N=5,U=-1;function B(){return!(n.unstable_now()-U<N)}function $(){if(R!==null){var le=n.unstable_now();U=le;var J=!0;try{J=R(!0,le)}finally{J?A():(ae=!1,R=null)}}else ae=!1}var A;if(typeof M=="function")A=function(){M($)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,Ue=we.port2;we.port1.onmessage=$,A=function(){Ue.postMessage(null)}}else A=function(){k($,0)};function Ve(le){R=le,ae||(ae=!0,A())}function Te(le,J){I=k(function(){le(n.unstable_now())},J)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(le){le.callback=null},n.unstable_continueExecution=function(){L||b||(L=!0,Ve(ee))},n.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<le?Math.floor(1e3/le):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(le){switch(E){case 1:case 2:case 3:var J=3;break;default:J=E}var Z=E;E=J;try{return le()}finally{E=Z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(le,J){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var Z=E;E=le;try{return J()}finally{E=Z}},n.unstable_scheduleCallback=function(le,J,Z){var O=n.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?O+Z:O):Z=O,le){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=Z+X,le={id:v++,callback:J,priorityLevel:le,startTime:Z,expirationTime:X,sortIndex:-1},Z>O?(le.sortIndex=Z,e(m,le),t(p)===null&&le===t(m)&&(V?(D(I),I=-1):V=!0,Te(W,Z-O))):(le.sortIndex=X,e(p,le),L||b||(L=!0,Ve(ee))),le},n.unstable_shouldYield=B,n.unstable_wrapCallback=function(le){var J=E;return function(){var Z=E;E=J;try{return le.apply(this,arguments)}finally{E=Z}}}}(Ff)),Ff}var z0;function fS(){return z0||(z0=1,Uf.exports=dS()),Uf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $0;function pS(){if($0)return pn;$0=1;var n=am(),e=fS();function t(s){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+s,l=1;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function a(s,i){c(s,i),c(s+"Capture",i)}function c(s,i){for(o[s]=i,s=0;s<i.length;s++)r.add(i[s])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},w={};function E(s){return p.call(w,s)?!0:p.call(v,s)?!1:m.test(s)?w[s]=!0:(v[s]=!0,!1)}function b(s,i,l,f){if(l!==null&&l.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return f?!1:l!==null?!l.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function L(s,i,l,f){if(i===null||typeof i>"u"||b(s,i,l,f))return!0;if(f)return!1;if(l!==null)switch(l.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function V(s,i,l,f,g,x,T){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=l,this.propertyName=s,this.type=i,this.sanitizeURL=x,this.removeEmptyString=T}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){k[s]=new V(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var i=s[0];k[i]=new V(i,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){k[s]=new V(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){k[s]=new V(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){k[s]=new V(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){k[s]=new V(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){k[s]=new V(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){k[s]=new V(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){k[s]=new V(s,5,!1,s.toLowerCase(),null,!1,!1)});var D=/[\-:]([a-z])/g;function M(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var i=s.replace(D,M);k[i]=new V(i,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var i=s.replace(D,M);k[i]=new V(i,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var i=s.replace(D,M);k[i]=new V(i,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){k[s]=new V(s,1,!1,s.toLowerCase(),null,!1,!1)}),k.xlinkHref=new V("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){k[s]=new V(s,1,!1,s.toLowerCase(),null,!0,!0)});function j(s,i,l,f){var g=k.hasOwnProperty(i)?k[i]:null;(g!==null?g.type!==0:f||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(L(i,l,g,f)&&(l=null),f||g===null?E(i)&&(l===null?s.removeAttribute(i):s.setAttribute(i,""+l)):g.mustUseProperty?s[g.propertyName]=l===null?g.type===3?!1:"":l:(i=g.attributeName,f=g.attributeNamespace,l===null?s.removeAttribute(i):(g=g.type,l=g===3||g===4&&l===!0?"":""+l,f?s.setAttributeNS(f,i,l):s.setAttribute(i,l))))}var W=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ee=Symbol.for("react.element"),ae=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),B=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),we=Symbol.for("react.suspense_list"),Ue=Symbol.for("react.memo"),Ve=Symbol.for("react.lazy"),Te=Symbol.for("react.offscreen"),le=Symbol.iterator;function J(s){return s===null||typeof s!="object"?null:(s=le&&s[le]||s["@@iterator"],typeof s=="function"?s:null)}var Z=Object.assign,O;function X(s){if(O===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);O=i&&i[1]||""}return`
`+O+s}var fe=!1;function oe(s,i){if(!s||fe)return"";fe=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(K){var f=K}Reflect.construct(s,[],i)}else{try{i.call()}catch(K){f=K}s.call(i.prototype)}else{try{throw Error()}catch(K){f=K}s()}}catch(K){if(K&&f&&typeof K.stack=="string"){for(var g=K.stack.split(`
`),x=f.stack.split(`
`),T=g.length-1,C=x.length-1;1<=T&&0<=C&&g[T]!==x[C];)C--;for(;1<=T&&0<=C;T--,C--)if(g[T]!==x[C]){if(T!==1||C!==1)do if(T--,C--,0>C||g[T]!==x[C]){var F=`
`+g[T].replace(" at new "," at ");return s.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",s.displayName)),F}while(1<=T&&0<=C);break}}}finally{fe=!1,Error.prepareStackTrace=l}return(s=s?s.displayName||s.name:"")?X(s):""}function he(s){switch(s.tag){case 5:return X(s.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return s=oe(s.type,!1),s;case 11:return s=oe(s.type.render,!1),s;case 1:return s=oe(s.type,!0),s;default:return""}}function ve(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case R:return"Fragment";case ae:return"Portal";case N:return"Profiler";case I:return"StrictMode";case A:return"Suspense";case we:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case B:return(s.displayName||"Context")+".Consumer";case U:return(s._context.displayName||"Context")+".Provider";case $:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Ue:return i=s.displayName||null,i!==null?i:ve(s.type)||"Memo";case Ve:i=s._payload,s=s._init;try{return ve(s(i))}catch{}}return null}function De(s){var i=s.type;switch(s.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=i.render,s=s.displayName||s.name||"",i.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ve(i);case 8:return i===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Fe(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ke(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function rt(s){var i=Ke(s)?"checked":"value",l=Object.getOwnPropertyDescriptor(s.constructor.prototype,i),f=""+s[i];if(!s.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,x=l.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return g.call(this)},set:function(T){f=""+T,x.call(this,T)}}),Object.defineProperty(s,i,{enumerable:l.enumerable}),{getValue:function(){return f},setValue:function(T){f=""+T},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function bt(s){s._valueTracker||(s._valueTracker=rt(s))}function Mr(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var l=i.getValue(),f="";return s&&(f=Ke(s)?s.checked?"true":"false":s.value),s=f,s!==l?(i.setValue(s),!0):!1}function mr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Ur(s,i){var l=i.checked;return Z({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??s._wrapperState.initialChecked})}function vs(s,i){var l=i.defaultValue==null?"":i.defaultValue,f=i.checked!=null?i.checked:i.defaultChecked;l=Fe(i.value!=null?i.value:l),s._wrapperState={initialChecked:f,initialValue:l,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Y(s,i){i=i.checked,i!=null&&j(s,"checked",i,!1)}function He(s,i){Y(s,i);var l=Fe(i.value),f=i.type;if(l!=null)f==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+l):s.value!==""+l&&(s.value=""+l);else if(f==="submit"||f==="reset"){s.removeAttribute("value");return}i.hasOwnProperty("value")?xs(s,i.type,l):i.hasOwnProperty("defaultValue")&&xs(s,i.type,Fe(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(s.defaultChecked=!!i.defaultChecked)}function ot(s,i,l){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var f=i.type;if(!(f!=="submit"&&f!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+s._wrapperState.initialValue,l||i===s.value||(s.value=i),s.defaultValue=i}l=s.name,l!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,l!==""&&(s.name=l)}function xs(s,i,l){(i!=="number"||mr(s.ownerDocument)!==s)&&(l==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+l&&(s.defaultValue=""+l))}var Hn=Array.isArray;function Pn(s,i,l,f){if(s=s.options,i){i={};for(var g=0;g<l.length;g++)i["$"+l[g]]=!0;for(l=0;l<s.length;l++)g=i.hasOwnProperty("$"+s[l].value),s[l].selected!==g&&(s[l].selected=g),g&&f&&(s[l].defaultSelected=!0)}else{for(l=""+Fe(l),i=null,g=0;g<s.length;g++){if(s[g].value===l){s[g].selected=!0,f&&(s[g].defaultSelected=!0);return}i!==null||s[g].disabled||(i=s[g])}i!==null&&(i.selected=!0)}}function Da(s,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return Z({},i,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function po(s,i){var l=i.value;if(l==null){if(l=i.children,i=i.defaultValue,l!=null){if(i!=null)throw Error(t(92));if(Hn(l)){if(1<l.length)throw Error(t(93));l=l[0]}i=l}i==null&&(i=""),l=i}s._wrapperState={initialValue:Fe(l)}}function mo(s,i){var l=Fe(i.value),f=Fe(i.defaultValue);l!=null&&(l=""+l,l!==s.value&&(s.value=l),i.defaultValue==null&&s.defaultValue!==l&&(s.defaultValue=l)),f!=null&&(s.defaultValue=""+f)}function Va(s){var i=s.textContent;i===s._wrapperState.initialValue&&i!==""&&i!==null&&(s.value=i)}function St(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function It(s,i){return s==null||s==="http://www.w3.org/1999/xhtml"?St(i):s==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Fr,La=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,l,f,g){MSApp.execUnsafeLocalFunction(function(){return s(i,l,f,g)})}:s}(function(s,i){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=i;else{for(Fr=Fr||document.createElement("div"),Fr.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Fr.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;i.firstChild;)s.appendChild(i.firstChild)}});function ws(s,i){if(i){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=i;return}}s.textContent=i}var pi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mi=["Webkit","ms","Moz","O"];Object.keys(pi).forEach(function(s){mi.forEach(function(i){i=i+s.charAt(0).toUpperCase()+s.substring(1),pi[i]=pi[s]})});function Oa(s,i,l){return i==null||typeof i=="boolean"||i===""?"":l||typeof i!="number"||i===0||pi.hasOwnProperty(s)&&pi[s]?(""+i).trim():i+"px"}function Ma(s,i){s=s.style;for(var l in i)if(i.hasOwnProperty(l)){var f=l.indexOf("--")===0,g=Oa(l,i[l],f);l==="float"&&(l="cssFloat"),f?s.setProperty(l,g):s[l]=g}}var Ua=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fa(s,i){if(i){if(Ua[s]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Ba(s,i){if(s.indexOf("-")===-1)return typeof i.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gi=null;function go(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var yo=null,An=null,gr=null;function vo(s){if(s=hl(s)){if(typeof yo!="function")throw Error(t(280));var i=s.stateNode;i&&(i=tu(i),yo(s.stateNode,s.type,i))}}function yr(s){An?gr?gr.push(s):gr=[s]:An=s}function za(){if(An){var s=An,i=gr;if(gr=An=null,vo(s),i)for(s=0;s<i.length;s++)vo(i[s])}}function yi(s,i){return s(i)}function $a(){}var Br=!1;function qa(s,i,l){if(Br)return s(i,l);Br=!0;try{return yi(s,i,l)}finally{Br=!1,(An!==null||gr!==null)&&($a(),za())}}function mt(s,i){var l=s.stateNode;if(l===null)return null;var f=tu(l);if(f===null)return null;l=f[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(t(231,i,typeof l));return l}var xo=!1;if(d)try{var Wn={};Object.defineProperty(Wn,"passive",{get:function(){xo=!0}}),window.addEventListener("test",Wn,Wn),window.removeEventListener("test",Wn,Wn)}catch{xo=!1}function vi(s,i,l,f,g,x,T,C,F){var K=Array.prototype.slice.call(arguments,3);try{i.apply(l,K)}catch(ne){this.onError(ne)}}var xi=!1,wo=null,Kn=!1,Ga=null,cd={onError:function(s){xi=!0,wo=s}};function _o(s,i,l,f,g,x,T,C,F){xi=!1,wo=null,vi.apply(cd,arguments)}function Ic(s,i,l,f,g,x,T,C,F){if(_o.apply(this,arguments),xi){if(xi){var K=wo;xi=!1,wo=null}else throw Error(t(198));Kn||(Kn=!0,Ga=K)}}function Qn(s){var i=s,l=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(l=i.return),s=i.return;while(s)}return i.tag===3?l:null}function wi(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function Yn(s){if(Qn(s)!==s)throw Error(t(188))}function Nc(s){var i=s.alternate;if(!i){if(i=Qn(s),i===null)throw Error(t(188));return i!==s?null:s}for(var l=s,f=i;;){var g=l.return;if(g===null)break;var x=g.alternate;if(x===null){if(f=g.return,f!==null){l=f;continue}break}if(g.child===x.child){for(x=g.child;x;){if(x===l)return Yn(g),s;if(x===f)return Yn(g),i;x=x.sibling}throw Error(t(188))}if(l.return!==f.return)l=g,f=x;else{for(var T=!1,C=g.child;C;){if(C===l){T=!0,l=g,f=x;break}if(C===f){T=!0,f=g,l=x;break}C=C.sibling}if(!T){for(C=x.child;C;){if(C===l){T=!0,l=x,f=g;break}if(C===f){T=!0,f=x,l=g;break}C=C.sibling}if(!T)throw Error(t(189))}}if(l.alternate!==f)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?s:i}function Ha(s){return s=Nc(s),s!==null?Eo(s):null}function Eo(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var i=Eo(s);if(i!==null)return i;s=s.sibling}return null}var To=e.unstable_scheduleCallback,Wa=e.unstable_cancelCallback,kc=e.unstable_shouldYield,ud=e.unstable_requestPaint,et=e.unstable_now,Pc=e.unstable_getCurrentPriorityLevel,_i=e.unstable_ImmediatePriority,_s=e.unstable_UserBlockingPriority,Cn=e.unstable_NormalPriority,Ka=e.unstable_LowPriority,Ac=e.unstable_IdlePriority,Ei=null,vn=null;function Cc(s){if(vn&&typeof vn.onCommitFiberRoot=="function")try{vn.onCommitFiberRoot(Ei,s,void 0,(s.current.flags&128)===128)}catch{}}var tn=Math.clz32?Math.clz32:jc,Qa=Math.log,Rc=Math.LN2;function jc(s){return s>>>=0,s===0?32:31-(Qa(s)/Rc|0)|0}var bo=64,So=4194304;function Es(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Ti(s,i){var l=s.pendingLanes;if(l===0)return 0;var f=0,g=s.suspendedLanes,x=s.pingedLanes,T=l&268435455;if(T!==0){var C=T&~g;C!==0?f=Es(C):(x&=T,x!==0&&(f=Es(x)))}else T=l&~g,T!==0?f=Es(T):x!==0&&(f=Es(x));if(f===0)return 0;if(i!==0&&i!==f&&(i&g)===0&&(g=f&-f,x=i&-i,g>=x||g===16&&(x&4194240)!==0))return i;if((f&4)!==0&&(f|=l&16),i=s.entangledLanes,i!==0)for(s=s.entanglements,i&=f;0<i;)l=31-tn(i),g=1<<l,f|=s[l],i&=~g;return f}function hd(s,i){switch(s){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zr(s,i){for(var l=s.suspendedLanes,f=s.pingedLanes,g=s.expirationTimes,x=s.pendingLanes;0<x;){var T=31-tn(x),C=1<<T,F=g[T];F===-1?((C&l)===0||(C&f)!==0)&&(g[T]=hd(C,i)):F<=i&&(s.expiredLanes|=C),x&=~C}}function xn(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function bi(){var s=bo;return bo<<=1,(bo&4194240)===0&&(bo=64),s}function Ts(s){for(var i=[],l=0;31>l;l++)i.push(s);return i}function bs(s,i,l){s.pendingLanes|=i,i!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,i=31-tn(i),s[i]=l}function Ze(s,i){var l=s.pendingLanes&~i;s.pendingLanes=i,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=i,s.mutableReadLanes&=i,s.entangledLanes&=i,i=s.entanglements;var f=s.eventTimes;for(s=s.expirationTimes;0<l;){var g=31-tn(l),x=1<<g;i[g]=0,f[g]=-1,s[g]=-1,l&=~x}}function Ss(s,i){var l=s.entangledLanes|=i;for(s=s.entanglements;l;){var f=31-tn(l),g=1<<f;g&i|s[f]&i&&(s[f]|=i),l&=~g}}var Be=0;function Is(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Dc,Io,Vc,Lc,Oc,Ya=!1,vr=[],Mt=null,Xn=null,Jn=null,Ns=new Map,Rn=new Map,xr=[],dd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mc(s,i){switch(s){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":Xn=null;break;case"mouseover":case"mouseout":Jn=null;break;case"pointerover":case"pointerout":Ns.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rn.delete(i.pointerId)}}function an(s,i,l,f,g,x){return s===null||s.nativeEvent!==x?(s={blockedOn:i,domEventName:l,eventSystemFlags:f,nativeEvent:x,targetContainers:[g]},i!==null&&(i=hl(i),i!==null&&Io(i)),s):(s.eventSystemFlags|=f,i=s.targetContainers,g!==null&&i.indexOf(g)===-1&&i.push(g),s)}function fd(s,i,l,f,g){switch(i){case"focusin":return Mt=an(Mt,s,i,l,f,g),!0;case"dragenter":return Xn=an(Xn,s,i,l,f,g),!0;case"mouseover":return Jn=an(Jn,s,i,l,f,g),!0;case"pointerover":var x=g.pointerId;return Ns.set(x,an(Ns.get(x)||null,s,i,l,f,g)),!0;case"gotpointercapture":return x=g.pointerId,Rn.set(x,an(Rn.get(x)||null,s,i,l,f,g)),!0}return!1}function Uc(s){var i=Pi(s.target);if(i!==null){var l=Qn(i);if(l!==null){if(i=l.tag,i===13){if(i=wi(l),i!==null){s.blockedOn=i,Oc(s.priority,function(){Vc(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function $r(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var l=No(s.domEventName,s.eventSystemFlags,i[0],s.nativeEvent);if(l===null){l=s.nativeEvent;var f=new l.constructor(l.type,l);gi=f,l.target.dispatchEvent(f),gi=null}else return i=hl(l),i!==null&&Io(i),s.blockedOn=l,!1;i.shift()}return!0}function Si(s,i,l){$r(s)&&l.delete(i)}function Fc(){Ya=!1,Mt!==null&&$r(Mt)&&(Mt=null),Xn!==null&&$r(Xn)&&(Xn=null),Jn!==null&&$r(Jn)&&(Jn=null),Ns.forEach(Si),Rn.forEach(Si)}function Zn(s,i){s.blockedOn===i&&(s.blockedOn=null,Ya||(Ya=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Fc)))}function er(s){function i(g){return Zn(g,s)}if(0<vr.length){Zn(vr[0],s);for(var l=1;l<vr.length;l++){var f=vr[l];f.blockedOn===s&&(f.blockedOn=null)}}for(Mt!==null&&Zn(Mt,s),Xn!==null&&Zn(Xn,s),Jn!==null&&Zn(Jn,s),Ns.forEach(i),Rn.forEach(i),l=0;l<xr.length;l++)f=xr[l],f.blockedOn===s&&(f.blockedOn=null);for(;0<xr.length&&(l=xr[0],l.blockedOn===null);)Uc(l),l.blockedOn===null&&xr.shift()}var qr=W.ReactCurrentBatchConfig,ks=!0;function at(s,i,l,f){var g=Be,x=qr.transition;qr.transition=null;try{Be=1,Xa(s,i,l,f)}finally{Be=g,qr.transition=x}}function pd(s,i,l,f){var g=Be,x=qr.transition;qr.transition=null;try{Be=4,Xa(s,i,l,f)}finally{Be=g,qr.transition=x}}function Xa(s,i,l,f){if(ks){var g=No(s,i,l,f);if(g===null)Sd(s,i,f,Ii,l),Mc(s,f);else if(fd(g,s,i,l,f))f.stopPropagation();else if(Mc(s,f),i&4&&-1<dd.indexOf(s)){for(;g!==null;){var x=hl(g);if(x!==null&&Dc(x),x=No(s,i,l,f),x===null&&Sd(s,i,f,Ii,l),x===g)break;g=x}g!==null&&f.stopPropagation()}else Sd(s,i,f,null,l)}}var Ii=null;function No(s,i,l,f){if(Ii=null,s=go(f),s=Pi(s),s!==null)if(i=Qn(s),i===null)s=null;else if(l=i.tag,l===13){if(s=wi(i),s!==null)return s;s=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null);return Ii=s,null}function Ja(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Pc()){case _i:return 1;case _s:return 4;case Cn:case Ka:return 16;case Ac:return 536870912;default:return 16}default:return 16}}var wn=null,ko=null,ln=null;function Za(){if(ln)return ln;var s,i=ko,l=i.length,f,g="value"in wn?wn.value:wn.textContent,x=g.length;for(s=0;s<l&&i[s]===g[s];s++);var T=l-s;for(f=1;f<=T&&i[l-f]===g[x-f];f++);return ln=g.slice(s,1<f?1-f:void 0)}function Po(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function wr(){return!0}function el(){return!1}function Ut(s){function i(l,f,g,x,T){this._reactName=l,this._targetInst=g,this.type=f,this.nativeEvent=x,this.target=T,this.currentTarget=null;for(var C in s)s.hasOwnProperty(C)&&(l=s[C],this[C]=l?l(x):x[C]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?wr:el,this.isPropagationStopped=el,this}return Z(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=wr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=wr)},persist:function(){},isPersistent:wr}),i}var tr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ao=Ut(tr),_r=Z({},tr,{view:0,detail:0}),md=Ut(_r),Co,Gr,Ps,Ni=Z({},_r,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Er,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ps&&(Ps&&s.type==="mousemove"?(Co=s.screenX-Ps.screenX,Gr=s.screenY-Ps.screenY):Gr=Co=0,Ps=s),Co)},movementY:function(s){return"movementY"in s?s.movementY:Gr}}),Ro=Ut(Ni),tl=Z({},Ni,{dataTransfer:0}),Bc=Ut(tl),jo=Z({},_r,{relatedTarget:0}),Do=Ut(jo),zc=Z({},tr,{animationName:0,elapsedTime:0,pseudoElement:0}),Hr=Ut(zc),$c=Z({},tr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),qc=Ut($c),Gc=Z({},tr,{data:0}),nl=Ut(Gc),Vo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wc(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=Hc[s])?!!i[s]:!1}function Er(){return Wc}var h=Z({},_r,{key:function(s){if(s.key){var i=Vo[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=Po(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?nn[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Er,charCode:function(s){return s.type==="keypress"?Po(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Po(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),y=Ut(h),_=Z({},Ni,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),S=Ut(_),q=Z({},_r,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Er}),Q=Ut(q),ue=Z({},tr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xe=Ut(ue),Nt=Z({},Ni,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),$e=Ut(Nt),jt=[9,13,27,32],wt=d&&"CompositionEvent"in window,jn=null;d&&"documentMode"in document&&(jn=document.documentMode);var _n=d&&"TextEvent"in window&&!jn,ki=d&&(!wt||jn&&8<jn&&11>=jn),Lo=" ",Cg=!1;function Rg(s,i){switch(s){case"keyup":return jt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jg(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Oo=!1;function rb(s,i){switch(s){case"compositionend":return jg(i);case"keypress":return i.which!==32?null:(Cg=!0,Lo);case"textInput":return s=i.data,s===Lo&&Cg?null:s;default:return null}}function sb(s,i){if(Oo)return s==="compositionend"||!wt&&Rg(s,i)?(s=Za(),ln=ko=wn=null,Oo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return ki&&i.locale!=="ko"?null:i.data;default:return null}}var ib={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dg(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!ib[s.type]:i==="textarea"}function Vg(s,i,l,f){yr(f),i=Jc(i,"onChange"),0<i.length&&(l=new Ao("onChange","change",null,l,f),s.push({event:l,listeners:i}))}var rl=null,sl=null;function ob(s){Zg(s,0)}function Kc(s){var i=zo(s);if(Mr(i))return s}function ab(s,i){if(s==="change")return i}var Lg=!1;if(d){var gd;if(d){var yd="oninput"in document;if(!yd){var Og=document.createElement("div");Og.setAttribute("oninput","return;"),yd=typeof Og.oninput=="function"}gd=yd}else gd=!1;Lg=gd&&(!document.documentMode||9<document.documentMode)}function Mg(){rl&&(rl.detachEvent("onpropertychange",Ug),sl=rl=null)}function Ug(s){if(s.propertyName==="value"&&Kc(sl)){var i=[];Vg(i,sl,s,go(s)),qa(ob,i)}}function lb(s,i,l){s==="focusin"?(Mg(),rl=i,sl=l,rl.attachEvent("onpropertychange",Ug)):s==="focusout"&&Mg()}function cb(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Kc(sl)}function ub(s,i){if(s==="click")return Kc(i)}function hb(s,i){if(s==="input"||s==="change")return Kc(i)}function db(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var nr=typeof Object.is=="function"?Object.is:db;function il(s,i){if(nr(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var l=Object.keys(s),f=Object.keys(i);if(l.length!==f.length)return!1;for(f=0;f<l.length;f++){var g=l[f];if(!p.call(i,g)||!nr(s[g],i[g]))return!1}return!0}function Fg(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Bg(s,i){var l=Fg(s);s=0;for(var f;l;){if(l.nodeType===3){if(f=s+l.textContent.length,s<=i&&f>=i)return{node:l,offset:i-s};s=f}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Fg(l)}}function zg(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?zg(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function $g(){for(var s=window,i=mr();i instanceof s.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)s=i.contentWindow;else break;i=mr(s.document)}return i}function vd(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}function fb(s){var i=$g(),l=s.focusedElem,f=s.selectionRange;if(i!==l&&l&&l.ownerDocument&&zg(l.ownerDocument.documentElement,l)){if(f!==null&&vd(l)){if(i=f.start,s=f.end,s===void 0&&(s=i),"selectionStart"in l)l.selectionStart=i,l.selectionEnd=Math.min(s,l.value.length);else if(s=(i=l.ownerDocument||document)&&i.defaultView||window,s.getSelection){s=s.getSelection();var g=l.textContent.length,x=Math.min(f.start,g);f=f.end===void 0?x:Math.min(f.end,g),!s.extend&&x>f&&(g=f,f=x,x=g),g=Bg(l,x);var T=Bg(l,f);g&&T&&(s.rangeCount!==1||s.anchorNode!==g.node||s.anchorOffset!==g.offset||s.focusNode!==T.node||s.focusOffset!==T.offset)&&(i=i.createRange(),i.setStart(g.node,g.offset),s.removeAllRanges(),x>f?(s.addRange(i),s.extend(T.node,T.offset)):(i.setEnd(T.node,T.offset),s.addRange(i)))}}for(i=[],s=l;s=s.parentNode;)s.nodeType===1&&i.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<i.length;l++)s=i[l],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var pb=d&&"documentMode"in document&&11>=document.documentMode,Mo=null,xd=null,ol=null,wd=!1;function qg(s,i,l){var f=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;wd||Mo==null||Mo!==mr(f)||(f=Mo,"selectionStart"in f&&vd(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),ol&&il(ol,f)||(ol=f,f=Jc(xd,"onSelect"),0<f.length&&(i=new Ao("onSelect","select",null,i,l),s.push({event:i,listeners:f}),i.target=Mo)))}function Qc(s,i){var l={};return l[s.toLowerCase()]=i.toLowerCase(),l["Webkit"+s]="webkit"+i,l["Moz"+s]="moz"+i,l}var Uo={animationend:Qc("Animation","AnimationEnd"),animationiteration:Qc("Animation","AnimationIteration"),animationstart:Qc("Animation","AnimationStart"),transitionend:Qc("Transition","TransitionEnd")},_d={},Gg={};d&&(Gg=document.createElement("div").style,"AnimationEvent"in window||(delete Uo.animationend.animation,delete Uo.animationiteration.animation,delete Uo.animationstart.animation),"TransitionEvent"in window||delete Uo.transitionend.transition);function Yc(s){if(_d[s])return _d[s];if(!Uo[s])return s;var i=Uo[s],l;for(l in i)if(i.hasOwnProperty(l)&&l in Gg)return _d[s]=i[l];return s}var Hg=Yc("animationend"),Wg=Yc("animationiteration"),Kg=Yc("animationstart"),Qg=Yc("transitionend"),Yg=new Map,Xg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function As(s,i){Yg.set(s,i),a(i,[s])}for(var Ed=0;Ed<Xg.length;Ed++){var Td=Xg[Ed],mb=Td.toLowerCase(),gb=Td[0].toUpperCase()+Td.slice(1);As(mb,"on"+gb)}As(Hg,"onAnimationEnd"),As(Wg,"onAnimationIteration"),As(Kg,"onAnimationStart"),As("dblclick","onDoubleClick"),As("focusin","onFocus"),As("focusout","onBlur"),As(Qg,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yb=new Set("cancel close invalid load scroll toggle".split(" ").concat(al));function Jg(s,i,l){var f=s.type||"unknown-event";s.currentTarget=l,Ic(f,i,void 0,s),s.currentTarget=null}function Zg(s,i){i=(i&4)!==0;for(var l=0;l<s.length;l++){var f=s[l],g=f.event;f=f.listeners;e:{var x=void 0;if(i)for(var T=f.length-1;0<=T;T--){var C=f[T],F=C.instance,K=C.currentTarget;if(C=C.listener,F!==x&&g.isPropagationStopped())break e;Jg(g,C,K),x=F}else for(T=0;T<f.length;T++){if(C=f[T],F=C.instance,K=C.currentTarget,C=C.listener,F!==x&&g.isPropagationStopped())break e;Jg(g,C,K),x=F}}}if(Kn)throw s=Ga,Kn=!1,Ga=null,s}function st(s,i){var l=i[Cd];l===void 0&&(l=i[Cd]=new Set);var f=s+"__bubble";l.has(f)||(ey(i,s,2,!1),l.add(f))}function bd(s,i,l){var f=0;i&&(f|=4),ey(l,s,f,i)}var Xc="_reactListening"+Math.random().toString(36).slice(2);function ll(s){if(!s[Xc]){s[Xc]=!0,r.forEach(function(l){l!=="selectionchange"&&(yb.has(l)||bd(l,!1,s),bd(l,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[Xc]||(i[Xc]=!0,bd("selectionchange",!1,i))}}function ey(s,i,l,f){switch(Ja(i)){case 1:var g=at;break;case 4:g=pd;break;default:g=Xa}l=g.bind(null,i,l,s),g=void 0,!xo||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(g=!0),f?g!==void 0?s.addEventListener(i,l,{capture:!0,passive:g}):s.addEventListener(i,l,!0):g!==void 0?s.addEventListener(i,l,{passive:g}):s.addEventListener(i,l,!1)}function Sd(s,i,l,f,g){var x=f;if((i&1)===0&&(i&2)===0&&f!==null)e:for(;;){if(f===null)return;var T=f.tag;if(T===3||T===4){var C=f.stateNode.containerInfo;if(C===g||C.nodeType===8&&C.parentNode===g)break;if(T===4)for(T=f.return;T!==null;){var F=T.tag;if((F===3||F===4)&&(F=T.stateNode.containerInfo,F===g||F.nodeType===8&&F.parentNode===g))return;T=T.return}for(;C!==null;){if(T=Pi(C),T===null)return;if(F=T.tag,F===5||F===6){f=x=T;continue e}C=C.parentNode}}f=f.return}qa(function(){var K=x,ne=go(l),se=[];e:{var te=Yg.get(s);if(te!==void 0){var de=Ao,me=s;switch(s){case"keypress":if(Po(l)===0)break e;case"keydown":case"keyup":de=y;break;case"focusin":me="focus",de=Do;break;case"focusout":me="blur",de=Do;break;case"beforeblur":case"afterblur":de=Do;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=Ro;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=Bc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=Q;break;case Hg:case Wg:case Kg:de=Hr;break;case Qg:de=Xe;break;case"scroll":de=md;break;case"wheel":de=$e;break;case"copy":case"cut":case"paste":de=qc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=S}var ge=(i&4)!==0,gt=!ge&&s==="scroll",G=ge?te!==null?te+"Capture":null:te;ge=[];for(var z=K,H;z!==null;){H=z;var ce=H.stateNode;if(H.tag===5&&ce!==null&&(H=ce,G!==null&&(ce=mt(z,G),ce!=null&&ge.push(cl(z,ce,H)))),gt)break;z=z.return}0<ge.length&&(te=new de(te,me,null,l,ne),se.push({event:te,listeners:ge}))}}if((i&7)===0){e:{if(te=s==="mouseover"||s==="pointerover",de=s==="mouseout"||s==="pointerout",te&&l!==gi&&(me=l.relatedTarget||l.fromElement)&&(Pi(me)||me[Wr]))break e;if((de||te)&&(te=ne.window===ne?ne:(te=ne.ownerDocument)?te.defaultView||te.parentWindow:window,de?(me=l.relatedTarget||l.toElement,de=K,me=me?Pi(me):null,me!==null&&(gt=Qn(me),me!==gt||me.tag!==5&&me.tag!==6)&&(me=null)):(de=null,me=K),de!==me)){if(ge=Ro,ce="onMouseLeave",G="onMouseEnter",z="mouse",(s==="pointerout"||s==="pointerover")&&(ge=S,ce="onPointerLeave",G="onPointerEnter",z="pointer"),gt=de==null?te:zo(de),H=me==null?te:zo(me),te=new ge(ce,z+"leave",de,l,ne),te.target=gt,te.relatedTarget=H,ce=null,Pi(ne)===K&&(ge=new ge(G,z+"enter",me,l,ne),ge.target=H,ge.relatedTarget=gt,ce=ge),gt=ce,de&&me)t:{for(ge=de,G=me,z=0,H=ge;H;H=Fo(H))z++;for(H=0,ce=G;ce;ce=Fo(ce))H++;for(;0<z-H;)ge=Fo(ge),z--;for(;0<H-z;)G=Fo(G),H--;for(;z--;){if(ge===G||G!==null&&ge===G.alternate)break t;ge=Fo(ge),G=Fo(G)}ge=null}else ge=null;de!==null&&ty(se,te,de,ge,!1),me!==null&&gt!==null&&ty(se,gt,me,ge,!0)}}e:{if(te=K?zo(K):window,de=te.nodeName&&te.nodeName.toLowerCase(),de==="select"||de==="input"&&te.type==="file")var xe=ab;else if(Dg(te))if(Lg)xe=hb;else{xe=cb;var _e=lb}else(de=te.nodeName)&&de.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(xe=ub);if(xe&&(xe=xe(s,K))){Vg(se,xe,l,ne);break e}_e&&_e(s,te,K),s==="focusout"&&(_e=te._wrapperState)&&_e.controlled&&te.type==="number"&&xs(te,"number",te.value)}switch(_e=K?zo(K):window,s){case"focusin":(Dg(_e)||_e.contentEditable==="true")&&(Mo=_e,xd=K,ol=null);break;case"focusout":ol=xd=Mo=null;break;case"mousedown":wd=!0;break;case"contextmenu":case"mouseup":case"dragend":wd=!1,qg(se,l,ne);break;case"selectionchange":if(pb)break;case"keydown":case"keyup":qg(se,l,ne)}var Ee;if(wt)e:{switch(s){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else Oo?Rg(s,l)&&(Pe="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Pe="onCompositionStart");Pe&&(ki&&l.locale!=="ko"&&(Oo||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&Oo&&(Ee=Za()):(wn=ne,ko="value"in wn?wn.value:wn.textContent,Oo=!0)),_e=Jc(K,Pe),0<_e.length&&(Pe=new nl(Pe,s,null,l,ne),se.push({event:Pe,listeners:_e}),Ee?Pe.data=Ee:(Ee=jg(l),Ee!==null&&(Pe.data=Ee)))),(Ee=_n?rb(s,l):sb(s,l))&&(K=Jc(K,"onBeforeInput"),0<K.length&&(ne=new nl("onBeforeInput","beforeinput",null,l,ne),se.push({event:ne,listeners:K}),ne.data=Ee))}Zg(se,i)})}function cl(s,i,l){return{instance:s,listener:i,currentTarget:l}}function Jc(s,i){for(var l=i+"Capture",f=[];s!==null;){var g=s,x=g.stateNode;g.tag===5&&x!==null&&(g=x,x=mt(s,l),x!=null&&f.unshift(cl(s,x,g)),x=mt(s,i),x!=null&&f.push(cl(s,x,g))),s=s.return}return f}function Fo(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function ty(s,i,l,f,g){for(var x=i._reactName,T=[];l!==null&&l!==f;){var C=l,F=C.alternate,K=C.stateNode;if(F!==null&&F===f)break;C.tag===5&&K!==null&&(C=K,g?(F=mt(l,x),F!=null&&T.unshift(cl(l,F,C))):g||(F=mt(l,x),F!=null&&T.push(cl(l,F,C)))),l=l.return}T.length!==0&&s.push({event:i,listeners:T})}var vb=/\r\n?/g,xb=/\u0000|\uFFFD/g;function ny(s){return(typeof s=="string"?s:""+s).replace(vb,`
`).replace(xb,"")}function Zc(s,i,l){if(i=ny(i),ny(s)!==i&&l)throw Error(t(425))}function eu(){}var Id=null,Nd=null;function kd(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Pd=typeof setTimeout=="function"?setTimeout:void 0,wb=typeof clearTimeout=="function"?clearTimeout:void 0,ry=typeof Promise=="function"?Promise:void 0,_b=typeof queueMicrotask=="function"?queueMicrotask:typeof ry<"u"?function(s){return ry.resolve(null).then(s).catch(Eb)}:Pd;function Eb(s){setTimeout(function(){throw s})}function Ad(s,i){var l=i,f=0;do{var g=l.nextSibling;if(s.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"){if(f===0){s.removeChild(g),er(i);return}f--}else l!=="$"&&l!=="$?"&&l!=="$!"||f++;l=g}while(l);er(i)}function Cs(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return s}function sy(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return s;i--}else l==="/$"&&i++}s=s.previousSibling}return null}var Bo=Math.random().toString(36).slice(2),Tr="__reactFiber$"+Bo,ul="__reactProps$"+Bo,Wr="__reactContainer$"+Bo,Cd="__reactEvents$"+Bo,Tb="__reactListeners$"+Bo,bb="__reactHandles$"+Bo;function Pi(s){var i=s[Tr];if(i)return i;for(var l=s.parentNode;l;){if(i=l[Wr]||l[Tr]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(s=sy(s);s!==null;){if(l=s[Tr])return l;s=sy(s)}return i}s=l,l=s.parentNode}return null}function hl(s){return s=s[Tr]||s[Wr],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function zo(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function tu(s){return s[ul]||null}var Rd=[],$o=-1;function Rs(s){return{current:s}}function it(s){0>$o||(s.current=Rd[$o],Rd[$o]=null,$o--)}function tt(s,i){$o++,Rd[$o]=s.current,s.current=i}var js={},Ht=Rs(js),cn=Rs(!1),Ai=js;function qo(s,i){var l=s.type.contextTypes;if(!l)return js;var f=s.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===i)return f.__reactInternalMemoizedMaskedChildContext;var g={},x;for(x in l)g[x]=i[x];return f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=i,s.__reactInternalMemoizedMaskedChildContext=g),g}function un(s){return s=s.childContextTypes,s!=null}function nu(){it(cn),it(Ht)}function iy(s,i,l){if(Ht.current!==js)throw Error(t(168));tt(Ht,i),tt(cn,l)}function oy(s,i,l){var f=s.stateNode;if(i=i.childContextTypes,typeof f.getChildContext!="function")return l;f=f.getChildContext();for(var g in f)if(!(g in i))throw Error(t(108,De(s)||"Unknown",g));return Z({},l,f)}function ru(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||js,Ai=Ht.current,tt(Ht,s),tt(cn,cn.current),!0}function ay(s,i,l){var f=s.stateNode;if(!f)throw Error(t(169));l?(s=oy(s,i,Ai),f.__reactInternalMemoizedMergedChildContext=s,it(cn),it(Ht),tt(Ht,s)):it(cn),tt(cn,l)}var Kr=null,su=!1,jd=!1;function ly(s){Kr===null?Kr=[s]:Kr.push(s)}function Sb(s){su=!0,ly(s)}function Ds(){if(!jd&&Kr!==null){jd=!0;var s=0,i=Be;try{var l=Kr;for(Be=1;s<l.length;s++){var f=l[s];do f=f(!0);while(f!==null)}Kr=null,su=!1}catch(g){throw Kr!==null&&(Kr=Kr.slice(s+1)),To(_i,Ds),g}finally{Be=i,jd=!1}}return null}var Go=[],Ho=0,iu=null,ou=0,Dn=[],Vn=0,Ci=null,Qr=1,Yr="";function Ri(s,i){Go[Ho++]=ou,Go[Ho++]=iu,iu=s,ou=i}function cy(s,i,l){Dn[Vn++]=Qr,Dn[Vn++]=Yr,Dn[Vn++]=Ci,Ci=s;var f=Qr;s=Yr;var g=32-tn(f)-1;f&=~(1<<g),l+=1;var x=32-tn(i)+g;if(30<x){var T=g-g%5;x=(f&(1<<T)-1).toString(32),f>>=T,g-=T,Qr=1<<32-tn(i)+g|l<<g|f,Yr=x+s}else Qr=1<<x|l<<g|f,Yr=s}function Dd(s){s.return!==null&&(Ri(s,1),cy(s,1,0))}function Vd(s){for(;s===iu;)iu=Go[--Ho],Go[Ho]=null,ou=Go[--Ho],Go[Ho]=null;for(;s===Ci;)Ci=Dn[--Vn],Dn[Vn]=null,Yr=Dn[--Vn],Dn[Vn]=null,Qr=Dn[--Vn],Dn[Vn]=null}var En=null,Tn=null,lt=!1,rr=null;function uy(s,i){var l=Un(5,null,null,0);l.elementType="DELETED",l.stateNode=i,l.return=s,i=s.deletions,i===null?(s.deletions=[l],s.flags|=16):i.push(l)}function hy(s,i){switch(s.tag){case 5:var l=s.type;return i=i.nodeType!==1||l.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(s.stateNode=i,En=s,Tn=Cs(i.firstChild),!0):!1;case 6:return i=s.pendingProps===""||i.nodeType!==3?null:i,i!==null?(s.stateNode=i,En=s,Tn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(l=Ci!==null?{id:Qr,overflow:Yr}:null,s.memoizedState={dehydrated:i,treeContext:l,retryLane:1073741824},l=Un(18,null,null,0),l.stateNode=i,l.return=s,s.child=l,En=s,Tn=null,!0):!1;default:return!1}}function Ld(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Od(s){if(lt){var i=Tn;if(i){var l=i;if(!hy(s,i)){if(Ld(s))throw Error(t(418));i=Cs(l.nextSibling);var f=En;i&&hy(s,i)?uy(f,l):(s.flags=s.flags&-4097|2,lt=!1,En=s)}}else{if(Ld(s))throw Error(t(418));s.flags=s.flags&-4097|2,lt=!1,En=s}}}function dy(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;En=s}function au(s){if(s!==En)return!1;if(!lt)return dy(s),lt=!0,!1;var i;if((i=s.tag!==3)&&!(i=s.tag!==5)&&(i=s.type,i=i!=="head"&&i!=="body"&&!kd(s.type,s.memoizedProps)),i&&(i=Tn)){if(Ld(s))throw fy(),Error(t(418));for(;i;)uy(s,i),i=Cs(i.nextSibling)}if(dy(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,i=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"){if(i===0){Tn=Cs(s.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++}s=s.nextSibling}Tn=null}}else Tn=En?Cs(s.stateNode.nextSibling):null;return!0}function fy(){for(var s=Tn;s;)s=Cs(s.nextSibling)}function Wo(){Tn=En=null,lt=!1}function Md(s){rr===null?rr=[s]:rr.push(s)}var Ib=W.ReactCurrentBatchConfig;function dl(s,i,l){if(s=l.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var f=l.stateNode}if(!f)throw Error(t(147,s));var g=f,x=""+s;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===x?i.ref:(i=function(T){var C=g.refs;T===null?delete C[x]:C[x]=T},i._stringRef=x,i)}if(typeof s!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,s))}return s}function lu(s,i){throw s=Object.prototype.toString.call(i),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s))}function py(s){var i=s._init;return i(s._payload)}function my(s){function i(G,z){if(s){var H=G.deletions;H===null?(G.deletions=[z],G.flags|=16):H.push(z)}}function l(G,z){if(!s)return null;for(;z!==null;)i(G,z),z=z.sibling;return null}function f(G,z){for(G=new Map;z!==null;)z.key!==null?G.set(z.key,z):G.set(z.index,z),z=z.sibling;return G}function g(G,z){return G=zs(G,z),G.index=0,G.sibling=null,G}function x(G,z,H){return G.index=H,s?(H=G.alternate,H!==null?(H=H.index,H<z?(G.flags|=2,z):H):(G.flags|=2,z)):(G.flags|=1048576,z)}function T(G){return s&&G.alternate===null&&(G.flags|=2),G}function C(G,z,H,ce){return z===null||z.tag!==6?(z=Af(H,G.mode,ce),z.return=G,z):(z=g(z,H),z.return=G,z)}function F(G,z,H,ce){var xe=H.type;return xe===R?ne(G,z,H.props.children,ce,H.key):z!==null&&(z.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===Ve&&py(xe)===z.type)?(ce=g(z,H.props),ce.ref=dl(G,z,H),ce.return=G,ce):(ce=Ru(H.type,H.key,H.props,null,G.mode,ce),ce.ref=dl(G,z,H),ce.return=G,ce)}function K(G,z,H,ce){return z===null||z.tag!==4||z.stateNode.containerInfo!==H.containerInfo||z.stateNode.implementation!==H.implementation?(z=Cf(H,G.mode,ce),z.return=G,z):(z=g(z,H.children||[]),z.return=G,z)}function ne(G,z,H,ce,xe){return z===null||z.tag!==7?(z=Fi(H,G.mode,ce,xe),z.return=G,z):(z=g(z,H),z.return=G,z)}function se(G,z,H){if(typeof z=="string"&&z!==""||typeof z=="number")return z=Af(""+z,G.mode,H),z.return=G,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case ee:return H=Ru(z.type,z.key,z.props,null,G.mode,H),H.ref=dl(G,null,z),H.return=G,H;case ae:return z=Cf(z,G.mode,H),z.return=G,z;case Ve:var ce=z._init;return se(G,ce(z._payload),H)}if(Hn(z)||J(z))return z=Fi(z,G.mode,H,null),z.return=G,z;lu(G,z)}return null}function te(G,z,H,ce){var xe=z!==null?z.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return xe!==null?null:C(G,z,""+H,ce);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case ee:return H.key===xe?F(G,z,H,ce):null;case ae:return H.key===xe?K(G,z,H,ce):null;case Ve:return xe=H._init,te(G,z,xe(H._payload),ce)}if(Hn(H)||J(H))return xe!==null?null:ne(G,z,H,ce,null);lu(G,H)}return null}function de(G,z,H,ce,xe){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return G=G.get(H)||null,C(z,G,""+ce,xe);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case ee:return G=G.get(ce.key===null?H:ce.key)||null,F(z,G,ce,xe);case ae:return G=G.get(ce.key===null?H:ce.key)||null,K(z,G,ce,xe);case Ve:var _e=ce._init;return de(G,z,H,_e(ce._payload),xe)}if(Hn(ce)||J(ce))return G=G.get(H)||null,ne(z,G,ce,xe,null);lu(z,ce)}return null}function me(G,z,H,ce){for(var xe=null,_e=null,Ee=z,Pe=z=0,Lt=null;Ee!==null&&Pe<H.length;Pe++){Ee.index>Pe?(Lt=Ee,Ee=null):Lt=Ee.sibling;var Qe=te(G,Ee,H[Pe],ce);if(Qe===null){Ee===null&&(Ee=Lt);break}s&&Ee&&Qe.alternate===null&&i(G,Ee),z=x(Qe,z,Pe),_e===null?xe=Qe:_e.sibling=Qe,_e=Qe,Ee=Lt}if(Pe===H.length)return l(G,Ee),lt&&Ri(G,Pe),xe;if(Ee===null){for(;Pe<H.length;Pe++)Ee=se(G,H[Pe],ce),Ee!==null&&(z=x(Ee,z,Pe),_e===null?xe=Ee:_e.sibling=Ee,_e=Ee);return lt&&Ri(G,Pe),xe}for(Ee=f(G,Ee);Pe<H.length;Pe++)Lt=de(Ee,G,Pe,H[Pe],ce),Lt!==null&&(s&&Lt.alternate!==null&&Ee.delete(Lt.key===null?Pe:Lt.key),z=x(Lt,z,Pe),_e===null?xe=Lt:_e.sibling=Lt,_e=Lt);return s&&Ee.forEach(function($s){return i(G,$s)}),lt&&Ri(G,Pe),xe}function ge(G,z,H,ce){var xe=J(H);if(typeof xe!="function")throw Error(t(150));if(H=xe.call(H),H==null)throw Error(t(151));for(var _e=xe=null,Ee=z,Pe=z=0,Lt=null,Qe=H.next();Ee!==null&&!Qe.done;Pe++,Qe=H.next()){Ee.index>Pe?(Lt=Ee,Ee=null):Lt=Ee.sibling;var $s=te(G,Ee,Qe.value,ce);if($s===null){Ee===null&&(Ee=Lt);break}s&&Ee&&$s.alternate===null&&i(G,Ee),z=x($s,z,Pe),_e===null?xe=$s:_e.sibling=$s,_e=$s,Ee=Lt}if(Qe.done)return l(G,Ee),lt&&Ri(G,Pe),xe;if(Ee===null){for(;!Qe.done;Pe++,Qe=H.next())Qe=se(G,Qe.value,ce),Qe!==null&&(z=x(Qe,z,Pe),_e===null?xe=Qe:_e.sibling=Qe,_e=Qe);return lt&&Ri(G,Pe),xe}for(Ee=f(G,Ee);!Qe.done;Pe++,Qe=H.next())Qe=de(Ee,G,Pe,Qe.value,ce),Qe!==null&&(s&&Qe.alternate!==null&&Ee.delete(Qe.key===null?Pe:Qe.key),z=x(Qe,z,Pe),_e===null?xe=Qe:_e.sibling=Qe,_e=Qe);return s&&Ee.forEach(function(iS){return i(G,iS)}),lt&&Ri(G,Pe),xe}function gt(G,z,H,ce){if(typeof H=="object"&&H!==null&&H.type===R&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case ee:e:{for(var xe=H.key,_e=z;_e!==null;){if(_e.key===xe){if(xe=H.type,xe===R){if(_e.tag===7){l(G,_e.sibling),z=g(_e,H.props.children),z.return=G,G=z;break e}}else if(_e.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===Ve&&py(xe)===_e.type){l(G,_e.sibling),z=g(_e,H.props),z.ref=dl(G,_e,H),z.return=G,G=z;break e}l(G,_e);break}else i(G,_e);_e=_e.sibling}H.type===R?(z=Fi(H.props.children,G.mode,ce,H.key),z.return=G,G=z):(ce=Ru(H.type,H.key,H.props,null,G.mode,ce),ce.ref=dl(G,z,H),ce.return=G,G=ce)}return T(G);case ae:e:{for(_e=H.key;z!==null;){if(z.key===_e)if(z.tag===4&&z.stateNode.containerInfo===H.containerInfo&&z.stateNode.implementation===H.implementation){l(G,z.sibling),z=g(z,H.children||[]),z.return=G,G=z;break e}else{l(G,z);break}else i(G,z);z=z.sibling}z=Cf(H,G.mode,ce),z.return=G,G=z}return T(G);case Ve:return _e=H._init,gt(G,z,_e(H._payload),ce)}if(Hn(H))return me(G,z,H,ce);if(J(H))return ge(G,z,H,ce);lu(G,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,z!==null&&z.tag===6?(l(G,z.sibling),z=g(z,H),z.return=G,G=z):(l(G,z),z=Af(H,G.mode,ce),z.return=G,G=z),T(G)):l(G,z)}return gt}var Ko=my(!0),gy=my(!1),cu=Rs(null),uu=null,Qo=null,Ud=null;function Fd(){Ud=Qo=uu=null}function Bd(s){var i=cu.current;it(cu),s._currentValue=i}function zd(s,i,l){for(;s!==null;){var f=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,f!==null&&(f.childLanes|=i)):f!==null&&(f.childLanes&i)!==i&&(f.childLanes|=i),s===l)break;s=s.return}}function Yo(s,i){uu=s,Ud=Qo=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&i)!==0&&(hn=!0),s.firstContext=null)}function Ln(s){var i=s._currentValue;if(Ud!==s)if(s={context:s,memoizedValue:i,next:null},Qo===null){if(uu===null)throw Error(t(308));Qo=s,uu.dependencies={lanes:0,firstContext:s}}else Qo=Qo.next=s;return i}var ji=null;function $d(s){ji===null?ji=[s]:ji.push(s)}function yy(s,i,l,f){var g=i.interleaved;return g===null?(l.next=l,$d(i)):(l.next=g.next,g.next=l),i.interleaved=l,Xr(s,f)}function Xr(s,i){s.lanes|=i;var l=s.alternate;for(l!==null&&(l.lanes|=i),l=s,s=s.return;s!==null;)s.childLanes|=i,l=s.alternate,l!==null&&(l.childLanes|=i),l=s,s=s.return;return l.tag===3?l.stateNode:null}var Vs=!1;function qd(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vy(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Jr(s,i){return{eventTime:s,lane:i,tag:0,payload:null,callback:null,next:null}}function Ls(s,i,l){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,(We&2)!==0){var g=f.pending;return g===null?i.next=i:(i.next=g.next,g.next=i),f.pending=i,Xr(s,l)}return g=f.interleaved,g===null?(i.next=i,$d(f)):(i.next=g.next,g.next=i),f.interleaved=i,Xr(s,l)}function hu(s,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194240)!==0)){var f=i.lanes;f&=s.pendingLanes,l|=f,i.lanes=l,Ss(s,l)}}function xy(s,i){var l=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,l===f)){var g=null,x=null;if(l=l.firstBaseUpdate,l!==null){do{var T={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};x===null?g=x=T:x=x.next=T,l=l.next}while(l!==null);x===null?g=x=i:x=x.next=i}else g=x=i;l={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:x,shared:f.shared,effects:f.effects},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=i:s.next=i,l.lastBaseUpdate=i}function du(s,i,l,f){var g=s.updateQueue;Vs=!1;var x=g.firstBaseUpdate,T=g.lastBaseUpdate,C=g.shared.pending;if(C!==null){g.shared.pending=null;var F=C,K=F.next;F.next=null,T===null?x=K:T.next=K,T=F;var ne=s.alternate;ne!==null&&(ne=ne.updateQueue,C=ne.lastBaseUpdate,C!==T&&(C===null?ne.firstBaseUpdate=K:C.next=K,ne.lastBaseUpdate=F))}if(x!==null){var se=g.baseState;T=0,ne=K=F=null,C=x;do{var te=C.lane,de=C.eventTime;if((f&te)===te){ne!==null&&(ne=ne.next={eventTime:de,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var me=s,ge=C;switch(te=i,de=l,ge.tag){case 1:if(me=ge.payload,typeof me=="function"){se=me.call(de,se,te);break e}se=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=ge.payload,te=typeof me=="function"?me.call(de,se,te):me,te==null)break e;se=Z({},se,te);break e;case 2:Vs=!0}}C.callback!==null&&C.lane!==0&&(s.flags|=64,te=g.effects,te===null?g.effects=[C]:te.push(C))}else de={eventTime:de,lane:te,tag:C.tag,payload:C.payload,callback:C.callback,next:null},ne===null?(K=ne=de,F=se):ne=ne.next=de,T|=te;if(C=C.next,C===null){if(C=g.shared.pending,C===null)break;te=C,C=te.next,te.next=null,g.lastBaseUpdate=te,g.shared.pending=null}}while(!0);if(ne===null&&(F=se),g.baseState=F,g.firstBaseUpdate=K,g.lastBaseUpdate=ne,i=g.shared.interleaved,i!==null){g=i;do T|=g.lane,g=g.next;while(g!==i)}else x===null&&(g.shared.lanes=0);Li|=T,s.lanes=T,s.memoizedState=se}}function wy(s,i,l){if(s=i.effects,i.effects=null,s!==null)for(i=0;i<s.length;i++){var f=s[i],g=f.callback;if(g!==null){if(f.callback=null,f=l,typeof g!="function")throw Error(t(191,g));g.call(f)}}}var fl={},br=Rs(fl),pl=Rs(fl),ml=Rs(fl);function Di(s){if(s===fl)throw Error(t(174));return s}function Gd(s,i){switch(tt(ml,i),tt(pl,s),tt(br,fl),s=i.nodeType,s){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:It(null,"");break;default:s=s===8?i.parentNode:i,i=s.namespaceURI||null,s=s.tagName,i=It(i,s)}it(br),tt(br,i)}function Xo(){it(br),it(pl),it(ml)}function _y(s){Di(ml.current);var i=Di(br.current),l=It(i,s.type);i!==l&&(tt(pl,s),tt(br,l))}function Hd(s){pl.current===s&&(it(br),it(pl))}var ct=Rs(0);function fu(s){for(var i=s;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Wd=[];function Kd(){for(var s=0;s<Wd.length;s++)Wd[s]._workInProgressVersionPrimary=null;Wd.length=0}var pu=W.ReactCurrentDispatcher,Qd=W.ReactCurrentBatchConfig,Vi=0,ut=null,kt=null,Dt=null,mu=!1,gl=!1,yl=0,Nb=0;function Wt(){throw Error(t(321))}function Yd(s,i){if(i===null)return!1;for(var l=0;l<i.length&&l<s.length;l++)if(!nr(s[l],i[l]))return!1;return!0}function Xd(s,i,l,f,g,x){if(Vi=x,ut=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,pu.current=s===null||s.memoizedState===null?Cb:Rb,s=l(f,g),gl){x=0;do{if(gl=!1,yl=0,25<=x)throw Error(t(301));x+=1,Dt=kt=null,i.updateQueue=null,pu.current=jb,s=l(f,g)}while(gl)}if(pu.current=vu,i=kt!==null&&kt.next!==null,Vi=0,Dt=kt=ut=null,mu=!1,i)throw Error(t(300));return s}function Jd(){var s=yl!==0;return yl=0,s}function Sr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?ut.memoizedState=Dt=s:Dt=Dt.next=s,Dt}function On(){if(kt===null){var s=ut.alternate;s=s!==null?s.memoizedState:null}else s=kt.next;var i=Dt===null?ut.memoizedState:Dt.next;if(i!==null)Dt=i,kt=s;else{if(s===null)throw Error(t(310));kt=s,s={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},Dt===null?ut.memoizedState=Dt=s:Dt=Dt.next=s}return Dt}function vl(s,i){return typeof i=="function"?i(s):i}function Zd(s){var i=On(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=s;var f=kt,g=f.baseQueue,x=l.pending;if(x!==null){if(g!==null){var T=g.next;g.next=x.next,x.next=T}f.baseQueue=g=x,l.pending=null}if(g!==null){x=g.next,f=f.baseState;var C=T=null,F=null,K=x;do{var ne=K.lane;if((Vi&ne)===ne)F!==null&&(F=F.next={lane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),f=K.hasEagerState?K.eagerState:s(f,K.action);else{var se={lane:ne,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null};F===null?(C=F=se,T=f):F=F.next=se,ut.lanes|=ne,Li|=ne}K=K.next}while(K!==null&&K!==x);F===null?T=f:F.next=C,nr(f,i.memoizedState)||(hn=!0),i.memoizedState=f,i.baseState=T,i.baseQueue=F,l.lastRenderedState=f}if(s=l.interleaved,s!==null){g=s;do x=g.lane,ut.lanes|=x,Li|=x,g=g.next;while(g!==s)}else g===null&&(l.lanes=0);return[i.memoizedState,l.dispatch]}function ef(s){var i=On(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=s;var f=l.dispatch,g=l.pending,x=i.memoizedState;if(g!==null){l.pending=null;var T=g=g.next;do x=s(x,T.action),T=T.next;while(T!==g);nr(x,i.memoizedState)||(hn=!0),i.memoizedState=x,i.baseQueue===null&&(i.baseState=x),l.lastRenderedState=x}return[x,f]}function Ey(){}function Ty(s,i){var l=ut,f=On(),g=i(),x=!nr(f.memoizedState,g);if(x&&(f.memoizedState=g,hn=!0),f=f.queue,tf(Iy.bind(null,l,f,s),[s]),f.getSnapshot!==i||x||Dt!==null&&Dt.memoizedState.tag&1){if(l.flags|=2048,xl(9,Sy.bind(null,l,f,g,i),void 0,null),Vt===null)throw Error(t(349));(Vi&30)!==0||by(l,i,g)}return g}function by(s,i,l){s.flags|=16384,s={getSnapshot:i,value:l},i=ut.updateQueue,i===null?(i={lastEffect:null,stores:null},ut.updateQueue=i,i.stores=[s]):(l=i.stores,l===null?i.stores=[s]:l.push(s))}function Sy(s,i,l,f){i.value=l,i.getSnapshot=f,Ny(i)&&ky(s)}function Iy(s,i,l){return l(function(){Ny(i)&&ky(s)})}function Ny(s){var i=s.getSnapshot;s=s.value;try{var l=i();return!nr(s,l)}catch{return!0}}function ky(s){var i=Xr(s,1);i!==null&&ar(i,s,1,-1)}function Py(s){var i=Sr();return typeof s=="function"&&(s=s()),i.memoizedState=i.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vl,lastRenderedState:s},i.queue=s,s=s.dispatch=Ab.bind(null,ut,s),[i.memoizedState,s]}function xl(s,i,l,f){return s={tag:s,create:i,destroy:l,deps:f,next:null},i=ut.updateQueue,i===null?(i={lastEffect:null,stores:null},ut.updateQueue=i,i.lastEffect=s.next=s):(l=i.lastEffect,l===null?i.lastEffect=s.next=s:(f=l.next,l.next=s,s.next=f,i.lastEffect=s)),s}function Ay(){return On().memoizedState}function gu(s,i,l,f){var g=Sr();ut.flags|=s,g.memoizedState=xl(1|i,l,void 0,f===void 0?null:f)}function yu(s,i,l,f){var g=On();f=f===void 0?null:f;var x=void 0;if(kt!==null){var T=kt.memoizedState;if(x=T.destroy,f!==null&&Yd(f,T.deps)){g.memoizedState=xl(i,l,x,f);return}}ut.flags|=s,g.memoizedState=xl(1|i,l,x,f)}function Cy(s,i){return gu(8390656,8,s,i)}function tf(s,i){return yu(2048,8,s,i)}function Ry(s,i){return yu(4,2,s,i)}function jy(s,i){return yu(4,4,s,i)}function Dy(s,i){if(typeof i=="function")return s=s(),i(s),function(){i(null)};if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function Vy(s,i,l){return l=l!=null?l.concat([s]):null,yu(4,4,Dy.bind(null,i,s),l)}function nf(){}function Ly(s,i){var l=On();i=i===void 0?null:i;var f=l.memoizedState;return f!==null&&i!==null&&Yd(i,f[1])?f[0]:(l.memoizedState=[s,i],s)}function Oy(s,i){var l=On();i=i===void 0?null:i;var f=l.memoizedState;return f!==null&&i!==null&&Yd(i,f[1])?f[0]:(s=s(),l.memoizedState=[s,i],s)}function My(s,i,l){return(Vi&21)===0?(s.baseState&&(s.baseState=!1,hn=!0),s.memoizedState=l):(nr(l,i)||(l=bi(),ut.lanes|=l,Li|=l,s.baseState=!0),i)}function kb(s,i){var l=Be;Be=l!==0&&4>l?l:4,s(!0);var f=Qd.transition;Qd.transition={};try{s(!1),i()}finally{Be=l,Qd.transition=f}}function Uy(){return On().memoizedState}function Pb(s,i,l){var f=Fs(s);if(l={lane:f,action:l,hasEagerState:!1,eagerState:null,next:null},Fy(s))By(i,l);else if(l=yy(s,i,l,f),l!==null){var g=sn();ar(l,s,f,g),zy(l,i,f)}}function Ab(s,i,l){var f=Fs(s),g={lane:f,action:l,hasEagerState:!1,eagerState:null,next:null};if(Fy(s))By(i,g);else{var x=s.alternate;if(s.lanes===0&&(x===null||x.lanes===0)&&(x=i.lastRenderedReducer,x!==null))try{var T=i.lastRenderedState,C=x(T,l);if(g.hasEagerState=!0,g.eagerState=C,nr(C,T)){var F=i.interleaved;F===null?(g.next=g,$d(i)):(g.next=F.next,F.next=g),i.interleaved=g;return}}catch{}finally{}l=yy(s,i,g,f),l!==null&&(g=sn(),ar(l,s,f,g),zy(l,i,f))}}function Fy(s){var i=s.alternate;return s===ut||i!==null&&i===ut}function By(s,i){gl=mu=!0;var l=s.pending;l===null?i.next=i:(i.next=l.next,l.next=i),s.pending=i}function zy(s,i,l){if((l&4194240)!==0){var f=i.lanes;f&=s.pendingLanes,l|=f,i.lanes=l,Ss(s,l)}}var vu={readContext:Ln,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useInsertionEffect:Wt,useLayoutEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useMutableSource:Wt,useSyncExternalStore:Wt,useId:Wt,unstable_isNewReconciler:!1},Cb={readContext:Ln,useCallback:function(s,i){return Sr().memoizedState=[s,i===void 0?null:i],s},useContext:Ln,useEffect:Cy,useImperativeHandle:function(s,i,l){return l=l!=null?l.concat([s]):null,gu(4194308,4,Dy.bind(null,i,s),l)},useLayoutEffect:function(s,i){return gu(4194308,4,s,i)},useInsertionEffect:function(s,i){return gu(4,2,s,i)},useMemo:function(s,i){var l=Sr();return i=i===void 0?null:i,s=s(),l.memoizedState=[s,i],s},useReducer:function(s,i,l){var f=Sr();return i=l!==void 0?l(i):i,f.memoizedState=f.baseState=i,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:i},f.queue=s,s=s.dispatch=Pb.bind(null,ut,s),[f.memoizedState,s]},useRef:function(s){var i=Sr();return s={current:s},i.memoizedState=s},useState:Py,useDebugValue:nf,useDeferredValue:function(s){return Sr().memoizedState=s},useTransition:function(){var s=Py(!1),i=s[0];return s=kb.bind(null,s[1]),Sr().memoizedState=s,[i,s]},useMutableSource:function(){},useSyncExternalStore:function(s,i,l){var f=ut,g=Sr();if(lt){if(l===void 0)throw Error(t(407));l=l()}else{if(l=i(),Vt===null)throw Error(t(349));(Vi&30)!==0||by(f,i,l)}g.memoizedState=l;var x={value:l,getSnapshot:i};return g.queue=x,Cy(Iy.bind(null,f,x,s),[s]),f.flags|=2048,xl(9,Sy.bind(null,f,x,l,i),void 0,null),l},useId:function(){var s=Sr(),i=Vt.identifierPrefix;if(lt){var l=Yr,f=Qr;l=(f&~(1<<32-tn(f)-1)).toString(32)+l,i=":"+i+"R"+l,l=yl++,0<l&&(i+="H"+l.toString(32)),i+=":"}else l=Nb++,i=":"+i+"r"+l.toString(32)+":";return s.memoizedState=i},unstable_isNewReconciler:!1},Rb={readContext:Ln,useCallback:Ly,useContext:Ln,useEffect:tf,useImperativeHandle:Vy,useInsertionEffect:Ry,useLayoutEffect:jy,useMemo:Oy,useReducer:Zd,useRef:Ay,useState:function(){return Zd(vl)},useDebugValue:nf,useDeferredValue:function(s){var i=On();return My(i,kt.memoizedState,s)},useTransition:function(){var s=Zd(vl)[0],i=On().memoizedState;return[s,i]},useMutableSource:Ey,useSyncExternalStore:Ty,useId:Uy,unstable_isNewReconciler:!1},jb={readContext:Ln,useCallback:Ly,useContext:Ln,useEffect:tf,useImperativeHandle:Vy,useInsertionEffect:Ry,useLayoutEffect:jy,useMemo:Oy,useReducer:ef,useRef:Ay,useState:function(){return ef(vl)},useDebugValue:nf,useDeferredValue:function(s){var i=On();return kt===null?i.memoizedState=s:My(i,kt.memoizedState,s)},useTransition:function(){var s=ef(vl)[0],i=On().memoizedState;return[s,i]},useMutableSource:Ey,useSyncExternalStore:Ty,useId:Uy,unstable_isNewReconciler:!1};function sr(s,i){if(s&&s.defaultProps){i=Z({},i),s=s.defaultProps;for(var l in s)i[l]===void 0&&(i[l]=s[l]);return i}return i}function rf(s,i,l,f){i=s.memoizedState,l=l(f,i),l=l==null?i:Z({},i,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var xu={isMounted:function(s){return(s=s._reactInternals)?Qn(s)===s:!1},enqueueSetState:function(s,i,l){s=s._reactInternals;var f=sn(),g=Fs(s),x=Jr(f,g);x.payload=i,l!=null&&(x.callback=l),i=Ls(s,x,g),i!==null&&(ar(i,s,g,f),hu(i,s,g))},enqueueReplaceState:function(s,i,l){s=s._reactInternals;var f=sn(),g=Fs(s),x=Jr(f,g);x.tag=1,x.payload=i,l!=null&&(x.callback=l),i=Ls(s,x,g),i!==null&&(ar(i,s,g,f),hu(i,s,g))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var l=sn(),f=Fs(s),g=Jr(l,f);g.tag=2,i!=null&&(g.callback=i),i=Ls(s,g,f),i!==null&&(ar(i,s,f,l),hu(i,s,f))}};function $y(s,i,l,f,g,x,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,x,T):i.prototype&&i.prototype.isPureReactComponent?!il(l,f)||!il(g,x):!0}function qy(s,i,l){var f=!1,g=js,x=i.contextType;return typeof x=="object"&&x!==null?x=Ln(x):(g=un(i)?Ai:Ht.current,f=i.contextTypes,x=(f=f!=null)?qo(s,g):js),i=new i(l,x),s.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=xu,s.stateNode=i,i._reactInternals=s,f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=g,s.__reactInternalMemoizedMaskedChildContext=x),i}function Gy(s,i,l,f){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,f),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,f),i.state!==s&&xu.enqueueReplaceState(i,i.state,null)}function sf(s,i,l,f){var g=s.stateNode;g.props=l,g.state=s.memoizedState,g.refs={},qd(s);var x=i.contextType;typeof x=="object"&&x!==null?g.context=Ln(x):(x=un(i)?Ai:Ht.current,g.context=qo(s,x)),g.state=s.memoizedState,x=i.getDerivedStateFromProps,typeof x=="function"&&(rf(s,i,x,l),g.state=s.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(i=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),i!==g.state&&xu.enqueueReplaceState(g,g.state,null),du(s,l,g,f),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308)}function Jo(s,i){try{var l="",f=i;do l+=he(f),f=f.return;while(f);var g=l}catch(x){g=`
Error generating stack: `+x.message+`
`+x.stack}return{value:s,source:i,stack:g,digest:null}}function of(s,i,l){return{value:s,source:null,stack:l??null,digest:i??null}}function af(s,i){try{console.error(i.value)}catch(l){setTimeout(function(){throw l})}}var Db=typeof WeakMap=="function"?WeakMap:Map;function Hy(s,i,l){l=Jr(-1,l),l.tag=3,l.payload={element:null};var f=i.value;return l.callback=function(){Iu||(Iu=!0,Ef=f),af(s,i)},l}function Wy(s,i,l){l=Jr(-1,l),l.tag=3;var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var g=i.value;l.payload=function(){return f(g)},l.callback=function(){af(s,i)}}var x=s.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(l.callback=function(){af(s,i),typeof f!="function"&&(Ms===null?Ms=new Set([this]):Ms.add(this));var T=i.stack;this.componentDidCatch(i.value,{componentStack:T!==null?T:""})}),l}function Ky(s,i,l){var f=s.pingCache;if(f===null){f=s.pingCache=new Db;var g=new Set;f.set(i,g)}else g=f.get(i),g===void 0&&(g=new Set,f.set(i,g));g.has(l)||(g.add(l),s=Kb.bind(null,s,i,l),i.then(s,s))}function Qy(s){do{var i;if((i=s.tag===13)&&(i=s.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return s;s=s.return}while(s!==null);return null}function Yy(s,i,l,f,g){return(s.mode&1)===0?(s===i?s.flags|=65536:(s.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(i=Jr(-1,1),i.tag=2,Ls(l,i,1))),l.lanes|=1),s):(s.flags|=65536,s.lanes=g,s)}var Vb=W.ReactCurrentOwner,hn=!1;function rn(s,i,l,f){i.child=s===null?gy(i,null,l,f):Ko(i,s.child,l,f)}function Xy(s,i,l,f,g){l=l.render;var x=i.ref;return Yo(i,g),f=Xd(s,i,l,f,x,g),l=Jd(),s!==null&&!hn?(i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~g,Zr(s,i,g)):(lt&&l&&Dd(i),i.flags|=1,rn(s,i,f,g),i.child)}function Jy(s,i,l,f,g){if(s===null){var x=l.type;return typeof x=="function"&&!Pf(x)&&x.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(i.tag=15,i.type=x,Zy(s,i,x,f,g)):(s=Ru(l.type,null,f,i,i.mode,g),s.ref=i.ref,s.return=i,i.child=s)}if(x=s.child,(s.lanes&g)===0){var T=x.memoizedProps;if(l=l.compare,l=l!==null?l:il,l(T,f)&&s.ref===i.ref)return Zr(s,i,g)}return i.flags|=1,s=zs(x,f),s.ref=i.ref,s.return=i,i.child=s}function Zy(s,i,l,f,g){if(s!==null){var x=s.memoizedProps;if(il(x,f)&&s.ref===i.ref)if(hn=!1,i.pendingProps=f=x,(s.lanes&g)!==0)(s.flags&131072)!==0&&(hn=!0);else return i.lanes=s.lanes,Zr(s,i,g)}return lf(s,i,l,f,g)}function e0(s,i,l){var f=i.pendingProps,g=f.children,x=s!==null?s.memoizedState:null;if(f.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt(ea,bn),bn|=l;else{if((l&1073741824)===0)return s=x!==null?x.baseLanes|l:l,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:s,cachePool:null,transitions:null},i.updateQueue=null,tt(ea,bn),bn|=s,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=x!==null?x.baseLanes:l,tt(ea,bn),bn|=f}else x!==null?(f=x.baseLanes|l,i.memoizedState=null):f=l,tt(ea,bn),bn|=f;return rn(s,i,g,l),i.child}function t0(s,i){var l=i.ref;(s===null&&l!==null||s!==null&&s.ref!==l)&&(i.flags|=512,i.flags|=2097152)}function lf(s,i,l,f,g){var x=un(l)?Ai:Ht.current;return x=qo(i,x),Yo(i,g),l=Xd(s,i,l,f,x,g),f=Jd(),s!==null&&!hn?(i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~g,Zr(s,i,g)):(lt&&f&&Dd(i),i.flags|=1,rn(s,i,l,g),i.child)}function n0(s,i,l,f,g){if(un(l)){var x=!0;ru(i)}else x=!1;if(Yo(i,g),i.stateNode===null)_u(s,i),qy(i,l,f),sf(i,l,f,g),f=!0;else if(s===null){var T=i.stateNode,C=i.memoizedProps;T.props=C;var F=T.context,K=l.contextType;typeof K=="object"&&K!==null?K=Ln(K):(K=un(l)?Ai:Ht.current,K=qo(i,K));var ne=l.getDerivedStateFromProps,se=typeof ne=="function"||typeof T.getSnapshotBeforeUpdate=="function";se||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(C!==f||F!==K)&&Gy(i,T,f,K),Vs=!1;var te=i.memoizedState;T.state=te,du(i,f,T,g),F=i.memoizedState,C!==f||te!==F||cn.current||Vs?(typeof ne=="function"&&(rf(i,l,ne,f),F=i.memoizedState),(C=Vs||$y(i,l,C,f,te,F,K))?(se||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(i.flags|=4194308)):(typeof T.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=f,i.memoizedState=F),T.props=f,T.state=F,T.context=K,f=C):(typeof T.componentDidMount=="function"&&(i.flags|=4194308),f=!1)}else{T=i.stateNode,vy(s,i),C=i.memoizedProps,K=i.type===i.elementType?C:sr(i.type,C),T.props=K,se=i.pendingProps,te=T.context,F=l.contextType,typeof F=="object"&&F!==null?F=Ln(F):(F=un(l)?Ai:Ht.current,F=qo(i,F));var de=l.getDerivedStateFromProps;(ne=typeof de=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(C!==se||te!==F)&&Gy(i,T,f,F),Vs=!1,te=i.memoizedState,T.state=te,du(i,f,T,g);var me=i.memoizedState;C!==se||te!==me||cn.current||Vs?(typeof de=="function"&&(rf(i,l,de,f),me=i.memoizedState),(K=Vs||$y(i,l,K,f,te,me,F)||!1)?(ne||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(f,me,F),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(f,me,F)),typeof T.componentDidUpdate=="function"&&(i.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof T.componentDidUpdate!="function"||C===s.memoizedProps&&te===s.memoizedState||(i.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&te===s.memoizedState||(i.flags|=1024),i.memoizedProps=f,i.memoizedState=me),T.props=f,T.state=me,T.context=F,f=K):(typeof T.componentDidUpdate!="function"||C===s.memoizedProps&&te===s.memoizedState||(i.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&te===s.memoizedState||(i.flags|=1024),f=!1)}return cf(s,i,l,f,x,g)}function cf(s,i,l,f,g,x){t0(s,i);var T=(i.flags&128)!==0;if(!f&&!T)return g&&ay(i,l,!1),Zr(s,i,x);f=i.stateNode,Vb.current=i;var C=T&&typeof l.getDerivedStateFromError!="function"?null:f.render();return i.flags|=1,s!==null&&T?(i.child=Ko(i,s.child,null,x),i.child=Ko(i,null,C,x)):rn(s,i,C,x),i.memoizedState=f.state,g&&ay(i,l,!0),i.child}function r0(s){var i=s.stateNode;i.pendingContext?iy(s,i.pendingContext,i.pendingContext!==i.context):i.context&&iy(s,i.context,!1),Gd(s,i.containerInfo)}function s0(s,i,l,f,g){return Wo(),Md(g),i.flags|=256,rn(s,i,l,f),i.child}var uf={dehydrated:null,treeContext:null,retryLane:0};function hf(s){return{baseLanes:s,cachePool:null,transitions:null}}function i0(s,i,l){var f=i.pendingProps,g=ct.current,x=!1,T=(i.flags&128)!==0,C;if((C=T)||(C=s!==null&&s.memoizedState===null?!1:(g&2)!==0),C?(x=!0,i.flags&=-129):(s===null||s.memoizedState!==null)&&(g|=1),tt(ct,g&1),s===null)return Od(i),s=i.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((i.mode&1)===0?i.lanes=1:s.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(T=f.children,s=f.fallback,x?(f=i.mode,x=i.child,T={mode:"hidden",children:T},(f&1)===0&&x!==null?(x.childLanes=0,x.pendingProps=T):x=ju(T,f,0,null),s=Fi(s,f,l,null),x.return=i,s.return=i,x.sibling=s,i.child=x,i.child.memoizedState=hf(l),i.memoizedState=uf,s):df(i,T));if(g=s.memoizedState,g!==null&&(C=g.dehydrated,C!==null))return Lb(s,i,T,f,C,g,l);if(x){x=f.fallback,T=i.mode,g=s.child,C=g.sibling;var F={mode:"hidden",children:f.children};return(T&1)===0&&i.child!==g?(f=i.child,f.childLanes=0,f.pendingProps=F,i.deletions=null):(f=zs(g,F),f.subtreeFlags=g.subtreeFlags&14680064),C!==null?x=zs(C,x):(x=Fi(x,T,l,null),x.flags|=2),x.return=i,f.return=i,f.sibling=x,i.child=f,f=x,x=i.child,T=s.child.memoizedState,T=T===null?hf(l):{baseLanes:T.baseLanes|l,cachePool:null,transitions:T.transitions},x.memoizedState=T,x.childLanes=s.childLanes&~l,i.memoizedState=uf,f}return x=s.child,s=x.sibling,f=zs(x,{mode:"visible",children:f.children}),(i.mode&1)===0&&(f.lanes=l),f.return=i,f.sibling=null,s!==null&&(l=i.deletions,l===null?(i.deletions=[s],i.flags|=16):l.push(s)),i.child=f,i.memoizedState=null,f}function df(s,i){return i=ju({mode:"visible",children:i},s.mode,0,null),i.return=s,s.child=i}function wu(s,i,l,f){return f!==null&&Md(f),Ko(i,s.child,null,l),s=df(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function Lb(s,i,l,f,g,x,T){if(l)return i.flags&256?(i.flags&=-257,f=of(Error(t(422))),wu(s,i,T,f)):i.memoizedState!==null?(i.child=s.child,i.flags|=128,null):(x=f.fallback,g=i.mode,f=ju({mode:"visible",children:f.children},g,0,null),x=Fi(x,g,T,null),x.flags|=2,f.return=i,x.return=i,f.sibling=x,i.child=f,(i.mode&1)!==0&&Ko(i,s.child,null,T),i.child.memoizedState=hf(T),i.memoizedState=uf,x);if((i.mode&1)===0)return wu(s,i,T,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var C=f.dgst;return f=C,x=Error(t(419)),f=of(x,f,void 0),wu(s,i,T,f)}if(C=(T&s.childLanes)!==0,hn||C){if(f=Vt,f!==null){switch(T&-T){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|T))!==0?0:g,g!==0&&g!==x.retryLane&&(x.retryLane=g,Xr(s,g),ar(f,s,g,-1))}return kf(),f=of(Error(t(421))),wu(s,i,T,f)}return g.data==="$?"?(i.flags|=128,i.child=s.child,i=Qb.bind(null,s),g._reactRetry=i,null):(s=x.treeContext,Tn=Cs(g.nextSibling),En=i,lt=!0,rr=null,s!==null&&(Dn[Vn++]=Qr,Dn[Vn++]=Yr,Dn[Vn++]=Ci,Qr=s.id,Yr=s.overflow,Ci=i),i=df(i,f.children),i.flags|=4096,i)}function o0(s,i,l){s.lanes|=i;var f=s.alternate;f!==null&&(f.lanes|=i),zd(s.return,i,l)}function ff(s,i,l,f,g){var x=s.memoizedState;x===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:f,tail:l,tailMode:g}:(x.isBackwards=i,x.rendering=null,x.renderingStartTime=0,x.last=f,x.tail=l,x.tailMode=g)}function a0(s,i,l){var f=i.pendingProps,g=f.revealOrder,x=f.tail;if(rn(s,i,f.children,l),f=ct.current,(f&2)!==0)f=f&1|2,i.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&o0(s,l,i);else if(s.tag===19)o0(s,l,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}f&=1}if(tt(ct,f),(i.mode&1)===0)i.memoizedState=null;else switch(g){case"forwards":for(l=i.child,g=null;l!==null;)s=l.alternate,s!==null&&fu(s)===null&&(g=l),l=l.sibling;l=g,l===null?(g=i.child,i.child=null):(g=l.sibling,l.sibling=null),ff(i,!1,g,l,x);break;case"backwards":for(l=null,g=i.child,i.child=null;g!==null;){if(s=g.alternate,s!==null&&fu(s)===null){i.child=g;break}s=g.sibling,g.sibling=l,l=g,g=s}ff(i,!0,l,null,x);break;case"together":ff(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function _u(s,i){(i.mode&1)===0&&s!==null&&(s.alternate=null,i.alternate=null,i.flags|=2)}function Zr(s,i,l){if(s!==null&&(i.dependencies=s.dependencies),Li|=i.lanes,(l&i.childLanes)===0)return null;if(s!==null&&i.child!==s.child)throw Error(t(153));if(i.child!==null){for(s=i.child,l=zs(s,s.pendingProps),i.child=l,l.return=i;s.sibling!==null;)s=s.sibling,l=l.sibling=zs(s,s.pendingProps),l.return=i;l.sibling=null}return i.child}function Ob(s,i,l){switch(i.tag){case 3:r0(i),Wo();break;case 5:_y(i);break;case 1:un(i.type)&&ru(i);break;case 4:Gd(i,i.stateNode.containerInfo);break;case 10:var f=i.type._context,g=i.memoizedProps.value;tt(cu,f._currentValue),f._currentValue=g;break;case 13:if(f=i.memoizedState,f!==null)return f.dehydrated!==null?(tt(ct,ct.current&1),i.flags|=128,null):(l&i.child.childLanes)!==0?i0(s,i,l):(tt(ct,ct.current&1),s=Zr(s,i,l),s!==null?s.sibling:null);tt(ct,ct.current&1);break;case 19:if(f=(l&i.childLanes)!==0,(s.flags&128)!==0){if(f)return a0(s,i,l);i.flags|=128}if(g=i.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),tt(ct,ct.current),f)break;return null;case 22:case 23:return i.lanes=0,e0(s,i,l)}return Zr(s,i,l)}var l0,pf,c0,u0;l0=function(s,i){for(var l=i.child;l!==null;){if(l.tag===5||l.tag===6)s.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},pf=function(){},c0=function(s,i,l,f){var g=s.memoizedProps;if(g!==f){s=i.stateNode,Di(br.current);var x=null;switch(l){case"input":g=Ur(s,g),f=Ur(s,f),x=[];break;case"select":g=Z({},g,{value:void 0}),f=Z({},f,{value:void 0}),x=[];break;case"textarea":g=Da(s,g),f=Da(s,f),x=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(s.onclick=eu)}Fa(l,f);var T;l=null;for(K in g)if(!f.hasOwnProperty(K)&&g.hasOwnProperty(K)&&g[K]!=null)if(K==="style"){var C=g[K];for(T in C)C.hasOwnProperty(T)&&(l||(l={}),l[T]="")}else K!=="dangerouslySetInnerHTML"&&K!=="children"&&K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(o.hasOwnProperty(K)?x||(x=[]):(x=x||[]).push(K,null));for(K in f){var F=f[K];if(C=g?.[K],f.hasOwnProperty(K)&&F!==C&&(F!=null||C!=null))if(K==="style")if(C){for(T in C)!C.hasOwnProperty(T)||F&&F.hasOwnProperty(T)||(l||(l={}),l[T]="");for(T in F)F.hasOwnProperty(T)&&C[T]!==F[T]&&(l||(l={}),l[T]=F[T])}else l||(x||(x=[]),x.push(K,l)),l=F;else K==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,C=C?C.__html:void 0,F!=null&&C!==F&&(x=x||[]).push(K,F)):K==="children"?typeof F!="string"&&typeof F!="number"||(x=x||[]).push(K,""+F):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&(o.hasOwnProperty(K)?(F!=null&&K==="onScroll"&&st("scroll",s),x||C===F||(x=[])):(x=x||[]).push(K,F))}l&&(x=x||[]).push("style",l);var K=x;(i.updateQueue=K)&&(i.flags|=4)}},u0=function(s,i,l,f){l!==f&&(i.flags|=4)};function wl(s,i){if(!lt)switch(s.tailMode){case"hidden":i=s.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function Kt(s){var i=s.alternate!==null&&s.alternate.child===s.child,l=0,f=0;if(i)for(var g=s.child;g!==null;)l|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)l|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=f,s.childLanes=l,i}function Mb(s,i,l){var f=i.pendingProps;switch(Vd(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(i),null;case 1:return un(i.type)&&nu(),Kt(i),null;case 3:return f=i.stateNode,Xo(),it(cn),it(Ht),Kd(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(au(i)?i.flags|=4:s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,rr!==null&&(Sf(rr),rr=null))),pf(s,i),Kt(i),null;case 5:Hd(i);var g=Di(ml.current);if(l=i.type,s!==null&&i.stateNode!=null)c0(s,i,l,f,g),s.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!f){if(i.stateNode===null)throw Error(t(166));return Kt(i),null}if(s=Di(br.current),au(i)){f=i.stateNode,l=i.type;var x=i.memoizedProps;switch(f[Tr]=i,f[ul]=x,s=(i.mode&1)!==0,l){case"dialog":st("cancel",f),st("close",f);break;case"iframe":case"object":case"embed":st("load",f);break;case"video":case"audio":for(g=0;g<al.length;g++)st(al[g],f);break;case"source":st("error",f);break;case"img":case"image":case"link":st("error",f),st("load",f);break;case"details":st("toggle",f);break;case"input":vs(f,x),st("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!x.multiple},st("invalid",f);break;case"textarea":po(f,x),st("invalid",f)}Fa(l,x),g=null;for(var T in x)if(x.hasOwnProperty(T)){var C=x[T];T==="children"?typeof C=="string"?f.textContent!==C&&(x.suppressHydrationWarning!==!0&&Zc(f.textContent,C,s),g=["children",C]):typeof C=="number"&&f.textContent!==""+C&&(x.suppressHydrationWarning!==!0&&Zc(f.textContent,C,s),g=["children",""+C]):o.hasOwnProperty(T)&&C!=null&&T==="onScroll"&&st("scroll",f)}switch(l){case"input":bt(f),ot(f,x,!0);break;case"textarea":bt(f),Va(f);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(f.onclick=eu)}f=g,i.updateQueue=f,f!==null&&(i.flags|=4)}else{T=g.nodeType===9?g:g.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=St(l)),s==="http://www.w3.org/1999/xhtml"?l==="script"?(s=T.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof f.is=="string"?s=T.createElement(l,{is:f.is}):(s=T.createElement(l),l==="select"&&(T=s,f.multiple?T.multiple=!0:f.size&&(T.size=f.size))):s=T.createElementNS(s,l),s[Tr]=i,s[ul]=f,l0(s,i,!1,!1),i.stateNode=s;e:{switch(T=Ba(l,f),l){case"dialog":st("cancel",s),st("close",s),g=f;break;case"iframe":case"object":case"embed":st("load",s),g=f;break;case"video":case"audio":for(g=0;g<al.length;g++)st(al[g],s);g=f;break;case"source":st("error",s),g=f;break;case"img":case"image":case"link":st("error",s),st("load",s),g=f;break;case"details":st("toggle",s),g=f;break;case"input":vs(s,f),g=Ur(s,f),st("invalid",s);break;case"option":g=f;break;case"select":s._wrapperState={wasMultiple:!!f.multiple},g=Z({},f,{value:void 0}),st("invalid",s);break;case"textarea":po(s,f),g=Da(s,f),st("invalid",s);break;default:g=f}Fa(l,g),C=g;for(x in C)if(C.hasOwnProperty(x)){var F=C[x];x==="style"?Ma(s,F):x==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&La(s,F)):x==="children"?typeof F=="string"?(l!=="textarea"||F!=="")&&ws(s,F):typeof F=="number"&&ws(s,""+F):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(o.hasOwnProperty(x)?F!=null&&x==="onScroll"&&st("scroll",s):F!=null&&j(s,x,F,T))}switch(l){case"input":bt(s),ot(s,f,!1);break;case"textarea":bt(s),Va(s);break;case"option":f.value!=null&&s.setAttribute("value",""+Fe(f.value));break;case"select":s.multiple=!!f.multiple,x=f.value,x!=null?Pn(s,!!f.multiple,x,!1):f.defaultValue!=null&&Pn(s,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(s.onclick=eu)}switch(l){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Kt(i),null;case 6:if(s&&i.stateNode!=null)u0(s,i,s.memoizedProps,f);else{if(typeof f!="string"&&i.stateNode===null)throw Error(t(166));if(l=Di(ml.current),Di(br.current),au(i)){if(f=i.stateNode,l=i.memoizedProps,f[Tr]=i,(x=f.nodeValue!==l)&&(s=En,s!==null))switch(s.tag){case 3:Zc(f.nodeValue,l,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Zc(f.nodeValue,l,(s.mode&1)!==0)}x&&(i.flags|=4)}else f=(l.nodeType===9?l:l.ownerDocument).createTextNode(f),f[Tr]=i,i.stateNode=f}return Kt(i),null;case 13:if(it(ct),f=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(lt&&Tn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)fy(),Wo(),i.flags|=98560,x=!1;else if(x=au(i),f!==null&&f.dehydrated!==null){if(s===null){if(!x)throw Error(t(318));if(x=i.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(t(317));x[Tr]=i}else Wo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Kt(i),x=!1}else rr!==null&&(Sf(rr),rr=null),x=!0;if(!x)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=l,i):(f=f!==null,f!==(s!==null&&s.memoizedState!==null)&&f&&(i.child.flags|=8192,(i.mode&1)!==0&&(s===null||(ct.current&1)!==0?Pt===0&&(Pt=3):kf())),i.updateQueue!==null&&(i.flags|=4),Kt(i),null);case 4:return Xo(),pf(s,i),s===null&&ll(i.stateNode.containerInfo),Kt(i),null;case 10:return Bd(i.type._context),Kt(i),null;case 17:return un(i.type)&&nu(),Kt(i),null;case 19:if(it(ct),x=i.memoizedState,x===null)return Kt(i),null;if(f=(i.flags&128)!==0,T=x.rendering,T===null)if(f)wl(x,!1);else{if(Pt!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(T=fu(s),T!==null){for(i.flags|=128,wl(x,!1),f=T.updateQueue,f!==null&&(i.updateQueue=f,i.flags|=4),i.subtreeFlags=0,f=l,l=i.child;l!==null;)x=l,s=f,x.flags&=14680066,T=x.alternate,T===null?(x.childLanes=0,x.lanes=s,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=T.childLanes,x.lanes=T.lanes,x.child=T.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=T.memoizedProps,x.memoizedState=T.memoizedState,x.updateQueue=T.updateQueue,x.type=T.type,s=T.dependencies,x.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),l=l.sibling;return tt(ct,ct.current&1|2),i.child}s=s.sibling}x.tail!==null&&et()>ta&&(i.flags|=128,f=!0,wl(x,!1),i.lanes=4194304)}else{if(!f)if(s=fu(T),s!==null){if(i.flags|=128,f=!0,l=s.updateQueue,l!==null&&(i.updateQueue=l,i.flags|=4),wl(x,!0),x.tail===null&&x.tailMode==="hidden"&&!T.alternate&&!lt)return Kt(i),null}else 2*et()-x.renderingStartTime>ta&&l!==1073741824&&(i.flags|=128,f=!0,wl(x,!1),i.lanes=4194304);x.isBackwards?(T.sibling=i.child,i.child=T):(l=x.last,l!==null?l.sibling=T:i.child=T,x.last=T)}return x.tail!==null?(i=x.tail,x.rendering=i,x.tail=i.sibling,x.renderingStartTime=et(),i.sibling=null,l=ct.current,tt(ct,f?l&1|2:l&1),i):(Kt(i),null);case 22:case 23:return Nf(),f=i.memoizedState!==null,s!==null&&s.memoizedState!==null!==f&&(i.flags|=8192),f&&(i.mode&1)!==0?(bn&1073741824)!==0&&(Kt(i),i.subtreeFlags&6&&(i.flags|=8192)):Kt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function Ub(s,i){switch(Vd(i),i.tag){case 1:return un(i.type)&&nu(),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return Xo(),it(cn),it(Ht),Kd(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 5:return Hd(i),null;case 13:if(it(ct),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(t(340));Wo()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return it(ct),null;case 4:return Xo(),null;case 10:return Bd(i.type._context),null;case 22:case 23:return Nf(),null;case 24:return null;default:return null}}var Eu=!1,Qt=!1,Fb=typeof WeakSet=="function"?WeakSet:Set,pe=null;function Zo(s,i){var l=s.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(f){ft(s,i,f)}else l.current=null}function mf(s,i,l){try{l()}catch(f){ft(s,i,f)}}var h0=!1;function Bb(s,i){if(Id=ks,s=$g(),vd(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var f=l.getSelection&&l.getSelection();if(f&&f.rangeCount!==0){l=f.anchorNode;var g=f.anchorOffset,x=f.focusNode;f=f.focusOffset;try{l.nodeType,x.nodeType}catch{l=null;break e}var T=0,C=-1,F=-1,K=0,ne=0,se=s,te=null;t:for(;;){for(var de;se!==l||g!==0&&se.nodeType!==3||(C=T+g),se!==x||f!==0&&se.nodeType!==3||(F=T+f),se.nodeType===3&&(T+=se.nodeValue.length),(de=se.firstChild)!==null;)te=se,se=de;for(;;){if(se===s)break t;if(te===l&&++K===g&&(C=T),te===x&&++ne===f&&(F=T),(de=se.nextSibling)!==null)break;se=te,te=se.parentNode}se=de}l=C===-1||F===-1?null:{start:C,end:F}}else l=null}l=l||{start:0,end:0}}else l=null;for(Nd={focusedElem:s,selectionRange:l},ks=!1,pe=i;pe!==null;)if(i=pe,s=i.child,(i.subtreeFlags&1028)!==0&&s!==null)s.return=i,pe=s;else for(;pe!==null;){i=pe;try{var me=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(me!==null){var ge=me.memoizedProps,gt=me.memoizedState,G=i.stateNode,z=G.getSnapshotBeforeUpdate(i.elementType===i.type?ge:sr(i.type,ge),gt);G.__reactInternalSnapshotBeforeUpdate=z}break;case 3:var H=i.stateNode.containerInfo;H.nodeType===1?H.textContent="":H.nodeType===9&&H.documentElement&&H.removeChild(H.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ce){ft(i,i.return,ce)}if(s=i.sibling,s!==null){s.return=i.return,pe=s;break}pe=i.return}return me=h0,h0=!1,me}function _l(s,i,l){var f=i.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&s)===s){var x=g.destroy;g.destroy=void 0,x!==void 0&&mf(i,l,x)}g=g.next}while(g!==f)}}function Tu(s,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&s)===s){var f=l.create;l.destroy=f()}l=l.next}while(l!==i)}}function gf(s){var i=s.ref;if(i!==null){var l=s.stateNode;switch(s.tag){case 5:s=l;break;default:s=l}typeof i=="function"?i(s):i.current=s}}function d0(s){var i=s.alternate;i!==null&&(s.alternate=null,d0(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&(delete i[Tr],delete i[ul],delete i[Cd],delete i[Tb],delete i[bb])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function f0(s){return s.tag===5||s.tag===3||s.tag===4}function p0(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||f0(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function yf(s,i,l){var f=s.tag;if(f===5||f===6)s=s.stateNode,i?l.nodeType===8?l.parentNode.insertBefore(s,i):l.insertBefore(s,i):(l.nodeType===8?(i=l.parentNode,i.insertBefore(s,l)):(i=l,i.appendChild(s)),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=eu));else if(f!==4&&(s=s.child,s!==null))for(yf(s,i,l),s=s.sibling;s!==null;)yf(s,i,l),s=s.sibling}function vf(s,i,l){var f=s.tag;if(f===5||f===6)s=s.stateNode,i?l.insertBefore(s,i):l.appendChild(s);else if(f!==4&&(s=s.child,s!==null))for(vf(s,i,l),s=s.sibling;s!==null;)vf(s,i,l),s=s.sibling}var Ft=null,ir=!1;function Os(s,i,l){for(l=l.child;l!==null;)m0(s,i,l),l=l.sibling}function m0(s,i,l){if(vn&&typeof vn.onCommitFiberUnmount=="function")try{vn.onCommitFiberUnmount(Ei,l)}catch{}switch(l.tag){case 5:Qt||Zo(l,i);case 6:var f=Ft,g=ir;Ft=null,Os(s,i,l),Ft=f,ir=g,Ft!==null&&(ir?(s=Ft,l=l.stateNode,s.nodeType===8?s.parentNode.removeChild(l):s.removeChild(l)):Ft.removeChild(l.stateNode));break;case 18:Ft!==null&&(ir?(s=Ft,l=l.stateNode,s.nodeType===8?Ad(s.parentNode,l):s.nodeType===1&&Ad(s,l),er(s)):Ad(Ft,l.stateNode));break;case 4:f=Ft,g=ir,Ft=l.stateNode.containerInfo,ir=!0,Os(s,i,l),Ft=f,ir=g;break;case 0:case 11:case 14:case 15:if(!Qt&&(f=l.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var x=g,T=x.destroy;x=x.tag,T!==void 0&&((x&2)!==0||(x&4)!==0)&&mf(l,i,T),g=g.next}while(g!==f)}Os(s,i,l);break;case 1:if(!Qt&&(Zo(l,i),f=l.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=l.memoizedProps,f.state=l.memoizedState,f.componentWillUnmount()}catch(C){ft(l,i,C)}Os(s,i,l);break;case 21:Os(s,i,l);break;case 22:l.mode&1?(Qt=(f=Qt)||l.memoizedState!==null,Os(s,i,l),Qt=f):Os(s,i,l);break;default:Os(s,i,l)}}function g0(s){var i=s.updateQueue;if(i!==null){s.updateQueue=null;var l=s.stateNode;l===null&&(l=s.stateNode=new Fb),i.forEach(function(f){var g=Yb.bind(null,s,f);l.has(f)||(l.add(f),f.then(g,g))})}}function or(s,i){var l=i.deletions;if(l!==null)for(var f=0;f<l.length;f++){var g=l[f];try{var x=s,T=i,C=T;e:for(;C!==null;){switch(C.tag){case 5:Ft=C.stateNode,ir=!1;break e;case 3:Ft=C.stateNode.containerInfo,ir=!0;break e;case 4:Ft=C.stateNode.containerInfo,ir=!0;break e}C=C.return}if(Ft===null)throw Error(t(160));m0(x,T,g),Ft=null,ir=!1;var F=g.alternate;F!==null&&(F.return=null),g.return=null}catch(K){ft(g,i,K)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)y0(i,s),i=i.sibling}function y0(s,i){var l=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(or(i,s),Ir(s),f&4){try{_l(3,s,s.return),Tu(3,s)}catch(ge){ft(s,s.return,ge)}try{_l(5,s,s.return)}catch(ge){ft(s,s.return,ge)}}break;case 1:or(i,s),Ir(s),f&512&&l!==null&&Zo(l,l.return);break;case 5:if(or(i,s),Ir(s),f&512&&l!==null&&Zo(l,l.return),s.flags&32){var g=s.stateNode;try{ws(g,"")}catch(ge){ft(s,s.return,ge)}}if(f&4&&(g=s.stateNode,g!=null)){var x=s.memoizedProps,T=l!==null?l.memoizedProps:x,C=s.type,F=s.updateQueue;if(s.updateQueue=null,F!==null)try{C==="input"&&x.type==="radio"&&x.name!=null&&Y(g,x),Ba(C,T);var K=Ba(C,x);for(T=0;T<F.length;T+=2){var ne=F[T],se=F[T+1];ne==="style"?Ma(g,se):ne==="dangerouslySetInnerHTML"?La(g,se):ne==="children"?ws(g,se):j(g,ne,se,K)}switch(C){case"input":He(g,x);break;case"textarea":mo(g,x);break;case"select":var te=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!x.multiple;var de=x.value;de!=null?Pn(g,!!x.multiple,de,!1):te!==!!x.multiple&&(x.defaultValue!=null?Pn(g,!!x.multiple,x.defaultValue,!0):Pn(g,!!x.multiple,x.multiple?[]:"",!1))}g[ul]=x}catch(ge){ft(s,s.return,ge)}}break;case 6:if(or(i,s),Ir(s),f&4){if(s.stateNode===null)throw Error(t(162));g=s.stateNode,x=s.memoizedProps;try{g.nodeValue=x}catch(ge){ft(s,s.return,ge)}}break;case 3:if(or(i,s),Ir(s),f&4&&l!==null&&l.memoizedState.isDehydrated)try{er(i.containerInfo)}catch(ge){ft(s,s.return,ge)}break;case 4:or(i,s),Ir(s);break;case 13:or(i,s),Ir(s),g=s.child,g.flags&8192&&(x=g.memoizedState!==null,g.stateNode.isHidden=x,!x||g.alternate!==null&&g.alternate.memoizedState!==null||(_f=et())),f&4&&g0(s);break;case 22:if(ne=l!==null&&l.memoizedState!==null,s.mode&1?(Qt=(K=Qt)||ne,or(i,s),Qt=K):or(i,s),Ir(s),f&8192){if(K=s.memoizedState!==null,(s.stateNode.isHidden=K)&&!ne&&(s.mode&1)!==0)for(pe=s,ne=s.child;ne!==null;){for(se=pe=ne;pe!==null;){switch(te=pe,de=te.child,te.tag){case 0:case 11:case 14:case 15:_l(4,te,te.return);break;case 1:Zo(te,te.return);var me=te.stateNode;if(typeof me.componentWillUnmount=="function"){f=te,l=te.return;try{i=f,me.props=i.memoizedProps,me.state=i.memoizedState,me.componentWillUnmount()}catch(ge){ft(f,l,ge)}}break;case 5:Zo(te,te.return);break;case 22:if(te.memoizedState!==null){w0(se);continue}}de!==null?(de.return=te,pe=de):w0(se)}ne=ne.sibling}e:for(ne=null,se=s;;){if(se.tag===5){if(ne===null){ne=se;try{g=se.stateNode,K?(x=g.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(C=se.stateNode,F=se.memoizedProps.style,T=F!=null&&F.hasOwnProperty("display")?F.display:null,C.style.display=Oa("display",T))}catch(ge){ft(s,s.return,ge)}}}else if(se.tag===6){if(ne===null)try{se.stateNode.nodeValue=K?"":se.memoizedProps}catch(ge){ft(s,s.return,ge)}}else if((se.tag!==22&&se.tag!==23||se.memoizedState===null||se===s)&&se.child!==null){se.child.return=se,se=se.child;continue}if(se===s)break e;for(;se.sibling===null;){if(se.return===null||se.return===s)break e;ne===se&&(ne=null),se=se.return}ne===se&&(ne=null),se.sibling.return=se.return,se=se.sibling}}break;case 19:or(i,s),Ir(s),f&4&&g0(s);break;case 21:break;default:or(i,s),Ir(s)}}function Ir(s){var i=s.flags;if(i&2){try{e:{for(var l=s.return;l!==null;){if(f0(l)){var f=l;break e}l=l.return}throw Error(t(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(ws(g,""),f.flags&=-33);var x=p0(s);vf(s,x,g);break;case 3:case 4:var T=f.stateNode.containerInfo,C=p0(s);yf(s,C,T);break;default:throw Error(t(161))}}catch(F){ft(s,s.return,F)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function zb(s,i,l){pe=s,v0(s)}function v0(s,i,l){for(var f=(s.mode&1)!==0;pe!==null;){var g=pe,x=g.child;if(g.tag===22&&f){var T=g.memoizedState!==null||Eu;if(!T){var C=g.alternate,F=C!==null&&C.memoizedState!==null||Qt;C=Eu;var K=Qt;if(Eu=T,(Qt=F)&&!K)for(pe=g;pe!==null;)T=pe,F=T.child,T.tag===22&&T.memoizedState!==null?_0(g):F!==null?(F.return=T,pe=F):_0(g);for(;x!==null;)pe=x,v0(x),x=x.sibling;pe=g,Eu=C,Qt=K}x0(s)}else(g.subtreeFlags&8772)!==0&&x!==null?(x.return=g,pe=x):x0(s)}}function x0(s){for(;pe!==null;){var i=pe;if((i.flags&8772)!==0){var l=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Qt||Tu(5,i);break;case 1:var f=i.stateNode;if(i.flags&4&&!Qt)if(l===null)f.componentDidMount();else{var g=i.elementType===i.type?l.memoizedProps:sr(i.type,l.memoizedProps);f.componentDidUpdate(g,l.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var x=i.updateQueue;x!==null&&wy(i,x,f);break;case 3:var T=i.updateQueue;if(T!==null){if(l=null,i.child!==null)switch(i.child.tag){case 5:l=i.child.stateNode;break;case 1:l=i.child.stateNode}wy(i,T,l)}break;case 5:var C=i.stateNode;if(l===null&&i.flags&4){l=C;var F=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&l.focus();break;case"img":F.src&&(l.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var K=i.alternate;if(K!==null){var ne=K.memoizedState;if(ne!==null){var se=ne.dehydrated;se!==null&&er(se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Qt||i.flags&512&&gf(i)}catch(te){ft(i,i.return,te)}}if(i===s){pe=null;break}if(l=i.sibling,l!==null){l.return=i.return,pe=l;break}pe=i.return}}function w0(s){for(;pe!==null;){var i=pe;if(i===s){pe=null;break}var l=i.sibling;if(l!==null){l.return=i.return,pe=l;break}pe=i.return}}function _0(s){for(;pe!==null;){var i=pe;try{switch(i.tag){case 0:case 11:case 15:var l=i.return;try{Tu(4,i)}catch(F){ft(i,l,F)}break;case 1:var f=i.stateNode;if(typeof f.componentDidMount=="function"){var g=i.return;try{f.componentDidMount()}catch(F){ft(i,g,F)}}var x=i.return;try{gf(i)}catch(F){ft(i,x,F)}break;case 5:var T=i.return;try{gf(i)}catch(F){ft(i,T,F)}}}catch(F){ft(i,i.return,F)}if(i===s){pe=null;break}var C=i.sibling;if(C!==null){C.return=i.return,pe=C;break}pe=i.return}}var $b=Math.ceil,bu=W.ReactCurrentDispatcher,xf=W.ReactCurrentOwner,Mn=W.ReactCurrentBatchConfig,We=0,Vt=null,_t=null,Bt=0,bn=0,ea=Rs(0),Pt=0,El=null,Li=0,Su=0,wf=0,Tl=null,dn=null,_f=0,ta=1/0,es=null,Iu=!1,Ef=null,Ms=null,Nu=!1,Us=null,ku=0,bl=0,Tf=null,Pu=-1,Au=0;function sn(){return(We&6)!==0?et():Pu!==-1?Pu:Pu=et()}function Fs(s){return(s.mode&1)===0?1:(We&2)!==0&&Bt!==0?Bt&-Bt:Ib.transition!==null?(Au===0&&(Au=bi()),Au):(s=Be,s!==0||(s=window.event,s=s===void 0?16:Ja(s.type)),s)}function ar(s,i,l,f){if(50<bl)throw bl=0,Tf=null,Error(t(185));bs(s,l,f),((We&2)===0||s!==Vt)&&(s===Vt&&((We&2)===0&&(Su|=l),Pt===4&&Bs(s,Bt)),fn(s,f),l===1&&We===0&&(i.mode&1)===0&&(ta=et()+500,su&&Ds()))}function fn(s,i){var l=s.callbackNode;zr(s,i);var f=Ti(s,s===Vt?Bt:0);if(f===0)l!==null&&Wa(l),s.callbackNode=null,s.callbackPriority=0;else if(i=f&-f,s.callbackPriority!==i){if(l!=null&&Wa(l),i===1)s.tag===0?Sb(T0.bind(null,s)):ly(T0.bind(null,s)),_b(function(){(We&6)===0&&Ds()}),l=null;else{switch(Is(f)){case 1:l=_i;break;case 4:l=_s;break;case 16:l=Cn;break;case 536870912:l=Ac;break;default:l=Cn}l=C0(l,E0.bind(null,s))}s.callbackPriority=i,s.callbackNode=l}}function E0(s,i){if(Pu=-1,Au=0,(We&6)!==0)throw Error(t(327));var l=s.callbackNode;if(na()&&s.callbackNode!==l)return null;var f=Ti(s,s===Vt?Bt:0);if(f===0)return null;if((f&30)!==0||(f&s.expiredLanes)!==0||i)i=Cu(s,f);else{i=f;var g=We;We|=2;var x=S0();(Vt!==s||Bt!==i)&&(es=null,ta=et()+500,Mi(s,i));do try{Hb();break}catch(C){b0(s,C)}while(!0);Fd(),bu.current=x,We=g,_t!==null?i=0:(Vt=null,Bt=0,i=Pt)}if(i!==0){if(i===2&&(g=xn(s),g!==0&&(f=g,i=bf(s,g))),i===1)throw l=El,Mi(s,0),Bs(s,f),fn(s,et()),l;if(i===6)Bs(s,f);else{if(g=s.current.alternate,(f&30)===0&&!qb(g)&&(i=Cu(s,f),i===2&&(x=xn(s),x!==0&&(f=x,i=bf(s,x))),i===1))throw l=El,Mi(s,0),Bs(s,f),fn(s,et()),l;switch(s.finishedWork=g,s.finishedLanes=f,i){case 0:case 1:throw Error(t(345));case 2:Ui(s,dn,es);break;case 3:if(Bs(s,f),(f&130023424)===f&&(i=_f+500-et(),10<i)){if(Ti(s,0)!==0)break;if(g=s.suspendedLanes,(g&f)!==f){sn(),s.pingedLanes|=s.suspendedLanes&g;break}s.timeoutHandle=Pd(Ui.bind(null,s,dn,es),i);break}Ui(s,dn,es);break;case 4:if(Bs(s,f),(f&4194240)===f)break;for(i=s.eventTimes,g=-1;0<f;){var T=31-tn(f);x=1<<T,T=i[T],T>g&&(g=T),f&=~x}if(f=g,f=et()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*$b(f/1960))-f,10<f){s.timeoutHandle=Pd(Ui.bind(null,s,dn,es),f);break}Ui(s,dn,es);break;case 5:Ui(s,dn,es);break;default:throw Error(t(329))}}}return fn(s,et()),s.callbackNode===l?E0.bind(null,s):null}function bf(s,i){var l=Tl;return s.current.memoizedState.isDehydrated&&(Mi(s,i).flags|=256),s=Cu(s,i),s!==2&&(i=dn,dn=l,i!==null&&Sf(i)),s}function Sf(s){dn===null?dn=s:dn.push.apply(dn,s)}function qb(s){for(var i=s;;){if(i.flags&16384){var l=i.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var f=0;f<l.length;f++){var g=l[f],x=g.getSnapshot;g=g.value;try{if(!nr(x(),g))return!1}catch{return!1}}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Bs(s,i){for(i&=~wf,i&=~Su,s.suspendedLanes|=i,s.pingedLanes&=~i,s=s.expirationTimes;0<i;){var l=31-tn(i),f=1<<l;s[l]=-1,i&=~f}}function T0(s){if((We&6)!==0)throw Error(t(327));na();var i=Ti(s,0);if((i&1)===0)return fn(s,et()),null;var l=Cu(s,i);if(s.tag!==0&&l===2){var f=xn(s);f!==0&&(i=f,l=bf(s,f))}if(l===1)throw l=El,Mi(s,0),Bs(s,i),fn(s,et()),l;if(l===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=i,Ui(s,dn,es),fn(s,et()),null}function If(s,i){var l=We;We|=1;try{return s(i)}finally{We=l,We===0&&(ta=et()+500,su&&Ds())}}function Oi(s){Us!==null&&Us.tag===0&&(We&6)===0&&na();var i=We;We|=1;var l=Mn.transition,f=Be;try{if(Mn.transition=null,Be=1,s)return s()}finally{Be=f,Mn.transition=l,We=i,(We&6)===0&&Ds()}}function Nf(){bn=ea.current,it(ea)}function Mi(s,i){s.finishedWork=null,s.finishedLanes=0;var l=s.timeoutHandle;if(l!==-1&&(s.timeoutHandle=-1,wb(l)),_t!==null)for(l=_t.return;l!==null;){var f=l;switch(Vd(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&nu();break;case 3:Xo(),it(cn),it(Ht),Kd();break;case 5:Hd(f);break;case 4:Xo();break;case 13:it(ct);break;case 19:it(ct);break;case 10:Bd(f.type._context);break;case 22:case 23:Nf()}l=l.return}if(Vt=s,_t=s=zs(s.current,null),Bt=bn=i,Pt=0,El=null,wf=Su=Li=0,dn=Tl=null,ji!==null){for(i=0;i<ji.length;i++)if(l=ji[i],f=l.interleaved,f!==null){l.interleaved=null;var g=f.next,x=l.pending;if(x!==null){var T=x.next;x.next=g,f.next=T}l.pending=f}ji=null}return s}function b0(s,i){do{var l=_t;try{if(Fd(),pu.current=vu,mu){for(var f=ut.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}mu=!1}if(Vi=0,Dt=kt=ut=null,gl=!1,yl=0,xf.current=null,l===null||l.return===null){Pt=1,El=i,_t=null;break}e:{var x=s,T=l.return,C=l,F=i;if(i=Bt,C.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var K=F,ne=C,se=ne.tag;if((ne.mode&1)===0&&(se===0||se===11||se===15)){var te=ne.alternate;te?(ne.updateQueue=te.updateQueue,ne.memoizedState=te.memoizedState,ne.lanes=te.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var de=Qy(T);if(de!==null){de.flags&=-257,Yy(de,T,C,x,i),de.mode&1&&Ky(x,K,i),i=de,F=K;var me=i.updateQueue;if(me===null){var ge=new Set;ge.add(F),i.updateQueue=ge}else me.add(F);break e}else{if((i&1)===0){Ky(x,K,i),kf();break e}F=Error(t(426))}}else if(lt&&C.mode&1){var gt=Qy(T);if(gt!==null){(gt.flags&65536)===0&&(gt.flags|=256),Yy(gt,T,C,x,i),Md(Jo(F,C));break e}}x=F=Jo(F,C),Pt!==4&&(Pt=2),Tl===null?Tl=[x]:Tl.push(x),x=T;do{switch(x.tag){case 3:x.flags|=65536,i&=-i,x.lanes|=i;var G=Hy(x,F,i);xy(x,G);break e;case 1:C=F;var z=x.type,H=x.stateNode;if((x.flags&128)===0&&(typeof z.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(Ms===null||!Ms.has(H)))){x.flags|=65536,i&=-i,x.lanes|=i;var ce=Wy(x,C,i);xy(x,ce);break e}}x=x.return}while(x!==null)}N0(l)}catch(xe){i=xe,_t===l&&l!==null&&(_t=l=l.return);continue}break}while(!0)}function S0(){var s=bu.current;return bu.current=vu,s===null?vu:s}function kf(){(Pt===0||Pt===3||Pt===2)&&(Pt=4),Vt===null||(Li&268435455)===0&&(Su&268435455)===0||Bs(Vt,Bt)}function Cu(s,i){var l=We;We|=2;var f=S0();(Vt!==s||Bt!==i)&&(es=null,Mi(s,i));do try{Gb();break}catch(g){b0(s,g)}while(!0);if(Fd(),We=l,bu.current=f,_t!==null)throw Error(t(261));return Vt=null,Bt=0,Pt}function Gb(){for(;_t!==null;)I0(_t)}function Hb(){for(;_t!==null&&!kc();)I0(_t)}function I0(s){var i=A0(s.alternate,s,bn);s.memoizedProps=s.pendingProps,i===null?N0(s):_t=i,xf.current=null}function N0(s){var i=s;do{var l=i.alternate;if(s=i.return,(i.flags&32768)===0){if(l=Mb(l,i,bn),l!==null){_t=l;return}}else{if(l=Ub(l,i),l!==null){l.flags&=32767,_t=l;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Pt=6,_t=null;return}}if(i=i.sibling,i!==null){_t=i;return}_t=i=s}while(i!==null);Pt===0&&(Pt=5)}function Ui(s,i,l){var f=Be,g=Mn.transition;try{Mn.transition=null,Be=1,Wb(s,i,l,f)}finally{Mn.transition=g,Be=f}return null}function Wb(s,i,l,f){do na();while(Us!==null);if((We&6)!==0)throw Error(t(327));l=s.finishedWork;var g=s.finishedLanes;if(l===null)return null;if(s.finishedWork=null,s.finishedLanes=0,l===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var x=l.lanes|l.childLanes;if(Ze(s,x),s===Vt&&(_t=Vt=null,Bt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Nu||(Nu=!0,C0(Cn,function(){return na(),null})),x=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||x){x=Mn.transition,Mn.transition=null;var T=Be;Be=1;var C=We;We|=4,xf.current=null,Bb(s,l),y0(l,s),fb(Nd),ks=!!Id,Nd=Id=null,s.current=l,zb(l),ud(),We=C,Be=T,Mn.transition=x}else s.current=l;if(Nu&&(Nu=!1,Us=s,ku=g),x=s.pendingLanes,x===0&&(Ms=null),Cc(l.stateNode),fn(s,et()),i!==null)for(f=s.onRecoverableError,l=0;l<i.length;l++)g=i[l],f(g.value,{componentStack:g.stack,digest:g.digest});if(Iu)throw Iu=!1,s=Ef,Ef=null,s;return(ku&1)!==0&&s.tag!==0&&na(),x=s.pendingLanes,(x&1)!==0?s===Tf?bl++:(bl=0,Tf=s):bl=0,Ds(),null}function na(){if(Us!==null){var s=Is(ku),i=Mn.transition,l=Be;try{if(Mn.transition=null,Be=16>s?16:s,Us===null)var f=!1;else{if(s=Us,Us=null,ku=0,(We&6)!==0)throw Error(t(331));var g=We;for(We|=4,pe=s.current;pe!==null;){var x=pe,T=x.child;if((pe.flags&16)!==0){var C=x.deletions;if(C!==null){for(var F=0;F<C.length;F++){var K=C[F];for(pe=K;pe!==null;){var ne=pe;switch(ne.tag){case 0:case 11:case 15:_l(8,ne,x)}var se=ne.child;if(se!==null)se.return=ne,pe=se;else for(;pe!==null;){ne=pe;var te=ne.sibling,de=ne.return;if(d0(ne),ne===K){pe=null;break}if(te!==null){te.return=de,pe=te;break}pe=de}}}var me=x.alternate;if(me!==null){var ge=me.child;if(ge!==null){me.child=null;do{var gt=ge.sibling;ge.sibling=null,ge=gt}while(ge!==null)}}pe=x}}if((x.subtreeFlags&2064)!==0&&T!==null)T.return=x,pe=T;else e:for(;pe!==null;){if(x=pe,(x.flags&2048)!==0)switch(x.tag){case 0:case 11:case 15:_l(9,x,x.return)}var G=x.sibling;if(G!==null){G.return=x.return,pe=G;break e}pe=x.return}}var z=s.current;for(pe=z;pe!==null;){T=pe;var H=T.child;if((T.subtreeFlags&2064)!==0&&H!==null)H.return=T,pe=H;else e:for(T=z;pe!==null;){if(C=pe,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:Tu(9,C)}}catch(xe){ft(C,C.return,xe)}if(C===T){pe=null;break e}var ce=C.sibling;if(ce!==null){ce.return=C.return,pe=ce;break e}pe=C.return}}if(We=g,Ds(),vn&&typeof vn.onPostCommitFiberRoot=="function")try{vn.onPostCommitFiberRoot(Ei,s)}catch{}f=!0}return f}finally{Be=l,Mn.transition=i}}return!1}function k0(s,i,l){i=Jo(l,i),i=Hy(s,i,1),s=Ls(s,i,1),i=sn(),s!==null&&(bs(s,1,i),fn(s,i))}function ft(s,i,l){if(s.tag===3)k0(s,s,l);else for(;i!==null;){if(i.tag===3){k0(i,s,l);break}else if(i.tag===1){var f=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Ms===null||!Ms.has(f))){s=Jo(l,s),s=Wy(i,s,1),i=Ls(i,s,1),s=sn(),i!==null&&(bs(i,1,s),fn(i,s));break}}i=i.return}}function Kb(s,i,l){var f=s.pingCache;f!==null&&f.delete(i),i=sn(),s.pingedLanes|=s.suspendedLanes&l,Vt===s&&(Bt&l)===l&&(Pt===4||Pt===3&&(Bt&130023424)===Bt&&500>et()-_f?Mi(s,0):wf|=l),fn(s,i)}function P0(s,i){i===0&&((s.mode&1)===0?i=1:(i=So,So<<=1,(So&130023424)===0&&(So=4194304)));var l=sn();s=Xr(s,i),s!==null&&(bs(s,i,l),fn(s,l))}function Qb(s){var i=s.memoizedState,l=0;i!==null&&(l=i.retryLane),P0(s,l)}function Yb(s,i){var l=0;switch(s.tag){case 13:var f=s.stateNode,g=s.memoizedState;g!==null&&(l=g.retryLane);break;case 19:f=s.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(i),P0(s,l)}var A0;A0=function(s,i,l){if(s!==null)if(s.memoizedProps!==i.pendingProps||cn.current)hn=!0;else{if((s.lanes&l)===0&&(i.flags&128)===0)return hn=!1,Ob(s,i,l);hn=(s.flags&131072)!==0}else hn=!1,lt&&(i.flags&1048576)!==0&&cy(i,ou,i.index);switch(i.lanes=0,i.tag){case 2:var f=i.type;_u(s,i),s=i.pendingProps;var g=qo(i,Ht.current);Yo(i,l),g=Xd(null,i,f,s,g,l);var x=Jd();return i.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,un(f)?(x=!0,ru(i)):x=!1,i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,qd(i),g.updater=xu,i.stateNode=g,g._reactInternals=i,sf(i,f,s,l),i=cf(null,i,f,!0,x,l)):(i.tag=0,lt&&x&&Dd(i),rn(null,i,g,l),i=i.child),i;case 16:f=i.elementType;e:{switch(_u(s,i),s=i.pendingProps,g=f._init,f=g(f._payload),i.type=f,g=i.tag=Jb(f),s=sr(f,s),g){case 0:i=lf(null,i,f,s,l);break e;case 1:i=n0(null,i,f,s,l);break e;case 11:i=Xy(null,i,f,s,l);break e;case 14:i=Jy(null,i,f,sr(f.type,s),l);break e}throw Error(t(306,f,""))}return i;case 0:return f=i.type,g=i.pendingProps,g=i.elementType===f?g:sr(f,g),lf(s,i,f,g,l);case 1:return f=i.type,g=i.pendingProps,g=i.elementType===f?g:sr(f,g),n0(s,i,f,g,l);case 3:e:{if(r0(i),s===null)throw Error(t(387));f=i.pendingProps,x=i.memoizedState,g=x.element,vy(s,i),du(i,f,null,l);var T=i.memoizedState;if(f=T.element,x.isDehydrated)if(x={element:f,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},i.updateQueue.baseState=x,i.memoizedState=x,i.flags&256){g=Jo(Error(t(423)),i),i=s0(s,i,f,l,g);break e}else if(f!==g){g=Jo(Error(t(424)),i),i=s0(s,i,f,l,g);break e}else for(Tn=Cs(i.stateNode.containerInfo.firstChild),En=i,lt=!0,rr=null,l=gy(i,null,f,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Wo(),f===g){i=Zr(s,i,l);break e}rn(s,i,f,l)}i=i.child}return i;case 5:return _y(i),s===null&&Od(i),f=i.type,g=i.pendingProps,x=s!==null?s.memoizedProps:null,T=g.children,kd(f,g)?T=null:x!==null&&kd(f,x)&&(i.flags|=32),t0(s,i),rn(s,i,T,l),i.child;case 6:return s===null&&Od(i),null;case 13:return i0(s,i,l);case 4:return Gd(i,i.stateNode.containerInfo),f=i.pendingProps,s===null?i.child=Ko(i,null,f,l):rn(s,i,f,l),i.child;case 11:return f=i.type,g=i.pendingProps,g=i.elementType===f?g:sr(f,g),Xy(s,i,f,g,l);case 7:return rn(s,i,i.pendingProps,l),i.child;case 8:return rn(s,i,i.pendingProps.children,l),i.child;case 12:return rn(s,i,i.pendingProps.children,l),i.child;case 10:e:{if(f=i.type._context,g=i.pendingProps,x=i.memoizedProps,T=g.value,tt(cu,f._currentValue),f._currentValue=T,x!==null)if(nr(x.value,T)){if(x.children===g.children&&!cn.current){i=Zr(s,i,l);break e}}else for(x=i.child,x!==null&&(x.return=i);x!==null;){var C=x.dependencies;if(C!==null){T=x.child;for(var F=C.firstContext;F!==null;){if(F.context===f){if(x.tag===1){F=Jr(-1,l&-l),F.tag=2;var K=x.updateQueue;if(K!==null){K=K.shared;var ne=K.pending;ne===null?F.next=F:(F.next=ne.next,ne.next=F),K.pending=F}}x.lanes|=l,F=x.alternate,F!==null&&(F.lanes|=l),zd(x.return,l,i),C.lanes|=l;break}F=F.next}}else if(x.tag===10)T=x.type===i.type?null:x.child;else if(x.tag===18){if(T=x.return,T===null)throw Error(t(341));T.lanes|=l,C=T.alternate,C!==null&&(C.lanes|=l),zd(T,l,i),T=x.sibling}else T=x.child;if(T!==null)T.return=x;else for(T=x;T!==null;){if(T===i){T=null;break}if(x=T.sibling,x!==null){x.return=T.return,T=x;break}T=T.return}x=T}rn(s,i,g.children,l),i=i.child}return i;case 9:return g=i.type,f=i.pendingProps.children,Yo(i,l),g=Ln(g),f=f(g),i.flags|=1,rn(s,i,f,l),i.child;case 14:return f=i.type,g=sr(f,i.pendingProps),g=sr(f.type,g),Jy(s,i,f,g,l);case 15:return Zy(s,i,i.type,i.pendingProps,l);case 17:return f=i.type,g=i.pendingProps,g=i.elementType===f?g:sr(f,g),_u(s,i),i.tag=1,un(f)?(s=!0,ru(i)):s=!1,Yo(i,l),qy(i,f,g),sf(i,f,g,l),cf(null,i,f,!0,s,l);case 19:return a0(s,i,l);case 22:return e0(s,i,l)}throw Error(t(156,i.tag))};function C0(s,i){return To(s,i)}function Xb(s,i,l,f){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(s,i,l,f){return new Xb(s,i,l,f)}function Pf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Jb(s){if(typeof s=="function")return Pf(s)?1:0;if(s!=null){if(s=s.$$typeof,s===$)return 11;if(s===Ue)return 14}return 2}function zs(s,i){var l=s.alternate;return l===null?(l=Un(s.tag,i,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=i,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&14680064,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,i=s.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l}function Ru(s,i,l,f,g,x){var T=2;if(f=s,typeof s=="function")Pf(s)&&(T=1);else if(typeof s=="string")T=5;else e:switch(s){case R:return Fi(l.children,g,x,i);case I:T=8,g|=8;break;case N:return s=Un(12,l,i,g|2),s.elementType=N,s.lanes=x,s;case A:return s=Un(13,l,i,g),s.elementType=A,s.lanes=x,s;case we:return s=Un(19,l,i,g),s.elementType=we,s.lanes=x,s;case Te:return ju(l,g,x,i);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case U:T=10;break e;case B:T=9;break e;case $:T=11;break e;case Ue:T=14;break e;case Ve:T=16,f=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return i=Un(T,l,i,g),i.elementType=s,i.type=f,i.lanes=x,i}function Fi(s,i,l,f){return s=Un(7,s,f,i),s.lanes=l,s}function ju(s,i,l,f){return s=Un(22,s,f,i),s.elementType=Te,s.lanes=l,s.stateNode={isHidden:!1},s}function Af(s,i,l){return s=Un(6,s,null,i),s.lanes=l,s}function Cf(s,i,l){return i=Un(4,s.children!==null?s.children:[],s.key,i),i.lanes=l,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}function Zb(s,i,l,f,g){this.tag=i,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ts(0),this.expirationTimes=Ts(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ts(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Rf(s,i,l,f,g,x,T,C,F){return s=new Zb(s,i,l,C,F),i===1?(i=1,x===!0&&(i|=8)):i=0,x=Un(3,null,null,i),s.current=x,x.stateNode=s,x.memoizedState={element:f,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},qd(x),s}function eS(s,i,l){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ae,key:f==null?null:""+f,children:s,containerInfo:i,implementation:l}}function R0(s){if(!s)return js;s=s._reactInternals;e:{if(Qn(s)!==s||s.tag!==1)throw Error(t(170));var i=s;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(un(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(s.tag===1){var l=s.type;if(un(l))return oy(s,l,i)}return i}function j0(s,i,l,f,g,x,T,C,F){return s=Rf(l,f,!0,s,g,x,T,C,F),s.context=R0(null),l=s.current,f=sn(),g=Fs(l),x=Jr(f,g),x.callback=i??null,Ls(l,x,g),s.current.lanes=g,bs(s,g,f),fn(s,f),s}function Du(s,i,l,f){var g=i.current,x=sn(),T=Fs(g);return l=R0(l),i.context===null?i.context=l:i.pendingContext=l,i=Jr(x,T),i.payload={element:s},f=f===void 0?null:f,f!==null&&(i.callback=f),s=Ls(g,i,T),s!==null&&(ar(s,g,T,x),hu(s,g,T)),T}function Vu(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function D0(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<i?l:i}}function jf(s,i){D0(s,i),(s=s.alternate)&&D0(s,i)}function tS(){return null}var V0=typeof reportError=="function"?reportError:function(s){console.error(s)};function Df(s){this._internalRoot=s}Lu.prototype.render=Df.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(t(409));Du(s,i,null,null)},Lu.prototype.unmount=Df.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;Oi(function(){Du(null,s,null,null)}),i[Wr]=null}};function Lu(s){this._internalRoot=s}Lu.prototype.unstable_scheduleHydration=function(s){if(s){var i=Lc();s={blockedOn:null,target:s,priority:i};for(var l=0;l<xr.length&&i!==0&&i<xr[l].priority;l++);xr.splice(l,0,s),l===0&&Uc(s)}};function Vf(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Ou(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function L0(){}function nS(s,i,l,f,g){if(g){if(typeof f=="function"){var x=f;f=function(){var K=Vu(T);x.call(K)}}var T=j0(i,f,s,0,null,!1,!1,"",L0);return s._reactRootContainer=T,s[Wr]=T.current,ll(s.nodeType===8?s.parentNode:s),Oi(),T}for(;g=s.lastChild;)s.removeChild(g);if(typeof f=="function"){var C=f;f=function(){var K=Vu(F);C.call(K)}}var F=Rf(s,0,!1,null,null,!1,!1,"",L0);return s._reactRootContainer=F,s[Wr]=F.current,ll(s.nodeType===8?s.parentNode:s),Oi(function(){Du(i,F,l,f)}),F}function Mu(s,i,l,f,g){var x=l._reactRootContainer;if(x){var T=x;if(typeof g=="function"){var C=g;g=function(){var F=Vu(T);C.call(F)}}Du(i,T,s,g)}else T=nS(l,i,s,g,f);return Vu(T)}Dc=function(s){switch(s.tag){case 3:var i=s.stateNode;if(i.current.memoizedState.isDehydrated){var l=Es(i.pendingLanes);l!==0&&(Ss(i,l|1),fn(i,et()),(We&6)===0&&(ta=et()+500,Ds()))}break;case 13:Oi(function(){var f=Xr(s,1);if(f!==null){var g=sn();ar(f,s,1,g)}}),jf(s,1)}},Io=function(s){if(s.tag===13){var i=Xr(s,134217728);if(i!==null){var l=sn();ar(i,s,134217728,l)}jf(s,134217728)}},Vc=function(s){if(s.tag===13){var i=Fs(s),l=Xr(s,i);if(l!==null){var f=sn();ar(l,s,i,f)}jf(s,i)}},Lc=function(){return Be},Oc=function(s,i){var l=Be;try{return Be=s,i()}finally{Be=l}},yo=function(s,i,l){switch(i){case"input":if(He(s,l),i=l.name,l.type==="radio"&&i!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<l.length;i++){var f=l[i];if(f!==s&&f.form===s.form){var g=tu(f);if(!g)throw Error(t(90));Mr(f),He(f,g)}}}break;case"textarea":mo(s,l);break;case"select":i=l.value,i!=null&&Pn(s,!!l.multiple,i,!1)}},yi=If,$a=Oi;var rS={usingClientEntryPoint:!1,Events:[hl,zo,tu,yr,za,If]},Sl={findFiberByHostInstance:Pi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sS={bundleType:Sl.bundleType,version:Sl.version,rendererPackageName:Sl.rendererPackageName,rendererConfig:Sl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:W.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Ha(s),s===null?null:s.stateNode},findFiberByHostInstance:Sl.findFiberByHostInstance||tS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uu.isDisabled&&Uu.supportsFiber)try{Ei=Uu.inject(sS),vn=Uu}catch{}}return pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rS,pn.createPortal=function(s,i){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vf(i))throw Error(t(200));return eS(s,i,null,l)},pn.createRoot=function(s,i){if(!Vf(s))throw Error(t(299));var l=!1,f="",g=V0;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onRecoverableError!==void 0&&(g=i.onRecoverableError)),i=Rf(s,1,!1,null,null,l,!1,f,g),s[Wr]=i.current,ll(s.nodeType===8?s.parentNode:s),new Df(i)},pn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=Ha(i),s=s===null?null:s.stateNode,s},pn.flushSync=function(s){return Oi(s)},pn.hydrate=function(s,i,l){if(!Ou(i))throw Error(t(200));return Mu(null,s,i,!0,l)},pn.hydrateRoot=function(s,i,l){if(!Vf(s))throw Error(t(405));var f=l!=null&&l.hydratedSources||null,g=!1,x="",T=V0;if(l!=null&&(l.unstable_strictMode===!0&&(g=!0),l.identifierPrefix!==void 0&&(x=l.identifierPrefix),l.onRecoverableError!==void 0&&(T=l.onRecoverableError)),i=j0(i,null,s,1,l??null,g,!1,x,T),s[Wr]=i.current,ll(s),f)for(s=0;s<f.length;s++)l=f[s],g=l._getVersion,g=g(l._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[l,g]:i.mutableSourceEagerHydrationData.push(l,g);return new Lu(i)},pn.render=function(s,i,l){if(!Ou(i))throw Error(t(200));return Mu(null,s,i,!1,l)},pn.unmountComponentAtNode=function(s){if(!Ou(s))throw Error(t(40));return s._reactRootContainer?(Oi(function(){Mu(null,null,s,!1,function(){s._reactRootContainer=null,s[Wr]=null})}),!0):!1},pn.unstable_batchedUpdates=If,pn.unstable_renderSubtreeIntoContainer=function(s,i,l,f){if(!Ou(l))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Mu(s,i,l,!1,f)},pn.version="18.3.1-next-f1338f8080-20240426",pn}var q0;function jw(){if(q0)return Mf.exports;q0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Mf.exports=pS(),Mf.exports}var G0;function mS(){if(G0)return Fu;G0=1;var n=jw();return Fu.createRoot=n.createRoot,Fu.hydrateRoot=n.hydrateRoot,Fu}var gS=mS();jw();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wl(){return Wl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Wl.apply(this,arguments)}var Js;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Js||(Js={}));const H0="popstate";function yS(n){n===void 0&&(n={});function e(r,o){let{pathname:a,search:c,hash:d}=r.location;return mp("",{pathname:a,search:c,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(r,o){return typeof o=="string"?o:lh(o)}return xS(e,t,null,n)}function xt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Dw(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function vS(){return Math.random().toString(36).substr(2,8)}function W0(n,e){return{usr:n.state,key:n.key,idx:e}}function mp(n,e,t,r){return t===void 0&&(t=null),Wl({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Na(e):e,{state:t,key:e&&e.key||r||vS()})}function lh(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Na(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function xS(n,e,t,r){r===void 0&&(r={});let{window:o=document.defaultView,v5Compat:a=!1}=r,c=o.history,d=Js.Pop,p=null,m=v();m==null&&(m=0,c.replaceState(Wl({},c.state,{idx:m}),""));function v(){return(c.state||{idx:null}).idx}function w(){d=Js.Pop;let k=v(),D=k==null?null:k-m;m=k,p&&p({action:d,location:V.location,delta:D})}function E(k,D){d=Js.Push;let M=mp(V.location,k,D);m=v()+1;let j=W0(M,m),W=V.createHref(M);try{c.pushState(j,"",W)}catch(ee){if(ee instanceof DOMException&&ee.name==="DataCloneError")throw ee;o.location.assign(W)}a&&p&&p({action:d,location:V.location,delta:1})}function b(k,D){d=Js.Replace;let M=mp(V.location,k,D);m=v();let j=W0(M,m),W=V.createHref(M);c.replaceState(j,"",W),a&&p&&p({action:d,location:V.location,delta:0})}function L(k){let D=o.location.origin!=="null"?o.location.origin:o.location.href,M=typeof k=="string"?k:lh(k);return M=M.replace(/ $/,"%20"),xt(D,"No window.location.(origin|href) available to create URL for href: "+M),new URL(M,D)}let V={get action(){return d},get location(){return n(o,c)},listen(k){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(H0,w),p=k,()=>{o.removeEventListener(H0,w),p=null}},createHref(k){return e(o,k)},createURL:L,encodeLocation(k){let D=L(k);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:E,replace:b,go(k){return c.go(k)}};return V}var K0;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(K0||(K0={}));function wS(n,e,t){return t===void 0&&(t="/"),_S(n,e,t)}function _S(n,e,t,r){let o=typeof e=="string"?Na(e):e,a=lm(o.pathname||"/",t);if(a==null)return null;let c=Vw(n);ES(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let m=DS(a);d=CS(c[p],m)}return d}function Vw(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let o=(a,c,d)=>{let p={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};p.relativePath.startsWith("/")&&(xt(p.relativePath.startsWith(r),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(r.length));let m=ei([r,p.relativePath]),v=t.concat(p);a.children&&a.children.length>0&&(xt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),Vw(a.children,e,v,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:PS(m,a.index),routesMeta:v})};return n.forEach((a,c)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))o(a,c);else for(let p of Lw(a.path))o(a,c,p)}),e}function Lw(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,o=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return o?[a,""]:[a];let c=Lw(r.join("/")),d=[];return d.push(...c.map(p=>p===""?a:[a,p].join("/"))),o&&d.push(...c),d.map(p=>n.startsWith("/")&&p===""?"/":p)}function ES(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:AS(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const TS=/^:[\w-]+$/,bS=3,SS=2,IS=1,NS=10,kS=-2,Q0=n=>n==="*";function PS(n,e){let t=n.split("/"),r=t.length;return t.some(Q0)&&(r+=kS),e&&(r+=SS),t.filter(o=>!Q0(o)).reduce((o,a)=>o+(TS.test(a)?bS:a===""?IS:NS),r)}function AS(n,e){return n.length===e.length&&n.slice(0,-1).every((r,o)=>r===e[o])?n[n.length-1]-e[e.length-1]:0}function CS(n,e,t){let{routesMeta:r}=n,o={},a="/",c=[];for(let d=0;d<r.length;++d){let p=r[d],m=d===r.length-1,v=a==="/"?e:e.slice(a.length)||"/",w=RS({path:p.relativePath,caseSensitive:p.caseSensitive,end:m},v),E=p.route;if(!w)return null;Object.assign(o,w.params),c.push({params:o,pathname:ei([a,w.pathname]),pathnameBase:MS(ei([a,w.pathnameBase])),route:E}),w.pathnameBase!=="/"&&(a=ei([a,w.pathnameBase]))}return c}function RS(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=jS(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let a=o[0],c=a.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:r.reduce((m,v,w)=>{let{paramName:E,isOptional:b}=v;if(E==="*"){let V=d[w]||"";c=a.slice(0,a.length-V.length).replace(/(.)\/+$/,"$1")}const L=d[w];return b&&!L?m[E]=void 0:m[E]=(L||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:c,pattern:n}}function jS(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Dw(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(r.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function DS(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Dw(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function lm(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function VS(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:o=""}=typeof n=="string"?Na(n):n;return{pathname:t?t.startsWith("/")?t:LS(t,e):e,search:US(r),hash:FS(o)}}function LS(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Bf(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function OS(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function cm(n,e){let t=OS(n);return e?t.map((r,o)=>o===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function um(n,e,t,r){r===void 0&&(r=!1);let o;typeof n=="string"?o=Na(n):(o=Wl({},n),xt(!o.pathname||!o.pathname.includes("?"),Bf("?","pathname","search",o)),xt(!o.pathname||!o.pathname.includes("#"),Bf("#","pathname","hash",o)),xt(!o.search||!o.search.includes("#"),Bf("#","search","hash",o)));let a=n===""||o.pathname==="",c=a?"/":o.pathname,d;if(c==null)d=t;else{let w=e.length-1;if(!r&&c.startsWith("..")){let E=c.split("/");for(;E[0]==="..";)E.shift(),w-=1;o.pathname=E.join("/")}d=w>=0?e[w]:"/"}let p=VS(o,d),m=c&&c!=="/"&&c.endsWith("/"),v=(a||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(m||v)&&(p.pathname+="/"),p}const ei=n=>n.join("/").replace(/\/\/+/g,"/"),MS=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),US=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,FS=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function BS(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Ow=["post","put","patch","delete"];new Set(Ow);const zS=["get",...Ow];new Set(zS);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kl(){return Kl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Kl.apply(this,arguments)}const hm=P.createContext(null),$S=P.createContext(null),hi=P.createContext(null),Oh=P.createContext(null),ys=P.createContext({outlet:null,matches:[],isDataRoute:!1}),Mw=P.createContext(null);function qS(n,e){let{relative:t}=e===void 0?{}:e;ka()||xt(!1);let{basename:r,navigator:o}=P.useContext(hi),{hash:a,pathname:c,search:d}=Bw(n,{relative:t}),p=c;return r!=="/"&&(p=c==="/"?r:ei([r,c])),o.createHref({pathname:p,search:d,hash:a})}function ka(){return P.useContext(Oh)!=null}function io(){return ka()||xt(!1),P.useContext(Oh).location}function Uw(n){P.useContext(hi).static||P.useLayoutEffect(n)}function fr(){let{isDataRoute:n}=P.useContext(ys);return n?rI():GS()}function GS(){ka()||xt(!1);let n=P.useContext(hm),{basename:e,future:t,navigator:r}=P.useContext(hi),{matches:o}=P.useContext(ys),{pathname:a}=io(),c=JSON.stringify(cm(o,t.v7_relativeSplatPath)),d=P.useRef(!1);return Uw(()=>{d.current=!0}),P.useCallback(function(m,v){if(v===void 0&&(v={}),!d.current)return;if(typeof m=="number"){r.go(m);return}let w=um(m,JSON.parse(c),a,v.relative==="path");n==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:ei([e,w.pathname])),(v.replace?r.replace:r.push)(w,v.state,v)},[e,r,c,a,n])}function Fw(){let{matches:n}=P.useContext(ys),e=n[n.length-1];return e?e.params:{}}function Bw(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=P.useContext(hi),{matches:o}=P.useContext(ys),{pathname:a}=io(),c=JSON.stringify(cm(o,r.v7_relativeSplatPath));return P.useMemo(()=>um(n,JSON.parse(c),a,t==="path"),[n,c,a,t])}function HS(n,e){return WS(n,e)}function WS(n,e,t,r){ka()||xt(!1);let{navigator:o}=P.useContext(hi),{matches:a}=P.useContext(ys),c=a[a.length-1],d=c?c.params:{};c&&c.pathname;let p=c?c.pathnameBase:"/";c&&c.route;let m=io(),v;if(e){var w;let k=typeof e=="string"?Na(e):e;p==="/"||(w=k.pathname)!=null&&w.startsWith(p)||xt(!1),v=k}else v=m;let E=v.pathname||"/",b=E;if(p!=="/"){let k=p.replace(/^\//,"").split("/");b="/"+E.replace(/^\//,"").split("/").slice(k.length).join("/")}let L=wS(n,{pathname:b}),V=JS(L&&L.map(k=>Object.assign({},k,{params:Object.assign({},d,k.params),pathname:ei([p,o.encodeLocation?o.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?p:ei([p,o.encodeLocation?o.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),a,t,r);return e&&V?P.createElement(Oh.Provider,{value:{location:Kl({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:Js.Pop}},V):V}function KS(){let n=nI(),e=BS(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:o},t):null,null)}const QS=P.createElement(KS,null);class YS extends P.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?P.createElement(ys.Provider,{value:this.props.routeContext},P.createElement(Mw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function XS(n){let{routeContext:e,match:t,children:r}=n,o=P.useContext(hm);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),P.createElement(ys.Provider,{value:e},r)}function JS(n,e,t,r){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let c=n,d=(o=t)==null?void 0:o.errors;if(d!=null){let v=c.findIndex(w=>w.route.id&&d?.[w.route.id]!==void 0);v>=0||xt(!1),c=c.slice(0,Math.min(c.length,v+1))}let p=!1,m=-1;if(t&&r&&r.v7_partialHydration)for(let v=0;v<c.length;v++){let w=c[v];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(m=v),w.route.id){let{loaderData:E,errors:b}=t,L=w.route.loader&&E[w.route.id]===void 0&&(!b||b[w.route.id]===void 0);if(w.route.lazy||L){p=!0,m>=0?c=c.slice(0,m+1):c=[c[0]];break}}}return c.reduceRight((v,w,E)=>{let b,L=!1,V=null,k=null;t&&(b=d&&w.route.id?d[w.route.id]:void 0,V=w.route.errorElement||QS,p&&(m<0&&E===0?(sI("route-fallback"),L=!0,k=null):m===E&&(L=!0,k=w.route.hydrateFallbackElement||null)));let D=e.concat(c.slice(0,E+1)),M=()=>{let j;return b?j=V:L?j=k:w.route.Component?j=P.createElement(w.route.Component,null):w.route.element?j=w.route.element:j=v,P.createElement(XS,{match:w,routeContext:{outlet:v,matches:D,isDataRoute:t!=null},children:j})};return t&&(w.route.ErrorBoundary||w.route.errorElement||E===0)?P.createElement(YS,{location:t.location,revalidation:t.revalidation,component:V,error:b,children:M(),routeContext:{outlet:null,matches:D,isDataRoute:!0}}):M()},null)}var zw=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(zw||{}),$w=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}($w||{});function ZS(n){let e=P.useContext(hm);return e||xt(!1),e}function eI(n){let e=P.useContext($S);return e||xt(!1),e}function tI(n){let e=P.useContext(ys);return e||xt(!1),e}function qw(n){let e=tI(),t=e.matches[e.matches.length-1];return t.route.id||xt(!1),t.route.id}function nI(){var n;let e=P.useContext(Mw),t=eI(),r=qw();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function rI(){let{router:n}=ZS(zw.UseNavigateStable),e=qw($w.UseNavigateStable),t=P.useRef(!1);return Uw(()=>{t.current=!0}),P.useCallback(function(o,a){a===void 0&&(a={}),t.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,Kl({fromRouteId:e},a)))},[n,e])}const Y0={};function sI(n,e,t){Y0[n]||(Y0[n]=!0)}function iI(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function Gw(n){let{to:e,replace:t,state:r,relative:o}=n;ka()||xt(!1);let{future:a,static:c}=P.useContext(hi),{matches:d}=P.useContext(ys),{pathname:p}=io(),m=fr(),v=um(e,cm(d,a.v7_relativeSplatPath),p,o==="path"),w=JSON.stringify(v);return P.useEffect(()=>m(JSON.parse(w),{replace:t,state:r,relative:o}),[m,w,o,t,r]),null}function Sn(n){xt(!1)}function oI(n){let{basename:e="/",children:t=null,location:r,navigationType:o=Js.Pop,navigator:a,static:c=!1,future:d}=n;ka()&&xt(!1);let p=e.replace(/^\/*/,"/"),m=P.useMemo(()=>({basename:p,navigator:a,static:c,future:Kl({v7_relativeSplatPath:!1},d)}),[p,d,a,c]);typeof r=="string"&&(r=Na(r));let{pathname:v="/",search:w="",hash:E="",state:b=null,key:L="default"}=r,V=P.useMemo(()=>{let k=lm(v,p);return k==null?null:{location:{pathname:k,search:w,hash:E,state:b,key:L},navigationType:o}},[p,v,w,E,b,L,o]);return V==null?null:P.createElement(hi.Provider,{value:m},P.createElement(Oh.Provider,{children:t,value:V}))}function aI(n){let{children:e,location:t}=n;return HS(gp(e),t)}new Promise(()=>{});function gp(n,e){e===void 0&&(e=[]);let t=[];return P.Children.forEach(n,(r,o)=>{if(!P.isValidElement(r))return;let a=[...e,o];if(r.type===P.Fragment){t.push.apply(t,gp(r.props.children,a));return}r.type!==Sn&&xt(!1),!r.props.index||!r.props.children||xt(!1);let c={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=gp(r.props.children,a)),t.push(c)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yp(){return yp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},yp.apply(this,arguments)}function lI(n,e){if(n==null)return{};var t={},r=Object.keys(n),o,a;for(a=0;a<r.length;a++)o=r[a],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function cI(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function uI(n,e){return n.button===0&&(!e||e==="_self")&&!cI(n)}function vp(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(o=>[t,o]):[[t,r]])},[]))}function hI(n,e){let t=vp(n);return e&&e.forEach((r,o)=>{t.has(o)||e.getAll(o).forEach(a=>{t.append(o,a)})}),t}const dI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],fI="6";try{window.__reactRouterVersion=fI}catch{}const pI="startTransition",X0=hS[pI];function mI(n){let{basename:e,children:t,future:r,window:o}=n,a=P.useRef();a.current==null&&(a.current=yS({window:o,v5Compat:!0}));let c=a.current,[d,p]=P.useState({action:c.action,location:c.location}),{v7_startTransition:m}=r||{},v=P.useCallback(w=>{m&&X0?X0(()=>p(w)):p(w)},[p,m]);return P.useLayoutEffect(()=>c.listen(v),[c,v]),P.useEffect(()=>iI(r),[r]),P.createElement(oI,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:c,future:r})}const gI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",yI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ge=P.forwardRef(function(e,t){let{onClick:r,relative:o,reloadDocument:a,replace:c,state:d,target:p,to:m,preventScrollReset:v,viewTransition:w}=e,E=lI(e,dI),{basename:b}=P.useContext(hi),L,V=!1;if(typeof m=="string"&&yI.test(m)&&(L=m,gI))try{let j=new URL(window.location.href),W=m.startsWith("//")?new URL(j.protocol+m):new URL(m),ee=lm(W.pathname,b);W.origin===j.origin&&ee!=null?m=ee+W.search+W.hash:V=!0}catch{}let k=qS(m,{relative:o}),D=vI(m,{replace:c,state:d,target:p,preventScrollReset:v,relative:o,viewTransition:w});function M(j){r&&r(j),j.defaultPrevented||D(j)}return P.createElement("a",yp({},E,{href:L||k,onClick:V||a?r:M,ref:t,target:p}))});var J0;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(J0||(J0={}));var Z0;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Z0||(Z0={}));function vI(n,e){let{target:t,replace:r,state:o,preventScrollReset:a,relative:c,viewTransition:d}=e===void 0?{}:e,p=fr(),m=io(),v=Bw(n,{relative:c});return P.useCallback(w=>{if(uI(w,t)){w.preventDefault();let E=r!==void 0?r:lh(m)===lh(v);p(n,{replace:E,state:o,preventScrollReset:a,relative:c,viewTransition:d})}},[m,p,v,r,o,t,n,a,c,d])}function xI(n){let e=P.useRef(vp(n)),t=P.useRef(!1),r=io(),o=P.useMemo(()=>hI(r.search,t.current?null:e.current),[r.search]),a=fr(),c=P.useCallback((d,p)=>{const m=vp(typeof d=="function"?d(o):d);t.current=!0,a("?"+m,p)},[a,o]);return[o,c]}var ev={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let o=n.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},wI=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const o=n[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[r++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],c=n[t++],d=n[t++],p=((o&7)<<18|(a&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const a=n[t++],c=n[t++];e[r++]=String.fromCharCode((o&15)<<12|(a&63)<<6|c&63)}}return e.join("")},Ww={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<n.length;o+=3){const a=n[o],c=o+1<n.length,d=c?n[o+1]:0,p=o+2<n.length,m=p?n[o+2]:0,v=a>>2,w=(a&3)<<4|d>>4;let E=(d&15)<<2|m>>6,b=m&63;p||(b=64,c||(E=64)),r.push(t[v],t[w],t[E],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Hw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):wI(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const m=o<n.length?t[n.charAt(o)]:64;++o;const w=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||d==null||m==null||w==null)throw new _I;const E=a<<2|d>>4;if(r.push(E),m!==64){const b=d<<4&240|m>>2;if(r.push(b),w!==64){const L=m<<6&192|w;r.push(L)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class _I extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const EI=function(n){const e=Hw(n);return Ww.encodeByteArray(e,!0)},ch=function(n){return EI(n).replace(/\./g,"")},Kw=function(n){try{return Ww.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI=()=>TI().__FIREBASE_DEFAULTS__,SI=()=>{if(typeof process>"u"||typeof ev>"u")return;const n=ev.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},II=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Kw(n[1]);return e&&JSON.parse(e)},Mh=()=>{try{return bI()||SI()||II()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Qw=n=>{var e,t;return(t=(e=Mh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},NI=n=>{const e=Qw(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Yw=()=>{var n;return(n=Mh())===null||n===void 0?void 0:n.config},Xw=n=>{var e;return(e=Mh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ch(JSON.stringify(t)),ch(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(en())}function CI(){var n;const e=(n=Mh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Jw(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function jI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function DI(){const n=en();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function VI(){return!CI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Zw(){try{return typeof indexedDB=="object"}catch{return!1}}function e_(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}function LI(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI="FirebaseError";class pr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=OI,Object.setPrototypeOf(this,pr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oo.prototype.create)}}class oo{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],c=a?MI(a,r):"Error",d=`${this.serviceName}: ${c} (${o}).`;return new pr(o,d,r)}}function MI(n,e){return n.replace(UI,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const UI=/\{\$([^}]+)}/g;function FI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ql(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const a=n[o],c=e[o];if(tv(a)&&tv(c)){if(!Ql(a,c))return!1}else if(a!==c)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function tv(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Cl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,a]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function Rl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function BI(n,e){const t=new zI(n,e);return t.subscribe.bind(t)}class zI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");$I(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=zf),o.error===void 0&&(o.error=zf),o.complete===void 0&&(o.complete=zf);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $I(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function zf(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI=1e3,GI=2,HI=14400*1e3,WI=.5;function nv(n,e=qI,t=GI){const r=e*Math.pow(t,n),o=Math.round(WI*r*(Math.random()-.5)*2);return Math.min(HI,r+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(n){return n&&n._delegate?n._delegate:n}class hr{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new kI;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(YI(e))try{this.getOrInitializeService({instanceIdentifier:zi})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});r.resolve(a)}catch{}}}}clearInstance(e=zi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zi){return this.instances.has(e)}getOptions(e=zi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&c.resolve(o)}return o}onInit(e,t){var r;const o=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(o,a);const c=this.instances.get(o);return c&&e(c,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:QI(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=zi){return this.component?this.component.multipleInstances?e:zi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function QI(n){return n===zi?void 0:n}function YI(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new KI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ze||(ze={}));const JI={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},ZI=ze.INFO,eN={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},tN=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),o=eN[e];if(o)console[o](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Uh{constructor(e){this.name=e,this._logLevel=ZI,this._logHandler=tN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?JI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const nN=(n,e)=>e.some(t=>n instanceof t);let rv,sv;function rN(){return rv||(rv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sN(){return sv||(sv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const t_=new WeakMap,xp=new WeakMap,n_=new WeakMap,$f=new WeakMap,dm=new WeakMap;function iN(n){const e=new Promise((t,r)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{t(ti(n.result)),o()},c=()=>{r(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&t_.set(t,n)}).catch(()=>{}),dm.set(e,n),e}function oN(n){if(xp.has(n))return;const e=new Promise((t,r)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{t(),o()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});xp.set(n,e)}let wp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return xp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||n_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ti(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function aN(n){wp=n(wp)}function lN(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(qf(this),e,...t);return n_.set(r,e.sort?e.sort():[e]),ti(r)}:sN().includes(n)?function(...e){return n.apply(qf(this),e),ti(t_.get(this))}:function(...e){return ti(n.apply(qf(this),e))}}function cN(n){return typeof n=="function"?lN(n):(n instanceof IDBTransaction&&oN(n),nN(n,rN())?new Proxy(n,wp):n)}function ti(n){if(n instanceof IDBRequest)return iN(n);if($f.has(n))return $f.get(n);const e=cN(n);return e!==n&&($f.set(n,e),dm.set(e,n)),e}const qf=n=>dm.get(n);function r_(n,e,{blocked:t,upgrade:r,blocking:o,terminated:a}={}){const c=indexedDB.open(n,e),d=ti(c);return r&&c.addEventListener("upgradeneeded",p=>{r(ti(c.result),p.oldVersion,p.newVersion,ti(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{a&&p.addEventListener("close",()=>a()),o&&p.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const uN=["get","getKey","getAll","getAllKeys","count"],hN=["put","add","delete","clear"],Gf=new Map;function iv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Gf.get(e))return Gf.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=hN.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||uN.includes(t)))return;const a=async function(c,...d){const p=this.transaction(c,o?"readwrite":"readonly");let m=p.store;return r&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),o&&p.done]))[0]};return Gf.set(e,a),a}aN(n=>({...n,get:(e,t,r)=>iv(e,t)||n.get(e,t,r),has:(e,t)=>!!iv(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(fN(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function fN(n){const e=n.getComponent();return e?.type==="VERSION"}const _p="@firebase/app",ov="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs=new Uh("@firebase/app"),pN="@firebase/app-compat",mN="@firebase/analytics-compat",gN="@firebase/analytics",yN="@firebase/app-check-compat",vN="@firebase/app-check",xN="@firebase/auth",wN="@firebase/auth-compat",_N="@firebase/database",EN="@firebase/data-connect",TN="@firebase/database-compat",bN="@firebase/functions",SN="@firebase/functions-compat",IN="@firebase/installations",NN="@firebase/installations-compat",kN="@firebase/messaging",PN="@firebase/messaging-compat",AN="@firebase/performance",CN="@firebase/performance-compat",RN="@firebase/remote-config",jN="@firebase/remote-config-compat",DN="@firebase/storage",VN="@firebase/storage-compat",LN="@firebase/firestore",ON="@firebase/vertexai-preview",MN="@firebase/firestore-compat",UN="firebase",FN="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep="[DEFAULT]",BN={[_p]:"fire-core",[pN]:"fire-core-compat",[gN]:"fire-analytics",[mN]:"fire-analytics-compat",[vN]:"fire-app-check",[yN]:"fire-app-check-compat",[xN]:"fire-auth",[wN]:"fire-auth-compat",[_N]:"fire-rtdb",[EN]:"fire-data-connect",[TN]:"fire-rtdb-compat",[bN]:"fire-fn",[SN]:"fire-fn-compat",[IN]:"fire-iid",[NN]:"fire-iid-compat",[kN]:"fire-fcm",[PN]:"fire-fcm-compat",[AN]:"fire-perf",[CN]:"fire-perf-compat",[RN]:"fire-rc",[jN]:"fire-rc-compat",[DN]:"fire-gcs",[VN]:"fire-gcs-compat",[LN]:"fire-fst",[MN]:"fire-fst-compat",[ON]:"fire-vertex","fire-js":"fire-js",[UN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh=new Map,zN=new Map,Tp=new Map;function av(n,e){try{n.container.addComponent(e)}catch(t){hs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Dr(n){const e=n.name;if(Tp.has(e))return hs.debug(`There were multiple attempts to register component ${e}.`),!1;Tp.set(e,n);for(const t of uh.values())av(t,n);for(const t of zN.values())av(t,n);return!0}function ao(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function lr(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ni=new oo("app","Firebase",$N);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ni.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa=FN;function s_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ep,automaticDataCollectionEnabled:!1},e),o=r.name;if(typeof o!="string"||!o)throw ni.create("bad-app-name",{appName:String(o)});if(t||(t=Yw()),!t)throw ni.create("no-options");const a=uh.get(o);if(a){if(Ql(t,a.options)&&Ql(r,a.config))return a;throw ni.create("duplicate-app",{appName:o})}const c=new XI(o);for(const p of Tp.values())c.addComponent(p);const d=new qN(t,r,c);return uh.set(o,d),d}function fm(n=Ep){const e=uh.get(n);if(!e&&n===Ep&&Yw())return s_();if(!e)throw ni.create("no-app",{appName:n});return e}function $n(n,e,t){var r;let o=(r=BN[n])!==null&&r!==void 0?r:n;t&&(o+=`-${t}`);const a=o.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const d=[`Unable to register library "${o}" with version "${e}":`];a&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hs.warn(d.join(" "));return}Dr(new hr(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN="firebase-heartbeat-database",HN=1,Yl="firebase-heartbeat-store";let Hf=null;function i_(){return Hf||(Hf=r_(GN,HN,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Yl)}catch(t){console.warn(t)}}}}).catch(n=>{throw ni.create("idb-open",{originalErrorMessage:n.message})})),Hf}async function WN(n){try{const t=(await i_()).transaction(Yl),r=await t.objectStore(Yl).get(o_(n));return await t.done,r}catch(e){if(e instanceof pr)hs.warn(e.message);else{const t=ni.create("idb-get",{originalErrorMessage:e?.message});hs.warn(t.message)}}}async function lv(n,e){try{const r=(await i_()).transaction(Yl,"readwrite");await r.objectStore(Yl).put(e,o_(n)),await r.done}catch(t){if(t instanceof pr)hs.warn(t.message);else{const r=ni.create("idb-set",{originalErrorMessage:t?.message});hs.warn(r.message)}}}function o_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=1024,QN=720*60*60*1e3;class YN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new JN(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=cv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const d=new Date(c.date).valueOf();return Date.now()-d<=QN}),this._storage.overwrite(this._heartbeatsCache))}catch(r){hs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=cv(),{heartbeatsToSend:r,unsentEntries:o}=XN(this._heartbeatsCache.heartbeats),a=ch(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return hs.warn(t),""}}}function cv(){return new Date().toISOString().substring(0,10)}function XN(n,e=KN){const t=[];let r=n.slice();for(const o of n){const a=t.find(c=>c.agent===o.agent);if(a){if(a.dates.push(o.date),uv(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),uv(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class JN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Zw()?e_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await WN(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return lv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return lv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function uv(n){return ch(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZN(n){Dr(new hr("platform-logger",e=>new dN(e),"PRIVATE")),Dr(new hr("heartbeat",e=>new YN(e),"PRIVATE")),$n(_p,ov,n),$n(_p,ov,"esm2017"),$n("fire-js","")}ZN("");function pm(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]]);return t}function a_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ek=a_,l_=new oo("auth","Firebase",a_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh=new Uh("@firebase/auth");function tk(n,...e){hh.logLevel<=ze.WARN&&hh.warn(`Auth (${Pa}): ${n}`,...e)}function Xu(n,...e){hh.logLevel<=ze.ERROR&&hh.error(`Auth (${Pa}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(n,...e){throw mm(n,...e)}function kr(n,...e){return mm(n,...e)}function c_(n,e,t){const r=Object.assign(Object.assign({},ek()),{[e]:t});return new oo("auth","Firebase",r).create(e,{appName:n.name})}function Pr(n){return c_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mm(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return l_.create(n,...e)}function Ne(n,e,...t){if(!n)throw mm(e,...t)}function ns(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Xu(e),new Error(e)}function ds(n,e){n||ns(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function nk(){return hv()==="http:"||hv()==="https:"}function hv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nk()||Jw()||"connection"in navigator)?navigator.onLine:!0}function sk(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,t){this.shortDelay=e,this.longDelay=t,ds(t>e,"Short delay should be less than long delay!"),this.isMobile=AI()||jI()}get(){return rk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(n,e){ds(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ns("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ns("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ns("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok=new dc(3e4,6e4);function di(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Or(n,e,t,r,o={}){return h_(n,o,async()=>{let a={},c={};r&&(e==="GET"?c=r:a={body:JSON.stringify(r)});const d=hc(Object.assign({key:n.config.apiKey},c)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:p},a);return RI()||(m.referrerPolicy="no-referrer"),u_.fetch()(d_(n,n.config.apiHost,t,d),m)})}async function h_(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},ik),e);try{const o=new lk(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw Bu(n,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const d=a.ok?c.errorMessage:c.error.message,[p,m]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bu(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw Bu(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw Bu(n,"user-disabled",c);const v=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw c_(n,v,m);dr(n,v)}}catch(o){if(o instanceof pr)throw o;dr(n,"network-request-failed",{message:String(o)})}}async function fc(n,e,t,r,o={}){const a=await Or(n,e,t,r,o);return"mfaPendingCredential"in a&&dr(n,"multi-factor-auth-required",{_serverResponse:a}),a}function d_(n,e,t,r){const o=`${e}${t}?${r}`;return n.config.emulator?gm(n.config,o):`${n.config.apiScheme}://${o}`}function ak(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class lk{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(kr(this.auth,"network-request-failed")),ok.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Bu(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=kr(n,e,r);return o.customData._tokenResponse=t,o}function dv(n){return n!==void 0&&n.enterprise!==void 0}class ck{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ak(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function uk(n,e){return Or(n,"GET","/v2/recaptchaConfig",di(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hk(n,e){return Or(n,"POST","/v1/accounts:delete",e)}async function f_(n,e){return Or(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function dk(n,e=!1){const t=Rt(n),r=await t.getIdToken(e),o=ym(r);Ne(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,c=a?.sign_in_provider;return{claims:o,token:r,authTime:Ol(Wf(o.auth_time)),issuedAtTime:Ol(Wf(o.iat)),expirationTime:Ol(Wf(o.exp)),signInProvider:c||null,signInSecondFactor:a?.sign_in_second_factor||null}}function Wf(n){return Number(n)*1e3}function ym(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Xu("JWT malformed, contained fewer than 3 sections"),null;try{const o=Kw(t);return o?JSON.parse(o):(Xu("Failed to decode base64 JWT payload"),null)}catch(o){return Xu("Caught error parsing JWT payload as JSON",o?.toString()),null}}function fv(n){const e=ym(n);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xi(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof pr&&fk(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function fk({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ol(this.lastLoginAt),this.creationTime=Ol(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dh(n){var e;const t=n.auth,r=await n.getIdToken(),o=await Xi(n,f_(t,{idToken:r}));Ne(o?.users.length,t,"internal-error");const a=o.users[0];n._notifyReloadListener(a);const c=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?p_(a.providerUserInfo):[],d=gk(n.providerData,c),p=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!d?.length,v=p?m:!1,w={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new Sp(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(n,w)}async function mk(n){const e=Rt(n);await dh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gk(n,e){return[...n.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function p_(n){return n.map(e=>{var{providerId:t}=e,r=pm(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yk(n,e){const t=await h_(n,{},async()=>{const r=hc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,c=d_(n,o,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",u_.fetch()(c,{method:"POST",headers:d,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function vk(n,e){return Or(n,"POST","/v2/accounts:revokeToken",di(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");const t=fv(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:a}=await yk(e,t);this.updateTokensAndExpiration(r,o,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:a}=t,c=new fa;return r&&(Ne(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),o&&(Ne(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),a&&(Ne(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fa,this.toJSON())}_performRefresh(){return ns("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qs(n,e){Ne(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class rs{constructor(e){var{uid:t,auth:r,stsTokenManager:o}=e,a=pm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Sp(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Xi(this,this.stsTokenManager.getToken(this.auth,e));return Ne(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return dk(this,e)}reload(){return mk(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new rs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await dh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(lr(this.auth.app))return Promise.reject(Pr(this.auth));const e=await this.getIdToken();return await Xi(this,hk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,o,a,c,d,p,m,v;const w=(r=t.displayName)!==null&&r!==void 0?r:void 0,E=(o=t.email)!==null&&o!==void 0?o:void 0,b=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,L=(c=t.photoURL)!==null&&c!==void 0?c:void 0,V=(d=t.tenantId)!==null&&d!==void 0?d:void 0,k=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,D=(m=t.createdAt)!==null&&m!==void 0?m:void 0,M=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:j,emailVerified:W,isAnonymous:ee,providerData:ae,stsTokenManager:R}=t;Ne(j&&R,e,"internal-error");const I=fa.fromJSON(this.name,R);Ne(typeof j=="string",e,"internal-error"),qs(w,e.name),qs(E,e.name),Ne(typeof W=="boolean",e,"internal-error"),Ne(typeof ee=="boolean",e,"internal-error"),qs(b,e.name),qs(L,e.name),qs(V,e.name),qs(k,e.name),qs(D,e.name),qs(M,e.name);const N=new rs({uid:j,auth:e,email:E,emailVerified:W,displayName:w,isAnonymous:ee,photoURL:L,phoneNumber:b,tenantId:V,stsTokenManager:I,createdAt:D,lastLoginAt:M});return ae&&Array.isArray(ae)&&(N.providerData=ae.map(U=>Object.assign({},U))),k&&(N._redirectEventId=k),N}static async _fromIdTokenResponse(e,t,r=!1){const o=new fa;o.updateFromServerResponse(t);const a=new rs({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await dh(a),a}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];Ne(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?p_(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!a?.length,d=new fa;d.updateFromIdToken(r);const p=new rs({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:c}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Sp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!a?.length};return Object.assign(p,m),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv=new Map;function ss(n){ds(n instanceof Function,"Expected a class definition");let e=pv.get(n);return e?(ds(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,pv.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}m_.type="NONE";const mv=m_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ju(n,e,t){return`firebase:${n}:${e}:${t}`}class pa{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:a}=this.auth;this.fullUserKey=Ju(this.userKey,o.apiKey,a),this.fullPersistenceKey=Ju("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?rs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new pa(ss(mv),e,r);const o=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=o[0]||ss(mv);const c=Ju(r,e.config.apiKey,e.name);let d=null;for(const m of t)try{const v=await m._get(c);if(v){const w=rs._fromJSON(e,v);m!==a&&(d=w),a=m;break}}catch{}const p=o.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new pa(a,e,r):(a=p[0],d&&await a._set(c,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(c)}catch{}})),new pa(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(x_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(g_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(__(e))return"Blackberry";if(E_(e))return"Webos";if(y_(e))return"Safari";if((e.includes("chrome/")||v_(e))&&!e.includes("edge/"))return"Chrome";if(w_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function g_(n=en()){return/firefox\//i.test(n)}function y_(n=en()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function v_(n=en()){return/crios\//i.test(n)}function x_(n=en()){return/iemobile/i.test(n)}function w_(n=en()){return/android/i.test(n)}function __(n=en()){return/blackberry/i.test(n)}function E_(n=en()){return/webos/i.test(n)}function vm(n=en()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function xk(n=en()){var e;return vm(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function wk(){return DI()&&document.documentMode===10}function T_(n=en()){return vm(n)||w_(n)||E_(n)||__(n)||/windows phone/i.test(n)||x_(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(n,e=[]){let t;switch(n){case"Browser":t=gv(en());break;case"Worker":t=`${gv(en())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Pa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((c,d)=>{try{const p=e(a);c(p)}catch(p){d(p)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ek(n,e={}){return Or(n,"GET","/v2/passwordPolicy",di(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk=6;class bk{constructor(e){var t,r,o,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:Tk,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,o,a,c,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(r=p.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(a=p.containsUppercaseLetter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yv(this),this.idTokenSubscription=new yv(this),this.beforeStateQueue=new _k(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=l_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ss(t)),this._initializationPromise=this.queue(async()=>{var r,o;if(!this._deleted&&(this.persistenceManager=await pa.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await f_(this,{idToken:e}),r=await rs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(lr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let o=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&p?.user&&(o=p.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(c){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await dh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(lr(this.app))return Promise.reject(Pr(this));const t=e?Rt(e):null;return t&&Ne(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return lr(this.app)?Promise.reject(Pr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return lr(this.app)?Promise.reject(Pr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ss(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Ek(this),t=new bk(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new oo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await vk(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ss(e)||this._popupRedirectResolver;Ne(t,this,"argument-error"),this.redirectPersistenceManager=await pa.create(this,[ss(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(d,this,"internal-error"),d.then(()=>{c||a(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,r,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=b_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&tk(`Error while retrieving App Check token: ${t.error}`),t?.token}}function lo(n){return Rt(n)}class yv{constructor(e){this.auth=e,this.observer=null,this.addObserver=BI(t=>this.observer=t)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ik(n){Fh=n}function S_(n){return Fh.loadJS(n)}function Nk(){return Fh.recaptchaEnterpriseScript}function kk(){return Fh.gapiScript}function Pk(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const Ak="recaptcha-enterprise",Ck="NO_RECAPTCHA";class Rk{constructor(e){this.type=Ak,this.auth=lo(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,d)=>{uk(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new ck(p);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,c(m.siteKey)}}).catch(p=>{d(p)})})}function o(a,c,d){const p=window.grecaptcha;dv(p)?p.enterprise.ready(()=>{p.enterprise.execute(a,{action:e}).then(m=>{c(m)}).catch(()=>{c(Ck)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,c)=>{r(this.auth).then(d=>{if(!t&&dv(window.grecaptcha))o(d,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=Nk();p.length!==0&&(p+=d),S_(p).then(()=>{o(d,a,c)}).catch(m=>{c(m)})}}).catch(d=>{c(d)})})}}async function vv(n,e,t,r=!1){const o=new Rk(n);let a;try{a=await o.verify(t)}catch{a=await o.verify(t,!0)}const c=Object.assign({},e);return r?Object.assign(c,{captchaResp:a}):Object.assign(c,{captchaResponse:a}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Ip(n,e,t,r){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await vv(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await vv(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(n,e){const t=ao(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(Ql(a,e??{}))return o;dr(o,"already-initialized")}return t.initialize({options:e})}function Dk(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ss);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Vk(n,e,t){const r=lo(n);Ne(r._canInitEmulator,r,"emulator-config-failed"),Ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,a=I_(e),{host:c,port:d}=Lk(e),p=d===null?"":`:${d}`;r.config.emulator={url:`${a}//${c}${p}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:c,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})}),Ok()}function I_(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Lk(n){const e=I_(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const a=o[1];return{host:a,port:xv(r.substr(a.length+1))}}else{const[a,c]=r.split(":");return{host:a,port:xv(c)}}}function xv(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Ok(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ns("not implemented")}_getIdTokenResponse(e){return ns("not implemented")}_linkToIdToken(e,t){return ns("not implemented")}_getReauthenticationResolver(e){return ns("not implemented")}}async function Mk(n,e){return Or(n,"POST","/v1/accounts:update",e)}async function Uk(n,e){return Or(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fk(n,e){return fc(n,"POST","/v1/accounts:signInWithPassword",di(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bk(n,e){return fc(n,"POST","/v1/accounts:signInWithEmailLink",di(n,e))}async function zk(n,e){return fc(n,"POST","/v1/accounts:signInWithEmailLink",di(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl extends xm{constructor(e,t,r,o=null){super("password",r),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Xl(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Xl(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ip(e,t,"signInWithPassword",Fk);case"emailLink":return Bk(e,{email:this._email,oobCode:this._password});default:dr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ip(e,r,"signUpPassword",Uk);case"emailLink":return zk(e,{idToken:t,email:this._email,oobCode:this._password});default:dr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ma(n,e){return fc(n,"POST","/v1/accounts:signInWithIdp",di(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k="http://localhost";class Ji extends xm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ji(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):dr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o}=t,a=pm(t,["providerId","signInMethod"]);if(!r||!o)return null;const c=new Ji(r,o);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return ma(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ma(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ma(e,t)}buildRequest(){const e={requestUri:$k,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=hc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qk(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Gk(n){const e=Cl(Rl(n)).link,t=e?Cl(Rl(e)).deep_link_id:null,r=Cl(Rl(n)).deep_link_id;return(r?Cl(Rl(r)).link:null)||r||t||e||n}class wm{constructor(e){var t,r,o,a,c,d;const p=Cl(Rl(e)),m=(t=p.apiKey)!==null&&t!==void 0?t:null,v=(r=p.oobCode)!==null&&r!==void 0?r:null,w=qk((o=p.mode)!==null&&o!==void 0?o:null);Ne(m&&v&&w,"argument-error"),this.apiKey=m,this.operation=w,this.code=v,this.continueUrl=(a=p.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(c=p.languageCode)!==null&&c!==void 0?c:null,this.tenantId=(d=p.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=Gk(e);try{return new wm(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(){this.providerId=ii.PROVIDER_ID}static credential(e,t){return Xl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=wm.parseLink(t);return Ne(r,"argument-error"),Xl._fromEmailAndCode(e,r.code,r.tenantId)}}ii.PROVIDER_ID="password";ii.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ii.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc extends N_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws extends pc{constructor(){super("facebook.com")}static credential(e){return Ji._fromParams({providerId:Ws.PROVIDER_ID,signInMethod:Ws.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ws.credentialFromTaggedObject(e)}static credentialFromError(e){return Ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ws.credential(e.oauthAccessToken)}catch{return null}}}Ws.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ws.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks extends pc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ji._fromParams({providerId:Ks.PROVIDER_ID,signInMethod:Ks.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ks.credentialFromTaggedObject(e)}static credentialFromError(e){return Ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Ks.credential(t,r)}catch{return null}}}Ks.GOOGLE_SIGN_IN_METHOD="google.com";Ks.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs extends pc{constructor(){super("github.com")}static credential(e){return Ji._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qs.credentialFromTaggedObject(e)}static credentialFromError(e){return Qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qs.credential(e.oauthAccessToken)}catch{return null}}}Qs.GITHUB_SIGN_IN_METHOD="github.com";Qs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys extends pc{constructor(){super("twitter.com")}static credential(e,t){return Ji._fromParams({providerId:Ys.PROVIDER_ID,signInMethod:Ys.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ys.credentialFromTaggedObject(e)}static credentialFromError(e){return Ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Ys.credential(t,r)}catch{return null}}}Ys.TWITTER_SIGN_IN_METHOD="twitter.com";Ys.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hk(n,e){return fc(n,"POST","/v1/accounts:signUp",di(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const a=await rs._fromIdTokenResponse(e,r,o),c=wv(r);return new Zi({user:a,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=wv(r);return new Zi({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function wv(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh extends pr{constructor(e,t,r,o){var a;super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,fh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new fh(e,t,r,o)}}function k_(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?fh._fromErrorAndOperation(n,a,e,r):a})}async function Wk(n,e,t=!1){const r=await Xi(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Zi._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P_(n,e,t=!1){const{auth:r}=n;if(lr(r.app))return Promise.reject(Pr(r));const o="reauthenticate";try{const a=await Xi(n,k_(r,o,e,n),t);Ne(a.idToken,r,"internal-error");const c=ym(a.idToken);Ne(c,r,"internal-error");const{sub:d}=c;return Ne(n.uid===d,r,"user-mismatch"),Zi._forOperation(n,o,a)}catch(a){throw a?.code==="auth/user-not-found"&&dr(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A_(n,e,t=!1){if(lr(n.app))return Promise.reject(Pr(n));const r="signIn",o=await k_(n,r,e),a=await Zi._fromIdTokenResponse(n,r,o);return t||await n._updateCurrentUser(a.user),a}async function Kk(n,e){return A_(lo(n),e)}async function _v(n,e){return P_(Rt(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C_(n){const e=lo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Qk(n,e,t){if(lr(n.app))return Promise.reject(Pr(n));const r=lo(n),c=await Ip(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Hk).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&C_(n),p}),d=await Zi._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(d.user),d}function Yk(n,e,t){return lr(n.app)?Promise.reject(Pr(n)):Kk(Rt(n),ii.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&C_(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xk(n,e){return Or(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Np(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Rt(n),a={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await Xi(r,Xk(r.auth,a));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const d=r.providerData.find(({providerId:p})=>p==="password");d&&(d.displayName=r.displayName,d.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function Jk(n,e){const t=Rt(n);return lr(t.auth.app)?Promise.reject(Pr(t.auth)):R_(t,e,null)}function Zk(n,e){return R_(Rt(n),null,e)}async function R_(n,e,t){const{auth:r}=n,a={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(a.email=e),t&&(a.password=t);const c=await Xi(n,Mk(r,a));await n._updateTokensIfNecessary(c,!0)}function eP(n,e,t,r){return Rt(n).onIdTokenChanged(e,t,r)}function tP(n,e,t){return Rt(n).beforeAuthStateChanged(e,t)}function nP(n,e,t,r){return Rt(n).onAuthStateChanged(e,t,r)}function rP(n){return Rt(n).signOut()}const ph="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ph,"1"),this.storage.removeItem(ph),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP=1e3,iP=10;class D_ extends j_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=T_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);wk()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,iP):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},sP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}D_.type="LOCAL";const oP=D_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_ extends j_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}V_.type="SESSION";const L_=V_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aP(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new Bh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:a}=t.data,c=this.handlersMap[o];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const d=Array.from(c).map(async m=>m(t.origin,a)),p=await aP(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,c;return new Promise((d,p)=>{const m=_m("",20);o.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},r);c={messageChannel:o,onMessage(w){const E=w;if(E.data.eventId===m)switch(E.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(E.data.response);break;default:clearTimeout(v),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(){return window}function cP(n){Ar().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(){return typeof Ar().WorkerGlobalScope<"u"&&typeof Ar().importScripts=="function"}async function uP(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hP(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function dP(){return O_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_="firebaseLocalStorageDb",fP=1,mh="firebaseLocalStorage",U_="fbase_key";class mc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function zh(n,e){return n.transaction([mh],e?"readwrite":"readonly").objectStore(mh)}function pP(){const n=indexedDB.deleteDatabase(M_);return new mc(n).toPromise()}function kp(){const n=indexedDB.open(M_,fP);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(mh,{keyPath:U_})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(mh)?e(r):(r.close(),await pP(),e(await kp()))})})}async function Ev(n,e,t){const r=zh(n,!0).put({[U_]:e,value:t});return new mc(r).toPromise()}async function mP(n,e){const t=zh(n,!1).get(e),r=await new mc(t).toPromise();return r===void 0?null:r.value}function Tv(n,e){const t=zh(n,!0).delete(e);return new mc(t).toPromise()}const gP=800,yP=3;class F_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>yP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return O_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bh._getInstance(dP()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await uP(),!this.activeServiceWorker)return;this.sender=new lP(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await kp();return await Ev(e,ph,"1"),await Tv(e,ph),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ev(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>mP(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Tv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=zh(o,!1).getAll();return new mc(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}F_.type="LOCAL";const vP=F_;new dc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(n,e){return e?ss(e):(Ne(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em extends xm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ma(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ma(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ma(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function wP(n){return A_(n.auth,new Em(n),n.bypassAuthState)}function _P(n){const{auth:e,user:t}=n;return Ne(t,e,"internal-error"),P_(t,new Em(n),n.bypassAuthState)}async function EP(n){const{auth:e,user:t}=n;return Ne(t,e,"internal-error"),Wk(t,new Em(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e,t,r,o,a=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:a,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wP;case"linkViaPopup":case"linkViaRedirect":return EP;case"reauthViaPopup":case"reauthViaRedirect":return _P;default:dr(this.auth,"internal-error")}}resolve(e){ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TP=new dc(2e3,1e4);class oa extends B_{constructor(e,t,r,o,a){super(e,t,o,a),this.provider=r,this.authWindow=null,this.pollId=null,oa.currentPopupAction&&oa.currentPopupAction.cancel(),oa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ne(e,this.auth,"internal-error"),e}async onExecution(){ds(this.filter.length===1,"Popup operations only handle one event");const e=_m();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(kr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(kr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(kr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,TP.get())};e()}}oa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP="pendingRedirect",Zu=new Map;class SP extends B_{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Zu.get(this.auth._key());if(!e){try{const r=await IP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Zu.set(this.auth._key(),e)}return this.bypassAuthState||Zu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function IP(n,e){const t=PP(e),r=kP(n);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function NP(n,e){Zu.set(n._key(),e)}function kP(n){return ss(n._redirectPersistence)}function PP(n){return Ju(bP,n.config.apiKey,n.name)}async function AP(n,e,t=!1){if(lr(n.app))return Promise.reject(Pr(n));const r=lo(n),o=xP(r,e),c=await new SP(r,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP=600*1e3;class RP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jP(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!z_(e)){const o=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(kr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=CP&&this.cachedEventUids.clear(),this.cachedEventUids.has(bv(e))}saveEventToCache(e){this.cachedEventUids.add(bv(e)),this.lastProcessedEventTime=Date.now()}}function bv(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function z_({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function jP(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return z_(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DP(n,e={}){return Or(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,LP=/^https?/;async function OP(n){if(n.config.emulator)return;const{authorizedDomains:e}=await DP(n);for(const t of e)try{if(MP(t))return}catch{}dr(n,"unauthorized-domain")}function MP(n){const e=bp(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!LP.test(t))return!1;if(VP.test(n))return r===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP=new dc(3e4,6e4);function Sv(){const n=Ar().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function FP(n){return new Promise((e,t)=>{var r,o,a;function c(){Sv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Sv(),t(kr(n,"network-request-failed"))},timeout:UP.get()})}if(!((o=(r=Ar().gapi)===null||r===void 0?void 0:r.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((a=Ar().gapi)===null||a===void 0)&&a.load)c();else{const d=Pk("iframefcb");return Ar()[d]=()=>{gapi.load?c():t(kr(n,"network-request-failed"))},S_(`${kk()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw eh=null,e})}let eh=null;function BP(n){return eh=eh||FP(n),eh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP=new dc(5e3,15e3),$P="__/auth/iframe",qP="emulator/auth/iframe",GP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},HP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function WP(n){const e=n.config;Ne(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?gm(e,qP):`https://${n.config.authDomain}/${$P}`,r={apiKey:e.apiKey,appName:n.name,v:Pa},o=HP.get(n.config.apiHost);o&&(r.eid=o);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${hc(r).slice(1)}`}async function KP(n){const e=await BP(n),t=Ar().gapi;return Ne(t,n,"internal-error"),e.open({where:document.body,url:WP(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:GP,dontclear:!0},r=>new Promise(async(o,a)=>{await r.restyle({setHideOnLeave:!1});const c=kr(n,"network-request-failed"),d=Ar().setTimeout(()=>{a(c)},zP.get());function p(){Ar().clearTimeout(d),o(r)}r.ping(p).then(p,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},YP=500,XP=600,JP="_blank",ZP="http://localhost";class Iv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function eA(n,e,t,r=YP,o=XP){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const p=Object.assign(Object.assign({},QP),{width:r.toString(),height:o.toString(),top:a,left:c}),m=en().toLowerCase();t&&(d=v_(m)?JP:t),g_(m)&&(e=e||ZP,p.scrollbars="yes");const v=Object.entries(p).reduce((E,[b,L])=>`${E}${b}=${L},`,"");if(xk(m)&&d!=="_self")return tA(e||"",d),new Iv(null);const w=window.open(e||"",d,v);Ne(w,n,"popup-blocked");try{w.focus()}catch{}return new Iv(w)}function tA(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA="__/auth/handler",rA="emulator/auth/handler",sA=encodeURIComponent("fac");async function Nv(n,e,t,r,o,a){Ne(n.config.authDomain,n,"auth-domain-config-required"),Ne(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Pa,eventId:o};if(e instanceof N_){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",FI(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,w]of Object.entries({}))c[v]=w}if(e instanceof pc){const v=e.getScopes().filter(w=>w!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const p=await n._getAppCheckToken(),m=p?`#${sA}=${encodeURIComponent(p)}`:"";return`${iA(n)}?${hc(d).slice(1)}${m}`}function iA({config:n}){return n.emulator?gm(n,rA):`https://${n.authDomain}/${nA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf="webStorageSupport";class oA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=L_,this._completeRedirectFn=AP,this._overrideRedirectResult=NP}async _openPopup(e,t,r,o){var a;ds((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=await Nv(e,t,r,bp(),o);return eA(e,c,_m())}async _openRedirect(e,t,r,o){await this._originValidation(e);const a=await Nv(e,t,r,bp(),o);return cP(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(ds(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await KP(e),r=new RP(e);return t.register("authEvent",o=>(Ne(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Kf,{type:Kf},o=>{var a;const c=(a=o?.[0])===null||a===void 0?void 0:a[Kf];c!==void 0&&t(!!c),dr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=OP(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return T_()||y_()||vm()}}const aA=oA;var kv="@firebase/auth",Pv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uA(n){Dr(new hr("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;Ne(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:b_(n)},m=new Sk(r,o,a,p);return Dk(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Dr(new hr("auth-internal",e=>{const t=lo(e.getProvider("auth").getImmediate());return(r=>new lA(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),$n(kv,Pv,cA(n)),$n(kv,Pv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA=300,dA=Xw("authIdTokenMaxAge")||hA;let Av=null;const fA=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>dA)return;const o=t?.token;Av!==o&&(Av=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function pA(n=fm()){const e=ao(n,"auth");if(e.isInitialized())return e.getImmediate();const t=jk(n,{popupRedirectResolver:aA,persistence:[vP,oP,L_]}),r=Xw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const c=fA(a.toString());tP(t,c,()=>c(t.currentUser)),eP(t,d=>c(d))}}const o=Qw("auth");return o&&Vk(t,`http://${o}`),t}function mA(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Ik({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=o=>{const a=kr("internal-error");a.customData=o,t(a)},r.type="text/javascript",r.charset="UTF-8",mA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uA("Browser");var Cv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qi,$_;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,I){function N(){}N.prototype=I.prototype,R.D=I.prototype,R.prototype=new N,R.prototype.constructor=R,R.C=function(U,B,$){for(var A=Array(arguments.length-2),we=2;we<arguments.length;we++)A[we-2]=arguments[we];return I.prototype[B].apply(U,A)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,I,N){N||(N=0);var U=Array(16);if(typeof I=="string")for(var B=0;16>B;++B)U[B]=I.charCodeAt(N++)|I.charCodeAt(N++)<<8|I.charCodeAt(N++)<<16|I.charCodeAt(N++)<<24;else for(B=0;16>B;++B)U[B]=I[N++]|I[N++]<<8|I[N++]<<16|I[N++]<<24;I=R.g[0],N=R.g[1],B=R.g[2];var $=R.g[3],A=I+($^N&(B^$))+U[0]+3614090360&4294967295;I=N+(A<<7&4294967295|A>>>25),A=$+(B^I&(N^B))+U[1]+3905402710&4294967295,$=I+(A<<12&4294967295|A>>>20),A=B+(N^$&(I^N))+U[2]+606105819&4294967295,B=$+(A<<17&4294967295|A>>>15),A=N+(I^B&($^I))+U[3]+3250441966&4294967295,N=B+(A<<22&4294967295|A>>>10),A=I+($^N&(B^$))+U[4]+4118548399&4294967295,I=N+(A<<7&4294967295|A>>>25),A=$+(B^I&(N^B))+U[5]+1200080426&4294967295,$=I+(A<<12&4294967295|A>>>20),A=B+(N^$&(I^N))+U[6]+2821735955&4294967295,B=$+(A<<17&4294967295|A>>>15),A=N+(I^B&($^I))+U[7]+4249261313&4294967295,N=B+(A<<22&4294967295|A>>>10),A=I+($^N&(B^$))+U[8]+1770035416&4294967295,I=N+(A<<7&4294967295|A>>>25),A=$+(B^I&(N^B))+U[9]+2336552879&4294967295,$=I+(A<<12&4294967295|A>>>20),A=B+(N^$&(I^N))+U[10]+4294925233&4294967295,B=$+(A<<17&4294967295|A>>>15),A=N+(I^B&($^I))+U[11]+2304563134&4294967295,N=B+(A<<22&4294967295|A>>>10),A=I+($^N&(B^$))+U[12]+1804603682&4294967295,I=N+(A<<7&4294967295|A>>>25),A=$+(B^I&(N^B))+U[13]+4254626195&4294967295,$=I+(A<<12&4294967295|A>>>20),A=B+(N^$&(I^N))+U[14]+2792965006&4294967295,B=$+(A<<17&4294967295|A>>>15),A=N+(I^B&($^I))+U[15]+1236535329&4294967295,N=B+(A<<22&4294967295|A>>>10),A=I+(B^$&(N^B))+U[1]+4129170786&4294967295,I=N+(A<<5&4294967295|A>>>27),A=$+(N^B&(I^N))+U[6]+3225465664&4294967295,$=I+(A<<9&4294967295|A>>>23),A=B+(I^N&($^I))+U[11]+643717713&4294967295,B=$+(A<<14&4294967295|A>>>18),A=N+($^I&(B^$))+U[0]+3921069994&4294967295,N=B+(A<<20&4294967295|A>>>12),A=I+(B^$&(N^B))+U[5]+3593408605&4294967295,I=N+(A<<5&4294967295|A>>>27),A=$+(N^B&(I^N))+U[10]+38016083&4294967295,$=I+(A<<9&4294967295|A>>>23),A=B+(I^N&($^I))+U[15]+3634488961&4294967295,B=$+(A<<14&4294967295|A>>>18),A=N+($^I&(B^$))+U[4]+3889429448&4294967295,N=B+(A<<20&4294967295|A>>>12),A=I+(B^$&(N^B))+U[9]+568446438&4294967295,I=N+(A<<5&4294967295|A>>>27),A=$+(N^B&(I^N))+U[14]+3275163606&4294967295,$=I+(A<<9&4294967295|A>>>23),A=B+(I^N&($^I))+U[3]+4107603335&4294967295,B=$+(A<<14&4294967295|A>>>18),A=N+($^I&(B^$))+U[8]+1163531501&4294967295,N=B+(A<<20&4294967295|A>>>12),A=I+(B^$&(N^B))+U[13]+2850285829&4294967295,I=N+(A<<5&4294967295|A>>>27),A=$+(N^B&(I^N))+U[2]+4243563512&4294967295,$=I+(A<<9&4294967295|A>>>23),A=B+(I^N&($^I))+U[7]+1735328473&4294967295,B=$+(A<<14&4294967295|A>>>18),A=N+($^I&(B^$))+U[12]+2368359562&4294967295,N=B+(A<<20&4294967295|A>>>12),A=I+(N^B^$)+U[5]+4294588738&4294967295,I=N+(A<<4&4294967295|A>>>28),A=$+(I^N^B)+U[8]+2272392833&4294967295,$=I+(A<<11&4294967295|A>>>21),A=B+($^I^N)+U[11]+1839030562&4294967295,B=$+(A<<16&4294967295|A>>>16),A=N+(B^$^I)+U[14]+4259657740&4294967295,N=B+(A<<23&4294967295|A>>>9),A=I+(N^B^$)+U[1]+2763975236&4294967295,I=N+(A<<4&4294967295|A>>>28),A=$+(I^N^B)+U[4]+1272893353&4294967295,$=I+(A<<11&4294967295|A>>>21),A=B+($^I^N)+U[7]+4139469664&4294967295,B=$+(A<<16&4294967295|A>>>16),A=N+(B^$^I)+U[10]+3200236656&4294967295,N=B+(A<<23&4294967295|A>>>9),A=I+(N^B^$)+U[13]+681279174&4294967295,I=N+(A<<4&4294967295|A>>>28),A=$+(I^N^B)+U[0]+3936430074&4294967295,$=I+(A<<11&4294967295|A>>>21),A=B+($^I^N)+U[3]+3572445317&4294967295,B=$+(A<<16&4294967295|A>>>16),A=N+(B^$^I)+U[6]+76029189&4294967295,N=B+(A<<23&4294967295|A>>>9),A=I+(N^B^$)+U[9]+3654602809&4294967295,I=N+(A<<4&4294967295|A>>>28),A=$+(I^N^B)+U[12]+3873151461&4294967295,$=I+(A<<11&4294967295|A>>>21),A=B+($^I^N)+U[15]+530742520&4294967295,B=$+(A<<16&4294967295|A>>>16),A=N+(B^$^I)+U[2]+3299628645&4294967295,N=B+(A<<23&4294967295|A>>>9),A=I+(B^(N|~$))+U[0]+4096336452&4294967295,I=N+(A<<6&4294967295|A>>>26),A=$+(N^(I|~B))+U[7]+1126891415&4294967295,$=I+(A<<10&4294967295|A>>>22),A=B+(I^($|~N))+U[14]+2878612391&4294967295,B=$+(A<<15&4294967295|A>>>17),A=N+($^(B|~I))+U[5]+4237533241&4294967295,N=B+(A<<21&4294967295|A>>>11),A=I+(B^(N|~$))+U[12]+1700485571&4294967295,I=N+(A<<6&4294967295|A>>>26),A=$+(N^(I|~B))+U[3]+2399980690&4294967295,$=I+(A<<10&4294967295|A>>>22),A=B+(I^($|~N))+U[10]+4293915773&4294967295,B=$+(A<<15&4294967295|A>>>17),A=N+($^(B|~I))+U[1]+2240044497&4294967295,N=B+(A<<21&4294967295|A>>>11),A=I+(B^(N|~$))+U[8]+1873313359&4294967295,I=N+(A<<6&4294967295|A>>>26),A=$+(N^(I|~B))+U[15]+4264355552&4294967295,$=I+(A<<10&4294967295|A>>>22),A=B+(I^($|~N))+U[6]+2734768916&4294967295,B=$+(A<<15&4294967295|A>>>17),A=N+($^(B|~I))+U[13]+1309151649&4294967295,N=B+(A<<21&4294967295|A>>>11),A=I+(B^(N|~$))+U[4]+4149444226&4294967295,I=N+(A<<6&4294967295|A>>>26),A=$+(N^(I|~B))+U[11]+3174756917&4294967295,$=I+(A<<10&4294967295|A>>>22),A=B+(I^($|~N))+U[2]+718787259&4294967295,B=$+(A<<15&4294967295|A>>>17),A=N+($^(B|~I))+U[9]+3951481745&4294967295,R.g[0]=R.g[0]+I&4294967295,R.g[1]=R.g[1]+(B+(A<<21&4294967295|A>>>11))&4294967295,R.g[2]=R.g[2]+B&4294967295,R.g[3]=R.g[3]+$&4294967295}r.prototype.u=function(R,I){I===void 0&&(I=R.length);for(var N=I-this.blockSize,U=this.B,B=this.h,$=0;$<I;){if(B==0)for(;$<=N;)o(this,R,$),$+=this.blockSize;if(typeof R=="string"){for(;$<I;)if(U[B++]=R.charCodeAt($++),B==this.blockSize){o(this,U),B=0;break}}else for(;$<I;)if(U[B++]=R[$++],B==this.blockSize){o(this,U),B=0;break}}this.h=B,this.o+=I},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var I=1;I<R.length-8;++I)R[I]=0;var N=8*this.o;for(I=R.length-8;I<R.length;++I)R[I]=N&255,N/=256;for(this.u(R),R=Array(16),I=N=0;4>I;++I)for(var U=0;32>U;U+=8)R[N++]=this.g[I]>>>U&255;return R};function a(R,I){var N=d;return Object.prototype.hasOwnProperty.call(N,R)?N[R]:N[R]=I(R)}function c(R,I){this.h=I;for(var N=[],U=!0,B=R.length-1;0<=B;B--){var $=R[B]|0;U&&$==I||(N[B]=$,U=!1)}this.g=N}var d={};function p(R){return-128<=R&&128>R?a(R,function(I){return new c([I|0],0>I?-1:0)}):new c([R|0],0>R?-1:0)}function m(R){if(isNaN(R)||!isFinite(R))return w;if(0>R)return k(m(-R));for(var I=[],N=1,U=0;R>=N;U++)I[U]=R/N|0,N*=4294967296;return new c(I,0)}function v(R,I){if(R.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(R.charAt(0)=="-")return k(v(R.substring(1),I));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=m(Math.pow(I,8)),U=w,B=0;B<R.length;B+=8){var $=Math.min(8,R.length-B),A=parseInt(R.substring(B,B+$),I);8>$?($=m(Math.pow(I,$)),U=U.j($).add(m(A))):(U=U.j(N),U=U.add(m(A)))}return U}var w=p(0),E=p(1),b=p(16777216);n=c.prototype,n.m=function(){if(V(this))return-k(this).m();for(var R=0,I=1,N=0;N<this.g.length;N++){var U=this.i(N);R+=(0<=U?U:4294967296+U)*I,I*=4294967296}return R},n.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(L(this))return"0";if(V(this))return"-"+k(this).toString(R);for(var I=m(Math.pow(R,6)),N=this,U="";;){var B=W(N,I).g;N=D(N,B.j(I));var $=((0<N.g.length?N.g[0]:N.h)>>>0).toString(R);if(N=B,L(N))return $+U;for(;6>$.length;)$="0"+$;U=$+U}},n.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function L(R){if(R.h!=0)return!1;for(var I=0;I<R.g.length;I++)if(R.g[I]!=0)return!1;return!0}function V(R){return R.h==-1}n.l=function(R){return R=D(this,R),V(R)?-1:L(R)?0:1};function k(R){for(var I=R.g.length,N=[],U=0;U<I;U++)N[U]=~R.g[U];return new c(N,~R.h).add(E)}n.abs=function(){return V(this)?k(this):this},n.add=function(R){for(var I=Math.max(this.g.length,R.g.length),N=[],U=0,B=0;B<=I;B++){var $=U+(this.i(B)&65535)+(R.i(B)&65535),A=($>>>16)+(this.i(B)>>>16)+(R.i(B)>>>16);U=A>>>16,$&=65535,A&=65535,N[B]=A<<16|$}return new c(N,N[N.length-1]&-2147483648?-1:0)};function D(R,I){return R.add(k(I))}n.j=function(R){if(L(this)||L(R))return w;if(V(this))return V(R)?k(this).j(k(R)):k(k(this).j(R));if(V(R))return k(this.j(k(R)));if(0>this.l(b)&&0>R.l(b))return m(this.m()*R.m());for(var I=this.g.length+R.g.length,N=[],U=0;U<2*I;U++)N[U]=0;for(U=0;U<this.g.length;U++)for(var B=0;B<R.g.length;B++){var $=this.i(U)>>>16,A=this.i(U)&65535,we=R.i(B)>>>16,Ue=R.i(B)&65535;N[2*U+2*B]+=A*Ue,M(N,2*U+2*B),N[2*U+2*B+1]+=$*Ue,M(N,2*U+2*B+1),N[2*U+2*B+1]+=A*we,M(N,2*U+2*B+1),N[2*U+2*B+2]+=$*we,M(N,2*U+2*B+2)}for(U=0;U<I;U++)N[U]=N[2*U+1]<<16|N[2*U];for(U=I;U<2*I;U++)N[U]=0;return new c(N,0)};function M(R,I){for(;(R[I]&65535)!=R[I];)R[I+1]+=R[I]>>>16,R[I]&=65535,I++}function j(R,I){this.g=R,this.h=I}function W(R,I){if(L(I))throw Error("division by zero");if(L(R))return new j(w,w);if(V(R))return I=W(k(R),I),new j(k(I.g),k(I.h));if(V(I))return I=W(R,k(I)),new j(k(I.g),I.h);if(30<R.g.length){if(V(R)||V(I))throw Error("slowDivide_ only works with positive integers.");for(var N=E,U=I;0>=U.l(R);)N=ee(N),U=ee(U);var B=ae(N,1),$=ae(U,1);for(U=ae(U,2),N=ae(N,2);!L(U);){var A=$.add(U);0>=A.l(R)&&(B=B.add(N),$=A),U=ae(U,1),N=ae(N,1)}return I=D(R,B.j(I)),new j(B,I)}for(B=w;0<=R.l(I);){for(N=Math.max(1,Math.floor(R.m()/I.m())),U=Math.ceil(Math.log(N)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),$=m(N),A=$.j(I);V(A)||0<A.l(R);)N-=U,$=m(N),A=$.j(I);L($)&&($=E),B=B.add($),R=D(R,A)}return new j(B,R)}n.A=function(R){return W(this,R).h},n.and=function(R){for(var I=Math.max(this.g.length,R.g.length),N=[],U=0;U<I;U++)N[U]=this.i(U)&R.i(U);return new c(N,this.h&R.h)},n.or=function(R){for(var I=Math.max(this.g.length,R.g.length),N=[],U=0;U<I;U++)N[U]=this.i(U)|R.i(U);return new c(N,this.h|R.h)},n.xor=function(R){for(var I=Math.max(this.g.length,R.g.length),N=[],U=0;U<I;U++)N[U]=this.i(U)^R.i(U);return new c(N,this.h^R.h)};function ee(R){for(var I=R.g.length+1,N=[],U=0;U<I;U++)N[U]=R.i(U)<<1|R.i(U-1)>>>31;return new c(N,R.h)}function ae(R,I){var N=I>>5;I%=32;for(var U=R.g.length-N,B=[],$=0;$<U;$++)B[$]=0<I?R.i($+N)>>>I|R.i($+N+1)<<32-I:R.i($+N);return new c(B,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,$_=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=v,Qi=c}).apply(typeof Cv<"u"?Cv:typeof self<"u"?self:typeof window<"u"?window:{});var zu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var q_,jl,G_,th,Pp,H_,W_,K_;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,y,_){return h==Array.prototype||h==Object.prototype||(h[y]=_.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof zu=="object"&&zu];for(var y=0;y<h.length;++y){var _=h[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=t(this);function o(h,y){if(y)e:{var _=r;h=h.split(".");for(var S=0;S<h.length-1;S++){var q=h[S];if(!(q in _))break e;_=_[q]}h=h[h.length-1],S=_[h],y=y(S),y!=S&&y!=null&&e(_,h,{configurable:!0,writable:!0,value:y})}}function a(h,y){h instanceof String&&(h+="");var _=0,S=!1,q={next:function(){if(!S&&_<h.length){var Q=_++;return{value:y(Q,h[Q]),done:!1}}return S=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}o("Array.prototype.values",function(h){return h||function(){return a(this,function(y,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function p(h){var y=typeof h;return y=y!="object"?y:h?Array.isArray(h)?"array":y:"null",y=="array"||y=="object"&&typeof h.length=="number"}function m(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function v(h,y,_){return h.call.apply(h.bind,arguments)}function w(h,y,_){if(!h)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,S),h.apply(y,q)}}return function(){return h.apply(y,arguments)}}function E(h,y,_){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:w,E.apply(null,arguments)}function b(h,y){var _=Array.prototype.slice.call(arguments,1);return function(){var S=_.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function L(h,y){function _(){}_.prototype=y.prototype,h.aa=y.prototype,h.prototype=new _,h.prototype.constructor=h,h.Qb=function(S,q,Q){for(var ue=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)ue[Xe-2]=arguments[Xe];return y.prototype[q].apply(S,ue)}}function V(h){const y=h.length;if(0<y){const _=Array(y);for(let S=0;S<y;S++)_[S]=h[S];return _}return[]}function k(h,y){for(let _=1;_<arguments.length;_++){const S=arguments[_];if(p(S)){const q=h.length||0,Q=S.length||0;h.length=q+Q;for(let ue=0;ue<Q;ue++)h[q+ue]=S[ue]}else h.push(S)}}class D{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function M(h){return/^[\s\xa0]*$/.test(h)}function j(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function W(h){return W[" "](h),h}W[" "]=function(){};var ee=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function ae(h,y,_){for(const S in h)y.call(_,h[S],S,h)}function R(h,y){for(const _ in h)y.call(void 0,h[_],_,h)}function I(h){const y={};for(const _ in h)y[_]=h[_];return y}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(h,y){let _,S;for(let q=1;q<arguments.length;q++){S=arguments[q];for(_ in S)h[_]=S[_];for(let Q=0;Q<N.length;Q++)_=N[Q],Object.prototype.hasOwnProperty.call(S,_)&&(h[_]=S[_])}}function B(h){var y=1;h=h.split(":");const _=[];for(;0<y&&h.length;)_.push(h.shift()),y--;return h.length&&_.push(h.join(":")),_}function $(h){d.setTimeout(()=>{throw h},0)}function A(){var h=J;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class we{constructor(){this.h=this.g=null}add(y,_){const S=Ue.get();S.set(y,_),this.h?this.h.next=S:this.g=S,this.h=S}}var Ue=new D(()=>new Ve,h=>h.reset());class Ve{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Te,le=!1,J=new we,Z=()=>{const h=d.Promise.resolve(void 0);Te=()=>{h.then(O)}};var O=()=>{for(var h;h=A();){try{h.h.call(h.g)}catch(_){$(_)}var y=Ue;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}le=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var oe=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const _=()=>{};d.addEventListener("test",_,y),d.removeEventListener("test",_,y)}catch{}return h}();function he(h,y){if(fe.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var _=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(ee){e:{try{W(y.nodeName);var q=!0;break e}catch{}q=!1}q||(y=null)}}else _=="mouseover"?y=h.fromElement:_=="mouseout"&&(y=h.toElement);this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:ve[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&he.aa.h.call(this)}}L(he,fe);var ve={2:"touch",3:"pen",4:"mouse"};he.prototype.h=function(){he.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var De="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function Ke(h,y,_,S,q){this.listener=h,this.proxy=null,this.src=y,this.type=_,this.capture=!!S,this.ha=q,this.key=++Fe,this.da=this.fa=!1}function rt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function bt(h){this.src=h,this.g={},this.h=0}bt.prototype.add=function(h,y,_,S,q){var Q=h.toString();h=this.g[Q],h||(h=this.g[Q]=[],this.h++);var ue=mr(h,y,S,q);return-1<ue?(y=h[ue],_||(y.fa=!1)):(y=new Ke(y,this.src,Q,!!S,q),y.fa=_,h.push(y)),y};function Mr(h,y){var _=y.type;if(_ in h.g){var S=h.g[_],q=Array.prototype.indexOf.call(S,y,void 0),Q;(Q=0<=q)&&Array.prototype.splice.call(S,q,1),Q&&(rt(y),h.g[_].length==0&&(delete h.g[_],h.h--))}}function mr(h,y,_,S){for(var q=0;q<h.length;++q){var Q=h[q];if(!Q.da&&Q.listener==y&&Q.capture==!!_&&Q.ha==S)return q}return-1}var Ur="closure_lm_"+(1e6*Math.random()|0),vs={};function Y(h,y,_,S,q){if(Array.isArray(y)){for(var Q=0;Q<y.length;Q++)Y(h,y[Q],_,S,q);return null}return _=Va(_),h&&h[De]?h.K(y,_,m(S)?!!S.capture:!1,q):He(h,y,_,!1,S,q)}function He(h,y,_,S,q,Q){if(!y)throw Error("Invalid event type");var ue=m(q)?!!q.capture:!!q,Xe=po(h);if(Xe||(h[Ur]=Xe=new bt(h)),_=Xe.add(y,_,S,ue,Q),_.proxy)return _;if(S=ot(),_.proxy=S,S.src=h,S.listener=_,h.addEventListener)oe||(q=ue),q===void 0&&(q=!1),h.addEventListener(y.toString(),S,q);else if(h.attachEvent)h.attachEvent(Pn(y.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return _}function ot(){function h(_){return y.call(h.src,h.listener,_)}const y=Da;return h}function xs(h,y,_,S,q){if(Array.isArray(y))for(var Q=0;Q<y.length;Q++)xs(h,y[Q],_,S,q);else S=m(S)?!!S.capture:!!S,_=Va(_),h&&h[De]?(h=h.i,y=String(y).toString(),y in h.g&&(Q=h.g[y],_=mr(Q,_,S,q),-1<_&&(rt(Q[_]),Array.prototype.splice.call(Q,_,1),Q.length==0&&(delete h.g[y],h.h--)))):h&&(h=po(h))&&(y=h.g[y.toString()],h=-1,y&&(h=mr(y,_,S,q)),(_=-1<h?y[h]:null)&&Hn(_))}function Hn(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[De])Mr(y.i,h);else{var _=h.type,S=h.proxy;y.removeEventListener?y.removeEventListener(_,S,h.capture):y.detachEvent?y.detachEvent(Pn(_),S):y.addListener&&y.removeListener&&y.removeListener(S),(_=po(y))?(Mr(_,h),_.h==0&&(_.src=null,y[Ur]=null)):rt(h)}}}function Pn(h){return h in vs?vs[h]:vs[h]="on"+h}function Da(h,y){if(h.da)h=!0;else{y=new he(y,this);var _=h.listener,S=h.ha||h.src;h.fa&&Hn(h),h=_.call(S,y)}return h}function po(h){return h=h[Ur],h instanceof bt?h:null}var mo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Va(h){return typeof h=="function"?h:(h[mo]||(h[mo]=function(y){return h.handleEvent(y)}),h[mo])}function St(){X.call(this),this.i=new bt(this),this.M=this,this.F=null}L(St,X),St.prototype[De]=!0,St.prototype.removeEventListener=function(h,y,_,S){xs(this,h,y,_,S)};function It(h,y){var _,S=h.F;if(S)for(_=[];S;S=S.F)_.push(S);if(h=h.M,S=y.type||y,typeof y=="string")y=new fe(y,h);else if(y instanceof fe)y.target=y.target||h;else{var q=y;y=new fe(S,h),U(y,q)}if(q=!0,_)for(var Q=_.length-1;0<=Q;Q--){var ue=y.g=_[Q];q=Fr(ue,S,!0,y)&&q}if(ue=y.g=h,q=Fr(ue,S,!0,y)&&q,q=Fr(ue,S,!1,y)&&q,_)for(Q=0;Q<_.length;Q++)ue=y.g=_[Q],q=Fr(ue,S,!1,y)&&q}St.prototype.N=function(){if(St.aa.N.call(this),this.i){var h=this.i,y;for(y in h.g){for(var _=h.g[y],S=0;S<_.length;S++)rt(_[S]);delete h.g[y],h.h--}}this.F=null},St.prototype.K=function(h,y,_,S){return this.i.add(String(h),y,!1,_,S)},St.prototype.L=function(h,y,_,S){return this.i.add(String(h),y,!0,_,S)};function Fr(h,y,_,S){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();for(var q=!0,Q=0;Q<y.length;++Q){var ue=y[Q];if(ue&&!ue.da&&ue.capture==_){var Xe=ue.listener,Nt=ue.ha||ue.src;ue.fa&&Mr(h.i,ue),q=Xe.call(Nt,S)!==!1&&q}}return q&&!S.defaultPrevented}function La(h,y,_){if(typeof h=="function")_&&(h=E(h,_));else if(h&&typeof h.handleEvent=="function")h=E(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:d.setTimeout(h,y||0)}function ws(h){h.g=La(()=>{h.g=null,h.i&&(h.i=!1,ws(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class pi extends X{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:ws(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mi(h){X.call(this),this.h=h,this.g={}}L(mi,X);var Oa=[];function Ma(h){ae(h.g,function(y,_){this.g.hasOwnProperty(_)&&Hn(y)},h),h.g={}}mi.prototype.N=function(){mi.aa.N.call(this),Ma(this)},mi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ua=d.JSON.stringify,Fa=d.JSON.parse,Ba=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function gi(){}gi.prototype.h=null;function go(h){return h.h||(h.h=h.i())}function yo(){}var An={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function gr(){fe.call(this,"d")}L(gr,fe);function vo(){fe.call(this,"c")}L(vo,fe);var yr={},za=null;function yi(){return za=za||new St}yr.La="serverreachability";function $a(h){fe.call(this,yr.La,h)}L($a,fe);function Br(h){const y=yi();It(y,new $a(y))}yr.STAT_EVENT="statevent";function qa(h,y){fe.call(this,yr.STAT_EVENT,h),this.stat=y}L(qa,fe);function mt(h){const y=yi();It(y,new qa(y,h))}yr.Ma="timingevent";function xo(h,y){fe.call(this,yr.Ma,h),this.size=y}L(xo,fe);function Wn(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},y)}function vi(){this.g=!0}vi.prototype.xa=function(){this.g=!1};function xi(h,y,_,S,q,Q){h.info(function(){if(h.g)if(Q)for(var ue="",Xe=Q.split("&"),Nt=0;Nt<Xe.length;Nt++){var $e=Xe[Nt].split("=");if(1<$e.length){var jt=$e[0];$e=$e[1];var wt=jt.split("_");ue=2<=wt.length&&wt[1]=="type"?ue+(jt+"="+$e+"&"):ue+(jt+"=redacted&")}}else ue=null;else ue=Q;return"XMLHTTP REQ ("+S+") [attempt "+q+"]: "+y+`
`+_+`
`+ue})}function wo(h,y,_,S,q,Q,ue){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+q+"]: "+y+`
`+_+`
`+Q+" "+ue})}function Kn(h,y,_,S){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+cd(h,_)+(S?" "+S:"")})}function Ga(h,y){h.info(function(){return"TIMEOUT: "+y})}vi.prototype.info=function(){};function cd(h,y){if(!h.g)return y;if(!y)return null;try{var _=JSON.parse(y);if(_){for(h=0;h<_.length;h++)if(Array.isArray(_[h])){var S=_[h];if(!(2>S.length)){var q=S[1];if(Array.isArray(q)&&!(1>q.length)){var Q=q[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var ue=1;ue<q.length;ue++)q[ue]=""}}}}return Ua(_)}catch{return y}}var _o={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ic={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Qn;function wi(){}L(wi,gi),wi.prototype.g=function(){return new XMLHttpRequest},wi.prototype.i=function(){return{}},Qn=new wi;function Yn(h,y,_,S){this.j=h,this.i=y,this.l=_,this.R=S||1,this.U=new mi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Nc}function Nc(){this.i=null,this.g="",this.h=!1}var Ha={},Eo={};function To(h,y,_){h.L=1,h.v=Ss(xn(y)),h.m=_,h.P=!0,Wa(h,null)}function Wa(h,y){h.F=Date.now(),et(h),h.A=xn(h.v);var _=h.A,S=h.R;Array.isArray(S)||(S=[String(S)]),Ns(_.i,"t",S),h.C=0,_=h.j.J,h.h=new Nc,h.g=Gc(h.j,_?y:null,!h.m),0<h.O&&(h.M=new pi(E(h.Y,h,h.g),h.O)),y=h.U,_=h.g,S=h.ca;var q="readystatechange";Array.isArray(q)||(q&&(Oa[0]=q.toString()),q=Oa);for(var Q=0;Q<q.length;Q++){var ue=Y(_,q[Q],S||y.handleEvent,!1,y.h||y);if(!ue)break;y.g[ue.key]=ue}y=h.H?I(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),Br(),xi(h.i,h.u,h.A,h.l,h.R,h.m)}Yn.prototype.ca=function(h){h=h.target;const y=this.M;y&&ln(h)==3?y.j():this.Y(h)},Yn.prototype.Y=function(h){try{if(h==this.g)e:{const wt=ln(this.g);var y=this.g.Ba();const jn=this.g.Z();if(!(3>wt)&&(wt!=3||this.g&&(this.h.h||this.g.oa()||Za(this.g)))){this.J||wt!=4||y==7||(y==8||0>=jn?Br(3):Br(2)),_i(this);var _=this.g.Z();this.X=_;t:if(kc(this)){var S=Za(this.g);h="";var q=S.length,Q=ln(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Cn(this),_s(this);var ue="";break t}this.h.i=new d.TextDecoder}for(y=0;y<q;y++)this.h.h=!0,h+=this.h.i.decode(S[y],{stream:!(Q&&y==q-1)});S.length=0,this.h.g+=h,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=_==200,wo(this.i,this.u,this.A,this.l,this.R,wt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Xe,Nt=this.g;if((Xe=Nt.g?Nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(Xe)){var $e=Xe;break t}}$e=null}if(_=$e)Kn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ka(this,_);else{this.o=!1,this.s=3,mt(12),Cn(this),_s(this);break e}}if(this.P){_=!0;let _n;for(;!this.J&&this.C<ue.length;)if(_n=ud(this,ue),_n==Eo){wt==4&&(this.s=4,mt(14),_=!1),Kn(this.i,this.l,null,"[Incomplete Response]");break}else if(_n==Ha){this.s=4,mt(15),Kn(this.i,this.l,ue,"[Invalid Chunk]"),_=!1;break}else Kn(this.i,this.l,_n,null),Ka(this,_n);if(kc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||ue.length!=0||this.h.h||(this.s=1,mt(16),_=!1),this.o=this.o&&_,!_)Kn(this.i,this.l,ue,"[Invalid Chunked Response]"),Cn(this),_s(this);else if(0<ue.length&&!this.W){this.W=!0;var jt=this.j;jt.g==this&&jt.ba&&!jt.M&&(jt.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),tl(jt),jt.M=!0,mt(11))}}else Kn(this.i,this.l,ue,null),Ka(this,ue);wt==4&&Cn(this),this.o&&!this.J&&(wt==4?Do(this.j,this):(this.o=!1,et(this)))}else Po(this.g),_==400&&0<ue.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),Cn(this),_s(this)}}}catch{}finally{}};function kc(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function ud(h,y){var _=h.C,S=y.indexOf(`
`,_);return S==-1?Eo:(_=Number(y.substring(_,S)),isNaN(_)?Ha:(S+=1,S+_>y.length?Eo:(y=y.slice(S,S+_),h.C=S+_,y)))}Yn.prototype.cancel=function(){this.J=!0,Cn(this)};function et(h){h.S=Date.now()+h.I,Pc(h,h.I)}function Pc(h,y){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Wn(E(h.ba,h),y)}function _i(h){h.B&&(d.clearTimeout(h.B),h.B=null)}Yn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Ga(this.i,this.A),this.L!=2&&(Br(),mt(17)),Cn(this),this.s=2,_s(this)):Pc(this,this.S-h)};function _s(h){h.j.G==0||h.J||Do(h.j,h)}function Cn(h){_i(h);var y=h.M;y&&typeof y.ma=="function"&&y.ma(),h.M=null,Ma(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function Ka(h,y){try{var _=h.j;if(_.G!=0&&(_.g==h||tn(_.h,h))){if(!h.K&&tn(_.h,h)&&_.G==3){try{var S=_.Da.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var q=S;if(q[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<h.F)jo(_),tr(_);else break e;Ro(_),mt(18)}}else _.za=q[1],0<_.za-_.T&&37500>q[2]&&_.F&&_.v==0&&!_.C&&(_.C=Wn(E(_.Za,_),6e3));if(1>=Cc(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Hr(_,11)}else if((h.K||_.g==h)&&jo(_),!M(y))for(q=_.Da.g.parse(y),y=0;y<q.length;y++){let $e=q[y];if(_.T=$e[0],$e=$e[1],_.G==2)if($e[0]=="c"){_.K=$e[1],_.ia=$e[2];const jt=$e[3];jt!=null&&(_.la=jt,_.j.info("VER="+_.la));const wt=$e[4];wt!=null&&(_.Aa=wt,_.j.info("SVER="+_.Aa));const jn=$e[5];jn!=null&&typeof jn=="number"&&0<jn&&(S=1.5*jn,_.L=S,_.j.info("backChannelRequestTimeoutMs_="+S)),S=_;const _n=h.g;if(_n){const ki=_n.g?_n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ki){var Q=S.h;Q.g||ki.indexOf("spdy")==-1&&ki.indexOf("quic")==-1&&ki.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Qa(Q,Q.h),Q.h=null))}if(S.D){const Lo=_n.g?_n.g.getResponseHeader("X-HTTP-Session-Id"):null;Lo&&(S.ya=Lo,Ze(S.I,S.D,Lo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-h.F,_.j.info("Handshake RTT: "+_.R+"ms")),S=_;var ue=h;if(S.qa=qc(S,S.J?S.ia:null,S.W),ue.K){Rc(S.h,ue);var Xe=ue,Nt=S.L;Nt&&(Xe.I=Nt),Xe.B&&(_i(Xe),et(Xe)),S.g=ue}else Ni(S);0<_.i.length&&_r(_)}else $e[0]!="stop"&&$e[0]!="close"||Hr(_,7);else _.G==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?Hr(_,7):Ut(_):$e[0]!="noop"&&_.l&&_.l.ta($e),_.v=0)}}Br(4)}catch{}}var Ac=class{constructor(h,y){this.g=h,this.map=y}};function Ei(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function vn(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Cc(h){return h.h?1:h.g?h.g.size:0}function tn(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Qa(h,y){h.g?h.g.add(y):h.h=y}function Rc(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Ei.prototype.cancel=function(){if(this.i=jc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function jc(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const _ of h.g.values())y=y.concat(_.D);return y}return V(h.i)}function bo(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(p(h)){for(var y=[],_=h.length,S=0;S<_;S++)y.push(h[S]);return y}y=[],_=0;for(S in h)y[_++]=h[S];return y}function So(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(p(h)||typeof h=="string"){var y=[];h=h.length;for(var _=0;_<h;_++)y.push(_);return y}y=[],_=0;for(const S in h)y[_++]=S;return y}}}function Es(h,y){if(h.forEach&&typeof h.forEach=="function")h.forEach(y,void 0);else if(p(h)||typeof h=="string")Array.prototype.forEach.call(h,y,void 0);else for(var _=So(h),S=bo(h),q=S.length,Q=0;Q<q;Q++)y.call(void 0,S[Q],_&&_[Q],h)}var Ti=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hd(h,y){if(h){h=h.split("&");for(var _=0;_<h.length;_++){var S=h[_].indexOf("="),q=null;if(0<=S){var Q=h[_].substring(0,S);q=h[_].substring(S+1)}else Q=h[_];y(Q,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function zr(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof zr){this.h=h.h,bi(this,h.j),this.o=h.o,this.g=h.g,Ts(this,h.s),this.l=h.l;var y=h.i,_=new vr;_.i=y.i,y.g&&(_.g=new Map(y.g),_.h=y.h),bs(this,_),this.m=h.m}else h&&(y=String(h).match(Ti))?(this.h=!1,bi(this,y[1]||"",!0),this.o=Be(y[2]||""),this.g=Be(y[3]||"",!0),Ts(this,y[4]),this.l=Be(y[5]||"",!0),bs(this,y[6]||"",!0),this.m=Be(y[7]||"")):(this.h=!1,this.i=new vr(null,this.h))}zr.prototype.toString=function(){var h=[],y=this.j;y&&h.push(Is(y,Io,!0),":");var _=this.g;return(_||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Is(y,Io,!0),"@"),h.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&h.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&h.push("/"),h.push(Is(_,_.charAt(0)=="/"?Lc:Vc,!0))),(_=this.i.toString())&&h.push("?",_),(_=this.m)&&h.push("#",Is(_,Ya)),h.join("")};function xn(h){return new zr(h)}function bi(h,y,_){h.j=_?Be(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Ts(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function bs(h,y,_){y instanceof vr?(h.i=y,xr(h.i,h.h)):(_||(y=Is(y,Oc)),h.i=new vr(y,h.h))}function Ze(h,y,_){h.i.set(y,_)}function Ss(h){return Ze(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Be(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Is(h,y,_){return typeof h=="string"?(h=encodeURI(h).replace(y,Dc),_&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Dc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Io=/[#\/\?@]/g,Vc=/[#\?:]/g,Lc=/[#\?]/g,Oc=/[#\?@]/g,Ya=/#/g;function vr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Mt(h){h.g||(h.g=new Map,h.h=0,h.i&&hd(h.i,function(y,_){h.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}n=vr.prototype,n.add=function(h,y){Mt(this),this.i=null,h=Rn(this,h);var _=this.g.get(h);return _||this.g.set(h,_=[]),_.push(y),this.h+=1,this};function Xn(h,y){Mt(h),y=Rn(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Jn(h,y){return Mt(h),y=Rn(h,y),h.g.has(y)}n.forEach=function(h,y){Mt(this),this.g.forEach(function(_,S){_.forEach(function(q){h.call(y,q,S,this)},this)},this)},n.na=function(){Mt(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),_=[];for(let S=0;S<y.length;S++){const q=h[S];for(let Q=0;Q<q.length;Q++)_.push(y[S])}return _},n.V=function(h){Mt(this);let y=[];if(typeof h=="string")Jn(this,h)&&(y=y.concat(this.g.get(Rn(this,h))));else{h=Array.from(this.g.values());for(let _=0;_<h.length;_++)y=y.concat(h[_])}return y},n.set=function(h,y){return Mt(this),this.i=null,h=Rn(this,h),Jn(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},n.get=function(h,y){return h?(h=this.V(h),0<h.length?String(h[0]):y):y};function Ns(h,y,_){Xn(h,y),0<_.length&&(h.i=null,h.g.set(Rn(h,y),V(_)),h.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var _=0;_<y.length;_++){var S=y[_];const Q=encodeURIComponent(String(S)),ue=this.V(S);for(S=0;S<ue.length;S++){var q=Q;ue[S]!==""&&(q+="="+encodeURIComponent(String(ue[S]))),h.push(q)}}return this.i=h.join("&")};function Rn(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function xr(h,y){y&&!h.j&&(Mt(h),h.i=null,h.g.forEach(function(_,S){var q=S.toLowerCase();S!=q&&(Xn(this,S),Ns(this,q,_))},h)),h.j=y}function dd(h,y){const _=new vi;if(d.Image){const S=new Image;S.onload=b(an,_,"TestLoadImage: loaded",!0,y,S),S.onerror=b(an,_,"TestLoadImage: error",!1,y,S),S.onabort=b(an,_,"TestLoadImage: abort",!1,y,S),S.ontimeout=b(an,_,"TestLoadImage: timeout",!1,y,S),d.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else y(!1)}function Mc(h,y){const _=new vi,S=new AbortController,q=setTimeout(()=>{S.abort(),an(_,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:S.signal}).then(Q=>{clearTimeout(q),Q.ok?an(_,"TestPingServer: ok",!0,y):an(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(q),an(_,"TestPingServer: error",!1,y)})}function an(h,y,_,S,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),S(_)}catch{}}function fd(){this.g=new Ba}function Uc(h,y,_){const S=_||"";try{Es(h,function(q,Q){let ue=q;m(q)&&(ue=Ua(q)),y.push(S+Q+"="+encodeURIComponent(ue))})}catch(q){throw y.push(S+"type="+encodeURIComponent("_badmap")),q}}function $r(h){this.l=h.Ub||null,this.j=h.eb||!1}L($r,gi),$r.prototype.g=function(){return new Si(this.l,this.j)},$r.prototype.i=function(h){return function(){return h}}({});function Si(h,y){St.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}L(Si,St),n=Si.prototype,n.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,er(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||d).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Zn(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,er(this)),this.g&&(this.readyState=3,er(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fc(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Fc(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Zn(this):er(this),this.readyState==3&&Fc(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Zn(this))},n.Qa=function(h){this.g&&(this.response=h,Zn(this))},n.ga=function(){this.g&&Zn(this)};function Zn(h){h.readyState=4,h.l=null,h.j=null,h.v=null,er(h)}n.setRequestHeader=function(h,y){this.u.append(h,y)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,h.push(_[0]+": "+_[1]),_=y.next();return h.join(`\r
`)};function er(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Si.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function qr(h){let y="";return ae(h,function(_,S){y+=S,y+=":",y+=_,y+=`\r
`}),y}function ks(h,y,_){e:{for(S in _){var S=!1;break e}S=!0}S||(_=qr(_),typeof h=="string"?_!=null&&encodeURIComponent(String(_)):Ze(h,y,_))}function at(h){St.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}L(at,St);var pd=/^https?$/i,Xa=["POST","PUT"];n=at.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,y,_,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Qn.g(),this.v=this.o?go(this.o):go(Qn),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Q){Ii(this,Q);return}if(h=_||"",_=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var q in S)_.set(q,S[q]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Q of S.keys())_.set(Q,S.get(Q));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(_.keys()).find(Q=>Q.toLowerCase()=="content-type"),q=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Xa,y,void 0))||S||q||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ue]of _)this.g.setRequestHeader(Q,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ko(this),this.u=!0,this.g.send(h),this.u=!1}catch(Q){Ii(this,Q)}};function Ii(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,No(h),wn(h)}function No(h){h.A||(h.A=!0,It(h,"complete"),It(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,It(this,"complete"),It(this,"abort"),wn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wn(this,!0)),at.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ja(this):this.bb())},n.bb=function(){Ja(this)};function Ja(h){if(h.h&&typeof c<"u"&&(!h.v[1]||ln(h)!=4||h.Z()!=2)){if(h.u&&ln(h)==4)La(h.Ea,0,h);else if(It(h,"readystatechange"),ln(h)==4){h.h=!1;try{const ue=h.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var S;if(S=ue===0){var q=String(h.D).match(Ti)[1]||null;!q&&d.self&&d.self.location&&(q=d.self.location.protocol.slice(0,-1)),S=!pd.test(q?q.toLowerCase():"")}_=S}if(_)It(h,"complete"),It(h,"success");else{h.m=6;try{var Q=2<ln(h)?h.g.statusText:""}catch{Q=""}h.l=Q+" ["+h.Z()+"]",No(h)}}finally{wn(h)}}}}function wn(h,y){if(h.g){ko(h);const _=h.g,S=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||It(h,"ready");try{_.onreadystatechange=S}catch{}}}function ko(h){h.I&&(d.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function ln(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<ln(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Fa(y)}};function Za(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Po(h){const y={};h=(h.g&&2<=ln(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(M(h[S]))continue;var _=B(h[S]);const q=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const Q=y[q]||[];y[q]=Q,Q.push(_)}R(y,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function wr(h,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[h]||y}function el(h){this.Aa=0,this.i=[],this.j=new vi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=wr("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=wr("baseRetryDelayMs",5e3,h),this.cb=wr("retryDelaySeedMs",1e4,h),this.Wa=wr("forwardChannelMaxRetries",2,h),this.wa=wr("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Ei(h&&h.concurrentRequestLimit),this.Da=new fd,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=el.prototype,n.la=8,n.G=1,n.connect=function(h,y,_,S){mt(0),this.W=h,this.H=y||{},_&&S!==void 0&&(this.H.OSID=_,this.H.OAID=S),this.F=this.X,this.I=qc(this,null,this.W),_r(this)};function Ut(h){if(Ao(h),h.G==3){var y=h.U++,_=xn(h.I);if(Ze(_,"SID",h.K),Ze(_,"RID",y),Ze(_,"TYPE","terminate"),Gr(h,_),y=new Yn(h,h.j,y),y.L=2,y.v=Ss(xn(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(y.v.toString(),"")}catch{}!_&&d.Image&&(new Image().src=y.v,_=!0),_||(y.g=Gc(y.j,null),y.g.ea(y.v)),y.F=Date.now(),et(y)}$c(h)}function tr(h){h.g&&(tl(h),h.g.cancel(),h.g=null)}function Ao(h){tr(h),h.u&&(d.clearTimeout(h.u),h.u=null),jo(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function _r(h){if(!vn(h.h)&&!h.s){h.s=!0;var y=h.Ga;Te||Z(),le||(Te(),le=!0),J.add(y,h),h.B=0}}function md(h,y){return Cc(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=y.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Wn(E(h.Ga,h,y),zc(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const q=new Yn(this,this.j,h);let Q=this.o;if(this.S&&(Q?(Q=I(Q),U(Q,this.S)):Q=this.S),this.m!==null||this.O||(q.H=Q,Q=null),this.P)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var S=this.i[_];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,4096<y){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=Ps(this,q,y),_=xn(this.I),Ze(_,"RID",h),Ze(_,"CVER",22),this.D&&Ze(_,"X-HTTP-Session-Id",this.D),Gr(this,_),Q&&(this.O?y="headers="+encodeURIComponent(String(qr(Q)))+"&"+y:this.m&&ks(_,this.m,Q)),Qa(this.h,q),this.Ua&&Ze(_,"TYPE","init"),this.P?(Ze(_,"$req",y),Ze(_,"SID","null"),q.T=!0,To(q,_,null)):To(q,_,y),this.G=2}}else this.G==3&&(h?Co(this,h):this.i.length==0||vn(this.h)||Co(this))};function Co(h,y){var _;y?_=y.l:_=h.U++;const S=xn(h.I);Ze(S,"SID",h.K),Ze(S,"RID",_),Ze(S,"AID",h.T),Gr(h,S),h.m&&h.o&&ks(S,h.m,h.o),_=new Yn(h,h.j,_,h.B+1),h.m===null&&(_.H=h.o),y&&(h.i=y.D.concat(h.i)),y=Ps(h,_,1e3),_.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Qa(h.h,_),To(_,S,y)}function Gr(h,y){h.H&&ae(h.H,function(_,S){Ze(y,S,_)}),h.l&&Es({},function(_,S){Ze(y,S,_)})}function Ps(h,y,_){_=Math.min(h.i.length,_);var S=h.l?E(h.l.Na,h.l,h):null;e:{var q=h.i;let Q=-1;for(;;){const ue=["count="+_];Q==-1?0<_?(Q=q[0].g,ue.push("ofs="+Q)):Q=0:ue.push("ofs="+Q);let Xe=!0;for(let Nt=0;Nt<_;Nt++){let $e=q[Nt].g;const jt=q[Nt].map;if($e-=Q,0>$e)Q=Math.max(0,q[Nt].g-100),Xe=!1;else try{Uc(jt,ue,"req"+$e+"_")}catch{S&&S(jt)}}if(Xe){S=ue.join("&");break e}}}return h=h.i.splice(0,_),y.D=h,S}function Ni(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;Te||Z(),le||(Te(),le=!0),J.add(y,h),h.v=0}}function Ro(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Wn(E(h.Fa,h),zc(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,Bc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Wn(E(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),tr(this),Bc(this))};function tl(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Bc(h){h.g=new Yn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var y=xn(h.qa);Ze(y,"RID","rpc"),Ze(y,"SID",h.K),Ze(y,"AID",h.T),Ze(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&Ze(y,"TO",h.ja),Ze(y,"TYPE","xmlhttp"),Gr(h,y),h.m&&h.o&&ks(y,h.m,h.o),h.L&&(h.g.I=h.L);var _=h.g;h=h.ia,_.L=1,_.v=Ss(xn(y)),_.m=null,_.P=!0,Wa(_,h)}n.Za=function(){this.C!=null&&(this.C=null,tr(this),Ro(this),mt(19))};function jo(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Do(h,y){var _=null;if(h.g==y){jo(h),tl(h),h.g=null;var S=2}else if(tn(h.h,y))_=y.D,Rc(h.h,y),S=1;else return;if(h.G!=0){if(y.o)if(S==1){_=y.m?y.m.length:0,y=Date.now()-y.F;var q=h.B;S=yi(),It(S,new xo(S,_)),_r(h)}else Ni(h);else if(q=y.s,q==3||q==0&&0<y.X||!(S==1&&md(h,y)||S==2&&Ro(h)))switch(_&&0<_.length&&(y=h.h,y.i=y.i.concat(_)),q){case 1:Hr(h,5);break;case 4:Hr(h,10);break;case 3:Hr(h,6);break;default:Hr(h,2)}}}function zc(h,y){let _=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(_*=2),_*y}function Hr(h,y){if(h.j.info("Error code "+y),y==2){var _=E(h.fb,h),S=h.Xa;const q=!S;S=new zr(S||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||bi(S,"https"),Ss(S),q?dd(S.toString(),_):Mc(S.toString(),_)}else mt(2);h.G=0,h.l&&h.l.sa(y),$c(h),Ao(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function $c(h){if(h.G=0,h.ka=[],h.l){const y=jc(h.h);(y.length!=0||h.i.length!=0)&&(k(h.ka,y),k(h.ka,h.i),h.h.i.length=0,V(h.i),h.i.length=0),h.l.ra()}}function qc(h,y,_){var S=_ instanceof zr?xn(_):new zr(_);if(S.g!="")y&&(S.g=y+"."+S.g),Ts(S,S.s);else{var q=d.location;S=q.protocol,y=y?y+"."+q.hostname:q.hostname,q=+q.port;var Q=new zr(null);S&&bi(Q,S),y&&(Q.g=y),q&&Ts(Q,q),_&&(Q.l=_),S=Q}return _=h.D,y=h.ya,_&&y&&Ze(S,_,y),Ze(S,"VER",h.la),Gr(h,S),S}function Gc(h,y,_){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Ca&&!h.pa?new at(new $r({eb:_})):new at(h.pa),y.Ha(h.J),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function nl(){}n=nl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Vo(){}Vo.prototype.g=function(h,y){return new nn(h,y)};function nn(h,y){St.call(this),this.g=new el(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!M(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!M(y)&&(this.g.D=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Er(this)}L(nn,St),nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){Ut(this.g)},nn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var _={};_.__data__=h,h=_}else this.u&&(_={},_.__data__=Ua(h),h=_);y.i.push(new Ac(y.Ya++,h)),y.G==3&&_r(y)},nn.prototype.N=function(){this.g.l=null,delete this.j,Ut(this.g),delete this.g,nn.aa.N.call(this)};function Hc(h){gr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const _ in y){h=_;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}L(Hc,gr);function Wc(){vo.call(this),this.status=1}L(Wc,vo);function Er(h){this.g=h}L(Er,nl),Er.prototype.ua=function(){It(this.g,"a")},Er.prototype.ta=function(h){It(this.g,new Hc(h))},Er.prototype.sa=function(h){It(this.g,new Wc)},Er.prototype.ra=function(){It(this.g,"b")},Vo.prototype.createWebChannel=Vo.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,K_=function(){return new Vo},W_=function(){return yi()},H_=yr,Pp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_o.NO_ERROR=0,_o.TIMEOUT=8,_o.HTTP_ERROR=6,th=_o,Ic.COMPLETE="complete",G_=Ic,yo.EventType=An,An.OPEN="a",An.CLOSE="b",An.ERROR="c",An.MESSAGE="d",St.prototype.listen=St.prototype.K,jl=yo,at.prototype.listenOnce=at.prototype.L,at.prototype.getLastError=at.prototype.Ka,at.prototype.getLastErrorCode=at.prototype.Ba,at.prototype.getStatus=at.prototype.Z,at.prototype.getResponseJson=at.prototype.Oa,at.prototype.getResponseText=at.prototype.oa,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Ha,q_=at}).apply(typeof zu<"u"?zu:typeof self<"u"?self:typeof window<"u"?window:{});const Rv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Jt.UNAUTHENTICATED=new Jt(null),Jt.GOOGLE_CREDENTIALS=new Jt("google-credentials-uid"),Jt.FIRST_PARTY=new Jt("first-party-uid"),Jt.MOCK_USER=new Jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Aa="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo=new Uh("@firebase/firestore");function Nl(){return eo.logLevel}function ye(n,...e){if(eo.logLevel<=ze.DEBUG){const t=e.map(Tm);eo.debug(`Firestore (${Aa}): ${n}`,...t)}}function fs(n,...e){if(eo.logLevel<=ze.ERROR){const t=e.map(Tm);eo.error(`Firestore (${Aa}): ${n}`,...t)}}function va(n,...e){if(eo.logLevel<=ze.WARN){const t=e.map(Tm);eo.warn(`Firestore (${Aa}): ${n}`,...t)}}function Tm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(n="Unexpected state"){const e=`FIRESTORE (${Aa}) INTERNAL ASSERTION FAILED: `+n;throw fs(e),new Error(e)}function Je(n,e){n||Ae()}function je(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends pr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Jt.UNAUTHENTICATED))}shutdown(){}}class yA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class vA{constructor(e){this.t=e,this.currentUser=Jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Je(this.o===void 0);let r=this.i;const o=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let a=new ri;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ri,e.enqueueRetryable(()=>o(this.currentUser))};const c=()=>{const p=a;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},d=p=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(p=>d(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ri)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Je(typeof r.accessToken=="string"),new Q_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Je(e===null||typeof e=="string"),new Jt(e)}}class xA{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Jt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class wA{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new xA(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _A{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class EA{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Je(this.o===void 0);const r=a=>{a.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.R;return this.R=a.token,ye("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const o=a=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>o(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?o(a):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Je(typeof t.token=="string"),this.R=t.token,new _A(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=TA(40);for(let a=0;a<o.length;++a)r.length<20&&o[a]<t&&(r+=e.charAt(o[a]%e.length))}return r}}function Ye(n,e){return n<e?-1:n>e?1:0}function xa(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new be(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new be(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new be(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ct.fromMillis(Date.now())}static fromDate(e){return Ct.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Ct(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ye(this.nanoseconds,e.nanoseconds):Ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new Ct(0,0))}static max(){return new Ce(new Ct(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ae(),r===void 0?r=e.length-t:r>e.length-t&&Ae(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Jl.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Jl?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const a=e.get(o),c=t.get(o);if(a<c)return-1;if(a>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class pt extends Jl{construct(e,t,r){return new pt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new be(ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new pt(t)}static emptyPath(){return new pt([])}}const bA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $t extends Jl{construct(e,t,r){return new $t(e,t,r)}static isValidIdentifier(e){return bA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new $t(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const a=()=>{if(r.length===0)throw new be(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new be(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new be(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,o+=2}else d==="`"?(c=!c,o++):d!=="."||c?(r+=d,o++):(a(),o++)}if(a(),c)throw new be(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $t(t)}static emptyPath(){return new $t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(pt.fromString(e))}static fromName(e){return new Se(pt.fromString(e).popFirst(5))}static empty(){return new Se(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return pt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new pt(e.slice()))}}function SA(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Ce.fromTimestamp(r===1e9?new Ct(t+1,0):new Ct(t,r));return new oi(o,Se.empty(),e)}function IA(n){return new oi(n.readTime,n.key,-1)}class oi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new oi(Ce.min(),Se.empty(),-1)}static max(){return new oi(Ce.max(),Se.empty(),-1)}}function NA(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Se.comparator(n.documentKey,e.documentKey),t!==0?t:Ye(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gc(n){if(n.code!==ie.FAILED_PRECONDITION||n.message!==kA)throw n;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re((r,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):re.reject(t)}static resolve(e){return new re((t,r)=>{t(e)})}static reject(e){return new re((t,r)=>{r(e)})}static waitFor(e){return new re((t,r)=>{let o=0,a=0,c=!1;e.forEach(d=>{++o,d.next(()=>{++a,c&&a===o&&t()},p=>r(p))}),c=!0,a===o&&t()})}static or(e){let t=re.resolve(!1);for(const r of e)t=t.next(o=>o?re.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,a)=>{r.push(t.call(this,o,a))}),this.waitFor(r)}static mapArray(e,t){return new re((r,o)=>{const a=e.length,c=new Array(a);let d=0;for(let p=0;p<a;p++){const m=p;t(e[m]).next(v=>{c[m]=v,++d,d===a&&r(c)},v=>o(v))}})}static doWhile(e,t){return new re((r,o)=>{const a=()=>{e()===!0?t().next(()=>{a()},o):r()};a()})}}function AA(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function yc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}bm.oe=-1;function $h(n){return n==null}function gh(n){return n===0&&1/n==-1/0}function CA(n){return typeof n=="number"&&Number.isInteger(n)&&!gh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ca(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function X_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,t){this.comparator=e,this.root=t||zt.EMPTY}insert(e,t){return new dt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,zt.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $u(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $u(this.root,e,this.comparator,!1)}getReverseIterator(){return new $u(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $u(this.root,e,this.comparator,!0)}}class $u{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zt{constructor(e,t,r,o,a){this.key=e,this.value=t,this.color=r??zt.RED,this.left=o??zt.EMPTY,this.right=a??zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,a){return new zt(e??this.key,t??this.value,r??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const a=r(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,r),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return zt.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ae();const e=this.left.check();if(e!==this.right.check())throw Ae();return e+(this.isRed()?0:1)}}zt.EMPTY=null,zt.RED=!0,zt.BLACK=!1;zt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae()}get value(){throw Ae()}get color(){throw Ae()}get left(){throw Ae()}get right(){throw Ae()}copy(e,t,r,o,a){return this}insert(e,t,r){return new zt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Dv(this.data.getIterator())}getIteratorFrom(e){return new Dv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof qt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=r.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new qt(this.comparator);return t.data=e,t}}class Dv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this.fields=e,e.sort($t.comparator)}static empty(){return new cr([])}unionWith(e){let t=new qt($t.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new cr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return xa(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new J_("Invalid base64 string: "+a):a}}(e);return new Gt(t)}static fromUint8Array(e){const t=function(o){let a="";for(let c=0;c<o.length;++c)a+=String.fromCharCode(o[c]);return a}(e);return new Gt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gt.EMPTY_BYTE_STRING=new Gt("");const RA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ai(n){if(Je(!!n),typeof n=="string"){let e=0;const t=RA.exec(n);if(Je(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yt(n.seconds),nanos:yt(n.nanos)}}function yt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function to(n){return typeof n=="string"?Gt.fromBase64String(n):Gt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Im(n){const e=n.mapValue.fields.__previous_value__;return Sm(e)?Im(e):e}function Zl(n){const e=ai(n.mapValue.fields.__local_write_time__.timestampValue);return new Ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,t,r,o,a,c,d,p,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=m}}class ec{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ec("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ec&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qu={mapValue:{}};function no(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Sm(n)?4:VA(n)?9007199254740991:DA(n)?10:11:Ae()}function Vr(n,e){if(n===e)return!0;const t=no(n);if(t!==no(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Zl(n).isEqual(Zl(e));case 3:return function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const c=ai(o.timestampValue),d=ai(a.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(o,a){return to(o.bytesValue).isEqual(to(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(o,a){return yt(o.geoPointValue.latitude)===yt(a.geoPointValue.latitude)&&yt(o.geoPointValue.longitude)===yt(a.geoPointValue.longitude)}(n,e);case 2:return function(o,a){if("integerValue"in o&&"integerValue"in a)return yt(o.integerValue)===yt(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const c=yt(o.doubleValue),d=yt(a.doubleValue);return c===d?gh(c)===gh(d):isNaN(c)&&isNaN(d)}return!1}(n,e);case 9:return xa(n.arrayValue.values||[],e.arrayValue.values||[],Vr);case 10:case 11:return function(o,a){const c=o.mapValue.fields||{},d=a.mapValue.fields||{};if(jv(c)!==jv(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!Vr(c[p],d[p])))return!1;return!0}(n,e);default:return Ae()}}function tc(n,e){return(n.values||[]).find(t=>Vr(t,e))!==void 0}function wa(n,e){if(n===e)return 0;const t=no(n),r=no(e);if(t!==r)return Ye(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ye(n.booleanValue,e.booleanValue);case 2:return function(a,c){const d=yt(a.integerValue||a.doubleValue),p=yt(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(n,e);case 3:return Vv(n.timestampValue,e.timestampValue);case 4:return Vv(Zl(n),Zl(e));case 5:return Ye(n.stringValue,e.stringValue);case 6:return function(a,c){const d=to(a),p=to(c);return d.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(a,c){const d=a.split("/"),p=c.split("/");for(let m=0;m<d.length&&m<p.length;m++){const v=Ye(d[m],p[m]);if(v!==0)return v}return Ye(d.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,c){const d=Ye(yt(a.latitude),yt(c.latitude));return d!==0?d:Ye(yt(a.longitude),yt(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Lv(n.arrayValue,e.arrayValue);case 10:return function(a,c){var d,p,m,v;const w=a.fields||{},E=c.fields||{},b=(d=w.value)===null||d===void 0?void 0:d.arrayValue,L=(p=E.value)===null||p===void 0?void 0:p.arrayValue,V=Ye(((m=b?.values)===null||m===void 0?void 0:m.length)||0,((v=L?.values)===null||v===void 0?void 0:v.length)||0);return V!==0?V:Lv(b,L)}(n.mapValue,e.mapValue);case 11:return function(a,c){if(a===qu.mapValue&&c===qu.mapValue)return 0;if(a===qu.mapValue)return 1;if(c===qu.mapValue)return-1;const d=a.fields||{},p=Object.keys(d),m=c.fields||{},v=Object.keys(m);p.sort(),v.sort();for(let w=0;w<p.length&&w<v.length;++w){const E=Ye(p[w],v[w]);if(E!==0)return E;const b=wa(d[p[w]],m[v[w]]);if(b!==0)return b}return Ye(p.length,v.length)}(n.mapValue,e.mapValue);default:throw Ae()}}function Vv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ye(n,e);const t=ai(n),r=ai(e),o=Ye(t.seconds,r.seconds);return o!==0?o:Ye(t.nanos,r.nanos)}function Lv(n,e){const t=n.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const a=wa(t[o],r[o]);if(a)return a}return Ye(t.length,r.length)}function _a(n){return Ap(n)}function Ap(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=ai(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return to(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Se.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",o=!0;for(const a of t.values||[])o?o=!1:r+=",",r+=Ap(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const c of r)a?a=!1:o+=",",o+=`${c}:${Ap(t.fields[c])}`;return o+"}"}(n.mapValue):Ae()}function Cp(n){return!!n&&"integerValue"in n}function Nm(n){return!!n&&"arrayValue"in n}function Ov(n){return!!n&&"nullValue"in n}function Mv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function nh(n){return!!n&&"mapValue"in n}function DA(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Ml(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ca(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ml(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ml(n.arrayValue.values[t]);return e}return Object.assign({},n)}function VA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.value=e}static empty(){return new zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!nh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ml(t)}setAll(e){let t=$t.emptyPath(),r={},o=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,r,o),r={},o=[],t=d.popLast()}c?r[d.lastSegment()]=Ml(c):o.push(d.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,o)}delete(e){const t=this.field(e.popLast());nh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];nh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Ca(t,(o,a)=>e[o]=a);for(const o of r)delete e[o]}clone(){return new zn(Ml(this.value))}}function Z_(n){const e=[];return Ca(n.fields,(t,r)=>{const o=new $t([t]);if(nh(r)){const a=Z_(r.mapValue).fields;if(a.length===0)e.push(o);else for(const c of a)e.push(o.child(c))}else e.push(o)}),new cr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,t,r,o,a,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=a,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Zt(e,0,Ce.min(),Ce.min(),Ce.min(),zn.empty(),0)}static newFoundDocument(e,t,r,o){return new Zt(e,1,t,Ce.min(),r,o,0)}static newNoDocument(e,t){return new Zt(e,2,t,Ce.min(),Ce.min(),zn.empty(),0)}static newUnknownDocument(e,t){return new Zt(e,3,t,Ce.min(),Ce.min(),zn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,t){this.position=e,this.inclusive=t}}function Uv(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const a=e[o],c=n.position[o];if(a.field.isKeyField()?r=Se.comparator(Se.fromName(c.referenceValue),t.key):r=wa(c,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Fv(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Vr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,t="asc"){this.field=e,this.dir=t}}function LA(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eE=class{};class At extends eE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new MA(e,t,r):t==="array-contains"?new BA(e,r):t==="in"?new zA(e,r):t==="not-in"?new $A(e,r):t==="array-contains-any"?new qA(e,r):new At(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new UA(e,r):new FA(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(wa(t,this.value)):t!==null&&no(this.value)===no(t)&&this.matchesComparison(wa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Lr extends eE{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Lr(e,t)}matches(e){return tE(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function tE(n){return n.op==="and"}function nE(n){return OA(n)&&tE(n)}function OA(n){for(const e of n.filters)if(e instanceof Lr)return!1;return!0}function Rp(n){if(n instanceof At)return n.field.canonicalString()+n.op.toString()+_a(n.value);if(nE(n))return n.filters.map(e=>Rp(e)).join(",");{const e=n.filters.map(t=>Rp(t)).join(",");return`${n.op}(${e})`}}function rE(n,e){return n instanceof At?function(r,o){return o instanceof At&&r.op===o.op&&r.field.isEqual(o.field)&&Vr(r.value,o.value)}(n,e):n instanceof Lr?function(r,o){return o instanceof Lr&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((a,c,d)=>a&&rE(c,o.filters[d]),!0):!1}(n,e):void Ae()}function sE(n){return n instanceof At?function(t){return`${t.field.canonicalString()} ${t.op} ${_a(t.value)}`}(n):n instanceof Lr?function(t){return t.op.toString()+" {"+t.getFilters().map(sE).join(" ,")+"}"}(n):"Filter"}class MA extends At{constructor(e,t,r){super(e,t,r),this.key=Se.fromName(r.referenceValue)}matches(e){const t=Se.comparator(e.key,this.key);return this.matchesComparison(t)}}class UA extends At{constructor(e,t){super(e,"in",t),this.keys=iE("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class FA extends At{constructor(e,t){super(e,"not-in",t),this.keys=iE("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function iE(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Se.fromName(r.referenceValue))}class BA extends At{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Nm(t)&&tc(t.arrayValue,this.value)}}class zA extends At{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&tc(this.value.arrayValue,t)}}class $A extends At{constructor(e,t){super(e,"not-in",t)}matches(e){if(tc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!tc(this.value.arrayValue,t)}}class qA extends At{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Nm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>tc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e,t=null,r=[],o=[],a=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=a,this.startAt=c,this.endAt=d,this.ue=null}}function Bv(n,e=null,t=[],r=[],o=null,a=null,c=null){return new GA(n,e,t,r,o,a,c)}function km(n){const e=je(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Rp(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),$h(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>_a(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>_a(r)).join(",")),e.ue=t}return e.ue}function Pm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!LA(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!rE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Fv(n.startAt,e.startAt)&&Fv(n.endAt,e.endAt)}function jp(n){return Se.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,t=null,r=[],o=[],a=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=a,this.limitType=c,this.startAt=d,this.endAt=p,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function HA(n,e,t,r,o,a,c,d){return new qh(n,e,t,r,o,a,c,d)}function Am(n){return new qh(n)}function zv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function WA(n){return n.collectionGroup!==null}function Ul(n){const e=je(n);if(e.ce===null){e.ce=[];const t=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new qt($t.comparator);return c.filters.forEach(p=>{p.getFlattenedFilters().forEach(m=>{m.isInequality()&&(d=d.add(m.field))})}),d})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.ce.push(new vh(a,r))}),t.has($t.keyField().canonicalString())||e.ce.push(new vh($t.keyField(),r))}return e.ce}function Cr(n){const e=je(n);return e.le||(e.le=KA(e,Ul(n))),e.le}function KA(n,e){if(n.limitType==="F")return Bv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(o=>{const a=o.dir==="desc"?"asc":"desc";return new vh(o.field,a)});const t=n.endAt?new yh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new yh(n.startAt.position,n.startAt.inclusive):null;return Bv(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Dp(n,e,t){return new qh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Gh(n,e){return Pm(Cr(n),Cr(e))&&n.limitType===e.limitType}function oE(n){return`${km(Cr(n))}|lt:${n.limitType}`}function ra(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(o=>sE(o)).join(", ")}]`),$h(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(o=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(o)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(o=>_a(o)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(o=>_a(o)).join(",")),`Target(${r})`}(Cr(n))}; limitType=${n.limitType})`}function Hh(n,e){return e.isFoundDocument()&&function(r,o){const a=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Se.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,o){for(const a of Ul(r))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0}(n,e)&&function(r,o){for(const a of r.filters)if(!a.matches(o))return!1;return!0}(n,e)&&function(r,o){return!(r.startAt&&!function(c,d,p){const m=Uv(c,d,p);return c.inclusive?m<=0:m<0}(r.startAt,Ul(r),o)||r.endAt&&!function(c,d,p){const m=Uv(c,d,p);return c.inclusive?m>=0:m>0}(r.endAt,Ul(r),o))}(n,e)}function QA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function aE(n){return(e,t)=>{let r=!1;for(const o of Ul(n)){const a=YA(o,e,t);if(a!==0)return a;r=r||o.field.isKeyField()}return 0}}function YA(n,e,t){const r=n.field.isKeyField()?Se.comparator(e.key,t.key):function(a,c,d){const p=c.data.field(a),m=d.data.field(a);return p!==null&&m!==null?wa(p,m):Ae()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,a]of r)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ca(this.inner,(t,r)=>{for(const[o,a]of r)e(o,a)})}isEmpty(){return X_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA=new dt(Se.comparator);function ps(){return XA}const lE=new dt(Se.comparator);function Dl(...n){let e=lE;for(const t of n)e=e.insert(t.key,t);return e}function cE(n){let e=lE;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Hi(){return Fl()}function uE(){return Fl()}function Fl(){return new Ra(n=>n.toString(),(n,e)=>n.isEqual(e))}const JA=new dt(Se.comparator),ZA=new qt(Se.comparator);function Me(...n){let e=ZA;for(const t of n)e=e.add(t);return e}const e2=new qt(Ye);function t2(){return e2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gh(e)?"-0":e}}function hE(n){return{integerValue:""+n}}function n2(n,e){return CA(e)?hE(e):Cm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(){this._=void 0}}function r2(n,e,t){return n instanceof xh?function(o,a){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&Sm(a)&&(a=Im(a)),a&&(c.fields.__previous_value__=a),{mapValue:c}}(t,e):n instanceof nc?fE(n,e):n instanceof rc?pE(n,e):function(o,a){const c=dE(o,a),d=$v(c)+$v(o.Pe);return Cp(c)&&Cp(o.Pe)?hE(d):Cm(o.serializer,d)}(n,e)}function s2(n,e,t){return n instanceof nc?fE(n,e):n instanceof rc?pE(n,e):t}function dE(n,e){return n instanceof wh?function(r){return Cp(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class xh extends Wh{}class nc extends Wh{constructor(e){super(),this.elements=e}}function fE(n,e){const t=mE(e);for(const r of n.elements)t.some(o=>Vr(o,r))||t.push(r);return{arrayValue:{values:t}}}class rc extends Wh{constructor(e){super(),this.elements=e}}function pE(n,e){let t=mE(e);for(const r of n.elements)t=t.filter(o=>!Vr(o,r));return{arrayValue:{values:t}}}class wh extends Wh{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function $v(n){return yt(n.integerValue||n.doubleValue)}function mE(n){return Nm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function i2(n,e){return n.field.isEqual(e.field)&&function(r,o){return r instanceof nc&&o instanceof nc||r instanceof rc&&o instanceof rc?xa(r.elements,o.elements,Vr):r instanceof wh&&o instanceof wh?Vr(r.Pe,o.Pe):r instanceof xh&&o instanceof xh}(n.transform,e.transform)}class o2{constructor(e,t){this.version=e,this.transformResults=t}}class os{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new os}static exists(e){return new os(void 0,e)}static updateTime(e){return new os(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Kh{}function gE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new vE(n.key,os.none()):new vc(n.key,n.data,os.none());{const t=n.data,r=zn.empty();let o=new qt($t.comparator);for(let a of e.fields)if(!o.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?r.delete(a):r.set(a,c),o=o.add(a)}return new co(n.key,r,new cr(o.toArray()),os.none())}}function a2(n,e,t){n instanceof vc?function(o,a,c){const d=o.value.clone(),p=Gv(o.fieldTransforms,a,c.transformResults);d.setAll(p),a.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(n,e,t):n instanceof co?function(o,a,c){if(!rh(o.precondition,a))return void a.convertToUnknownDocument(c.version);const d=Gv(o.fieldTransforms,a,c.transformResults),p=a.data;p.setAll(yE(o)),p.setAll(d),a.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(n,e,t):function(o,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function Bl(n,e,t,r){return n instanceof vc?function(a,c,d,p){if(!rh(a.precondition,c))return d;const m=a.value.clone(),v=Hv(a.fieldTransforms,p,c);return m.setAll(v),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof co?function(a,c,d,p){if(!rh(a.precondition,c))return d;const m=Hv(a.fieldTransforms,p,c),v=c.data;return v.setAll(yE(a)),v.setAll(m),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(w=>w.field))}(n,e,t,r):function(a,c,d){return rh(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(n,e,t)}function l2(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),a=dE(r.transform,o||null);a!=null&&(t===null&&(t=zn.empty()),t.set(r.field,a))}return t||null}function qv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&xa(r,o,(a,c)=>i2(a,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class vc extends Kh{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class co extends Kh{constructor(e,t,r,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function yE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Gv(n,e,t){const r=new Map;Je(n.length===t.length);for(let o=0;o<t.length;o++){const a=n[o],c=a.transform,d=e.data.field(a.field);r.set(a.field,s2(c,d,t[o]))}return r}function Hv(n,e,t){const r=new Map;for(const o of n){const a=o.transform,c=t.data.field(o.field);r.set(o.field,r2(a,c,e))}return r}class vE extends Kh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class c2 extends Kh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&a2(a,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Bl(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Bl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=uE();return this.mutations.forEach(o=>{const a=e.get(o.key),c=a.overlayedDocument;let d=this.applyToLocalView(c,a.mutatedFields);d=t.has(o.key)?null:d;const p=gE(c,d);p!==null&&r.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(Ce.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Me())}isEqual(e){return this.batchId===e.batchId&&xa(this.mutations,e.mutations,(t,r)=>qv(t,r))&&xa(this.baseMutations,e.baseMutations,(t,r)=>qv(t,r))}}class Rm{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Je(e.mutations.length===r.length);let o=function(){return JA}();const a=e.mutations;for(let c=0;c<a.length;c++)o=o.insert(a[c].key,r[c].version);return new Rm(e,t,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Et,qe;function f2(n){switch(n){default:return Ae();case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0}}function xE(n){if(n===void 0)return fs("GRPC error has no .code"),ie.UNKNOWN;switch(n){case Et.OK:return ie.OK;case Et.CANCELLED:return ie.CANCELLED;case Et.UNKNOWN:return ie.UNKNOWN;case Et.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Et.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Et.INTERNAL:return ie.INTERNAL;case Et.UNAVAILABLE:return ie.UNAVAILABLE;case Et.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Et.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Et.NOT_FOUND:return ie.NOT_FOUND;case Et.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Et.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Et.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Et.ABORTED:return ie.ABORTED;case Et.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Et.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Et.DATA_LOSS:return ie.DATA_LOSS;default:return Ae()}}(qe=Et||(Et={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2=new Qi([4294967295,4294967295],0);function Wv(n){const e=p2().encode(n),t=new $_;return t.update(e),new Uint8Array(t.digest())}function Kv(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Qi([t,r],0),new Qi([o,a],0)]}class jm{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Vl(`Invalid padding: ${t}`);if(r<0)throw new Vl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Vl(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Vl(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Qi.fromNumber(this.Ie)}Ee(e,t,r){let o=e.add(t.multiply(Qi.fromNumber(r)));return o.compare(m2)===1&&(o=new Qi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=Wv(e),[r,o]=Kv(t);for(let a=0;a<this.hashCount;a++){const c=this.Ee(r,o,a);if(!this.de(c))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new jm(a,o,t);return r.forEach(d=>c.insert(d)),c}insert(e){if(this.Ie===0)return;const t=Wv(e),[r,o]=Kv(t);for(let a=0;a<this.hashCount;a++){const c=this.Ee(r,o,a);this.Ae(c)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Vl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,t,r,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,xc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Qh(Ce.min(),o,new dt(Ye),ps(),Me())}}class xc{constructor(e,t,r,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new xc(r,t,Me(),Me(),Me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,t,r,o){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=o}}class wE{constructor(e,t){this.targetId=e,this.me=t}}class _E{constructor(e,t,r=Gt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Qv{constructor(){this.fe=0,this.ge=Xv(),this.pe=Gt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Me(),t=Me(),r=Me();return this.ge.forEach((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Ae()}}),new xc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=Xv()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Je(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class g2{constructor(e){this.Le=e,this.Be=new Map,this.ke=ps(),this.qe=Yv(),this.Qe=new dt(Ye)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Ae()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,o)=>{this.ze(o)&&t(o)})}He(e){const t=e.targetId,r=e.me.count,o=this.Je(t);if(o){const a=o.target;if(jp(a))if(r===0){const c=new Se(a.path);this.Ue(t,c,Zt.newNoDocument(c,Ce.min()))}else Je(r===1);else{const c=this.Ye(t);if(c!==r){const d=this.Ze(e),p=d?this.Xe(d,e,c):1;if(p!==0){this.je(t);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,m)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:a=0}=t;let c,d;try{c=to(r).toUint8Array()}catch(p){if(p instanceof J_)return va("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new jm(c,o,a)}catch(p){return va(p instanceof Vl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.Ie===0?null:d}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let o=0;return r.forEach(a=>{const c=this.Le.tt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Ue(t,a,null),o++)}),o}rt(e){const t=new Map;this.Be.forEach((a,c)=>{const d=this.Je(c);if(d){if(a.current&&jp(d.target)){const p=new Se(d.target.path);this.ke.get(p)!==null||this.it(c,p)||this.Ue(c,p,Zt.newNoDocument(p,e))}a.be&&(t.set(c,a.ve()),a.Ce())}});let r=Me();this.qe.forEach((a,c)=>{let d=!0;c.forEachWhile(p=>{const m=this.Je(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(a))}),this.ke.forEach((a,c)=>c.setReadTime(e));const o=new Qh(e,t,this.Qe,this.ke,r);return this.ke=ps(),this.qe=Yv(),this.Qe=new dt(Ye),o}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,t)?o.Fe(t,1):o.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Qv,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new qt(Ye),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||ye("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Qv),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Yv(){return new dt(Se.comparator)}function Xv(){return new dt(Se.comparator)}const y2={asc:"ASCENDING",desc:"DESCENDING"},v2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},x2={and:"AND",or:"OR"};class w2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Vp(n,e){return n.useProto3Json||$h(e)?e:{value:e}}function _h(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function EE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function _2(n,e){return _h(n,e.toTimestamp())}function Rr(n){return Je(!!n),Ce.fromTimestamp(function(t){const r=ai(t);return new Ct(r.seconds,r.nanos)}(n))}function Dm(n,e){return Lp(n,e).canonicalString()}function Lp(n,e){const t=function(o){return new pt(["projects",o.projectId,"databases",o.database])}(n).child("documents");return e===void 0?t:t.child(e)}function TE(n){const e=pt.fromString(n);return Je(kE(e)),e}function Op(n,e){return Dm(n.databaseId,e.path)}function Qf(n,e){const t=TE(e);if(t.get(1)!==n.databaseId.projectId)throw new be(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new be(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Se(SE(t))}function bE(n,e){return Dm(n.databaseId,e)}function E2(n){const e=TE(n);return e.length===4?pt.emptyPath():SE(e)}function Mp(n){return new pt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function SE(n){return Je(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Jv(n,e,t){return{name:Op(n,e),fields:t.value.mapValue.fields}}function T2(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=function(m,v){return m.useProto3Json?(Je(v===void 0||typeof v=="string"),Gt.fromBase64String(v||"")):(Je(v===void 0||v instanceof Buffer||v instanceof Uint8Array),Gt.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(m){const v=m.code===void 0?ie.UNKNOWN:xE(m.code);return new be(v,m.message||"")}(c);t=new _E(r,o,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Qf(n,r.document.name),a=Rr(r.document.updateTime),c=r.document.createTime?Rr(r.document.createTime):Ce.min(),d=new zn({mapValue:{fields:r.document.fields}}),p=Zt.newFoundDocument(o,a,c,d),m=r.targetIds||[],v=r.removedTargetIds||[];t=new sh(m,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Qf(n,r.document),a=r.readTime?Rr(r.readTime):Ce.min(),c=Zt.newNoDocument(o,a),d=r.removedTargetIds||[];t=new sh([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Qf(n,r.document),a=r.removedTargetIds||[];t=new sh([],a,o,null)}else{if(!("filter"in e))return Ae();{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:a}=r,c=new d2(o,a),d=r.targetId;t=new wE(d,c)}}return t}function b2(n,e){let t;if(e instanceof vc)t={update:Jv(n,e.key,e.value)};else if(e instanceof vE)t={delete:Op(n,e.key)};else if(e instanceof co)t={update:Jv(n,e.key,e.data),updateMask:j2(e.fieldMask)};else{if(!(e instanceof c2))return Ae();t={verify:Op(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,c){const d=c.transform;if(d instanceof xh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof nc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof rc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof wh)return{fieldPath:c.field.canonicalString(),increment:d.Pe};throw Ae()}(0,r))),e.precondition.isNone||(t.currentDocument=function(o,a){return a.updateTime!==void 0?{updateTime:_2(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ae()}(n,e.precondition)),t}function S2(n,e){return n&&n.length>0?(Je(e!==void 0),n.map(t=>function(o,a){let c=o.updateTime?Rr(o.updateTime):Rr(a);return c.isEqual(Ce.min())&&(c=Rr(a)),new o2(c,o.transformResults||[])}(t,e))):[]}function I2(n,e){return{documents:[bE(n,e.path)]}}function N2(n,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=bE(n,o);const a=function(m){if(m.length!==0)return NE(Lr.create(m,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const c=function(m){if(m.length!==0)return m.map(v=>function(E){return{field:sa(E.field),direction:A2(E.dir)}}(v))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Vp(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{_t:t,parent:o}}function k2(n){let e=E2(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Je(r===1);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=function(w){const E=IE(w);return E instanceof Lr&&nE(E)?E.getFilters():[E]}(t.where));let c=[];t.orderBy&&(c=function(w){return w.map(E=>function(L){return new vh(ia(L.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(L.direction))}(E))}(t.orderBy));let d=null;t.limit&&(d=function(w){let E;return E=typeof w=="object"?w.value:w,$h(E)?null:E}(t.limit));let p=null;t.startAt&&(p=function(w){const E=!!w.before,b=w.values||[];return new yh(b,E)}(t.startAt));let m=null;return t.endAt&&(m=function(w){const E=!w.before,b=w.values||[];return new yh(b,E)}(t.endAt)),HA(e,o,c,a,d,"F",p,m)}function P2(n,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function IE(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ia(t.unaryFilter.field);return At.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=ia(t.unaryFilter.field);return At.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ia(t.unaryFilter.field);return At.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=ia(t.unaryFilter.field);return At.create(c,"!=",{nullValue:"NULL_VALUE"});default:return Ae()}}(n):n.fieldFilter!==void 0?function(t){return At.create(ia(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ae()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Lr.create(t.compositeFilter.filters.map(r=>IE(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ae()}}(t.compositeFilter.op))}(n):Ae()}function A2(n){return y2[n]}function C2(n){return v2[n]}function R2(n){return x2[n]}function sa(n){return{fieldPath:n.canonicalString()}}function ia(n){return $t.fromServerFormat(n.fieldPath)}function NE(n){return n instanceof At?function(t){if(t.op==="=="){if(Mv(t.value))return{unaryFilter:{field:sa(t.field),op:"IS_NAN"}};if(Ov(t.value))return{unaryFilter:{field:sa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Mv(t.value))return{unaryFilter:{field:sa(t.field),op:"IS_NOT_NAN"}};if(Ov(t.value))return{unaryFilter:{field:sa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sa(t.field),op:C2(t.op),value:t.value}}}(n):n instanceof Lr?function(t){const r=t.getFilters().map(o=>NE(o));return r.length===1?r[0]:{compositeFilter:{op:R2(t.op),filters:r}}}(n):Ae()}function j2(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function kE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e,t,r,o,a=Ce.min(),c=Ce.min(),d=Gt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Zs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Zs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Zs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Zs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e){this.ct=e}}function V2(n){const e=k2({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Dp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(){this.un=new O2}addToCollectionParentIndex(e,t){return this.un.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(oi.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(oi.min())}updateCollectionGroup(e,t,r){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class O2{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new qt(pt.comparator),a=!o.has(r);return this.index[t]=o.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new qt(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ea(0)}static kn(){return new Ea(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(){this.changes=new Ra(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Zt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?re.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(r!==null&&Bl(r.mutation,o,cr.empty(),Ct.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Me()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Me()){const o=Hi();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(a=>{let c=Dl();return a.forEach((d,p)=>{c=c.insert(d,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Hi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Me()))}populateOverlays(e,t,r){const o=[];return r.forEach(a=>{t.has(a)||o.push(a)}),this.documentOverlayCache.getOverlays(e,o).next(a=>{a.forEach((c,d)=>{t.set(c,d)})})}computeViews(e,t,r,o){let a=ps();const c=Fl(),d=function(){return Fl()}();return t.forEach((p,m)=>{const v=r.get(m.key);o.has(m.key)&&(v===void 0||v.mutation instanceof co)?a=a.insert(m.key,m):v!==void 0?(c.set(m.key,v.mutation.getFieldMask()),Bl(v.mutation,m,v.mutation.getFieldMask(),Ct.now())):c.set(m.key,cr.empty())}),this.recalculateAndSaveOverlays(e,a).next(p=>(p.forEach((m,v)=>c.set(m,v)),t.forEach((m,v)=>{var w;return d.set(m,new U2(v,(w=c.get(m))!==null&&w!==void 0?w:null))}),d))}recalculateAndSaveOverlays(e,t){const r=Fl();let o=new dt((c,d)=>c-d),a=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const d of c)d.keys().forEach(p=>{const m=t.get(p);if(m===null)return;let v=r.get(p)||cr.empty();v=d.applyToLocalView(m,v),r.set(p,v);const w=(o.get(d.batchId)||Me()).add(p);o=o.insert(d.batchId,w)})}).next(()=>{const c=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),m=p.key,v=p.value,w=uE();v.forEach(E=>{if(!a.has(E)){const b=gE(t.get(E),r.get(E));b!==null&&w.set(E,b),a=a.add(E)}}),c.push(this.documentOverlayCache.saveOverlays(e,m,w))}return re.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,o){return function(c){return Se.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):WA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(a=>{const c=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-a.size):re.resolve(Hi());let d=-1,p=a;return c.next(m=>re.forEach(m,(v,w)=>(d<w.largestBatchId&&(d=w.largestBatchId),a.get(v)?re.resolve():this.remoteDocumentCache.getEntry(e,v).next(E=>{p=p.insert(v,E)}))).next(()=>this.populateOverlays(e,m,a)).next(()=>this.computeViews(e,p,m,Me())).next(v=>({batchId:d,changes:cE(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Se(t)).next(r=>{let o=Dl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const a=t.collectionGroup;let c=Dl();return this.indexManager.getCollectionParents(e,a).next(d=>re.forEach(d,p=>{const m=function(w,E){return new qh(E,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(t,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,o).next(v=>{v.forEach((w,E)=>{c=c.insert(w,E)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,o))).next(c=>{a.forEach((p,m)=>{const v=m.getKey();c.get(v)===null&&(c=c.insert(v,Zt.newInvalidDocument(v)))});let d=Dl();return c.forEach((p,m)=>{const v=a.get(p);v!==void 0&&Bl(v.mutation,m,cr.empty(),Ct.now()),Hh(t,m)&&(d=d.insert(p,m))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return re.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:Rr(o.createTime)}}(t)),re.resolve()}getNamedQuery(e,t){return re.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(o){return{name:o.name,query:V2(o.bundledQuery),readTime:Rr(o.readTime)}}(t)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(){this.overlays=new dt(Se.comparator),this.Ir=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Hi();return re.forEach(t,o=>this.getOverlay(e,o).next(a=>{a!==null&&r.set(o,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,a)=>{this.ht(e,t,a)}),re.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Ir.get(r);return o!==void 0&&(o.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(r)),re.resolve()}getOverlaysForCollection(e,t,r){const o=Hi(),a=t.length+1,c=new Se(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,m=p.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&p.largestBatchId>r&&o.set(p.getKey(),p)}return re.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let a=new dt((m,v)=>m-v);const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let v=a.get(m.largestBatchId);v===null&&(v=Hi(),a=a.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const d=Hi(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((m,v)=>d.set(m,v)),!(d.size()>=o)););return re.resolve(d)}ht(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const c=this.Ir.get(o.largestBatchId).delete(r.key);this.Ir.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new h2(t,r));let a=this.Ir.get(t);a===void 0&&(a=Me(),this.Ir.set(t,a)),this.Ir.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(){this.Tr=new qt(Ot.Er),this.dr=new qt(Ot.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new Ot(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Ot(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new Se(new pt([])),r=new Ot(t,e),o=new Ot(t,e+1),a=[];return this.dr.forEachInRange([r,o],c=>{this.Vr(c),a.push(c.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Se(new pt([])),r=new Ot(t,e),o=new Ot(t,e+1);let a=Me();return this.dr.forEachInRange([r,o],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new Ot(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ot{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Se.comparator(e.key,t.key)||Ye(e.wr,t.wr)}static Ar(e,t){return Ye(e.wr,t.wr)||Se.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new qt(Ot.Er)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new u2(a,t,r,o);this.mutationQueue.push(c);for(const d of o)this.br=this.br.add(new Ot(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return re.resolve(c)}lookupMutationBatch(e,t){return re.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.vr(r),a=o<0?0:o;return re.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ot(t,0),o=new Ot(t,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,o],c=>{const d=this.Dr(c.wr);a.push(d)}),re.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new qt(Ye);return t.forEach(o=>{const a=new Ot(o,0),c=new Ot(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,c],d=>{r=r.add(d.wr)})}),re.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let a=r;Se.isDocumentKey(a)||(a=a.child(""));const c=new Ot(new Se(a),0);let d=new qt(Ye);return this.br.forEachWhile(p=>{const m=p.key.path;return!!r.isPrefixOf(m)&&(m.length===o&&(d=d.add(p.wr)),!0)},c),re.resolve(this.Cr(d))}Cr(e){const t=[];return e.forEach(r=>{const o=this.Dr(r);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Je(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return re.forEach(t.mutations,o=>{const a=new Ot(o.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new Ot(t,0),o=this.br.firstAfterOrEqual(r);return re.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e){this.Mr=e,this.docs=function(){return new dt(Se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),a=o?o.size:0,c=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return re.resolve(r?r.document.mutableCopy():Zt.newInvalidDocument(t))}getEntries(e,t){let r=ps();return t.forEach(o=>{const a=this.docs.get(o);r=r.insert(o,a?a.document.mutableCopy():Zt.newInvalidDocument(o))}),re.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let a=ps();const c=t.path,d=new Se(c.child("")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:m,value:{document:v}}=p.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||NA(IA(v),r)<=0||(o.has(v.key)||Hh(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return re.resolve(a)}getAllFromCollectionGroup(e,t,r,o){Ae()}Or(e,t){return re.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new H2(this)}getSize(e){return re.resolve(this.size)}}class H2 extends M2{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.cr.addEntry(e,o)):this.cr.removeEntry(r)}),re.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e){this.persistence=e,this.Nr=new Ra(t=>km(t),Pm),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Vm,this.targetCount=0,this.kr=Ea.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,o)=>t(o)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),re.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Ea(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.Kn(t),re.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,r){let o=0;const a=[];return this.Nr.forEach((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.Nr.delete(c),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)}),re.waitFor(a).next(()=>o)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return re.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),re.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach(c=>{a.push(o.markPotentiallyOrphaned(e,c))}),re.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),re.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return re.resolve(r)}containsKey(e,t){return re.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e,t){this.qr={},this.overlays={},this.Qr=new bm(0),this.Kr=!1,this.Kr=!0,this.$r=new $2,this.referenceDelegate=e(this),this.Ur=new W2(this),this.indexManager=new L2,this.remoteDocumentCache=function(o){return new G2(o)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new D2(t),this.Gr=new B2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new z2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new q2(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){ye("MemoryPersistence","Starting transaction:",e);const o=new Q2(this.Qr.next());return this.referenceDelegate.zr(),r(o).next(a=>this.referenceDelegate.jr(o).next(()=>a)).toPromise().then(a=>(o.raiseOnCommittedEvent(),a))}Hr(e,t){return re.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class Q2 extends PA{constructor(e){super(),this.currentSequenceNumber=e}}class Lm{constructor(e){this.persistence=e,this.Jr=new Vm,this.Yr=null}static Zr(e){return new Lm(e)}get Xr(){if(this.Yr)return this.Yr;throw Ae()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),re.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),re.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(o=>this.Xr.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(a=>this.Xr.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.Xr,r=>{const o=Se.fromPath(r);return this.ei(e,o).next(a=>{a||t.removeEntry(o,Ce.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return re.or([()=>re.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=o}static Wi(e,t){let r=Me(),o=Me();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new Om(e,t.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return VI()?8:AA(en())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,o){const a={result:null};return this.Yi(e,t).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.Zi(e,t,o,r).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new Y2;return this.Xi(e,t,c).next(d=>{if(a.result=d,this.zi)return this.es(e,t,c,d.size)})}).next(()=>a.result)}es(e,t,r,o){return r.documentReadCount<this.ji?(Nl()<=ze.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",ra(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),re.resolve()):(Nl()<=ze.DEBUG&&ye("QueryEngine","Query:",ra(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.Hi*o?(Nl()<=ze.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",ra(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Cr(t))):re.resolve())}Yi(e,t){if(zv(t))return re.resolve(null);let r=Cr(t);return this.indexManager.getIndexType(e,r).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=Dp(t,null,"F"),r=Cr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=Me(...a);return this.Ji.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,r).next(p=>{const m=this.ts(t,d);return this.ns(t,m,c,p.readTime)?this.Yi(e,Dp(t,null,"F")):this.rs(e,m,t,p)}))})))}Zi(e,t,r,o){return zv(t)||o.isEqual(Ce.min())?re.resolve(null):this.Ji.getDocuments(e,r).next(a=>{const c=this.ts(t,a);return this.ns(t,c,r,o)?re.resolve(null):(Nl()<=ze.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ra(t)),this.rs(e,c,t,SA(o,-1)).next(d=>d))})}ts(e,t){let r=new qt(aE(e));return t.forEach((o,a)=>{Hh(e,a)&&(r=r.add(a))}),r}ns(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}Xi(e,t,r){return Nl()<=ze.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",ra(t)),this.Ji.getDocumentsMatchingQuery(e,t,oi.min(),r)}rs(e,t,r,o){return this.Ji.getDocumentsMatchingQuery(e,r,o).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e,t,r,o){this.persistence=e,this.ss=t,this.serializer=o,this.os=new dt(Ye),this._s=new Ra(a=>km(a),Pm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new F2(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function Z2(n,e,t,r){return new J2(n,e,t,r)}async function PE(n,e){const t=je(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(a=>(o=a,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],d=[];let p=Me();for(const m of o){c.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}for(const m of a){d.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(r,p).next(m=>({hs:m,removedBatchIds:c,addedBatchIds:d}))})})}function eC(n,e){const t=je(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),a=t.cs.newChangeBuffer({trackRemovals:!0});return function(d,p,m,v){const w=m.batch,E=w.keys();let b=re.resolve();return E.forEach(L=>{b=b.next(()=>v.getEntry(p,L)).next(V=>{const k=m.docVersions.get(L);Je(k!==null),V.version.compareTo(k)<0&&(w.applyToRemoteDocument(V,m),V.isValidDocument()&&(V.setReadTime(m.commitVersion),v.addEntry(V)))})}),b.next(()=>d.mutationQueue.removeMutationBatch(p,w))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let p=Me();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(p=p.add(d.batch.mutations[m].key));return p}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function AE(n){const e=je(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function tC(n,e){const t=je(n),r=e.snapshotVersion;let o=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.cs.newChangeBuffer({trackRemovals:!0});o=t.os;const d=[];e.targetChanges.forEach((v,w)=>{const E=o.get(w);if(!E)return;d.push(t.Ur.removeMatchingKeys(a,v.removedDocuments,w).next(()=>t.Ur.addMatchingKeys(a,v.addedDocuments,w)));let b=E.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?b=b.withResumeToken(Gt.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):v.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(v.resumeToken,r)),o=o.insert(w,b),function(V,k,D){return V.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8?!0:D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0}(E,b,v)&&d.push(t.Ur.updateTargetData(a,b))});let p=ps(),m=Me();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))}),d.push(nC(a,c,e.documentUpdates).next(v=>{p=v.Ps,m=v.Is})),!r.isEqual(Ce.min())){const v=t.Ur.getLastRemoteSnapshotVersion(a).next(w=>t.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r));d.push(v)}return re.waitFor(d).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,p,m)).next(()=>p)}).then(a=>(t.os=o,a))}function nC(n,e,t){let r=Me(),o=Me();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let c=ps();return t.forEach((d,p)=>{const m=a.get(d);p.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(Ce.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):ye("LocalStore","Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",p.version)}),{Ps:c,Is:o}})}function rC(n,e){const t=je(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function sC(n,e){const t=je(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Ur.getTargetData(r,e).next(a=>a?(o=a,re.resolve(o)):t.Ur.allocateTargetId(r).next(c=>(o=new Zs(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.os.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}async function Up(n,e,t){const r=je(n),o=r.os.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,o))}catch(c){if(!yc(c))throw c;ye("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.os=r.os.remove(e),r._s.delete(o.target)}function Zv(n,e,t){const r=je(n);let o=Ce.min(),a=Me();return r.persistence.runTransaction("Execute query","readwrite",c=>function(p,m,v){const w=je(p),E=w._s.get(v);return E!==void 0?re.resolve(w.os.get(E)):w.Ur.getTargetData(m,v)}(r,c,Cr(e)).next(d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(c,d.targetId).next(p=>{a=p})}).next(()=>r.ss.getDocumentsMatchingQuery(c,e,t?o:Ce.min(),t?a:Me())).next(d=>(iC(r,QA(e),d),{documents:d,Ts:a})))}function iC(n,e,t){let r=n.us.get(e)||Ce.min();t.forEach((o,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.us.set(e,r)}class ex{constructor(){this.activeTargetIds=t2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class oC{constructor(){this.so=new ex,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ex,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ye("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ye("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gu=null;function Yf(){return Gu===null?Gu=function(){return 268435456+Math.round(2147483648*Math.random())}():Gu++,"0x"+Gu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt="WebChannelConnection";class uC extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${o}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${a}`}get Fo(){return!1}Mo(t,r,o,a,c){const d=Yf(),p=this.xo(t,r.toUriEncodedString());ye("RestConnection",`Sending RPC '${t}' ${d}:`,p,o);const m={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(m,a,c),this.No(t,p,m,o).then(v=>(ye("RestConnection",`Received RPC '${t}' ${d}: `,v),v),v=>{throw va("RestConnection",`RPC '${t}' ${d} failed with error: `,v,"url: ",p,"request:",o),v})}Lo(t,r,o,a,c,d){return this.Mo(t,r,o,a,c)}Oo(t,r,o){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Aa}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,c)=>t[c]=a),o&&o.headers.forEach((a,c)=>t[c]=a)}xo(t,r){const o=lC[t];return`${this.Do}/v1/${r}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,o){const a=Yf();return new Promise((c,d)=>{const p=new q_;p.setWithCredentials(!0),p.listenOnce(G_.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case th.NO_ERROR:const v=p.getResponseJson();ye(Yt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(v)),c(v);break;case th.TIMEOUT:ye(Yt,`RPC '${e}' ${a} timed out`),d(new be(ie.DEADLINE_EXCEEDED,"Request time out"));break;case th.HTTP_ERROR:const w=p.getStatus();if(ye(Yt,`RPC '${e}' ${a} failed with status:`,w,"response text:",p.getResponseText()),w>0){let E=p.getResponseJson();Array.isArray(E)&&(E=E[0]);const b=E?.error;if(b&&b.status&&b.message){const L=function(k){const D=k.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(D)>=0?D:ie.UNKNOWN}(b.status);d(new be(L,b.message))}else d(new be(ie.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new be(ie.UNAVAILABLE,"Connection failed."));break;default:Ae()}}finally{ye(Yt,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(o);ye(Yt,`RPC '${e}' ${a} sending request:`,o),p.send(t,"POST",m,r,15)})}Bo(e,t,r){const o=Yf(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=K_(),d=W_(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Oo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const v=a.join("");ye(Yt,`Creating RPC '${e}' stream ${o}: ${v}`,p);const w=c.createWebChannel(v,p);let E=!1,b=!1;const L=new cC({Io:k=>{b?ye(Yt,`Not sending because RPC '${e}' stream ${o} is closed:`,k):(E||(ye(Yt,`Opening RPC '${e}' stream ${o} transport.`),w.open(),E=!0),ye(Yt,`RPC '${e}' stream ${o} sending:`,k),w.send(k))},To:()=>w.close()}),V=(k,D,M)=>{k.listen(D,j=>{try{M(j)}catch(W){setTimeout(()=>{throw W},0)}})};return V(w,jl.EventType.OPEN,()=>{b||(ye(Yt,`RPC '${e}' stream ${o} transport opened.`),L.yo())}),V(w,jl.EventType.CLOSE,()=>{b||(b=!0,ye(Yt,`RPC '${e}' stream ${o} transport closed`),L.So())}),V(w,jl.EventType.ERROR,k=>{b||(b=!0,va(Yt,`RPC '${e}' stream ${o} transport errored:`,k),L.So(new be(ie.UNAVAILABLE,"The operation could not be completed")))}),V(w,jl.EventType.MESSAGE,k=>{var D;if(!b){const M=k.data[0];Je(!!M);const j=M,W=j.error||((D=j[0])===null||D===void 0?void 0:D.error);if(W){ye(Yt,`RPC '${e}' stream ${o} received error:`,W);const ee=W.status;let ae=function(N){const U=Et[N];if(U!==void 0)return xE(U)}(ee),R=W.message;ae===void 0&&(ae=ie.INTERNAL,R="Unknown error status: "+ee+" with message "+W.message),b=!0,L.So(new be(ae,R)),w.close()}else ye(Yt,`RPC '${e}' stream ${o} received:`,M),L.bo(M)}}),V(d,H_.STAT_EVENT,k=>{k.stat===Pp.PROXY?ye(Yt,`RPC '${e}' stream ${o} detected buffering proxy`):k.stat===Pp.NOPROXY&&ye(Yt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{L.wo()},0),L}}function Xf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(n){return new w2(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e,t,r=1e3,o=1.5,a=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=o,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),o=Math.max(0,t-r);o>0&&ye("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(e,t,r,o,a,c,d,p){this.ui=e,this.Ho=r,this.Jo=o,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new CE(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(fs(t.toString()),fs("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Yo===t&&this.P_(r,o)},r=>{e(()=>{const o=new be(ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(o)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(o=>{r(()=>this.I_(o))}),this.stream.onMessage(o=>{r(()=>++this.e_==1?this.E_(o):this.onNext(o))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ye("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(ye("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hC extends RE{constructor(e,t,r,o,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,c),this.serializer=a}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=T2(this.serializer,e),r=function(a){if(!("targetChange"in a))return Ce.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?Ce.min():c.readTime?Rr(c.readTime):Ce.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=Mp(this.serializer),t.addTarget=function(a,c){let d;const p=c.target;if(d=jp(p)?{documents:I2(a,p)}:{query:N2(a,p)._t},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=EE(a,c.resumeToken);const m=Vp(a,c.expectedCount);m!==null&&(d.expectedCount=m)}else if(c.snapshotVersion.compareTo(Ce.min())>0){d.readTime=_h(a,c.snapshotVersion.toTimestamp());const m=Vp(a,c.expectedCount);m!==null&&(d.expectedCount=m)}return d}(this.serializer,e);const r=P2(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=Mp(this.serializer),t.removeTarget=e,this.a_(t)}}class dC extends RE{constructor(e,t,r,o,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,c),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Je(!!e.streamToken),this.lastStreamToken=e.streamToken,Je(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Je(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=S2(e.writeResults,e.commitTime),r=Rr(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=Mp(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>b2(this.serializer,r))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new be(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Mo(e,Lp(t,r),o,a,c)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new be(ie.UNKNOWN,a.toString())})}Lo(e,t,r,o,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Lo(e,Lp(t,r),o,c,d,a)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new be(ie.UNKNOWN,c.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class pC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(fs(t),this.D_=!1):ye("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,t,r,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(c=>{r.enqueueAndForget(async()=>{uo(this)&&(ye("RemoteStore","Restarting streams for network reachability change."),await async function(p){const m=je(p);m.L_.add(4),await wc(m),m.q_.set("Unknown"),m.L_.delete(4),await Xh(m)}(this))})}),this.q_=new pC(r,o)}}async function Xh(n){if(uo(n))for(const e of n.B_)await e(!0)}async function wc(n){for(const e of n.B_)await e(!1)}function jE(n,e){const t=je(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Bm(t)?Fm(t):ja(t).r_()&&Um(t,e))}function Mm(n,e){const t=je(n),r=ja(t);t.N_.delete(e),r.r_()&&DE(t,e),t.N_.size===0&&(r.r_()?r.o_():uo(t)&&t.q_.set("Unknown"))}function Um(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ja(n).A_(e)}function DE(n,e){n.Q_.xe(e),ja(n).R_(e)}function Fm(n){n.Q_=new g2({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),ja(n).start(),n.q_.v_()}function Bm(n){return uo(n)&&!ja(n).n_()&&n.N_.size>0}function uo(n){return je(n).L_.size===0}function VE(n){n.Q_=void 0}async function gC(n){n.q_.set("Online")}async function yC(n){n.N_.forEach((e,t)=>{Um(n,e)})}async function vC(n,e){VE(n),Bm(n)?(n.q_.M_(e),Fm(n)):n.q_.set("Unknown")}async function xC(n,e,t){if(n.q_.set("Online"),e instanceof _E&&e.state===2&&e.cause)try{await async function(o,a){const c=a.cause;for(const d of a.targetIds)o.N_.has(d)&&(await o.remoteSyncer.rejectListen(d,c),o.N_.delete(d),o.Q_.removeTarget(d))}(n,e)}catch(r){ye("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Eh(n,r)}else if(e instanceof sh?n.Q_.Ke(e):e instanceof wE?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Ce.min()))try{const r=await AE(n.localStore);t.compareTo(r)>=0&&await function(a,c){const d=a.Q_.rt(c);return d.targetChanges.forEach((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const v=a.N_.get(m);v&&a.N_.set(m,v.withResumeToken(p.resumeToken,c))}}),d.targetMismatches.forEach((p,m)=>{const v=a.N_.get(p);if(!v)return;a.N_.set(p,v.withResumeToken(Gt.EMPTY_BYTE_STRING,v.snapshotVersion)),DE(a,p);const w=new Zs(v.target,p,m,v.sequenceNumber);Um(a,w)}),a.remoteSyncer.applyRemoteEvent(d)}(n,t)}catch(r){ye("RemoteStore","Failed to raise snapshot:",r),await Eh(n,r)}}async function Eh(n,e,t){if(!yc(e))throw e;n.L_.add(1),await wc(n),n.q_.set("Offline"),t||(t=()=>AE(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ye("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await Xh(n)})}function LE(n,e){return e().catch(t=>Eh(n,t,e))}async function Jh(n){const e=je(n),t=li(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;wC(e);)try{const o=await rC(e.localStore,r);if(o===null){e.O_.length===0&&t.o_();break}r=o.batchId,_C(e,o)}catch(o){await Eh(e,o)}OE(e)&&ME(e)}function wC(n){return uo(n)&&n.O_.length<10}function _C(n,e){n.O_.push(e);const t=li(n);t.r_()&&t.V_&&t.m_(e.mutations)}function OE(n){return uo(n)&&!li(n).n_()&&n.O_.length>0}function ME(n){li(n).start()}async function EC(n){li(n).p_()}async function TC(n){const e=li(n);for(const t of n.O_)e.m_(t.mutations)}async function bC(n,e,t){const r=n.O_.shift(),o=Rm.from(r,e,t);await LE(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),await Jh(n)}async function SC(n,e){e&&li(n).V_&&await async function(r,o){if(function(c){return f2(c)&&c!==ie.ABORTED}(o.code)){const a=r.O_.shift();li(r).s_(),await LE(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,o)),await Jh(r)}}(n,e),OE(n)&&ME(n)}async function nx(n,e){const t=je(n);t.asyncQueue.verifyOperationInProgress(),ye("RemoteStore","RemoteStore received new credentials");const r=uo(t);t.L_.add(3),await wc(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await Xh(t)}async function IC(n,e){const t=je(n);e?(t.L_.delete(2),await Xh(t)):e||(t.L_.add(2),await wc(t),t.q_.set("Unknown"))}function ja(n){return n.K_||(n.K_=function(t,r,o){const a=je(t);return a.w_(),new hC(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(n.datastore,n.asyncQueue,{Eo:gC.bind(null,n),Ro:yC.bind(null,n),mo:vC.bind(null,n),d_:xC.bind(null,n)}),n.B_.push(async e=>{e?(n.K_.s_(),Bm(n)?Fm(n):n.q_.set("Unknown")):(await n.K_.stop(),VE(n))})),n.K_}function li(n){return n.U_||(n.U_=function(t,r,o){const a=je(t);return a.w_(),new dC(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:EC.bind(null,n),mo:SC.bind(null,n),f_:TC.bind(null,n),g_:bC.bind(null,n)}),n.B_.push(async e=>{e?(n.U_.s_(),await Jh(n)):(await n.U_.stop(),n.O_.length>0&&(ye("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))})),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,t,r,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=a,this.deferred=new ri,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,a){const c=Date.now()+r,d=new zm(e,t,c,o,a);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $m(n,e){if(fs("AsyncQueue",`${e}: ${n}`),yc(n))return new be(ie.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Se.comparator(t.key,r.key):(t,r)=>Se.comparator(t.key,r.key),this.keyedMap=Dl(),this.sortedSet=new dt(this.comparator)}static emptySet(e){return new ga(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ga)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=r.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new ga;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(){this.W_=new dt(Se.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Ae():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ta{constructor(e,t,r,o,a,c,d,p,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,o,a){const c=[];return t.forEach(d=>{c.push({type:0,doc:d})}),new Ta(e,t,ga.emptySet(t),c,r,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class kC{constructor(){this.queries=sx(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const o=je(t),a=o.queries;o.queries=sx(),a.forEach((c,d)=>{for(const p of d.j_)p.onError(r)})})(this,new be(ie.ABORTED,"Firestore shutting down"))}}function sx(){return new Ra(n=>oE(n),Gh)}async function PC(n,e){const t=je(n);let r=3;const o=e.query;let a=t.queries.get(o);a?!a.H_()&&e.J_()&&(r=2):(a=new NC,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await t.onListen(o,!0);break;case 1:a.z_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const d=$m(c,`Initialization of query '${ra(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.j_.push(e),e.Z_(t.onlineState),a.z_&&e.X_(a.z_)&&qm(t)}async function AC(n,e){const t=je(n),r=e.query;let o=3;const a=t.queries.get(r);if(a){const c=a.j_.indexOf(e);c>=0&&(a.j_.splice(c,1),a.j_.length===0?o=e.J_()?0:1:!a.H_()&&e.J_()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function CC(n,e){const t=je(n);let r=!1;for(const o of e){const a=o.query,c=t.queries.get(a);if(c){for(const d of c.j_)d.X_(o)&&(r=!0);c.z_=o}}r&&qm(t)}function RC(n,e,t){const r=je(n),o=r.queries.get(e);if(o)for(const a of o.j_)a.onError(t);r.queries.delete(e)}function qm(n){n.Y_.forEach(e=>{e.next()})}var Fp,ix;(ix=Fp||(Fp={})).ea="default",ix.Cache="cache";class jC{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Ta(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Ta.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Fp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e){this.key=e}}class FE{constructor(e){this.key=e}}class DC{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Me(),this.mutatedKeys=Me(),this.Aa=aE(e),this.Ra=new ga(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new rx,o=t?t.Ra:this.Ra;let a=t?t.mutatedKeys:this.mutatedKeys,c=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((v,w)=>{const E=o.get(v),b=Hh(this.query,w)?w:null,L=!!E&&this.mutatedKeys.has(E.key),V=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let k=!1;E&&b?E.data.isEqual(b.data)?L!==V&&(r.track({type:3,doc:b}),k=!0):this.ga(E,b)||(r.track({type:2,doc:b}),k=!0,(p&&this.Aa(b,p)>0||m&&this.Aa(b,m)<0)&&(d=!0)):!E&&b?(r.track({type:0,doc:b}),k=!0):E&&!b&&(r.track({type:1,doc:E}),k=!0,(p||m)&&(d=!0)),k&&(b?(c=c.add(b),a=V?a.add(v):a.delete(v)):(c=c.delete(v),a=a.delete(v)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),a=a.delete(v.key),r.track({type:1,doc:v})}return{Ra:c,fa:r,ns:d,mutatedKeys:a}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const c=e.fa.G_();c.sort((v,w)=>function(b,L){const V=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae()}};return V(b)-V(L)}(v.type,w.type)||this.Aa(v.doc,w.doc)),this.pa(r),o=o!=null&&o;const d=t&&!o?this.ya():[],p=this.da.size===0&&this.current&&!o?1:0,m=p!==this.Ea;return this.Ea=p,c.length!==0||m?{snapshot:new Ta(this.query,e.Ra,a,c,e.mutatedKeys,p===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:d}:{wa:d}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new rx,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Me(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new FE(r))}),this.da.forEach(r=>{e.has(r)||t.push(new UE(r))}),t}ba(e){this.Ta=e.Ts,this.da=Me();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Ta.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class VC{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class LC{constructor(e){this.key=e,this.va=!1}}class OC{constructor(e,t,r,o,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Ca={},this.Fa=new Ra(d=>oE(d),Gh),this.Ma=new Map,this.xa=new Set,this.Oa=new dt(Se.comparator),this.Na=new Map,this.La=new Vm,this.Ba={},this.ka=new Map,this.qa=Ea.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function MC(n,e,t=!0){const r=HE(n);let o;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.Da()):o=await BE(r,e,t,!0),o}async function UC(n,e){const t=HE(n);await BE(t,e,!0,!1)}async function BE(n,e,t,r){const o=await sC(n.localStore,Cr(e)),a=o.targetId,c=n.sharedClientState.addLocalQueryTarget(a,t);let d;return r&&(d=await FC(n,e,a,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&jE(n.remoteStore,o),d}async function FC(n,e,t,r,o){n.Ka=(w,E,b)=>async function(V,k,D,M){let j=k.view.ma(D);j.ns&&(j=await Zv(V.localStore,k.query,!1).then(({documents:R})=>k.view.ma(R,j)));const W=M&&M.targetChanges.get(k.targetId),ee=M&&M.targetMismatches.get(k.targetId)!=null,ae=k.view.applyChanges(j,V.isPrimaryClient,W,ee);return ax(V,k.targetId,ae.wa),ae.snapshot}(n,w,E,b);const a=await Zv(n.localStore,e,!0),c=new DC(e,a.Ts),d=c.ma(a.documents),p=xc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",o),m=c.applyChanges(d,n.isPrimaryClient,p);ax(n,t,m.wa);const v=new VC(e,t,c);return n.Fa.set(e,v),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),m.snapshot}async function BC(n,e,t){const r=je(n),o=r.Fa.get(e),a=r.Ma.get(o.targetId);if(a.length>1)return r.Ma.set(o.targetId,a.filter(c=>!Gh(c,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Up(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),t&&Mm(r.remoteStore,o.targetId),Bp(r,o.targetId)}).catch(gc)):(Bp(r,o.targetId),await Up(r.localStore,o.targetId,!0))}async function zC(n,e){const t=je(n),r=t.Fa.get(e),o=t.Ma.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Mm(t.remoteStore,r.targetId))}async function $C(n,e,t){const r=YC(n);try{const o=await function(c,d){const p=je(c),m=Ct.now(),v=d.reduce((b,L)=>b.add(L.key),Me());let w,E;return p.persistence.runTransaction("Locally write mutations","readwrite",b=>{let L=ps(),V=Me();return p.cs.getEntries(b,v).next(k=>{L=k,L.forEach((D,M)=>{M.isValidDocument()||(V=V.add(D))})}).next(()=>p.localDocuments.getOverlayedDocuments(b,L)).next(k=>{w=k;const D=[];for(const M of d){const j=l2(M,w.get(M.key).overlayedDocument);j!=null&&D.push(new co(M.key,j,Z_(j.value.mapValue),os.exists(!0)))}return p.mutationQueue.addMutationBatch(b,m,D,d)}).next(k=>{E=k;const D=k.applyToLocalDocumentSet(w,V);return p.documentOverlayCache.saveOverlays(b,k.batchId,D)})}).then(()=>({batchId:E.batchId,changes:cE(w)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(c,d,p){let m=c.Ba[c.currentUser.toKey()];m||(m=new dt(Ye)),m=m.insert(d,p),c.Ba[c.currentUser.toKey()]=m}(r,o.batchId,t),await _c(r,o.changes),await Jh(r.remoteStore)}catch(o){const a=$m(o,"Failed to persist write");t.reject(a)}}async function zE(n,e){const t=je(n);try{const r=await tC(t.localStore,e);e.targetChanges.forEach((o,a)=>{const c=t.Na.get(a);c&&(Je(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?c.va=!0:o.modifiedDocuments.size>0?Je(c.va):o.removedDocuments.size>0&&(Je(c.va),c.va=!1))}),await _c(t,r,e)}catch(r){await gc(r)}}function ox(n,e,t){const r=je(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.Fa.forEach((a,c)=>{const d=c.view.Z_(e);d.snapshot&&o.push(d.snapshot)}),function(c,d){const p=je(c);p.onlineState=d;let m=!1;p.queries.forEach((v,w)=>{for(const E of w.j_)E.Z_(d)&&(m=!0)}),m&&qm(p)}(r.eventManager,e),o.length&&r.Ca.d_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function qC(n,e,t){const r=je(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Na.get(e),a=o&&o.key;if(a){let c=new dt(Se.comparator);c=c.insert(a,Zt.newNoDocument(a,Ce.min()));const d=Me().add(a),p=new Qh(Ce.min(),new Map,new dt(Ye),c,d);await zE(r,p),r.Oa=r.Oa.remove(a),r.Na.delete(e),Gm(r)}else await Up(r.localStore,e,!1).then(()=>Bp(r,e,t)).catch(gc)}async function GC(n,e){const t=je(n),r=e.batch.batchId;try{const o=await eC(t.localStore,e);qE(t,r,null),$E(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await _c(t,o)}catch(o){await gc(o)}}async function HC(n,e,t){const r=je(n);try{const o=await function(c,d){const p=je(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return p.mutationQueue.lookupMutationBatch(m,d).next(w=>(Je(w!==null),v=w.keys(),p.mutationQueue.removeMutationBatch(m,w))).next(()=>p.mutationQueue.performConsistencyCheck(m)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(m,v,d)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>p.localDocuments.getDocuments(m,v))})}(r.localStore,e);qE(r,e,t),$E(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await _c(r,o)}catch(o){await gc(o)}}function $E(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function qE(n,e,t){const r=je(n);let o=r.Ba[r.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),r.Ba[r.currentUser.toKey()]=o}}function Bp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||GE(n,r)})}function GE(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(Mm(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Gm(n))}function ax(n,e,t){for(const r of t)r instanceof UE?(n.La.addReference(r.key,e),WC(n,r)):r instanceof FE?(ye("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||GE(n,r.key)):Ae()}function WC(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(ye("SyncEngine","New document in limbo: "+t),n.xa.add(r),Gm(n))}function Gm(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Se(pt.fromString(e)),r=n.qa.next();n.Na.set(r,new LC(t)),n.Oa=n.Oa.insert(t,r),jE(n.remoteStore,new Zs(Cr(Am(t.path)),r,"TargetPurposeLimboResolution",bm.oe))}}async function _c(n,e,t){const r=je(n),o=[],a=[],c=[];r.Fa.isEmpty()||(r.Fa.forEach((d,p)=>{c.push(r.Ka(p,e,t).then(m=>{var v;if((m||t)&&r.isPrimaryClient){const w=m?!m.fromCache:(v=t?.targetChanges.get(p.targetId))===null||v===void 0?void 0:v.current;r.sharedClientState.updateQueryState(p.targetId,w?"current":"not-current")}if(m){o.push(m);const w=Om.Wi(p.targetId,m);a.push(w)}}))}),await Promise.all(c),r.Ca.d_(o),await async function(p,m){const v=je(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>re.forEach(m,E=>re.forEach(E.$i,b=>v.persistence.referenceDelegate.addReference(w,E.targetId,b)).next(()=>re.forEach(E.Ui,b=>v.persistence.referenceDelegate.removeReference(w,E.targetId,b)))))}catch(w){if(!yc(w))throw w;ye("LocalStore","Failed to update sequence numbers: "+w)}for(const w of m){const E=w.targetId;if(!w.fromCache){const b=v.os.get(E),L=b.snapshotVersion,V=b.withLastLimboFreeSnapshotVersion(L);v.os=v.os.insert(E,V)}}}(r.localStore,a))}async function KC(n,e){const t=je(n);if(!t.currentUser.isEqual(e)){ye("SyncEngine","User change. New user:",e.toKey());const r=await PE(t.localStore,e);t.currentUser=e,function(a,c){a.ka.forEach(d=>{d.forEach(p=>{p.reject(new be(ie.CANCELLED,c))})}),a.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await _c(t,r.hs)}}function QC(n,e){const t=je(n),r=t.Na.get(e);if(r&&r.va)return Me().add(r.key);{let o=Me();const a=t.Ma.get(e);if(!a)return o;for(const c of a){const d=t.Fa.get(c);o=o.unionWith(d.view.Va)}return o}}function HE(n){const e=je(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=zE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qC.bind(null,e),e.Ca.d_=CC.bind(null,e.eventManager),e.Ca.$a=RC.bind(null,e.eventManager),e}function YC(n){const e=je(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=GC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=HC.bind(null,e),e}class Th{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Yh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return Z2(this.persistence,new X2,e.initialUser,this.serializer)}Ga(e){return new K2(Lm.Zr,this.serializer)}Wa(e){return new oC}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Th.provider={build:()=>new Th};class zp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ox(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=KC.bind(null,this.syncEngine),await IC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new kC}()}createDatastore(e){const t=Yh(e.databaseInfo.databaseId),r=function(a){return new uC(a)}(e.databaseInfo);return function(a,c,d,p){return new fC(a,c,d,p)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,o,a,c,d){return new mC(r,o,a,c,d)}(this.localStore,this.datastore,e.asyncQueue,t=>ox(this.syncEngine,t,0),function(){return tx.D()?new tx:new aC}())}createSyncEngine(e,t){return function(o,a,c,d,p,m,v){const w=new OC(o,a,c,d,p,m);return v&&(w.Qa=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const a=je(o);ye("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await wc(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}zp.provider={build:()=>new zp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):fs("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e,t,r,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Jt.UNAUTHENTICATED,this.clientId=Y_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async c=>{ye("FirestoreClient","Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(ye("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ri;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=$m(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Jf(n,e){n.asyncQueue.verifyOperationInProgress(),ye("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async o=>{r.isEqual(o)||(await PE(e.localStore,o),r=o)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function lx(n,e){n.asyncQueue.verifyOperationInProgress();const t=await ZC(n);ye("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>nx(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,o)=>nx(e.remoteStore,o)),n._onlineComponents=e}async function ZC(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ye("FirestoreClient","Using user provided OfflineComponentProvider");try{await Jf(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===ie.FAILED_PRECONDITION||o.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;va("Error using user provided cache. Falling back to memory cache: "+t),await Jf(n,new Th)}}else ye("FirestoreClient","Using default OfflineComponentProvider"),await Jf(n,new Th);return n._offlineComponents}async function WE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ye("FirestoreClient","Using user provided OnlineComponentProvider"),await lx(n,n._uninitializedComponentsProvider._online)):(ye("FirestoreClient","Using default OnlineComponentProvider"),await lx(n,new zp))),n._onlineComponents}function eR(n){return WE(n).then(e=>e.syncEngine)}async function tR(n){const e=await WE(n),t=e.eventManager;return t.onListen=MC.bind(null,e.syncEngine),t.onUnlisten=BC.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=UC.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=zC.bind(null,e.syncEngine),t}function nR(n,e,t={}){const r=new ri;return n.asyncQueue.enqueueAndForget(async()=>function(a,c,d,p,m){const v=new XC({next:E=>{v.Za(),c.enqueueAndForget(()=>AC(a,w));const b=E.docs.has(d);!b&&E.fromCache?m.reject(new be(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&E.fromCache&&p&&p.source==="server"?m.reject(new be(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(E)},error:E=>m.reject(E)}),w=new jC(Am(d.path),v,{includeMetadataChanges:!0,_a:!0});return PC(a,w)}(await tR(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(n,e,t){if(!t)throw new be(ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function sR(n,e,t,r){if(e===!0&&r===!0)throw new be(ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ux(n){if(!Se.isDocumentKey(n))throw new be(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Hm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ae()}function sc(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new be(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Hm(n);throw new be(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new be(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new be(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=KE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new be(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new be(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new be(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wm{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hx({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new be(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hx(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new gA;switch(r.type){case"firstParty":return new wA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new be(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=cx.get(t);r&&(ye("ComponentProvider","Removing Datastore"),cx.delete(t),r.terminate())}(this),Promise.resolve()}}function iR(n,e,t,r={}){var o;const a=(n=sc(n,Wm))._getSettings(),c=`${e}:${t}`;if(a.host!=="firestore.googleapis.com"&&a.host!==c&&va("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:c,ssl:!1})),r.mockUserToken){let d,p;if(typeof r.mockUserToken=="string")d=r.mockUserToken,p=Jt.MOCK_USER;else{d=PI(r.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new be(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Jt(m)}n._authCredentials=new yA(new Q_(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Km(this.firestore,e,this._query)}}class qn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ic(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qn(this.firestore,e,this._key)}}class ic extends Km{constructor(e,t,r){super(e,t,Am(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qn(this.firestore,null,new Se(e))}withConverter(e){return new ic(this.firestore,e,this._path)}}function dx(n,e,...t){if(n=Rt(n),arguments.length===1&&(e=Y_.newId()),rR("doc","path",e),n instanceof Wm){const r=pt.fromString(e,...t);return ux(r),new qn(n,null,new Se(r))}{if(!(n instanceof qn||n instanceof ic))throw new be(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pt.fromString(e,...t));return ux(r),new qn(n.firestore,n instanceof ic?n.converter:null,new Se(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new CE(this,"async_queue_retry"),this.Vu=()=>{const r=Xf();r&&ye("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=Xf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Xf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new ri;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!yc(e))throw e;ye("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const o=function(c){let d=c.message||"";return c.stack&&(d=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),d}(r);throw fs("INTERNAL UNHANDLED ERROR: ",o),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const o=zm.createAndSchedule(this,e,t,r,a=>this.yu(a));return this.Tu.push(o),o}fu(){this.Eu&&Ae()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class Qm extends Wm{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new fx,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new fx(e),this._firestoreClient=void 0,await e}}}function oR(n,e){const t=typeof n=="object"?n:fm(),r=typeof n=="string"?n:"(default)",o=ao(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const a=NI("firestore");a&&iR(o,...a)}return o}function QE(n){if(n._terminated)throw new be(ie.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||aR(n),n._firestoreClient}function aR(n){var e,t,r;const o=n._freezeSettings(),a=function(d,p,m,v){return new jA(d,p,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,KE(v.experimentalLongPollingOptions),v.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new JC(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(d){const p=d?._online.build();return{_offline:d?._offline.build(p),_online:p}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ba(Gt.fromBase64String(e))}catch(t){throw new be(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ba(Gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new be(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new be(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new be(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ye(this._lat,e._lat)||Ye(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,o){if(r.length!==o.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==o[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR=/^__.*__$/;class cR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new co(e,this.data,this.fieldMask,t,this.fieldTransforms):new vc(e,this.data,t,this.fieldTransforms)}}function XE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae()}}class Zm{constructor(e,t,r,o,a,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Zm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:r,xu:!1});return o.Ou(e),o}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:r,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return bh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(XE(this.Cu)&&lR.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class uR{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Yh(e)}Qu(e,t,r,o=!1){return new Zm({Cu:e,methodName:t,qu:r,path:$t.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hR(n){const e=n._freezeSettings(),t=Yh(n._databaseId);return new uR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function dR(n,e,t,r,o,a={}){const c=n.Qu(a.merge||a.mergeFields?2:0,e,t,o);tT("Data must be an object, but it was:",c,r);const d=ZE(r,c);let p,m;if(a.merge)p=new cr(c.fieldMask),m=c.fieldTransforms;else if(a.mergeFields){const v=[];for(const w of a.mergeFields){const E=fR(e,w,t);if(!c.contains(E))throw new be(ie.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);mR(v,E)||v.push(E)}p=new cr(v),m=c.fieldTransforms.filter(w=>p.covers(w.field))}else p=null,m=c.fieldTransforms;return new cR(new zn(d),p,m)}function JE(n,e){if(eT(n=Rt(n)))return tT("Unsupported field value:",e,n),ZE(n,e);if(n instanceof YE)return function(r,o){if(!XE(o.Cu))throw o.Bu(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(o);a&&o.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,o){const a=[];let c=0;for(const d of r){let p=JE(d,o.Lu(c));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),c++}return{arrayValue:{values:a}}}(n,e)}return function(r,o){if((r=Rt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return n2(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Ct.fromDate(r);return{timestampValue:_h(o.serializer,a)}}if(r instanceof Ct){const a=new Ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_h(o.serializer,a)}}if(r instanceof Xm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ba)return{bytesValue:EE(o.serializer,r._byteString)};if(r instanceof qn){const a=o.databaseId,c=r.firestore._databaseId;if(!c.isEqual(a))throw o.Bu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Dm(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Jm)return function(c,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw d.Bu("VectorValues must only contain numeric values.");return Cm(d.serializer,p)})}}}}}}(r,o);throw o.Bu(`Unsupported field value: ${Hm(r)}`)}(n,e)}function ZE(n,e){const t={};return X_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ca(n,(r,o)=>{const a=JE(o,e.Mu(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function eT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ct||n instanceof Xm||n instanceof ba||n instanceof qn||n instanceof YE||n instanceof Jm)}function tT(n,e,t){if(!eT(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const r=Hm(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function fR(n,e,t){if((e=Rt(e))instanceof Ym)return e._internalPath;if(typeof e=="string")return nT(n,e);throw bh("Field path arguments must be of type string or ",n,!1,void 0,t)}const pR=new RegExp("[~\\*/\\[\\]]");function nT(n,e,t){if(e.search(pR)>=0)throw bh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ym(...e.split("."))._internalPath}catch{throw bh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function bh(n,e,t,r,o){const a=r&&!r.isEmpty(),c=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(a||c)&&(p+=" (found",a&&(p+=` in field ${r}`),c&&(p+=` in document ${o}`),p+=")"),new be(ie.INVALID_ARGUMENT,d+n+p)}function mR(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e,t,r,o,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new qn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new gR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(sT("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class gR extends rT{data(){return super.data()}}function sT(n,e){return typeof e=="string"?nT(n,e):e instanceof Ym?e._internalPath:e._delegate._internalPath}class yR{convertValue(e,t="none"){switch(no(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(to(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ca(e,(o,a)=>{r[o]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,o;const a=(o=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(c=>yt(c.doubleValue));return new Jm(a)}convertGeoPoint(e){return new Xm(yt(e.latitude),yt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Im(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Zl(e));default:return null}}convertTimestamp(e){const t=ai(e);return new Ct(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=pt.fromString(e);Je(kE(r));const o=new ec(r.get(1),r.get(3)),a=new Se(r.popFirst(5));return o.isEqual(t)||fs(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class iT extends rT{constructor(e,t,r,o,a,c){super(e,t,r,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new wR(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(sT("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class wR extends iT{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(n){n=sc(n,qn);const e=sc(n.firestore,Qm);return nR(QE(e),n._key).then(t=>SR(e,n,t))}class ER extends yR{constructor(e){super(),this.firestore=e}convertBytes(e){return new ba(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,t)}}function TR(n,e,t){n=sc(n,qn);const r=sc(n.firestore,Qm),o=vR(n.converter,e);return bR(r,[dR(hR(r),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,os.none())])}function bR(n,e){return function(r,o){const a=new ri;return r.asyncQueue.enqueueAndForget(async()=>$C(await eR(r),o,a)),a.promise}(QE(n),e)}function SR(n,e,t){const r=t.docs.get(e._key),o=new ER(n);return new iT(n,o,e._key,r,new xR(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Aa=o})(Pa),Dr(new hr("firestore",(r,{instanceIdentifier:o,options:a})=>{const c=r.getProvider("app").getImmediate(),d=new Qm(new vA(r.getProvider("auth-internal")),new EA(r.getProvider("app-check-internal")),function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new be(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ec(m.options.projectId,v)}(c,o),c);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d},"PUBLIC").setMultipleInstances(!0)),$n(Rv,"4.7.3",e),$n(Rv,"4.7.3","esm2017")})();var IR="firebase",NR="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$n(IR,NR,"app");const oT="@firebase/installations",eg="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT=1e4,lT=`w:${eg}`,cT="FIS_v2",kR="https://firebaseinstallations.googleapis.com/v1",PR=3600*1e3,AR="installations",CR="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ro=new oo(AR,CR,RR);function uT(n){return n instanceof pr&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT({projectId:n}){return`${kR}/projects/${n}/installations`}function dT(n){return{token:n.token,requestStatus:2,expiresIn:DR(n.expiresIn),creationTime:Date.now()}}async function fT(n,e){const r=(await e.json()).error;return ro.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function pT({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function jR(n,{refreshToken:e}){const t=pT(n);return t.append("Authorization",VR(e)),t}async function mT(n){const e=await n();return e.status>=500&&e.status<600?n():e}function DR(n){return Number(n.replace("s","000"))}function VR(n){return`${cT} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LR({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=hT(n),o=pT(n),a=e.getImmediate({optional:!0});if(a){const m=await a.getHeartbeatsHeader();m&&o.append("x-firebase-client",m)}const c={fid:t,authVersion:cT,appId:n.appId,sdkVersion:lT},d={method:"POST",headers:o,body:JSON.stringify(c)},p=await mT(()=>fetch(r,d));if(p.ok){const m=await p.json();return{fid:m.fid||t,registrationStatus:2,refreshToken:m.refreshToken,authToken:dT(m.authToken)}}else throw await fT("Create Installation",p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=/^[cdef][\w-]{21}$/,$p="";function UR(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=FR(n);return MR.test(t)?t:$p}catch{return $p}}function FR(n){return OR(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT=new Map;function vT(n,e){const t=Zh(n);xT(t,e),BR(t,e)}function xT(n,e){const t=yT.get(n);if(t)for(const r of t)r(e)}function BR(n,e){const t=zR();t&&t.postMessage({key:n,fid:e}),$R()}let Wi=null;function zR(){return!Wi&&"BroadcastChannel"in self&&(Wi=new BroadcastChannel("[Firebase] FID Change"),Wi.onmessage=n=>{xT(n.data.key,n.data.fid)}),Wi}function $R(){yT.size===0&&Wi&&(Wi.close(),Wi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR="firebase-installations-database",GR=1,so="firebase-installations-store";let Zf=null;function tg(){return Zf||(Zf=r_(qR,GR,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(so)}}})),Zf}async function Sh(n,e){const t=Zh(n),o=(await tg()).transaction(so,"readwrite"),a=o.objectStore(so),c=await a.get(t);return await a.put(e,t),await o.done,(!c||c.fid!==e.fid)&&vT(n,e.fid),e}async function wT(n){const e=Zh(n),r=(await tg()).transaction(so,"readwrite");await r.objectStore(so).delete(e),await r.done}async function ed(n,e){const t=Zh(n),o=(await tg()).transaction(so,"readwrite"),a=o.objectStore(so),c=await a.get(t),d=e(c);return d===void 0?await a.delete(t):await a.put(d,t),await o.done,d&&(!c||c.fid!==d.fid)&&vT(n,d.fid),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ng(n){let e;const t=await ed(n.appConfig,r=>{const o=HR(r),a=WR(n,o);return e=a.registrationPromise,a.installationEntry});return t.fid===$p?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function HR(n){const e=n||{fid:UR(),registrationStatus:0};return _T(e)}function WR(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(ro.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=KR(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:QR(n)}:{installationEntry:e}}async function KR(n,e){try{const t=await LR(n,e);return Sh(n.appConfig,t)}catch(t){throw uT(t)&&t.customData.serverCode===409?await wT(n.appConfig):await Sh(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function QR(n){let e=await px(n.appConfig);for(;e.registrationStatus===1;)await gT(100),e=await px(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await ng(n);return r||t}return e}function px(n){return ed(n,e=>{if(!e)throw ro.create("installation-not-found");return _T(e)})}function _T(n){return YR(n)?{fid:n.fid,registrationStatus:0}:n}function YR(n){return n.registrationStatus===1&&n.registrationTime+aT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XR({appConfig:n,heartbeatServiceProvider:e},t){const r=JR(n,t),o=jR(n,t),a=e.getImmediate({optional:!0});if(a){const m=await a.getHeartbeatsHeader();m&&o.append("x-firebase-client",m)}const c={installation:{sdkVersion:lT,appId:n.appId}},d={method:"POST",headers:o,body:JSON.stringify(c)},p=await mT(()=>fetch(r,d));if(p.ok){const m=await p.json();return dT(m)}else throw await fT("Generate Auth Token",p)}function JR(n,{fid:e}){return`${hT(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rg(n,e=!1){let t;const r=await ed(n.appConfig,a=>{if(!ET(a))throw ro.create("not-registered");const c=a.authToken;if(!e&&tj(c))return a;if(c.requestStatus===1)return t=ZR(n,e),a;{if(!navigator.onLine)throw ro.create("app-offline");const d=rj(a);return t=ej(n,d),d}});return t?await t:r.authToken}async function ZR(n,e){let t=await mx(n.appConfig);for(;t.authToken.requestStatus===1;)await gT(100),t=await mx(n.appConfig);const r=t.authToken;return r.requestStatus===0?rg(n,e):r}function mx(n){return ed(n,e=>{if(!ET(e))throw ro.create("not-registered");const t=e.authToken;return sj(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function ej(n,e){try{const t=await XR(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await Sh(n.appConfig,r),t}catch(t){if(uT(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await wT(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Sh(n.appConfig,r)}throw t}}function ET(n){return n!==void 0&&n.registrationStatus===2}function tj(n){return n.requestStatus===2&&!nj(n)}function nj(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+PR}function rj(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function sj(n){return n.requestStatus===1&&n.requestTime+aT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ij(n){const e=n,{installationEntry:t,registrationPromise:r}=await ng(e);return r?r.catch(console.error):rg(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oj(n,e=!1){const t=n;return await aj(t),(await rg(t,e)).token}async function aj(n){const{registrationPromise:e}=await ng(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lj(n){if(!n||!n.options)throw ep("App Configuration");if(!n.name)throw ep("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw ep(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function ep(n){return ro.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="installations",cj="installations-internal",uj=n=>{const e=n.getProvider("app").getImmediate(),t=lj(e),r=ao(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},hj=n=>{const e=n.getProvider("app").getImmediate(),t=ao(e,TT).getImmediate();return{getId:()=>ij(t),getToken:o=>oj(t,o)}};function dj(){Dr(new hr(TT,uj,"PUBLIC")),Dr(new hr(cj,hj,"PRIVATE"))}dj();$n(oT,eg);$n(oT,eg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih="analytics",fj="firebase_id",pj="origin",mj=60*1e3,gj="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",sg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mn=new Uh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},In=new oo("analytics","Analytics",yj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vj(n){if(!n.startsWith(sg)){const e=In.create("invalid-gtag-resource",{gtagURL:n});return mn.warn(e.message),""}return n}function bT(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function xj(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function wj(n,e){const t=xj("firebase-js-sdk-policy",{createScriptURL:vj}),r=document.createElement("script"),o=`${sg}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(o):o,r.async=!0,document.head.appendChild(r)}function _j(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function Ej(n,e,t,r,o,a){const c=r[o];try{if(c)await e[c];else{const p=(await bT(t)).find(m=>m.measurementId===o);p&&await e[p.appId]}}catch(d){mn.error(d)}n("config",o,a)}async function Tj(n,e,t,r,o){try{let a=[];if(o&&o.send_to){let c=o.send_to;Array.isArray(c)||(c=[c]);const d=await bT(t);for(const p of c){const m=d.find(w=>w.measurementId===p),v=m&&e[m.appId];if(v)a.push(v);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),n("event",r,o||{})}catch(a){mn.error(a)}}function bj(n,e,t,r){async function o(a,...c){try{if(a==="event"){const[d,p]=c;await Tj(n,e,t,d,p)}else if(a==="config"){const[d,p]=c;await Ej(n,e,t,r,d,p)}else if(a==="consent"){const[d,p]=c;n("consent",d,p)}else if(a==="get"){const[d,p,m]=c;n("get",d,p,m)}else if(a==="set"){const[d]=c;n("set",d)}else n(a,...c)}catch(d){mn.error(d)}}return o}function Sj(n,e,t,r,o){let a=function(...c){window[r].push(arguments)};return window[o]&&typeof window[o]=="function"&&(a=window[o]),window[o]=bj(a,n,e,t),{gtagCore:a,wrappedGtag:window[o]}}function Ij(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(sg)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nj=30,kj=1e3;class Pj{constructor(e={},t=kj){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const ST=new Pj;function Aj(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function Cj(n){var e;const{appId:t,apiKey:r}=n,o={method:"GET",headers:Aj(r)},a=gj.replace("{app-id}",t),c=await fetch(a,o);if(c.status!==200&&c.status!==304){let d="";try{const p=await c.json();!((e=p.error)===null||e===void 0)&&e.message&&(d=p.error.message)}catch{}throw In.create("config-fetch-failed",{httpStatus:c.status,responseMessage:d})}return c.json()}async function Rj(n,e=ST,t){const{appId:r,apiKey:o,measurementId:a}=n.options;if(!r)throw In.create("no-app-id");if(!o){if(a)return{measurementId:a,appId:r};throw In.create("no-api-key")}const c=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new Vj;return setTimeout(async()=>{d.abort()},mj),IT({appId:r,apiKey:o,measurementId:a},c,d,e)}async function IT(n,{throttleEndTimeMillis:e,backoffCount:t},r,o=ST){var a;const{appId:c,measurementId:d}=n;try{await jj(r,e)}catch(p){if(d)return mn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:c,measurementId:d};throw p}try{const p=await Cj(n);return o.deleteThrottleMetadata(c),p}catch(p){const m=p;if(!Dj(m)){if(o.deleteThrottleMetadata(c),d)return mn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:c,measurementId:d};throw p}const v=Number((a=m?.customData)===null||a===void 0?void 0:a.httpStatus)===503?nv(t,o.intervalMillis,Nj):nv(t,o.intervalMillis),w={throttleEndTimeMillis:Date.now()+v,backoffCount:t+1};return o.setThrottleMetadata(c,w),mn.debug(`Calling attemptFetch again in ${v} millis`),IT(n,w,r,o)}}function jj(n,e){return new Promise((t,r)=>{const o=Math.max(e-Date.now(),0),a=setTimeout(t,o);n.addEventListener(()=>{clearTimeout(a),r(In.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Dj(n){if(!(n instanceof pr)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class Vj{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Lj(n,e,t,r,o){if(o&&o.global){n("event",t,r);return}else{const a=await e,c=Object.assign(Object.assign({},r),{send_to:a});n("event",t,c)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oj(){if(Zw())try{await e_()}catch(n){return mn.warn(In.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return mn.warn(In.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Mj(n,e,t,r,o,a,c){var d;const p=Rj(n);p.then(b=>{t[b.measurementId]=b.appId,n.options.measurementId&&b.measurementId!==n.options.measurementId&&mn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${b.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(b=>mn.error(b)),e.push(p);const m=Oj().then(b=>{if(b)return r.getId()}),[v,w]=await Promise.all([p,m]);Ij(a)||wj(a,v.measurementId),o("js",new Date);const E=(d=c?.config)!==null&&d!==void 0?d:{};return E[pj]="firebase",E.update=!0,w!=null&&(E[fj]=w),o("config",v.measurementId,E),v.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e){this.app=e}_delete(){return delete zl[this.app.options.appId],Promise.resolve()}}let zl={},gx=[];const yx={};let tp="dataLayer",Fj="gtag",vx,NT,xx=!1;function Bj(){const n=[];if(Jw()&&n.push("This is a browser extension environment."),LI()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,o)=>`(${o+1}) ${r}`).join(" "),t=In.create("invalid-analytics-context",{errorInfo:e});mn.warn(t.message)}}function zj(n,e,t){Bj();const r=n.options.appId;if(!r)throw In.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)mn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw In.create("no-api-key");if(zl[r]!=null)throw In.create("already-exists",{id:r});if(!xx){_j(tp);const{wrappedGtag:a,gtagCore:c}=Sj(zl,gx,yx,tp,Fj);NT=a,vx=c,xx=!0}return zl[r]=Mj(n,gx,yx,e,vx,tp,t),new Uj(n)}function $j(n=fm()){n=Rt(n);const e=ao(n,Ih);return e.isInitialized()?e.getImmediate():qj(n)}function qj(n,e={}){const t=ao(n,Ih);if(t.isInitialized()){const o=t.getImmediate();if(Ql(e,t.getOptions()))return o;throw In.create("already-initialized")}return t.initialize({options:e})}function Gj(n,e,t,r){n=Rt(n),Lj(NT,zl[n.app.options.appId],e,t,r).catch(o=>mn.error(o))}const wx="@firebase/analytics",_x="0.10.8";function Hj(){Dr(new hr(Ih,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return zj(r,o,t)},"PUBLIC")),Dr(new hr("analytics-internal",n,"PRIVATE")),$n(wx,_x),$n(wx,_x,"esm2017");function n(e){try{const t=e.getProvider(Ih).getImmediate();return{logEvent:(r,o,a)=>Gj(t,r,o,a)}}catch(t){throw In.create("interop-component-reg-failed",{reason:t})}}}Hj();const Wj={apiKey:"AIzaSyDSplfIeCdHaXnAgH1WnmaY78uINeUHHeA",authDomain:"glyphmart.firebaseapp.com",projectId:"glyphmart",storageBucket:"glyphmart.firebasestorage.app",messagingSenderId:"582834377960",appId:"1:582834377960:web:2f844d65c9c0f92f93255d",measurementId:"G-1RC8D5PY66"},ig=s_(Wj),aa=pA(ig),Ex=oR(ig);$j(ig);const kT=P.createContext(),Gn=()=>{const n=P.useContext(kT);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},Kj=({children:n})=>{const[e,t]=P.useState(null),[r,o]=P.useState(!0),[a,c]=P.useState(null),d=async(E,b,L,V)=>{const D=(await Qk(aa,E,b)).user;return await Np(D,{displayName:V}),await TR(dx(Ex,"users",D.uid),{uid:D.uid,email:E,username:L,displayName:V,createdAt:new Date,glyphsCount:0,bio:"",website:"",location:""}),D},p=(E,b)=>Yk(aa,E,b),m=()=>rP(aa),v=async E=>{try{const b=await _R(dx(Ex,"users",E));b.exists()&&c(b.data())}catch(b){console.error("Error fetching user profile:",b)}};P.useEffect(()=>nP(aa,b=>{t(b),b?v(b.uid):c(null),o(!1)}),[]);const w={currentUser:e,userProfile:a,signup:d,signin:p,logout:m,fetchUserProfile:v};return u.jsx(kT.Provider,{value:w,children:!r&&n})};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Qj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ke=(n,e)=>{const t=P.forwardRef(({color:r="currentColor",size:o=24,strokeWidth:a=2,absoluteStrokeWidth:c,className:d="",children:p,...m},v)=>P.createElement("svg",{ref:v,...Qj,width:o,height:o,stroke:r,strokeWidth:c?Number(a)*24/Number(o):a,className:["lucide",`lucide-${Yj(n)}`,d].join(" "),...m},[...e.map(([w,E])=>P.createElement(w,E)),...Array.isArray(p)?p:[p]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qp=ke("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=ke("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=ke("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=ke("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=ke("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const og=ke("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=ke("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gp=ke("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=ke("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=ke("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=ke("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=ke("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=ke("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=ke("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ih=ke("FileImage",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["circle",{cx:"10",cy:"13",r:"2",key:"6v46hv"}],["path",{d:"m20 17-1.09-1.09a2 2 0 0 0-2.82 0L10 22",key:"17vly1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PT=ke("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=ke("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AT=ke("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=ke("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=ke("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hp=ke("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=ke("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=ke("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bx=ke("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=ke("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=ke("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=ke("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=ke("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=ke("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=ke("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CT=ke("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=ke("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=ke("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=ke("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wp=ke("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=ke("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=ke("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=ke("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RT=ke("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=ke("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jT=ke("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nh=ke("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=ke("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=ke("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=ke("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=ke("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DT=ke("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=ke("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),VT=P.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),td=P.createContext({}),nd=P.createContext(null),rd=typeof document<"u",lg=rd?P.useLayoutEffect:P.useEffect,LT=P.createContext({strict:!1}),cg=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),p4="framerAppearId",OT="data-"+cg(p4);function m4(n,e,t,r){const{visualElement:o}=P.useContext(td),a=P.useContext(LT),c=P.useContext(nd),d=P.useContext(VT).reducedMotion,p=P.useRef();r=r||a.renderer,!p.current&&r&&(p.current=r(n,{visualState:e,parent:o,props:t,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const m=p.current;P.useInsertionEffect(()=>{m&&m.update(t,c)});const v=P.useRef(!!(t[OT]&&!window.HandoffComplete));return lg(()=>{m&&(m.render(),v.current&&m.animationState&&m.animationState.animateChanges())}),P.useEffect(()=>{m&&(m.updateFeatures(),!v.current&&m.animationState&&m.animationState.animateChanges(),v.current&&(v.current=!1,window.HandoffComplete=!0))}),m}function ca(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function g4(n,e,t){return P.useCallback(r=>{r&&n.mount&&n.mount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):ca(t)&&(t.current=r))},[e])}function ac(n){return typeof n=="string"||Array.isArray(n)}function sd(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const ug=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],hg=["initial",...ug];function id(n){return sd(n.animate)||hg.some(e=>ac(n[e]))}function MT(n){return!!(id(n)||n.variants)}function y4(n,e){if(id(n)){const{initial:t,animate:r}=n;return{initial:t===!1||ac(t)?t:void 0,animate:ac(r)?r:void 0}}return n.inherit!==!1?e:{}}function v4(n){const{initial:e,animate:t}=y4(n,P.useContext(td));return P.useMemo(()=>({initial:e,animate:t}),[Px(e),Px(t)])}function Px(n){return Array.isArray(n)?n.join(" "):n}const Ax={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},lc={};for(const n in Ax)lc[n]={isEnabled:e=>Ax[n].some(t=>!!e[t])};function x4(n){for(const e in n)lc[e]={...lc[e],...n[e]}}const dg=P.createContext({}),UT=P.createContext({}),w4=Symbol.for("motionComponentSymbol");function _4({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:o}){n&&x4(n);function a(d,p){let m;const v={...P.useContext(VT),...d,layoutId:E4(d)},{isStatic:w}=v,E=v4(d),b=r(d,w);if(!w&&rd){E.visualElement=m4(o,b,v,e);const L=P.useContext(UT),V=P.useContext(LT).strict;E.visualElement&&(m=E.visualElement.loadFeatures(v,V,n,L))}return P.createElement(td.Provider,{value:E},m&&E.visualElement?P.createElement(m,{visualElement:E.visualElement,...v}):null,t(o,d,g4(b,E.visualElement,p),b,w,E.visualElement))}const c=P.forwardRef(a);return c[w4]=o,c}function E4({layoutId:n}){const e=P.useContext(dg).id;return e&&n!==void 0?e+"-"+n:n}function T4(n){function e(r,o={}){return _4(n(r,o))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(r,o)=>(t.has(o)||t.set(o,e(o)),t.get(o))})}const b4=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function fg(n){return typeof n!="string"||n.includes("-")?!1:!!(b4.indexOf(n)>-1||/[A-Z]/.test(n))}const kh={};function S4(n){Object.assign(kh,n)}const Ec=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ho=new Set(Ec);function FT(n,{layout:e,layoutId:t}){return ho.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!kh[n]||n==="opacity")}const yn=n=>!!(n&&n.getVelocity),I4={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},N4=Ec.length;function k4(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},r,o){let a="";for(let c=0;c<N4;c++){const d=Ec[c];if(n[d]!==void 0){const p=I4[d]||d;a+=`${p}(${n[d]}) `}}return e&&!n.z&&(a+="translateZ(0)"),a=a.trim(),o?a=o(n,r?"":a):t&&r&&(a="none"),a}const BT=n=>e=>typeof e=="string"&&e.startsWith(n),zT=BT("--"),Kp=BT("var(--"),P4=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,A4=(n,e)=>e&&typeof n=="number"?e.transform(n):n,ci=(n,e,t)=>Math.min(Math.max(t,n),e),fo={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},$l={...fo,transform:n=>ci(0,1,n)},Hu={...fo,default:1},ql=n=>Math.round(n*1e5)/1e5,od=/(-)?([\d]*\.?[\d])+/g,$T=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,C4=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Tc(n){return typeof n=="string"}const bc=n=>({test:e=>Tc(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Gs=bc("deg"),jr=bc("%"),Ie=bc("px"),R4=bc("vh"),j4=bc("vw"),Cx={...jr,parse:n=>jr.parse(n)/100,transform:n=>jr.transform(n*100)},Rx={...fo,transform:Math.round},qT={borderWidth:Ie,borderTopWidth:Ie,borderRightWidth:Ie,borderBottomWidth:Ie,borderLeftWidth:Ie,borderRadius:Ie,radius:Ie,borderTopLeftRadius:Ie,borderTopRightRadius:Ie,borderBottomRightRadius:Ie,borderBottomLeftRadius:Ie,width:Ie,maxWidth:Ie,height:Ie,maxHeight:Ie,size:Ie,top:Ie,right:Ie,bottom:Ie,left:Ie,padding:Ie,paddingTop:Ie,paddingRight:Ie,paddingBottom:Ie,paddingLeft:Ie,margin:Ie,marginTop:Ie,marginRight:Ie,marginBottom:Ie,marginLeft:Ie,rotate:Gs,rotateX:Gs,rotateY:Gs,rotateZ:Gs,scale:Hu,scaleX:Hu,scaleY:Hu,scaleZ:Hu,skew:Gs,skewX:Gs,skewY:Gs,distance:Ie,translateX:Ie,translateY:Ie,translateZ:Ie,x:Ie,y:Ie,z:Ie,perspective:Ie,transformPerspective:Ie,opacity:$l,originX:Cx,originY:Cx,originZ:Ie,zIndex:Rx,fillOpacity:$l,strokeOpacity:$l,numOctaves:Rx};function pg(n,e,t,r){const{style:o,vars:a,transform:c,transformOrigin:d}=n;let p=!1,m=!1,v=!0;for(const w in e){const E=e[w];if(zT(w)){a[w]=E;continue}const b=qT[w],L=A4(E,b);if(ho.has(w)){if(p=!0,c[w]=L,!v)continue;E!==(b.default||0)&&(v=!1)}else w.startsWith("origin")?(m=!0,d[w]=L):o[w]=L}if(e.transform||(p||r?o.transform=k4(n.transform,t,v,r):o.transform&&(o.transform="none")),m){const{originX:w="50%",originY:E="50%",originZ:b=0}=d;o.transformOrigin=`${w} ${E} ${b}`}}const mg=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function GT(n,e,t){for(const r in e)!yn(e[r])&&!FT(r,t)&&(n[r]=e[r])}function D4({transformTemplate:n},e,t){return P.useMemo(()=>{const r=mg();return pg(r,e,{enableHardwareAcceleration:!t},n),Object.assign({},r.vars,r.style)},[e])}function V4(n,e,t){const r=n.style||{},o={};return GT(o,r,n),Object.assign(o,D4(n,e,t)),n.transformValues?n.transformValues(o):o}function L4(n,e,t){const r={},o=V4(n,e,t);return n.drag&&n.dragListener!==!1&&(r.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(r.tabIndex=0),r.style=o,r}const O4=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ph(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||O4.has(n)}let HT=n=>!Ph(n);function M4(n){n&&(HT=e=>e.startsWith("on")?!Ph(e):n(e))}try{M4(require("@emotion/is-prop-valid").default)}catch{}function U4(n,e,t){const r={};for(const o in n)o==="values"&&typeof n.values=="object"||(HT(o)||t===!0&&Ph(o)||!e&&!Ph(o)||n.draggable&&o.startsWith("onDrag"))&&(r[o]=n[o]);return r}function jx(n,e,t){return typeof n=="string"?n:Ie.transform(e+t*n)}function F4(n,e,t){const r=jx(e,n.x,n.width),o=jx(t,n.y,n.height);return`${r} ${o}`}const B4={offset:"stroke-dashoffset",array:"stroke-dasharray"},z4={offset:"strokeDashoffset",array:"strokeDasharray"};function $4(n,e,t=1,r=0,o=!0){n.pathLength=1;const a=o?B4:z4;n[a.offset]=Ie.transform(-r);const c=Ie.transform(e),d=Ie.transform(t);n[a.array]=`${c} ${d}`}function gg(n,{attrX:e,attrY:t,attrScale:r,originX:o,originY:a,pathLength:c,pathSpacing:d=1,pathOffset:p=0,...m},v,w,E){if(pg(n,m,v,E),w){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:b,style:L,dimensions:V}=n;b.transform&&(V&&(L.transform=b.transform),delete b.transform),V&&(o!==void 0||a!==void 0||L.transform)&&(L.transformOrigin=F4(V,o!==void 0?o:.5,a!==void 0?a:.5)),e!==void 0&&(b.x=e),t!==void 0&&(b.y=t),r!==void 0&&(b.scale=r),c!==void 0&&$4(b,c,d,p,!1)}const WT=()=>({...mg(),attrs:{}}),yg=n=>typeof n=="string"&&n.toLowerCase()==="svg";function q4(n,e,t,r){const o=P.useMemo(()=>{const a=WT();return gg(a,e,{enableHardwareAcceleration:!1},yg(r),n.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(n.style){const a={};GT(a,n.style,n),o.style={...a,...o.style}}return o}function G4(n=!1){return(t,r,o,{latestValues:a},c)=>{const p=(fg(t)?q4:L4)(r,a,c,t),v={...U4(r,typeof t=="string",n),...p,ref:o},{children:w}=r,E=P.useMemo(()=>yn(w)?w.get():w,[w]);return P.createElement(t,{...v,children:E})}}function KT(n,{style:e,vars:t},r,o){Object.assign(n.style,e,o&&o.getProjectionStyles(r));for(const a in t)n.style.setProperty(a,t[a])}const QT=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function YT(n,e,t,r){KT(n,e,void 0,r);for(const o in e.attrs)n.setAttribute(QT.has(o)?o:cg(o),e.attrs[o])}function vg(n,e){const{style:t}=n,r={};for(const o in t)(yn(t[o])||e.style&&yn(e.style[o])||FT(o,n))&&(r[o]=t[o]);return r}function XT(n,e){const t=vg(n,e);for(const r in n)if(yn(n[r])||yn(e[r])){const o=Ec.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;t[o]=n[r]}return t}function xg(n,e,t,r={},o={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,o)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,o)),e}function JT(n){const e=P.useRef(null);return e.current===null&&(e.current=n()),e.current}const Ah=n=>Array.isArray(n),H4=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),W4=n=>Ah(n)?n[n.length-1]||0:n;function oh(n){const e=yn(n)?n.get():n;return H4(e)?e.toValue():e}function K4({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},r,o,a){const c={latestValues:Q4(r,o,a,n),renderState:e()};return t&&(c.mount=d=>t(r,d,c)),c}const ZT=n=>(e,t)=>{const r=P.useContext(td),o=P.useContext(nd),a=()=>K4(n,e,r,o);return t?a():JT(a)};function Q4(n,e,t,r){const o={},a=r(n,{});for(const E in a)o[E]=oh(a[E]);let{initial:c,animate:d}=n;const p=id(n),m=MT(n);e&&m&&!p&&n.inherit!==!1&&(c===void 0&&(c=e.initial),d===void 0&&(d=e.animate));let v=t?t.initial===!1:!1;v=v||c===!1;const w=v?d:c;return w&&typeof w!="boolean"&&!sd(w)&&(Array.isArray(w)?w:[w]).forEach(b=>{const L=xg(n,b);if(!L)return;const{transitionEnd:V,transition:k,...D}=L;for(const M in D){let j=D[M];if(Array.isArray(j)){const W=v?j.length-1:0;j=j[W]}j!==null&&(o[M]=j)}for(const M in V)o[M]=V[M]}),o}const vt=n=>n;class Dx{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function Y4(n){let e=new Dx,t=new Dx,r=0,o=!1,a=!1;const c=new WeakSet,d={schedule:(p,m=!1,v=!1)=>{const w=v&&o,E=w?e:t;return m&&c.add(p),E.add(p)&&w&&o&&(r=e.order.length),p},cancel:p=>{t.remove(p),c.delete(p)},process:p=>{if(o){a=!0;return}if(o=!0,[e,t]=[t,e],t.clear(),r=e.order.length,r)for(let m=0;m<r;m++){const v=e.order[m];v(p),c.has(v)&&(d.schedule(v),n())}o=!1,a&&(a=!1,d.process(p))}};return d}const Wu=["prepare","read","update","preRender","render","postRender"],X4=40;function J4(n,e){let t=!1,r=!0;const o={delta:0,timestamp:0,isProcessing:!1},a=Wu.reduce((w,E)=>(w[E]=Y4(()=>t=!0),w),{}),c=w=>a[w].process(o),d=()=>{const w=performance.now();t=!1,o.delta=r?1e3/60:Math.max(Math.min(w-o.timestamp,X4),1),o.timestamp=w,o.isProcessing=!0,Wu.forEach(c),o.isProcessing=!1,t&&e&&(r=!1,n(d))},p=()=>{t=!0,r=!0,o.isProcessing||n(d)};return{schedule:Wu.reduce((w,E)=>{const b=a[E];return w[E]=(L,V=!1,k=!1)=>(t||p(),b.schedule(L,V,k)),w},{}),cancel:w=>Wu.forEach(E=>a[E].cancel(w)),state:o,steps:a}}const{schedule:nt,cancel:gs,state:Xt,steps:np}=J4(typeof requestAnimationFrame<"u"?requestAnimationFrame:vt,!0),Z4={useVisualState:ZT({scrapeMotionValuesFromProps:XT,createRenderState:WT,onMount:(n,e,{renderState:t,latestValues:r})=>{nt.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),nt.render(()=>{gg(t,r,{enableHardwareAcceleration:!1},yg(e.tagName),n.transformTemplate),YT(e,t)})}})},eD={useVisualState:ZT({scrapeMotionValuesFromProps:vg,createRenderState:mg})};function tD(n,{forwardMotionProps:e=!1},t,r){return{...fg(n)?Z4:eD,preloadedFeatures:t,useRender:G4(e),createVisualElement:r,Component:n}}function is(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const e1=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function ad(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const nD=n=>e=>e1(e)&&n(e,ad(e));function cs(n,e,t,r){return is(n,e,nD(t),r)}const rD=(n,e)=>t=>e(n(t)),si=(...n)=>n.reduce(rD);function t1(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const Vx=t1("dragHorizontal"),Lx=t1("dragVertical");function n1(n){let e=!1;if(n==="y")e=Lx();else if(n==="x")e=Vx();else{const t=Vx(),r=Lx();t&&r?e=()=>{t(),r()}:(t&&t(),r&&r())}return e}function r1(){const n=n1(!0);return n?(n(),!1):!0}class fi{constructor(e){this.isMounted=!1,this.node=e}update(){}}function Ox(n,e){const t="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),o=(a,c)=>{if(a.pointerType==="touch"||r1())return;const d=n.getProps();n.animationState&&d.whileHover&&n.animationState.setActive("whileHover",e),d[r]&&nt.update(()=>d[r](a,c))};return cs(n.current,t,o,{passive:!n.getProps()[r]})}class sD extends fi{mount(){this.unmount=si(Ox(this.node,!0),Ox(this.node,!1))}unmount(){}}class iD extends fi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=si(is(this.node.current,"focus",()=>this.onFocus()),is(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const s1=(n,e)=>e?n===e?!0:s1(n,e.parentElement):!1;function rp(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,ad(t))}class oD extends fi{constructor(){super(...arguments),this.removeStartListeners=vt,this.removeEndListeners=vt,this.removeAccessibleListeners=vt,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),a=cs(window,"pointerup",(d,p)=>{if(!this.checkPressEnd())return;const{onTap:m,onTapCancel:v,globalTapTarget:w}=this.node.getProps();nt.update(()=>{!w&&!s1(this.node.current,d.target)?v&&v(d,p):m&&m(d,p)})},{passive:!(r.onTap||r.onPointerUp)}),c=cs(window,"pointercancel",(d,p)=>this.cancelPress(d,p),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=si(a,c),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=a=>{if(a.key!=="Enter"||this.isPressing)return;const c=d=>{d.key!=="Enter"||!this.checkPressEnd()||rp("up",(p,m)=>{const{onTap:v}=this.node.getProps();v&&nt.update(()=>v(p,m))})};this.removeEndListeners(),this.removeEndListeners=is(this.node.current,"keyup",c),rp("down",(d,p)=>{this.startPress(d,p)})},t=is(this.node.current,"keydown",e),r=()=>{this.isPressing&&rp("cancel",(a,c)=>this.cancelPress(a,c))},o=is(this.node.current,"blur",r);this.removeAccessibleListeners=si(t,o)}}startPress(e,t){this.isPressing=!0;const{onTapStart:r,whileTap:o}=this.node.getProps();o&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&nt.update(()=>r(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!r1()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&nt.update(()=>r(e,t))}mount(){const e=this.node.getProps(),t=cs(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=is(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=si(t,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Qp=new WeakMap,sp=new WeakMap,aD=n=>{const e=Qp.get(n.target);e&&e(n)},lD=n=>{n.forEach(aD)};function cD({root:n,...e}){const t=n||document;sp.has(t)||sp.set(t,{});const r=sp.get(t),o=JSON.stringify(e);return r[o]||(r[o]=new IntersectionObserver(lD,{root:n,...e})),r[o]}function uD(n,e,t){const r=cD(e);return Qp.set(n,t),r.observe(n),()=>{Qp.delete(n),r.unobserve(n)}}const hD={some:0,all:1};class dD extends fi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:o="some",once:a}=e,c={root:t?t.current:void 0,rootMargin:r,threshold:typeof o=="number"?o:hD[o]},d=p=>{const{isIntersecting:m}=p;if(this.isInView===m||(this.isInView=m,a&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:v,onViewportLeave:w}=this.node.getProps(),E=m?v:w;E&&E(p)};return uD(this.node.current,c,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(fD(e,t))&&this.startObserver()}unmount(){}}function fD({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const pD={inView:{Feature:dD},tap:{Feature:oD},focus:{Feature:iD},hover:{Feature:sD}};function i1(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function mD(n){const e={};return n.values.forEach((t,r)=>e[r]=t.get()),e}function gD(n){const e={};return n.values.forEach((t,r)=>e[r]=t.getVelocity()),e}function ld(n,e,t){const r=n.getProps();return xg(r,e,t!==void 0?t:r.custom,mD(n),gD(n))}let wg=vt;const Yi=n=>n*1e3,us=n=>n/1e3,yD={current:!1},o1=n=>Array.isArray(n)&&typeof n[0]=="number";function a1(n){return!!(!n||typeof n=="string"&&l1[n]||o1(n)||Array.isArray(n)&&n.every(a1))}const Ll=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,l1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ll([0,.65,.55,1]),circOut:Ll([.55,0,1,.45]),backIn:Ll([.31,.01,.66,-.59]),backOut:Ll([.33,1.53,.69,.99])};function c1(n){if(n)return o1(n)?Ll(n):Array.isArray(n)?n.map(c1):l1[n]}function vD(n,e,t,{delay:r=0,duration:o,repeat:a=0,repeatType:c="loop",ease:d,times:p}={}){const m={[e]:t};p&&(m.offset=p);const v=c1(d);return Array.isArray(v)&&(m.easing=v),n.animate(m,{delay:r,duration:o,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:a+1,direction:c==="reverse"?"alternate":"normal"})}function xD(n,{repeat:e,repeatType:t="loop"}){const r=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[r]}const u1=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,wD=1e-7,_D=12;function ED(n,e,t,r,o){let a,c,d=0;do c=e+(t-e)/2,a=u1(c,r,o)-n,a>0?t=c:e=c;while(Math.abs(a)>wD&&++d<_D);return c}function Sc(n,e,t,r){if(n===e&&t===r)return vt;const o=a=>ED(a,0,1,n,t);return a=>a===0||a===1?a:u1(o(a),e,r)}const TD=Sc(.42,0,1,1),bD=Sc(0,0,.58,1),h1=Sc(.42,0,.58,1),SD=n=>Array.isArray(n)&&typeof n[0]!="number",d1=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,f1=n=>e=>1-n(1-e),_g=n=>1-Math.sin(Math.acos(n)),p1=f1(_g),ID=d1(_g),m1=Sc(.33,1.53,.69,.99),Eg=f1(m1),ND=d1(Eg),kD=n=>(n*=2)<1?.5*Eg(n):.5*(2-Math.pow(2,-10*(n-1))),PD={linear:vt,easeIn:TD,easeInOut:h1,easeOut:bD,circIn:_g,circInOut:ID,circOut:p1,backIn:Eg,backInOut:ND,backOut:m1,anticipate:kD},Mx=n=>{if(Array.isArray(n)){wg(n.length===4);const[e,t,r,o]=n;return Sc(e,t,r,o)}else if(typeof n=="string")return PD[n];return n},Tg=(n,e)=>t=>!!(Tc(t)&&C4.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),g1=(n,e,t)=>r=>{if(!Tc(r))return r;const[o,a,c,d]=r.match(od);return{[n]:parseFloat(o),[e]:parseFloat(a),[t]:parseFloat(c),alpha:d!==void 0?parseFloat(d):1}},AD=n=>ci(0,255,n),ip={...fo,transform:n=>Math.round(AD(n))},Ki={test:Tg("rgb","red"),parse:g1("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+ip.transform(n)+", "+ip.transform(e)+", "+ip.transform(t)+", "+ql($l.transform(r))+")"};function CD(n){let e="",t="",r="",o="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),o=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),o=n.substring(4,5),e+=e,t+=t,r+=r,o+=o),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:o?parseInt(o,16)/255:1}}const Yp={test:Tg("#"),parse:CD,transform:Ki.transform},ua={test:Tg("hsl","hue"),parse:g1("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+jr.transform(ql(e))+", "+jr.transform(ql(t))+", "+ql($l.transform(r))+")"},on={test:n=>Ki.test(n)||Yp.test(n)||ua.test(n),parse:n=>Ki.test(n)?Ki.parse(n):ua.test(n)?ua.parse(n):Yp.parse(n),transform:n=>Tc(n)?n:n.hasOwnProperty("red")?Ki.transform(n):ua.transform(n)},ht=(n,e,t)=>-t*n+t*e+n;function op(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function RD({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let o=0,a=0,c=0;if(!e)o=a=c=t;else{const d=t<.5?t*(1+e):t+e-t*e,p=2*t-d;o=op(p,d,n+1/3),a=op(p,d,n),c=op(p,d,n-1/3)}return{red:Math.round(o*255),green:Math.round(a*255),blue:Math.round(c*255),alpha:r}}const ap=(n,e,t)=>{const r=n*n;return Math.sqrt(Math.max(0,t*(e*e-r)+r))},jD=[Yp,Ki,ua],DD=n=>jD.find(e=>e.test(n));function Ux(n){const e=DD(n);let t=e.parse(n);return e===ua&&(t=RD(t)),t}const y1=(n,e)=>{const t=Ux(n),r=Ux(e),o={...t};return a=>(o.red=ap(t.red,r.red,a),o.green=ap(t.green,r.green,a),o.blue=ap(t.blue,r.blue,a),o.alpha=ht(t.alpha,r.alpha,a),Ki.transform(o))};function VD(n){var e,t;return isNaN(n)&&Tc(n)&&(((e=n.match(od))===null||e===void 0?void 0:e.length)||0)+(((t=n.match($T))===null||t===void 0?void 0:t.length)||0)>0}const v1={regex:P4,countKey:"Vars",token:"${v}",parse:vt},x1={regex:$T,countKey:"Colors",token:"${c}",parse:on.parse},w1={regex:od,countKey:"Numbers",token:"${n}",parse:fo.parse};function lp(n,{regex:e,countKey:t,token:r,parse:o}){const a=n.tokenised.match(e);a&&(n["num"+t]=a.length,n.tokenised=n.tokenised.replace(e,r),n.values.push(...a.map(o)))}function Ch(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&lp(t,v1),lp(t,x1),lp(t,w1),t}function _1(n){return Ch(n).values}function E1(n){const{values:e,numColors:t,numVars:r,tokenised:o}=Ch(n),a=e.length;return c=>{let d=o;for(let p=0;p<a;p++)p<r?d=d.replace(v1.token,c[p]):p<r+t?d=d.replace(x1.token,on.transform(c[p])):d=d.replace(w1.token,ql(c[p]));return d}}const LD=n=>typeof n=="number"?0:n;function OD(n){const e=_1(n);return E1(n)(e.map(LD))}const ui={test:VD,parse:_1,createTransformer:E1,getAnimatableNone:OD},T1=(n,e)=>t=>`${t>0?e:n}`;function b1(n,e){return typeof n=="number"?t=>ht(n,e,t):on.test(n)?y1(n,e):n.startsWith("var(")?T1(n,e):I1(n,e)}const S1=(n,e)=>{const t=[...n],r=t.length,o=n.map((a,c)=>b1(a,e[c]));return a=>{for(let c=0;c<r;c++)t[c]=o[c](a);return t}},MD=(n,e)=>{const t={...n,...e},r={};for(const o in t)n[o]!==void 0&&e[o]!==void 0&&(r[o]=b1(n[o],e[o]));return o=>{for(const a in r)t[a]=r[a](o);return t}},I1=(n,e)=>{const t=ui.createTransformer(e),r=Ch(n),o=Ch(e);return r.numVars===o.numVars&&r.numColors===o.numColors&&r.numNumbers>=o.numNumbers?si(S1(r.values,o.values),t):T1(n,e)},cc=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},Fx=(n,e)=>t=>ht(n,e,t);function UD(n){return typeof n=="number"?Fx:typeof n=="string"?on.test(n)?y1:I1:Array.isArray(n)?S1:typeof n=="object"?MD:Fx}function FD(n,e,t){const r=[],o=t||UD(n[0]),a=n.length-1;for(let c=0;c<a;c++){let d=o(n[c],n[c+1]);if(e){const p=Array.isArray(e)?e[c]||vt:e;d=si(p,d)}r.push(d)}return r}function N1(n,e,{clamp:t=!0,ease:r,mixer:o}={}){const a=n.length;if(wg(a===e.length),a===1)return()=>e[0];n[0]>n[a-1]&&(n=[...n].reverse(),e=[...e].reverse());const c=FD(e,r,o),d=c.length,p=m=>{let v=0;if(d>1)for(;v<n.length-2&&!(m<n[v+1]);v++);const w=cc(n[v],n[v+1],m);return c[v](w)};return t?m=>p(ci(n[0],n[a-1],m)):p}function BD(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const o=cc(0,e,r);n.push(ht(t,1,o))}}function zD(n){const e=[0];return BD(e,n.length-1),e}function $D(n,e){return n.map(t=>t*e)}function qD(n,e){return n.map(()=>e||h1).splice(0,n.length-1)}function Rh({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const o=SD(r)?r.map(Mx):Mx(r),a={done:!1,value:e[0]},c=$D(t&&t.length===e.length?t:zD(e),n),d=N1(c,e,{ease:Array.isArray(o)?o:qD(e,o)});return{calculatedDuration:n,next:p=>(a.value=d(p),a.done=p>=n,a)}}function k1(n,e){return e?n*(1e3/e):0}const GD=5;function P1(n,e,t){const r=Math.max(e-GD,0);return k1(t-n(r),e-r)}const cp=.001,HD=.01,WD=10,KD=.05,QD=1;function YD({duration:n=800,bounce:e=.25,velocity:t=0,mass:r=1}){let o,a,c=1-e;c=ci(KD,QD,c),n=ci(HD,WD,us(n)),c<1?(o=m=>{const v=m*c,w=v*n,E=v-t,b=Xp(m,c),L=Math.exp(-w);return cp-E/b*L},a=m=>{const w=m*c*n,E=w*t+t,b=Math.pow(c,2)*Math.pow(m,2)*n,L=Math.exp(-w),V=Xp(Math.pow(m,2),c);return(-o(m)+cp>0?-1:1)*((E-b)*L)/V}):(o=m=>{const v=Math.exp(-m*n),w=(m-t)*n+1;return-cp+v*w},a=m=>{const v=Math.exp(-m*n),w=(t-m)*(n*n);return v*w});const d=5/n,p=JD(o,a,d);if(n=Yi(n),isNaN(p))return{stiffness:100,damping:10,duration:n};{const m=Math.pow(p,2)*r;return{stiffness:m,damping:c*2*Math.sqrt(r*m),duration:n}}}const XD=12;function JD(n,e,t){let r=t;for(let o=1;o<XD;o++)r=r-n(r)/e(r);return r}function Xp(n,e){return n*Math.sqrt(1-e*e)}const ZD=["duration","bounce"],eV=["stiffness","damping","mass"];function Bx(n,e){return e.some(t=>n[t]!==void 0)}function tV(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!Bx(n,eV)&&Bx(n,ZD)){const t=YD(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function A1({keyframes:n,restDelta:e,restSpeed:t,...r}){const o=n[0],a=n[n.length-1],c={done:!1,value:o},{stiffness:d,damping:p,mass:m,duration:v,velocity:w,isResolvedFromDuration:E}=tV({...r,velocity:-us(r.velocity||0)}),b=w||0,L=p/(2*Math.sqrt(d*m)),V=a-o,k=us(Math.sqrt(d/m)),D=Math.abs(V)<5;t||(t=D?.01:2),e||(e=D?.005:.5);let M;if(L<1){const j=Xp(k,L);M=W=>{const ee=Math.exp(-L*k*W);return a-ee*((b+L*k*V)/j*Math.sin(j*W)+V*Math.cos(j*W))}}else if(L===1)M=j=>a-Math.exp(-k*j)*(V+(b+k*V)*j);else{const j=k*Math.sqrt(L*L-1);M=W=>{const ee=Math.exp(-L*k*W),ae=Math.min(j*W,300);return a-ee*((b+L*k*V)*Math.sinh(ae)+j*V*Math.cosh(ae))/j}}return{calculatedDuration:E&&v||null,next:j=>{const W=M(j);if(E)c.done=j>=v;else{let ee=b;j!==0&&(L<1?ee=P1(M,j,W):ee=0);const ae=Math.abs(ee)<=t,R=Math.abs(a-W)<=e;c.done=ae&&R}return c.value=c.done?a:W,c}}}function zx({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:o=10,bounceStiffness:a=500,modifyTarget:c,min:d,max:p,restDelta:m=.5,restSpeed:v}){const w=n[0],E={done:!1,value:w},b=I=>d!==void 0&&I<d||p!==void 0&&I>p,L=I=>d===void 0?p:p===void 0||Math.abs(d-I)<Math.abs(p-I)?d:p;let V=t*e;const k=w+V,D=c===void 0?k:c(k);D!==k&&(V=D-w);const M=I=>-V*Math.exp(-I/r),j=I=>D+M(I),W=I=>{const N=M(I),U=j(I);E.done=Math.abs(N)<=m,E.value=E.done?D:U};let ee,ae;const R=I=>{b(E.value)&&(ee=I,ae=A1({keyframes:[E.value,L(E.value)],velocity:P1(j,I,E.value),damping:o,stiffness:a,restDelta:m,restSpeed:v}))};return R(0),{calculatedDuration:null,next:I=>{let N=!1;return!ae&&ee===void 0&&(N=!0,W(I),R(I)),ee!==void 0&&I>ee?ae.next(I-ee):(!N&&W(I),E)}}}const nV=n=>{const e=({timestamp:t})=>n(t);return{start:()=>nt.update(e,!0),stop:()=>gs(e),now:()=>Xt.isProcessing?Xt.timestamp:performance.now()}},$x=2e4;function qx(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<$x;)e+=t,r=n.next(e);return e>=$x?1/0:e}const rV={decay:zx,inertia:zx,tween:Rh,keyframes:Rh,spring:A1};function jh({autoplay:n=!0,delay:e=0,driver:t=nV,keyframes:r,type:o="keyframes",repeat:a=0,repeatDelay:c=0,repeatType:d="loop",onPlay:p,onStop:m,onComplete:v,onUpdate:w,...E}){let b=1,L=!1,V,k;const D=()=>{k=new Promise(O=>{V=O})};D();let M;const j=rV[o]||Rh;let W;j!==Rh&&typeof r[0]!="number"&&(W=N1([0,100],r,{clamp:!1}),r=[0,100]);const ee=j({...E,keyframes:r});let ae;d==="mirror"&&(ae=j({...E,keyframes:[...r].reverse(),velocity:-(E.velocity||0)}));let R="idle",I=null,N=null,U=null;ee.calculatedDuration===null&&a&&(ee.calculatedDuration=qx(ee));const{calculatedDuration:B}=ee;let $=1/0,A=1/0;B!==null&&($=B+c,A=$*(a+1)-c);let we=0;const Ue=O=>{if(N===null)return;b>0&&(N=Math.min(N,O)),b<0&&(N=Math.min(O-A/b,N)),I!==null?we=I:we=Math.round(O-N)*b;const X=we-e*(b>=0?1:-1),fe=b>=0?X<0:X>A;we=Math.max(X,0),R==="finished"&&I===null&&(we=A);let oe=we,he=ee;if(a){const Ke=Math.min(we,A)/$;let rt=Math.floor(Ke),bt=Ke%1;!bt&&Ke>=1&&(bt=1),bt===1&&rt--,rt=Math.min(rt,a+1),!!(rt%2)&&(d==="reverse"?(bt=1-bt,c&&(bt-=c/$)):d==="mirror"&&(he=ae)),oe=ci(0,1,bt)*$}const ve=fe?{done:!1,value:r[0]}:he.next(oe);W&&(ve.value=W(ve.value));let{done:De}=ve;!fe&&B!==null&&(De=b>=0?we>=A:we<=0);const Fe=I===null&&(R==="finished"||R==="running"&&De);return w&&w(ve.value),Fe&&le(),ve},Ve=()=>{M&&M.stop(),M=void 0},Te=()=>{R="idle",Ve(),V(),D(),N=U=null},le=()=>{R="finished",v&&v(),Ve(),V()},J=()=>{if(L)return;M||(M=t(Ue));const O=M.now();p&&p(),I!==null?N=O-I:(!N||R==="finished")&&(N=O),R==="finished"&&D(),U=N,I=null,R="running",M.start()};n&&J();const Z={then(O,X){return k.then(O,X)},get time(){return us(we)},set time(O){O=Yi(O),we=O,I!==null||!M||b===0?I=O:N=M.now()-O/b},get duration(){const O=ee.calculatedDuration===null?qx(ee):ee.calculatedDuration;return us(O)},get speed(){return b},set speed(O){O===b||!M||(b=O,Z.time=us(we))},get state(){return R},play:J,pause:()=>{R="paused",I=we},stop:()=>{L=!0,R!=="idle"&&(R="idle",m&&m(),Te())},cancel:()=>{U!==null&&Ue(U),Te()},complete:()=>{R="finished"},sample:O=>(N=0,Ue(O))};return Z}function sV(n){let e;return()=>(e===void 0&&(e=n()),e)}const iV=sV(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),oV=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Ku=10,aV=2e4,lV=(n,e)=>e.type==="spring"||n==="backgroundColor"||!a1(e.ease);function cV(n,e,{onUpdate:t,onComplete:r,...o}){if(!(iV()&&oV.has(e)&&!o.repeatDelay&&o.repeatType!=="mirror"&&o.damping!==0&&o.type!=="inertia"))return!1;let c=!1,d,p,m=!1;const v=()=>{p=new Promise(j=>{d=j})};v();let{keyframes:w,duration:E=300,ease:b,times:L}=o;if(lV(e,o)){const j=jh({...o,repeat:0,delay:0});let W={done:!1,value:w[0]};const ee=[];let ae=0;for(;!W.done&&ae<aV;)W=j.sample(ae),ee.push(W.value),ae+=Ku;L=void 0,w=ee,E=ae-Ku,b="linear"}const V=vD(n.owner.current,e,w,{...o,duration:E,ease:b,times:L}),k=()=>{m=!1,V.cancel()},D=()=>{m=!0,nt.update(k),d(),v()};return V.onfinish=()=>{m||(n.set(xD(w,o)),r&&r(),D())},{then(j,W){return p.then(j,W)},attachTimeline(j){return V.timeline=j,V.onfinish=null,vt},get time(){return us(V.currentTime||0)},set time(j){V.currentTime=Yi(j)},get speed(){return V.playbackRate},set speed(j){V.playbackRate=j},get duration(){return us(E)},play:()=>{c||(V.play(),gs(k))},pause:()=>V.pause(),stop:()=>{if(c=!0,V.playState==="idle")return;const{currentTime:j}=V;if(j){const W=jh({...o,autoplay:!1});n.setWithVelocity(W.sample(j-Ku).value,W.sample(j).value,Ku)}D()},complete:()=>{m||V.finish()},cancel:D}}function uV({keyframes:n,delay:e,onUpdate:t,onComplete:r}){const o=()=>(t&&t(n[n.length-1]),r&&r(),{time:0,speed:1,duration:0,play:vt,pause:vt,stop:vt,then:a=>(a(),Promise.resolve()),cancel:vt,complete:vt});return e?jh({keyframes:[0,1],duration:0,delay:e,onComplete:o}):o()}const hV={type:"spring",stiffness:500,damping:25,restSpeed:10},dV=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),fV={type:"keyframes",duration:.8},pV={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},mV=(n,{keyframes:e})=>e.length>2?fV:ho.has(n)?n.startsWith("scale")?dV(e[1]):hV:pV,Jp=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ui.test(e)||e==="0")&&!e.startsWith("url(")),gV=new Set(["brightness","contrast","saturate","opacity"]);function yV(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(od)||[];if(!r)return n;const o=t.replace(r,"");let a=gV.has(e)?1:0;return r!==t&&(a*=100),e+"("+a+o+")"}const vV=/([a-z-]*)\(.*?\)/g,Zp={...ui,getAnimatableNone:n=>{const e=n.match(vV);return e?e.map(yV).join(" "):n}},xV={...qT,color:on,backgroundColor:on,outlineColor:on,fill:on,stroke:on,borderColor:on,borderTopColor:on,borderRightColor:on,borderBottomColor:on,borderLeftColor:on,filter:Zp,WebkitFilter:Zp},bg=n=>xV[n];function C1(n,e){let t=bg(n);return t!==Zp&&(t=ui),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const R1=n=>/^0[^.\s]+$/.test(n);function wV(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||R1(n)}function _V(n,e,t,r){const o=Jp(e,t);let a;Array.isArray(t)?a=[...t]:a=[null,t];const c=r.from!==void 0?r.from:n.get();let d;const p=[];for(let m=0;m<a.length;m++)a[m]===null&&(a[m]=m===0?c:a[m-1]),wV(a[m])&&p.push(m),typeof a[m]=="string"&&a[m]!=="none"&&a[m]!=="0"&&(d=a[m]);if(o&&p.length&&d)for(let m=0;m<p.length;m++){const v=p[m];a[v]=C1(e,d)}return a}function EV({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:o,repeat:a,repeatType:c,repeatDelay:d,from:p,elapsed:m,...v}){return!!Object.keys(v).length}function Sg(n,e){return n[e]||n.default||n}const TV={skipAnimations:!1},Ig=(n,e,t,r={})=>o=>{const a=Sg(r,n)||{},c=a.delay||r.delay||0;let{elapsed:d=0}=r;d=d-Yi(c);const p=_V(e,n,t,a),m=p[0],v=p[p.length-1],w=Jp(n,m),E=Jp(n,v);let b={keyframes:p,velocity:e.getVelocity(),ease:"easeOut",...a,delay:-d,onUpdate:L=>{e.set(L),a.onUpdate&&a.onUpdate(L)},onComplete:()=>{o(),a.onComplete&&a.onComplete()}};if(EV(a)||(b={...b,...mV(n,b)}),b.duration&&(b.duration=Yi(b.duration)),b.repeatDelay&&(b.repeatDelay=Yi(b.repeatDelay)),!w||!E||yD.current||a.type===!1||TV.skipAnimations)return uV(b);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const L=cV(e,n,b);if(L)return L}return jh(b)};function Dh(n){return!!(yn(n)&&n.add)}const j1=n=>/^\-?\d*\.?\d+$/.test(n);function Ng(n,e){n.indexOf(e)===-1&&n.push(e)}function kg(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class Pg{constructor(){this.subscriptions=[]}add(e){return Ng(this.subscriptions,e),()=>kg(this.subscriptions,e)}notify(e,t,r){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](e,t,r);else for(let a=0;a<o;a++){const c=this.subscriptions[a];c&&c(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const bV=n=>!isNaN(parseFloat(n));class SV{constructor(e,t={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,o=!0)=>{this.prev=this.current,this.current=r;const{delta:a,timestamp:c}=Xt;this.lastUpdated!==c&&(this.timeDelta=a,this.lastUpdated=c,nt.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),o&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>nt.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=bV(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Pg);const r=this.events[e].add(t);return e==="change"?()=>{r(),nt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?k1(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Sa(n,e){return new SV(n,e)}const D1=n=>e=>e.test(n),IV={test:n=>n==="auto",parse:n=>n},V1=[fo,Ie,jr,Gs,j4,R4,IV],kl=n=>V1.find(D1(n)),NV=[...V1,on,ui],kV=n=>NV.find(D1(n));function PV(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Sa(t))}function AV(n,e){const t=ld(n,e);let{transitionEnd:r={},transition:o={},...a}=t?n.makeTargetAnimatable(t,!1):{};a={...a,...r};for(const c in a){const d=W4(a[c]);PV(n,c,d)}}function CV(n,e,t){var r,o;const a=Object.keys(e).filter(d=>!n.hasValue(d)),c=a.length;if(c)for(let d=0;d<c;d++){const p=a[d],m=e[p];let v=null;Array.isArray(m)&&(v=m[0]),v===null&&(v=(o=(r=t[p])!==null&&r!==void 0?r:n.readValue(p))!==null&&o!==void 0?o:e[p]),v!=null&&(typeof v=="string"&&(j1(v)||R1(v))?v=parseFloat(v):!kV(v)&&ui.test(m)&&(v=C1(p,m)),n.addValue(p,Sa(v,{owner:n})),t[p]===void 0&&(t[p]=v),v!==null&&n.setBaseTarget(p,v))}}function RV(n,e){return e?(e[n]||e.default||e).from:void 0}function jV(n,e,t){const r={};for(const o in n){const a=RV(o,e);if(a!==void 0)r[o]=a;else{const c=t.getValue(o);c&&(r[o]=c.get())}}return r}function DV({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function VV(n,e){const t=n.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}else return t!==e}function L1(n,e,{delay:t=0,transitionOverride:r,type:o}={}){let{transition:a=n.getDefaultTransition(),transitionEnd:c,...d}=n.makeTargetAnimatable(e);const p=n.getValue("willChange");r&&(a=r);const m=[],v=o&&n.animationState&&n.animationState.getState()[o];for(const w in d){const E=n.getValue(w),b=d[w];if(!E||b===void 0||v&&DV(v,w))continue;const L={delay:t,elapsed:0,...Sg(a||{},w)};if(window.HandoffAppearAnimations){const D=n.getProps()[OT];if(D){const M=window.HandoffAppearAnimations(D,w,E,nt);M!==null&&(L.elapsed=M,L.isHandoff=!0)}}let V=!L.isHandoff&&!VV(E,b);if(L.type==="spring"&&(E.getVelocity()||L.velocity)&&(V=!1),E.animation&&(V=!1),V)continue;E.start(Ig(w,E,b,n.shouldReduceMotion&&ho.has(w)?{type:!1}:L));const k=E.animation;Dh(p)&&(p.add(w),k.then(()=>p.remove(w))),m.push(k)}return c&&Promise.all(m).then(()=>{c&&AV(n,c)}),m}function em(n,e,t={}){const r=ld(n,e,t.custom);let{transition:o=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(o=t.transitionOverride);const a=r?()=>Promise.all(L1(n,r,t)):()=>Promise.resolve(),c=n.variantChildren&&n.variantChildren.size?(p=0)=>{const{delayChildren:m=0,staggerChildren:v,staggerDirection:w}=o;return LV(n,e,m+p,v,w,t)}:()=>Promise.resolve(),{when:d}=o;if(d){const[p,m]=d==="beforeChildren"?[a,c]:[c,a];return p().then(()=>m())}else return Promise.all([a(),c(t.delay)])}function LV(n,e,t=0,r=0,o=1,a){const c=[],d=(n.variantChildren.size-1)*r,p=o===1?(m=0)=>m*r:(m=0)=>d-m*r;return Array.from(n.variantChildren).sort(OV).forEach((m,v)=>{m.notify("AnimationStart",e),c.push(em(m,e,{...a,delay:t+p(v)}).then(()=>m.notify("AnimationComplete",e)))}),Promise.all(c)}function OV(n,e){return n.sortNodePosition(e)}function MV(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const o=e.map(a=>em(n,a,t));r=Promise.all(o)}else if(typeof e=="string")r=em(n,e,t);else{const o=typeof e=="function"?ld(n,e,t.custom):e;r=Promise.all(L1(n,o,t))}return r.then(()=>n.notify("AnimationComplete",e))}const UV=[...ug].reverse(),FV=ug.length;function BV(n){return e=>Promise.all(e.map(({animation:t,options:r})=>MV(n,t,r)))}function zV(n){let e=BV(n);const t=qV();let r=!0;const o=(p,m)=>{const v=ld(n,m);if(v){const{transition:w,transitionEnd:E,...b}=v;p={...p,...b,...E}}return p};function a(p){e=p(n)}function c(p,m){const v=n.getProps(),w=n.getVariantContext(!0)||{},E=[],b=new Set;let L={},V=1/0;for(let D=0;D<FV;D++){const M=UV[D],j=t[M],W=v[M]!==void 0?v[M]:w[M],ee=ac(W),ae=M===m?j.isActive:null;ae===!1&&(V=D);let R=W===w[M]&&W!==v[M]&&ee;if(R&&r&&n.manuallyAnimateOnMount&&(R=!1),j.protectedKeys={...L},!j.isActive&&ae===null||!W&&!j.prevProp||sd(W)||typeof W=="boolean")continue;let N=$V(j.prevProp,W)||M===m&&j.isActive&&!R&&ee||D>V&&ee,U=!1;const B=Array.isArray(W)?W:[W];let $=B.reduce(o,{});ae===!1&&($={});const{prevResolvedValues:A={}}=j,we={...A,...$},Ue=Ve=>{N=!0,b.has(Ve)&&(U=!0,b.delete(Ve)),j.needsAnimating[Ve]=!0};for(const Ve in we){const Te=$[Ve],le=A[Ve];if(L.hasOwnProperty(Ve))continue;let J=!1;Ah(Te)&&Ah(le)?J=!i1(Te,le):J=Te!==le,J?Te!==void 0?Ue(Ve):b.add(Ve):Te!==void 0&&b.has(Ve)?Ue(Ve):j.protectedKeys[Ve]=!0}j.prevProp=W,j.prevResolvedValues=$,j.isActive&&(L={...L,...$}),r&&n.blockInitialAnimation&&(N=!1),N&&(!R||U)&&E.push(...B.map(Ve=>({animation:Ve,options:{type:M,...p}})))}if(b.size){const D={};b.forEach(M=>{const j=n.getBaseTarget(M);j!==void 0&&(D[M]=j)}),E.push({animation:D})}let k=!!E.length;return r&&(v.initial===!1||v.initial===v.animate)&&!n.manuallyAnimateOnMount&&(k=!1),r=!1,k?e(E):Promise.resolve()}function d(p,m,v){var w;if(t[p].isActive===m)return Promise.resolve();(w=n.variantChildren)===null||w===void 0||w.forEach(b=>{var L;return(L=b.animationState)===null||L===void 0?void 0:L.setActive(p,m)}),t[p].isActive=m;const E=c(v,p);for(const b in t)t[b].protectedKeys={};return E}return{animateChanges:c,setActive:d,setAnimateFunction:a,getState:()=>t}}function $V(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!i1(e,n):!1}function Bi(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function qV(){return{animate:Bi(!0),whileInView:Bi(),whileHover:Bi(),whileTap:Bi(),whileDrag:Bi(),whileFocus:Bi(),exit:Bi()}}class GV extends fi{constructor(e){super(e),e.animationState||(e.animationState=zV(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),sd(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let HV=0;class WV extends fi{constructor(){super(...arguments),this.id=HV++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:r}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===o)return;const a=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});t&&!e&&a.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const KV={animation:{Feature:GV},exit:{Feature:WV}},Gx=(n,e)=>Math.abs(n-e);function QV(n,e){const t=Gx(n.x,e.x),r=Gx(n.y,e.y);return Math.sqrt(t**2+r**2)}class O1{constructor(e,t,{transformPagePoint:r,contextWindow:o,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=hp(this.lastMoveEventInfo,this.history),E=this.startEvent!==null,b=QV(w.offset,{x:0,y:0})>=3;if(!E&&!b)return;const{point:L}=w,{timestamp:V}=Xt;this.history.push({...L,timestamp:V});const{onStart:k,onMove:D}=this.handlers;E||(k&&k(this.lastMoveEvent,w),this.startEvent=this.lastMoveEvent),D&&D(this.lastMoveEvent,w)},this.handlePointerMove=(w,E)=>{this.lastMoveEvent=w,this.lastMoveEventInfo=up(E,this.transformPagePoint),nt.update(this.updatePoint,!0)},this.handlePointerUp=(w,E)=>{this.end();const{onEnd:b,onSessionEnd:L,resumeAnimation:V}=this.handlers;if(this.dragSnapToOrigin&&V&&V(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=hp(w.type==="pointercancel"?this.lastMoveEventInfo:up(E,this.transformPagePoint),this.history);this.startEvent&&b&&b(w,k),L&&L(w,k)},!e1(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=r,this.contextWindow=o||window;const c=ad(e),d=up(c,this.transformPagePoint),{point:p}=d,{timestamp:m}=Xt;this.history=[{...p,timestamp:m}];const{onSessionStart:v}=t;v&&v(e,hp(d,this.history)),this.removeListeners=si(cs(this.contextWindow,"pointermove",this.handlePointerMove),cs(this.contextWindow,"pointerup",this.handlePointerUp),cs(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),gs(this.updatePoint)}}function up(n,e){return e?{point:e(n.point)}:n}function Hx(n,e){return{x:n.x-e.x,y:n.y-e.y}}function hp({point:n},e){return{point:n,delta:Hx(n,M1(e)),offset:Hx(n,YV(e)),velocity:XV(e,.1)}}function YV(n){return n[0]}function M1(n){return n[n.length-1]}function XV(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const o=M1(n);for(;t>=0&&(r=n[t],!(o.timestamp-r.timestamp>Yi(e)));)t--;if(!r)return{x:0,y:0};const a=us(o.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const c={x:(o.x-r.x)/a,y:(o.y-r.y)/a};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function kn(n){return n.max-n.min}function tm(n,e=0,t=.01){return Math.abs(n-e)<=t}function Wx(n,e,t,r=.5){n.origin=r,n.originPoint=ht(e.min,e.max,n.origin),n.scale=kn(t)/kn(e),(tm(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=ht(t.min,t.max,n.origin)-n.originPoint,(tm(n.translate)||isNaN(n.translate))&&(n.translate=0)}function Gl(n,e,t,r){Wx(n.x,e.x,t.x,r?r.originX:void 0),Wx(n.y,e.y,t.y,r?r.originY:void 0)}function Kx(n,e,t){n.min=t.min+e.min,n.max=n.min+kn(e)}function JV(n,e,t){Kx(n.x,e.x,t.x),Kx(n.y,e.y,t.y)}function Qx(n,e,t){n.min=e.min-t.min,n.max=n.min+kn(e)}function Hl(n,e,t){Qx(n.x,e.x,t.x),Qx(n.y,e.y,t.y)}function ZV(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?ht(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?ht(t,n,r.max):Math.min(n,t)),n}function Yx(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function eL(n,{top:e,left:t,bottom:r,right:o}){return{x:Yx(n.x,t,o),y:Yx(n.y,e,r)}}function Xx(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function tL(n,e){return{x:Xx(n.x,e.x),y:Xx(n.y,e.y)}}function nL(n,e){let t=.5;const r=kn(n),o=kn(e);return o>r?t=cc(e.min,e.max-r,n.min):r>o&&(t=cc(n.min,n.max-o,e.min)),ci(0,1,t)}function rL(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const nm=.35;function sL(n=nm){return n===!1?n=0:n===!0&&(n=nm),{x:Jx(n,"left","right"),y:Jx(n,"top","bottom")}}function Jx(n,e,t){return{min:Zx(n,e),max:Zx(n,t)}}function Zx(n,e){return typeof n=="number"?n:n[e]||0}const ew=()=>({translate:0,scale:1,origin:0,originPoint:0}),ha=()=>({x:ew(),y:ew()}),tw=()=>({min:0,max:0}),Tt=()=>({x:tw(),y:tw()});function Bn(n){return[n("x"),n("y")]}function U1({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function iL({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function oL(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function dp(n){return n===void 0||n===1}function rm({scale:n,scaleX:e,scaleY:t}){return!dp(n)||!dp(e)||!dp(t)}function $i(n){return rm(n)||F1(n)||n.z||n.rotate||n.rotateX||n.rotateY}function F1(n){return nw(n.x)||nw(n.y)}function nw(n){return n&&n!=="0%"}function Vh(n,e,t){const r=n-t,o=e*r;return t+o}function rw(n,e,t,r,o){return o!==void 0&&(n=Vh(n,o,r)),Vh(n,t,r)+e}function sm(n,e=0,t=1,r,o){n.min=rw(n.min,e,t,r,o),n.max=rw(n.max,e,t,r,o)}function B1(n,{x:e,y:t}){sm(n.x,e.translate,e.scale,e.originPoint),sm(n.y,t.translate,t.scale,t.originPoint)}function aL(n,e,t,r=!1){const o=t.length;if(!o)return;e.x=e.y=1;let a,c;for(let d=0;d<o;d++){a=t[d],c=a.projectionDelta;const p=a.instance;p&&p.style&&p.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&da(n,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,B1(n,c)),r&&$i(a.latestValues)&&da(n,a.latestValues))}e.x=sw(e.x),e.y=sw(e.y)}function sw(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function Hs(n,e){n.min=n.min+e,n.max=n.max+e}function iw(n,e,[t,r,o]){const a=e[o]!==void 0?e[o]:.5,c=ht(n.min,n.max,a);sm(n,e[t],e[r],c,e.scale)}const lL=["x","scaleX","originX"],cL=["y","scaleY","originY"];function da(n,e){iw(n.x,e,lL),iw(n.y,e,cL)}function z1(n,e){return U1(oL(n.getBoundingClientRect(),e))}function uL(n,e,t){const r=z1(n,t),{scroll:o}=e;return o&&(Hs(r.x,o.offset.x),Hs(r.y,o.offset.y)),r}const $1=({current:n})=>n?n.ownerDocument.defaultView:null,hL=new WeakMap;class dL{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Tt(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const o=v=>{const{dragSnapToOrigin:w}=this.getProps();w?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(ad(v,"page").point)},a=(v,w)=>{const{drag:E,dragPropagation:b,onDragStart:L}=this.getProps();if(E&&!b&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=n1(E),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Bn(k=>{let D=this.getAxisMotionValue(k).get()||0;if(jr.test(D)){const{projection:M}=this.visualElement;if(M&&M.layout){const j=M.layout.layoutBox[k];j&&(D=kn(j)*(parseFloat(D)/100))}}this.originPoint[k]=D}),L&&nt.update(()=>L(v,w),!1,!0);const{animationState:V}=this.visualElement;V&&V.setActive("whileDrag",!0)},c=(v,w)=>{const{dragPropagation:E,dragDirectionLock:b,onDirectionLock:L,onDrag:V}=this.getProps();if(!E&&!this.openGlobalLock)return;const{offset:k}=w;if(b&&this.currentDirection===null){this.currentDirection=fL(k),this.currentDirection!==null&&L&&L(this.currentDirection);return}this.updateAxis("x",w.point,k),this.updateAxis("y",w.point,k),this.visualElement.render(),V&&V(v,w)},d=(v,w)=>this.stop(v,w),p=()=>Bn(v=>{var w;return this.getAnimationState(v)==="paused"&&((w=this.getAxisMotionValue(v).animation)===null||w===void 0?void 0:w.play())}),{dragSnapToOrigin:m}=this.getProps();this.panSession=new O1(e,{onSessionStart:o,onStart:a,onMove:c,onSessionEnd:d,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,contextWindow:$1(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:o}=t;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&nt.update(()=>a(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:o}=this.getProps();if(!r||!Qu(e,o,this.currentDirection))return;const a=this.getAxisMotionValue(e);let c=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(c=ZV(c,this.constraints[e],this.elastic[e])),a.set(c)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;t&&ca(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&o?this.constraints=eL(o.layoutBox,t):this.constraints=!1,this.elastic=sL(r),a!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&Bn(c=>{this.getAxisMotionValue(c)&&(this.constraints[c]=rL(o.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!ca(e))return!1;const r=e.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const a=uL(r,o.root,this.visualElement.getTransformPagePoint());let c=tL(o.layout.layoutBox,a);if(t){const d=t(iL(c));this.hasMutatedConstraints=!!d,d&&(c=U1(d))}return c}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:o,dragTransition:a,dragSnapToOrigin:c,onDragTransitionEnd:d}=this.getProps(),p=this.constraints||{},m=Bn(v=>{if(!Qu(v,t,this.currentDirection))return;let w=p&&p[v]||{};c&&(w={min:0,max:0});const E=o?200:1e6,b=o?40:1e7,L={type:"inertia",velocity:r?e[v]:0,bounceStiffness:E,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...a,...w};return this.startAxisValueAnimation(v,L)});return Promise.all(m).then(d)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return r.start(Ig(e,r,0,t))}stopAnimation(){Bn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Bn(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),o=r[t];return o||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Bn(t=>{const{drag:r}=this.getProps();if(!Qu(t,r,this.currentDirection))return;const{projection:o}=this.visualElement,a=this.getAxisMotionValue(t);if(o&&o.layout){const{min:c,max:d}=o.layout.layoutBox[t];a.set(e[t]-ht(c,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!ca(t)||!r||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};Bn(c=>{const d=this.getAxisMotionValue(c);if(d){const p=d.get();o[c]=nL({min:p,max:p},this.constraints[c])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Bn(c=>{if(!Qu(c,e,null))return;const d=this.getAxisMotionValue(c),{min:p,max:m}=this.constraints[c];d.set(ht(p,m,o[c]))})}addListeners(){if(!this.visualElement.current)return;hL.set(this.visualElement,this);const e=this.visualElement.current,t=cs(e,"pointerdown",p=>{const{drag:m,dragListener:v=!0}=this.getProps();m&&v&&this.start(p)}),r=()=>{const{dragConstraints:p}=this.getProps();ca(p)&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,a=o.addEventListener("measure",r);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),r();const c=is(window,"resize",()=>this.scalePositionWithinConstraints()),d=o.addEventListener("didUpdate",({delta:p,hasLayoutChanged:m})=>{this.isDragging&&m&&(Bn(v=>{const w=this.getAxisMotionValue(v);w&&(this.originPoint[v]+=p[v].translate,w.set(w.get()+p[v].translate))}),this.visualElement.render())});return()=>{c(),t(),a(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:o=!1,dragConstraints:a=!1,dragElastic:c=nm,dragMomentum:d=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:o,dragConstraints:a,dragElastic:c,dragMomentum:d}}}function Qu(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function fL(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class pL extends fi{constructor(e){super(e),this.removeGroupControls=vt,this.removeListeners=vt,this.controls=new dL(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||vt}unmount(){this.removeGroupControls(),this.removeListeners()}}const ow=n=>(e,t)=>{n&&nt.update(()=>n(e,t))};class mL extends fi{constructor(){super(...arguments),this.removePointerDownListener=vt}onPointerDown(e){this.session=new O1(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:$1(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:o}=this.node.getProps();return{onSessionStart:ow(e),onStart:ow(t),onMove:r,onEnd:(a,c)=>{delete this.session,o&&nt.update(()=>o(a,c))}}}mount(){this.removePointerDownListener=cs(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function gL(){const n=P.useContext(nd);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:r}=n,o=P.useId();return P.useEffect(()=>r(o),[]),!e&&t?[!1,()=>t&&t(o)]:[!0]}const ah={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function aw(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Pl={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Ie.test(n))n=parseFloat(n);else return n;const t=aw(n,e.target.x),r=aw(n,e.target.y);return`${t}% ${r}%`}},yL={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,o=ui.parse(n);if(o.length>5)return r;const a=ui.createTransformer(n),c=typeof o[0]!="number"?1:0,d=t.x.scale*e.x,p=t.y.scale*e.y;o[0+c]/=d,o[1+c]/=p;const m=ht(d,p,.5);return typeof o[2+c]=="number"&&(o[2+c]/=m),typeof o[3+c]=="number"&&(o[3+c]/=m),a(o)}};class vL extends Lh.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:o}=this.props,{projection:a}=e;S4(xL),a&&(t.group&&t.group.add(a),r&&r.register&&o&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),ah.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:o,isPresent:a}=this.props,c=r.projection;return c&&(c.isPresent=a,o||e.layoutDependency!==t||t===void 0?c.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?c.promote():c.relegate()||nt.postRender(()=>{const d=c.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:o}=e;o&&(o.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(o),r&&r.deregister&&r.deregister(o))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function q1(n){const[e,t]=gL(),r=P.useContext(dg);return Lh.createElement(vL,{...n,layoutGroup:r,switchLayoutGroup:P.useContext(UT),isPresent:e,safeToRemove:t})}const xL={borderRadius:{...Pl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Pl,borderTopRightRadius:Pl,borderBottomLeftRadius:Pl,borderBottomRightRadius:Pl,boxShadow:yL},G1=["TopLeft","TopRight","BottomLeft","BottomRight"],wL=G1.length,lw=n=>typeof n=="string"?parseFloat(n):n,cw=n=>typeof n=="number"||Ie.test(n);function _L(n,e,t,r,o,a){o?(n.opacity=ht(0,t.opacity!==void 0?t.opacity:1,EL(r)),n.opacityExit=ht(e.opacity!==void 0?e.opacity:1,0,TL(r))):a&&(n.opacity=ht(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let c=0;c<wL;c++){const d=`border${G1[c]}Radius`;let p=uw(e,d),m=uw(t,d);if(p===void 0&&m===void 0)continue;p||(p=0),m||(m=0),p===0||m===0||cw(p)===cw(m)?(n[d]=Math.max(ht(lw(p),lw(m),r),0),(jr.test(m)||jr.test(p))&&(n[d]+="%")):n[d]=m}(e.rotate||t.rotate)&&(n.rotate=ht(e.rotate||0,t.rotate||0,r))}function uw(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const EL=H1(0,.5,p1),TL=H1(.5,.95,vt);function H1(n,e,t){return r=>r<n?0:r>e?1:t(cc(n,e,r))}function hw(n,e){n.min=e.min,n.max=e.max}function Fn(n,e){hw(n.x,e.x),hw(n.y,e.y)}function dw(n,e,t,r,o){return n-=e,n=Vh(n,1/t,r),o!==void 0&&(n=Vh(n,1/o,r)),n}function bL(n,e=0,t=1,r=.5,o,a=n,c=n){if(jr.test(e)&&(e=parseFloat(e),e=ht(c.min,c.max,e/100)-c.min),typeof e!="number")return;let d=ht(a.min,a.max,r);n===a&&(d-=e),n.min=dw(n.min,e,t,d,o),n.max=dw(n.max,e,t,d,o)}function fw(n,e,[t,r,o],a,c){bL(n,e[t],e[r],e[o],e.scale,a,c)}const SL=["x","scaleX","originX"],IL=["y","scaleY","originY"];function pw(n,e,t,r){fw(n.x,e,SL,t?t.x:void 0,r?r.x:void 0),fw(n.y,e,IL,t?t.y:void 0,r?r.y:void 0)}function mw(n){return n.translate===0&&n.scale===1}function W1(n){return mw(n.x)&&mw(n.y)}function NL(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function K1(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function gw(n){return kn(n.x)/kn(n.y)}class kL{constructor(){this.members=[]}add(e){Ng(this.members,e),e.scheduleRender()}remove(e){if(kg(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(o=>e===o);if(t===0)return!1;let r;for(let o=t;o>=0;o--){const a=this.members[o];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:o}=e.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function yw(n,e,t){let r="";const o=n.x.translate/e.x,a=n.y.translate/e.y;if((o||a)&&(r=`translate3d(${o}px, ${a}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:p,rotateX:m,rotateY:v}=t;p&&(r+=`rotate(${p}deg) `),m&&(r+=`rotateX(${m}deg) `),v&&(r+=`rotateY(${v}deg) `)}const c=n.x.scale*e.x,d=n.y.scale*e.y;return(c!==1||d!==1)&&(r+=`scale(${c}, ${d})`),r||"none"}const PL=(n,e)=>n.depth-e.depth;class AL{constructor(){this.children=[],this.isDirty=!1}add(e){Ng(this.children,e),this.isDirty=!0}remove(e){kg(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(PL),this.isDirty=!1,this.children.forEach(e)}}function CL(n,e){const t=performance.now(),r=({timestamp:o})=>{const a=o-t;a>=e&&(gs(r),n(a-e))};return nt.read(r,!0),()=>gs(r)}function RL(n){window.MotionDebug&&window.MotionDebug.record(n)}function jL(n){return n instanceof SVGElement&&n.tagName!=="svg"}function DL(n,e,t){const r=yn(n)?n:Sa(n);return r.start(Ig("",r,e,t)),r.animation}const vw=["","X","Y","Z"],VL={visibility:"hidden"},xw=1e3;let LL=0;const qi={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Q1({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:o}){return class{constructor(c={},d=e?.()){this.id=LL++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,qi.totalNodes=qi.resolvedTargetDeltas=qi.recalculatedProjection=0,this.nodes.forEach(UL),this.nodes.forEach(qL),this.nodes.forEach(GL),this.nodes.forEach(FL),RL(qi)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let p=0;p<this.path.length;p++)this.path[p].shouldResetTransform=!0;this.root===this&&(this.nodes=new AL)}addEventListener(c,d){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new Pg),this.eventHandlers.get(c).add(d)}notifyListeners(c,...d){const p=this.eventHandlers.get(c);p&&p.notify(...d)}hasListeners(c){return this.eventHandlers.has(c)}mount(c,d=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=jL(c),this.instance=c;const{layoutId:p,layout:m,visualElement:v}=this.options;if(v&&!v.current&&v.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),d&&(m||p)&&(this.isLayoutDirty=!0),n){let w;const E=()=>this.root.updateBlockedByResize=!1;n(c,()=>{this.root.updateBlockedByResize=!0,w&&w(),w=CL(E,250),ah.hasAnimatedSinceResize&&(ah.hasAnimatedSinceResize=!1,this.nodes.forEach(_w))})}p&&this.root.registerSharedNode(p,this),this.options.animate!==!1&&v&&(p||m)&&this.addEventListener("didUpdate",({delta:w,hasLayoutChanged:E,hasRelativeTargetChanged:b,layout:L})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const V=this.options.transition||v.getDefaultTransition()||YL,{onLayoutAnimationStart:k,onLayoutAnimationComplete:D}=v.getProps(),M=!this.targetLayout||!K1(this.targetLayout,L)||b,j=!E&&b;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||j||E&&(M||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(w,j);const W={...Sg(V,"layout"),onPlay:k,onComplete:D};(v.shouldReduceMotion||this.options.layoutRoot)&&(W.delay=0,W.type=!1),this.startAnimation(W)}else E||_w(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=L})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,gs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(HL),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let v=0;v<this.path.length;v++){const w=this.path[v];w.shouldResetTransform=!0,w.updateScroll("snapshot"),w.options.layoutRoot&&w.willUpdate(!1)}const{layoutId:d,layout:p}=this.options;if(d===void 0&&!p)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ww);return}this.isUpdating||this.nodes.forEach(zL),this.isUpdating=!1,this.nodes.forEach($L),this.nodes.forEach(OL),this.nodes.forEach(ML),this.clearAllSnapshots();const d=performance.now();Xt.delta=ci(0,1e3/60,d-Xt.timestamp),Xt.timestamp=d,Xt.isProcessing=!0,np.update.process(Xt),np.preRender.process(Xt),np.render.process(Xt),Xt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(BL),this.sharedNodes.forEach(WL)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,nt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){nt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let p=0;p<this.path.length;p++)this.path[p].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Tt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let d=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(d=!1),d&&(this.scroll={animationId:this.root.animationId,phase:c,isRoot:r(this.instance),offset:t(this.instance)})}resetTransform(){if(!o)return;const c=this.isLayoutDirty||this.shouldResetTransform,d=this.projectionDelta&&!W1(this.projectionDelta),p=this.getTransformTemplate(),m=p?p(this.latestValues,""):void 0,v=m!==this.prevTransformTemplateValue;c&&(d||$i(this.latestValues)||v)&&(o(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const d=this.measurePageBox();let p=this.removeElementScroll(d);return c&&(p=this.removeTransform(p)),XL(p),{animationId:this.root.animationId,measuredBox:d,layoutBox:p,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:c}=this.options;if(!c)return Tt();const d=c.measureViewportBox(),{scroll:p}=this.root;return p&&(Hs(d.x,p.offset.x),Hs(d.y,p.offset.y)),d}removeElementScroll(c){const d=Tt();Fn(d,c);for(let p=0;p<this.path.length;p++){const m=this.path[p],{scroll:v,options:w}=m;if(m!==this.root&&v&&w.layoutScroll){if(v.isRoot){Fn(d,c);const{scroll:E}=this.root;E&&(Hs(d.x,-E.offset.x),Hs(d.y,-E.offset.y))}Hs(d.x,v.offset.x),Hs(d.y,v.offset.y)}}return d}applyTransform(c,d=!1){const p=Tt();Fn(p,c);for(let m=0;m<this.path.length;m++){const v=this.path[m];!d&&v.options.layoutScroll&&v.scroll&&v!==v.root&&da(p,{x:-v.scroll.offset.x,y:-v.scroll.offset.y}),$i(v.latestValues)&&da(p,v.latestValues)}return $i(this.latestValues)&&da(p,this.latestValues),p}removeTransform(c){const d=Tt();Fn(d,c);for(let p=0;p<this.path.length;p++){const m=this.path[p];if(!m.instance||!$i(m.latestValues))continue;rm(m.latestValues)&&m.updateSnapshot();const v=Tt(),w=m.measurePageBox();Fn(v,w),pw(d,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,v)}return $i(this.latestValues)&&pw(d,this.latestValues),d}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Xt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var d;const p=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=p.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=p.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=p.isSharedProjectionDirty);const m=!!this.resumingFrom||this!==p;if(!(c||m&&this.isSharedProjectionDirty||this.isProjectionDirty||!((d=this.parent)===null||d===void 0)&&d.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:w,layoutId:E}=this.options;if(!(!this.layout||!(w||E))){if(this.resolvedRelativeTargetAt=Xt.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tt(),this.relativeTargetOrigin=Tt(),Hl(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),Fn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Tt(),this.targetWithTransforms=Tt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),JV(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Fn(this.target,this.layout.layoutBox),B1(this.target,this.targetDelta)):Fn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tt(),this.relativeTargetOrigin=Tt(),Hl(this.relativeTargetOrigin,this.target,b.target),Fn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}qi.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||rm(this.parent.latestValues)||F1(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var c;const d=this.getLead(),p=!!this.resumingFrom||this!==d;let m=!0;if((this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty)&&(m=!1),p&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(m=!1),this.resolvedRelativeTargetAt===Xt.timestamp&&(m=!1),m)return;const{layout:v,layoutId:w}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(v||w))return;Fn(this.layoutCorrected,this.layout.layoutBox);const E=this.treeScale.x,b=this.treeScale.y;aL(this.layoutCorrected,this.treeScale,this.path,p),d.layout&&!d.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(d.target=d.layout.layoutBox);const{target:L}=d;if(!L){this.projectionTransform&&(this.projectionDelta=ha(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=ha(),this.projectionDeltaWithTransform=ha());const V=this.projectionTransform;Gl(this.projectionDelta,this.layoutCorrected,L,this.latestValues),this.projectionTransform=yw(this.projectionDelta,this.treeScale),(this.projectionTransform!==V||this.treeScale.x!==E||this.treeScale.y!==b)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",L)),qi.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),c){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(c,d=!1){const p=this.snapshot,m=p?p.latestValues:{},v={...this.latestValues},w=ha();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const E=Tt(),b=p?p.source:void 0,L=this.layout?this.layout.source:void 0,V=b!==L,k=this.getStack(),D=!k||k.members.length<=1,M=!!(V&&!D&&this.options.crossfade===!0&&!this.path.some(QL));this.animationProgress=0;let j;this.mixTargetDelta=W=>{const ee=W/1e3;Ew(w.x,c.x,ee),Ew(w.y,c.y,ee),this.setTargetDelta(w),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Hl(E,this.layout.layoutBox,this.relativeParent.layout.layoutBox),KL(this.relativeTarget,this.relativeTargetOrigin,E,ee),j&&NL(this.relativeTarget,j)&&(this.isProjectionDirty=!1),j||(j=Tt()),Fn(j,this.relativeTarget)),V&&(this.animationValues=v,_L(v,m,this.latestValues,ee,M,D)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ee},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(gs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=nt.update(()=>{ah.hasAnimatedSinceResize=!0,this.currentAnimation=DL(0,xw,{...c,onUpdate:d=>{this.mixTargetDelta(d),c.onUpdate&&c.onUpdate(d)},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(xw),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:d,target:p,layout:m,latestValues:v}=c;if(!(!d||!p||!m)){if(this!==c&&this.layout&&m&&Y1(this.options.animationType,this.layout.layoutBox,m.layoutBox)){p=this.target||Tt();const w=kn(this.layout.layoutBox.x);p.x.min=c.target.x.min,p.x.max=p.x.min+w;const E=kn(this.layout.layoutBox.y);p.y.min=c.target.y.min,p.y.max=p.y.min+E}Fn(d,p),da(d,v),Gl(this.projectionDeltaWithTransform,this.layoutCorrected,d,v)}}registerSharedNode(c,d){this.sharedNodes.has(c)||this.sharedNodes.set(c,new kL),this.sharedNodes.get(c).add(d);const m=d.options.initialPromotionConfig;d.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(d):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var c;const{layoutId:d}=this.options;return d?((c=this.getStack())===null||c===void 0?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:d}=this.options;return d?(c=this.getStack())===null||c===void 0?void 0:c.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:d,preserveFollowOpacity:p}={}){const m=this.getStack();m&&m.promote(this,p),c&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetRotation(){const{visualElement:c}=this.options;if(!c)return;let d=!1;const{latestValues:p}=c;if((p.rotate||p.rotateX||p.rotateY||p.rotateZ)&&(d=!0),!d)return;const m={};for(let v=0;v<vw.length;v++){const w="rotate"+vw[v];p[w]&&(m[w]=p[w],c.setStaticValue(w,0))}c.render();for(const v in m)c.setStaticValue(v,m[v]);c.scheduleRender()}getProjectionStyles(c){var d,p;if(!this.instance||this.isSVG)return;if(!this.isVisible)return VL;const m={visibility:""},v=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,m.opacity="",m.pointerEvents=oh(c?.pointerEvents)||"",m.transform=v?v(this.latestValues,""):"none",m;const w=this.getLead();if(!this.projectionDelta||!this.layout||!w.target){const V={};return this.options.layoutId&&(V.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,V.pointerEvents=oh(c?.pointerEvents)||""),this.hasProjected&&!$i(this.latestValues)&&(V.transform=v?v({},""):"none",this.hasProjected=!1),V}const E=w.animationValues||w.latestValues;this.applyTransformsToTarget(),m.transform=yw(this.projectionDeltaWithTransform,this.treeScale,E),v&&(m.transform=v(E,m.transform));const{x:b,y:L}=this.projectionDelta;m.transformOrigin=`${b.origin*100}% ${L.origin*100}% 0`,w.animationValues?m.opacity=w===this?(p=(d=E.opacity)!==null&&d!==void 0?d:this.latestValues.opacity)!==null&&p!==void 0?p:1:this.preserveOpacity?this.latestValues.opacity:E.opacityExit:m.opacity=w===this?E.opacity!==void 0?E.opacity:"":E.opacityExit!==void 0?E.opacityExit:0;for(const V in kh){if(E[V]===void 0)continue;const{correct:k,applyTo:D}=kh[V],M=m.transform==="none"?E[V]:k(E[V],w);if(D){const j=D.length;for(let W=0;W<j;W++)m[D[W]]=M}else m[V]=M}return this.options.layoutId&&(m.pointerEvents=w===this?oh(c?.pointerEvents)||"":"none"),m}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var d;return(d=c.currentAnimation)===null||d===void 0?void 0:d.stop()}),this.root.nodes.forEach(ww),this.root.sharedNodes.clear()}}}function OL(n){n.updateLayout()}function ML(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:o}=n.layout,{animationType:a}=n.options,c=t.source!==n.layout.source;a==="size"?Bn(w=>{const E=c?t.measuredBox[w]:t.layoutBox[w],b=kn(E);E.min=r[w].min,E.max=E.min+b}):Y1(a,t.layoutBox,r)&&Bn(w=>{const E=c?t.measuredBox[w]:t.layoutBox[w],b=kn(r[w]);E.max=E.min+b,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[w].max=n.relativeTarget[w].min+b)});const d=ha();Gl(d,r,t.layoutBox);const p=ha();c?Gl(p,n.applyTransform(o,!0),t.measuredBox):Gl(p,r,t.layoutBox);const m=!W1(d);let v=!1;if(!n.resumeFrom){const w=n.getClosestProjectingParent();if(w&&!w.resumeFrom){const{snapshot:E,layout:b}=w;if(E&&b){const L=Tt();Hl(L,t.layoutBox,E.layoutBox);const V=Tt();Hl(V,r,b.layoutBox),K1(L,V)||(v=!0),w.options.layoutRoot&&(n.relativeTarget=V,n.relativeTargetOrigin=L,n.relativeParent=w)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:p,layoutDelta:d,hasLayoutChanged:m,hasRelativeTargetChanged:v})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function UL(n){qi.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function FL(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function BL(n){n.clearSnapshot()}function ww(n){n.clearMeasurements()}function zL(n){n.isLayoutDirty=!1}function $L(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function _w(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function qL(n){n.resolveTargetDelta()}function GL(n){n.calcProjection()}function HL(n){n.resetRotation()}function WL(n){n.removeLeadSnapshot()}function Ew(n,e,t){n.translate=ht(e.translate,0,t),n.scale=ht(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function Tw(n,e,t,r){n.min=ht(e.min,t.min,r),n.max=ht(e.max,t.max,r)}function KL(n,e,t,r){Tw(n.x,e.x,t.x,r),Tw(n.y,e.y,t.y,r)}function QL(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const YL={duration:.45,ease:[.4,0,.1,1]},bw=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),Sw=bw("applewebkit/")&&!bw("chrome/")?Math.round:vt;function Iw(n){n.min=Sw(n.min),n.max=Sw(n.max)}function XL(n){Iw(n.x),Iw(n.y)}function Y1(n,e,t){return n==="position"||n==="preserve-aspect"&&!tm(gw(e),gw(t),.2)}const JL=Q1({attachResizeListener:(n,e)=>is(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),fp={current:void 0},X1=Q1({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!fp.current){const n=new JL({});n.mount(window),n.setOptions({layoutScroll:!0}),fp.current=n}return fp.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),ZL={pan:{Feature:mL},drag:{Feature:pL,ProjectionNode:X1,MeasureLayout:q1}},eO=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function tO(n){const e=eO.exec(n);if(!e)return[,];const[,t,r]=e;return[t,r]}function im(n,e,t=1){const[r,o]=tO(n);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const c=a.trim();return j1(c)?parseFloat(c):c}else return Kp(o)?im(o,e,t+1):o}function nO(n,{...e},t){const r=n.current;if(!(r instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(o=>{const a=o.get();if(!Kp(a))return;const c=im(a,r);c&&o.set(c)});for(const o in e){const a=e[o];if(!Kp(a))continue;const c=im(a,r);c&&(e[o]=c,t||(t={}),t[o]===void 0&&(t[o]=a))}return{target:e,transitionEnd:t}}const rO=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),J1=n=>rO.has(n),sO=n=>Object.keys(n).some(J1),Nw=n=>n===fo||n===Ie,kw=(n,e)=>parseFloat(n.split(", ")[e]),Pw=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const o=r.match(/^matrix3d\((.+)\)$/);if(o)return kw(o[1],e);{const a=r.match(/^matrix\((.+)\)$/);return a?kw(a[1],n):0}},iO=new Set(["x","y","z"]),oO=Ec.filter(n=>!iO.has(n));function aO(n){const e=[];return oO.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const Ia={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:Pw(4,13),y:Pw(5,14)};Ia.translateX=Ia.x;Ia.translateY=Ia.y;const lO=(n,e,t)=>{const r=e.measureViewportBox(),o=e.current,a=getComputedStyle(o),{display:c}=a,d={};c==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(m=>{d[m]=Ia[m](r,a)}),e.render();const p=e.measureViewportBox();return t.forEach(m=>{const v=e.getValue(m);v&&v.jump(d[m]),n[m]=Ia[m](p,a)}),n},cO=(n,e,t={},r={})=>{e={...e},r={...r};const o=Object.keys(e).filter(J1);let a=[],c=!1;const d=[];if(o.forEach(p=>{const m=n.getValue(p);if(!n.hasValue(p))return;let v=t[p],w=kl(v);const E=e[p];let b;if(Ah(E)){const L=E.length,V=E[0]===null?1:0;v=E[V],w=kl(v);for(let k=V;k<L&&E[k]!==null;k++)b?wg(kl(E[k])===b):b=kl(E[k])}else b=kl(E);if(w!==b)if(Nw(w)&&Nw(b)){const L=m.get();typeof L=="string"&&m.set(parseFloat(L)),typeof E=="string"?e[p]=parseFloat(E):Array.isArray(E)&&b===Ie&&(e[p]=E.map(parseFloat))}else w?.transform&&b?.transform&&(v===0||E===0)?v===0?m.set(b.transform(v)):e[p]=w.transform(E):(c||(a=aO(n),c=!0),d.push(p),r[p]=r[p]!==void 0?r[p]:e[p],m.jump(E))}),d.length){const p=d.indexOf("height")>=0?window.pageYOffset:null,m=lO(e,n,d);return a.length&&a.forEach(([v,w])=>{n.getValue(v).set(w)}),n.render(),rd&&p!==null&&window.scrollTo({top:p}),{target:m,transitionEnd:r}}else return{target:e,transitionEnd:r}};function uO(n,e,t,r){return sO(e)?cO(n,e,t,r):{target:e,transitionEnd:r}}const hO=(n,e,t,r)=>{const o=nO(n,e,r);return e=o.target,r=o.transitionEnd,uO(n,e,t,r)},om={current:null},Z1={current:!1};function dO(){if(Z1.current=!0,!!rd)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>om.current=n.matches;n.addListener(e),e()}else om.current=!1}function fO(n,e,t){const{willChange:r}=e;for(const o in e){const a=e[o],c=t[o];if(yn(a))n.addValue(o,a),Dh(r)&&r.add(o);else if(yn(c))n.addValue(o,Sa(a,{owner:n})),Dh(r)&&r.remove(o);else if(c!==a)if(n.hasValue(o)){const d=n.getValue(o);!d.hasAnimated&&d.set(a)}else{const d=n.getStaticValue(o);n.addValue(o,Sa(d!==void 0?d:a,{owner:n}))}}for(const o in t)e[o]===void 0&&n.removeValue(o);return e}const Aw=new WeakMap,eb=Object.keys(lc),pO=eb.length,Cw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],mO=hg.length;class gO{constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:o,visualState:a},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>nt.render(this.render,!1,!0);const{latestValues:d,renderState:p}=a;this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=p,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=o,this.options=c,this.isControllingVariants=id(t),this.isVariantNode=MT(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...v}=this.scrapeMotionValuesFromProps(t,{});for(const w in v){const E=v[w];d[w]!==void 0&&yn(E)&&(E.set(d[w],!1),Dh(m)&&m.add(w))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,Aw.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),Z1.current||dO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:om.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Aw.delete(this.current),this.projection&&this.projection.unmount(),gs(this.notifyUpdate),gs(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const r=ho.has(e),o=t.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&nt.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{o(),a()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},r,o,a){let c,d;for(let p=0;p<pO;p++){const m=eb[p],{isEnabled:v,Feature:w,ProjectionNode:E,MeasureLayout:b}=lc[m];E&&(c=E),v(t)&&(!this.features[m]&&w&&(this.features[m]=new w(this)),b&&(d=b))}if((this.type==="html"||this.type==="svg")&&!this.projection&&c){this.projection=new c(this.latestValues,this.parent&&this.parent.projection);const{layoutId:p,layout:m,drag:v,dragConstraints:w,layoutScroll:E,layoutRoot:b}=t;this.projection.setOptions({layoutId:p,layout:m,alwaysMeasureLayout:!!v||w&&ca(w),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof m=="string"?m:"both",initialPromotionConfig:a,layoutScroll:E,layoutRoot:b})}return d}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Tt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<Cw.length;r++){const o=Cw[r];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const a=e["on"+o];a&&(this.propEventSubscriptions[o]=this.on(o,a))}this.prevMotionValues=fO(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const t={};for(let r=0;r<mO;r++){const o=hg[r],a=this.props[o];(ac(a)||a===!1)&&(t[o]=a)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Sa(t,{owner:this}),this.addValue(e,r)),r}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props,o=typeof r=="string"||typeof r=="object"?(t=xg(this.props,r))===null||t===void 0?void 0:t[e]:void 0;if(r&&o!==void 0)return o;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!yn(a)?a:this.initialValues[e]!==void 0&&o===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Pg),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class tb extends gO{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...r},{transformValues:o},a){let c=jV(r,e||{},this);if(o&&(t&&(t=o(t)),r&&(r=o(r)),c&&(c=o(c))),a){CV(this,r,c);const d=hO(this,r,c,t);t=d.transitionEnd,r=d.target}return{transition:e,transitionEnd:t,...r}}}function yO(n){return window.getComputedStyle(n)}class vO extends tb{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(ho.has(t)){const r=bg(t);return r&&r.default||0}else{const r=yO(e),o=(zT(t)?r.getPropertyValue(t):r[t])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:t}){return z1(e,t)}build(e,t,r,o){pg(e,t,r,o.transformTemplate)}scrapeMotionValuesFromProps(e,t){return vg(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;yn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,r,o){KT(e,t,r,o)}}class xO extends tb{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(ho.has(t)){const r=bg(t);return r&&r.default||0}return t=QT.has(t)?t:cg(t),e.getAttribute(t)}measureInstanceViewportBox(){return Tt()}scrapeMotionValuesFromProps(e,t){return XT(e,t)}build(e,t,r,o){gg(e,t,r,this.isSVGTag,o.transformTemplate)}renderInstance(e,t,r,o){YT(e,t,r,o)}mount(e){this.isSVGTag=yg(e.tagName),super.mount(e)}}const wO=(n,e)=>fg(n)?new xO(e,{enableHardwareAcceleration:!1}):new vO(e,{enableHardwareAcceleration:!0}),_O={layout:{ProjectionNode:X1,MeasureLayout:q1}},EO={...KV,...pD,...ZL,..._O},Re=T4((n,e)=>tD(n,e,EO,wO));function nb(){const n=P.useRef(!1);return lg(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function TO(){const n=nb(),[e,t]=P.useState(0),r=P.useCallback(()=>{n.current&&t(e+1)},[e]);return[P.useCallback(()=>nt.postRender(r),[r]),e]}class bO extends P.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function SO({children:n,isPresent:e}){const t=P.useId(),r=P.useRef(null),o=P.useRef({width:0,height:0,top:0,left:0});return P.useInsertionEffect(()=>{const{width:a,height:c,top:d,left:p}=o.current;if(e||!r.current||!a||!c)return;r.current.dataset.motionPopId=t;const m=document.createElement("style");return document.head.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${c}px !important;
            top: ${d}px !important;
            left: ${p}px !important;
          }
        `),()=>{document.head.removeChild(m)}},[e]),P.createElement(bO,{isPresent:e,childRef:r,sizeRef:o},P.cloneElement(n,{ref:r}))}const pp=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:o,presenceAffectsLayout:a,mode:c})=>{const d=JT(IO),p=P.useId(),m=P.useMemo(()=>({id:p,initial:e,isPresent:t,custom:o,onExitComplete:v=>{d.set(v,!0);for(const w of d.values())if(!w)return;r&&r()},register:v=>(d.set(v,!1),()=>d.delete(v))}),a?void 0:[t]);return P.useMemo(()=>{d.forEach((v,w)=>d.set(w,!1))},[t]),P.useEffect(()=>{!t&&!d.size&&r&&r()},[t]),c==="popLayout"&&(n=P.createElement(SO,{isPresent:t},n)),P.createElement(nd.Provider,{value:m},n)};function IO(){return new Map}function NO(n){return P.useEffect(()=>()=>n(),[])}const Gi=n=>n.key||"";function kO(n,e){n.forEach(t=>{const r=Gi(t);e.set(r,t)})}function PO(n){const e=[];return P.Children.forEach(n,t=>{P.isValidElement(t)&&e.push(t)}),e}const AO=({children:n,custom:e,initial:t=!0,onExitComplete:r,exitBeforeEnter:o,presenceAffectsLayout:a=!0,mode:c="sync"})=>{const d=P.useContext(dg).forceRender||TO()[0],p=nb(),m=PO(n);let v=m;const w=P.useRef(new Map).current,E=P.useRef(v),b=P.useRef(new Map).current,L=P.useRef(!0);if(lg(()=>{L.current=!1,kO(m,b),E.current=v}),NO(()=>{L.current=!0,b.clear(),w.clear()}),L.current)return P.createElement(P.Fragment,null,v.map(M=>P.createElement(pp,{key:Gi(M),isPresent:!0,initial:t?void 0:!1,presenceAffectsLayout:a,mode:c},M)));v=[...v];const V=E.current.map(Gi),k=m.map(Gi),D=V.length;for(let M=0;M<D;M++){const j=V[M];k.indexOf(j)===-1&&!w.has(j)&&w.set(j,void 0)}return c==="wait"&&w.size&&(v=[]),w.forEach((M,j)=>{if(k.indexOf(j)!==-1)return;const W=b.get(j);if(!W)return;const ee=V.indexOf(j);let ae=M;if(!ae){const R=()=>{w.delete(j);const I=Array.from(b.keys()).filter(N=>!k.includes(N));if(I.forEach(N=>b.delete(N)),E.current=m.filter(N=>{const U=Gi(N);return U===j||I.includes(U)}),!w.size){if(p.current===!1)return;d(),r&&r()}};ae=P.createElement(pp,{key:Gi(W),isPresent:!1,onExitComplete:R,custom:e,presenceAffectsLayout:a,mode:c},W),w.set(j,ae)}v.splice(ee,0,ae)}),v=v.map(M=>{const j=M.key;return w.has(j)?M:P.createElement(pp,{key:Gi(M),isPresent:!0,presenceAffectsLayout:a,mode:c},M)}),P.createElement(P.Fragment,null,w.size?v:v.map(M=>P.cloneElement(M)))},CO="",Yu=new Map;class RO{constructor(){this.baseURL=CO}async getAuthToken(){return aa.currentUser?await aa.currentUser.getIdToken():null}async request(e,t={}){const r=`${this.baseURL}/api${e}`,o=await this.getAuthToken(),a={"Content-Type":"application/json",...t.headers};o&&(a.Authorization=`Bearer ${o}`);const c={...t,headers:a};try{const d=await fetch(r,c);if(!d.ok){const p=await d.json().catch(()=>({}));throw new Error(p.error||`HTTP ${d.status}`)}return await d.json()}catch(d){throw console.error(`API request failed: ${e}`,d),d}}async getGlyphs(e={}){const t=new URLSearchParams;Object.entries(e).forEach(([a,c])=>{c!=null&&c!==""&&t.append(a,c.toString())});const r=`/get-glyphs${t.toString()?"?"+t.toString():""}`;return(await this.request(r)).glyphs}async getGlyph(e){return(await this.request(`/get-glyph/${e}`)).glyph}async uploadGlyph(e){return await this.request("/upload-glyph",{method:"POST",body:JSON.stringify(e)})}async updateGlyph(e,t){return await this.request(`/update-glyph/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteGlyph(e){return await this.request(`/delete-glyph/${e}`,{method:"DELETE"})}async uploadFile(e,t="images"){const r=new FormData;r.append("file",e),r.append("type",t);const o=await this.getAuthToken(),c=await fetch("/api/upload-file",{method:"POST",headers:{Authorization:o?`Bearer ${o}`:""},body:r});if(!c.ok){const d=await c.json();throw new Error(d.error||"Failed to upload file")}return await c.json()}async deleteFile(e,t){return await this.request("/delete-file",{method:"DELETE",body:JSON.stringify({filename:e,type:t})})}getFileUrl(e,t){return`/api/files/${e}/${t}`}cleanImageUrl(e){if(!e)return e;if(Yu.has(e))return Yu.get(e);let t=e;if(e.startsWith("/api/files/"))return Yu.set(e,t),t;if(e.includes("://")){if(e.includes("127.0.0.1:5000")||e.includes("localhost:5000")){const r=e.match(/\/api\/files\/.*$/);r&&(t=r[0])}else if(e.includes("glyphmart.andreibanu.com")){const r=e.match(/\/api\/files\/.*$/);r&&(t=r[0])}}return Yu.set(e,t),t}async recordView(e){try{return(await this.request("/record-view",{method:"POST",body:JSON.stringify({glyphId:e})})).recorded}catch(t){return console.error("Failed to record view:",t),!1}}async recordDownload(e){try{return(await this.request("/record-download",{method:"POST",body:JSON.stringify({glyphId:e})})).recorded}catch(t){return console.error("Failed to record download:",t),!1}}async toggleLike(e){const t=await this.request("/toggle-like",{method:"POST",body:JSON.stringify({glyphId:e})});return{liked:t.liked,totalLikes:t.totalLikes}}async checkLikeStatus(e){return(await this.request(`/check-like-status?glyphId=${e}`)).liked}async getUserLikes(){return(await this.request("/get-user-likes")).glyphs}async getUser(e){return(await this.request(`/get-user/${e}`)).user}async getUserByUsername(e){return(await this.request(`/get-user-by-username/${e}`)).user}async updateUser(e){return await this.request("/update-user",{method:"POST",body:JSON.stringify(e)})}async deleteUserData(){return await this.request("/delete-user-data",{method:"DELETE"})}async healthCheck(){return await this.request("/health")}async getAdminStats(){return await this.request("/admin/stats")}async getAllUsers(){return(await this.request("/admin/users")).users}async adminUpdateUser(e,t){return await this.request(`/admin/users/${e}`,{method:"PUT",body:JSON.stringify(t)})}async makeUserAdmin(e){return await this.request(`/admin/make-admin/${e}`,{method:"POST"})}async addAdminByEmail(e){return await this.request("/admin/add-admin",{method:"POST",body:JSON.stringify({email:e})})}async adminDeleteGlyph(e){return await this.request(`/admin/glyphs/${e}`,{method:"DELETE"})}async getGlyphRequests(e={}){const t=new URLSearchParams(e);return this.request(`/glyph-requests?${t}`)}async createGlyphRequest(e){return this.request("/glyph-requests",{method:"POST",body:JSON.stringify(e)})}async getGlyphRequest(e){return this.request(`/glyph-requests/${e}`)}async takeOnGlyphRequest(e){return this.request(`/glyph-requests/${e}/take-on`,{method:"POST",body:JSON.stringify({})})}async completeGlyphRequest(e,t=null){const r=t?{glyph_id:t}:{};return this.request(`/glyph-requests/${e}/complete`,{method:"POST",body:JSON.stringify(r)})}async cancelGlyphRequest(e){return this.request(`/glyph-requests/${e}/cancel`,{method:"POST",body:JSON.stringify({})})}async getMyGlyphRequests(e="all"){const t=new URLSearchParams({type:e});return this.request(`/my-glyph-requests?${t}`)}async syncAllGlyphCounts(){return this.request("/admin/sync-glyph-counts",{method:"POST",body:JSON.stringify({syncAll:!0})})}async syncGlyphCounts(e={}){return this.request("/admin/sync-glyph-counts",{method:"POST",body:JSON.stringify(e)})}async getSyncStatus(){return this.request("/admin/sync-status")}}const Le=new RO,gn=n=>Le.cleanImageUrl(n),jO=()=>{const[n,e]=P.useState(!1),[t,r]=P.useState(""),{currentUser:o,userProfile:a,logout:c}=Gn(),d=fr(),p=io(),m=o?.uid==="9H3pw5zS6GRDFTZaoYspEmruORj2"||a?.isAdmin===!0,v=async()=>{try{await c(),d("/")}catch(E){console.error("Failed to log out:",E)}},w=E=>{E.preventDefault(),t.trim()&&d(`/search?q=${encodeURIComponent(t.trim())}`)};return u.jsxs("nav",{className:"bg-nothing-black border-b border-nothing-gray-800 sticky top-0 z-50",children:[u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"flex justify-between items-center h-16",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsxs(Ge,{to:"/",className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-8 h-8 bg-nothing-red rounded-full flex items-center justify-center",children:u.jsx("div",{className:"w-4 h-4 bg-nothing-white rounded-full animate-glow"})}),u.jsx("span",{className:"text-xl font-bold text-nothing-white font-nothing",children:"GlyphMart"})]})}),p.pathname!=="/search"&&p.pathname!=="/request-glyphs"&&u.jsx("div",{className:"hidden md:block flex-1 max-w-lg mx-8",children:u.jsxs("form",{onSubmit:w,className:"relative",children:[u.jsx("input",{type:"text",value:t,onChange:E=>r(E.target.value),placeholder:"Search glyphs...",className:"w-full bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg py-2 pl-10 pr-4 text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200"}),u.jsx(ts,{className:"absolute left-3 top-2.5 h-5 w-5 text-nothing-gray-400"})]})}),u.jsx("div",{className:"hidden md:flex items-center space-x-4",children:o?u.jsxs(u.Fragment,{children:[u.jsxs(Ge,{to:"/upload",className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center space-x-2",children:[u.jsx(CT,{className:"h-4 w-4"}),u.jsx("span",{children:"Upload Glyph"})]}),u.jsxs("div",{className:"relative group",children:[u.jsxs("button",{className:"flex items-center space-x-2 text-nothing-white hover:text-nothing-gray-300 transition-colors duration-200",children:[u.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden border border-nothing-gray-600",children:a?.profilePicture||o.photoURL?u.jsx("img",{src:gn(a?.profilePicture||o.photoURL),alt:"Profile",loading:"lazy",className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full bg-nothing-gray-700 flex items-center justify-center",children:u.jsx(ls,{className:"h-4 w-4"})})}),u.jsx("span",{className:"font-medium",children:a?.username||o.displayName})]}),u.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200",children:u.jsxs("div",{className:"py-1",children:[u.jsxs(Ge,{to:`/storefront/${a?.username||o.displayName}`,className:"block px-4 py-2 text-sm text-nothing-white hover:bg-nothing-gray-800 transition-colors duration-200 flex items-center space-x-2",children:[u.jsx(Nx,{className:"h-4 w-4"}),u.jsx("span",{children:"My Storefront"})]}),u.jsxs(Ge,{to:"/liked",className:"block px-4 py-2 text-sm text-nothing-white hover:bg-nothing-gray-800 transition-colors duration-200 flex items-center space-x-2",children:[u.jsx(ur,{className:"h-4 w-4"}),u.jsx("span",{children:"Liked Posts"})]}),u.jsxs(Ge,{to:"/request-glyphs",className:"block px-4 py-2 text-sm text-nothing-white hover:bg-nothing-gray-800 transition-colors duration-200 flex items-center space-x-2",children:[u.jsx(as,{className:"h-4 w-4"}),u.jsx("span",{children:"Request Glyphs"})]}),u.jsxs(Ge,{to:"/my-requests",className:"block px-4 py-2 text-sm text-nothing-white hover:bg-nothing-gray-800 transition-colors duration-200 flex items-center space-x-2",children:[u.jsx(as,{className:"h-4 w-4"}),u.jsx("span",{children:"My Requests"})]}),u.jsxs(Ge,{to:"/settings",className:"block px-4 py-2 text-sm text-nothing-white hover:bg-nothing-gray-800 transition-colors duration-200 flex items-center space-x-2",children:[u.jsx(Wp,{className:"h-4 w-4"}),u.jsx("span",{children:"Settings"})]}),m&&u.jsxs(Ge,{to:"/admin",className:"block px-4 py-2 text-sm text-nothing-white hover:bg-nothing-gray-800 transition-colors duration-200 flex items-center space-x-2",children:[u.jsx(la,{className:"h-4 w-4"}),u.jsx("span",{children:"Admin Panel"})]}),u.jsxs("button",{onClick:v,className:"w-full text-left block px-4 py-2 text-sm text-nothing-white hover:bg-nothing-gray-800 transition-colors duration-200 flex items-center space-x-2",children:[u.jsx(bx,{className:"h-4 w-4"}),u.jsx("span",{children:"Logout"})]})]})})]})]}):u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx(Ge,{to:"/login",className:"text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200",children:"Login"}),u.jsx(Ge,{to:"/signup",className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",children:"Sign Up"})]})}),u.jsx("div",{className:"md:hidden",children:u.jsx("button",{onClick:()=>e(!n),className:"text-nothing-white hover:text-nothing-gray-300 transition-colors duration-200",children:n?u.jsx(DT,{className:"h-6 w-6"}):u.jsx(o4,{className:"h-6 w-6"})})})]}),u.jsx("div",{className:"md:hidden pb-4",children:u.jsxs("form",{onSubmit:w,className:"relative",children:[u.jsx("input",{type:"text",value:t,onChange:E=>r(E.target.value),placeholder:"Search glyphs...",className:"w-full bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg py-2 pl-10 pr-4 text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200"}),u.jsx(ts,{className:"absolute left-3 top-2.5 h-5 w-5 text-nothing-gray-400"})]})})]}),u.jsx(AO,{children:n&&u.jsx(Re.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden bg-nothing-gray-900 border-t border-nothing-gray-800",children:u.jsx("div",{className:"px-4 py-4 space-y-4",children:o?u.jsxs(u.Fragment,{children:[u.jsx(Ge,{to:"/upload",className:"block bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 text-center",onClick:()=>e(!1),children:"Upload Glyph"}),u.jsxs(Ge,{to:`/storefront/${a?.username||o.displayName}`,className:"block text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200 flex items-center space-x-2",onClick:()=>e(!1),children:[u.jsx(Nx,{className:"h-4 w-4"}),u.jsx("span",{children:"My Storefront"})]}),u.jsxs(Ge,{to:"/liked",className:"block text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200 flex items-center space-x-2",onClick:()=>e(!1),children:[u.jsx(ur,{className:"h-4 w-4"}),u.jsx("span",{children:"Liked Posts"})]}),u.jsxs(Ge,{to:"/settings",className:"block text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200 flex items-center space-x-2",onClick:()=>e(!1),children:[u.jsx(Wp,{className:"h-4 w-4"}),u.jsx("span",{children:"Settings"})]}),m&&u.jsxs(Ge,{to:"/admin",className:"block text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200 flex items-center space-x-2",onClick:()=>e(!1),children:[u.jsx(la,{className:"h-4 w-4"}),u.jsx("span",{children:"Admin Panel"})]}),u.jsxs("button",{onClick:()=>{v(),e(!1)},className:"block w-full text-left text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200 flex items-center space-x-2",children:[u.jsx(bx,{className:"h-4 w-4"}),u.jsx("span",{children:"Logout"})]})]}):u.jsxs(u.Fragment,{children:[u.jsx(Ge,{to:"/login",className:"block text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200",onClick:()=>e(!1),children:"Login"}),u.jsx(Ge,{to:"/signup",className:"block bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 text-center",onClick:()=>e(!1),children:"Sign Up"})]})})})})]})},Ag=Lh.memo(({glyph:n})=>{const e=fr(),t=P.useMemo(()=>n.images&&n.images.length>0?gn(n.images[0]):null,[n.images]),r=()=>{e(`/glyph/${n.id}`)},o=a=>{a.stopPropagation()};return u.jsx(Re.div,{whileHover:{y:-5},className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg overflow-hidden hover:border-nothing-gray-700 transition-all duration-300",children:u.jsxs("div",{className:"cursor-pointer",onClick:r,children:[u.jsxs("div",{className:"aspect-square bg-nothing-gray-800 relative overflow-hidden",children:[t?u.jsx("img",{src:t,alt:n.title,loading:"lazy",className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"}):u.jsx("div",{className:"w-full h-full flex items-center justify-center",children:u.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center glyph-animation",children:u.jsx(Nr,{className:"h-8 w-8 text-nothing-white"})})}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-nothing-black/80 via-transparent to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300",children:u.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:u.jsxs("div",{className:"flex items-center justify-between text-nothing-white text-sm",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(ms,{className:"h-4 w-4"}),u.jsx("span",{children:n.downloads||0})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(ur,{className:"h-4 w-4"}),u.jsx("span",{children:n.likes||0})]})]})})})]}),u.jsxs("div",{className:"p-4",children:[u.jsx("h3",{className:"text-nothing-white font-semibold text-lg mb-2 truncate",children:n.title}),u.jsx("p",{className:"text-nothing-gray-400 text-sm mb-3 line-clamp-2",children:n.description}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs(Ge,{to:`/storefront/${n.creatorUsername}`,className:"text-nothing-red hover:text-red-400 text-sm font-medium transition-colors duration-200",onClick:o,children:["@",n.creatorUsername]}),u.jsxs("div",{className:"flex items-center space-x-4 text-nothing-gray-500 text-sm",children:[u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(ms,{className:"h-3 w-3"}),u.jsx("span",{children:n.downloads||0})]}),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(Nn,{className:"h-3 w-3"}),u.jsx("span",{children:n.views||0})]})]})]})]})]})})});Ag.displayName="GlyphCard";const DO=()=>{const[n,e]=P.useState([]),[t,r]=P.useState([]),[o,a]=P.useState(!0),[c,d]=P.useState("latest");return P.useEffect(()=>{(async()=>{try{const m=await Le.getGlyphs({sort:"latest",limit:12}),v=await Le.getGlyphs({sort:"popular",limit:12});e(m),r(v)}catch(m){console.error("Error fetching glyphs:",m)}finally{a(!1)}})()},[]),o?u.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-4 glyph-animation",children:u.jsx(Nr,{className:"h-8 w-8 text-nothing-white"})}),u.jsx("p",{className:"text-nothing-gray-400",children:"Loading latest glyphs..."})]})}):u.jsxs("div",{className:"min-h-screen bg-nothing-black",children:[u.jsxs("section",{className:"relative py-20 px-4 sm:px-6 lg:px-8",children:[u.jsx("div",{className:"max-w-7xl mx-auto text-center",children:u.jsxs(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:[u.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-nothing-white mb-6 font-nothing",children:["Glyph",u.jsx("span",{className:"text-nothing-red",children:"Mart"})]}),u.jsx("p",{className:"text-xl md:text-2xl text-nothing-gray-300 mb-8 max-w-3xl mx-auto",children:"Discover, share, and download custom Nothing Phone(3) glyphs created by the community"}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[u.jsx(Ge,{to:"/search",className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-8 py-3 rounded-lg font-semibold text-lg transition-colors duration-200",children:"Browse Glyphs"}),u.jsx(Ge,{to:"/upload",className:"border border-nothing-gray-700 hover:border-nothing-gray-600 text-nothing-white px-8 py-3 rounded-lg font-semibold text-lg transition-colors duration-200",children:"Upload Your Glyph"}),u.jsx(Ge,{to:"/request-glyphs",className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-nothing-white px-8 py-3 rounded-lg font-semibold text-lg transition-colors duration-200",children:"Request Glyph Toys"})]})]})}),u.jsx("div",{className:"absolute top-1/2 left-1/4 transform -translate-y-1/2 opacity-20",children:u.jsx("div",{className:"w-20 h-20 bg-nothing-red rounded-full flex items-center justify-center animate-float",children:u.jsx(Nr,{className:"h-10 w-10 text-nothing-white"})})}),u.jsx("div",{className:"absolute top-1/3 right-1/4 transform -translate-y-1/2 opacity-10",children:u.jsx("div",{className:"w-16 h-16 bg-nothing-white rounded-full flex items-center justify-center animate-float",style:{animationDelay:"1s"},children:u.jsx(Nr,{className:"h-8 w-8 text-nothing-black"})})})]}),u.jsx("section",{className:"px-4 sm:px-6 lg:px-8 mb-8",children:u.jsx("div",{className:"max-w-7xl mx-auto",children:u.jsxs("div",{className:"flex space-x-4 border-b border-nothing-gray-800",children:[u.jsxs("button",{onClick:()=>d("latest"),className:`flex items-center space-x-2 px-4 py-3 font-medium border-b-2 transition-colors duration-200 ${c==="latest"?"border-nothing-red text-nothing-red":"border-transparent text-nothing-gray-400 hover:text-nothing-white"}`,children:[u.jsx(oc,{className:"h-4 w-4"}),u.jsx("span",{children:"Latest"})]}),u.jsxs("button",{onClick:()=>d("popular"),className:`flex items-center space-x-2 px-4 py-3 font-medium border-b-2 transition-colors duration-200 ${c==="popular"?"border-nothing-red text-nothing-red":"border-transparent text-nothing-gray-400 hover:text-nothing-white"}`,children:[u.jsx(jT,{className:"h-4 w-4"}),u.jsx("span",{children:"Popular"})]})]})})}),u.jsx("section",{className:"px-4 sm:px-6 lg:px-8 pb-20",children:u.jsxs("div",{className:"max-w-7xl mx-auto",children:[u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:(c==="latest"?n:t).map((p,m)=>u.jsx(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:m*.1},children:u.jsx(Ag,{glyph:p})},p.id))}),(c==="latest"?n:t).length===0&&u.jsxs("div",{className:"text-center py-12",children:[u.jsx("div",{className:"w-16 h-16 bg-nothing-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(Nr,{className:"h-8 w-8 text-nothing-gray-600"})}),u.jsx("p",{className:"text-nothing-gray-400 text-lg",children:"No glyphs found"}),u.jsx("p",{className:"text-nothing-gray-500 text-sm mt-2",children:"Be the first to share your custom Nothing Phone(3) glyph!"})]})]})}),u.jsx("footer",{className:"px-4 sm:px-6 lg:px-8 pb-8",children:u.jsx("div",{className:"max-w-7xl mx-auto border-t border-nothing-gray-900 pt-6",children:u.jsxs("div",{className:"text-center space-y-4",children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("p",{className:"text-nothing-gray-400 text-sm mb-3",children:"Enjoying GlyphMart? Support the development!"}),u.jsxs("a",{href:"https://buymeacoffee.com/PzmuV1517",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-2 bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded-lg font-medium text-sm transition-colors duration-200",children:[u.jsx("span",{children:""}),u.jsx("span",{children:"Buy me a coffee"})]})]}),u.jsxs("div",{children:[u.jsxs("p",{className:"text-nothing-gray-500 text-sm mb-2",children:["Looking for tones instead? Check out"," ",u.jsx("a",{href:"https://glyphtones.firu.dev/",target:"_blank",rel:"noopener noreferrer",className:"text-nothing-gray-400 hover:text-nothing-gray-300 underline transition-colors duration-200 font-medium",children:"GlyphTones"})," ","by Firu - great work!"]}),u.jsx("p",{className:"text-nothing-gray-600 text-xs mt-3",children:"Hope you figure things out, Moody. Thanks for reminding me about rdr2. I love you lil dude "})]})]})})})]})},VO=()=>{const[n,e]=P.useState({email:"",password:""}),[t,r]=P.useState(!1),[o,a]=P.useState(!1),[c,d]=P.useState(""),{signin:p}=Gn(),m=fr(),v=E=>{e({...n,[E.target.name]:E.target.value}),d("")},w=async E=>{E.preventDefault(),a(!0),d("");try{await p(n.email,n.password),m("/")}catch(b){switch(console.error("Login error:",b),b.code){case"auth/user-not-found":d("No account found with this email address.");break;case"auth/wrong-password":d("Incorrect password.");break;case"auth/invalid-email":d("Invalid email address.");break;case"auth/too-many-requests":d("Too many failed attempts. Please try again later.");break;default:d("Failed to sign in. Please try again.")}}finally{a(!1)}};return u.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"max-w-md w-full space-y-8",children:[u.jsxs(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center",children:[u.jsx("div",{className:"flex justify-center mb-6",children:u.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center glyph-animation",children:u.jsx(Nr,{className:"h-8 w-8 text-nothing-white"})})}),u.jsx("h2",{className:"text-3xl font-bold text-nothing-white font-nothing",children:"Welcome back"}),u.jsx("p",{className:"mt-2 text-nothing-gray-400",children:"Sign in to your GlyphMart account"})]}),u.jsxs(Re.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"mt-8 space-y-6",onSubmit:w,children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(ag,{className:"h-5 w-5 text-nothing-gray-400"})}),u.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n.email,onChange:v,className:"appearance-none relative block w-full px-10 py-3 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Email address"})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(Xs,{className:"h-5 w-5 text-nothing-gray-400"})}),u.jsx("input",{id:"password",name:"password",type:t?"text":"password",autoComplete:"current-password",required:!0,value:n.password,onChange:v,className:"appearance-none relative block w-full px-10 py-3 pr-10 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Password"}),u.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>r(!t),children:t?u.jsx(ya,{className:"h-5 w-5 text-nothing-gray-400 hover:text-nothing-gray-300"}):u.jsx(Nn,{className:"h-5 w-5 text-nothing-gray-400 hover:text-nothing-gray-300"})})]})]})]}),c&&u.jsx(Re.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-900/20 border border-red-700 text-red-400 px-4 py-3 rounded-lg text-sm",children:c}),u.jsx("div",{className:"flex items-center justify-between",children:u.jsx("div",{className:"text-sm",children:u.jsx(Ge,{to:"/forgot-password",className:"text-nothing-red hover:text-red-400 transition-colors duration-200",children:"Forgot your password?"})})}),u.jsx("div",{children:u.jsx("button",{type:"submit",disabled:o,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-nothing-white bg-nothing-red hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nothing-red disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:o?u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-nothing-white mr-2"}),"Signing in..."]}):"Sign in"})}),u.jsx("div",{className:"text-center",children:u.jsxs("p",{className:"text-nothing-gray-400",children:["Don't have an account?"," ",u.jsx(Ge,{to:"/signup",className:"text-nothing-red hover:text-red-400 font-medium transition-colors duration-200",children:"Sign up"})]})})]})]})})},LO=()=>{const[n,e]=P.useState({email:"",username:"",displayName:"",password:"",confirmPassword:""}),[t,r]=P.useState(!1),[o,a]=P.useState(!1),[c,d]=P.useState(!1),[p,m]=P.useState(""),{signup:v}=Gn(),w=fr(),E=V=>{e({...n,[V.target.name]:V.target.value}),m("")},b=()=>n.password!==n.confirmPassword?(m("Passwords do not match"),!1):n.password.length<6?(m("Password must be at least 6 characters long"),!1):n.username.length<3?(m("Username must be at least 3 characters long"),!1):/^[a-zA-Z0-9_]+$/.test(n.username)?!0:(m("Username can only contain letters, numbers, and underscores"),!1),L=async V=>{if(V.preventDefault(),d(!0),m(""),!b()){d(!1);return}try{await v(n.email,n.password,n.username,n.displayName),w("/")}catch(k){switch(console.error("Signup error:",k),k.code){case"auth/email-already-in-use":m("An account with this email already exists.");break;case"auth/invalid-email":m("Invalid email address.");break;case"auth/weak-password":m("Password is too weak.");break;default:m("Failed to create account. Please try again.")}}finally{d(!1)}};return u.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center px-4 sm:px-6 lg:px-8 py-12",children:u.jsxs("div",{className:"max-w-md w-full space-y-8",children:[u.jsxs(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center",children:[u.jsx("div",{className:"flex justify-center mb-6",children:u.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center glyph-animation",children:u.jsx(Nr,{className:"h-8 w-8 text-nothing-white"})})}),u.jsx("h2",{className:"text-3xl font-bold text-nothing-white font-nothing",children:"Join GlyphMart"}),u.jsx("p",{className:"mt-2 text-nothing-gray-400",children:"Create your account and start sharing glyphs"})]}),u.jsxs(Re.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"mt-8 space-y-6",onSubmit:L,children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(ag,{className:"h-5 w-5 text-nothing-gray-400"})}),u.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n.email,onChange:E,className:"appearance-none relative block w-full px-10 py-3 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Email address"})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"username",className:"sr-only",children:"Username"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(Zj,{className:"h-5 w-5 text-nothing-gray-400"})}),u.jsx("input",{id:"username",name:"username",type:"text",autoComplete:"username",required:!0,value:n.username,onChange:E,className:"appearance-none relative block w-full px-10 py-3 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Username"})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"displayName",className:"sr-only",children:"Display Name"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(ls,{className:"h-5 w-5 text-nothing-gray-400"})}),u.jsx("input",{id:"displayName",name:"displayName",type:"text",autoComplete:"name",required:!0,value:n.displayName,onChange:E,className:"appearance-none relative block w-full px-10 py-3 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Display Name"})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(Xs,{className:"h-5 w-5 text-nothing-gray-400"})}),u.jsx("input",{id:"password",name:"password",type:t?"text":"password",autoComplete:"new-password",required:!0,value:n.password,onChange:E,className:"appearance-none relative block w-full px-10 py-3 pr-10 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Password"}),u.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>r(!t),children:t?u.jsx(ya,{className:"h-5 w-5 text-nothing-gray-400 hover:text-nothing-gray-300"}):u.jsx(Nn,{className:"h-5 w-5 text-nothing-gray-400 hover:text-nothing-gray-300"})})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"confirmPassword",className:"sr-only",children:"Confirm Password"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(Xs,{className:"h-5 w-5 text-nothing-gray-400"})}),u.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:o?"text":"password",autoComplete:"new-password",required:!0,value:n.confirmPassword,onChange:E,className:"appearance-none relative block w-full px-10 py-3 pr-10 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Confirm Password"}),u.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>a(!o),children:o?u.jsx(ya,{className:"h-5 w-5 text-nothing-gray-400 hover:text-nothing-gray-300"}):u.jsx(Nn,{className:"h-5 w-5 text-nothing-gray-400 hover:text-nothing-gray-300"})})]})]})]}),p&&u.jsx(Re.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-900/20 border border-red-700 text-red-400 px-4 py-3 rounded-lg text-sm",children:p}),u.jsx("div",{children:u.jsx("button",{type:"submit",disabled:c,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-nothing-white bg-nothing-red hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nothing-red disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:c?u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-nothing-white mr-2"}),"Creating account..."]}):"Create Account"})}),u.jsx("div",{className:"text-center",children:u.jsxs("p",{className:"text-nothing-gray-400",children:["Already have an account?"," ",u.jsx(Ge,{to:"/login",className:"text-nothing-red hover:text-red-400 font-medium transition-colors duration-200",children:"Sign in"})]})})]})]})})},uc=({onFileUpload:n,acceptedTypes:e="images",multiple:t=!1,maxFiles:r=5})=>{const[o,a]=P.useState(!1),[c,d]=P.useState([]),[p,m]=P.useState(!1),v=P.useRef(null),w=()=>{switch(e){case"images":return"image/png,image/jpeg,image/jpg,image/gif,image/webp";case"apks":return".apk";case"profile":return"image/png,image/jpeg,image/jpg,image/gif,image/webp";default:return""}},E=j=>j.type?.startsWith("image/")?u.jsx(Hp,{className:"w-8 h-8 text-blue-500"}):u.jsx(PT,{className:"w-8 h-8 text-gray-500"}),b=j=>{const W=Array.from(j);if(!t&&W.length>1){alert("Only one file is allowed");return}if(t&&c.length+W.length>r){alert(`Maximum ${r} files allowed`);return}W.forEach(L)},L=async j=>{if(j){a(!0);try{const W=await Le.uploadFile(j,e),ee={id:Date.now()+Math.random(),name:j.name,url:W.url,thumbnail:W.thumbnail,filename:W.filename,type:W.type,file:j};d(ae=>[...ae,ee]),n(ee)}catch(W){console.error("Upload failed:",W),alert("Upload failed: "+W.message)}finally{a(!1)}}},V=async j=>{try{j.filename&&await Le.deleteFile(j.filename,j.type),d(W=>W.filter(ee=>ee.id!==j.id)),n(null,j)}catch(W){console.error("Failed to delete file:",W),alert("Failed to delete file: "+W.message)}},k=j=>{j.preventDefault(),j.stopPropagation(),j.type==="dragenter"||j.type==="dragover"?m(!0):j.type==="dragleave"&&m(!1)},D=j=>{j.preventDefault(),j.stopPropagation(),m(!1),j.dataTransfer.files&&j.dataTransfer.files[0]&&b(j.dataTransfer.files)},M=()=>{v.current?.click()};return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:`border-2 border-dashed rounded-lg p-6 text-center transition-colors cursor-pointer
          ${p?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}
          ${o?"opacity-50 pointer-events-none":""}`,onDragEnter:k,onDragLeave:k,onDragOver:k,onDrop:D,onClick:M,children:[u.jsx("input",{ref:v,type:"file",multiple:t,accept:w(),onChange:j=>b(j.target.files),className:"hidden"}),u.jsx(Nh,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),u.jsx("p",{className:"text-lg font-medium text-gray-700 mb-2",children:o?"Uploading...":`Upload ${e==="apks"?"APK file":"images"}`}),u.jsx("p",{className:"text-sm text-gray-500",children:"Drag and drop files here, or click to select files"}),e==="images"&&u.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Supported: PNG, JPG, JPEG, GIF, WebP (max 50MB each)"}),e==="apks"&&u.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Supported: APK files (max 50MB)"})]}),c.length>0&&u.jsxs("div",{className:"space-y-2",children:[u.jsx("h4",{className:"font-medium text-gray-700",children:"Uploaded Files:"}),u.jsx("div",{className:"grid gap-2",children:c.map(j=>u.jsxs(Re.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[j.thumbnail?u.jsx("img",{src:gn(j.thumbnail),alt:"Preview",className:"w-10 h-10 object-cover rounded"}):E(j.file),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-700 truncate max-w-48",children:j.name}),u.jsxs("p",{className:"text-xs text-gray-500",children:[e==="images"?"Image":"APK","  Uploaded"]})]})]}),u.jsx("button",{onClick:()=>V(j),className:"p-1 text-red-500 hover:text-red-700 transition-colors",title:"Remove file",children:u.jsx(DT,{className:"w-4 h-4"})})]},j.id))})]})]})},OO=()=>{const{id:n}=Fw(),[e,t]=P.useState(null),[r,o]=P.useState(!0),[a,c]=P.useState(!1),[d,p]=P.useState(!1),[m,v]=P.useState(!1),[w,E]=P.useState(!1),{currentUser:b,userProfile:L}=Gn(),[V,k]=P.useState(!1),[D,M]=P.useState(null),[j,W]=P.useState(!1),[ee,ae]=P.useState(""),[R,I]=P.useState(!1),[N,U]=P.useState(!1),[B,$]=P.useState(!1),[A,we]=P.useState([]),Ue=fr();P.useEffect(()=>{n&&(async()=>{try{const he=await Le.getGlyph(n);if(he.createdAt&&(he.createdAt=new Date(he.createdAt)),t(he),await Le.recordView(n),b){const ve=await Le.checkLikeStatus(n);p(ve)}else p(!1)}catch(he){console.error("Error fetching glyph:",he),he.message.includes("not found")&&Ue("/404")}finally{o(!1)}})()},[n,Ue,b]);const Ve=async()=>{if(!(!e.apkUrl&&!e.githubUrl)){if(e.apkUrl)E(!0);else if(e.githubUrl){window.open(e.githubUrl,"_blank");try{await Le.recordDownload(n)&&t(he=>({...he,downloads:(he.downloads||0)+1}))}catch(oe){console.error("Error updating download count:",oe)}}}},Te=async()=>{c(!0);try{const oe=await Le.recordDownload(n),he=document.createElement("a");he.href=e.apkUrl,he.download=`${e.title.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.apk`,document.body.appendChild(he),he.click(),document.body.removeChild(he),oe&&t(ve=>({...ve,downloads:(ve.downloads||0)+1}))}catch(oe){console.error("Error downloading glyph:",oe)}finally{c(!1),E(!1)}},le=async()=>{if(!b||m){b||Ue("/login");return}v(!0);try{const oe=await Le.toggleLike(n);p(oe.liked),t(he=>({...he,likes:oe.totalLikes}))}catch(oe){console.error("Error liking glyph:",oe)}finally{v(!1)}},J=async()=>{const oe=window.location.href;if(navigator.share)try{await navigator.share({title:e.title,text:e.description,url:oe})}catch(he){console.error("Error sharing:",he),Z(oe)}else Z(oe)},Z=async oe=>{try{await navigator.clipboard.writeText(oe),alert("Link copied to clipboard!")}catch(he){console.error("Error copying to clipboard:",he)}};P.useEffect(()=>{V&&e&&M({title:e.title,description:e.description,apkUrl:e.apkUrl||"",githubUrl:e.githubUrl||"",instructions:e.instructions||"",images:e.images||[]})},[V,e]);const O=oe=>{const{name:he,value:ve}=oe.target;M(De=>({...De,[he]:ve})),ae("")},X=(oe,he)=>{oe?(we(ve=>[...ve,oe]),M(ve=>({...ve,images:[...ve.images,oe.url]}))):he&&(we(ve=>ve.filter(De=>De.id!==he.id)),M(ve=>({...ve,images:ve.images.filter(De=>De!==he.url)})))},fe=async oe=>{oe.preventDefault(),W(!0),ae("");try{await Le.updateGlyph(e.id,{title:D.title,description:D.description,apkUrl:D.apkUrl,githubUrl:D.githubUrl,instructions:D.instructions,images:D.images}),k(!1),t(he=>({...he,...D}))}catch(he){ae("Failed to update glyph: "+he.message)}finally{W(!1)}};return r?u.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-4 glyph-animation",children:u.jsx("div",{className:"w-8 h-8 bg-nothing-white rounded-full"})}),u.jsx("p",{className:"text-nothing-gray-400",children:"Loading glyph..."})]})}):e?e.deleted?u.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-2xl font-bold text-red-500 mb-4",children:"Glyph Deleted"}),u.jsx("p",{className:"text-nothing-gray-400 mb-6",children:"This glyph has been deleted by its creator and is no longer available."}),u.jsx(Ge,{to:"/",className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-6 py-3 rounded-lg font-medium transition-colors duration-200",children:"Return to home"})]})}):u.jsxs("div",{className:"min-h-screen bg-nothing-black",children:[u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsx(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"aspect-square bg-nothing-gray-900 rounded-lg overflow-hidden",children:e.images&&e.images.length>0?u.jsx("img",{src:gn(e.images[0]),alt:e.title,loading:"lazy",className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full flex items-center justify-center",children:u.jsx("div",{className:"w-24 h-24 bg-nothing-red rounded-full flex items-center justify-center glyph-animation",children:u.jsx("div",{className:"w-12 h-12 bg-nothing-white rounded-full"})})})}),L&&e.creatorUsername===L.username&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex space-x-3 mt-6",children:[u.jsx("button",{type:"button",onClick:()=>k(!0),className:"px-6 py-3 bg-nothing-gray-700 hover:bg-nothing-gray-800 text-nothing-white rounded-lg font-medium transition-colors duration-200",children:"Edit Glyph"}),u.jsx("button",{type:"button",onClick:()=>I(!0),className:"px-6 py-3 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200",children:"Delete Glyph"})]}),R&&u.jsx("div",{className:"fixed inset-0 bg-nothing-black/80 flex items-center justify-center z-50 p-4",children:u.jsxs(Re.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6 max-w-md w-full",children:[u.jsxs("div",{className:"text-center mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-nothing-white mb-4",children:"Delete Glyph?"}),u.jsx("p",{className:"text-nothing-gray-300 mb-4",children:"Are you sure you want to permanently delete this glyph and all its related data? This action cannot be undone."})]}),u.jsxs("div",{className:"flex space-x-3",children:[u.jsx("button",{onClick:async()=>{if(!N){U(!0);try{await Le.deleteGlyph(e.id)}catch(oe){console.error("Error deleting glyph:",oe)}finally{U(!1),I(!1),Ue("/")}}},disabled:N,className:"flex-1 bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50",children:N?"Deleting...":"Yes, Delete"}),u.jsx("button",{onClick:()=>I(!1),disabled:N,className:"px-4 py-2 border border-nothing-gray-700 text-nothing-white hover:border-nothing-gray-600 rounded-lg font-medium transition-colors duration-200",children:"Cancel"})]})]})})]})]}),u.jsxs(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-nothing-white mb-4 font-nothing",children:e.title}),u.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[u.jsxs(Ge,{to:`/storefront/${e.creatorUsername||e.creatorId}`,className:"flex items-center space-x-2 text-nothing-red hover:text-red-400 transition-colors duration-200",children:[u.jsx(ls,{className:"h-4 w-4"}),u.jsxs("span",{className:"font-medium",children:["@",e.creatorUsername||e.creatorId]})]}),u.jsxs("div",{className:"flex items-center space-x-1 text-nothing-gray-400",children:[u.jsx(og,{className:"h-4 w-4"}),u.jsx("span",{className:"text-sm",children:e.createdAt?.toDate?.()?.toLocaleDateString()||"Unknown date"})]})]}),u.jsx("div",{className:"text-nothing-gray-300 text-lg leading-relaxed mb-6",style:{position:"relative"},children:e.description?u.jsxs("div",{style:{position:"relative"},children:[u.jsx("span",{className:B?"":"glyph-fade-text glyph-line-clamp",style:B?{display:"block",maxHeight:"none",overflow:"visible"}:void 0,children:e.description}),u.jsx("button",{type:"button",onClick:()=>$(oe=>!oe),className:"ml-2 text-nothing-red hover:underline focus:outline-none relative z-10",style:{marginTop:"0.5em"},children:B?"Show Less":"Show More"})]}):null})]}),u.jsxs("div",{className:"flex items-center space-x-6 py-4 border-y border-nothing-gray-800",children:[u.jsxs("div",{className:"flex items-center space-x-2 text-nothing-gray-400",children:[u.jsx(ms,{className:"h-5 w-5"}),u.jsx("span",{children:(()=>{const oe=e.downloads||0;return`${oe} ${oe===1?"download":"downloads"}`})()})]}),u.jsxs("div",{className:"flex items-center space-x-2 text-nothing-gray-400",children:[u.jsx(Nn,{className:"h-5 w-5"}),u.jsx("span",{children:(()=>{const oe=e.views||0;return`${oe} ${oe===1?"view":"views"}`})()})]}),u.jsxs("div",{className:"flex items-center space-x-2 text-nothing-gray-400",children:[u.jsx(ur,{className:"h-5 w-5"}),u.jsx("span",{children:(()=>{const oe=e.likes||0;return`${oe} ${oe===1?"like":"likes"}`})()})]})]}),u.jsxs("div",{className:"flex space-x-4",children:[(e.apkUrl||e.githubUrl)&&u.jsxs("button",{onClick:Ve,className:"flex-1 bg-nothing-red hover:bg-red-700 text-nothing-white px-6 py-3 rounded-lg font-semibold flex items-center justify-center space-x-2 transition-colors duration-200",children:[u.jsx(ms,{className:"h-5 w-5"}),u.jsx("span",{children:e.apkUrl?"Download APK":"View on GitHub"})]}),u.jsxs("button",{onClick:le,disabled:m,className:`px-6 py-3 rounded-lg font-semibold flex items-center justify-center space-x-2 transition-colors duration-200 min-w-[120px] ${d?"bg-nothing-red text-nothing-white":"border border-nothing-gray-700 text-nothing-white hover:border-nothing-gray-600"} ${m?"opacity-50 cursor-not-allowed":""}`,children:[u.jsx(ur,{className:`h-5 w-5 ${d?"fill-current":""}`}),u.jsx("span",{children:m?"...":d?"Liked":"Like"})]}),u.jsx("button",{onClick:J,className:"px-6 py-3 border border-nothing-gray-700 text-nothing-white hover:border-nothing-gray-600 rounded-lg font-semibold flex items-center justify-center space-x-2 transition-colors duration-200",children:u.jsx(c4,{className:"h-5 w-5"})})]}),(e.githubUrl||e.instructions)&&u.jsxs("div",{className:"space-y-3",children:[u.jsx("h3",{className:"text-lg font-semibold text-nothing-white",children:e.githubUrl&&e.instructions?"Links & Instructions":e.githubUrl?"Repository":"Instructions"}),e.githubUrl&&u.jsxs("a",{href:e.githubUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 text-nothing-gray-300 hover:text-nothing-white transition-colors duration-200",children:[u.jsx(AT,{className:"h-5 w-5"}),u.jsx("span",{children:"View on GitHub"}),u.jsx(t4,{className:"h-4 w-4"})]}),e.instructions&&u.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-4",children:[u.jsx("h4",{className:"text-nothing-white font-medium mb-2",children:"Installation Instructions"}),u.jsx("p",{className:"text-nothing-gray-300 text-sm whitespace-pre-wrap",children:e.instructions})]})]})]})]})}),w&&u.jsx("div",{className:"fixed inset-0 bg-nothing-black/80 flex items-center justify-center z-50 p-4",children:u.jsxs(Re.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6 max-w-md w-full",children:[u.jsxs("div",{className:"flex items-start space-x-3 mb-4",children:[u.jsx(Xj,{className:"h-6 w-6 text-yellow-500 flex-shrink-0 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-nothing-white mb-2",children:"Download Disclaimer"}),u.jsx("p",{className:"text-nothing-gray-300 text-sm",children:"This APK is shared by the community. GlyphMart does not guarantee the safety or functionality of third-party files. Download and install at your own risk."})]})]}),u.jsxs("div",{className:"flex space-x-3",children:[u.jsx("button",{onClick:Te,disabled:a,className:"flex-1 bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50",children:a?"Downloading...":"I Understand, Download"}),u.jsx("button",{onClick:()=>E(!1),className:"px-4 py-2 border border-nothing-gray-700 text-nothing-white hover:border-nothing-gray-600 rounded-lg font-medium transition-colors duration-200",children:"Cancel"})]})]})}),V&&D?u.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-8 max-w-lg w-full",children:[u.jsx("h2",{className:"text-2xl font-bold text-nothing-white mb-6",children:"Edit Glyph"}),u.jsxs("form",{onSubmit:fe,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Title"}),u.jsx("input",{type:"text",name:"title",value:D.title,onChange:O,className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Description"}),u.jsx("textarea",{name:"description",value:D.description,onChange:O,rows:4,className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"APK URL"}),u.jsx("input",{type:"url",name:"apkUrl",value:D.apkUrl,onChange:O,className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"GitHub URL"}),u.jsx("input",{type:"url",name:"githubUrl",value:D.githubUrl,onChange:O,className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Instructions"}),u.jsx("textarea",{name:"instructions",value:D.instructions,onChange:O,rows:2,className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Images"}),u.jsxs("div",{className:"space-y-4",children:[D.images&&D.images.length>0&&u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:D.images.map((oe,he)=>u.jsx("div",{className:"relative",children:u.jsx("img",{src:gn(oe),alt:`Preview ${he+1}`,className:"w-full h-24 object-cover rounded-lg"})},he))}),u.jsx("div",{className:"bg-nothing-gray-800 rounded-lg p-4",children:u.jsx(uc,{onFileUpload:X,acceptedTypes:"images",multiple:!0,maxFiles:5})}),u.jsx("div",{className:"text-center text-nothing-gray-400",children:u.jsx("span",{className:"px-3 py-1 bg-nothing-gray-800 rounded",children:"OR"})}),u.jsx("input",{type:"text",name:"images",value:D.images.join(", "),onChange:oe=>M(he=>({...he,images:oe.target.value.split(",").map(ve=>ve.trim())})),className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white",placeholder:"Or enter image URLs separated by commas"})]})]}),ee&&u.jsx("div",{className:"bg-red-900/20 border border-red-700 text-red-400 px-4 py-2 rounded-lg mb-4",children:ee}),u.jsxs("div",{className:"flex space-x-3 mt-6",children:[u.jsx("button",{type:"submit",disabled:j,className:"px-6 py-3 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50",children:j?"Saving...":"Save Changes"}),u.jsx("button",{type:"button",onClick:()=>k(!1),className:"px-6 py-3 bg-nothing-gray-700 hover:bg-nothing-gray-800 text-nothing-white rounded-lg font-medium transition-colors duration-200",children:"Cancel"})]})]})]})}):u.jsx(u.Fragment,{})]}):u.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-2xl font-bold text-nothing-white mb-4",children:"Glyph not found"}),u.jsx(Ge,{to:"/",className:"text-nothing-red hover:text-red-400",children:"Return to home"})]})})},MO=()=>{const{username:n}=Fw(),[e,t]=P.useState(null),[r,o]=P.useState([]),[a,c]=P.useState(!0),[d,p]=P.useState("latest"),[m,v]=P.useState(""),w=k=>{console.log(k),v(D=>D+`
`+k)};P.useEffect(()=>{n&&(async()=>{try{w("Fetching storefront for username: "+n);const D=await Le.getUserByUsername(n);w("Found user data: "+JSON.stringify({uid:D.uid,username:D.username,displayName:D.displayName})),t(D),w("Fetching glyphs for creatorId: "+D.uid);const M=await Le.getGlyphs({creator_id:D.uid,sort:"latest",limit:100});w("Found glyphs: "+M.length),M.length>0?w("First glyph: "+JSON.stringify({id:M[0].id,title:M[0].title,creatorId:M[0].creatorId})):w("No glyphs found for this user. Check if glyphs were created with the correct creatorId."),M.forEach(j=>{j.createdAt&&(j.createdAt=new Date(j.createdAt))}),o(M)}catch(D){w("Error fetching user data: "+D.message),console.error("Error fetching user data:",D)}finally{c(!1)}})()},[n]);const E=()=>{switch(d){case"popular":return[...r].sort((k,D)=>(D.downloads||0)-(k.downloads||0));case"liked":return[...r].sort((k,D)=>(D.likes||0)-(k.likes||0));default:return r}},b=({glyph:k})=>u.jsx(Re.div,{whileHover:{y:-5},className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg overflow-hidden hover:border-nothing-gray-700 transition-all duration-300",children:u.jsxs(Ge,{to:`/glyph/${k.id}`,children:[u.jsxs("div",{className:"aspect-square bg-nothing-gray-800 relative overflow-hidden",children:[k.images&&k.images.length>0?u.jsx("img",{src:gn(k.images[0]),alt:k.title,loading:"lazy",className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"}):u.jsx("div",{className:"w-full h-full flex items-center justify-center",children:u.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center glyph-animation",children:u.jsx(Nr,{className:"h-8 w-8 text-nothing-white"})})}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-nothing-black/80 via-transparent to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300",children:u.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:u.jsxs("div",{className:"flex items-center justify-between text-nothing-white text-sm",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(ms,{className:"h-4 w-4"}),u.jsx("span",{children:k.downloads||0})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(ur,{className:"h-4 w-4"}),u.jsx("span",{children:k.likes||0})]})]})})})]}),u.jsxs("div",{className:"p-4",children:[u.jsx("h3",{className:"text-nothing-white font-semibold text-lg mb-2 truncate",children:k.title}),u.jsx("p",{className:"text-nothing-gray-400 text-sm mb-3 line-clamp-2",children:k.description}),u.jsxs("div",{className:"flex items-center justify-between text-nothing-gray-500 text-sm",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(ms,{className:"h-3 w-3"}),u.jsx("span",{children:k.downloads||0})]}),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(Nn,{className:"h-3 w-3"}),u.jsx("span",{children:k.views||0})]}),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(ur,{className:"h-3 w-3"}),u.jsx("span",{children:k.likes||0})]})]}),u.jsx("span",{className:"text-xs",children:k.createdAt?new Date(k.createdAt).toLocaleDateString():"Unknown"})]})]})]})});if(a)return u.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-4 glyph-animation",children:u.jsx(Nr,{className:"h-8 w-8 text-nothing-white"})}),u.jsx("p",{className:"text-nothing-gray-400",children:"Loading storefront..."})]})});if(!e)return u.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-2xl font-bold text-nothing-white mb-4",children:"User not found"}),u.jsxs("p",{className:"text-nothing-gray-400 mb-6",children:["The user @",n," does not exist."]}),u.jsx(Ge,{to:"/",className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-6 py-3 rounded-lg font-medium transition-colors duration-200",children:"Return to home"})]})});const L=r.reduce((k,D)=>k+(D.downloads||0),0),V=r.reduce((k,D)=>k+(D.likes||0),0);return u.jsxs("div",{className:"min-h-screen bg-nothing-black",children:[u.jsxs("div",{className:"bg-nothing-gray-900 border-b border-nothing-gray-800 relative overflow-hidden",children:[e.bannerImage&&u.jsxs("div",{className:"absolute inset-0 w-full h-full",children:[u.jsx("img",{src:gn(e.bannerImage),alt:"Profile banner",className:"w-full h-full object-cover opacity-30"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-nothing-gray-900 via-nothing-gray-900/80 to-nothing-gray-900/40"})]}),u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 relative z-10",children:u.jsxs(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center",children:[u.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden mx-auto mb-6 border-4 border-nothing-white shadow-lg",children:e.profilePicture?u.jsx("img",{src:gn(e.profilePicture),alt:e.displayName||e.username,loading:"lazy",className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full bg-nothing-red flex items-center justify-center",children:u.jsx("span",{className:"text-2xl font-bold text-nothing-white",children:e.displayName?.charAt(0).toUpperCase()||e.username?.charAt(0).toUpperCase()})})}),u.jsx("h1",{className:"text-3xl font-bold text-nothing-white mb-2 font-nothing",children:e.username}),u.jsxs("p",{className:"text-nothing-red text-lg mb-4",children:["@",e.username]}),e.bio&&u.jsx("p",{className:"text-nothing-gray-300 max-w-2xl mx-auto mb-6",children:e.bio}),u.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4 text-nothing-gray-400 text-sm mb-6",children:[e.location&&u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(i4,{className:"h-4 w-4"}),u.jsx("span",{children:e.location})]}),e.website&&u.jsxs("a",{href:e.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 hover:text-nothing-white transition-colors duration-200",children:[u.jsx(r4,{className:"h-4 w-4"}),u.jsx("span",{children:"Website"})]}),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(og,{className:"h-4 w-4"}),u.jsxs("span",{children:["Joined ",e.createdAt?new Date(e.createdAt).toLocaleDateString():"Unknown"]})]})]}),u.jsxs("div",{className:"flex items-center justify-center space-x-8",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-nothing-white",children:r.length}),u.jsx("div",{className:"text-nothing-gray-400 text-sm",children:"Glyphs"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-nothing-white",children:L}),u.jsx("div",{className:"text-nothing-gray-400 text-sm",children:"Downloads"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-nothing-white",children:V}),u.jsx("div",{className:"text-nothing-gray-400 text-sm",children:"Likes"})]})]})]})})]}),u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[u.jsxs("div",{className:"flex space-x-4 border-b border-nothing-gray-800 mb-8",children:[u.jsx("button",{onClick:()=>p("latest"),className:`px-4 py-3 font-medium border-b-2 transition-colors duration-200 ${d==="latest"?"border-nothing-red text-nothing-red":"border-transparent text-nothing-gray-400 hover:text-nothing-white"}`,children:"Latest"}),u.jsx("button",{onClick:()=>p("popular"),className:`px-4 py-3 font-medium border-b-2 transition-colors duration-200 ${d==="popular"?"border-nothing-red text-nothing-red":"border-transparent text-nothing-gray-400 hover:text-nothing-white"}`,children:"Most Downloaded"}),u.jsx("button",{onClick:()=>p("liked"),className:`px-4 py-3 font-medium border-b-2 transition-colors duration-200 ${d==="liked"?"border-nothing-red text-nothing-red":"border-transparent text-nothing-gray-400 hover:text-nothing-white"}`,children:"Most Liked"})]}),r.length>0?u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:E().map((k,D)=>u.jsx(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:D*.1},children:u.jsx(b,{glyph:k})},k.id))}):u.jsxs("div",{className:"text-center py-12",children:[u.jsx("div",{className:"w-16 h-16 bg-nothing-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(Nr,{className:"h-8 w-8 text-nothing-gray-600"})}),u.jsx("h3",{className:"text-nothing-white text-lg font-medium mb-2",children:"No glyphs yet"}),u.jsxs("p",{className:"text-nothing-gray-400",children:[e.username," hasn't shared any glyphs yet."]})]})]}),m&&u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:u.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg p-4",children:[u.jsx("h3",{className:"text-nothing-white font-bold mb-2",children:"Debug Info:"}),u.jsx("pre",{className:"text-nothing-gray-300 text-xs whitespace-pre-wrap overflow-auto",children:m})]})})]})},UO=()=>{const[n,e]=P.useState({title:"",description:"",images:[],apkUrl:"",githubUrl:"",instructions:""}),[t,r]=P.useState([]),[o,a]=P.useState(null),[c,d]=P.useState(!1),[p,m]=P.useState(""),[v,w]=P.useState(""),{currentUser:E,userProfile:b}=Gn(),L=fr(),V=async()=>{try{const ee=await Le.getGlyphs(),ae=ee.filter(I=>I.creatorId===E.uid),R=`Total glyphs in database: ${ee.length}
My glyphs: ${ae.length}
My UID: ${E.uid}
My username: ${b?.username}
My displayName: ${E.displayName}

My glyphs:
`+ae.map(I=>`- ${I.title} (ID: ${I.id})`).join(`
`);w(R),console.log("Debug info:",R)}catch(ee){console.error("Error checking glyphs:",ee),w("Error checking glyphs: "+ee.message)}};if(!E)return L("/login"),null;const k=ee=>{const{name:ae,value:R}=ee.target;e(I=>({...I,[ae]:R})),m("")},D=(ee,ae)=>{ee?(r(R=>[...R,ee]),e(R=>({...R,images:[...R.images,ee.url]}))):ae&&(r(R=>R.filter(I=>I.id!==ae.id)),e(R=>({...R,images:R.images.filter(I=>I!==ae.url)})))},M=(ee,ae)=>{ee?(a(ee),e(R=>({...R,apkUrl:ee.url}))):ae&&(a(null),e(R=>({...R,apkUrl:""})))},j=()=>{if(!n.title.trim())return m("Title is required"),!1;if(!n.description.trim())return m("Description is required"),!1;if(!n.apkUrl.trim()&&!n.githubUrl.trim())return m("Either APK file or GitHub repository URL is required"),!1;const ee=/^https?:\/\/.+/;return n.githubUrl.trim()&&!ee.test(n.githubUrl)?(m("GitHub URL must be a valid HTTP/HTTPS URL"),!1):!0},W=async ee=>{if(ee.preventDefault(),d(!0),m(""),!j()){d(!1);return}try{const ae={title:n.title.trim(),description:n.description.trim(),images:n.images,apkUrl:n.apkUrl.trim()||null,githubUrl:n.githubUrl.trim()||null,instructions:n.instructions.trim()||null,creatorId:E.uid,creatorUsername:b?.username,downloads:0,views:0,likes:0,createdAt:new Date};console.log("Creating glyph with data:",ae);const R=await Le.uploadGlyph(ae);console.log("Glyph created with ID:",R.id),L(`/glyph/${R.id}`)}catch(ae){console.error("Error creating glyph:",ae),m("Failed to upload glyph. Please try again.")}finally{d(!1)}};return u.jsx("div",{className:"min-h-screen bg-nothing-black py-12",children:u.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[u.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-6 glyph-animation",children:u.jsx(Nh,{className:"h-8 w-8 text-nothing-white"})}),u.jsx("h1",{className:"text-3xl font-bold text-nothing-white font-nothing mb-4",children:"Share Your Glyph"}),u.jsx("p",{className:"text-nothing-gray-400",children:"Upload your custom Nothing Phone(3) glyph and share it with the community"})]}),u.jsx(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-8",children:u.jsxs("form",{onSubmit:W,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-nothing-white mb-2",children:"Glyph Title *"}),u.jsx("input",{type:"text",id:"title",name:"title",value:n.title,onChange:k,placeholder:"e.g., Custom Boot Animation Glyph",className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-nothing-white mb-2",children:"Description *"}),u.jsx("textarea",{id:"description",name:"description",value:n.description,onChange:k,rows:4,placeholder:"Describe your glyph, what it does, and any special features...",className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200 resize-vertical",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-nothing-white mb-2",children:"Images (Optional)"}),u.jsx("p",{className:"text-sm text-nothing-gray-400 mb-4",children:"Upload images showcasing your glyph (screenshots, demos, etc.)"}),u.jsx("div",{className:"bg-nothing-gray-800 rounded-lg p-4",children:u.jsx(uc,{onFileUpload:D,acceptedTypes:"images",multiple:!0,maxFiles:5})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-nothing-white mb-2",children:"APK File or Download URL"}),u.jsx("p",{className:"text-sm text-nothing-gray-400 mb-4",children:"Upload an APK file directly or provide a download URL"}),u.jsx("div",{className:"bg-nothing-gray-800 rounded-lg p-4 mb-4",children:u.jsx(uc,{onFileUpload:M,acceptedTypes:"apks",multiple:!1})}),u.jsx("div",{className:"text-center text-nothing-gray-400 mb-4",children:u.jsx("span",{className:"px-3 py-1 bg-nothing-gray-800 rounded",children:"OR"})}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(s4,{className:"h-5 w-5 text-nothing-gray-400"})}),u.jsx("input",{type:"url",id:"apkUrl",name:"apkUrl",value:n.apkUrl,onChange:k,placeholder:"https://github.com/username/repo/releases/download/v1.0/glyph.apk",className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200",disabled:!!o})]}),u.jsx("p",{className:"text-sm text-nothing-gray-400 mt-2",children:o?"APK file uploaded":"Direct link to your APK file (GitHub Releases, Google Drive, etc.)"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"githubUrl",className:"block text-sm font-medium text-nothing-white mb-2",children:"GitHub Repository"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(AT,{className:"h-5 w-5 text-nothing-gray-400"})}),u.jsx("input",{type:"url",id:"githubUrl",name:"githubUrl",value:n.githubUrl,onChange:k,placeholder:"https://github.com/username/repository",className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200"})]}),u.jsx("p",{className:"text-sm text-nothing-gray-400 mt-2",children:"Link to your GitHub repository with source code"})]}),u.jsx("div",{className:"bg-blue-900/20 border border-blue-700 text-blue-400 px-4 py-3 rounded-lg",children:u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx("div",{className:"flex-shrink-0 mt-0.5",children:u.jsx("div",{className:"w-4 h-4 bg-blue-400 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-blue-900 text-xs font-bold",children:"!"})})}),u.jsxs("div",{className:"text-sm",children:[u.jsx("p",{className:"font-medium mb-1",children:"Download Requirement"}),u.jsx("p",{children:"You must provide either an APK download URL or a GitHub repository link (or both). Users need a way to access your glyph."})]})]})}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"instructions",className:"block text-sm font-medium text-nothing-white mb-2",children:"Installation Instructions (Optional)"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute top-3 left-3 pointer-events-none",children:u.jsx(PT,{className:"h-5 w-5 text-nothing-gray-400"})}),u.jsx("textarea",{id:"instructions",name:"instructions",value:n.instructions,onChange:k,rows:4,placeholder:`1. Download the APK file
2. Enable installation from unknown sources
3. Install the APK
4. Open Nothing Glyph Composer...`,className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200 resize-vertical"})]})]}),p&&u.jsxs(Re.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-900/20 border border-red-700 text-red-400 px-4 py-3 rounded-lg flex items-start space-x-3",children:[u.jsx(qp,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),u.jsx("span",{className:"text-sm",children:p})]}),u.jsx("div",{className:"bg-yellow-900/20 border border-yellow-700 text-yellow-400 px-4 py-3 rounded-lg",children:u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx(qp,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),u.jsxs("div",{className:"text-sm",children:[u.jsx("p",{className:"font-medium mb-1",children:"Important Disclaimer"}),u.jsx("p",{children:"By uploading your glyph, you confirm that you own the rights to share this content. GlyphMart is not responsible for the safety or functionality of user-generated content."})]})]})}),u.jsxs("div",{className:"flex justify-end space-x-4",children:[u.jsx("button",{type:"button",onClick:()=>L("/"),className:"px-6 py-3 border border-nothing-gray-700 text-nothing-white hover:border-nothing-gray-600 rounded-lg font-medium transition-colors duration-200",children:"Cancel"}),u.jsx("button",{type:"submit",disabled:c,className:"px-6 py-3 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:c?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-nothing-white"}),u.jsx("span",{children:"Uploading..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(Nh,{className:"h-4 w-4"}),u.jsx("span",{children:"Share Glyph"})]})})]})]})}),u.jsxs(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-nothing-gray-900 rounded-lg p-6 border border-nothing-gray-800 mt-6",children:[u.jsx("h2",{className:"text-nothing-white text-lg font-bold mb-4",children:"Debug: Check My Glyphs"}),u.jsx("button",{type:"button",onClick:V,className:"px-4 py-2 bg-nothing-gray-800 hover:bg-nothing-gray-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 mb-4",children:"Check Database"}),v&&u.jsx("div",{className:"bg-nothing-gray-800 rounded-lg p-4",children:u.jsx("pre",{className:"text-nothing-gray-300 text-xs whitespace-pre-wrap overflow-auto",children:v})})]})]})})},FO=()=>{const[n,e]=xI(),[t,r]=P.useState(n.get("q")||""),[o,a]=P.useState([]),[c,d]=P.useState(!1),[p,m]=P.useState("latest"),[v,w]=P.useState("all"),[E,b]=P.useState(!1);P.useEffect(()=>{const D=n.get("q");D&&(r(D),b(!0),L(D))},[n]);const L=async(D,M=p,j=v)=>{if(D.trim()){b(!0),d(!0);try{const W=await Le.getGlyphs({search:D,sort:M,limit:100});a(W)}catch(W){console.error("Error searching glyphs:",W),a([])}finally{d(!1)}}},V=D=>{D.preventDefault(),t.trim()&&(e({q:t.trim()}),L(t.trim()))},k=D=>{m(D),t.trim()&&L(t.trim(),D,v)};return u.jsx("div",{className:"min-h-screen bg-nothing-black",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[u.jsx("div",{className:"text-center mb-8",children:u.jsxs(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[u.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-6 glyph-animation",children:u.jsx(ts,{className:"h-8 w-8 text-nothing-white"})}),u.jsx("h1",{className:"text-3xl font-bold text-nothing-white font-nothing mb-4",children:"Search Glyphs"}),u.jsx("p",{className:"text-nothing-gray-400 max-w-2xl mx-auto",children:"Discover custom Nothing Phone(3) glyphs created by the community"})]})}),u.jsx(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"max-w-2xl mx-auto mb-8",children:u.jsxs("form",{onSubmit:V,className:"relative",children:[u.jsx("input",{type:"text",value:t,onChange:D=>r(D.target.value),placeholder:"Search for glyphs, creators, or keywords...",className:"w-full px-6 py-4 pl-14 pr-16 bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200 text-lg"}),u.jsx(ts,{className:"absolute left-4 top-4 h-6 w-6 text-nothing-gray-400"}),u.jsx("button",{type:"submit",className:"absolute right-2 top-2 bottom-2 px-4 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-md font-medium transition-colors duration-200",children:"Search"})]})}),(o.length>0||c)&&u.jsxs(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("span",{className:"text-nothing-gray-400 text-sm",children:c?"Searching...":`${o.length} results found`}),t&&u.jsxs("span",{className:"text-nothing-white text-sm",children:['for "',u.jsx("span",{className:"text-nothing-red",children:t}),'"']})]}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(n4,{className:"h-4 w-4 text-nothing-gray-400"}),u.jsx("span",{className:"text-nothing-gray-400 text-sm",children:"Sort by:"})]}),u.jsx("div",{className:"flex space-x-2",children:[{value:"latest",label:"Latest",icon:Jj},{value:"popular",label:"Popular",icon:ms},{value:"liked",label:"Most Liked",icon:ur},{value:"viewed",label:"Most Viewed",icon:Nn}].map(({value:D,label:M,icon:j})=>u.jsxs("button",{onClick:()=>k(D),className:`flex items-center space-x-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors duration-200 ${p===D?"bg-nothing-red text-nothing-white":"bg-nothing-gray-800 text-nothing-gray-300 hover:bg-nothing-gray-700"}`,children:[u.jsx(j,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden sm:inline",children:M})]},D))})]})]}),c&&u.jsx("div",{className:"flex items-center justify-center py-12",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-4 glyph-animation",children:u.jsx(ts,{className:"h-8 w-8 text-nothing-white"})}),u.jsx("p",{className:"text-nothing-gray-400",children:"Searching glyphs..."})]})}),!c&&o.length>0&&u.jsx(Re.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:o.map((D,M)=>u.jsx(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:M*.1},children:u.jsx(Ag,{glyph:D})},D.id))}),!c&&E&&o.length===0&&u.jsxs(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-12",children:[u.jsx("div",{className:"w-16 h-16 bg-nothing-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(ts,{className:"h-8 w-8 text-nothing-gray-600"})}),u.jsx("h3",{className:"text-nothing-white text-lg font-medium mb-2",children:"No results found"}),u.jsx("p",{className:"text-nothing-gray-400 mb-6",children:"Try searching with different keywords or browse all glyphs."}),u.jsx(Ge,{to:"/",className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-6 py-3 rounded-lg font-medium transition-colors duration-200",children:"Browse All Glyphs"})]}),!c&&!E&&u.jsxs(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-12",children:[u.jsx("div",{className:"w-16 h-16 bg-nothing-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(ts,{className:"h-8 w-8 text-nothing-gray-600"})}),u.jsx("h3",{className:"text-nothing-white text-lg font-medium mb-2",children:"Start searching"}),u.jsx("p",{className:"text-nothing-gray-400 mb-6",children:"Enter a search term to find glyphs, creators, or specific features."}),u.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:["boot animation","notification","charging","custom"].map(D=>u.jsx("button",{onClick:()=>{r(D),e({q:D}),L(D)},className:"px-3 py-1 bg-nothing-gray-800 hover:bg-nothing-gray-700 text-nothing-gray-300 rounded-full text-sm transition-colors duration-200",children:D},D))})]})]})})},BO=()=>{const[n,e]=P.useState([]),[t,r]=P.useState(!0),{currentUser:o}=Gn();return P.useEffect(()=>{(async()=>{if(!o){r(!1);return}try{console.log("Fetching liked glyphs for user:",o.uid);const c=await Le.getUserLikes();console.log("Retrieved liked glyphs:",c),e(c)}catch(c){console.error("Error fetching liked glyphs:",c)}finally{r(!1)}})()},[o]),o?t?u.jsx("div",{className:"min-h-screen bg-nothing-black text-nothing-white flex items-center justify-center",children:u.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-nothing-red"})}):u.jsx("div",{className:"min-h-screen bg-nothing-black text-nothing-white",children:u.jsxs("div",{className:"container mx-auto px-4 py-8",children:[u.jsxs(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[u.jsxs("h1",{className:"text-4xl font-bold mb-2 flex items-center",children:[u.jsx(ur,{className:"h-8 w-8 mr-3 text-nothing-red fill-current"}),"Liked Posts"]}),u.jsxs("p",{className:"text-nothing-gray-400",children:[n.length," glyph",n.length!==1?"s":""," you've liked"]})]}),n.length>0?u.jsx(Re.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:n.map((a,c)=>u.jsx(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:c*.1},className:"group",children:u.jsx(Ge,{to:`/glyph/${a.id}`,children:u.jsxs("div",{className:"bg-nothing-gray-900 rounded-lg overflow-hidden border border-nothing-gray-800 hover:border-nothing-gray-700 transition-all duration-300 hover:scale-105",children:[u.jsxs("div",{className:"aspect-square bg-nothing-gray-800 relative overflow-hidden",children:[a.images&&a.images.length>0?u.jsx("img",{src:gn(a.images[0]),alt:a.title,loading:"lazy",className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}):u.jsx("div",{className:"w-full h-full flex items-center justify-center",children:u.jsx("div",{className:"text-nothing-gray-500 text-6xl",children:""})}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-nothing-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:u.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:u.jsxs("div",{className:"flex items-center justify-between text-nothing-white text-sm",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(ms,{className:"h-4 w-4"}),u.jsx("span",{children:a.downloads||0})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(Nn,{className:"h-4 w-4"}),u.jsx("span",{children:a.views||0})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(ur,{className:"h-4 w-4 fill-current text-nothing-red"}),u.jsx("span",{children:a.likes||0})]})]})})})]}),u.jsxs("div",{className:"p-4",children:[u.jsx("h3",{className:"font-semibold text-nothing-white mb-2 line-clamp-2",children:a.title}),u.jsx("p",{className:"text-nothing-gray-400 text-sm mb-3 line-clamp-2",children:a.description}),u.jsxs("div",{className:"flex items-center justify-between text-xs text-nothing-gray-500",children:[u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(ls,{className:"h-3 w-3"}),u.jsx("span",{children:a.creatorUsername})]}),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(og,{className:"h-3 w-3"}),u.jsx("span",{children:a.createdAt?.toDate?a.createdAt.toDate().toLocaleDateString():new Date(a.createdAt).toLocaleDateString()})]})]})]})]})})},a.id))}):u.jsxs(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"text-center py-16",children:[u.jsx(ur,{className:"h-16 w-16 mx-auto mb-4 text-nothing-gray-600"}),u.jsx("h2",{className:"text-2xl font-bold mb-2 text-nothing-gray-400",children:"No liked posts yet"}),u.jsx("p",{className:"text-nothing-gray-500 mb-6",children:"Start exploring glyphs and like the ones you love!"}),u.jsx(Ge,{to:"/",className:"bg-nothing-red text-nothing-white px-6 py-3 rounded-lg font-semibold hover:bg-red-600 transition-colors duration-200",children:"Explore Glyphs"})]})]})}):u.jsx("div",{className:"min-h-screen bg-nothing-black text-nothing-white flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Please log in to view your liked posts"}),u.jsx(Ge,{to:"/login",className:"bg-nothing-red text-nothing-white px-6 py-3 rounded-lg font-semibold hover:bg-red-600 transition-colors duration-200",children:"Log In"})]})})},zO=()=>{const{currentUser:n,userProfile:e,logout:t}=Gn(),r=fr(),[o,a]=P.useState({displayName:"",username:"",email:"",bio:"",profilePicture:"",bannerImage:""}),[c,d]=P.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[p,m]=P.useState(!1),[v,w]=P.useState(!1),[E,b]=P.useState(!1),[L,V]=P.useState(!1),[k,D]=P.useState(""),[M,j]=P.useState(""),[W,ee]=P.useState("profile"),[ae,R]=P.useState(""),[I,N]=P.useState(!1),[U,B]=P.useState(null),[$,A]=P.useState(null);P.useEffect(()=>{n&&e&&a({displayName:n.displayName||"",username:e.username||"",email:n.email||"",bio:e.bio||"",profilePicture:e.profilePicture||n.photoURL||"",bannerImage:e.bannerImage||""})},[n,e]);const we=async J=>{J.preventDefault(),V(!0),j(""),D("");try{o.displayName!==n.displayName&&await Np(n,{displayName:o.displayName}),o.profilePicture!==n.photoURL&&await Np(n,{photoURL:o.profilePicture}),o.email!==n.email&&await Jk(n,o.email),await Le.updateUser({username:o.username,displayName:o.displayName,bio:o.bio,profilePicture:o.profilePicture,bannerImage:o.bannerImage,updatedAt:new Date}),D("Profile updated successfully!")}catch(Z){console.error("Error updating profile:",Z),Z.code==="auth/requires-recent-login"?j("Please log out and log back in before updating your email."):j("Failed to update profile: "+Z.message)}finally{V(!1)}},Ue=(J,Z)=>{J?(B(J),a(O=>({...O,profilePicture:J.url}))):Z&&(B(null),a(O=>({...O,profilePicture:""})))},Ve=(J,Z)=>{J?(A(J),a(O=>({...O,bannerImage:J.url}))):Z&&(A(null),a(O=>({...O,bannerImage:""})))},Te=async J=>{if(J.preventDefault(),V(!0),j(""),D(""),c.newPassword!==c.confirmPassword){j("New passwords do not match"),V(!1);return}if(c.newPassword.length<6){j("Password must be at least 6 characters long"),V(!1);return}try{const Z=ii.credential(n.email,c.currentPassword);await _v(n,Z),await Zk(n,c.newPassword),D("Password updated successfully!"),d({currentPassword:"",newPassword:"",confirmPassword:""})}catch(Z){console.error("Error updating password:",Z),Z.code==="auth/wrong-password"?j("Current password is incorrect"):j("Failed to update password: "+Z.message)}finally{V(!1)}},le=async()=>{j(""),D(""),N(!0);try{if(!ae){j("Please enter your current password to confirm deletion."),N(!1);return}const J=ii.credential(n.email,ae);await _v(n,J),await Le.deleteUserData(),await n.delete(),D("Account and all glyphs deleted successfully."),t(),r("/")}catch(J){j("Failed to delete account: "+(J.message||J.code))}finally{N(!1)}};return n?u.jsx("div",{className:"min-h-screen bg-nothing-black text-nothing-white",children:u.jsxs("div",{className:"container mx-auto px-4 py-8",children:[u.jsxs(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[u.jsxs("h1",{className:"text-4xl font-bold mb-2 flex items-center",children:[u.jsx(Wp,{className:"h-8 w-8 mr-3 text-nothing-red"}),"Settings"]}),u.jsx("p",{className:"text-nothing-gray-400",children:"Manage your account and preferences"})]}),k&&u.jsxs(Re.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-green-900/20 border border-green-700 text-green-400 px-4 py-3 rounded-lg mb-6 flex items-center",children:[u.jsx(Gp,{className:"h-5 w-5 mr-2"}),k]}),M&&u.jsxs(Re.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-900/20 border border-red-700 text-red-400 px-4 py-3 rounded-lg mb-6 flex items-center",children:[u.jsx(qp,{className:"h-5 w-5 mr-2"}),M]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[u.jsx(Re.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},className:"lg:col-span-1",children:u.jsx("div",{className:"bg-nothing-gray-900 rounded-lg p-6 border border-nothing-gray-800",children:u.jsxs("nav",{className:"space-y-2",children:[u.jsxs("button",{onClick:()=>ee("profile"),className:`w-full text-left px-4 py-3 rounded-lg font-medium transition-colors duration-200 flex items-center space-x-3 ${W==="profile"?"bg-nothing-red text-nothing-white":"text-nothing-gray-400 hover:text-nothing-white hover:bg-nothing-gray-800"}`,children:[u.jsx(ls,{className:"h-5 w-5"}),u.jsx("span",{children:"Profile"})]}),u.jsxs("button",{onClick:()=>ee("security"),className:`w-full text-left px-4 py-3 rounded-lg font-medium transition-colors duration-200 flex items-center space-x-3 ${W==="security"?"bg-nothing-red text-nothing-white":"text-nothing-gray-400 hover:text-nothing-white hover:bg-nothing-gray-800"}`,children:[u.jsx(Xs,{className:"h-5 w-5"}),u.jsx("span",{children:"Security"})]})]})})}),u.jsxs(Re.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5},className:"lg:col-span-3",children:[W==="profile"&&u.jsxs("div",{className:"bg-nothing-gray-900 rounded-lg p-6 border border-nothing-gray-800",children:[u.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Profile Information"}),u.jsxs("form",{onSubmit:we,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Banner Image"}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"w-full h-32 bg-nothing-gray-800 rounded-lg border border-nothing-gray-700 overflow-hidden",children:o.bannerImage?u.jsx("img",{src:gn(o.bannerImage),alt:"Banner preview",className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full flex items-center justify-center",children:u.jsx(Hp,{className:"h-8 w-8 text-nothing-gray-600"})})}),u.jsx("div",{className:"bg-nothing-gray-800 rounded-lg p-4",children:u.jsx(uc,{onFileUpload:Ve,acceptedTypes:"profile",multiple:!1})}),u.jsx("div",{className:"text-center text-nothing-gray-400",children:u.jsx("span",{className:"px-3 py-1 bg-nothing-gray-800 rounded",children:"OR"})}),u.jsxs("div",{className:"relative",children:[u.jsx(Hp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),u.jsx("input",{type:"url",value:o.bannerImage,onChange:J=>a(Z=>({...Z,bannerImage:J.target.value})),className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"https://example.com/banner-image.jpg",disabled:!!$}),$&&u.jsx("p",{className:"text-sm text-nothing-gray-400 mt-2",children:"Banner image uploaded"})]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Profile Picture"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("div",{className:"w-20 h-20 bg-nothing-gray-800 rounded-full border border-nothing-gray-700 overflow-hidden flex-shrink-0",children:o.profilePicture?u.jsx("img",{src:gn(o.profilePicture),alt:"Profile preview",className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full flex items-center justify-center",children:u.jsx(ls,{className:"h-8 w-8 text-nothing-gray-600"})})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-sm text-nothing-gray-300",children:"Upload a new profile picture"}),u.jsx("p",{className:"text-xs text-nothing-gray-500",children:"Recommended: 400x400px or larger"})]})]}),u.jsx("div",{className:"bg-nothing-gray-800 rounded-lg p-4",children:u.jsx(uc,{onFileUpload:Ue,acceptedTypes:"profile",multiple:!1})}),u.jsx("div",{className:"text-center text-nothing-gray-400",children:u.jsx("span",{className:"px-3 py-1 bg-nothing-gray-800 rounded",children:"OR"})}),u.jsxs("div",{className:"relative",children:[u.jsx(e4,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),u.jsx("input",{type:"url",value:o.profilePicture,onChange:J=>a(Z=>({...Z,profilePicture:J.target.value})),className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"https://example.com/profile-picture.jpg",disabled:!!U}),U&&u.jsx("p",{className:"text-sm text-nothing-gray-400 mt-2",children:"Profile picture uploaded"})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Display Name"}),u.jsxs("div",{className:"relative",children:[u.jsx(ls,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),u.jsx("input",{type:"text",value:o.displayName,onChange:J=>a(Z=>({...Z,displayName:J.target.value})),className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"Your display name"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Username"}),u.jsx("input",{type:"text",value:o.username,onChange:J=>a(Z=>({...Z,username:J.target.value})),className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"Your username"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Email Address"}),u.jsxs("div",{className:"relative",children:[u.jsx(ag,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),u.jsx("input",{type:"email",value:o.email,onChange:J=>a(Z=>({...Z,email:J.target.value})),className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"your@email.com"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Bio"}),u.jsx("textarea",{value:o.bio,onChange:J=>a(Z=>({...Z,bio:J.target.value})),rows:4,className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent resize-none",placeholder:"Tell us about yourself..."})]}),u.jsx("button",{type:"submit",disabled:L,className:"w-full md:w-auto px-6 py-3 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:L?u.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-nothing-white"}):u.jsxs(u.Fragment,{children:[u.jsx(Ix,{className:"h-5 w-5"}),u.jsx("span",{children:"Save Changes"})]})})]})]}),W==="security"&&u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"bg-nothing-gray-900 rounded-lg p-6 border border-nothing-gray-800",children:[u.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Change Password"}),u.jsxs("form",{onSubmit:Te,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Current Password"}),u.jsxs("div",{className:"relative",children:[u.jsx(Xs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),u.jsx("input",{type:p?"text":"password",value:c.currentPassword,onChange:J=>d(Z=>({...Z,currentPassword:J.target.value})),className:"w-full pl-10 pr-12 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"Enter current password"}),u.jsx("button",{type:"button",onClick:()=>m(!p),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-nothing-gray-500 hover:text-nothing-white",children:p?u.jsx(ya,{className:"h-5 w-5"}):u.jsx(Nn,{className:"h-5 w-5"})})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"New Password"}),u.jsxs("div",{className:"relative",children:[u.jsx(Xs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),u.jsx("input",{type:v?"text":"password",value:c.newPassword,onChange:J=>d(Z=>({...Z,newPassword:J.target.value})),className:"w-full pl-10 pr-12 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"Enter new password"}),u.jsx("button",{type:"button",onClick:()=>w(!v),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-nothing-gray-500 hover:text-nothing-white",children:v?u.jsx(ya,{className:"h-5 w-5"}):u.jsx(Nn,{className:"h-5 w-5"})})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Confirm New Password"}),u.jsxs("div",{className:"relative",children:[u.jsx(Xs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),u.jsx("input",{type:E?"text":"password",value:c.confirmPassword,onChange:J=>d(Z=>({...Z,confirmPassword:J.target.value})),className:"w-full pl-10 pr-12 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"Confirm new password"}),u.jsx("button",{type:"button",onClick:()=>b(!E),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-nothing-gray-500 hover:text-nothing-white",children:E?u.jsx(ya,{className:"h-5 w-5"}):u.jsx(Nn,{className:"h-5 w-5"})})]})]}),u.jsx("button",{type:"submit",disabled:L,className:"w-full md:w-auto px-6 py-3 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:L?u.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-nothing-white"}):u.jsxs(u.Fragment,{children:[u.jsx(Ix,{className:"h-5 w-5"}),u.jsx("span",{children:"Update Password"})]})})]})]}),u.jsxs("div",{className:"bg-red-900/10 border border-red-700/30 rounded-lg p-6",children:[u.jsx("h2",{className:"text-2xl font-bold mb-4 text-red-400",children:"Danger Zone"}),u.jsx("p",{className:"text-nothing-gray-400 mb-6",children:"Once you delete your account, there is no going back. This will permanently delete all your glyphs and data. Please be certain."}),u.jsxs("form",{onSubmit:J=>{J.preventDefault(),le()},className:"space-y-4",children:[u.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Current Password"}),u.jsxs("div",{className:"relative mb-4",children:[u.jsx(Xs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),u.jsx("input",{type:"password",value:ae,onChange:J=>R(J.target.value),className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"Enter your current password",required:!0})]}),u.jsx("button",{type:"submit",disabled:I,className:"px-6 py-3 bg-red-600 hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:I?"Deleting...":"Delete Account"})]})]})]})]})]})]})}):(r("/login"),null)},$O=()=>{const{currentUser:n,userProfile:e}=Gn(),t=fr(),[r,o]=P.useState({totalUsers:0,totalGlyphs:0,totalDownloads:0,totalViews:0,totalLikes:0,totalAdmins:0,uniqueViewers:0,uniqueDownloaders:0,topGlyphs:[]}),[a,c]=P.useState([]),[d,p]=P.useState(""),[m,v]=P.useState([]),[w,E]=P.useState(null),[b,L]=P.useState(!1),[V,k]=P.useState([]),[D,M]=P.useState(null),[j,W]=P.useState([]),[ee,ae]=P.useState(!1),[R,I]=P.useState(""),[N,U]=P.useState([]),[B,$]=P.useState(!0),[A,we]=P.useState(!1),[Ue,Ve]=P.useState(!1),[Te,le]=P.useState(null),[J,Z]=P.useState(null),[O,X]=P.useState("stats"),fe=n?.uid==="9H3pw5zS6GRDFTZaoYspEmruORj2"||e?.isAdmin===!0;P.useEffect(()=>{if(!n){t("/login");return}if(!fe){t("/");return}oe()},[n,fe,t]);const oe=async()=>{try{$(!0);const[Y,He,ot,xs]=await Promise.all([Le.getAdminStats(),Le.getAllUsers(),Le.getGlyphs({limit:1e3}),Le.getGlyphRequests({limit:1e3})]);o(Y),c(He),v(He),k(ot),W(xs.requests||[]);const Hn=He.filter(Pn=>Pn.uid==="9H3pw5zS6GRDFTZaoYspEmruORj2"||Pn.isAdmin);U(Hn)}catch(Y){console.error("Error loading admin data:",Y)}finally{$(!1)}},he=async()=>{try{Ve(!0),Z(null);const Y=await Le.syncAllGlyphCounts();Z(Y),await oe(),console.log("Sync completed:",Y)}catch(Y){console.error("Sync failed:",Y),Z({error:!0,message:Y.message||"Sync failed"})}finally{Ve(!1)}},ve=async()=>{try{const Y=await Le.getSyncStatus();le(Y)}catch(Y){console.error("Error loading sync status:",Y)}};P.useEffect(()=>{fe&&O==="stats"&&ve()},[fe,O]);const De=Y=>{if(p(Y),!Y.trim())v(a);else{const He=a.filter(ot=>ot.username?.toLowerCase().includes(Y.toLowerCase())||ot.displayName?.toLowerCase().includes(Y.toLowerCase())||ot.email?.toLowerCase().includes(Y.toLowerCase()));v(He)}},Fe=async Y=>{try{we(!0),await Le.makeUserAdmin(Y),oe(),alert("User promoted to admin successfully!")}catch(He){console.error("Error making user admin:",He),alert("Failed to promote user to admin")}finally{we(!1)}},Ke=async()=>{if(R.trim())try{we(!0),await Le.addAdminByEmail(R),I(""),oe(),alert("Admin added successfully!")}catch(Y){console.error("Error adding admin:",Y),alert("Failed to add admin: "+Y.message)}finally{we(!1)}},rt=async Y=>{if(confirm("Are you sure you want to delete this glyph?"))try{we(!0),await Le.adminDeleteGlyph(Y),k(He=>He.filter(ot=>ot.id!==Y)),alert("Glyph deleted successfully!")}catch(He){console.error("Error deleting glyph:",He),alert("Failed to delete glyph")}finally{we(!1)}},bt=async Y=>{if(confirm("Are you sure you want to delete this request?"))try{we(!0),await Le.request(`/admin/glyph-requests/${Y}`,{method:"DELETE"}),W(He=>He.filter(ot=>ot.id!==Y)),alert("Request deleted successfully!")}catch(He){console.error("Error deleting request:",He),alert("Failed to delete request")}finally{we(!1)}},Mr=async Y=>{if(confirm("Are you sure you want to force complete this request?"))try{we(!0),await Le.request(`/admin/glyph-requests/${Y}/force-complete`,{method:"POST",body:JSON.stringify({})}),W(He=>He.map(ot=>ot.id===Y?{...ot,status:"completed"}:ot)),alert("Request marked as completed!")}catch(He){console.error("Error completing request:",He),alert("Failed to complete request")}finally{we(!1)}},mr=async Y=>{if(confirm("Are you sure you want to reset this request to open status?"))try{we(!0),await Le.request(`/admin/glyph-requests/${Y}/reset`,{method:"POST",body:JSON.stringify({})}),W(He=>He.map(ot=>ot.id===Y?{...ot,status:"open",assigned_to:null}:ot)),alert("Request reset to open status!")}catch(He){console.error("Error resetting request:",He),alert("Failed to reset request")}finally{we(!1)}},Ur=Y=>{try{return new Date(Y).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Unknown date"}},vs=Y=>{switch(Y){case"open":return"text-green-400 bg-green-400/10";case"in_progress":return"text-yellow-400 bg-yellow-400/10";case"completed":return"text-blue-400 bg-blue-400/10";case"cancelled":return"text-red-400 bg-red-400/10";default:return"text-nothing-gray-400 bg-nothing-gray-400/10"}};return B?u.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-4 glyph-animation",children:u.jsx(la,{className:"h-8 w-8 text-nothing-white"})}),u.jsx("p",{className:"text-nothing-gray-400",children:"Loading admin panel..."})]})}):fe?u.jsx("div",{className:"min-h-screen bg-nothing-black text-nothing-white",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[u.jsxs(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[u.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[u.jsx(la,{className:"h-8 w-8 text-nothing-red"}),u.jsx("h1",{className:"text-4xl font-bold font-nothing",children:"Admin Panel"})]}),u.jsxs("p",{className:"text-nothing-gray-400",children:["Welcome back, ",e?.displayName||n?.displayName,". Manage your GlyphMart platform."]})]}),u.jsx("div",{className:"border-b border-nothing-gray-800 mb-8",children:u.jsx("nav",{className:"flex space-x-8",children:[{id:"stats",label:"Statistics",icon:Tx},{id:"users",label:"Users",icon:kx},{id:"glyphs",label:"Glyphs",icon:ih},{id:"requests",label:"Requests",icon:as},{id:"admins",label:"Admins",icon:u4}].map(({id:Y,label:He,icon:ot})=>u.jsxs("button",{onClick:()=>X(Y),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors duration-200 ${O===Y?"border-nothing-red text-nothing-red":"border-transparent text-nothing-gray-400 hover:text-nothing-white hover:border-nothing-gray-600"}`,children:[u.jsx(ot,{className:"h-4 w-4"}),u.jsx("span",{children:He})]},Y))})}),u.jsxs(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[O==="stats"&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsx("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-nothing-gray-400 text-sm",children:"Total Users"}),u.jsx("p",{className:"text-3xl font-bold text-nothing-white",children:r.totalUsers})]}),u.jsx(kx,{className:"h-8 w-8 text-blue-500"})]})}),u.jsx("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-nothing-gray-400 text-sm",children:"Total Glyphs"}),u.jsx("p",{className:"text-3xl font-bold text-nothing-white",children:r.totalGlyphs})]}),u.jsx(ih,{className:"h-8 w-8 text-green-500"})]})}),u.jsx("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-nothing-gray-400 text-sm",children:"Unique Downloads"}),u.jsx("p",{className:"text-3xl font-bold text-nothing-white",children:r.uniqueDownloaders})]}),u.jsx(ms,{className:"h-8 w-8 text-purple-500"})]})}),u.jsx("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-nothing-gray-400 text-sm",children:"Unique Views"}),u.jsx("p",{className:"text-3xl font-bold text-nothing-white",children:r.uniqueViewers})]}),u.jsx(Nn,{className:"h-8 w-8 text-orange-500"})]})})]}),u.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-nothing-white",children:"Data Synchronization"}),u.jsx("p",{className:"text-nothing-gray-400 text-sm",children:"Update glyph counts from Firebase"})]}),u.jsx(Sx,{className:"h-6 w-6 text-nothing-red"})]}),u.jsxs("div",{className:"space-y-4",children:[Te&&u.jsxs("div",{className:"bg-nothing-gray-800 rounded-lg p-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:"text-nothing-gray-300 text-sm font-medium",children:"Background Sync Status"}),u.jsx("span",{className:`text-xs px-2 py-1 rounded ${Te.status==="running"?"bg-blue-500/20 text-blue-400":Te.status==="completed"?"bg-green-500/20 text-green-400":"bg-nothing-gray-700 text-nothing-gray-400"}`,children:Te.status==="running"?"Running":Te.status==="completed"?"Completed":"Idle"})]}),Te.lastRun&&u.jsxs("div",{className:"text-nothing-gray-400 text-xs",children:["Last run: ",new Date(Te.lastRun).toLocaleString()]}),Te.nextRun&&u.jsxs("div",{className:"text-nothing-gray-400 text-xs",children:["Next run: ",new Date(Te.nextRun).toLocaleString()]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-nothing-white font-medium",children:"Manual Sync"}),u.jsx("p",{className:"text-nothing-gray-400 text-sm",children:"Update all glyph view, like, and download counts"})]}),u.jsxs("button",{onClick:he,disabled:Ue,className:`flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-colors duration-200 ${Ue?"bg-nothing-gray-700 text-nothing-gray-400 cursor-not-allowed":"bg-nothing-red hover:bg-nothing-red/80 text-white"}`,children:[u.jsx(Sx,{className:`h-4 w-4 ${Ue?"animate-spin":""}`}),u.jsx("span",{children:Ue?"Syncing...":"Sync All"})]})]}),J&&u.jsxs("div",{className:`p-3 rounded-lg text-sm ${J.success?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-red-500/20 text-red-400 border border-red-500/30"}`,children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[J.success?u.jsx(Gp,{className:"h-4 w-4"}):u.jsx(f4,{className:"h-4 w-4"}),u.jsx("span",{className:"font-medium",children:J.success?"Sync completed successfully":"Sync failed"})]}),J.message&&u.jsx("p",{className:"mt-1 text-xs opacity-80",children:J.message}),J.updated&&u.jsxs("p",{className:"mt-1 text-xs opacity-80",children:["Updated ",J.updated," glyph",J.updated!==1?"s":""]})]}),u.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:u.jsxs("div",{className:"flex items-start space-x-2",children:[u.jsx(oc,{className:"h-4 w-4 text-blue-400 mt-0.5 flex-shrink-0"}),u.jsxs("div",{className:"text-sm",children:[u.jsx("p",{className:"text-blue-400 font-medium mb-1",children:"Automatic Sync Active"}),u.jsxs("div",{className:"text-blue-300/80 space-y-1 text-xs",children:[u.jsx("p",{children:" Glyph counts update automatically when users visit detail pages"}),u.jsx("p",{children:" Background sync runs every hour to update all glyphs"}),u.jsx("p",{children:" Use manual sync above for immediate updates"})]})]})]})})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"text-lg font-semibold text-nothing-white",children:"Additional Metrics"}),u.jsx(jT,{className:"h-6 w-6 text-nothing-red"})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-nothing-gray-400",children:"Total Likes"}),u.jsx("span",{className:"text-nothing-white font-semibold",children:r.totalLikes})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-nothing-gray-400",children:"Active Admins"}),u.jsx("span",{className:"text-nothing-white font-semibold",children:r.totalAdmins})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-nothing-gray-400",children:"Avg Unique Downloads/Glyph"}),u.jsx("span",{className:"text-nothing-white font-semibold",children:(r.totalGlyphs||0)>0?Math.round((r.uniqueDownloaders||0)/r.totalGlyphs):0})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-nothing-gray-400",children:"Avg Unique Views/Glyph"}),u.jsx("span",{className:"text-nothing-white font-semibold",children:(r.totalGlyphs||0)>0?Math.round((r.uniqueViewers||0)/r.totalGlyphs):0})]})]})]}),u.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"text-lg font-semibold text-nothing-white",children:"Top Performing Glyphs"}),u.jsx(Tx,{className:"h-6 w-6 text-nothing-red"})]}),u.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:[(r.topGlyphs||[]).slice(0,5).map((Y,He)=>u.jsxs("div",{className:"flex items-center justify-between p-2 bg-nothing-gray-800 rounded",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs("span",{className:"text-nothing-red font-bold text-sm",children:["#",He+1]}),u.jsx("span",{className:"text-nothing-white text-sm truncate max-w-32",title:Y.title,children:Y.title})]}),u.jsxs("div",{className:"flex items-center space-x-3 text-xs text-nothing-gray-400",children:[u.jsxs("span",{children:[Y.views,"v"]}),u.jsxs("span",{children:[Y.downloads,"d"]}),u.jsxs("span",{children:[Y.likes,""]})]})]},Y.id)),(!r.topGlyphs||r.topGlyphs.length===0)&&u.jsx("div",{className:"text-center text-nothing-gray-400 py-4",children:u.jsx("p",{children:"No glyph data available yet"})})]})]})]}),u.jsx("div",{className:"bg-yellow-900/20 border border-yellow-700/50 rounded-lg p-4",children:u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx("svg",{className:"w-5 h-5 text-yellow-500 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-yellow-500 font-medium text-sm",children:"Known Issues"}),u.jsx("p",{className:"text-yellow-200/80 text-sm mt-1",children:"Additional metrics and top performing glyphs are currently broken and may not display accurate data."})]})]})})]}),O==="users"&&u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"flex items-center space-x-4",children:u.jsxs("div",{className:"relative flex-1",children:[u.jsx(ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-400"}),u.jsx("input",{type:"text",placeholder:"Search users by username, name, or email...",value:d,onChange:Y=>De(Y.target.value),className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent"})]})}),u.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg overflow-hidden",children:[u.jsx("div",{className:"px-6 py-4 border-b border-nothing-gray-800",children:u.jsxs("h3",{className:"text-lg font-semibold",children:["Users (",(m||[]).length,")"]})}),u.jsx("div",{className:"max-h-96 overflow-y-auto",children:(m||[]).map(Y=>u.jsx("div",{className:"px-6 py-4 border-b border-nothing-gray-800 last:border-b-0 hover:bg-nothing-gray-800 transition-colors duration-200",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border border-nothing-gray-600",children:Y.profilePicture?u.jsx("img",{src:gn(Y.profilePicture),alt:Y.displayName,loading:"lazy",className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full bg-nothing-red flex items-center justify-center",children:u.jsx("span",{className:"text-sm font-bold text-nothing-white",children:Y.displayName?.charAt(0)?.toUpperCase()||Y.username?.charAt(0)?.toUpperCase()||"U"})})}),u.jsxs("div",{children:[u.jsxs("p",{className:"font-semibold text-nothing-white",children:[Y.displayName||Y.username,(Y.uid==="9H3pw5zS6GRDFTZaoYspEmruORj2"||Y.isAdmin)&&u.jsx(la,{className:"inline h-4 w-4 ml-2 text-nothing-red"})]}),u.jsxs("p",{className:"text-sm text-nothing-gray-400",children:["@",Y.username]}),u.jsx("p",{className:"text-xs text-nothing-gray-500",children:Y.email})]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[!Y.isAdmin&&Y.uid!=="9H3pw5zS6GRDFTZaoYspEmruORj2"&&u.jsx("button",{onClick:()=>Fe(Y.uid),disabled:A,className:"px-3 py-1 bg-nothing-red hover:bg-red-700 text-nothing-white text-sm rounded transition-colors duration-200 disabled:opacity-50",children:"Make Admin"}),u.jsx("button",{onClick:()=>E(Y),className:"p-2 text-nothing-gray-400 hover:text-nothing-white transition-colors duration-200",children:u.jsx(l4,{className:"h-4 w-4"})})]})]})},Y.uid))})]})]}),O==="glyphs"&&u.jsx("div",{className:"space-y-6",children:u.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg overflow-hidden",children:[u.jsx("div",{className:"px-6 py-4 border-b border-nothing-gray-800",children:u.jsxs("h3",{className:"text-lg font-semibold",children:["All Glyphs (",(V||[]).length,")"]})}),u.jsx("div",{className:"max-h-96 overflow-y-auto",children:(V||[]).map(Y=>u.jsx("div",{className:"px-6 py-4 border-b border-nothing-gray-800 last:border-b-0 hover:bg-nothing-gray-800 transition-colors duration-200",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("div",{className:"w-12 h-12 rounded-lg overflow-hidden border border-nothing-gray-600",children:Y.images&&Y.images.length>0?u.jsx("img",{src:gn(Y.images[0]),alt:Y.title,loading:"lazy",className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full bg-nothing-gray-700 flex items-center justify-center",children:u.jsx(ih,{className:"h-6 w-6 text-nothing-gray-500"})})}),u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-nothing-white",children:Y.title}),u.jsxs("p",{className:"text-sm text-nothing-gray-400",children:["by @",Y.creatorUsername]}),u.jsxs("p",{className:"text-xs text-nothing-gray-500",children:[Y.downloads||0," downloads  ",Y.views||0," views  ",Y.likes||0," likes"]})]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("button",{onClick:()=>t(`/glyph/${Y.id}`),className:"px-3 py-1 bg-nothing-gray-700 hover:bg-nothing-gray-600 text-nothing-white text-sm rounded transition-colors duration-200",children:"View"}),u.jsx("button",{onClick:()=>rt(Y.id),disabled:A,className:"p-2 text-red-400 hover:text-red-300 transition-colors duration-200 disabled:opacity-50",children:u.jsx(h4,{className:"h-4 w-4"})})]})]})},Y.id))})]})}),O==="requests"&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[u.jsx("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-nothing-gray-400 text-sm",children:"Total Requests"}),u.jsx("p",{className:"text-3xl font-bold text-nothing-white",children:j.length})]}),u.jsx(as,{className:"h-8 w-8 text-purple-500"})]})}),u.jsx("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-nothing-gray-400 text-sm",children:"Open"}),u.jsx("p",{className:"text-3xl font-bold text-nothing-white",children:j.filter(Y=>Y.status==="open").length})]}),u.jsx(oc,{className:"h-8 w-8 text-green-500"})]})}),u.jsx("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-nothing-gray-400 text-sm",children:"In Progress"}),u.jsx("p",{className:"text-3xl font-bold text-nothing-white",children:j.filter(Y=>Y.status==="in_progress").length})]}),u.jsx(Nn,{className:"h-8 w-8 text-yellow-500"})]})}),u.jsx("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-nothing-gray-400 text-sm",children:"Completed"}),u.jsx("p",{className:"text-3xl font-bold text-nothing-white",children:j.filter(Y=>Y.status==="completed").length})]}),u.jsx(Gp,{className:"h-8 w-8 text-blue-500"})]})})]}),u.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg",children:[u.jsxs("div",{className:"p-6 border-b border-nothing-gray-800",children:[u.jsx("h3",{className:"text-lg font-semibold",children:"All Glyph Requests"}),u.jsx("p",{className:"text-nothing-gray-400 text-sm",children:"Manage and monitor all glyph requests"})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b border-nothing-gray-800",children:[u.jsx("th",{className:"text-left p-4 text-nothing-gray-400 font-medium",children:"Title"}),u.jsx("th",{className:"text-left p-4 text-nothing-gray-400 font-medium",children:"Status"}),u.jsx("th",{className:"text-left p-4 text-nothing-gray-400 font-medium",children:"Requester"}),u.jsx("th",{className:"text-left p-4 text-nothing-gray-400 font-medium",children:"Assigned To"}),u.jsx("th",{className:"text-left p-4 text-nothing-gray-400 font-medium",children:"Created"}),u.jsx("th",{className:"text-left p-4 text-nothing-gray-400 font-medium",children:"Actions"})]})}),u.jsx("tbody",{children:j.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:"6",className:"p-8 text-center text-nothing-gray-400",children:"No requests found"})}):j.map(Y=>u.jsxs("tr",{className:"border-b border-nothing-gray-800 hover:bg-nothing-gray-800/50",children:[u.jsx("td",{className:"p-4",children:u.jsxs("div",{children:[u.jsx("p",{className:"text-nothing-white font-medium",children:Y.title}),u.jsx("p",{className:"text-nothing-gray-400 text-sm truncate max-w-xs",children:Y.description})]})}),u.jsx("td",{className:"p-4",children:u.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${vs(Y.status)}`,children:Y.status.replace("_"," ").toUpperCase()})}),u.jsx("td",{className:"p-4",children:u.jsx("span",{className:"text-nothing-white",children:Y.user?.username||"Unknown"})}),u.jsx("td",{className:"p-4",children:u.jsx("span",{className:"text-nothing-white",children:Y.assigned_user?.username||(Y.assigned_to?"Unknown":"None")})}),u.jsx("td",{className:"p-4",children:u.jsx("span",{className:"text-nothing-gray-400 text-sm",children:Ur(Y.created_at)})}),u.jsx("td",{className:"p-4",children:u.jsxs("div",{className:"flex items-center space-x-2",children:[Y.status==="in_progress"&&u.jsx("button",{onClick:()=>Mr(Y.id),disabled:A,className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-xs rounded transition-colors duration-200 disabled:opacity-50",children:"Complete"}),(Y.status==="in_progress"||Y.status==="completed")&&u.jsx("button",{onClick:()=>mr(Y.id),disabled:A,className:"px-3 py-1 bg-yellow-600 hover:bg-yellow-700 text-white text-xs rounded transition-colors duration-200 disabled:opacity-50",children:"Reset"}),u.jsx("button",{onClick:()=>bt(Y.id),disabled:A,className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white text-xs rounded transition-colors duration-200 disabled:opacity-50",children:"Delete"})]})})]},Y.id))})]})})]})]}),O==="admins"&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6",children:[u.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add New Admin"}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("input",{type:"email",placeholder:"Enter email address",value:R,onChange:Y=>I(Y.target.value),className:"flex-1 px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent"}),u.jsxs("button",{onClick:Ke,disabled:A||!R.trim(),className:"px-6 py-3 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 flex items-center space-x-2",children:[u.jsx(d4,{className:"h-4 w-4"}),u.jsx("span",{children:"Add Admin"})]})]})]}),u.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg overflow-hidden",children:[u.jsx("div",{className:"px-6 py-4 border-b border-nothing-gray-800",children:u.jsxs("h3",{className:"text-lg font-semibold",children:["Current Admins (",N.length,")"]})}),u.jsx("div",{children:N.map(Y=>u.jsx("div",{className:"px-6 py-4 border-b border-nothing-gray-800 last:border-b-0",children:u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border border-nothing-gray-600",children:Y.profilePicture?u.jsx("img",{src:gn(Y.profilePicture),alt:Y.displayName,loading:"lazy",className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full bg-nothing-red flex items-center justify-center",children:u.jsx("span",{className:"text-sm font-bold text-nothing-white",children:Y.displayName?.charAt(0)?.toUpperCase()||Y.username?.charAt(0)?.toUpperCase()||"A"})})}),u.jsxs("div",{children:[u.jsxs("p",{className:"font-semibold text-nothing-white flex items-center",children:[Y.displayName||Y.username,u.jsx(la,{className:"h-4 w-4 ml-2 text-nothing-red"}),Y.uid==="9H3pw5zS6GRDFTZaoYspEmruORj2"&&u.jsx("span",{className:"ml-2 px-2 py-1 bg-nothing-red text-nothing-white text-xs rounded",children:"Super Admin"})]}),u.jsxs("p",{className:"text-sm text-nothing-gray-400",children:["@",Y.username]}),u.jsx("p",{className:"text-xs text-nothing-gray-500",children:Y.email})]})]})})},Y.uid))})]})]})]},O)]})}):u.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-2xl font-bold text-red-500 mb-4",children:"Access Denied"}),u.jsx("p",{className:"text-nothing-gray-400 mb-6",children:"You don't have permission to access the admin panel."}),u.jsx("button",{onClick:()=>t("/"),className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-6 py-3 rounded-lg font-medium transition-colors duration-200",children:"Return to Home"})]})})},qO=()=>{const[n,e]=P.useState([]),[t,r]=P.useState(!0),[o,a]=P.useState(""),[c,d]=P.useState(!1),{currentUser:p,userProfile:m}=Gn(),[v,w]=P.useState({title:"",description:"",tags:"",referenceImages:[],referenceFiles:[]});P.useEffect(()=>{E()},[o]);const E=async()=>{try{r(!0);const M={limit:"20",offset:"0"};o.trim()&&(M.search=o.trim());const j=await Le.getGlyphRequests(M);e(j.requests||[])}catch(M){console.error("Error fetching requests:",M),e([])}finally{r(!1)}},b=async M=>{if(M.preventDefault(),!p){alert("Please log in to create a request");return}try{const j={title:v.title,description:v.description,tags:v.tags.split(",").map(W=>W.trim()).filter(W=>W),reference_images:v.referenceImages,reference_files:v.referenceFiles};await Le.createGlyphRequest(j),d(!1),w({title:"",description:"",tags:"",referenceImages:[],referenceFiles:[]}),E()}catch(j){console.error("Error creating request:",j),alert(j.message||"Failed to create request")}},L=async M=>{if(!p){alert("Please log in to take on requests");return}try{await Le.takeOnGlyphRequest(M),alert("Successfully took on the request!"),E()}catch(j){console.error("Error taking on request:",j),alert(j.message||"Failed to take on request")}},V=M=>{try{return new Date(M).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch{return"Unknown date"}},k=M=>{switch(M){case"open":return"text-green-400 bg-green-400/10";case"in_progress":return"text-yellow-400 bg-yellow-400/10";case"completed":return"text-blue-400 bg-blue-400/10";case"cancelled":return"text-red-400 bg-red-400/10";default:return"text-nothing-gray-400 bg-nothing-gray-400/10"}},D=(M,j=150)=>M.length<=j?M:M.substr(0,j)+"...";return t?u.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse",children:u.jsx(as,{className:"h-8 w-8 text-nothing-white"})}),u.jsx("p",{className:"text-nothing-gray-400",children:"Loading requests..."})]})}):u.jsxs("div",{className:"min-h-screen bg-nothing-black",children:[u.jsx("section",{className:"relative py-16 px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"max-w-7xl mx-auto",children:[u.jsx("div",{className:"text-center mb-8",children:u.jsxs(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:[u.jsxs("h1",{className:"text-4xl md:text-6xl font-bold text-nothing-white mb-4 font-nothing",children:["Request ",u.jsx("span",{className:"text-nothing-red",children:"Glyph Toys"})]}),u.jsx("p",{className:"text-xl text-nothing-gray-300 mb-8 max-w-3xl mx-auto",children:"Share your ideas for custom Nothing Phone(3) glyphs and let the community bring them to life"})]})}),u.jsx("div",{className:"max-w-4xl mx-auto mb-8",children:u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[u.jsxs("div",{className:"flex-1 relative",children:[u.jsx("input",{type:"text",value:o,onChange:M=>a(M.target.value),placeholder:"Search requests...",className:"w-full bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg py-3 pl-10 pr-4 text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200"}),u.jsx(ts,{className:"absolute left-3 top-3.5 h-5 w-5 text-nothing-gray-400"})]}),p&&u.jsxs("button",{onClick:()=>d(!0),className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-6 py-3 rounded-lg font-semibold transition-colors duration-200 flex items-center space-x-2",children:[u.jsx(CT,{className:"h-5 w-5"}),u.jsx("span",{children:"Create Request"})]})]})})]})}),c&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsx("div",{className:"bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:u.jsxs("div",{className:"p-6",children:[u.jsx("h3",{className:"text-2xl font-bold text-nothing-white mb-6",children:"Create Glyph Request"}),u.jsxs("form",{onSubmit:b,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-nothing-white font-medium mb-2",children:"Title"}),u.jsx("input",{type:"text",value:v.title,onChange:M=>w({...v,title:M.target.value}),required:!0,className:"w-full bg-nothing-gray-800 border border-nothing-gray-600 rounded-lg py-2 px-3 text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red",placeholder:"Brief title for your glyph idea..."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-nothing-white font-medium mb-2",children:"Description"}),u.jsx("textarea",{value:v.description,onChange:M=>w({...v,description:M.target.value}),required:!0,rows:6,className:"w-full bg-nothing-gray-800 border border-nothing-gray-600 rounded-lg py-2 px-3 text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red resize-none",placeholder:"Describe your glyph idea in detail. What should it look like? How should it behave? Any specific requirements?"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-nothing-white font-medium mb-2",children:"Tags (comma-separated)"}),u.jsx("input",{type:"text",value:v.tags,onChange:M=>w({...v,tags:M.target.value}),className:"w-full bg-nothing-gray-800 border border-nothing-gray-600 rounded-lg py-2 px-3 text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red",placeholder:"animation, gaming, utility, fun, etc."})]}),u.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[u.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-6 py-2 border border-nothing-gray-600 text-nothing-gray-300 rounded-lg hover:bg-nothing-gray-800 transition-colors duration-200",children:"Cancel"}),u.jsx("button",{type:"submit",className:"px-6 py-2 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-lg transition-colors duration-200",children:"Create Request"})]})]})]})})}),u.jsx("section",{className:"px-4 sm:px-6 lg:px-8 pb-20",children:u.jsx("div",{className:"max-w-7xl mx-auto",children:n.length===0?u.jsxs("div",{className:"text-center py-16",children:[u.jsx("div",{className:"w-16 h-16 bg-nothing-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(as,{className:"h-8 w-8 text-nothing-gray-600"})}),u.jsx("p",{className:"text-nothing-gray-400 text-lg",children:"No requests found"}),u.jsx("p",{className:"text-nothing-gray-500 text-sm mt-2",children:o?"Try a different search term":"Be the first to create a glyph request!"})]}):u.jsx("div",{className:"space-y-6",children:n.map((M,j)=>u.jsx(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:j*.1},className:"bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg p-6 hover:border-nothing-gray-600 transition-colors duration-200",children:u.jsx("div",{className:"flex justify-between items-start mb-4",children:u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[u.jsx("h3",{className:"text-xl font-semibold text-nothing-white",children:M.title}),u.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${k(M.status)}`,children:M.status.replace("_"," ").toUpperCase()})]}),u.jsx("p",{className:"text-nothing-gray-300 mb-4 leading-relaxed",children:D(M.description)}),M.tags&&M.tags.length>0&&u.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:M.tags.map((W,ee)=>u.jsxs("span",{className:"inline-flex items-center space-x-1 px-2 py-1 bg-nothing-gray-800 text-nothing-gray-300 text-xs rounded-full",children:[u.jsx(RT,{className:"h-3 w-3"}),u.jsx("span",{children:W})]},ee))}),u.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[M.reference_images&&M.reference_images.length>0&&u.jsxs("span",{className:"inline-flex items-center space-x-1 text-nothing-gray-400 text-sm",children:[u.jsx(ih,{className:"h-4 w-4"}),u.jsxs("span",{children:[M.reference_images.length," image",M.reference_images.length!==1?"s":""]})]}),M.reference_files&&M.reference_files.length>0&&u.jsxs("span",{className:"inline-flex items-center space-x-1 text-nothing-gray-400 text-sm",children:[u.jsx(a4,{className:"h-4 w-4"}),u.jsxs("span",{children:[M.reference_files.length," file",M.reference_files.length!==1?"s":""]})]})]}),u.jsxs("div",{className:"flex items-center justify-between text-sm text-nothing-gray-400",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("span",{className:"inline-flex items-center space-x-1",children:[u.jsx(ls,{className:"h-4 w-4"}),u.jsxs("span",{children:["by ",M.user?.username||"Unknown"]})]}),u.jsxs("span",{className:"inline-flex items-center space-x-1",children:[u.jsx(oc,{className:"h-4 w-4"}),u.jsx("span",{children:V(M.created_at)})]})]}),M.status==="open"&&p&&u.jsx("button",{onClick:()=>L(M.id),className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200",children:"Take On"})]})]})})},M.id))})})})]})},GO=()=>{const[n,e]=P.useState([]),[t,r]=P.useState([]),[o,a]=P.useState(!0),[c,d]=P.useState("taken"),{currentUser:p,userProfile:m}=Gn();P.useEffect(()=>{p&&(v(),w())},[p,c]);const v=async()=>{try{if(a(!0),c==="taken"){const D=await Le.getMyGlyphRequests("assigned");e(D.requests.filter(M=>M.type==="assigned"))}else{const D=await Le.getMyGlyphRequests("created");e(D.requests.filter(M=>M.type==="created"))}}catch(D){console.error("Error fetching my requests:",D),e([])}finally{a(!1)}},w=async()=>{try{const D=await Le.getGlyphs({creator_id:p.uid,limit:100});r(D)}catch(D){console.error("Error fetching my glyphs:",D),r([])}},E=async(D,M=null)=>{try{await Le.completeGlyphRequest(D,M),alert("Request marked as completed!"),v()}catch(j){console.error("Error completing request:",j),alert(j.message||"Failed to complete request")}},b=async D=>{if(confirm("Are you sure you want to cancel this request?"))try{await Le.cancelGlyphRequest(D),alert("Request cancelled"),v()}catch(M){console.error("Error cancelling request:",M),alert(M.message||"Failed to cancel request")}},L=D=>{try{return new Date(D).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch{return"Unknown date"}},V=D=>{switch(D){case"open":return"text-green-400 bg-green-400/10";case"in_progress":return"text-yellow-400 bg-yellow-400/10";case"completed":return"text-blue-400 bg-blue-400/10";case"cancelled":return"text-red-400 bg-red-400/10";default:return"text-nothing-gray-400 bg-nothing-gray-400/10"}},k=(D,M=100)=>D.length<=M?D:D.substr(0,M)+"...";return o?u.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse",children:u.jsx(as,{className:"h-8 w-8 text-nothing-white"})}),u.jsx("p",{className:"text-nothing-gray-400",children:"Loading your requests..."})]})}):u.jsxs("div",{className:"min-h-screen bg-nothing-black",children:[u.jsx("section",{className:"relative py-16 px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"max-w-7xl mx-auto",children:[u.jsx("div",{className:"text-center mb-8",children:u.jsxs(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:[u.jsxs("h1",{className:"text-4xl md:text-6xl font-bold text-nothing-white mb-4 font-nothing",children:["My ",u.jsx("span",{className:"text-nothing-red",children:"Requests"})]}),u.jsx("p",{className:"text-xl text-nothing-gray-300 mb-8 max-w-3xl mx-auto",children:"Manage the glyph requests you've taken on and created"})]})}),u.jsx("div",{className:"max-w-4xl mx-auto mb-8",children:u.jsxs("div",{className:"flex space-x-4 border-b border-nothing-gray-800",children:[u.jsxs("button",{onClick:()=>d("taken"),className:`flex items-center space-x-2 px-4 py-3 font-medium border-b-2 transition-colors duration-200 ${c==="taken"?"border-nothing-red text-nothing-red":"border-transparent text-nothing-gray-400 hover:text-nothing-white"}`,children:[u.jsx(Nh,{className:"h-4 w-4"}),u.jsxs("span",{children:["Taken On (",n.filter(D=>D.assigned_to===p?.uid).length,")"]})]}),u.jsxs("button",{onClick:()=>d("created"),className:`flex items-center space-x-2 px-4 py-3 font-medium border-b-2 transition-colors duration-200 ${c==="created"?"border-nothing-red text-nothing-red":"border-transparent text-nothing-gray-400 hover:text-nothing-white"}`,children:[u.jsx(as,{className:"h-4 w-4"}),u.jsxs("span",{children:["Created (",n.filter(D=>D.user_id===p?.uid).length,")"]})]})]})})]})}),u.jsx("section",{className:"px-4 sm:px-6 lg:px-8 pb-20",children:u.jsx("div",{className:"max-w-7xl mx-auto",children:n.length===0?u.jsxs("div",{className:"text-center py-16",children:[u.jsx("div",{className:"w-16 h-16 bg-nothing-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(as,{className:"h-8 w-8 text-nothing-gray-600"})}),u.jsx("p",{className:"text-nothing-gray-400 text-lg",children:c==="taken"?"No requests taken on yet":"No requests created yet"}),u.jsx("p",{className:"text-nothing-gray-500 text-sm mt-2",children:c==="taken"?"Browse available requests to take on":"Create your first glyph request!"}),u.jsx(Ge,{to:"/request-glyphs",className:"inline-block mt-4 bg-nothing-red hover:bg-red-700 text-nothing-white px-6 py-2 rounded-lg transition-colors duration-200",children:c==="taken"?"Browse Requests":"Create Request"})]}):u.jsx("div",{className:"space-y-6",children:n.map((D,M)=>u.jsx(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:M*.1},className:"bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg p-6 hover:border-nothing-gray-600 transition-colors duration-200",children:u.jsx("div",{className:"flex justify-between items-start mb-4",children:u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[u.jsx("h3",{className:"text-xl font-semibold text-nothing-white",children:D.title}),u.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${V(D.status)}`,children:D.status.replace("_"," ").toUpperCase()})]}),u.jsx("p",{className:"text-nothing-gray-300 mb-4 leading-relaxed",children:k(D.description)}),D.tags&&D.tags.length>0&&u.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:D.tags.map((j,W)=>u.jsxs("span",{className:"inline-flex items-center space-x-1 px-2 py-1 bg-nothing-gray-800 text-nothing-gray-300 text-xs rounded-full",children:[u.jsx(RT,{className:"h-3 w-3"}),u.jsx("span",{children:j})]},W))}),u.jsxs("div",{className:"flex items-center justify-between text-sm text-nothing-gray-400",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("span",{className:"inline-flex items-center space-x-1",children:[u.jsx(ls,{className:"h-4 w-4"}),u.jsxs("span",{children:["by ",D.user?.username||"Unknown"]})]}),u.jsxs("span",{className:"inline-flex items-center space-x-1",children:[u.jsx(oc,{className:"h-4 w-4"}),u.jsx("span",{children:L(D.created_at)})]})]}),c==="taken"&&D.status==="in_progress"&&u.jsxs("div",{className:"flex space-x-2",children:[u.jsxs("div",{className:"relative group",children:[u.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-nothing-white px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200",children:"Complete"}),u.jsx("div",{className:"absolute right-0 top-full mt-1 w-64 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10",children:u.jsxs("div",{className:"p-3",children:[u.jsx("p",{className:"text-nothing-white text-sm mb-2",children:"Complete with glyph:"}),u.jsxs("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:[u.jsx("button",{onClick:()=>E(D.id),className:"w-full text-left px-2 py-1 text-nothing-gray-300 hover:bg-nothing-gray-700 rounded text-xs",children:"Mark as complete (no glyph)"}),t.map(j=>u.jsx("button",{onClick:()=>E(D.id,j.id),className:"w-full text-left px-2 py-1 text-nothing-gray-300 hover:bg-nothing-gray-700 rounded text-xs",children:k(j.title,30)},j.id))]})]})})]}),u.jsx("button",{onClick:()=>b(D.id),className:"bg-red-600 hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200",children:"Cancel"})]}),c==="created"&&D.assigned_to&&u.jsxs("div",{className:"text-nothing-gray-400 text-sm",children:["Assigned to: ",D.assigned_user?.username||"Unknown"]})]})]})})},D.id))})})})]})},Al=({children:n})=>{const{currentUser:e}=Gn();return e?n:u.jsx(Gw,{to:"/login"})},Rw=({children:n})=>{const{currentUser:e}=Gn();return e?u.jsx(Gw,{to:"/"}):n};function HO(){return u.jsx(Kj,{children:u.jsx(mI,{children:u.jsxs("div",{className:"App",children:[u.jsx(jO,{}),u.jsxs(aI,{children:[u.jsx(Sn,{path:"/",element:u.jsx(DO,{})}),u.jsx(Sn,{path:"/login",element:u.jsx(Rw,{children:u.jsx(VO,{})})}),u.jsx(Sn,{path:"/signup",element:u.jsx(Rw,{children:u.jsx(LO,{})})}),u.jsx(Sn,{path:"/glyph/:id",element:u.jsx(OO,{})}),u.jsx(Sn,{path:"/storefront/:username",element:u.jsx(MO,{})}),u.jsx(Sn,{path:"/upload",element:u.jsx(Al,{children:u.jsx(UO,{})})}),u.jsx(Sn,{path:"/search",element:u.jsx(FO,{})}),u.jsx(Sn,{path:"/request-glyphs",element:u.jsx(qO,{})}),u.jsx(Sn,{path:"/my-requests",element:u.jsx(Al,{children:u.jsx(GO,{})})}),u.jsx(Sn,{path:"/liked",element:u.jsx(Al,{children:u.jsx(BO,{})})}),u.jsx(Sn,{path:"/settings",element:u.jsx(Al,{children:u.jsx(zO,{})})}),u.jsx(Sn,{path:"/admin",element:u.jsx(Al,{children:u.jsx($O,{})})})]})]})})})}gS.createRoot(document.getElementById("root")).render(u.jsx(P.StrictMode,{children:u.jsx(HO,{})}));
