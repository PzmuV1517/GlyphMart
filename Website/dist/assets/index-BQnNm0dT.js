function iS(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in n)){const a=Object.getOwnPropertyDescriptor(r,o);a&&Object.defineProperty(n,o,a.get?a:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function oS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Lf={exports:{}},Sl={},Of={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L0;function aS(){if(L0)return Fe;L0=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.iterator;function E(U){return U===null||typeof U!="object"?null:(U=w&&U[w]||U["@@iterator"],typeof U=="function"?U:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,V={};function P(U,X,me){this.props=U,this.context=X,this.refs=V,this.updater=me||b}P.prototype.isReactComponent={},P.prototype.setState=function(U,X){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,X,"setState")},P.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function D(){}D.prototype=P.prototype;function O(U,X,me){this.props=U,this.context=X,this.refs=V,this.updater=me||b}var j=O.prototype=new D;j.constructor=O,L(j,P.prototype),j.isPureReactComponent=!0;var W=Array.isArray,Z=Object.prototype.hasOwnProperty,ae={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function I(U,X,me){var ce,he={},ve=null,Le=null;if(X!=null)for(ce in X.ref!==void 0&&(Le=X.ref),X.key!==void 0&&(ve=""+X.key),X)Z.call(X,ce)&&!R.hasOwnProperty(ce)&&(he[ce]=X[ce]);var Q=arguments.length-2;if(Q===1)he.children=me;else if(1<Q){for(var we=Array(Q),Ve=0;Ve<Q;Ve++)we[Ve]=arguments[Ve+2];he.children=we}if(U&&U.defaultProps)for(ce in Q=U.defaultProps,Q)he[ce]===void 0&&(he[ce]=Q[ce]);return{$$typeof:n,type:U,key:ve,ref:Le,props:he,_owner:ae.current}}function N(U,X){return{$$typeof:n,type:U.type,key:X,ref:U.ref,props:U.props,_owner:U._owner}}function M(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function B(U){var X={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(me){return X[me]})}var $=/\/+/g;function A(U,X){return typeof U=="object"&&U!==null&&U.key!=null?B(""+U.key):X.toString(36)}function _e(U,X,me,ce,he){var ve=typeof U;(ve==="undefined"||ve==="boolean")&&(U=null);var Le=!1;if(U===null)Le=!0;else switch(ve){case"string":case"number":Le=!0;break;case"object":switch(U.$$typeof){case n:case e:Le=!0}}if(Le)return Le=U,he=he(Le),U=ce===""?"."+A(Le,0):ce,W(he)?(me="",U!=null&&(me=U.replace($,"$&/")+"/"),_e(he,X,me,"",function(Ve){return Ve})):he!=null&&(M(he)&&(he=N(he,me+(!he.key||Le&&Le.key===he.key?"":(""+he.key).replace($,"$&/")+"/")+U)),X.push(he)),1;if(Le=0,ce=ce===""?".":ce+":",W(U))for(var Q=0;Q<U.length;Q++){ve=U[Q];var we=ce+A(ve,Q);Le+=_e(ve,X,me,we,he)}else if(we=E(U),typeof we=="function")for(U=we.call(U),Q=0;!(ve=U.next()).done;)ve=ve.value,we=ce+A(ve,Q++),Le+=_e(ve,X,me,we,he);else if(ve==="object")throw X=String(U),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return Le}function Ue(U,X,me){if(U==null)return U;var ce=[],he=0;return _e(U,ce,"","",function(ve){return X.call(me,ve,he++)}),ce}function Oe(U){if(U._status===-1){var X=U._result;X=X(),X.then(function(me){(U._status===0||U._status===-1)&&(U._status=1,U._result=me)},function(me){(U._status===0||U._status===-1)&&(U._status=2,U._result=me)}),U._status===-1&&(U._status=0,U._result=X)}if(U._status===1)return U._result.default;throw U._result}var Ae={current:null},oe={transition:null},ee={ReactCurrentDispatcher:Ae,ReactCurrentBatchConfig:oe,ReactCurrentOwner:ae};function J(){throw Error("act(...) is not supported in production builds of React.")}return Fe.Children={map:Ue,forEach:function(U,X,me){Ue(U,function(){X.apply(this,arguments)},me)},count:function(U){var X=0;return Ue(U,function(){X++}),X},toArray:function(U){return Ue(U,function(X){return X})||[]},only:function(U){if(!M(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Fe.Component=P,Fe.Fragment=t,Fe.Profiler=o,Fe.PureComponent=O,Fe.StrictMode=r,Fe.Suspense=p,Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,Fe.act=J,Fe.cloneElement=function(U,X,me){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var ce=L({},U.props),he=U.key,ve=U.ref,Le=U._owner;if(X!=null){if(X.ref!==void 0&&(ve=X.ref,Le=ae.current),X.key!==void 0&&(he=""+X.key),U.type&&U.type.defaultProps)var Q=U.type.defaultProps;for(we in X)Z.call(X,we)&&!R.hasOwnProperty(we)&&(ce[we]=X[we]===void 0&&Q!==void 0?Q[we]:X[we])}var we=arguments.length-2;if(we===1)ce.children=me;else if(1<we){Q=Array(we);for(var Ve=0;Ve<we;Ve++)Q[Ve]=arguments[Ve+2];ce.children=Q}return{$$typeof:n,type:U.type,key:he,ref:ve,props:ce,_owner:Le}},Fe.createContext=function(U){return U={$$typeof:c,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:a,_context:U},U.Consumer=U},Fe.createElement=I,Fe.createFactory=function(U){var X=I.bind(null,U);return X.type=U,X},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(U){return{$$typeof:d,render:U}},Fe.isValidElement=M,Fe.lazy=function(U){return{$$typeof:v,_payload:{_status:-1,_result:U},_init:Oe}},Fe.memo=function(U,X){return{$$typeof:m,type:U,compare:X===void 0?null:X}},Fe.startTransition=function(U){var X=oe.transition;oe.transition={};try{U()}finally{oe.transition=X}},Fe.unstable_act=J,Fe.useCallback=function(U,X){return Ae.current.useCallback(U,X)},Fe.useContext=function(U){return Ae.current.useContext(U)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(U){return Ae.current.useDeferredValue(U)},Fe.useEffect=function(U,X){return Ae.current.useEffect(U,X)},Fe.useId=function(){return Ae.current.useId()},Fe.useImperativeHandle=function(U,X,me){return Ae.current.useImperativeHandle(U,X,me)},Fe.useInsertionEffect=function(U,X){return Ae.current.useInsertionEffect(U,X)},Fe.useLayoutEffect=function(U,X){return Ae.current.useLayoutEffect(U,X)},Fe.useMemo=function(U,X){return Ae.current.useMemo(U,X)},Fe.useReducer=function(U,X,me){return Ae.current.useReducer(U,X,me)},Fe.useRef=function(U){return Ae.current.useRef(U)},Fe.useState=function(U){return Ae.current.useState(U)},Fe.useSyncExternalStore=function(U,X,me){return Ae.current.useSyncExternalStore(U,X,me)},Fe.useTransition=function(){return Ae.current.useTransition()},Fe.version="18.3.1",Fe}var O0;function om(){return O0||(O0=1,Of.exports=aS()),Of.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M0;function lS(){if(M0)return Sl;M0=1;var n=om(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(d,p,m){var v,w={},E=null,b=null;m!==void 0&&(E=""+m),p.key!==void 0&&(E=""+p.key),p.ref!==void 0&&(b=p.ref);for(v in p)r.call(p,v)&&!a.hasOwnProperty(v)&&(w[v]=p[v]);if(d&&d.defaultProps)for(v in p=d.defaultProps,p)w[v]===void 0&&(w[v]=p[v]);return{$$typeof:e,type:d,key:E,ref:b,props:w,_owner:o.current}}return Sl.Fragment=t,Sl.jsx=c,Sl.jsxs=c,Sl}var U0;function cS(){return U0||(U0=1,Lf.exports=lS()),Lf.exports}var u=cS(),k=om();const Vh=oS(k),uS=iS({__proto__:null,default:Vh},[k]);var Uu={},Mf={exports:{}},hn={},Uf={exports:{}},Ff={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F0;function hS(){return F0||(F0=1,function(n){function e(oe,ee){var J=oe.length;oe.push(ee);e:for(;0<J;){var U=J-1>>>1,X=oe[U];if(0<o(X,ee))oe[U]=ee,oe[J]=X,J=U;else break e}}function t(oe){return oe.length===0?null:oe[0]}function r(oe){if(oe.length===0)return null;var ee=oe[0],J=oe.pop();if(J!==ee){oe[0]=J;e:for(var U=0,X=oe.length,me=X>>>1;U<me;){var ce=2*(U+1)-1,he=oe[ce],ve=ce+1,Le=oe[ve];if(0>o(he,J))ve<X&&0>o(Le,he)?(oe[U]=Le,oe[ve]=J,U=ve):(oe[U]=he,oe[ce]=J,U=ce);else if(ve<X&&0>o(Le,J))oe[U]=Le,oe[ve]=J,U=ve;else break e}}return ee}function o(oe,ee){var J=oe.sortIndex-ee.sortIndex;return J!==0?J:oe.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var p=[],m=[],v=1,w=null,E=3,b=!1,L=!1,V=!1,P=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(oe){for(var ee=t(m);ee!==null;){if(ee.callback===null)r(m);else if(ee.startTime<=oe)r(m),ee.sortIndex=ee.expirationTime,e(p,ee);else break;ee=t(m)}}function W(oe){if(V=!1,j(oe),!L)if(t(p)!==null)L=!0,Oe(Z);else{var ee=t(m);ee!==null&&Ae(W,ee.startTime-oe)}}function Z(oe,ee){L=!1,V&&(V=!1,D(I),I=-1),b=!0;var J=E;try{for(j(ee),w=t(p);w!==null&&(!(w.expirationTime>ee)||oe&&!B());){var U=w.callback;if(typeof U=="function"){w.callback=null,E=w.priorityLevel;var X=U(w.expirationTime<=ee);ee=n.unstable_now(),typeof X=="function"?w.callback=X:w===t(p)&&r(p),j(ee)}else r(p);w=t(p)}if(w!==null)var me=!0;else{var ce=t(m);ce!==null&&Ae(W,ce.startTime-ee),me=!1}return me}finally{w=null,E=J,b=!1}}var ae=!1,R=null,I=-1,N=5,M=-1;function B(){return!(n.unstable_now()-M<N)}function $(){if(R!==null){var oe=n.unstable_now();M=oe;var ee=!0;try{ee=R(!0,oe)}finally{ee?A():(ae=!1,R=null)}}else ae=!1}var A;if(typeof O=="function")A=function(){O($)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,Ue=_e.port2;_e.port1.onmessage=$,A=function(){Ue.postMessage(null)}}else A=function(){P($,0)};function Oe(oe){R=oe,ae||(ae=!0,A())}function Ae(oe,ee){I=P(function(){oe(n.unstable_now())},ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(oe){oe.callback=null},n.unstable_continueExecution=function(){L||b||(L=!0,Oe(Z))},n.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<oe?Math.floor(1e3/oe):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(oe){switch(E){case 1:case 2:case 3:var ee=3;break;default:ee=E}var J=E;E=ee;try{return oe()}finally{E=J}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(oe,ee){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var J=E;E=oe;try{return ee()}finally{E=J}},n.unstable_scheduleCallback=function(oe,ee,J){var U=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?U+J:U):J=U,oe){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=J+X,oe={id:v++,callback:ee,priorityLevel:oe,startTime:J,expirationTime:X,sortIndex:-1},J>U?(oe.sortIndex=J,e(m,oe),t(p)===null&&oe===t(m)&&(V?(D(I),I=-1):V=!0,Ae(W,J-U))):(oe.sortIndex=X,e(p,oe),L||b||(L=!0,Oe(Z))),oe},n.unstable_shouldYield=B,n.unstable_wrapCallback=function(oe){var ee=E;return function(){var J=E;E=ee;try{return oe.apply(this,arguments)}finally{E=J}}}}(Ff)),Ff}var B0;function dS(){return B0||(B0=1,Uf.exports=hS()),Uf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z0;function fS(){if(z0)return hn;z0=1;var n=om(),e=dS();function t(s){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+s,l=1;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function a(s,i){c(s,i),c(s+"Capture",i)}function c(s,i){for(o[s]=i,s=0;s<i.length;s++)r.add(i[s])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},w={};function E(s){return p.call(w,s)?!0:p.call(v,s)?!1:m.test(s)?w[s]=!0:(v[s]=!0,!1)}function b(s,i,l,f){if(l!==null&&l.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return f?!1:l!==null?!l.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function L(s,i,l,f){if(i===null||typeof i>"u"||b(s,i,l,f))return!0;if(f)return!1;if(l!==null)switch(l.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function V(s,i,l,f,g,x,T){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=l,this.propertyName=s,this.type=i,this.sanitizeURL=x,this.removeEmptyString=T}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){P[s]=new V(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var i=s[0];P[i]=new V(i,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){P[s]=new V(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){P[s]=new V(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){P[s]=new V(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){P[s]=new V(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){P[s]=new V(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){P[s]=new V(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){P[s]=new V(s,5,!1,s.toLowerCase(),null,!1,!1)});var D=/[\-:]([a-z])/g;function O(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var i=s.replace(D,O);P[i]=new V(i,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var i=s.replace(D,O);P[i]=new V(i,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var i=s.replace(D,O);P[i]=new V(i,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){P[s]=new V(s,1,!1,s.toLowerCase(),null,!1,!1)}),P.xlinkHref=new V("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){P[s]=new V(s,1,!1,s.toLowerCase(),null,!0,!0)});function j(s,i,l,f){var g=P.hasOwnProperty(i)?P[i]:null;(g!==null?g.type!==0:f||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(L(i,l,g,f)&&(l=null),f||g===null?E(i)&&(l===null?s.removeAttribute(i):s.setAttribute(i,""+l)):g.mustUseProperty?s[g.propertyName]=l===null?g.type===3?!1:"":l:(i=g.attributeName,f=g.attributeNamespace,l===null?s.removeAttribute(i):(g=g.type,l=g===3||g===4&&l===!0?"":""+l,f?s.setAttributeNS(f,i,l):s.setAttribute(i,l))))}var W=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Z=Symbol.for("react.element"),ae=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),B=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),_e=Symbol.for("react.suspense_list"),Ue=Symbol.for("react.memo"),Oe=Symbol.for("react.lazy"),Ae=Symbol.for("react.offscreen"),oe=Symbol.iterator;function ee(s){return s===null||typeof s!="object"?null:(s=oe&&s[oe]||s["@@iterator"],typeof s=="function"?s:null)}var J=Object.assign,U;function X(s){if(U===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);U=i&&i[1]||""}return`
`+U+s}var me=!1;function ce(s,i){if(!s||me)return"";me=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(K){var f=K}Reflect.construct(s,[],i)}else{try{i.call()}catch(K){f=K}s.call(i.prototype)}else{try{throw Error()}catch(K){f=K}s()}}catch(K){if(K&&f&&typeof K.stack=="string"){for(var g=K.stack.split(`
`),x=f.stack.split(`
`),T=g.length-1,C=x.length-1;1<=T&&0<=C&&g[T]!==x[C];)C--;for(;1<=T&&0<=C;T--,C--)if(g[T]!==x[C]){if(T!==1||C!==1)do if(T--,C--,0>C||g[T]!==x[C]){var F=`
`+g[T].replace(" at new "," at ");return s.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",s.displayName)),F}while(1<=T&&0<=C);break}}}finally{me=!1,Error.prepareStackTrace=l}return(s=s?s.displayName||s.name:"")?X(s):""}function he(s){switch(s.tag){case 5:return X(s.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return s=ce(s.type,!1),s;case 11:return s=ce(s.type.render,!1),s;case 1:return s=ce(s.type,!0),s;default:return""}}function ve(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case R:return"Fragment";case ae:return"Portal";case N:return"Profiler";case I:return"StrictMode";case A:return"Suspense";case _e:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case B:return(s.displayName||"Context")+".Consumer";case M:return(s._context.displayName||"Context")+".Provider";case $:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Ue:return i=s.displayName||null,i!==null?i:ve(s.type)||"Memo";case Oe:i=s._payload,s=s._init;try{return ve(s(i))}catch{}}return null}function Le(s){var i=s.type;switch(s.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=i.render,s=s.displayName||s.name||"",i.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ve(i);case 8:return i===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Q(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function we(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ve(s){var i=we(s)?"checked":"value",l=Object.getOwnPropertyDescriptor(s.constructor.prototype,i),f=""+s[i];if(!s.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,x=l.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return g.call(this)},set:function(T){f=""+T,x.call(this,T)}}),Object.defineProperty(s,i,{enumerable:l.enumerable}),{getValue:function(){return f},setValue:function(T){f=""+T},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function _t(s){s._valueTracker||(s._valueTracker=Ve(s))}function jr(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var l=i.getValue(),f="";return s&&(f=we(s)?s.checked?"true":"false":s.value),s=f,s!==l?(i.setValue(s),!0):!1}function zn(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function li(s,i){var l=i.checked;return J({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??s._wrapperState.initialChecked})}function lo(s,i){var l=i.defaultValue==null?"":i.defaultValue,f=i.checked!=null?i.checked:i.defaultChecked;l=Q(i.value!=null?i.value:l),s._wrapperState={initialChecked:f,initialValue:l,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Ca(s,i){i=i.checked,i!=null&&j(s,"checked",i,!1)}function Ra(s,i){Ca(s,i);var l=Q(i.value),f=i.type;if(l!=null)f==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+l):s.value!==""+l&&(s.value=""+l);else if(f==="submit"||f==="reset"){s.removeAttribute("value");return}i.hasOwnProperty("value")?co(s,i.type,l):i.hasOwnProperty("defaultValue")&&co(s,i.type,Q(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(s.defaultChecked=!!i.defaultChecked)}function bc(s,i,l){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var f=i.type;if(!(f!=="submit"&&f!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+s._wrapperState.initialValue,l||i===s.value||(s.value=i),s.defaultValue=i}l=s.name,l!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,l!==""&&(s.name=l)}function co(s,i,l){(i!=="number"||zn(s.ownerDocument)!==s)&&(l==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+l&&(s.defaultValue=""+l))}var Dr=Array.isArray;function Vr(s,i,l,f){if(s=s.options,i){i={};for(var g=0;g<l.length;g++)i["$"+l[g]]=!0;for(l=0;l<s.length;l++)g=i.hasOwnProperty("$"+s[l].value),s[l].selected!==g&&(s[l].selected=g),g&&f&&(s[l].defaultSelected=!0)}else{for(l=""+Q(l),i=null,g=0;g<s.length;g++){if(s[g].value===l){s[g].selected=!0,f&&(s[g].defaultSelected=!0);return}i!==null||s[g].disabled||(i=s[g])}i!==null&&(i.selected=!0)}}function ja(s,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return J({},i,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function uo(s,i){var l=i.value;if(l==null){if(l=i.children,i=i.defaultValue,l!=null){if(i!=null)throw Error(t(92));if(Dr(l)){if(1<l.length)throw Error(t(93));l=l[0]}i=l}i==null&&(i=""),l=i}s._wrapperState={initialValue:Q(l)}}function ho(s,i){var l=Q(i.value),f=Q(i.defaultValue);l!=null&&(l=""+l,l!==s.value&&(s.value=l),i.defaultValue==null&&s.defaultValue!==l&&(s.defaultValue=l)),f!=null&&(s.defaultValue=""+f)}function Da(s){var i=s.textContent;i===s._wrapperState.initialValue&&i!==""&&i!==null&&(s.value=i)}function Et(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tt(s,i){return s==null||s==="http://www.w3.org/1999/xhtml"?Et(i):s==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Lr,Va=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,l,f,g){MSApp.execUnsafeLocalFunction(function(){return s(i,l,f,g)})}:s}(function(s,i){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=i;else{for(Lr=Lr||document.createElement("div"),Lr.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Lr.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;i.firstChild;)s.appendChild(i.firstChild)}});function ps(s,i){if(i){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=i;return}}s.textContent=i}var ci={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ui=["Webkit","ms","Moz","O"];Object.keys(ci).forEach(function(s){ui.forEach(function(i){i=i+s.charAt(0).toUpperCase()+s.substring(1),ci[i]=ci[s]})});function La(s,i,l){return i==null||typeof i=="boolean"||i===""?"":l||typeof i!="number"||i===0||ci.hasOwnProperty(s)&&ci[s]?(""+i).trim():i+"px"}function Oa(s,i){s=s.style;for(var l in i)if(i.hasOwnProperty(l)){var f=l.indexOf("--")===0,g=La(l,i[l],f);l==="float"&&(l="cssFloat"),f?s.setProperty(l,g):s[l]=g}}var Ma=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ua(s,i){if(i){if(Ma[s]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Fa(s,i){if(s.indexOf("-")===-1)return typeof i.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hi=null;function fo(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var po=null,In=null,hr=null;function mo(s){if(s=ul(s)){if(typeof po!="function")throw Error(t(280));var i=s.stateNode;i&&(i=eu(i),po(s.stateNode,s.type,i))}}function dr(s){In?hr?hr.push(s):hr=[s]:In=s}function Ba(){if(In){var s=In,i=hr;if(hr=In=null,mo(s),i)for(s=0;s<i.length;s++)mo(i[s])}}function di(s,i){return s(i)}function za(){}var Or=!1;function $a(s,i,l){if(Or)return s(i,l);Or=!0;try{return di(s,i,l)}finally{Or=!1,(In!==null||hr!==null)&&(za(),Ba())}}function dt(s,i){var l=s.stateNode;if(l===null)return null;var f=eu(l);if(f===null)return null;l=f[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(t(231,i,typeof l));return l}var go=!1;if(d)try{var $n={};Object.defineProperty($n,"passive",{get:function(){go=!0}}),window.addEventListener("test",$n,$n),window.removeEventListener("test",$n,$n)}catch{go=!1}function fi(s,i,l,f,g,x,T,C,F){var K=Array.prototype.slice.call(arguments,3);try{i.apply(l,K)}catch(ne){this.onError(ne)}}var pi=!1,yo=null,qn=!1,qa=null,cd={onError:function(s){pi=!0,yo=s}};function vo(s,i,l,f,g,x,T,C,F){pi=!1,yo=null,fi.apply(cd,arguments)}function Sc(s,i,l,f,g,x,T,C,F){if(vo.apply(this,arguments),pi){if(pi){var K=yo;pi=!1,yo=null}else throw Error(t(198));qn||(qn=!0,qa=K)}}function Gn(s){var i=s,l=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(l=i.return),s=i.return;while(s)}return i.tag===3?l:null}function mi(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function Hn(s){if(Gn(s)!==s)throw Error(t(188))}function Ic(s){var i=s.alternate;if(!i){if(i=Gn(s),i===null)throw Error(t(188));return i!==s?null:s}for(var l=s,f=i;;){var g=l.return;if(g===null)break;var x=g.alternate;if(x===null){if(f=g.return,f!==null){l=f;continue}break}if(g.child===x.child){for(x=g.child;x;){if(x===l)return Hn(g),s;if(x===f)return Hn(g),i;x=x.sibling}throw Error(t(188))}if(l.return!==f.return)l=g,f=x;else{for(var T=!1,C=g.child;C;){if(C===l){T=!0,l=g,f=x;break}if(C===f){T=!0,f=g,l=x;break}C=C.sibling}if(!T){for(C=x.child;C;){if(C===l){T=!0,l=x,f=g;break}if(C===f){T=!0,f=x,l=g;break}C=C.sibling}if(!T)throw Error(t(189))}}if(l.alternate!==f)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?s:i}function Ga(s){return s=Ic(s),s!==null?xo(s):null}function xo(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var i=xo(s);if(i!==null)return i;s=s.sibling}return null}var wo=e.unstable_scheduleCallback,Ha=e.unstable_cancelCallback,Nc=e.unstable_shouldYield,ud=e.unstable_requestPaint,Ze=e.unstable_now,Pc=e.unstable_getCurrentPriorityLevel,gi=e.unstable_ImmediatePriority,ms=e.unstable_UserBlockingPriority,Nn=e.unstable_NormalPriority,Wa=e.unstable_LowPriority,kc=e.unstable_IdlePriority,yi=null,mn=null;function Ac(s){if(mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(yi,s,void 0,(s.current.flags&128)===128)}catch{}}var Jt=Math.clz32?Math.clz32:Rc,Ka=Math.log,Cc=Math.LN2;function Rc(s){return s>>>=0,s===0?32:31-(Ka(s)/Cc|0)|0}var _o=64,Eo=4194304;function gs(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function vi(s,i){var l=s.pendingLanes;if(l===0)return 0;var f=0,g=s.suspendedLanes,x=s.pingedLanes,T=l&268435455;if(T!==0){var C=T&~g;C!==0?f=gs(C):(x&=T,x!==0&&(f=gs(x)))}else T=l&~g,T!==0?f=gs(T):x!==0&&(f=gs(x));if(f===0)return 0;if(i!==0&&i!==f&&(i&g)===0&&(g=f&-f,x=i&-i,g>=x||g===16&&(x&4194240)!==0))return i;if((f&4)!==0&&(f|=l&16),i=s.entangledLanes,i!==0)for(s=s.entanglements,i&=f;0<i;)l=31-Jt(i),g=1<<l,f|=s[l],i&=~g;return f}function hd(s,i){switch(s){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mr(s,i){for(var l=s.suspendedLanes,f=s.pingedLanes,g=s.expirationTimes,x=s.pendingLanes;0<x;){var T=31-Jt(x),C=1<<T,F=g[T];F===-1?((C&l)===0||(C&f)!==0)&&(g[T]=hd(C,i)):F<=i&&(s.expiredLanes|=C),x&=~C}}function gn(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function xi(){var s=_o;return _o<<=1,(_o&4194240)===0&&(_o=64),s}function ys(s){for(var i=[],l=0;31>l;l++)i.push(s);return i}function vs(s,i,l){s.pendingLanes|=i,i!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,i=31-Jt(i),s[i]=l}function Je(s,i){var l=s.pendingLanes&~i;s.pendingLanes=i,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=i,s.mutableReadLanes&=i,s.entangledLanes&=i,i=s.entanglements;var f=s.eventTimes;for(s=s.expirationTimes;0<l;){var g=31-Jt(l),x=1<<g;i[g]=0,f[g]=-1,s[g]=-1,l&=~x}}function xs(s,i){var l=s.entangledLanes|=i;for(s=s.entanglements;l;){var f=31-Jt(l),g=1<<f;g&i|s[f]&i&&(s[f]|=i),l&=~g}}var ze=0;function ws(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var jc,To,Dc,Vc,Lc,Qa=!1,fr=[],Vt=null,Wn=null,Kn=null,_s=new Map,Pn=new Map,pr=[],dd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Oc(s,i){switch(s){case"focusin":case"focusout":Vt=null;break;case"dragenter":case"dragleave":Wn=null;break;case"mouseover":case"mouseout":Kn=null;break;case"pointerover":case"pointerout":_s.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pn.delete(i.pointerId)}}function rn(s,i,l,f,g,x){return s===null||s.nativeEvent!==x?(s={blockedOn:i,domEventName:l,eventSystemFlags:f,nativeEvent:x,targetContainers:[g]},i!==null&&(i=ul(i),i!==null&&To(i)),s):(s.eventSystemFlags|=f,i=s.targetContainers,g!==null&&i.indexOf(g)===-1&&i.push(g),s)}function fd(s,i,l,f,g){switch(i){case"focusin":return Vt=rn(Vt,s,i,l,f,g),!0;case"dragenter":return Wn=rn(Wn,s,i,l,f,g),!0;case"mouseover":return Kn=rn(Kn,s,i,l,f,g),!0;case"pointerover":var x=g.pointerId;return _s.set(x,rn(_s.get(x)||null,s,i,l,f,g)),!0;case"gotpointercapture":return x=g.pointerId,Pn.set(x,rn(Pn.get(x)||null,s,i,l,f,g)),!0}return!1}function Mc(s){var i=bi(s.target);if(i!==null){var l=Gn(i);if(l!==null){if(i=l.tag,i===13){if(i=mi(l),i!==null){s.blockedOn=i,Lc(s.priority,function(){Dc(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Ur(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var l=bo(s.domEventName,s.eventSystemFlags,i[0],s.nativeEvent);if(l===null){l=s.nativeEvent;var f=new l.constructor(l.type,l);hi=f,l.target.dispatchEvent(f),hi=null}else return i=ul(l),i!==null&&To(i),s.blockedOn=l,!1;i.shift()}return!0}function wi(s,i,l){Ur(s)&&l.delete(i)}function Uc(){Qa=!1,Vt!==null&&Ur(Vt)&&(Vt=null),Wn!==null&&Ur(Wn)&&(Wn=null),Kn!==null&&Ur(Kn)&&(Kn=null),_s.forEach(wi),Pn.forEach(wi)}function Qn(s,i){s.blockedOn===i&&(s.blockedOn=null,Qa||(Qa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Uc)))}function Yn(s){function i(g){return Qn(g,s)}if(0<fr.length){Qn(fr[0],s);for(var l=1;l<fr.length;l++){var f=fr[l];f.blockedOn===s&&(f.blockedOn=null)}}for(Vt!==null&&Qn(Vt,s),Wn!==null&&Qn(Wn,s),Kn!==null&&Qn(Kn,s),_s.forEach(i),Pn.forEach(i),l=0;l<pr.length;l++)f=pr[l],f.blockedOn===s&&(f.blockedOn=null);for(;0<pr.length&&(l=pr[0],l.blockedOn===null);)Mc(l),l.blockedOn===null&&pr.shift()}var Fr=W.ReactCurrentBatchConfig,Es=!0;function st(s,i,l,f){var g=ze,x=Fr.transition;Fr.transition=null;try{ze=1,Ya(s,i,l,f)}finally{ze=g,Fr.transition=x}}function pd(s,i,l,f){var g=ze,x=Fr.transition;Fr.transition=null;try{ze=4,Ya(s,i,l,f)}finally{ze=g,Fr.transition=x}}function Ya(s,i,l,f){if(Es){var g=bo(s,i,l,f);if(g===null)Sd(s,i,f,_i,l),Oc(s,f);else if(fd(g,s,i,l,f))f.stopPropagation();else if(Oc(s,f),i&4&&-1<dd.indexOf(s)){for(;g!==null;){var x=ul(g);if(x!==null&&jc(x),x=bo(s,i,l,f),x===null&&Sd(s,i,f,_i,l),x===g)break;g=x}g!==null&&f.stopPropagation()}else Sd(s,i,f,null,l)}}var _i=null;function bo(s,i,l,f){if(_i=null,s=fo(f),s=bi(s),s!==null)if(i=Gn(s),i===null)s=null;else if(l=i.tag,l===13){if(s=mi(i),s!==null)return s;s=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null);return _i=s,null}function Xa(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Pc()){case gi:return 1;case ms:return 4;case Nn:case Wa:return 16;case kc:return 536870912;default:return 16}default:return 16}}var yn=null,So=null,sn=null;function Ja(){if(sn)return sn;var s,i=So,l=i.length,f,g="value"in yn?yn.value:yn.textContent,x=g.length;for(s=0;s<l&&i[s]===g[s];s++);var T=l-s;for(f=1;f<=T&&i[l-f]===g[x-f];f++);return sn=g.slice(s,1<f?1-f:void 0)}function Io(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function mr(){return!0}function Za(){return!1}function Lt(s){function i(l,f,g,x,T){this._reactName=l,this._targetInst=g,this.type=f,this.nativeEvent=x,this.target=T,this.currentTarget=null;for(var C in s)s.hasOwnProperty(C)&&(l=s[C],this[C]=l?l(x):x[C]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?mr:Za,this.isPropagationStopped=Za,this}return J(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=mr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=mr)},persist:function(){},isPersistent:mr}),i}var Xn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},No=Lt(Xn),gr=J({},Xn,{view:0,detail:0}),md=Lt(gr),Po,Br,Ts,Ei=J({},gr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ts&&(Ts&&s.type==="mousemove"?(Po=s.screenX-Ts.screenX,Br=s.screenY-Ts.screenY):Br=Po=0,Ts=s),Po)},movementY:function(s){return"movementY"in s?s.movementY:Br}}),ko=Lt(Ei),el=J({},Ei,{dataTransfer:0}),Fc=Lt(el),Ao=J({},gr,{relatedTarget:0}),Co=Lt(Ao),Bc=J({},Xn,{animationName:0,elapsedTime:0,pseudoElement:0}),zr=Lt(Bc),zc=J({},Xn,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),$c=Lt(zc),qc=J({},Xn,{data:0}),tl=Lt(qc),Ro={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hc(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=Gc[s])?!!i[s]:!1}function yr(){return Hc}var h=J({},gr,{key:function(s){if(s.key){var i=Ro[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=Io(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Zt[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yr,charCode:function(s){return s.type==="keypress"?Io(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Io(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),y=Lt(h),_=J({},Ei,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),S=Lt(_),q=J({},gr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yr}),Y=Lt(q),ue=J({},Xn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ye=Lt(ue),bt=J({},Ei,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),qe=Lt(bt),At=[9,13,27,32],yt=d&&"CompositionEvent"in window,kn=null;d&&"documentMode"in document&&(kn=document.documentMode);var vn=d&&"TextEvent"in window&&!kn,Ti=d&&(!yt||kn&&8<kn&&11>=kn),jo=" ",Ag=!1;function Cg(s,i){switch(s){case"keyup":return At.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rg(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Do=!1;function nb(s,i){switch(s){case"compositionend":return Rg(i);case"keypress":return i.which!==32?null:(Ag=!0,jo);case"textInput":return s=i.data,s===jo&&Ag?null:s;default:return null}}function rb(s,i){if(Do)return s==="compositionend"||!yt&&Cg(s,i)?(s=Ja(),sn=So=yn=null,Do=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ti&&i.locale!=="ko"?null:i.data;default:return null}}var sb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jg(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!sb[s.type]:i==="textarea"}function Dg(s,i,l,f){dr(f),i=Xc(i,"onChange"),0<i.length&&(l=new No("onChange","change",null,l,f),s.push({event:l,listeners:i}))}var nl=null,rl=null;function ib(s){Jg(s,0)}function Wc(s){var i=Uo(s);if(jr(i))return s}function ob(s,i){if(s==="change")return i}var Vg=!1;if(d){var gd;if(d){var yd="oninput"in document;if(!yd){var Lg=document.createElement("div");Lg.setAttribute("oninput","return;"),yd=typeof Lg.oninput=="function"}gd=yd}else gd=!1;Vg=gd&&(!document.documentMode||9<document.documentMode)}function Og(){nl&&(nl.detachEvent("onpropertychange",Mg),rl=nl=null)}function Mg(s){if(s.propertyName==="value"&&Wc(rl)){var i=[];Dg(i,rl,s,fo(s)),$a(ib,i)}}function ab(s,i,l){s==="focusin"?(Og(),nl=i,rl=l,nl.attachEvent("onpropertychange",Mg)):s==="focusout"&&Og()}function lb(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Wc(rl)}function cb(s,i){if(s==="click")return Wc(i)}function ub(s,i){if(s==="input"||s==="change")return Wc(i)}function hb(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var Jn=typeof Object.is=="function"?Object.is:hb;function sl(s,i){if(Jn(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var l=Object.keys(s),f=Object.keys(i);if(l.length!==f.length)return!1;for(f=0;f<l.length;f++){var g=l[f];if(!p.call(i,g)||!Jn(s[g],i[g]))return!1}return!0}function Ug(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Fg(s,i){var l=Ug(s);s=0;for(var f;l;){if(l.nodeType===3){if(f=s+l.textContent.length,s<=i&&f>=i)return{node:l,offset:i-s};s=f}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Ug(l)}}function Bg(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?Bg(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function zg(){for(var s=window,i=zn();i instanceof s.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)s=i.contentWindow;else break;i=zn(s.document)}return i}function vd(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}function db(s){var i=zg(),l=s.focusedElem,f=s.selectionRange;if(i!==l&&l&&l.ownerDocument&&Bg(l.ownerDocument.documentElement,l)){if(f!==null&&vd(l)){if(i=f.start,s=f.end,s===void 0&&(s=i),"selectionStart"in l)l.selectionStart=i,l.selectionEnd=Math.min(s,l.value.length);else if(s=(i=l.ownerDocument||document)&&i.defaultView||window,s.getSelection){s=s.getSelection();var g=l.textContent.length,x=Math.min(f.start,g);f=f.end===void 0?x:Math.min(f.end,g),!s.extend&&x>f&&(g=f,f=x,x=g),g=Fg(l,x);var T=Fg(l,f);g&&T&&(s.rangeCount!==1||s.anchorNode!==g.node||s.anchorOffset!==g.offset||s.focusNode!==T.node||s.focusOffset!==T.offset)&&(i=i.createRange(),i.setStart(g.node,g.offset),s.removeAllRanges(),x>f?(s.addRange(i),s.extend(T.node,T.offset)):(i.setEnd(T.node,T.offset),s.addRange(i)))}}for(i=[],s=l;s=s.parentNode;)s.nodeType===1&&i.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<i.length;l++)s=i[l],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var fb=d&&"documentMode"in document&&11>=document.documentMode,Vo=null,xd=null,il=null,wd=!1;function $g(s,i,l){var f=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;wd||Vo==null||Vo!==zn(f)||(f=Vo,"selectionStart"in f&&vd(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),il&&sl(il,f)||(il=f,f=Xc(xd,"onSelect"),0<f.length&&(i=new No("onSelect","select",null,i,l),s.push({event:i,listeners:f}),i.target=Vo)))}function Kc(s,i){var l={};return l[s.toLowerCase()]=i.toLowerCase(),l["Webkit"+s]="webkit"+i,l["Moz"+s]="moz"+i,l}var Lo={animationend:Kc("Animation","AnimationEnd"),animationiteration:Kc("Animation","AnimationIteration"),animationstart:Kc("Animation","AnimationStart"),transitionend:Kc("Transition","TransitionEnd")},_d={},qg={};d&&(qg=document.createElement("div").style,"AnimationEvent"in window||(delete Lo.animationend.animation,delete Lo.animationiteration.animation,delete Lo.animationstart.animation),"TransitionEvent"in window||delete Lo.transitionend.transition);function Qc(s){if(_d[s])return _d[s];if(!Lo[s])return s;var i=Lo[s],l;for(l in i)if(i.hasOwnProperty(l)&&l in qg)return _d[s]=i[l];return s}var Gg=Qc("animationend"),Hg=Qc("animationiteration"),Wg=Qc("animationstart"),Kg=Qc("transitionend"),Qg=new Map,Yg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bs(s,i){Qg.set(s,i),a(i,[s])}for(var Ed=0;Ed<Yg.length;Ed++){var Td=Yg[Ed],pb=Td.toLowerCase(),mb=Td[0].toUpperCase()+Td.slice(1);bs(pb,"on"+mb)}bs(Gg,"onAnimationEnd"),bs(Hg,"onAnimationIteration"),bs(Wg,"onAnimationStart"),bs("dblclick","onDoubleClick"),bs("focusin","onFocus"),bs("focusout","onBlur"),bs(Kg,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gb=new Set("cancel close invalid load scroll toggle".split(" ").concat(ol));function Xg(s,i,l){var f=s.type||"unknown-event";s.currentTarget=l,Sc(f,i,void 0,s),s.currentTarget=null}function Jg(s,i){i=(i&4)!==0;for(var l=0;l<s.length;l++){var f=s[l],g=f.event;f=f.listeners;e:{var x=void 0;if(i)for(var T=f.length-1;0<=T;T--){var C=f[T],F=C.instance,K=C.currentTarget;if(C=C.listener,F!==x&&g.isPropagationStopped())break e;Xg(g,C,K),x=F}else for(T=0;T<f.length;T++){if(C=f[T],F=C.instance,K=C.currentTarget,C=C.listener,F!==x&&g.isPropagationStopped())break e;Xg(g,C,K),x=F}}}if(qn)throw s=qa,qn=!1,qa=null,s}function nt(s,i){var l=i[Cd];l===void 0&&(l=i[Cd]=new Set);var f=s+"__bubble";l.has(f)||(Zg(i,s,2,!1),l.add(f))}function bd(s,i,l){var f=0;i&&(f|=4),Zg(l,s,f,i)}var Yc="_reactListening"+Math.random().toString(36).slice(2);function al(s){if(!s[Yc]){s[Yc]=!0,r.forEach(function(l){l!=="selectionchange"&&(gb.has(l)||bd(l,!1,s),bd(l,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[Yc]||(i[Yc]=!0,bd("selectionchange",!1,i))}}function Zg(s,i,l,f){switch(Xa(i)){case 1:var g=st;break;case 4:g=pd;break;default:g=Ya}l=g.bind(null,i,l,s),g=void 0,!go||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(g=!0),f?g!==void 0?s.addEventListener(i,l,{capture:!0,passive:g}):s.addEventListener(i,l,!0):g!==void 0?s.addEventListener(i,l,{passive:g}):s.addEventListener(i,l,!1)}function Sd(s,i,l,f,g){var x=f;if((i&1)===0&&(i&2)===0&&f!==null)e:for(;;){if(f===null)return;var T=f.tag;if(T===3||T===4){var C=f.stateNode.containerInfo;if(C===g||C.nodeType===8&&C.parentNode===g)break;if(T===4)for(T=f.return;T!==null;){var F=T.tag;if((F===3||F===4)&&(F=T.stateNode.containerInfo,F===g||F.nodeType===8&&F.parentNode===g))return;T=T.return}for(;C!==null;){if(T=bi(C),T===null)return;if(F=T.tag,F===5||F===6){f=x=T;continue e}C=C.parentNode}}f=f.return}$a(function(){var K=x,ne=fo(l),se=[];e:{var te=Qg.get(s);if(te!==void 0){var de=No,pe=s;switch(s){case"keypress":if(Io(l)===0)break e;case"keydown":case"keyup":de=y;break;case"focusin":pe="focus",de=Co;break;case"focusout":pe="blur",de=Co;break;case"beforeblur":case"afterblur":de=Co;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=ko;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=Fc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=Y;break;case Gg:case Hg:case Wg:de=zr;break;case Kg:de=Ye;break;case"scroll":de=md;break;case"wheel":de=qe;break;case"copy":case"cut":case"paste":de=$c;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=S}var ge=(i&4)!==0,ft=!ge&&s==="scroll",G=ge?te!==null?te+"Capture":null:te;ge=[];for(var z=K,H;z!==null;){H=z;var le=H.stateNode;if(H.tag===5&&le!==null&&(H=le,G!==null&&(le=dt(z,G),le!=null&&ge.push(ll(z,le,H)))),ft)break;z=z.return}0<ge.length&&(te=new de(te,pe,null,l,ne),se.push({event:te,listeners:ge}))}}if((i&7)===0){e:{if(te=s==="mouseover"||s==="pointerover",de=s==="mouseout"||s==="pointerout",te&&l!==hi&&(pe=l.relatedTarget||l.fromElement)&&(bi(pe)||pe[$r]))break e;if((de||te)&&(te=ne.window===ne?ne:(te=ne.ownerDocument)?te.defaultView||te.parentWindow:window,de?(pe=l.relatedTarget||l.toElement,de=K,pe=pe?bi(pe):null,pe!==null&&(ft=Gn(pe),pe!==ft||pe.tag!==5&&pe.tag!==6)&&(pe=null)):(de=null,pe=K),de!==pe)){if(ge=ko,le="onMouseLeave",G="onMouseEnter",z="mouse",(s==="pointerout"||s==="pointerover")&&(ge=S,le="onPointerLeave",G="onPointerEnter",z="pointer"),ft=de==null?te:Uo(de),H=pe==null?te:Uo(pe),te=new ge(le,z+"leave",de,l,ne),te.target=ft,te.relatedTarget=H,le=null,bi(ne)===K&&(ge=new ge(G,z+"enter",pe,l,ne),ge.target=H,ge.relatedTarget=ft,le=ge),ft=le,de&&pe)t:{for(ge=de,G=pe,z=0,H=ge;H;H=Oo(H))z++;for(H=0,le=G;le;le=Oo(le))H++;for(;0<z-H;)ge=Oo(ge),z--;for(;0<H-z;)G=Oo(G),H--;for(;z--;){if(ge===G||G!==null&&ge===G.alternate)break t;ge=Oo(ge),G=Oo(G)}ge=null}else ge=null;de!==null&&ey(se,te,de,ge,!1),pe!==null&&ft!==null&&ey(se,ft,pe,ge,!0)}}e:{if(te=K?Uo(K):window,de=te.nodeName&&te.nodeName.toLowerCase(),de==="select"||de==="input"&&te.type==="file")var xe=ob;else if(jg(te))if(Vg)xe=ub;else{xe=lb;var Ee=ab}else(de=te.nodeName)&&de.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(xe=cb);if(xe&&(xe=xe(s,K))){Dg(se,xe,l,ne);break e}Ee&&Ee(s,te,K),s==="focusout"&&(Ee=te._wrapperState)&&Ee.controlled&&te.type==="number"&&co(te,"number",te.value)}switch(Ee=K?Uo(K):window,s){case"focusin":(jg(Ee)||Ee.contentEditable==="true")&&(Vo=Ee,xd=K,il=null);break;case"focusout":il=xd=Vo=null;break;case"mousedown":wd=!0;break;case"contextmenu":case"mouseup":case"dragend":wd=!1,$g(se,l,ne);break;case"selectionchange":if(fb)break;case"keydown":case"keyup":$g(se,l,ne)}var Te;if(yt)e:{switch(s){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else Do?Cg(s,l)&&(Pe="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Pe="onCompositionStart");Pe&&(Ti&&l.locale!=="ko"&&(Do||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&Do&&(Te=Ja()):(yn=ne,So="value"in yn?yn.value:yn.textContent,Do=!0)),Ee=Xc(K,Pe),0<Ee.length&&(Pe=new tl(Pe,s,null,l,ne),se.push({event:Pe,listeners:Ee}),Te?Pe.data=Te:(Te=Rg(l),Te!==null&&(Pe.data=Te)))),(Te=vn?nb(s,l):rb(s,l))&&(K=Xc(K,"onBeforeInput"),0<K.length&&(ne=new tl("onBeforeInput","beforeinput",null,l,ne),se.push({event:ne,listeners:K}),ne.data=Te))}Jg(se,i)})}function ll(s,i,l){return{instance:s,listener:i,currentTarget:l}}function Xc(s,i){for(var l=i+"Capture",f=[];s!==null;){var g=s,x=g.stateNode;g.tag===5&&x!==null&&(g=x,x=dt(s,l),x!=null&&f.unshift(ll(s,x,g)),x=dt(s,i),x!=null&&f.push(ll(s,x,g))),s=s.return}return f}function Oo(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function ey(s,i,l,f,g){for(var x=i._reactName,T=[];l!==null&&l!==f;){var C=l,F=C.alternate,K=C.stateNode;if(F!==null&&F===f)break;C.tag===5&&K!==null&&(C=K,g?(F=dt(l,x),F!=null&&T.unshift(ll(l,F,C))):g||(F=dt(l,x),F!=null&&T.push(ll(l,F,C)))),l=l.return}T.length!==0&&s.push({event:i,listeners:T})}var yb=/\r\n?/g,vb=/\u0000|\uFFFD/g;function ty(s){return(typeof s=="string"?s:""+s).replace(yb,`
`).replace(vb,"")}function Jc(s,i,l){if(i=ty(i),ty(s)!==i&&l)throw Error(t(425))}function Zc(){}var Id=null,Nd=null;function Pd(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var kd=typeof setTimeout=="function"?setTimeout:void 0,xb=typeof clearTimeout=="function"?clearTimeout:void 0,ny=typeof Promise=="function"?Promise:void 0,wb=typeof queueMicrotask=="function"?queueMicrotask:typeof ny<"u"?function(s){return ny.resolve(null).then(s).catch(_b)}:kd;function _b(s){setTimeout(function(){throw s})}function Ad(s,i){var l=i,f=0;do{var g=l.nextSibling;if(s.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"){if(f===0){s.removeChild(g),Yn(i);return}f--}else l!=="$"&&l!=="$?"&&l!=="$!"||f++;l=g}while(l);Yn(i)}function Ss(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return s}function ry(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return s;i--}else l==="/$"&&i++}s=s.previousSibling}return null}var Mo=Math.random().toString(36).slice(2),vr="__reactFiber$"+Mo,cl="__reactProps$"+Mo,$r="__reactContainer$"+Mo,Cd="__reactEvents$"+Mo,Eb="__reactListeners$"+Mo,Tb="__reactHandles$"+Mo;function bi(s){var i=s[vr];if(i)return i;for(var l=s.parentNode;l;){if(i=l[$r]||l[vr]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(s=ry(s);s!==null;){if(l=s[vr])return l;s=ry(s)}return i}s=l,l=s.parentNode}return null}function ul(s){return s=s[vr]||s[$r],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Uo(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function eu(s){return s[cl]||null}var Rd=[],Fo=-1;function Is(s){return{current:s}}function rt(s){0>Fo||(s.current=Rd[Fo],Rd[Fo]=null,Fo--)}function et(s,i){Fo++,Rd[Fo]=s.current,s.current=i}var Ns={},$t=Is(Ns),on=Is(!1),Si=Ns;function Bo(s,i){var l=s.type.contextTypes;if(!l)return Ns;var f=s.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===i)return f.__reactInternalMemoizedMaskedChildContext;var g={},x;for(x in l)g[x]=i[x];return f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=i,s.__reactInternalMemoizedMaskedChildContext=g),g}function an(s){return s=s.childContextTypes,s!=null}function tu(){rt(on),rt($t)}function sy(s,i,l){if($t.current!==Ns)throw Error(t(168));et($t,i),et(on,l)}function iy(s,i,l){var f=s.stateNode;if(i=i.childContextTypes,typeof f.getChildContext!="function")return l;f=f.getChildContext();for(var g in f)if(!(g in i))throw Error(t(108,Le(s)||"Unknown",g));return J({},l,f)}function nu(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Ns,Si=$t.current,et($t,s),et(on,on.current),!0}function oy(s,i,l){var f=s.stateNode;if(!f)throw Error(t(169));l?(s=iy(s,i,Si),f.__reactInternalMemoizedMergedChildContext=s,rt(on),rt($t),et($t,s)):rt(on),et(on,l)}var qr=null,ru=!1,jd=!1;function ay(s){qr===null?qr=[s]:qr.push(s)}function bb(s){ru=!0,ay(s)}function Ps(){if(!jd&&qr!==null){jd=!0;var s=0,i=ze;try{var l=qr;for(ze=1;s<l.length;s++){var f=l[s];do f=f(!0);while(f!==null)}qr=null,ru=!1}catch(g){throw qr!==null&&(qr=qr.slice(s+1)),wo(gi,Ps),g}finally{ze=i,jd=!1}}return null}var zo=[],$o=0,su=null,iu=0,An=[],Cn=0,Ii=null,Gr=1,Hr="";function Ni(s,i){zo[$o++]=iu,zo[$o++]=su,su=s,iu=i}function ly(s,i,l){An[Cn++]=Gr,An[Cn++]=Hr,An[Cn++]=Ii,Ii=s;var f=Gr;s=Hr;var g=32-Jt(f)-1;f&=~(1<<g),l+=1;var x=32-Jt(i)+g;if(30<x){var T=g-g%5;x=(f&(1<<T)-1).toString(32),f>>=T,g-=T,Gr=1<<32-Jt(i)+g|l<<g|f,Hr=x+s}else Gr=1<<x|l<<g|f,Hr=s}function Dd(s){s.return!==null&&(Ni(s,1),ly(s,1,0))}function Vd(s){for(;s===su;)su=zo[--$o],zo[$o]=null,iu=zo[--$o],zo[$o]=null;for(;s===Ii;)Ii=An[--Cn],An[Cn]=null,Hr=An[--Cn],An[Cn]=null,Gr=An[--Cn],An[Cn]=null}var xn=null,wn=null,it=!1,Zn=null;function cy(s,i){var l=Vn(5,null,null,0);l.elementType="DELETED",l.stateNode=i,l.return=s,i=s.deletions,i===null?(s.deletions=[l],s.flags|=16):i.push(l)}function uy(s,i){switch(s.tag){case 5:var l=s.type;return i=i.nodeType!==1||l.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(s.stateNode=i,xn=s,wn=Ss(i.firstChild),!0):!1;case 6:return i=s.pendingProps===""||i.nodeType!==3?null:i,i!==null?(s.stateNode=i,xn=s,wn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(l=Ii!==null?{id:Gr,overflow:Hr}:null,s.memoizedState={dehydrated:i,treeContext:l,retryLane:1073741824},l=Vn(18,null,null,0),l.stateNode=i,l.return=s,s.child=l,xn=s,wn=null,!0):!1;default:return!1}}function Ld(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Od(s){if(it){var i=wn;if(i){var l=i;if(!uy(s,i)){if(Ld(s))throw Error(t(418));i=Ss(l.nextSibling);var f=xn;i&&uy(s,i)?cy(f,l):(s.flags=s.flags&-4097|2,it=!1,xn=s)}}else{if(Ld(s))throw Error(t(418));s.flags=s.flags&-4097|2,it=!1,xn=s}}}function hy(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;xn=s}function ou(s){if(s!==xn)return!1;if(!it)return hy(s),it=!0,!1;var i;if((i=s.tag!==3)&&!(i=s.tag!==5)&&(i=s.type,i=i!=="head"&&i!=="body"&&!Pd(s.type,s.memoizedProps)),i&&(i=wn)){if(Ld(s))throw dy(),Error(t(418));for(;i;)cy(s,i),i=Ss(i.nextSibling)}if(hy(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,i=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"){if(i===0){wn=Ss(s.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++}s=s.nextSibling}wn=null}}else wn=xn?Ss(s.stateNode.nextSibling):null;return!0}function dy(){for(var s=wn;s;)s=Ss(s.nextSibling)}function qo(){wn=xn=null,it=!1}function Md(s){Zn===null?Zn=[s]:Zn.push(s)}var Sb=W.ReactCurrentBatchConfig;function hl(s,i,l){if(s=l.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var f=l.stateNode}if(!f)throw Error(t(147,s));var g=f,x=""+s;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===x?i.ref:(i=function(T){var C=g.refs;T===null?delete C[x]:C[x]=T},i._stringRef=x,i)}if(typeof s!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,s))}return s}function au(s,i){throw s=Object.prototype.toString.call(i),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s))}function fy(s){var i=s._init;return i(s._payload)}function py(s){function i(G,z){if(s){var H=G.deletions;H===null?(G.deletions=[z],G.flags|=16):H.push(z)}}function l(G,z){if(!s)return null;for(;z!==null;)i(G,z),z=z.sibling;return null}function f(G,z){for(G=new Map;z!==null;)z.key!==null?G.set(z.key,z):G.set(z.index,z),z=z.sibling;return G}function g(G,z){return G=Ls(G,z),G.index=0,G.sibling=null,G}function x(G,z,H){return G.index=H,s?(H=G.alternate,H!==null?(H=H.index,H<z?(G.flags|=2,z):H):(G.flags|=2,z)):(G.flags|=1048576,z)}function T(G){return s&&G.alternate===null&&(G.flags|=2),G}function C(G,z,H,le){return z===null||z.tag!==6?(z=Af(H,G.mode,le),z.return=G,z):(z=g(z,H),z.return=G,z)}function F(G,z,H,le){var xe=H.type;return xe===R?ne(G,z,H.props.children,le,H.key):z!==null&&(z.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===Oe&&fy(xe)===z.type)?(le=g(z,H.props),le.ref=hl(G,z,H),le.return=G,le):(le=Cu(H.type,H.key,H.props,null,G.mode,le),le.ref=hl(G,z,H),le.return=G,le)}function K(G,z,H,le){return z===null||z.tag!==4||z.stateNode.containerInfo!==H.containerInfo||z.stateNode.implementation!==H.implementation?(z=Cf(H,G.mode,le),z.return=G,z):(z=g(z,H.children||[]),z.return=G,z)}function ne(G,z,H,le,xe){return z===null||z.tag!==7?(z=Vi(H,G.mode,le,xe),z.return=G,z):(z=g(z,H),z.return=G,z)}function se(G,z,H){if(typeof z=="string"&&z!==""||typeof z=="number")return z=Af(""+z,G.mode,H),z.return=G,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case Z:return H=Cu(z.type,z.key,z.props,null,G.mode,H),H.ref=hl(G,null,z),H.return=G,H;case ae:return z=Cf(z,G.mode,H),z.return=G,z;case Oe:var le=z._init;return se(G,le(z._payload),H)}if(Dr(z)||ee(z))return z=Vi(z,G.mode,H,null),z.return=G,z;au(G,z)}return null}function te(G,z,H,le){var xe=z!==null?z.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return xe!==null?null:C(G,z,""+H,le);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case Z:return H.key===xe?F(G,z,H,le):null;case ae:return H.key===xe?K(G,z,H,le):null;case Oe:return xe=H._init,te(G,z,xe(H._payload),le)}if(Dr(H)||ee(H))return xe!==null?null:ne(G,z,H,le,null);au(G,H)}return null}function de(G,z,H,le,xe){if(typeof le=="string"&&le!==""||typeof le=="number")return G=G.get(H)||null,C(z,G,""+le,xe);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case Z:return G=G.get(le.key===null?H:le.key)||null,F(z,G,le,xe);case ae:return G=G.get(le.key===null?H:le.key)||null,K(z,G,le,xe);case Oe:var Ee=le._init;return de(G,z,H,Ee(le._payload),xe)}if(Dr(le)||ee(le))return G=G.get(H)||null,ne(z,G,le,xe,null);au(z,le)}return null}function pe(G,z,H,le){for(var xe=null,Ee=null,Te=z,Pe=z=0,jt=null;Te!==null&&Pe<H.length;Pe++){Te.index>Pe?(jt=Te,Te=null):jt=Te.sibling;var Ke=te(G,Te,H[Pe],le);if(Ke===null){Te===null&&(Te=jt);break}s&&Te&&Ke.alternate===null&&i(G,Te),z=x(Ke,z,Pe),Ee===null?xe=Ke:Ee.sibling=Ke,Ee=Ke,Te=jt}if(Pe===H.length)return l(G,Te),it&&Ni(G,Pe),xe;if(Te===null){for(;Pe<H.length;Pe++)Te=se(G,H[Pe],le),Te!==null&&(z=x(Te,z,Pe),Ee===null?xe=Te:Ee.sibling=Te,Ee=Te);return it&&Ni(G,Pe),xe}for(Te=f(G,Te);Pe<H.length;Pe++)jt=de(Te,G,Pe,H[Pe],le),jt!==null&&(s&&jt.alternate!==null&&Te.delete(jt.key===null?Pe:jt.key),z=x(jt,z,Pe),Ee===null?xe=jt:Ee.sibling=jt,Ee=jt);return s&&Te.forEach(function(Os){return i(G,Os)}),it&&Ni(G,Pe),xe}function ge(G,z,H,le){var xe=ee(H);if(typeof xe!="function")throw Error(t(150));if(H=xe.call(H),H==null)throw Error(t(151));for(var Ee=xe=null,Te=z,Pe=z=0,jt=null,Ke=H.next();Te!==null&&!Ke.done;Pe++,Ke=H.next()){Te.index>Pe?(jt=Te,Te=null):jt=Te.sibling;var Os=te(G,Te,Ke.value,le);if(Os===null){Te===null&&(Te=jt);break}s&&Te&&Os.alternate===null&&i(G,Te),z=x(Os,z,Pe),Ee===null?xe=Os:Ee.sibling=Os,Ee=Os,Te=jt}if(Ke.done)return l(G,Te),it&&Ni(G,Pe),xe;if(Te===null){for(;!Ke.done;Pe++,Ke=H.next())Ke=se(G,Ke.value,le),Ke!==null&&(z=x(Ke,z,Pe),Ee===null?xe=Ke:Ee.sibling=Ke,Ee=Ke);return it&&Ni(G,Pe),xe}for(Te=f(G,Te);!Ke.done;Pe++,Ke=H.next())Ke=de(Te,G,Pe,Ke.value,le),Ke!==null&&(s&&Ke.alternate!==null&&Te.delete(Ke.key===null?Pe:Ke.key),z=x(Ke,z,Pe),Ee===null?xe=Ke:Ee.sibling=Ke,Ee=Ke);return s&&Te.forEach(function(sS){return i(G,sS)}),it&&Ni(G,Pe),xe}function ft(G,z,H,le){if(typeof H=="object"&&H!==null&&H.type===R&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case Z:e:{for(var xe=H.key,Ee=z;Ee!==null;){if(Ee.key===xe){if(xe=H.type,xe===R){if(Ee.tag===7){l(G,Ee.sibling),z=g(Ee,H.props.children),z.return=G,G=z;break e}}else if(Ee.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===Oe&&fy(xe)===Ee.type){l(G,Ee.sibling),z=g(Ee,H.props),z.ref=hl(G,Ee,H),z.return=G,G=z;break e}l(G,Ee);break}else i(G,Ee);Ee=Ee.sibling}H.type===R?(z=Vi(H.props.children,G.mode,le,H.key),z.return=G,G=z):(le=Cu(H.type,H.key,H.props,null,G.mode,le),le.ref=hl(G,z,H),le.return=G,G=le)}return T(G);case ae:e:{for(Ee=H.key;z!==null;){if(z.key===Ee)if(z.tag===4&&z.stateNode.containerInfo===H.containerInfo&&z.stateNode.implementation===H.implementation){l(G,z.sibling),z=g(z,H.children||[]),z.return=G,G=z;break e}else{l(G,z);break}else i(G,z);z=z.sibling}z=Cf(H,G.mode,le),z.return=G,G=z}return T(G);case Oe:return Ee=H._init,ft(G,z,Ee(H._payload),le)}if(Dr(H))return pe(G,z,H,le);if(ee(H))return ge(G,z,H,le);au(G,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,z!==null&&z.tag===6?(l(G,z.sibling),z=g(z,H),z.return=G,G=z):(l(G,z),z=Af(H,G.mode,le),z.return=G,G=z),T(G)):l(G,z)}return ft}var Go=py(!0),my=py(!1),lu=Is(null),cu=null,Ho=null,Ud=null;function Fd(){Ud=Ho=cu=null}function Bd(s){var i=lu.current;rt(lu),s._currentValue=i}function zd(s,i,l){for(;s!==null;){var f=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,f!==null&&(f.childLanes|=i)):f!==null&&(f.childLanes&i)!==i&&(f.childLanes|=i),s===l)break;s=s.return}}function Wo(s,i){cu=s,Ud=Ho=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&i)!==0&&(ln=!0),s.firstContext=null)}function Rn(s){var i=s._currentValue;if(Ud!==s)if(s={context:s,memoizedValue:i,next:null},Ho===null){if(cu===null)throw Error(t(308));Ho=s,cu.dependencies={lanes:0,firstContext:s}}else Ho=Ho.next=s;return i}var Pi=null;function $d(s){Pi===null?Pi=[s]:Pi.push(s)}function gy(s,i,l,f){var g=i.interleaved;return g===null?(l.next=l,$d(i)):(l.next=g.next,g.next=l),i.interleaved=l,Wr(s,f)}function Wr(s,i){s.lanes|=i;var l=s.alternate;for(l!==null&&(l.lanes|=i),l=s,s=s.return;s!==null;)s.childLanes|=i,l=s.alternate,l!==null&&(l.childLanes|=i),l=s,s=s.return;return l.tag===3?l.stateNode:null}var ks=!1;function qd(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yy(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Kr(s,i){return{eventTime:s,lane:i,tag:0,payload:null,callback:null,next:null}}function As(s,i,l){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,(We&2)!==0){var g=f.pending;return g===null?i.next=i:(i.next=g.next,g.next=i),f.pending=i,Wr(s,l)}return g=f.interleaved,g===null?(i.next=i,$d(f)):(i.next=g.next,g.next=i),f.interleaved=i,Wr(s,l)}function uu(s,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194240)!==0)){var f=i.lanes;f&=s.pendingLanes,l|=f,i.lanes=l,xs(s,l)}}function vy(s,i){var l=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,l===f)){var g=null,x=null;if(l=l.firstBaseUpdate,l!==null){do{var T={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};x===null?g=x=T:x=x.next=T,l=l.next}while(l!==null);x===null?g=x=i:x=x.next=i}else g=x=i;l={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:x,shared:f.shared,effects:f.effects},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=i:s.next=i,l.lastBaseUpdate=i}function hu(s,i,l,f){var g=s.updateQueue;ks=!1;var x=g.firstBaseUpdate,T=g.lastBaseUpdate,C=g.shared.pending;if(C!==null){g.shared.pending=null;var F=C,K=F.next;F.next=null,T===null?x=K:T.next=K,T=F;var ne=s.alternate;ne!==null&&(ne=ne.updateQueue,C=ne.lastBaseUpdate,C!==T&&(C===null?ne.firstBaseUpdate=K:C.next=K,ne.lastBaseUpdate=F))}if(x!==null){var se=g.baseState;T=0,ne=K=F=null,C=x;do{var te=C.lane,de=C.eventTime;if((f&te)===te){ne!==null&&(ne=ne.next={eventTime:de,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var pe=s,ge=C;switch(te=i,de=l,ge.tag){case 1:if(pe=ge.payload,typeof pe=="function"){se=pe.call(de,se,te);break e}se=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=ge.payload,te=typeof pe=="function"?pe.call(de,se,te):pe,te==null)break e;se=J({},se,te);break e;case 2:ks=!0}}C.callback!==null&&C.lane!==0&&(s.flags|=64,te=g.effects,te===null?g.effects=[C]:te.push(C))}else de={eventTime:de,lane:te,tag:C.tag,payload:C.payload,callback:C.callback,next:null},ne===null?(K=ne=de,F=se):ne=ne.next=de,T|=te;if(C=C.next,C===null){if(C=g.shared.pending,C===null)break;te=C,C=te.next,te.next=null,g.lastBaseUpdate=te,g.shared.pending=null}}while(!0);if(ne===null&&(F=se),g.baseState=F,g.firstBaseUpdate=K,g.lastBaseUpdate=ne,i=g.shared.interleaved,i!==null){g=i;do T|=g.lane,g=g.next;while(g!==i)}else x===null&&(g.shared.lanes=0);Ci|=T,s.lanes=T,s.memoizedState=se}}function xy(s,i,l){if(s=i.effects,i.effects=null,s!==null)for(i=0;i<s.length;i++){var f=s[i],g=f.callback;if(g!==null){if(f.callback=null,f=l,typeof g!="function")throw Error(t(191,g));g.call(f)}}}var dl={},xr=Is(dl),fl=Is(dl),pl=Is(dl);function ki(s){if(s===dl)throw Error(t(174));return s}function Gd(s,i){switch(et(pl,i),et(fl,s),et(xr,dl),s=i.nodeType,s){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Tt(null,"");break;default:s=s===8?i.parentNode:i,i=s.namespaceURI||null,s=s.tagName,i=Tt(i,s)}rt(xr),et(xr,i)}function Ko(){rt(xr),rt(fl),rt(pl)}function wy(s){ki(pl.current);var i=ki(xr.current),l=Tt(i,s.type);i!==l&&(et(fl,s),et(xr,l))}function Hd(s){fl.current===s&&(rt(xr),rt(fl))}var ot=Is(0);function du(s){for(var i=s;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Wd=[];function Kd(){for(var s=0;s<Wd.length;s++)Wd[s]._workInProgressVersionPrimary=null;Wd.length=0}var fu=W.ReactCurrentDispatcher,Qd=W.ReactCurrentBatchConfig,Ai=0,at=null,St=null,Ct=null,pu=!1,ml=!1,gl=0,Ib=0;function qt(){throw Error(t(321))}function Yd(s,i){if(i===null)return!1;for(var l=0;l<i.length&&l<s.length;l++)if(!Jn(s[l],i[l]))return!1;return!0}function Xd(s,i,l,f,g,x){if(Ai=x,at=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,fu.current=s===null||s.memoizedState===null?Ab:Cb,s=l(f,g),ml){x=0;do{if(ml=!1,gl=0,25<=x)throw Error(t(301));x+=1,Ct=St=null,i.updateQueue=null,fu.current=Rb,s=l(f,g)}while(ml)}if(fu.current=yu,i=St!==null&&St.next!==null,Ai=0,Ct=St=at=null,pu=!1,i)throw Error(t(300));return s}function Jd(){var s=gl!==0;return gl=0,s}function wr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?at.memoizedState=Ct=s:Ct=Ct.next=s,Ct}function jn(){if(St===null){var s=at.alternate;s=s!==null?s.memoizedState:null}else s=St.next;var i=Ct===null?at.memoizedState:Ct.next;if(i!==null)Ct=i,St=s;else{if(s===null)throw Error(t(310));St=s,s={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},Ct===null?at.memoizedState=Ct=s:Ct=Ct.next=s}return Ct}function yl(s,i){return typeof i=="function"?i(s):i}function Zd(s){var i=jn(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=s;var f=St,g=f.baseQueue,x=l.pending;if(x!==null){if(g!==null){var T=g.next;g.next=x.next,x.next=T}f.baseQueue=g=x,l.pending=null}if(g!==null){x=g.next,f=f.baseState;var C=T=null,F=null,K=x;do{var ne=K.lane;if((Ai&ne)===ne)F!==null&&(F=F.next={lane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),f=K.hasEagerState?K.eagerState:s(f,K.action);else{var se={lane:ne,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null};F===null?(C=F=se,T=f):F=F.next=se,at.lanes|=ne,Ci|=ne}K=K.next}while(K!==null&&K!==x);F===null?T=f:F.next=C,Jn(f,i.memoizedState)||(ln=!0),i.memoizedState=f,i.baseState=T,i.baseQueue=F,l.lastRenderedState=f}if(s=l.interleaved,s!==null){g=s;do x=g.lane,at.lanes|=x,Ci|=x,g=g.next;while(g!==s)}else g===null&&(l.lanes=0);return[i.memoizedState,l.dispatch]}function ef(s){var i=jn(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=s;var f=l.dispatch,g=l.pending,x=i.memoizedState;if(g!==null){l.pending=null;var T=g=g.next;do x=s(x,T.action),T=T.next;while(T!==g);Jn(x,i.memoizedState)||(ln=!0),i.memoizedState=x,i.baseQueue===null&&(i.baseState=x),l.lastRenderedState=x}return[x,f]}function _y(){}function Ey(s,i){var l=at,f=jn(),g=i(),x=!Jn(f.memoizedState,g);if(x&&(f.memoizedState=g,ln=!0),f=f.queue,tf(Sy.bind(null,l,f,s),[s]),f.getSnapshot!==i||x||Ct!==null&&Ct.memoizedState.tag&1){if(l.flags|=2048,vl(9,by.bind(null,l,f,g,i),void 0,null),Rt===null)throw Error(t(349));(Ai&30)!==0||Ty(l,i,g)}return g}function Ty(s,i,l){s.flags|=16384,s={getSnapshot:i,value:l},i=at.updateQueue,i===null?(i={lastEffect:null,stores:null},at.updateQueue=i,i.stores=[s]):(l=i.stores,l===null?i.stores=[s]:l.push(s))}function by(s,i,l,f){i.value=l,i.getSnapshot=f,Iy(i)&&Ny(s)}function Sy(s,i,l){return l(function(){Iy(i)&&Ny(s)})}function Iy(s){var i=s.getSnapshot;s=s.value;try{var l=i();return!Jn(s,l)}catch{return!0}}function Ny(s){var i=Wr(s,1);i!==null&&rr(i,s,1,-1)}function Py(s){var i=wr();return typeof s=="function"&&(s=s()),i.memoizedState=i.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yl,lastRenderedState:s},i.queue=s,s=s.dispatch=kb.bind(null,at,s),[i.memoizedState,s]}function vl(s,i,l,f){return s={tag:s,create:i,destroy:l,deps:f,next:null},i=at.updateQueue,i===null?(i={lastEffect:null,stores:null},at.updateQueue=i,i.lastEffect=s.next=s):(l=i.lastEffect,l===null?i.lastEffect=s.next=s:(f=l.next,l.next=s,s.next=f,i.lastEffect=s)),s}function ky(){return jn().memoizedState}function mu(s,i,l,f){var g=wr();at.flags|=s,g.memoizedState=vl(1|i,l,void 0,f===void 0?null:f)}function gu(s,i,l,f){var g=jn();f=f===void 0?null:f;var x=void 0;if(St!==null){var T=St.memoizedState;if(x=T.destroy,f!==null&&Yd(f,T.deps)){g.memoizedState=vl(i,l,x,f);return}}at.flags|=s,g.memoizedState=vl(1|i,l,x,f)}function Ay(s,i){return mu(8390656,8,s,i)}function tf(s,i){return gu(2048,8,s,i)}function Cy(s,i){return gu(4,2,s,i)}function Ry(s,i){return gu(4,4,s,i)}function jy(s,i){if(typeof i=="function")return s=s(),i(s),function(){i(null)};if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function Dy(s,i,l){return l=l!=null?l.concat([s]):null,gu(4,4,jy.bind(null,i,s),l)}function nf(){}function Vy(s,i){var l=jn();i=i===void 0?null:i;var f=l.memoizedState;return f!==null&&i!==null&&Yd(i,f[1])?f[0]:(l.memoizedState=[s,i],s)}function Ly(s,i){var l=jn();i=i===void 0?null:i;var f=l.memoizedState;return f!==null&&i!==null&&Yd(i,f[1])?f[0]:(s=s(),l.memoizedState=[s,i],s)}function Oy(s,i,l){return(Ai&21)===0?(s.baseState&&(s.baseState=!1,ln=!0),s.memoizedState=l):(Jn(l,i)||(l=xi(),at.lanes|=l,Ci|=l,s.baseState=!0),i)}function Nb(s,i){var l=ze;ze=l!==0&&4>l?l:4,s(!0);var f=Qd.transition;Qd.transition={};try{s(!1),i()}finally{ze=l,Qd.transition=f}}function My(){return jn().memoizedState}function Pb(s,i,l){var f=Ds(s);if(l={lane:f,action:l,hasEagerState:!1,eagerState:null,next:null},Uy(s))Fy(i,l);else if(l=gy(s,i,l,f),l!==null){var g=tn();rr(l,s,f,g),By(l,i,f)}}function kb(s,i,l){var f=Ds(s),g={lane:f,action:l,hasEagerState:!1,eagerState:null,next:null};if(Uy(s))Fy(i,g);else{var x=s.alternate;if(s.lanes===0&&(x===null||x.lanes===0)&&(x=i.lastRenderedReducer,x!==null))try{var T=i.lastRenderedState,C=x(T,l);if(g.hasEagerState=!0,g.eagerState=C,Jn(C,T)){var F=i.interleaved;F===null?(g.next=g,$d(i)):(g.next=F.next,F.next=g),i.interleaved=g;return}}catch{}finally{}l=gy(s,i,g,f),l!==null&&(g=tn(),rr(l,s,f,g),By(l,i,f))}}function Uy(s){var i=s.alternate;return s===at||i!==null&&i===at}function Fy(s,i){ml=pu=!0;var l=s.pending;l===null?i.next=i:(i.next=l.next,l.next=i),s.pending=i}function By(s,i,l){if((l&4194240)!==0){var f=i.lanes;f&=s.pendingLanes,l|=f,i.lanes=l,xs(s,l)}}var yu={readContext:Rn,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useInsertionEffect:qt,useLayoutEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useMutableSource:qt,useSyncExternalStore:qt,useId:qt,unstable_isNewReconciler:!1},Ab={readContext:Rn,useCallback:function(s,i){return wr().memoizedState=[s,i===void 0?null:i],s},useContext:Rn,useEffect:Ay,useImperativeHandle:function(s,i,l){return l=l!=null?l.concat([s]):null,mu(4194308,4,jy.bind(null,i,s),l)},useLayoutEffect:function(s,i){return mu(4194308,4,s,i)},useInsertionEffect:function(s,i){return mu(4,2,s,i)},useMemo:function(s,i){var l=wr();return i=i===void 0?null:i,s=s(),l.memoizedState=[s,i],s},useReducer:function(s,i,l){var f=wr();return i=l!==void 0?l(i):i,f.memoizedState=f.baseState=i,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:i},f.queue=s,s=s.dispatch=Pb.bind(null,at,s),[f.memoizedState,s]},useRef:function(s){var i=wr();return s={current:s},i.memoizedState=s},useState:Py,useDebugValue:nf,useDeferredValue:function(s){return wr().memoizedState=s},useTransition:function(){var s=Py(!1),i=s[0];return s=Nb.bind(null,s[1]),wr().memoizedState=s,[i,s]},useMutableSource:function(){},useSyncExternalStore:function(s,i,l){var f=at,g=wr();if(it){if(l===void 0)throw Error(t(407));l=l()}else{if(l=i(),Rt===null)throw Error(t(349));(Ai&30)!==0||Ty(f,i,l)}g.memoizedState=l;var x={value:l,getSnapshot:i};return g.queue=x,Ay(Sy.bind(null,f,x,s),[s]),f.flags|=2048,vl(9,by.bind(null,f,x,l,i),void 0,null),l},useId:function(){var s=wr(),i=Rt.identifierPrefix;if(it){var l=Hr,f=Gr;l=(f&~(1<<32-Jt(f)-1)).toString(32)+l,i=":"+i+"R"+l,l=gl++,0<l&&(i+="H"+l.toString(32)),i+=":"}else l=Ib++,i=":"+i+"r"+l.toString(32)+":";return s.memoizedState=i},unstable_isNewReconciler:!1},Cb={readContext:Rn,useCallback:Vy,useContext:Rn,useEffect:tf,useImperativeHandle:Dy,useInsertionEffect:Cy,useLayoutEffect:Ry,useMemo:Ly,useReducer:Zd,useRef:ky,useState:function(){return Zd(yl)},useDebugValue:nf,useDeferredValue:function(s){var i=jn();return Oy(i,St.memoizedState,s)},useTransition:function(){var s=Zd(yl)[0],i=jn().memoizedState;return[s,i]},useMutableSource:_y,useSyncExternalStore:Ey,useId:My,unstable_isNewReconciler:!1},Rb={readContext:Rn,useCallback:Vy,useContext:Rn,useEffect:tf,useImperativeHandle:Dy,useInsertionEffect:Cy,useLayoutEffect:Ry,useMemo:Ly,useReducer:ef,useRef:ky,useState:function(){return ef(yl)},useDebugValue:nf,useDeferredValue:function(s){var i=jn();return St===null?i.memoizedState=s:Oy(i,St.memoizedState,s)},useTransition:function(){var s=ef(yl)[0],i=jn().memoizedState;return[s,i]},useMutableSource:_y,useSyncExternalStore:Ey,useId:My,unstable_isNewReconciler:!1};function er(s,i){if(s&&s.defaultProps){i=J({},i),s=s.defaultProps;for(var l in s)i[l]===void 0&&(i[l]=s[l]);return i}return i}function rf(s,i,l,f){i=s.memoizedState,l=l(f,i),l=l==null?i:J({},i,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var vu={isMounted:function(s){return(s=s._reactInternals)?Gn(s)===s:!1},enqueueSetState:function(s,i,l){s=s._reactInternals;var f=tn(),g=Ds(s),x=Kr(f,g);x.payload=i,l!=null&&(x.callback=l),i=As(s,x,g),i!==null&&(rr(i,s,g,f),uu(i,s,g))},enqueueReplaceState:function(s,i,l){s=s._reactInternals;var f=tn(),g=Ds(s),x=Kr(f,g);x.tag=1,x.payload=i,l!=null&&(x.callback=l),i=As(s,x,g),i!==null&&(rr(i,s,g,f),uu(i,s,g))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var l=tn(),f=Ds(s),g=Kr(l,f);g.tag=2,i!=null&&(g.callback=i),i=As(s,g,f),i!==null&&(rr(i,s,f,l),uu(i,s,f))}};function zy(s,i,l,f,g,x,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,x,T):i.prototype&&i.prototype.isPureReactComponent?!sl(l,f)||!sl(g,x):!0}function $y(s,i,l){var f=!1,g=Ns,x=i.contextType;return typeof x=="object"&&x!==null?x=Rn(x):(g=an(i)?Si:$t.current,f=i.contextTypes,x=(f=f!=null)?Bo(s,g):Ns),i=new i(l,x),s.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=vu,s.stateNode=i,i._reactInternals=s,f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=g,s.__reactInternalMemoizedMaskedChildContext=x),i}function qy(s,i,l,f){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,f),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,f),i.state!==s&&vu.enqueueReplaceState(i,i.state,null)}function sf(s,i,l,f){var g=s.stateNode;g.props=l,g.state=s.memoizedState,g.refs={},qd(s);var x=i.contextType;typeof x=="object"&&x!==null?g.context=Rn(x):(x=an(i)?Si:$t.current,g.context=Bo(s,x)),g.state=s.memoizedState,x=i.getDerivedStateFromProps,typeof x=="function"&&(rf(s,i,x,l),g.state=s.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(i=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),i!==g.state&&vu.enqueueReplaceState(g,g.state,null),hu(s,l,g,f),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308)}function Qo(s,i){try{var l="",f=i;do l+=he(f),f=f.return;while(f);var g=l}catch(x){g=`
Error generating stack: `+x.message+`
`+x.stack}return{value:s,source:i,stack:g,digest:null}}function of(s,i,l){return{value:s,source:null,stack:l??null,digest:i??null}}function af(s,i){try{console.error(i.value)}catch(l){setTimeout(function(){throw l})}}var jb=typeof WeakMap=="function"?WeakMap:Map;function Gy(s,i,l){l=Kr(-1,l),l.tag=3,l.payload={element:null};var f=i.value;return l.callback=function(){Su||(Su=!0,Ef=f),af(s,i)},l}function Hy(s,i,l){l=Kr(-1,l),l.tag=3;var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var g=i.value;l.payload=function(){return f(g)},l.callback=function(){af(s,i)}}var x=s.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(l.callback=function(){af(s,i),typeof f!="function"&&(Rs===null?Rs=new Set([this]):Rs.add(this));var T=i.stack;this.componentDidCatch(i.value,{componentStack:T!==null?T:""})}),l}function Wy(s,i,l){var f=s.pingCache;if(f===null){f=s.pingCache=new jb;var g=new Set;f.set(i,g)}else g=f.get(i),g===void 0&&(g=new Set,f.set(i,g));g.has(l)||(g.add(l),s=Wb.bind(null,s,i,l),i.then(s,s))}function Ky(s){do{var i;if((i=s.tag===13)&&(i=s.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return s;s=s.return}while(s!==null);return null}function Qy(s,i,l,f,g){return(s.mode&1)===0?(s===i?s.flags|=65536:(s.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(i=Kr(-1,1),i.tag=2,As(l,i,1))),l.lanes|=1),s):(s.flags|=65536,s.lanes=g,s)}var Db=W.ReactCurrentOwner,ln=!1;function en(s,i,l,f){i.child=s===null?my(i,null,l,f):Go(i,s.child,l,f)}function Yy(s,i,l,f,g){l=l.render;var x=i.ref;return Wo(i,g),f=Xd(s,i,l,f,x,g),l=Jd(),s!==null&&!ln?(i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~g,Qr(s,i,g)):(it&&l&&Dd(i),i.flags|=1,en(s,i,f,g),i.child)}function Xy(s,i,l,f,g){if(s===null){var x=l.type;return typeof x=="function"&&!kf(x)&&x.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(i.tag=15,i.type=x,Jy(s,i,x,f,g)):(s=Cu(l.type,null,f,i,i.mode,g),s.ref=i.ref,s.return=i,i.child=s)}if(x=s.child,(s.lanes&g)===0){var T=x.memoizedProps;if(l=l.compare,l=l!==null?l:sl,l(T,f)&&s.ref===i.ref)return Qr(s,i,g)}return i.flags|=1,s=Ls(x,f),s.ref=i.ref,s.return=i,i.child=s}function Jy(s,i,l,f,g){if(s!==null){var x=s.memoizedProps;if(sl(x,f)&&s.ref===i.ref)if(ln=!1,i.pendingProps=f=x,(s.lanes&g)!==0)(s.flags&131072)!==0&&(ln=!0);else return i.lanes=s.lanes,Qr(s,i,g)}return lf(s,i,l,f,g)}function Zy(s,i,l){var f=i.pendingProps,g=f.children,x=s!==null?s.memoizedState:null;if(f.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},et(Xo,_n),_n|=l;else{if((l&1073741824)===0)return s=x!==null?x.baseLanes|l:l,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:s,cachePool:null,transitions:null},i.updateQueue=null,et(Xo,_n),_n|=s,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=x!==null?x.baseLanes:l,et(Xo,_n),_n|=f}else x!==null?(f=x.baseLanes|l,i.memoizedState=null):f=l,et(Xo,_n),_n|=f;return en(s,i,g,l),i.child}function e0(s,i){var l=i.ref;(s===null&&l!==null||s!==null&&s.ref!==l)&&(i.flags|=512,i.flags|=2097152)}function lf(s,i,l,f,g){var x=an(l)?Si:$t.current;return x=Bo(i,x),Wo(i,g),l=Xd(s,i,l,f,x,g),f=Jd(),s!==null&&!ln?(i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~g,Qr(s,i,g)):(it&&f&&Dd(i),i.flags|=1,en(s,i,l,g),i.child)}function t0(s,i,l,f,g){if(an(l)){var x=!0;nu(i)}else x=!1;if(Wo(i,g),i.stateNode===null)wu(s,i),$y(i,l,f),sf(i,l,f,g),f=!0;else if(s===null){var T=i.stateNode,C=i.memoizedProps;T.props=C;var F=T.context,K=l.contextType;typeof K=="object"&&K!==null?K=Rn(K):(K=an(l)?Si:$t.current,K=Bo(i,K));var ne=l.getDerivedStateFromProps,se=typeof ne=="function"||typeof T.getSnapshotBeforeUpdate=="function";se||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(C!==f||F!==K)&&qy(i,T,f,K),ks=!1;var te=i.memoizedState;T.state=te,hu(i,f,T,g),F=i.memoizedState,C!==f||te!==F||on.current||ks?(typeof ne=="function"&&(rf(i,l,ne,f),F=i.memoizedState),(C=ks||zy(i,l,C,f,te,F,K))?(se||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(i.flags|=4194308)):(typeof T.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=f,i.memoizedState=F),T.props=f,T.state=F,T.context=K,f=C):(typeof T.componentDidMount=="function"&&(i.flags|=4194308),f=!1)}else{T=i.stateNode,yy(s,i),C=i.memoizedProps,K=i.type===i.elementType?C:er(i.type,C),T.props=K,se=i.pendingProps,te=T.context,F=l.contextType,typeof F=="object"&&F!==null?F=Rn(F):(F=an(l)?Si:$t.current,F=Bo(i,F));var de=l.getDerivedStateFromProps;(ne=typeof de=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(C!==se||te!==F)&&qy(i,T,f,F),ks=!1,te=i.memoizedState,T.state=te,hu(i,f,T,g);var pe=i.memoizedState;C!==se||te!==pe||on.current||ks?(typeof de=="function"&&(rf(i,l,de,f),pe=i.memoizedState),(K=ks||zy(i,l,K,f,te,pe,F)||!1)?(ne||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(f,pe,F),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(f,pe,F)),typeof T.componentDidUpdate=="function"&&(i.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof T.componentDidUpdate!="function"||C===s.memoizedProps&&te===s.memoizedState||(i.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&te===s.memoizedState||(i.flags|=1024),i.memoizedProps=f,i.memoizedState=pe),T.props=f,T.state=pe,T.context=F,f=K):(typeof T.componentDidUpdate!="function"||C===s.memoizedProps&&te===s.memoizedState||(i.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&te===s.memoizedState||(i.flags|=1024),f=!1)}return cf(s,i,l,f,x,g)}function cf(s,i,l,f,g,x){e0(s,i);var T=(i.flags&128)!==0;if(!f&&!T)return g&&oy(i,l,!1),Qr(s,i,x);f=i.stateNode,Db.current=i;var C=T&&typeof l.getDerivedStateFromError!="function"?null:f.render();return i.flags|=1,s!==null&&T?(i.child=Go(i,s.child,null,x),i.child=Go(i,null,C,x)):en(s,i,C,x),i.memoizedState=f.state,g&&oy(i,l,!0),i.child}function n0(s){var i=s.stateNode;i.pendingContext?sy(s,i.pendingContext,i.pendingContext!==i.context):i.context&&sy(s,i.context,!1),Gd(s,i.containerInfo)}function r0(s,i,l,f,g){return qo(),Md(g),i.flags|=256,en(s,i,l,f),i.child}var uf={dehydrated:null,treeContext:null,retryLane:0};function hf(s){return{baseLanes:s,cachePool:null,transitions:null}}function s0(s,i,l){var f=i.pendingProps,g=ot.current,x=!1,T=(i.flags&128)!==0,C;if((C=T)||(C=s!==null&&s.memoizedState===null?!1:(g&2)!==0),C?(x=!0,i.flags&=-129):(s===null||s.memoizedState!==null)&&(g|=1),et(ot,g&1),s===null)return Od(i),s=i.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((i.mode&1)===0?i.lanes=1:s.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(T=f.children,s=f.fallback,x?(f=i.mode,x=i.child,T={mode:"hidden",children:T},(f&1)===0&&x!==null?(x.childLanes=0,x.pendingProps=T):x=Ru(T,f,0,null),s=Vi(s,f,l,null),x.return=i,s.return=i,x.sibling=s,i.child=x,i.child.memoizedState=hf(l),i.memoizedState=uf,s):df(i,T));if(g=s.memoizedState,g!==null&&(C=g.dehydrated,C!==null))return Vb(s,i,T,f,C,g,l);if(x){x=f.fallback,T=i.mode,g=s.child,C=g.sibling;var F={mode:"hidden",children:f.children};return(T&1)===0&&i.child!==g?(f=i.child,f.childLanes=0,f.pendingProps=F,i.deletions=null):(f=Ls(g,F),f.subtreeFlags=g.subtreeFlags&14680064),C!==null?x=Ls(C,x):(x=Vi(x,T,l,null),x.flags|=2),x.return=i,f.return=i,f.sibling=x,i.child=f,f=x,x=i.child,T=s.child.memoizedState,T=T===null?hf(l):{baseLanes:T.baseLanes|l,cachePool:null,transitions:T.transitions},x.memoizedState=T,x.childLanes=s.childLanes&~l,i.memoizedState=uf,f}return x=s.child,s=x.sibling,f=Ls(x,{mode:"visible",children:f.children}),(i.mode&1)===0&&(f.lanes=l),f.return=i,f.sibling=null,s!==null&&(l=i.deletions,l===null?(i.deletions=[s],i.flags|=16):l.push(s)),i.child=f,i.memoizedState=null,f}function df(s,i){return i=Ru({mode:"visible",children:i},s.mode,0,null),i.return=s,s.child=i}function xu(s,i,l,f){return f!==null&&Md(f),Go(i,s.child,null,l),s=df(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function Vb(s,i,l,f,g,x,T){if(l)return i.flags&256?(i.flags&=-257,f=of(Error(t(422))),xu(s,i,T,f)):i.memoizedState!==null?(i.child=s.child,i.flags|=128,null):(x=f.fallback,g=i.mode,f=Ru({mode:"visible",children:f.children},g,0,null),x=Vi(x,g,T,null),x.flags|=2,f.return=i,x.return=i,f.sibling=x,i.child=f,(i.mode&1)!==0&&Go(i,s.child,null,T),i.child.memoizedState=hf(T),i.memoizedState=uf,x);if((i.mode&1)===0)return xu(s,i,T,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var C=f.dgst;return f=C,x=Error(t(419)),f=of(x,f,void 0),xu(s,i,T,f)}if(C=(T&s.childLanes)!==0,ln||C){if(f=Rt,f!==null){switch(T&-T){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|T))!==0?0:g,g!==0&&g!==x.retryLane&&(x.retryLane=g,Wr(s,g),rr(f,s,g,-1))}return Pf(),f=of(Error(t(421))),xu(s,i,T,f)}return g.data==="$?"?(i.flags|=128,i.child=s.child,i=Kb.bind(null,s),g._reactRetry=i,null):(s=x.treeContext,wn=Ss(g.nextSibling),xn=i,it=!0,Zn=null,s!==null&&(An[Cn++]=Gr,An[Cn++]=Hr,An[Cn++]=Ii,Gr=s.id,Hr=s.overflow,Ii=i),i=df(i,f.children),i.flags|=4096,i)}function i0(s,i,l){s.lanes|=i;var f=s.alternate;f!==null&&(f.lanes|=i),zd(s.return,i,l)}function ff(s,i,l,f,g){var x=s.memoizedState;x===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:f,tail:l,tailMode:g}:(x.isBackwards=i,x.rendering=null,x.renderingStartTime=0,x.last=f,x.tail=l,x.tailMode=g)}function o0(s,i,l){var f=i.pendingProps,g=f.revealOrder,x=f.tail;if(en(s,i,f.children,l),f=ot.current,(f&2)!==0)f=f&1|2,i.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&i0(s,l,i);else if(s.tag===19)i0(s,l,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}f&=1}if(et(ot,f),(i.mode&1)===0)i.memoizedState=null;else switch(g){case"forwards":for(l=i.child,g=null;l!==null;)s=l.alternate,s!==null&&du(s)===null&&(g=l),l=l.sibling;l=g,l===null?(g=i.child,i.child=null):(g=l.sibling,l.sibling=null),ff(i,!1,g,l,x);break;case"backwards":for(l=null,g=i.child,i.child=null;g!==null;){if(s=g.alternate,s!==null&&du(s)===null){i.child=g;break}s=g.sibling,g.sibling=l,l=g,g=s}ff(i,!0,l,null,x);break;case"together":ff(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function wu(s,i){(i.mode&1)===0&&s!==null&&(s.alternate=null,i.alternate=null,i.flags|=2)}function Qr(s,i,l){if(s!==null&&(i.dependencies=s.dependencies),Ci|=i.lanes,(l&i.childLanes)===0)return null;if(s!==null&&i.child!==s.child)throw Error(t(153));if(i.child!==null){for(s=i.child,l=Ls(s,s.pendingProps),i.child=l,l.return=i;s.sibling!==null;)s=s.sibling,l=l.sibling=Ls(s,s.pendingProps),l.return=i;l.sibling=null}return i.child}function Lb(s,i,l){switch(i.tag){case 3:n0(i),qo();break;case 5:wy(i);break;case 1:an(i.type)&&nu(i);break;case 4:Gd(i,i.stateNode.containerInfo);break;case 10:var f=i.type._context,g=i.memoizedProps.value;et(lu,f._currentValue),f._currentValue=g;break;case 13:if(f=i.memoizedState,f!==null)return f.dehydrated!==null?(et(ot,ot.current&1),i.flags|=128,null):(l&i.child.childLanes)!==0?s0(s,i,l):(et(ot,ot.current&1),s=Qr(s,i,l),s!==null?s.sibling:null);et(ot,ot.current&1);break;case 19:if(f=(l&i.childLanes)!==0,(s.flags&128)!==0){if(f)return o0(s,i,l);i.flags|=128}if(g=i.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),et(ot,ot.current),f)break;return null;case 22:case 23:return i.lanes=0,Zy(s,i,l)}return Qr(s,i,l)}var a0,pf,l0,c0;a0=function(s,i){for(var l=i.child;l!==null;){if(l.tag===5||l.tag===6)s.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},pf=function(){},l0=function(s,i,l,f){var g=s.memoizedProps;if(g!==f){s=i.stateNode,ki(xr.current);var x=null;switch(l){case"input":g=li(s,g),f=li(s,f),x=[];break;case"select":g=J({},g,{value:void 0}),f=J({},f,{value:void 0}),x=[];break;case"textarea":g=ja(s,g),f=ja(s,f),x=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(s.onclick=Zc)}Ua(l,f);var T;l=null;for(K in g)if(!f.hasOwnProperty(K)&&g.hasOwnProperty(K)&&g[K]!=null)if(K==="style"){var C=g[K];for(T in C)C.hasOwnProperty(T)&&(l||(l={}),l[T]="")}else K!=="dangerouslySetInnerHTML"&&K!=="children"&&K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(o.hasOwnProperty(K)?x||(x=[]):(x=x||[]).push(K,null));for(K in f){var F=f[K];if(C=g?.[K],f.hasOwnProperty(K)&&F!==C&&(F!=null||C!=null))if(K==="style")if(C){for(T in C)!C.hasOwnProperty(T)||F&&F.hasOwnProperty(T)||(l||(l={}),l[T]="");for(T in F)F.hasOwnProperty(T)&&C[T]!==F[T]&&(l||(l={}),l[T]=F[T])}else l||(x||(x=[]),x.push(K,l)),l=F;else K==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,C=C?C.__html:void 0,F!=null&&C!==F&&(x=x||[]).push(K,F)):K==="children"?typeof F!="string"&&typeof F!="number"||(x=x||[]).push(K,""+F):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&(o.hasOwnProperty(K)?(F!=null&&K==="onScroll"&&nt("scroll",s),x||C===F||(x=[])):(x=x||[]).push(K,F))}l&&(x=x||[]).push("style",l);var K=x;(i.updateQueue=K)&&(i.flags|=4)}},c0=function(s,i,l,f){l!==f&&(i.flags|=4)};function xl(s,i){if(!it)switch(s.tailMode){case"hidden":i=s.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function Gt(s){var i=s.alternate!==null&&s.alternate.child===s.child,l=0,f=0;if(i)for(var g=s.child;g!==null;)l|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)l|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=f,s.childLanes=l,i}function Ob(s,i,l){var f=i.pendingProps;switch(Vd(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(i),null;case 1:return an(i.type)&&tu(),Gt(i),null;case 3:return f=i.stateNode,Ko(),rt(on),rt($t),Kd(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(ou(i)?i.flags|=4:s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Zn!==null&&(Sf(Zn),Zn=null))),pf(s,i),Gt(i),null;case 5:Hd(i);var g=ki(pl.current);if(l=i.type,s!==null&&i.stateNode!=null)l0(s,i,l,f,g),s.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!f){if(i.stateNode===null)throw Error(t(166));return Gt(i),null}if(s=ki(xr.current),ou(i)){f=i.stateNode,l=i.type;var x=i.memoizedProps;switch(f[vr]=i,f[cl]=x,s=(i.mode&1)!==0,l){case"dialog":nt("cancel",f),nt("close",f);break;case"iframe":case"object":case"embed":nt("load",f);break;case"video":case"audio":for(g=0;g<ol.length;g++)nt(ol[g],f);break;case"source":nt("error",f);break;case"img":case"image":case"link":nt("error",f),nt("load",f);break;case"details":nt("toggle",f);break;case"input":lo(f,x),nt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!x.multiple},nt("invalid",f);break;case"textarea":uo(f,x),nt("invalid",f)}Ua(l,x),g=null;for(var T in x)if(x.hasOwnProperty(T)){var C=x[T];T==="children"?typeof C=="string"?f.textContent!==C&&(x.suppressHydrationWarning!==!0&&Jc(f.textContent,C,s),g=["children",C]):typeof C=="number"&&f.textContent!==""+C&&(x.suppressHydrationWarning!==!0&&Jc(f.textContent,C,s),g=["children",""+C]):o.hasOwnProperty(T)&&C!=null&&T==="onScroll"&&nt("scroll",f)}switch(l){case"input":_t(f),bc(f,x,!0);break;case"textarea":_t(f),Da(f);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(f.onclick=Zc)}f=g,i.updateQueue=f,f!==null&&(i.flags|=4)}else{T=g.nodeType===9?g:g.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Et(l)),s==="http://www.w3.org/1999/xhtml"?l==="script"?(s=T.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof f.is=="string"?s=T.createElement(l,{is:f.is}):(s=T.createElement(l),l==="select"&&(T=s,f.multiple?T.multiple=!0:f.size&&(T.size=f.size))):s=T.createElementNS(s,l),s[vr]=i,s[cl]=f,a0(s,i,!1,!1),i.stateNode=s;e:{switch(T=Fa(l,f),l){case"dialog":nt("cancel",s),nt("close",s),g=f;break;case"iframe":case"object":case"embed":nt("load",s),g=f;break;case"video":case"audio":for(g=0;g<ol.length;g++)nt(ol[g],s);g=f;break;case"source":nt("error",s),g=f;break;case"img":case"image":case"link":nt("error",s),nt("load",s),g=f;break;case"details":nt("toggle",s),g=f;break;case"input":lo(s,f),g=li(s,f),nt("invalid",s);break;case"option":g=f;break;case"select":s._wrapperState={wasMultiple:!!f.multiple},g=J({},f,{value:void 0}),nt("invalid",s);break;case"textarea":uo(s,f),g=ja(s,f),nt("invalid",s);break;default:g=f}Ua(l,g),C=g;for(x in C)if(C.hasOwnProperty(x)){var F=C[x];x==="style"?Oa(s,F):x==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&Va(s,F)):x==="children"?typeof F=="string"?(l!=="textarea"||F!=="")&&ps(s,F):typeof F=="number"&&ps(s,""+F):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(o.hasOwnProperty(x)?F!=null&&x==="onScroll"&&nt("scroll",s):F!=null&&j(s,x,F,T))}switch(l){case"input":_t(s),bc(s,f,!1);break;case"textarea":_t(s),Da(s);break;case"option":f.value!=null&&s.setAttribute("value",""+Q(f.value));break;case"select":s.multiple=!!f.multiple,x=f.value,x!=null?Vr(s,!!f.multiple,x,!1):f.defaultValue!=null&&Vr(s,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(s.onclick=Zc)}switch(l){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Gt(i),null;case 6:if(s&&i.stateNode!=null)c0(s,i,s.memoizedProps,f);else{if(typeof f!="string"&&i.stateNode===null)throw Error(t(166));if(l=ki(pl.current),ki(xr.current),ou(i)){if(f=i.stateNode,l=i.memoizedProps,f[vr]=i,(x=f.nodeValue!==l)&&(s=xn,s!==null))switch(s.tag){case 3:Jc(f.nodeValue,l,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Jc(f.nodeValue,l,(s.mode&1)!==0)}x&&(i.flags|=4)}else f=(l.nodeType===9?l:l.ownerDocument).createTextNode(f),f[vr]=i,i.stateNode=f}return Gt(i),null;case 13:if(rt(ot),f=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(it&&wn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)dy(),qo(),i.flags|=98560,x=!1;else if(x=ou(i),f!==null&&f.dehydrated!==null){if(s===null){if(!x)throw Error(t(318));if(x=i.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(t(317));x[vr]=i}else qo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Gt(i),x=!1}else Zn!==null&&(Sf(Zn),Zn=null),x=!0;if(!x)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=l,i):(f=f!==null,f!==(s!==null&&s.memoizedState!==null)&&f&&(i.child.flags|=8192,(i.mode&1)!==0&&(s===null||(ot.current&1)!==0?It===0&&(It=3):Pf())),i.updateQueue!==null&&(i.flags|=4),Gt(i),null);case 4:return Ko(),pf(s,i),s===null&&al(i.stateNode.containerInfo),Gt(i),null;case 10:return Bd(i.type._context),Gt(i),null;case 17:return an(i.type)&&tu(),Gt(i),null;case 19:if(rt(ot),x=i.memoizedState,x===null)return Gt(i),null;if(f=(i.flags&128)!==0,T=x.rendering,T===null)if(f)xl(x,!1);else{if(It!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(T=du(s),T!==null){for(i.flags|=128,xl(x,!1),f=T.updateQueue,f!==null&&(i.updateQueue=f,i.flags|=4),i.subtreeFlags=0,f=l,l=i.child;l!==null;)x=l,s=f,x.flags&=14680066,T=x.alternate,T===null?(x.childLanes=0,x.lanes=s,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=T.childLanes,x.lanes=T.lanes,x.child=T.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=T.memoizedProps,x.memoizedState=T.memoizedState,x.updateQueue=T.updateQueue,x.type=T.type,s=T.dependencies,x.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),l=l.sibling;return et(ot,ot.current&1|2),i.child}s=s.sibling}x.tail!==null&&Ze()>Jo&&(i.flags|=128,f=!0,xl(x,!1),i.lanes=4194304)}else{if(!f)if(s=du(T),s!==null){if(i.flags|=128,f=!0,l=s.updateQueue,l!==null&&(i.updateQueue=l,i.flags|=4),xl(x,!0),x.tail===null&&x.tailMode==="hidden"&&!T.alternate&&!it)return Gt(i),null}else 2*Ze()-x.renderingStartTime>Jo&&l!==1073741824&&(i.flags|=128,f=!0,xl(x,!1),i.lanes=4194304);x.isBackwards?(T.sibling=i.child,i.child=T):(l=x.last,l!==null?l.sibling=T:i.child=T,x.last=T)}return x.tail!==null?(i=x.tail,x.rendering=i,x.tail=i.sibling,x.renderingStartTime=Ze(),i.sibling=null,l=ot.current,et(ot,f?l&1|2:l&1),i):(Gt(i),null);case 22:case 23:return Nf(),f=i.memoizedState!==null,s!==null&&s.memoizedState!==null!==f&&(i.flags|=8192),f&&(i.mode&1)!==0?(_n&1073741824)!==0&&(Gt(i),i.subtreeFlags&6&&(i.flags|=8192)):Gt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function Mb(s,i){switch(Vd(i),i.tag){case 1:return an(i.type)&&tu(),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return Ko(),rt(on),rt($t),Kd(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 5:return Hd(i),null;case 13:if(rt(ot),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(t(340));qo()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return rt(ot),null;case 4:return Ko(),null;case 10:return Bd(i.type._context),null;case 22:case 23:return Nf(),null;case 24:return null;default:return null}}var _u=!1,Ht=!1,Ub=typeof WeakSet=="function"?WeakSet:Set,fe=null;function Yo(s,i){var l=s.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(f){ut(s,i,f)}else l.current=null}function mf(s,i,l){try{l()}catch(f){ut(s,i,f)}}var u0=!1;function Fb(s,i){if(Id=Es,s=zg(),vd(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var f=l.getSelection&&l.getSelection();if(f&&f.rangeCount!==0){l=f.anchorNode;var g=f.anchorOffset,x=f.focusNode;f=f.focusOffset;try{l.nodeType,x.nodeType}catch{l=null;break e}var T=0,C=-1,F=-1,K=0,ne=0,se=s,te=null;t:for(;;){for(var de;se!==l||g!==0&&se.nodeType!==3||(C=T+g),se!==x||f!==0&&se.nodeType!==3||(F=T+f),se.nodeType===3&&(T+=se.nodeValue.length),(de=se.firstChild)!==null;)te=se,se=de;for(;;){if(se===s)break t;if(te===l&&++K===g&&(C=T),te===x&&++ne===f&&(F=T),(de=se.nextSibling)!==null)break;se=te,te=se.parentNode}se=de}l=C===-1||F===-1?null:{start:C,end:F}}else l=null}l=l||{start:0,end:0}}else l=null;for(Nd={focusedElem:s,selectionRange:l},Es=!1,fe=i;fe!==null;)if(i=fe,s=i.child,(i.subtreeFlags&1028)!==0&&s!==null)s.return=i,fe=s;else for(;fe!==null;){i=fe;try{var pe=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(pe!==null){var ge=pe.memoizedProps,ft=pe.memoizedState,G=i.stateNode,z=G.getSnapshotBeforeUpdate(i.elementType===i.type?ge:er(i.type,ge),ft);G.__reactInternalSnapshotBeforeUpdate=z}break;case 3:var H=i.stateNode.containerInfo;H.nodeType===1?H.textContent="":H.nodeType===9&&H.documentElement&&H.removeChild(H.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(le){ut(i,i.return,le)}if(s=i.sibling,s!==null){s.return=i.return,fe=s;break}fe=i.return}return pe=u0,u0=!1,pe}function wl(s,i,l){var f=i.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&s)===s){var x=g.destroy;g.destroy=void 0,x!==void 0&&mf(i,l,x)}g=g.next}while(g!==f)}}function Eu(s,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&s)===s){var f=l.create;l.destroy=f()}l=l.next}while(l!==i)}}function gf(s){var i=s.ref;if(i!==null){var l=s.stateNode;switch(s.tag){case 5:s=l;break;default:s=l}typeof i=="function"?i(s):i.current=s}}function h0(s){var i=s.alternate;i!==null&&(s.alternate=null,h0(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&(delete i[vr],delete i[cl],delete i[Cd],delete i[Eb],delete i[Tb])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function d0(s){return s.tag===5||s.tag===3||s.tag===4}function f0(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||d0(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function yf(s,i,l){var f=s.tag;if(f===5||f===6)s=s.stateNode,i?l.nodeType===8?l.parentNode.insertBefore(s,i):l.insertBefore(s,i):(l.nodeType===8?(i=l.parentNode,i.insertBefore(s,l)):(i=l,i.appendChild(s)),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=Zc));else if(f!==4&&(s=s.child,s!==null))for(yf(s,i,l),s=s.sibling;s!==null;)yf(s,i,l),s=s.sibling}function vf(s,i,l){var f=s.tag;if(f===5||f===6)s=s.stateNode,i?l.insertBefore(s,i):l.appendChild(s);else if(f!==4&&(s=s.child,s!==null))for(vf(s,i,l),s=s.sibling;s!==null;)vf(s,i,l),s=s.sibling}var Ot=null,tr=!1;function Cs(s,i,l){for(l=l.child;l!==null;)p0(s,i,l),l=l.sibling}function p0(s,i,l){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(yi,l)}catch{}switch(l.tag){case 5:Ht||Yo(l,i);case 6:var f=Ot,g=tr;Ot=null,Cs(s,i,l),Ot=f,tr=g,Ot!==null&&(tr?(s=Ot,l=l.stateNode,s.nodeType===8?s.parentNode.removeChild(l):s.removeChild(l)):Ot.removeChild(l.stateNode));break;case 18:Ot!==null&&(tr?(s=Ot,l=l.stateNode,s.nodeType===8?Ad(s.parentNode,l):s.nodeType===1&&Ad(s,l),Yn(s)):Ad(Ot,l.stateNode));break;case 4:f=Ot,g=tr,Ot=l.stateNode.containerInfo,tr=!0,Cs(s,i,l),Ot=f,tr=g;break;case 0:case 11:case 14:case 15:if(!Ht&&(f=l.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var x=g,T=x.destroy;x=x.tag,T!==void 0&&((x&2)!==0||(x&4)!==0)&&mf(l,i,T),g=g.next}while(g!==f)}Cs(s,i,l);break;case 1:if(!Ht&&(Yo(l,i),f=l.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=l.memoizedProps,f.state=l.memoizedState,f.componentWillUnmount()}catch(C){ut(l,i,C)}Cs(s,i,l);break;case 21:Cs(s,i,l);break;case 22:l.mode&1?(Ht=(f=Ht)||l.memoizedState!==null,Cs(s,i,l),Ht=f):Cs(s,i,l);break;default:Cs(s,i,l)}}function m0(s){var i=s.updateQueue;if(i!==null){s.updateQueue=null;var l=s.stateNode;l===null&&(l=s.stateNode=new Ub),i.forEach(function(f){var g=Qb.bind(null,s,f);l.has(f)||(l.add(f),f.then(g,g))})}}function nr(s,i){var l=i.deletions;if(l!==null)for(var f=0;f<l.length;f++){var g=l[f];try{var x=s,T=i,C=T;e:for(;C!==null;){switch(C.tag){case 5:Ot=C.stateNode,tr=!1;break e;case 3:Ot=C.stateNode.containerInfo,tr=!0;break e;case 4:Ot=C.stateNode.containerInfo,tr=!0;break e}C=C.return}if(Ot===null)throw Error(t(160));p0(x,T,g),Ot=null,tr=!1;var F=g.alternate;F!==null&&(F.return=null),g.return=null}catch(K){ut(g,i,K)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)g0(i,s),i=i.sibling}function g0(s,i){var l=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(nr(i,s),_r(s),f&4){try{wl(3,s,s.return),Eu(3,s)}catch(ge){ut(s,s.return,ge)}try{wl(5,s,s.return)}catch(ge){ut(s,s.return,ge)}}break;case 1:nr(i,s),_r(s),f&512&&l!==null&&Yo(l,l.return);break;case 5:if(nr(i,s),_r(s),f&512&&l!==null&&Yo(l,l.return),s.flags&32){var g=s.stateNode;try{ps(g,"")}catch(ge){ut(s,s.return,ge)}}if(f&4&&(g=s.stateNode,g!=null)){var x=s.memoizedProps,T=l!==null?l.memoizedProps:x,C=s.type,F=s.updateQueue;if(s.updateQueue=null,F!==null)try{C==="input"&&x.type==="radio"&&x.name!=null&&Ca(g,x),Fa(C,T);var K=Fa(C,x);for(T=0;T<F.length;T+=2){var ne=F[T],se=F[T+1];ne==="style"?Oa(g,se):ne==="dangerouslySetInnerHTML"?Va(g,se):ne==="children"?ps(g,se):j(g,ne,se,K)}switch(C){case"input":Ra(g,x);break;case"textarea":ho(g,x);break;case"select":var te=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!x.multiple;var de=x.value;de!=null?Vr(g,!!x.multiple,de,!1):te!==!!x.multiple&&(x.defaultValue!=null?Vr(g,!!x.multiple,x.defaultValue,!0):Vr(g,!!x.multiple,x.multiple?[]:"",!1))}g[cl]=x}catch(ge){ut(s,s.return,ge)}}break;case 6:if(nr(i,s),_r(s),f&4){if(s.stateNode===null)throw Error(t(162));g=s.stateNode,x=s.memoizedProps;try{g.nodeValue=x}catch(ge){ut(s,s.return,ge)}}break;case 3:if(nr(i,s),_r(s),f&4&&l!==null&&l.memoizedState.isDehydrated)try{Yn(i.containerInfo)}catch(ge){ut(s,s.return,ge)}break;case 4:nr(i,s),_r(s);break;case 13:nr(i,s),_r(s),g=s.child,g.flags&8192&&(x=g.memoizedState!==null,g.stateNode.isHidden=x,!x||g.alternate!==null&&g.alternate.memoizedState!==null||(_f=Ze())),f&4&&m0(s);break;case 22:if(ne=l!==null&&l.memoizedState!==null,s.mode&1?(Ht=(K=Ht)||ne,nr(i,s),Ht=K):nr(i,s),_r(s),f&8192){if(K=s.memoizedState!==null,(s.stateNode.isHidden=K)&&!ne&&(s.mode&1)!==0)for(fe=s,ne=s.child;ne!==null;){for(se=fe=ne;fe!==null;){switch(te=fe,de=te.child,te.tag){case 0:case 11:case 14:case 15:wl(4,te,te.return);break;case 1:Yo(te,te.return);var pe=te.stateNode;if(typeof pe.componentWillUnmount=="function"){f=te,l=te.return;try{i=f,pe.props=i.memoizedProps,pe.state=i.memoizedState,pe.componentWillUnmount()}catch(ge){ut(f,l,ge)}}break;case 5:Yo(te,te.return);break;case 22:if(te.memoizedState!==null){x0(se);continue}}de!==null?(de.return=te,fe=de):x0(se)}ne=ne.sibling}e:for(ne=null,se=s;;){if(se.tag===5){if(ne===null){ne=se;try{g=se.stateNode,K?(x=g.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(C=se.stateNode,F=se.memoizedProps.style,T=F!=null&&F.hasOwnProperty("display")?F.display:null,C.style.display=La("display",T))}catch(ge){ut(s,s.return,ge)}}}else if(se.tag===6){if(ne===null)try{se.stateNode.nodeValue=K?"":se.memoizedProps}catch(ge){ut(s,s.return,ge)}}else if((se.tag!==22&&se.tag!==23||se.memoizedState===null||se===s)&&se.child!==null){se.child.return=se,se=se.child;continue}if(se===s)break e;for(;se.sibling===null;){if(se.return===null||se.return===s)break e;ne===se&&(ne=null),se=se.return}ne===se&&(ne=null),se.sibling.return=se.return,se=se.sibling}}break;case 19:nr(i,s),_r(s),f&4&&m0(s);break;case 21:break;default:nr(i,s),_r(s)}}function _r(s){var i=s.flags;if(i&2){try{e:{for(var l=s.return;l!==null;){if(d0(l)){var f=l;break e}l=l.return}throw Error(t(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(ps(g,""),f.flags&=-33);var x=f0(s);vf(s,x,g);break;case 3:case 4:var T=f.stateNode.containerInfo,C=f0(s);yf(s,C,T);break;default:throw Error(t(161))}}catch(F){ut(s,s.return,F)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function Bb(s,i,l){fe=s,y0(s)}function y0(s,i,l){for(var f=(s.mode&1)!==0;fe!==null;){var g=fe,x=g.child;if(g.tag===22&&f){var T=g.memoizedState!==null||_u;if(!T){var C=g.alternate,F=C!==null&&C.memoizedState!==null||Ht;C=_u;var K=Ht;if(_u=T,(Ht=F)&&!K)for(fe=g;fe!==null;)T=fe,F=T.child,T.tag===22&&T.memoizedState!==null?w0(g):F!==null?(F.return=T,fe=F):w0(g);for(;x!==null;)fe=x,y0(x),x=x.sibling;fe=g,_u=C,Ht=K}v0(s)}else(g.subtreeFlags&8772)!==0&&x!==null?(x.return=g,fe=x):v0(s)}}function v0(s){for(;fe!==null;){var i=fe;if((i.flags&8772)!==0){var l=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Ht||Eu(5,i);break;case 1:var f=i.stateNode;if(i.flags&4&&!Ht)if(l===null)f.componentDidMount();else{var g=i.elementType===i.type?l.memoizedProps:er(i.type,l.memoizedProps);f.componentDidUpdate(g,l.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var x=i.updateQueue;x!==null&&xy(i,x,f);break;case 3:var T=i.updateQueue;if(T!==null){if(l=null,i.child!==null)switch(i.child.tag){case 5:l=i.child.stateNode;break;case 1:l=i.child.stateNode}xy(i,T,l)}break;case 5:var C=i.stateNode;if(l===null&&i.flags&4){l=C;var F=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&l.focus();break;case"img":F.src&&(l.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var K=i.alternate;if(K!==null){var ne=K.memoizedState;if(ne!==null){var se=ne.dehydrated;se!==null&&Yn(se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ht||i.flags&512&&gf(i)}catch(te){ut(i,i.return,te)}}if(i===s){fe=null;break}if(l=i.sibling,l!==null){l.return=i.return,fe=l;break}fe=i.return}}function x0(s){for(;fe!==null;){var i=fe;if(i===s){fe=null;break}var l=i.sibling;if(l!==null){l.return=i.return,fe=l;break}fe=i.return}}function w0(s){for(;fe!==null;){var i=fe;try{switch(i.tag){case 0:case 11:case 15:var l=i.return;try{Eu(4,i)}catch(F){ut(i,l,F)}break;case 1:var f=i.stateNode;if(typeof f.componentDidMount=="function"){var g=i.return;try{f.componentDidMount()}catch(F){ut(i,g,F)}}var x=i.return;try{gf(i)}catch(F){ut(i,x,F)}break;case 5:var T=i.return;try{gf(i)}catch(F){ut(i,T,F)}}}catch(F){ut(i,i.return,F)}if(i===s){fe=null;break}var C=i.sibling;if(C!==null){C.return=i.return,fe=C;break}fe=i.return}}var zb=Math.ceil,Tu=W.ReactCurrentDispatcher,xf=W.ReactCurrentOwner,Dn=W.ReactCurrentBatchConfig,We=0,Rt=null,vt=null,Mt=0,_n=0,Xo=Is(0),It=0,_l=null,Ci=0,bu=0,wf=0,El=null,cn=null,_f=0,Jo=1/0,Yr=null,Su=!1,Ef=null,Rs=null,Iu=!1,js=null,Nu=0,Tl=0,Tf=null,Pu=-1,ku=0;function tn(){return(We&6)!==0?Ze():Pu!==-1?Pu:Pu=Ze()}function Ds(s){return(s.mode&1)===0?1:(We&2)!==0&&Mt!==0?Mt&-Mt:Sb.transition!==null?(ku===0&&(ku=xi()),ku):(s=ze,s!==0||(s=window.event,s=s===void 0?16:Xa(s.type)),s)}function rr(s,i,l,f){if(50<Tl)throw Tl=0,Tf=null,Error(t(185));vs(s,l,f),((We&2)===0||s!==Rt)&&(s===Rt&&((We&2)===0&&(bu|=l),It===4&&Vs(s,Mt)),un(s,f),l===1&&We===0&&(i.mode&1)===0&&(Jo=Ze()+500,ru&&Ps()))}function un(s,i){var l=s.callbackNode;Mr(s,i);var f=vi(s,s===Rt?Mt:0);if(f===0)l!==null&&Ha(l),s.callbackNode=null,s.callbackPriority=0;else if(i=f&-f,s.callbackPriority!==i){if(l!=null&&Ha(l),i===1)s.tag===0?bb(E0.bind(null,s)):ay(E0.bind(null,s)),wb(function(){(We&6)===0&&Ps()}),l=null;else{switch(ws(f)){case 1:l=gi;break;case 4:l=ms;break;case 16:l=Nn;break;case 536870912:l=kc;break;default:l=Nn}l=A0(l,_0.bind(null,s))}s.callbackPriority=i,s.callbackNode=l}}function _0(s,i){if(Pu=-1,ku=0,(We&6)!==0)throw Error(t(327));var l=s.callbackNode;if(Zo()&&s.callbackNode!==l)return null;var f=vi(s,s===Rt?Mt:0);if(f===0)return null;if((f&30)!==0||(f&s.expiredLanes)!==0||i)i=Au(s,f);else{i=f;var g=We;We|=2;var x=b0();(Rt!==s||Mt!==i)&&(Yr=null,Jo=Ze()+500,ji(s,i));do try{Gb();break}catch(C){T0(s,C)}while(!0);Fd(),Tu.current=x,We=g,vt!==null?i=0:(Rt=null,Mt=0,i=It)}if(i!==0){if(i===2&&(g=gn(s),g!==0&&(f=g,i=bf(s,g))),i===1)throw l=_l,ji(s,0),Vs(s,f),un(s,Ze()),l;if(i===6)Vs(s,f);else{if(g=s.current.alternate,(f&30)===0&&!$b(g)&&(i=Au(s,f),i===2&&(x=gn(s),x!==0&&(f=x,i=bf(s,x))),i===1))throw l=_l,ji(s,0),Vs(s,f),un(s,Ze()),l;switch(s.finishedWork=g,s.finishedLanes=f,i){case 0:case 1:throw Error(t(345));case 2:Di(s,cn,Yr);break;case 3:if(Vs(s,f),(f&130023424)===f&&(i=_f+500-Ze(),10<i)){if(vi(s,0)!==0)break;if(g=s.suspendedLanes,(g&f)!==f){tn(),s.pingedLanes|=s.suspendedLanes&g;break}s.timeoutHandle=kd(Di.bind(null,s,cn,Yr),i);break}Di(s,cn,Yr);break;case 4:if(Vs(s,f),(f&4194240)===f)break;for(i=s.eventTimes,g=-1;0<f;){var T=31-Jt(f);x=1<<T,T=i[T],T>g&&(g=T),f&=~x}if(f=g,f=Ze()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*zb(f/1960))-f,10<f){s.timeoutHandle=kd(Di.bind(null,s,cn,Yr),f);break}Di(s,cn,Yr);break;case 5:Di(s,cn,Yr);break;default:throw Error(t(329))}}}return un(s,Ze()),s.callbackNode===l?_0.bind(null,s):null}function bf(s,i){var l=El;return s.current.memoizedState.isDehydrated&&(ji(s,i).flags|=256),s=Au(s,i),s!==2&&(i=cn,cn=l,i!==null&&Sf(i)),s}function Sf(s){cn===null?cn=s:cn.push.apply(cn,s)}function $b(s){for(var i=s;;){if(i.flags&16384){var l=i.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var f=0;f<l.length;f++){var g=l[f],x=g.getSnapshot;g=g.value;try{if(!Jn(x(),g))return!1}catch{return!1}}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Vs(s,i){for(i&=~wf,i&=~bu,s.suspendedLanes|=i,s.pingedLanes&=~i,s=s.expirationTimes;0<i;){var l=31-Jt(i),f=1<<l;s[l]=-1,i&=~f}}function E0(s){if((We&6)!==0)throw Error(t(327));Zo();var i=vi(s,0);if((i&1)===0)return un(s,Ze()),null;var l=Au(s,i);if(s.tag!==0&&l===2){var f=gn(s);f!==0&&(i=f,l=bf(s,f))}if(l===1)throw l=_l,ji(s,0),Vs(s,i),un(s,Ze()),l;if(l===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=i,Di(s,cn,Yr),un(s,Ze()),null}function If(s,i){var l=We;We|=1;try{return s(i)}finally{We=l,We===0&&(Jo=Ze()+500,ru&&Ps())}}function Ri(s){js!==null&&js.tag===0&&(We&6)===0&&Zo();var i=We;We|=1;var l=Dn.transition,f=ze;try{if(Dn.transition=null,ze=1,s)return s()}finally{ze=f,Dn.transition=l,We=i,(We&6)===0&&Ps()}}function Nf(){_n=Xo.current,rt(Xo)}function ji(s,i){s.finishedWork=null,s.finishedLanes=0;var l=s.timeoutHandle;if(l!==-1&&(s.timeoutHandle=-1,xb(l)),vt!==null)for(l=vt.return;l!==null;){var f=l;switch(Vd(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&tu();break;case 3:Ko(),rt(on),rt($t),Kd();break;case 5:Hd(f);break;case 4:Ko();break;case 13:rt(ot);break;case 19:rt(ot);break;case 10:Bd(f.type._context);break;case 22:case 23:Nf()}l=l.return}if(Rt=s,vt=s=Ls(s.current,null),Mt=_n=i,It=0,_l=null,wf=bu=Ci=0,cn=El=null,Pi!==null){for(i=0;i<Pi.length;i++)if(l=Pi[i],f=l.interleaved,f!==null){l.interleaved=null;var g=f.next,x=l.pending;if(x!==null){var T=x.next;x.next=g,f.next=T}l.pending=f}Pi=null}return s}function T0(s,i){do{var l=vt;try{if(Fd(),fu.current=yu,pu){for(var f=at.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}pu=!1}if(Ai=0,Ct=St=at=null,ml=!1,gl=0,xf.current=null,l===null||l.return===null){It=1,_l=i,vt=null;break}e:{var x=s,T=l.return,C=l,F=i;if(i=Mt,C.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var K=F,ne=C,se=ne.tag;if((ne.mode&1)===0&&(se===0||se===11||se===15)){var te=ne.alternate;te?(ne.updateQueue=te.updateQueue,ne.memoizedState=te.memoizedState,ne.lanes=te.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var de=Ky(T);if(de!==null){de.flags&=-257,Qy(de,T,C,x,i),de.mode&1&&Wy(x,K,i),i=de,F=K;var pe=i.updateQueue;if(pe===null){var ge=new Set;ge.add(F),i.updateQueue=ge}else pe.add(F);break e}else{if((i&1)===0){Wy(x,K,i),Pf();break e}F=Error(t(426))}}else if(it&&C.mode&1){var ft=Ky(T);if(ft!==null){(ft.flags&65536)===0&&(ft.flags|=256),Qy(ft,T,C,x,i),Md(Qo(F,C));break e}}x=F=Qo(F,C),It!==4&&(It=2),El===null?El=[x]:El.push(x),x=T;do{switch(x.tag){case 3:x.flags|=65536,i&=-i,x.lanes|=i;var G=Gy(x,F,i);vy(x,G);break e;case 1:C=F;var z=x.type,H=x.stateNode;if((x.flags&128)===0&&(typeof z.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(Rs===null||!Rs.has(H)))){x.flags|=65536,i&=-i,x.lanes|=i;var le=Hy(x,C,i);vy(x,le);break e}}x=x.return}while(x!==null)}I0(l)}catch(xe){i=xe,vt===l&&l!==null&&(vt=l=l.return);continue}break}while(!0)}function b0(){var s=Tu.current;return Tu.current=yu,s===null?yu:s}function Pf(){(It===0||It===3||It===2)&&(It=4),Rt===null||(Ci&268435455)===0&&(bu&268435455)===0||Vs(Rt,Mt)}function Au(s,i){var l=We;We|=2;var f=b0();(Rt!==s||Mt!==i)&&(Yr=null,ji(s,i));do try{qb();break}catch(g){T0(s,g)}while(!0);if(Fd(),We=l,Tu.current=f,vt!==null)throw Error(t(261));return Rt=null,Mt=0,It}function qb(){for(;vt!==null;)S0(vt)}function Gb(){for(;vt!==null&&!Nc();)S0(vt)}function S0(s){var i=k0(s.alternate,s,_n);s.memoizedProps=s.pendingProps,i===null?I0(s):vt=i,xf.current=null}function I0(s){var i=s;do{var l=i.alternate;if(s=i.return,(i.flags&32768)===0){if(l=Ob(l,i,_n),l!==null){vt=l;return}}else{if(l=Mb(l,i),l!==null){l.flags&=32767,vt=l;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{It=6,vt=null;return}}if(i=i.sibling,i!==null){vt=i;return}vt=i=s}while(i!==null);It===0&&(It=5)}function Di(s,i,l){var f=ze,g=Dn.transition;try{Dn.transition=null,ze=1,Hb(s,i,l,f)}finally{Dn.transition=g,ze=f}return null}function Hb(s,i,l,f){do Zo();while(js!==null);if((We&6)!==0)throw Error(t(327));l=s.finishedWork;var g=s.finishedLanes;if(l===null)return null;if(s.finishedWork=null,s.finishedLanes=0,l===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var x=l.lanes|l.childLanes;if(Je(s,x),s===Rt&&(vt=Rt=null,Mt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Iu||(Iu=!0,A0(Nn,function(){return Zo(),null})),x=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||x){x=Dn.transition,Dn.transition=null;var T=ze;ze=1;var C=We;We|=4,xf.current=null,Fb(s,l),g0(l,s),db(Nd),Es=!!Id,Nd=Id=null,s.current=l,Bb(l),ud(),We=C,ze=T,Dn.transition=x}else s.current=l;if(Iu&&(Iu=!1,js=s,Nu=g),x=s.pendingLanes,x===0&&(Rs=null),Ac(l.stateNode),un(s,Ze()),i!==null)for(f=s.onRecoverableError,l=0;l<i.length;l++)g=i[l],f(g.value,{componentStack:g.stack,digest:g.digest});if(Su)throw Su=!1,s=Ef,Ef=null,s;return(Nu&1)!==0&&s.tag!==0&&Zo(),x=s.pendingLanes,(x&1)!==0?s===Tf?Tl++:(Tl=0,Tf=s):Tl=0,Ps(),null}function Zo(){if(js!==null){var s=ws(Nu),i=Dn.transition,l=ze;try{if(Dn.transition=null,ze=16>s?16:s,js===null)var f=!1;else{if(s=js,js=null,Nu=0,(We&6)!==0)throw Error(t(331));var g=We;for(We|=4,fe=s.current;fe!==null;){var x=fe,T=x.child;if((fe.flags&16)!==0){var C=x.deletions;if(C!==null){for(var F=0;F<C.length;F++){var K=C[F];for(fe=K;fe!==null;){var ne=fe;switch(ne.tag){case 0:case 11:case 15:wl(8,ne,x)}var se=ne.child;if(se!==null)se.return=ne,fe=se;else for(;fe!==null;){ne=fe;var te=ne.sibling,de=ne.return;if(h0(ne),ne===K){fe=null;break}if(te!==null){te.return=de,fe=te;break}fe=de}}}var pe=x.alternate;if(pe!==null){var ge=pe.child;if(ge!==null){pe.child=null;do{var ft=ge.sibling;ge.sibling=null,ge=ft}while(ge!==null)}}fe=x}}if((x.subtreeFlags&2064)!==0&&T!==null)T.return=x,fe=T;else e:for(;fe!==null;){if(x=fe,(x.flags&2048)!==0)switch(x.tag){case 0:case 11:case 15:wl(9,x,x.return)}var G=x.sibling;if(G!==null){G.return=x.return,fe=G;break e}fe=x.return}}var z=s.current;for(fe=z;fe!==null;){T=fe;var H=T.child;if((T.subtreeFlags&2064)!==0&&H!==null)H.return=T,fe=H;else e:for(T=z;fe!==null;){if(C=fe,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:Eu(9,C)}}catch(xe){ut(C,C.return,xe)}if(C===T){fe=null;break e}var le=C.sibling;if(le!==null){le.return=C.return,fe=le;break e}fe=C.return}}if(We=g,Ps(),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(yi,s)}catch{}f=!0}return f}finally{ze=l,Dn.transition=i}}return!1}function N0(s,i,l){i=Qo(l,i),i=Gy(s,i,1),s=As(s,i,1),i=tn(),s!==null&&(vs(s,1,i),un(s,i))}function ut(s,i,l){if(s.tag===3)N0(s,s,l);else for(;i!==null;){if(i.tag===3){N0(i,s,l);break}else if(i.tag===1){var f=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Rs===null||!Rs.has(f))){s=Qo(l,s),s=Hy(i,s,1),i=As(i,s,1),s=tn(),i!==null&&(vs(i,1,s),un(i,s));break}}i=i.return}}function Wb(s,i,l){var f=s.pingCache;f!==null&&f.delete(i),i=tn(),s.pingedLanes|=s.suspendedLanes&l,Rt===s&&(Mt&l)===l&&(It===4||It===3&&(Mt&130023424)===Mt&&500>Ze()-_f?ji(s,0):wf|=l),un(s,i)}function P0(s,i){i===0&&((s.mode&1)===0?i=1:(i=Eo,Eo<<=1,(Eo&130023424)===0&&(Eo=4194304)));var l=tn();s=Wr(s,i),s!==null&&(vs(s,i,l),un(s,l))}function Kb(s){var i=s.memoizedState,l=0;i!==null&&(l=i.retryLane),P0(s,l)}function Qb(s,i){var l=0;switch(s.tag){case 13:var f=s.stateNode,g=s.memoizedState;g!==null&&(l=g.retryLane);break;case 19:f=s.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(i),P0(s,l)}var k0;k0=function(s,i,l){if(s!==null)if(s.memoizedProps!==i.pendingProps||on.current)ln=!0;else{if((s.lanes&l)===0&&(i.flags&128)===0)return ln=!1,Lb(s,i,l);ln=(s.flags&131072)!==0}else ln=!1,it&&(i.flags&1048576)!==0&&ly(i,iu,i.index);switch(i.lanes=0,i.tag){case 2:var f=i.type;wu(s,i),s=i.pendingProps;var g=Bo(i,$t.current);Wo(i,l),g=Xd(null,i,f,s,g,l);var x=Jd();return i.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,an(f)?(x=!0,nu(i)):x=!1,i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,qd(i),g.updater=vu,i.stateNode=g,g._reactInternals=i,sf(i,f,s,l),i=cf(null,i,f,!0,x,l)):(i.tag=0,it&&x&&Dd(i),en(null,i,g,l),i=i.child),i;case 16:f=i.elementType;e:{switch(wu(s,i),s=i.pendingProps,g=f._init,f=g(f._payload),i.type=f,g=i.tag=Xb(f),s=er(f,s),g){case 0:i=lf(null,i,f,s,l);break e;case 1:i=t0(null,i,f,s,l);break e;case 11:i=Yy(null,i,f,s,l);break e;case 14:i=Xy(null,i,f,er(f.type,s),l);break e}throw Error(t(306,f,""))}return i;case 0:return f=i.type,g=i.pendingProps,g=i.elementType===f?g:er(f,g),lf(s,i,f,g,l);case 1:return f=i.type,g=i.pendingProps,g=i.elementType===f?g:er(f,g),t0(s,i,f,g,l);case 3:e:{if(n0(i),s===null)throw Error(t(387));f=i.pendingProps,x=i.memoizedState,g=x.element,yy(s,i),hu(i,f,null,l);var T=i.memoizedState;if(f=T.element,x.isDehydrated)if(x={element:f,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},i.updateQueue.baseState=x,i.memoizedState=x,i.flags&256){g=Qo(Error(t(423)),i),i=r0(s,i,f,l,g);break e}else if(f!==g){g=Qo(Error(t(424)),i),i=r0(s,i,f,l,g);break e}else for(wn=Ss(i.stateNode.containerInfo.firstChild),xn=i,it=!0,Zn=null,l=my(i,null,f,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(qo(),f===g){i=Qr(s,i,l);break e}en(s,i,f,l)}i=i.child}return i;case 5:return wy(i),s===null&&Od(i),f=i.type,g=i.pendingProps,x=s!==null?s.memoizedProps:null,T=g.children,Pd(f,g)?T=null:x!==null&&Pd(f,x)&&(i.flags|=32),e0(s,i),en(s,i,T,l),i.child;case 6:return s===null&&Od(i),null;case 13:return s0(s,i,l);case 4:return Gd(i,i.stateNode.containerInfo),f=i.pendingProps,s===null?i.child=Go(i,null,f,l):en(s,i,f,l),i.child;case 11:return f=i.type,g=i.pendingProps,g=i.elementType===f?g:er(f,g),Yy(s,i,f,g,l);case 7:return en(s,i,i.pendingProps,l),i.child;case 8:return en(s,i,i.pendingProps.children,l),i.child;case 12:return en(s,i,i.pendingProps.children,l),i.child;case 10:e:{if(f=i.type._context,g=i.pendingProps,x=i.memoizedProps,T=g.value,et(lu,f._currentValue),f._currentValue=T,x!==null)if(Jn(x.value,T)){if(x.children===g.children&&!on.current){i=Qr(s,i,l);break e}}else for(x=i.child,x!==null&&(x.return=i);x!==null;){var C=x.dependencies;if(C!==null){T=x.child;for(var F=C.firstContext;F!==null;){if(F.context===f){if(x.tag===1){F=Kr(-1,l&-l),F.tag=2;var K=x.updateQueue;if(K!==null){K=K.shared;var ne=K.pending;ne===null?F.next=F:(F.next=ne.next,ne.next=F),K.pending=F}}x.lanes|=l,F=x.alternate,F!==null&&(F.lanes|=l),zd(x.return,l,i),C.lanes|=l;break}F=F.next}}else if(x.tag===10)T=x.type===i.type?null:x.child;else if(x.tag===18){if(T=x.return,T===null)throw Error(t(341));T.lanes|=l,C=T.alternate,C!==null&&(C.lanes|=l),zd(T,l,i),T=x.sibling}else T=x.child;if(T!==null)T.return=x;else for(T=x;T!==null;){if(T===i){T=null;break}if(x=T.sibling,x!==null){x.return=T.return,T=x;break}T=T.return}x=T}en(s,i,g.children,l),i=i.child}return i;case 9:return g=i.type,f=i.pendingProps.children,Wo(i,l),g=Rn(g),f=f(g),i.flags|=1,en(s,i,f,l),i.child;case 14:return f=i.type,g=er(f,i.pendingProps),g=er(f.type,g),Xy(s,i,f,g,l);case 15:return Jy(s,i,i.type,i.pendingProps,l);case 17:return f=i.type,g=i.pendingProps,g=i.elementType===f?g:er(f,g),wu(s,i),i.tag=1,an(f)?(s=!0,nu(i)):s=!1,Wo(i,l),$y(i,f,g),sf(i,f,g,l),cf(null,i,f,!0,s,l);case 19:return o0(s,i,l);case 22:return Zy(s,i,l)}throw Error(t(156,i.tag))};function A0(s,i){return wo(s,i)}function Yb(s,i,l,f){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(s,i,l,f){return new Yb(s,i,l,f)}function kf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Xb(s){if(typeof s=="function")return kf(s)?1:0;if(s!=null){if(s=s.$$typeof,s===$)return 11;if(s===Ue)return 14}return 2}function Ls(s,i){var l=s.alternate;return l===null?(l=Vn(s.tag,i,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=i,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&14680064,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,i=s.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l}function Cu(s,i,l,f,g,x){var T=2;if(f=s,typeof s=="function")kf(s)&&(T=1);else if(typeof s=="string")T=5;else e:switch(s){case R:return Vi(l.children,g,x,i);case I:T=8,g|=8;break;case N:return s=Vn(12,l,i,g|2),s.elementType=N,s.lanes=x,s;case A:return s=Vn(13,l,i,g),s.elementType=A,s.lanes=x,s;case _e:return s=Vn(19,l,i,g),s.elementType=_e,s.lanes=x,s;case Ae:return Ru(l,g,x,i);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case M:T=10;break e;case B:T=9;break e;case $:T=11;break e;case Ue:T=14;break e;case Oe:T=16,f=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return i=Vn(T,l,i,g),i.elementType=s,i.type=f,i.lanes=x,i}function Vi(s,i,l,f){return s=Vn(7,s,f,i),s.lanes=l,s}function Ru(s,i,l,f){return s=Vn(22,s,f,i),s.elementType=Ae,s.lanes=l,s.stateNode={isHidden:!1},s}function Af(s,i,l){return s=Vn(6,s,null,i),s.lanes=l,s}function Cf(s,i,l){return i=Vn(4,s.children!==null?s.children:[],s.key,i),i.lanes=l,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}function Jb(s,i,l,f,g){this.tag=i,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ys(0),this.expirationTimes=ys(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ys(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Rf(s,i,l,f,g,x,T,C,F){return s=new Jb(s,i,l,C,F),i===1?(i=1,x===!0&&(i|=8)):i=0,x=Vn(3,null,null,i),s.current=x,x.stateNode=s,x.memoizedState={element:f,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},qd(x),s}function Zb(s,i,l){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ae,key:f==null?null:""+f,children:s,containerInfo:i,implementation:l}}function C0(s){if(!s)return Ns;s=s._reactInternals;e:{if(Gn(s)!==s||s.tag!==1)throw Error(t(170));var i=s;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(an(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(s.tag===1){var l=s.type;if(an(l))return iy(s,l,i)}return i}function R0(s,i,l,f,g,x,T,C,F){return s=Rf(l,f,!0,s,g,x,T,C,F),s.context=C0(null),l=s.current,f=tn(),g=Ds(l),x=Kr(f,g),x.callback=i??null,As(l,x,g),s.current.lanes=g,vs(s,g,f),un(s,f),s}function ju(s,i,l,f){var g=i.current,x=tn(),T=Ds(g);return l=C0(l),i.context===null?i.context=l:i.pendingContext=l,i=Kr(x,T),i.payload={element:s},f=f===void 0?null:f,f!==null&&(i.callback=f),s=As(g,i,T),s!==null&&(rr(s,g,T,x),uu(s,g,T)),T}function Du(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function j0(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<i?l:i}}function jf(s,i){j0(s,i),(s=s.alternate)&&j0(s,i)}function eS(){return null}var D0=typeof reportError=="function"?reportError:function(s){console.error(s)};function Df(s){this._internalRoot=s}Vu.prototype.render=Df.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(t(409));ju(s,i,null,null)},Vu.prototype.unmount=Df.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;Ri(function(){ju(null,s,null,null)}),i[$r]=null}};function Vu(s){this._internalRoot=s}Vu.prototype.unstable_scheduleHydration=function(s){if(s){var i=Vc();s={blockedOn:null,target:s,priority:i};for(var l=0;l<pr.length&&i!==0&&i<pr[l].priority;l++);pr.splice(l,0,s),l===0&&Mc(s)}};function Vf(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Lu(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function V0(){}function tS(s,i,l,f,g){if(g){if(typeof f=="function"){var x=f;f=function(){var K=Du(T);x.call(K)}}var T=R0(i,f,s,0,null,!1,!1,"",V0);return s._reactRootContainer=T,s[$r]=T.current,al(s.nodeType===8?s.parentNode:s),Ri(),T}for(;g=s.lastChild;)s.removeChild(g);if(typeof f=="function"){var C=f;f=function(){var K=Du(F);C.call(K)}}var F=Rf(s,0,!1,null,null,!1,!1,"",V0);return s._reactRootContainer=F,s[$r]=F.current,al(s.nodeType===8?s.parentNode:s),Ri(function(){ju(i,F,l,f)}),F}function Ou(s,i,l,f,g){var x=l._reactRootContainer;if(x){var T=x;if(typeof g=="function"){var C=g;g=function(){var F=Du(T);C.call(F)}}ju(i,T,s,g)}else T=tS(l,i,s,g,f);return Du(T)}jc=function(s){switch(s.tag){case 3:var i=s.stateNode;if(i.current.memoizedState.isDehydrated){var l=gs(i.pendingLanes);l!==0&&(xs(i,l|1),un(i,Ze()),(We&6)===0&&(Jo=Ze()+500,Ps()))}break;case 13:Ri(function(){var f=Wr(s,1);if(f!==null){var g=tn();rr(f,s,1,g)}}),jf(s,1)}},To=function(s){if(s.tag===13){var i=Wr(s,134217728);if(i!==null){var l=tn();rr(i,s,134217728,l)}jf(s,134217728)}},Dc=function(s){if(s.tag===13){var i=Ds(s),l=Wr(s,i);if(l!==null){var f=tn();rr(l,s,i,f)}jf(s,i)}},Vc=function(){return ze},Lc=function(s,i){var l=ze;try{return ze=s,i()}finally{ze=l}},po=function(s,i,l){switch(i){case"input":if(Ra(s,l),i=l.name,l.type==="radio"&&i!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<l.length;i++){var f=l[i];if(f!==s&&f.form===s.form){var g=eu(f);if(!g)throw Error(t(90));jr(f),Ra(f,g)}}}break;case"textarea":ho(s,l);break;case"select":i=l.value,i!=null&&Vr(s,!!l.multiple,i,!1)}},di=If,za=Ri;var nS={usingClientEntryPoint:!1,Events:[ul,Uo,eu,dr,Ba,If]},bl={findFiberByHostInstance:bi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rS={bundleType:bl.bundleType,version:bl.version,rendererPackageName:bl.rendererPackageName,rendererConfig:bl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:W.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Ga(s),s===null?null:s.stateNode},findFiberByHostInstance:bl.findFiberByHostInstance||eS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mu.isDisabled&&Mu.supportsFiber)try{yi=Mu.inject(rS),mn=Mu}catch{}}return hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nS,hn.createPortal=function(s,i){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vf(i))throw Error(t(200));return Zb(s,i,null,l)},hn.createRoot=function(s,i){if(!Vf(s))throw Error(t(299));var l=!1,f="",g=D0;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onRecoverableError!==void 0&&(g=i.onRecoverableError)),i=Rf(s,1,!1,null,null,l,!1,f,g),s[$r]=i.current,al(s.nodeType===8?s.parentNode:s),new Df(i)},hn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=Ga(i),s=s===null?null:s.stateNode,s},hn.flushSync=function(s){return Ri(s)},hn.hydrate=function(s,i,l){if(!Lu(i))throw Error(t(200));return Ou(null,s,i,!0,l)},hn.hydrateRoot=function(s,i,l){if(!Vf(s))throw Error(t(405));var f=l!=null&&l.hydratedSources||null,g=!1,x="",T=D0;if(l!=null&&(l.unstable_strictMode===!0&&(g=!0),l.identifierPrefix!==void 0&&(x=l.identifierPrefix),l.onRecoverableError!==void 0&&(T=l.onRecoverableError)),i=R0(i,null,s,1,l??null,g,!1,x,T),s[$r]=i.current,al(s),f)for(s=0;s<f.length;s++)l=f[s],g=l._getVersion,g=g(l._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[l,g]:i.mutableSourceEagerHydrationData.push(l,g);return new Vu(i)},hn.render=function(s,i,l){if(!Lu(i))throw Error(t(200));return Ou(null,s,i,!1,l)},hn.unmountComponentAtNode=function(s){if(!Lu(s))throw Error(t(40));return s._reactRootContainer?(Ri(function(){Ou(null,null,s,!1,function(){s._reactRootContainer=null,s[$r]=null})}),!0):!1},hn.unstable_batchedUpdates=If,hn.unstable_renderSubtreeIntoContainer=function(s,i,l,f){if(!Lu(l))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Ou(s,i,l,!1,f)},hn.version="18.3.1-next-f1338f8080-20240426",hn}var $0;function Cw(){if($0)return Mf.exports;$0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Mf.exports=fS(),Mf.exports}var q0;function pS(){if(q0)return Uu;q0=1;var n=Cw();return Uu.createRoot=n.createRoot,Uu.hydrateRoot=n.hydrateRoot,Uu}var mS=pS();Cw();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hl(){return Hl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Hl.apply(this,arguments)}var Hs;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Hs||(Hs={}));const G0="popstate";function gS(n){n===void 0&&(n={});function e(r,o){let{pathname:a,search:c,hash:d}=r.location;return mp("",{pathname:a,search:c,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(r,o){return typeof o=="string"?o:ah(o)}return vS(e,t,null,n)}function gt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Rw(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yS(){return Math.random().toString(36).substr(2,8)}function H0(n,e){return{usr:n.state,key:n.key,idx:e}}function mp(n,e,t,r){return t===void 0&&(t=null),Hl({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?ba(e):e,{state:t,key:e&&e.key||r||yS()})}function ah(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ba(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function vS(n,e,t,r){r===void 0&&(r={});let{window:o=document.defaultView,v5Compat:a=!1}=r,c=o.history,d=Hs.Pop,p=null,m=v();m==null&&(m=0,c.replaceState(Hl({},c.state,{idx:m}),""));function v(){return(c.state||{idx:null}).idx}function w(){d=Hs.Pop;let P=v(),D=P==null?null:P-m;m=P,p&&p({action:d,location:V.location,delta:D})}function E(P,D){d=Hs.Push;let O=mp(V.location,P,D);m=v()+1;let j=H0(O,m),W=V.createHref(O);try{c.pushState(j,"",W)}catch(Z){if(Z instanceof DOMException&&Z.name==="DataCloneError")throw Z;o.location.assign(W)}a&&p&&p({action:d,location:V.location,delta:1})}function b(P,D){d=Hs.Replace;let O=mp(V.location,P,D);m=v();let j=H0(O,m),W=V.createHref(O);c.replaceState(j,"",W),a&&p&&p({action:d,location:V.location,delta:0})}function L(P){let D=o.location.origin!=="null"?o.location.origin:o.location.href,O=typeof P=="string"?P:ah(P);return O=O.replace(/ $/,"%20"),gt(D,"No window.location.(origin|href) available to create URL for href: "+O),new URL(O,D)}let V={get action(){return d},get location(){return n(o,c)},listen(P){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(G0,w),p=P,()=>{o.removeEventListener(G0,w),p=null}},createHref(P){return e(o,P)},createURL:L,encodeLocation(P){let D=L(P);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:E,replace:b,go(P){return c.go(P)}};return V}var W0;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(W0||(W0={}));function xS(n,e,t){return t===void 0&&(t="/"),wS(n,e,t)}function wS(n,e,t,r){let o=typeof e=="string"?ba(e):e,a=am(o.pathname||"/",t);if(a==null)return null;let c=jw(n);_S(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let m=jS(a);d=AS(c[p],m)}return d}function jw(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let o=(a,c,d)=>{let p={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};p.relativePath.startsWith("/")&&(gt(p.relativePath.startsWith(r),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(r.length));let m=Ks([r,p.relativePath]),v=t.concat(p);a.children&&a.children.length>0&&(gt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),jw(a.children,e,v,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:PS(m,a.index),routesMeta:v})};return n.forEach((a,c)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))o(a,c);else for(let p of Dw(a.path))o(a,c,p)}),e}function Dw(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,o=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return o?[a,""]:[a];let c=Dw(r.join("/")),d=[];return d.push(...c.map(p=>p===""?a:[a,p].join("/"))),o&&d.push(...c),d.map(p=>n.startsWith("/")&&p===""?"/":p)}function _S(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:kS(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const ES=/^:[\w-]+$/,TS=3,bS=2,SS=1,IS=10,NS=-2,K0=n=>n==="*";function PS(n,e){let t=n.split("/"),r=t.length;return t.some(K0)&&(r+=NS),e&&(r+=bS),t.filter(o=>!K0(o)).reduce((o,a)=>o+(ES.test(a)?TS:a===""?SS:IS),r)}function kS(n,e){return n.length===e.length&&n.slice(0,-1).every((r,o)=>r===e[o])?n[n.length-1]-e[e.length-1]:0}function AS(n,e,t){let{routesMeta:r}=n,o={},a="/",c=[];for(let d=0;d<r.length;++d){let p=r[d],m=d===r.length-1,v=a==="/"?e:e.slice(a.length)||"/",w=CS({path:p.relativePath,caseSensitive:p.caseSensitive,end:m},v),E=p.route;if(!w)return null;Object.assign(o,w.params),c.push({params:o,pathname:Ks([a,w.pathname]),pathnameBase:OS(Ks([a,w.pathnameBase])),route:E}),w.pathnameBase!=="/"&&(a=Ks([a,w.pathnameBase]))}return c}function CS(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=RS(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let a=o[0],c=a.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:r.reduce((m,v,w)=>{let{paramName:E,isOptional:b}=v;if(E==="*"){let V=d[w]||"";c=a.slice(0,a.length-V.length).replace(/(.)\/+$/,"$1")}const L=d[w];return b&&!L?m[E]=void 0:m[E]=(L||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:c,pattern:n}}function RS(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Rw(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(r.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function jS(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Rw(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function am(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function DS(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:o=""}=typeof n=="string"?ba(n):n;return{pathname:t?t.startsWith("/")?t:VS(t,e):e,search:MS(r),hash:US(o)}}function VS(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Bf(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function LS(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function lm(n,e){let t=LS(n);return e?t.map((r,o)=>o===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function cm(n,e,t,r){r===void 0&&(r=!1);let o;typeof n=="string"?o=ba(n):(o=Hl({},n),gt(!o.pathname||!o.pathname.includes("?"),Bf("?","pathname","search",o)),gt(!o.pathname||!o.pathname.includes("#"),Bf("#","pathname","hash",o)),gt(!o.search||!o.search.includes("#"),Bf("#","search","hash",o)));let a=n===""||o.pathname==="",c=a?"/":o.pathname,d;if(c==null)d=t;else{let w=e.length-1;if(!r&&c.startsWith("..")){let E=c.split("/");for(;E[0]==="..";)E.shift(),w-=1;o.pathname=E.join("/")}d=w>=0?e[w]:"/"}let p=DS(o,d),m=c&&c!=="/"&&c.endsWith("/"),v=(a||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(m||v)&&(p.pathname+="/"),p}const Ks=n=>n.join("/").replace(/\/\/+/g,"/"),OS=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),MS=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,US=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function FS(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Vw=["post","put","patch","delete"];new Set(Vw);const BS=["get",...Vw];new Set(BS);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wl(){return Wl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Wl.apply(this,arguments)}const um=k.createContext(null),zS=k.createContext(null),ii=k.createContext(null),Lh=k.createContext(null),fs=k.createContext({outlet:null,matches:[],isDataRoute:!1}),Lw=k.createContext(null);function $S(n,e){let{relative:t}=e===void 0?{}:e;Sa()||gt(!1);let{basename:r,navigator:o}=k.useContext(ii),{hash:a,pathname:c,search:d}=Uw(n,{relative:t}),p=c;return r!=="/"&&(p=c==="/"?r:Ks([r,c])),o.createHref({pathname:p,search:d,hash:a})}function Sa(){return k.useContext(Lh)!=null}function eo(){return Sa()||gt(!1),k.useContext(Lh).location}function Ow(n){k.useContext(ii).static||k.useLayoutEffect(n)}function cr(){let{isDataRoute:n}=k.useContext(fs);return n?nI():qS()}function qS(){Sa()||gt(!1);let n=k.useContext(um),{basename:e,future:t,navigator:r}=k.useContext(ii),{matches:o}=k.useContext(fs),{pathname:a}=eo(),c=JSON.stringify(lm(o,t.v7_relativeSplatPath)),d=k.useRef(!1);return Ow(()=>{d.current=!0}),k.useCallback(function(m,v){if(v===void 0&&(v={}),!d.current)return;if(typeof m=="number"){r.go(m);return}let w=cm(m,JSON.parse(c),a,v.relative==="path");n==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:Ks([e,w.pathname])),(v.replace?r.replace:r.push)(w,v.state,v)},[e,r,c,a,n])}function Mw(){let{matches:n}=k.useContext(fs),e=n[n.length-1];return e?e.params:{}}function Uw(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=k.useContext(ii),{matches:o}=k.useContext(fs),{pathname:a}=eo(),c=JSON.stringify(lm(o,r.v7_relativeSplatPath));return k.useMemo(()=>cm(n,JSON.parse(c),a,t==="path"),[n,c,a,t])}function GS(n,e){return HS(n,e)}function HS(n,e,t,r){Sa()||gt(!1);let{navigator:o}=k.useContext(ii),{matches:a}=k.useContext(fs),c=a[a.length-1],d=c?c.params:{};c&&c.pathname;let p=c?c.pathnameBase:"/";c&&c.route;let m=eo(),v;if(e){var w;let P=typeof e=="string"?ba(e):e;p==="/"||(w=P.pathname)!=null&&w.startsWith(p)||gt(!1),v=P}else v=m;let E=v.pathname||"/",b=E;if(p!=="/"){let P=p.replace(/^\//,"").split("/");b="/"+E.replace(/^\//,"").split("/").slice(P.length).join("/")}let L=xS(n,{pathname:b}),V=XS(L&&L.map(P=>Object.assign({},P,{params:Object.assign({},d,P.params),pathname:Ks([p,o.encodeLocation?o.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?p:Ks([p,o.encodeLocation?o.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),a,t,r);return e&&V?k.createElement(Lh.Provider,{value:{location:Wl({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:Hs.Pop}},V):V}function WS(){let n=tI(),e=FS(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),t?k.createElement("pre",{style:o},t):null,null)}const KS=k.createElement(WS,null);class QS extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?k.createElement(fs.Provider,{value:this.props.routeContext},k.createElement(Lw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function YS(n){let{routeContext:e,match:t,children:r}=n,o=k.useContext(um);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),k.createElement(fs.Provider,{value:e},r)}function XS(n,e,t,r){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let c=n,d=(o=t)==null?void 0:o.errors;if(d!=null){let v=c.findIndex(w=>w.route.id&&d?.[w.route.id]!==void 0);v>=0||gt(!1),c=c.slice(0,Math.min(c.length,v+1))}let p=!1,m=-1;if(t&&r&&r.v7_partialHydration)for(let v=0;v<c.length;v++){let w=c[v];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(m=v),w.route.id){let{loaderData:E,errors:b}=t,L=w.route.loader&&E[w.route.id]===void 0&&(!b||b[w.route.id]===void 0);if(w.route.lazy||L){p=!0,m>=0?c=c.slice(0,m+1):c=[c[0]];break}}}return c.reduceRight((v,w,E)=>{let b,L=!1,V=null,P=null;t&&(b=d&&w.route.id?d[w.route.id]:void 0,V=w.route.errorElement||KS,p&&(m<0&&E===0?(rI("route-fallback"),L=!0,P=null):m===E&&(L=!0,P=w.route.hydrateFallbackElement||null)));let D=e.concat(c.slice(0,E+1)),O=()=>{let j;return b?j=V:L?j=P:w.route.Component?j=k.createElement(w.route.Component,null):w.route.element?j=w.route.element:j=v,k.createElement(YS,{match:w,routeContext:{outlet:v,matches:D,isDataRoute:t!=null},children:j})};return t&&(w.route.ErrorBoundary||w.route.errorElement||E===0)?k.createElement(QS,{location:t.location,revalidation:t.revalidation,component:V,error:b,children:O(),routeContext:{outlet:null,matches:D,isDataRoute:!0}}):O()},null)}var Fw=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(Fw||{}),Bw=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Bw||{});function JS(n){let e=k.useContext(um);return e||gt(!1),e}function ZS(n){let e=k.useContext(zS);return e||gt(!1),e}function eI(n){let e=k.useContext(fs);return e||gt(!1),e}function zw(n){let e=eI(),t=e.matches[e.matches.length-1];return t.route.id||gt(!1),t.route.id}function tI(){var n;let e=k.useContext(Lw),t=ZS(),r=zw();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function nI(){let{router:n}=JS(Fw.UseNavigateStable),e=zw(Bw.UseNavigateStable),t=k.useRef(!1);return Ow(()=>{t.current=!0}),k.useCallback(function(o,a){a===void 0&&(a={}),t.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,Wl({fromRouteId:e},a)))},[n,e])}const Q0={};function rI(n,e,t){Q0[n]||(Q0[n]=!0)}function sI(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function $w(n){let{to:e,replace:t,state:r,relative:o}=n;Sa()||gt(!1);let{future:a,static:c}=k.useContext(ii),{matches:d}=k.useContext(fs),{pathname:p}=eo(),m=cr(),v=cm(e,lm(d,a.v7_relativeSplatPath),p,o==="path"),w=JSON.stringify(v);return k.useEffect(()=>m(JSON.parse(w),{replace:t,state:r,relative:o}),[m,w,o,t,r]),null}function En(n){gt(!1)}function iI(n){let{basename:e="/",children:t=null,location:r,navigationType:o=Hs.Pop,navigator:a,static:c=!1,future:d}=n;Sa()&&gt(!1);let p=e.replace(/^\/*/,"/"),m=k.useMemo(()=>({basename:p,navigator:a,static:c,future:Wl({v7_relativeSplatPath:!1},d)}),[p,d,a,c]);typeof r=="string"&&(r=ba(r));let{pathname:v="/",search:w="",hash:E="",state:b=null,key:L="default"}=r,V=k.useMemo(()=>{let P=am(v,p);return P==null?null:{location:{pathname:P,search:w,hash:E,state:b,key:L},navigationType:o}},[p,v,w,E,b,L,o]);return V==null?null:k.createElement(ii.Provider,{value:m},k.createElement(Lh.Provider,{children:t,value:V}))}function oI(n){let{children:e,location:t}=n;return GS(gp(e),t)}new Promise(()=>{});function gp(n,e){e===void 0&&(e=[]);let t=[];return k.Children.forEach(n,(r,o)=>{if(!k.isValidElement(r))return;let a=[...e,o];if(r.type===k.Fragment){t.push.apply(t,gp(r.props.children,a));return}r.type!==En&&gt(!1),!r.props.index||!r.props.children||gt(!1);let c={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=gp(r.props.children,a)),t.push(c)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yp(){return yp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},yp.apply(this,arguments)}function aI(n,e){if(n==null)return{};var t={},r=Object.keys(n),o,a;for(a=0;a<r.length;a++)o=r[a],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function lI(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function cI(n,e){return n.button===0&&(!e||e==="_self")&&!lI(n)}function vp(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(o=>[t,o]):[[t,r]])},[]))}function uI(n,e){let t=vp(n);return e&&e.forEach((r,o)=>{t.has(o)||e.getAll(o).forEach(a=>{t.append(o,a)})}),t}const hI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],dI="6";try{window.__reactRouterVersion=dI}catch{}const fI="startTransition",Y0=uS[fI];function pI(n){let{basename:e,children:t,future:r,window:o}=n,a=k.useRef();a.current==null&&(a.current=gS({window:o,v5Compat:!0}));let c=a.current,[d,p]=k.useState({action:c.action,location:c.location}),{v7_startTransition:m}=r||{},v=k.useCallback(w=>{m&&Y0?Y0(()=>p(w)):p(w)},[p,m]);return k.useLayoutEffect(()=>c.listen(v),[c,v]),k.useEffect(()=>sI(r),[r]),k.createElement(iI,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:c,future:r})}const mI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,He=k.forwardRef(function(e,t){let{onClick:r,relative:o,reloadDocument:a,replace:c,state:d,target:p,to:m,preventScrollReset:v,viewTransition:w}=e,E=aI(e,hI),{basename:b}=k.useContext(ii),L,V=!1;if(typeof m=="string"&&gI.test(m)&&(L=m,mI))try{let j=new URL(window.location.href),W=m.startsWith("//")?new URL(j.protocol+m):new URL(m),Z=am(W.pathname,b);W.origin===j.origin&&Z!=null?m=Z+W.search+W.hash:V=!0}catch{}let P=$S(m,{relative:o}),D=yI(m,{replace:c,state:d,target:p,preventScrollReset:v,relative:o,viewTransition:w});function O(j){r&&r(j),j.defaultPrevented||D(j)}return k.createElement("a",yp({},E,{href:L||P,onClick:V||a?r:O,ref:t,target:p}))});var X0;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(X0||(X0={}));var J0;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(J0||(J0={}));function yI(n,e){let{target:t,replace:r,state:o,preventScrollReset:a,relative:c,viewTransition:d}=e===void 0?{}:e,p=cr(),m=eo(),v=Uw(n,{relative:c});return k.useCallback(w=>{if(cI(w,t)){w.preventDefault();let E=r!==void 0?r:ah(m)===ah(v);p(n,{replace:E,state:o,preventScrollReset:a,relative:c,viewTransition:d})}},[m,p,v,r,o,t,n,a,c,d])}function vI(n){let e=k.useRef(vp(n)),t=k.useRef(!1),r=eo(),o=k.useMemo(()=>uI(r.search,t.current?null:e.current),[r.search]),a=cr(),c=k.useCallback((d,p)=>{const m=vp(typeof d=="function"?d(o):d);t.current=!0,a("?"+m,p)},[a,o]);return[o,c]}var Z0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let o=n.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},xI=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const o=n[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[r++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],c=n[t++],d=n[t++],p=((o&7)<<18|(a&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const a=n[t++],c=n[t++];e[r++]=String.fromCharCode((o&15)<<12|(a&63)<<6|c&63)}}return e.join("")},Gw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<n.length;o+=3){const a=n[o],c=o+1<n.length,d=c?n[o+1]:0,p=o+2<n.length,m=p?n[o+2]:0,v=a>>2,w=(a&3)<<4|d>>4;let E=(d&15)<<2|m>>6,b=m&63;p||(b=64,c||(E=64)),r.push(t[v],t[w],t[E],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(qw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):xI(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const m=o<n.length?t[n.charAt(o)]:64;++o;const w=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||d==null||m==null||w==null)throw new wI;const E=a<<2|d>>4;if(r.push(E),m!==64){const b=d<<4&240|m>>2;if(r.push(b),w!==64){const L=m<<6&192|w;r.push(L)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class wI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _I=function(n){const e=qw(n);return Gw.encodeByteArray(e,!0)},lh=function(n){return _I(n).replace(/\./g,"")},Hw=function(n){try{return Gw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI=()=>EI().__FIREBASE_DEFAULTS__,bI=()=>{if(typeof process>"u"||typeof Z0>"u")return;const n=Z0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},SI=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Hw(n[1]);return e&&JSON.parse(e)},Oh=()=>{try{return TI()||bI()||SI()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Ww=n=>{var e,t;return(t=(e=Oh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},II=n=>{const e=Ww(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Kw=()=>{var n;return(n=Oh())===null||n===void 0?void 0:n.config},Qw=n=>{var e;return(e=Oh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[lh(JSON.stringify(t)),lh(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xt())}function AI(){var n;const e=(n=Oh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function CI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Yw(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function RI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jI(){const n=Xt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function DI(){return!AI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Xw(){try{return typeof indexedDB=="object"}catch{return!1}}function Jw(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}function VI(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI="FirebaseError";class ur extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=LI,Object.setPrototypeOf(this,ur.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,to.prototype.create)}}class to{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],c=a?OI(a,r):"Error",d=`${this.serviceName}: ${c} (${o}).`;return new ur(o,d,r)}}function OI(n,e){return n.replace(MI,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const MI=/\{\$([^}]+)}/g;function UI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Kl(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const a=n[o],c=e[o];if(ev(a)&&ev(c)){if(!Kl(a,c))return!1}else if(a!==c)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function ev(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Al(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,a]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function Cl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function FI(n,e){const t=new BI(n,e);return t.subscribe.bind(t)}class BI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");zI(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=zf),o.error===void 0&&(o.error=zf),o.complete===void 0&&(o.complete=zf);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zI(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function zf(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I=1e3,qI=2,GI=14400*1e3,HI=.5;function tv(n,e=$I,t=qI){const r=e*Math.pow(t,n),o=Math.round(HI*r*(Math.random()-.5)*2);return Math.min(GI,r+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(n){return n&&n._delegate?n._delegate:n}class ar{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new NI;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(QI(e))try{this.getOrInitializeService({instanceIdentifier:Oi})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});r.resolve(a)}catch{}}}}clearInstance(e=Oi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Oi){return this.instances.has(e)}getOptions(e=Oi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&c.resolve(o)}return o}onInit(e,t){var r;const o=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(o,a);const c=this.instances.get(o);return c&&e(c,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:KI(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Oi){return this.component?this.component.multipleInstances?e:Oi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function KI(n){return n===Oi?void 0:n}function QI(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new WI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})($e||($e={}));const XI={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},JI=$e.INFO,ZI={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},eN=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),o=ZI[e];if(o)console[o](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Mh{constructor(e){this.name=e,this._logLevel=JI,this._logHandler=eN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?XI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}const tN=(n,e)=>e.some(t=>n instanceof t);let nv,rv;function nN(){return nv||(nv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rN(){return rv||(rv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Zw=new WeakMap,xp=new WeakMap,e_=new WeakMap,$f=new WeakMap,hm=new WeakMap;function sN(n){const e=new Promise((t,r)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{t(Qs(n.result)),o()},c=()=>{r(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Zw.set(t,n)}).catch(()=>{}),hm.set(e,n),e}function iN(n){if(xp.has(n))return;const e=new Promise((t,r)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{t(),o()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});xp.set(n,e)}let wp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return xp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||e_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Qs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function oN(n){wp=n(wp)}function aN(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(qf(this),e,...t);return e_.set(r,e.sort?e.sort():[e]),Qs(r)}:rN().includes(n)?function(...e){return n.apply(qf(this),e),Qs(Zw.get(this))}:function(...e){return Qs(n.apply(qf(this),e))}}function lN(n){return typeof n=="function"?aN(n):(n instanceof IDBTransaction&&iN(n),tN(n,nN())?new Proxy(n,wp):n)}function Qs(n){if(n instanceof IDBRequest)return sN(n);if($f.has(n))return $f.get(n);const e=lN(n);return e!==n&&($f.set(n,e),hm.set(e,n)),e}const qf=n=>hm.get(n);function t_(n,e,{blocked:t,upgrade:r,blocking:o,terminated:a}={}){const c=indexedDB.open(n,e),d=Qs(c);return r&&c.addEventListener("upgradeneeded",p=>{r(Qs(c.result),p.oldVersion,p.newVersion,Qs(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{a&&p.addEventListener("close",()=>a()),o&&p.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const cN=["get","getKey","getAll","getAllKeys","count"],uN=["put","add","delete","clear"],Gf=new Map;function sv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Gf.get(e))return Gf.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=uN.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||cN.includes(t)))return;const a=async function(c,...d){const p=this.transaction(c,o?"readwrite":"readonly");let m=p.store;return r&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),o&&p.done]))[0]};return Gf.set(e,a),a}oN(n=>({...n,get:(e,t,r)=>sv(e,t)||n.get(e,t,r),has:(e,t)=>!!sv(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(dN(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function dN(n){const e=n.getComponent();return e?.type==="VERSION"}const _p="@firebase/app",iv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as=new Mh("@firebase/app"),fN="@firebase/app-compat",pN="@firebase/analytics-compat",mN="@firebase/analytics",gN="@firebase/app-check-compat",yN="@firebase/app-check",vN="@firebase/auth",xN="@firebase/auth-compat",wN="@firebase/database",_N="@firebase/data-connect",EN="@firebase/database-compat",TN="@firebase/functions",bN="@firebase/functions-compat",SN="@firebase/installations",IN="@firebase/installations-compat",NN="@firebase/messaging",PN="@firebase/messaging-compat",kN="@firebase/performance",AN="@firebase/performance-compat",CN="@firebase/remote-config",RN="@firebase/remote-config-compat",jN="@firebase/storage",DN="@firebase/storage-compat",VN="@firebase/firestore",LN="@firebase/vertexai-preview",ON="@firebase/firestore-compat",MN="firebase",UN="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep="[DEFAULT]",FN={[_p]:"fire-core",[fN]:"fire-core-compat",[mN]:"fire-analytics",[pN]:"fire-analytics-compat",[yN]:"fire-app-check",[gN]:"fire-app-check-compat",[vN]:"fire-auth",[xN]:"fire-auth-compat",[wN]:"fire-rtdb",[_N]:"fire-data-connect",[EN]:"fire-rtdb-compat",[TN]:"fire-fn",[bN]:"fire-fn-compat",[SN]:"fire-iid",[IN]:"fire-iid-compat",[NN]:"fire-fcm",[PN]:"fire-fcm-compat",[kN]:"fire-perf",[AN]:"fire-perf-compat",[CN]:"fire-rc",[RN]:"fire-rc-compat",[jN]:"fire-gcs",[DN]:"fire-gcs-compat",[VN]:"fire-fst",[ON]:"fire-fst-compat",[LN]:"fire-vertex","fire-js":"fire-js",[MN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch=new Map,BN=new Map,Tp=new Map;function ov(n,e){try{n.container.addComponent(e)}catch(t){as.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function kr(n){const e=n.name;if(Tp.has(e))return as.debug(`There were multiple attempts to register component ${e}.`),!1;Tp.set(e,n);for(const t of ch.values())ov(t,n);for(const t of BN.values())ov(t,n);return!0}function no(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function sr(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ys=new to("app","Firebase",zN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ar("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ys.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia=UN;function n_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ep,automaticDataCollectionEnabled:!1},e),o=r.name;if(typeof o!="string"||!o)throw Ys.create("bad-app-name",{appName:String(o)});if(t||(t=Kw()),!t)throw Ys.create("no-options");const a=ch.get(o);if(a){if(Kl(t,a.options)&&Kl(r,a.config))return a;throw Ys.create("duplicate-app",{appName:o})}const c=new YI(o);for(const p of Tp.values())c.addComponent(p);const d=new $N(t,r,c);return ch.set(o,d),d}function dm(n=Ep){const e=ch.get(n);if(!e&&n===Ep&&Kw())return n_();if(!e)throw Ys.create("no-app",{appName:n});return e}function Un(n,e,t){var r;let o=(r=FN[n])!==null&&r!==void 0?r:n;t&&(o+=`-${t}`);const a=o.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const d=[`Unable to register library "${o}" with version "${e}":`];a&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),as.warn(d.join(" "));return}kr(new ar(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN="firebase-heartbeat-database",GN=1,Ql="firebase-heartbeat-store";let Hf=null;function r_(){return Hf||(Hf=t_(qN,GN,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ql)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ys.create("idb-open",{originalErrorMessage:n.message})})),Hf}async function HN(n){try{const t=(await r_()).transaction(Ql),r=await t.objectStore(Ql).get(s_(n));return await t.done,r}catch(e){if(e instanceof ur)as.warn(e.message);else{const t=Ys.create("idb-get",{originalErrorMessage:e?.message});as.warn(t.message)}}}async function av(n,e){try{const r=(await r_()).transaction(Ql,"readwrite");await r.objectStore(Ql).put(e,s_(n)),await r.done}catch(t){if(t instanceof ur)as.warn(t.message);else{const r=Ys.create("idb-set",{originalErrorMessage:t?.message});as.warn(r.message)}}}function s_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=1024,KN=720*60*60*1e3;class QN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new XN(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=lv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const d=new Date(c.date).valueOf();return Date.now()-d<=KN}),this._storage.overwrite(this._heartbeatsCache))}catch(r){as.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=lv(),{heartbeatsToSend:r,unsentEntries:o}=YN(this._heartbeatsCache.heartbeats),a=lh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return as.warn(t),""}}}function lv(){return new Date().toISOString().substring(0,10)}function YN(n,e=WN){const t=[];let r=n.slice();for(const o of n){const a=t.find(c=>c.agent===o.agent);if(a){if(a.dates.push(o.date),cv(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),cv(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class XN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Xw()?Jw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await HN(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return av(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return av(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function cv(n){return lh(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(n){kr(new ar("platform-logger",e=>new hN(e),"PRIVATE")),kr(new ar("heartbeat",e=>new QN(e),"PRIVATE")),Un(_p,iv,n),Un(_p,iv,"esm2017"),Un("fire-js","")}JN("");function fm(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]]);return t}function i_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ZN=i_,o_=new to("auth","Firebase",i_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh=new Mh("@firebase/auth");function eP(n,...e){uh.logLevel<=$e.WARN&&uh.warn(`Auth (${Ia}): ${n}`,...e)}function Yu(n,...e){uh.logLevel<=$e.ERROR&&uh.error(`Auth (${Ia}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(n,...e){throw pm(n,...e)}function Tr(n,...e){return pm(n,...e)}function a_(n,e,t){const r=Object.assign(Object.assign({},ZN()),{[e]:t});return new to("auth","Firebase",r).create(e,{appName:n.name})}function br(n){return a_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pm(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return o_.create(n,...e)}function Ne(n,e,...t){if(!n)throw pm(e,...t)}function Jr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Yu(e),new Error(e)}function ls(n,e){n||Jr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function tP(){return uv()==="http:"||uv()==="https:"}function uv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tP()||Yw()||"connection"in navigator)?navigator.onLine:!0}function rP(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,t){this.shortDelay=e,this.longDelay=t,ls(t>e,"Short delay should be less than long delay!"),this.isMobile=kI()||RI()}get(){return nP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mm(n,e){ls(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP=new uc(3e4,6e4);function oi(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Rr(n,e,t,r,o={}){return c_(n,o,async()=>{let a={},c={};r&&(e==="GET"?c=r:a={body:JSON.stringify(r)});const d=cc(Object.assign({key:n.config.apiKey},c)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:p},a);return CI()||(m.referrerPolicy="no-referrer"),l_.fetch()(u_(n,n.config.apiHost,t,d),m)})}async function c_(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},sP),e);try{const o=new aP(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw Fu(n,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const d=a.ok?c.errorMessage:c.error.message,[p,m]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fu(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw Fu(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw Fu(n,"user-disabled",c);const v=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw a_(n,v,m);lr(n,v)}}catch(o){if(o instanceof ur)throw o;lr(n,"network-request-failed",{message:String(o)})}}async function hc(n,e,t,r,o={}){const a=await Rr(n,e,t,r,o);return"mfaPendingCredential"in a&&lr(n,"multi-factor-auth-required",{_serverResponse:a}),a}function u_(n,e,t,r){const o=`${e}${t}?${r}`;return n.config.emulator?mm(n.config,o):`${n.config.apiScheme}://${o}`}function oP(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class aP{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Tr(this.auth,"network-request-failed")),iP.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Fu(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=Tr(n,e,r);return o.customData._tokenResponse=t,o}function hv(n){return n!==void 0&&n.enterprise!==void 0}class lP{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return oP(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function cP(n,e){return Rr(n,"GET","/v2/recaptchaConfig",oi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uP(n,e){return Rr(n,"POST","/v1/accounts:delete",e)}async function h_(n,e){return Rr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function hP(n,e=!1){const t=kt(n),r=await t.getIdToken(e),o=gm(r);Ne(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,c=a?.sign_in_provider;return{claims:o,token:r,authTime:Ll(Wf(o.auth_time)),issuedAtTime:Ll(Wf(o.iat)),expirationTime:Ll(Wf(o.exp)),signInProvider:c||null,signInSecondFactor:a?.sign_in_second_factor||null}}function Wf(n){return Number(n)*1e3}function gm(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Yu("JWT malformed, contained fewer than 3 sections"),null;try{const o=Hw(t);return o?JSON.parse(o):(Yu("Failed to decode base64 JWT payload"),null)}catch(o){return Yu("Caught error parsing JWT payload as JSON",o?.toString()),null}}function dv(n){const e=gm(n);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hi(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ur&&dP(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function dP({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ll(this.lastLoginAt),this.creationTime=Ll(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hh(n){var e;const t=n.auth,r=await n.getIdToken(),o=await Hi(n,h_(t,{idToken:r}));Ne(o?.users.length,t,"internal-error");const a=o.users[0];n._notifyReloadListener(a);const c=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?d_(a.providerUserInfo):[],d=mP(n.providerData,c),p=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!d?.length,v=p?m:!1,w={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new Sp(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(n,w)}async function pP(n){const e=kt(n);await hh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mP(n,e){return[...n.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function d_(n){return n.map(e=>{var{providerId:t}=e,r=fm(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gP(n,e){const t=await c_(n,{},async()=>{const r=cc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,c=u_(n,o,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",l_.fetch()(c,{method:"POST",headers:d,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function yP(n,e){return Rr(n,"POST","/v2/accounts:revokeToken",oi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):dv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");const t=dv(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:a}=await gP(e,t);this.updateTokensAndExpiration(r,o,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:a}=t,c=new ua;return r&&(Ne(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),o&&(Ne(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),a&&(Ne(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ua,this.toJSON())}_performRefresh(){return Jr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ms(n,e){Ne(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Zr{constructor(e){var{uid:t,auth:r,stsTokenManager:o}=e,a=fm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Sp(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Hi(this,this.stsTokenManager.getToken(this.auth,e));return Ne(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return hP(this,e)}reload(){return pP(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Zr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await hh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(sr(this.auth.app))return Promise.reject(br(this.auth));const e=await this.getIdToken();return await Hi(this,uP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,o,a,c,d,p,m,v;const w=(r=t.displayName)!==null&&r!==void 0?r:void 0,E=(o=t.email)!==null&&o!==void 0?o:void 0,b=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,L=(c=t.photoURL)!==null&&c!==void 0?c:void 0,V=(d=t.tenantId)!==null&&d!==void 0?d:void 0,P=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,D=(m=t.createdAt)!==null&&m!==void 0?m:void 0,O=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:j,emailVerified:W,isAnonymous:Z,providerData:ae,stsTokenManager:R}=t;Ne(j&&R,e,"internal-error");const I=ua.fromJSON(this.name,R);Ne(typeof j=="string",e,"internal-error"),Ms(w,e.name),Ms(E,e.name),Ne(typeof W=="boolean",e,"internal-error"),Ne(typeof Z=="boolean",e,"internal-error"),Ms(b,e.name),Ms(L,e.name),Ms(V,e.name),Ms(P,e.name),Ms(D,e.name),Ms(O,e.name);const N=new Zr({uid:j,auth:e,email:E,emailVerified:W,displayName:w,isAnonymous:Z,photoURL:L,phoneNumber:b,tenantId:V,stsTokenManager:I,createdAt:D,lastLoginAt:O});return ae&&Array.isArray(ae)&&(N.providerData=ae.map(M=>Object.assign({},M))),P&&(N._redirectEventId=P),N}static async _fromIdTokenResponse(e,t,r=!1){const o=new ua;o.updateFromServerResponse(t);const a=new Zr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await hh(a),a}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];Ne(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?d_(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!a?.length,d=new ua;d.updateFromIdToken(r);const p=new Zr({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:c}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Sp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!a?.length};return Object.assign(p,m),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv=new Map;function es(n){ls(n instanceof Function,"Expected a class definition");let e=fv.get(n);return e?(ls(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,fv.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}f_.type="NONE";const pv=f_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xu(n,e,t){return`firebase:${n}:${e}:${t}`}class ha{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:a}=this.auth;this.fullUserKey=Xu(this.userKey,o.apiKey,a),this.fullPersistenceKey=Xu("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Zr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ha(es(pv),e,r);const o=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=o[0]||es(pv);const c=Xu(r,e.config.apiKey,e.name);let d=null;for(const m of t)try{const v=await m._get(c);if(v){const w=Zr._fromJSON(e,v);m!==a&&(d=w),a=m;break}}catch{}const p=o.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new ha(a,e,r):(a=p[0],d&&await a._set(c,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(c)}catch{}})),new ha(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(y_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(p_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(x_(e))return"Blackberry";if(w_(e))return"Webos";if(m_(e))return"Safari";if((e.includes("chrome/")||g_(e))&&!e.includes("edge/"))return"Chrome";if(v_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function p_(n=Xt()){return/firefox\//i.test(n)}function m_(n=Xt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function g_(n=Xt()){return/crios\//i.test(n)}function y_(n=Xt()){return/iemobile/i.test(n)}function v_(n=Xt()){return/android/i.test(n)}function x_(n=Xt()){return/blackberry/i.test(n)}function w_(n=Xt()){return/webos/i.test(n)}function ym(n=Xt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function vP(n=Xt()){var e;return ym(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function xP(){return jI()&&document.documentMode===10}function __(n=Xt()){return ym(n)||v_(n)||w_(n)||x_(n)||/windows phone/i.test(n)||y_(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(n,e=[]){let t;switch(n){case"Browser":t=mv(Xt());break;case"Worker":t=`${mv(Xt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ia}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((c,d)=>{try{const p=e(a);c(p)}catch(p){d(p)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _P(n,e={}){return Rr(n,"GET","/v2/passwordPolicy",oi(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP=6;class TP{constructor(e){var t,r,o,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:EP,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,o,a,c,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(r=p.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(a=p.containsUppercaseLetter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gv(this),this.idTokenSubscription=new gv(this),this.beforeStateQueue=new wP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=o_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=es(t)),this._initializationPromise=this.queue(async()=>{var r,o;if(!this._deleted&&(this.persistenceManager=await ha.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await h_(this,{idToken:e}),r=await Zr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(sr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let o=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&p?.user&&(o=p.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(c){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await hh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=rP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(sr(this.app))return Promise.reject(br(this));const t=e?kt(e):null;return t&&Ne(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return sr(this.app)?Promise.reject(br(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return sr(this.app)?Promise.reject(br(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(es(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _P(this),t=new TP(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new to("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await yP(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&es(e)||this._popupRedirectResolver;Ne(t,this,"argument-error"),this.redirectPersistenceManager=await ha.create(this,[es(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(d,this,"internal-error"),d.then(()=>{c||a(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,r,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=E_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&eP(`Error while retrieving App Check token: ${t.error}`),t?.token}}function ro(n){return kt(n)}class gv{constructor(e){this.auth=e,this.observer=null,this.addObserver=FI(t=>this.observer=t)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function SP(n){Uh=n}function T_(n){return Uh.loadJS(n)}function IP(){return Uh.recaptchaEnterpriseScript}function NP(){return Uh.gapiScript}function PP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const kP="recaptcha-enterprise",AP="NO_RECAPTCHA";class CP{constructor(e){this.type=kP,this.auth=ro(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,d)=>{cP(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new lP(p);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,c(m.siteKey)}}).catch(p=>{d(p)})})}function o(a,c,d){const p=window.grecaptcha;hv(p)?p.enterprise.ready(()=>{p.enterprise.execute(a,{action:e}).then(m=>{c(m)}).catch(()=>{c(AP)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,c)=>{r(this.auth).then(d=>{if(!t&&hv(window.grecaptcha))o(d,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=IP();p.length!==0&&(p+=d),T_(p).then(()=>{o(d,a,c)}).catch(m=>{c(m)})}}).catch(d=>{c(d)})})}}async function yv(n,e,t,r=!1){const o=new CP(n);let a;try{a=await o.verify(t)}catch{a=await o.verify(t,!0)}const c=Object.assign({},e);return r?Object.assign(c,{captchaResp:a}):Object.assign(c,{captchaResponse:a}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Ip(n,e,t,r){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await yv(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await yv(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RP(n,e){const t=no(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(Kl(a,e??{}))return o;lr(o,"already-initialized")}return t.initialize({options:e})}function jP(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(es);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function DP(n,e,t){const r=ro(n);Ne(r._canInitEmulator,r,"emulator-config-failed"),Ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,a=b_(e),{host:c,port:d}=VP(e),p=d===null?"":`:${d}`;r.config.emulator={url:`${a}//${c}${p}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:c,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})}),LP()}function b_(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function VP(n){const e=b_(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const a=o[1];return{host:a,port:vv(r.substr(a.length+1))}}else{const[a,c]=r.split(":");return{host:a,port:vv(c)}}}function vv(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function LP(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Jr("not implemented")}_getIdTokenResponse(e){return Jr("not implemented")}_linkToIdToken(e,t){return Jr("not implemented")}_getReauthenticationResolver(e){return Jr("not implemented")}}async function OP(n,e){return Rr(n,"POST","/v1/accounts:update",e)}async function MP(n,e){return Rr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UP(n,e){return hc(n,"POST","/v1/accounts:signInWithPassword",oi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FP(n,e){return hc(n,"POST","/v1/accounts:signInWithEmailLink",oi(n,e))}async function BP(n,e){return hc(n,"POST","/v1/accounts:signInWithEmailLink",oi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl extends vm{constructor(e,t,r,o=null){super("password",r),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Yl(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Yl(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ip(e,t,"signInWithPassword",UP);case"emailLink":return FP(e,{email:this._email,oobCode:this._password});default:lr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ip(e,r,"signUpPassword",MP);case"emailLink":return BP(e,{idToken:t,email:this._email,oobCode:this._password});default:lr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function da(n,e){return hc(n,"POST","/v1/accounts:signInWithIdp",oi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP="http://localhost";class Wi extends vm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Wi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):lr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o}=t,a=fm(t,["providerId","signInMethod"]);if(!r||!o)return null;const c=new Wi(r,o);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return da(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,da(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,da(e,t)}buildRequest(){const e={requestUri:zP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=cc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function qP(n){const e=Al(Cl(n)).link,t=e?Al(Cl(e)).deep_link_id:null,r=Al(Cl(n)).deep_link_id;return(r?Al(Cl(r)).link:null)||r||t||e||n}class xm{constructor(e){var t,r,o,a,c,d;const p=Al(Cl(e)),m=(t=p.apiKey)!==null&&t!==void 0?t:null,v=(r=p.oobCode)!==null&&r!==void 0?r:null,w=$P((o=p.mode)!==null&&o!==void 0?o:null);Ne(m&&v&&w,"argument-error"),this.apiKey=m,this.operation=w,this.code=v,this.continueUrl=(a=p.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(c=p.languageCode)!==null&&c!==void 0?c:null,this.tenantId=(d=p.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=qP(e);try{return new xm(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(){this.providerId=Zs.PROVIDER_ID}static credential(e,t){return Yl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=xm.parseLink(t);return Ne(r,"argument-error"),Yl._fromEmailAndCode(e,r.code,r.tenantId)}}Zs.PROVIDER_ID="password";Zs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Zs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc extends S_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends dc{constructor(){super("facebook.com")}static credential(e){return Wi._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bs.credential(e.oauthAccessToken)}catch{return null}}}Bs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Bs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs extends dc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Wi._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return zs.credentialFromTaggedObject(e)}static credentialFromError(e){return zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return zs.credential(t,r)}catch{return null}}}zs.GOOGLE_SIGN_IN_METHOD="google.com";zs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s extends dc{constructor(){super("github.com")}static credential(e){return Wi._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $s.credentialFromTaggedObject(e)}static credentialFromError(e){return $s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $s.credential(e.oauthAccessToken)}catch{return null}}}$s.GITHUB_SIGN_IN_METHOD="github.com";$s.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs extends dc{constructor(){super("twitter.com")}static credential(e,t){return Wi._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return qs.credentialFromTaggedObject(e)}static credentialFromError(e){return qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return qs.credential(t,r)}catch{return null}}}qs.TWITTER_SIGN_IN_METHOD="twitter.com";qs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GP(n,e){return hc(n,"POST","/v1/accounts:signUp",oi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const a=await Zr._fromIdTokenResponse(e,r,o),c=xv(r);return new Ki({user:a,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=xv(r);return new Ki({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function xv(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh extends ur{constructor(e,t,r,o){var a;super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,dh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new dh(e,t,r,o)}}function I_(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?dh._fromErrorAndOperation(n,a,e,r):a})}async function HP(n,e,t=!1){const r=await Hi(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ki._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N_(n,e,t=!1){const{auth:r}=n;if(sr(r.app))return Promise.reject(br(r));const o="reauthenticate";try{const a=await Hi(n,I_(r,o,e,n),t);Ne(a.idToken,r,"internal-error");const c=gm(a.idToken);Ne(c,r,"internal-error");const{sub:d}=c;return Ne(n.uid===d,r,"user-mismatch"),Ki._forOperation(n,o,a)}catch(a){throw a?.code==="auth/user-not-found"&&lr(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P_(n,e,t=!1){if(sr(n.app))return Promise.reject(br(n));const r="signIn",o=await I_(n,r,e),a=await Ki._fromIdTokenResponse(n,r,o);return t||await n._updateCurrentUser(a.user),a}async function WP(n,e){return P_(ro(n),e)}async function wv(n,e){return N_(kt(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k_(n){const e=ro(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function KP(n,e,t){if(sr(n.app))return Promise.reject(br(n));const r=ro(n),c=await Ip(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",GP).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&k_(n),p}),d=await Ki._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(d.user),d}function QP(n,e,t){return sr(n.app)?Promise.reject(br(n)):WP(kt(n),Zs.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&k_(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YP(n,e){return Rr(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Np(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=kt(n),a={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await Hi(r,YP(r.auth,a));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const d=r.providerData.find(({providerId:p})=>p==="password");d&&(d.displayName=r.displayName,d.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function XP(n,e){const t=kt(n);return sr(t.auth.app)?Promise.reject(br(t.auth)):A_(t,e,null)}function JP(n,e){return A_(kt(n),null,e)}async function A_(n,e,t){const{auth:r}=n,a={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(a.email=e),t&&(a.password=t);const c=await Hi(n,OP(r,a));await n._updateTokensIfNecessary(c,!0)}function ZP(n,e,t,r){return kt(n).onIdTokenChanged(e,t,r)}function ek(n,e,t){return kt(n).beforeAuthStateChanged(e,t)}function tk(n,e,t,r){return kt(n).onAuthStateChanged(e,t,r)}function nk(n){return kt(n).signOut()}const fh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(fh,"1"),this.storage.removeItem(fh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk=1e3,sk=10;class R_ extends C_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=__(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);xP()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,sk):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},rk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}R_.type="LOCAL";const ik=R_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_ extends C_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}j_.type="SESSION";const D_=j_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new Fh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:a}=t.data,c=this.handlersMap[o];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const d=Array.from(c).map(async m=>m(t.origin,a)),p=await ok(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,c;return new Promise((d,p)=>{const m=wm("",20);o.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},r);c={messageChannel:o,onMessage(w){const E=w;if(E.data.eventId===m)switch(E.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(E.data.response);break;default:clearTimeout(v),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(){return window}function lk(n){Sr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(){return typeof Sr().WorkerGlobalScope<"u"&&typeof Sr().importScripts=="function"}async function ck(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function uk(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function hk(){return V_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_="firebaseLocalStorageDb",dk=1,ph="firebaseLocalStorage",O_="fbase_key";class fc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Bh(n,e){return n.transaction([ph],e?"readwrite":"readonly").objectStore(ph)}function fk(){const n=indexedDB.deleteDatabase(L_);return new fc(n).toPromise()}function Pp(){const n=indexedDB.open(L_,dk);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(ph,{keyPath:O_})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(ph)?e(r):(r.close(),await fk(),e(await Pp()))})})}async function _v(n,e,t){const r=Bh(n,!0).put({[O_]:e,value:t});return new fc(r).toPromise()}async function pk(n,e){const t=Bh(n,!1).get(e),r=await new fc(t).toPromise();return r===void 0?null:r.value}function Ev(n,e){const t=Bh(n,!0).delete(e);return new fc(t).toPromise()}const mk=800,gk=3;class M_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>gk)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return V_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fh._getInstance(hk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await ck(),!this.activeServiceWorker)return;this.sender=new ak(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||uk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pp();return await _v(e,fh,"1"),await Ev(e,fh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>_v(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>pk(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ev(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=Bh(o,!1).getAll();return new fc(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),mk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}M_.type="LOCAL";const yk=M_;new uc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vk(n,e){return e?es(e):(Ne(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m extends vm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return da(e,this._buildIdpRequest())}_linkToIdToken(e,t){return da(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return da(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function xk(n){return P_(n.auth,new _m(n),n.bypassAuthState)}function wk(n){const{auth:e,user:t}=n;return Ne(t,e,"internal-error"),N_(t,new _m(n),n.bypassAuthState)}async function _k(n){const{auth:e,user:t}=n;return Ne(t,e,"internal-error"),HP(t,new _m(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e,t,r,o,a=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:a,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xk;case"linkViaPopup":case"linkViaRedirect":return _k;case"reauthViaPopup":case"reauthViaRedirect":return wk;default:lr(this.auth,"internal-error")}}resolve(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek=new uc(2e3,1e4);class ra extends U_{constructor(e,t,r,o,a){super(e,t,o,a),this.provider=r,this.authWindow=null,this.pollId=null,ra.currentPopupAction&&ra.currentPopupAction.cancel(),ra.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ne(e,this.auth,"internal-error"),e}async onExecution(){ls(this.filter.length===1,"Popup operations only handle one event");const e=wm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Tr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Tr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ra.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Tr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Ek.get())};e()}}ra.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk="pendingRedirect",Ju=new Map;class bk extends U_{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Ju.get(this.auth._key());if(!e){try{const r=await Sk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Ju.set(this.auth._key(),e)}return this.bypassAuthState||Ju.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Sk(n,e){const t=Pk(e),r=Nk(n);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function Ik(n,e){Ju.set(n._key(),e)}function Nk(n){return es(n._redirectPersistence)}function Pk(n){return Xu(Tk,n.config.apiKey,n.name)}async function kk(n,e,t=!1){if(sr(n.app))return Promise.reject(br(n));const r=ro(n),o=vk(r,e),c=await new bk(r,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak=600*1e3;class Ck{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Rk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!F_(e)){const o=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Tr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Ak&&this.cachedEventUids.clear(),this.cachedEventUids.has(Tv(e))}saveEventToCache(e){this.cachedEventUids.add(Tv(e)),this.lastProcessedEventTime=Date.now()}}function Tv(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function F_({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Rk(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return F_(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jk(n,e={}){return Rr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Vk=/^https?/;async function Lk(n){if(n.config.emulator)return;const{authorizedDomains:e}=await jk(n);for(const t of e)try{if(Ok(t))return}catch{}lr(n,"unauthorized-domain")}function Ok(n){const e=bp(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!Vk.test(t))return!1;if(Dk.test(n))return r===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk=new uc(3e4,6e4);function bv(){const n=Sr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Uk(n){return new Promise((e,t)=>{var r,o,a;function c(){bv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{bv(),t(Tr(n,"network-request-failed"))},timeout:Mk.get()})}if(!((o=(r=Sr().gapi)===null||r===void 0?void 0:r.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((a=Sr().gapi)===null||a===void 0)&&a.load)c();else{const d=PP("iframefcb");return Sr()[d]=()=>{gapi.load?c():t(Tr(n,"network-request-failed"))},T_(`${NP()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw Zu=null,e})}let Zu=null;function Fk(n){return Zu=Zu||Uk(n),Zu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk=new uc(5e3,15e3),zk="__/auth/iframe",$k="emulator/auth/iframe",qk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Gk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Hk(n){const e=n.config;Ne(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?mm(e,$k):`https://${n.config.authDomain}/${zk}`,r={apiKey:e.apiKey,appName:n.name,v:Ia},o=Gk.get(n.config.apiHost);o&&(r.eid=o);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${cc(r).slice(1)}`}async function Wk(n){const e=await Fk(n),t=Sr().gapi;return Ne(t,n,"internal-error"),e.open({where:document.body,url:Hk(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qk,dontclear:!0},r=>new Promise(async(o,a)=>{await r.restyle({setHideOnLeave:!1});const c=Tr(n,"network-request-failed"),d=Sr().setTimeout(()=>{a(c)},Bk.get());function p(){Sr().clearTimeout(d),o(r)}r.ping(p).then(p,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Qk=500,Yk=600,Xk="_blank",Jk="http://localhost";class Sv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Zk(n,e,t,r=Qk,o=Yk){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const p=Object.assign(Object.assign({},Kk),{width:r.toString(),height:o.toString(),top:a,left:c}),m=Xt().toLowerCase();t&&(d=g_(m)?Xk:t),p_(m)&&(e=e||Jk,p.scrollbars="yes");const v=Object.entries(p).reduce((E,[b,L])=>`${E}${b}=${L},`,"");if(vP(m)&&d!=="_self")return eA(e||"",d),new Sv(null);const w=window.open(e||"",d,v);Ne(w,n,"popup-blocked");try{w.focus()}catch{}return new Sv(w)}function eA(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="__/auth/handler",nA="emulator/auth/handler",rA=encodeURIComponent("fac");async function Iv(n,e,t,r,o,a){Ne(n.config.authDomain,n,"auth-domain-config-required"),Ne(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ia,eventId:o};if(e instanceof S_){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",UI(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,w]of Object.entries({}))c[v]=w}if(e instanceof dc){const v=e.getScopes().filter(w=>w!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const p=await n._getAppCheckToken(),m=p?`#${rA}=${encodeURIComponent(p)}`:"";return`${sA(n)}?${cc(d).slice(1)}${m}`}function sA({config:n}){return n.emulator?mm(n,nA):`https://${n.authDomain}/${tA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf="webStorageSupport";class iA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=D_,this._completeRedirectFn=kk,this._overrideRedirectResult=Ik}async _openPopup(e,t,r,o){var a;ls((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=await Iv(e,t,r,bp(),o);return Zk(e,c,wm())}async _openRedirect(e,t,r,o){await this._originValidation(e);const a=await Iv(e,t,r,bp(),o);return lk(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(ls(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Wk(e),r=new Ck(e);return t.register("authEvent",o=>(Ne(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Kf,{type:Kf},o=>{var a;const c=(a=o?.[0])===null||a===void 0?void 0:a[Kf];c!==void 0&&t(!!c),lr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Lk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return __()||m_()||ym()}}const oA=iA;var Nv="@firebase/auth",Pv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lA(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cA(n){kr(new ar("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;Ne(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:E_(n)},m=new bP(r,o,a,p);return jP(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),kr(new ar("auth-internal",e=>{const t=ro(e.getProvider("auth").getImmediate());return(r=>new aA(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Un(Nv,Pv,lA(n)),Un(Nv,Pv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA=300,hA=Qw("authIdTokenMaxAge")||uA;let kv=null;const dA=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>hA)return;const o=t?.token;kv!==o&&(kv=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function fA(n=dm()){const e=no(n,"auth");if(e.isInitialized())return e.getImmediate();const t=RP(n,{popupRedirectResolver:oA,persistence:[yk,ik,D_]}),r=Qw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const c=dA(a.toString());ek(t,c,()=>c(t.currentUser)),ZP(t,d=>c(d))}}const o=Ww("auth");return o&&DP(t,`http://${o}`),t}function pA(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}SP({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=o=>{const a=Tr("internal-error");a.customData=o,t(a)},r.type="text/javascript",r.charset="UTF-8",pA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cA("Browser");var Av=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qi,B_;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,I){function N(){}N.prototype=I.prototype,R.D=I.prototype,R.prototype=new N,R.prototype.constructor=R,R.C=function(M,B,$){for(var A=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)A[_e-2]=arguments[_e];return I.prototype[B].apply(M,A)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,I,N){N||(N=0);var M=Array(16);if(typeof I=="string")for(var B=0;16>B;++B)M[B]=I.charCodeAt(N++)|I.charCodeAt(N++)<<8|I.charCodeAt(N++)<<16|I.charCodeAt(N++)<<24;else for(B=0;16>B;++B)M[B]=I[N++]|I[N++]<<8|I[N++]<<16|I[N++]<<24;I=R.g[0],N=R.g[1],B=R.g[2];var $=R.g[3],A=I+($^N&(B^$))+M[0]+3614090360&4294967295;I=N+(A<<7&4294967295|A>>>25),A=$+(B^I&(N^B))+M[1]+3905402710&4294967295,$=I+(A<<12&4294967295|A>>>20),A=B+(N^$&(I^N))+M[2]+606105819&4294967295,B=$+(A<<17&4294967295|A>>>15),A=N+(I^B&($^I))+M[3]+3250441966&4294967295,N=B+(A<<22&4294967295|A>>>10),A=I+($^N&(B^$))+M[4]+4118548399&4294967295,I=N+(A<<7&4294967295|A>>>25),A=$+(B^I&(N^B))+M[5]+1200080426&4294967295,$=I+(A<<12&4294967295|A>>>20),A=B+(N^$&(I^N))+M[6]+2821735955&4294967295,B=$+(A<<17&4294967295|A>>>15),A=N+(I^B&($^I))+M[7]+4249261313&4294967295,N=B+(A<<22&4294967295|A>>>10),A=I+($^N&(B^$))+M[8]+1770035416&4294967295,I=N+(A<<7&4294967295|A>>>25),A=$+(B^I&(N^B))+M[9]+2336552879&4294967295,$=I+(A<<12&4294967295|A>>>20),A=B+(N^$&(I^N))+M[10]+4294925233&4294967295,B=$+(A<<17&4294967295|A>>>15),A=N+(I^B&($^I))+M[11]+2304563134&4294967295,N=B+(A<<22&4294967295|A>>>10),A=I+($^N&(B^$))+M[12]+1804603682&4294967295,I=N+(A<<7&4294967295|A>>>25),A=$+(B^I&(N^B))+M[13]+4254626195&4294967295,$=I+(A<<12&4294967295|A>>>20),A=B+(N^$&(I^N))+M[14]+2792965006&4294967295,B=$+(A<<17&4294967295|A>>>15),A=N+(I^B&($^I))+M[15]+1236535329&4294967295,N=B+(A<<22&4294967295|A>>>10),A=I+(B^$&(N^B))+M[1]+4129170786&4294967295,I=N+(A<<5&4294967295|A>>>27),A=$+(N^B&(I^N))+M[6]+3225465664&4294967295,$=I+(A<<9&4294967295|A>>>23),A=B+(I^N&($^I))+M[11]+643717713&4294967295,B=$+(A<<14&4294967295|A>>>18),A=N+($^I&(B^$))+M[0]+3921069994&4294967295,N=B+(A<<20&4294967295|A>>>12),A=I+(B^$&(N^B))+M[5]+3593408605&4294967295,I=N+(A<<5&4294967295|A>>>27),A=$+(N^B&(I^N))+M[10]+38016083&4294967295,$=I+(A<<9&4294967295|A>>>23),A=B+(I^N&($^I))+M[15]+3634488961&4294967295,B=$+(A<<14&4294967295|A>>>18),A=N+($^I&(B^$))+M[4]+3889429448&4294967295,N=B+(A<<20&4294967295|A>>>12),A=I+(B^$&(N^B))+M[9]+568446438&4294967295,I=N+(A<<5&4294967295|A>>>27),A=$+(N^B&(I^N))+M[14]+3275163606&4294967295,$=I+(A<<9&4294967295|A>>>23),A=B+(I^N&($^I))+M[3]+4107603335&4294967295,B=$+(A<<14&4294967295|A>>>18),A=N+($^I&(B^$))+M[8]+1163531501&4294967295,N=B+(A<<20&4294967295|A>>>12),A=I+(B^$&(N^B))+M[13]+2850285829&4294967295,I=N+(A<<5&4294967295|A>>>27),A=$+(N^B&(I^N))+M[2]+4243563512&4294967295,$=I+(A<<9&4294967295|A>>>23),A=B+(I^N&($^I))+M[7]+1735328473&4294967295,B=$+(A<<14&4294967295|A>>>18),A=N+($^I&(B^$))+M[12]+2368359562&4294967295,N=B+(A<<20&4294967295|A>>>12),A=I+(N^B^$)+M[5]+4294588738&4294967295,I=N+(A<<4&4294967295|A>>>28),A=$+(I^N^B)+M[8]+2272392833&4294967295,$=I+(A<<11&4294967295|A>>>21),A=B+($^I^N)+M[11]+1839030562&4294967295,B=$+(A<<16&4294967295|A>>>16),A=N+(B^$^I)+M[14]+4259657740&4294967295,N=B+(A<<23&4294967295|A>>>9),A=I+(N^B^$)+M[1]+2763975236&4294967295,I=N+(A<<4&4294967295|A>>>28),A=$+(I^N^B)+M[4]+1272893353&4294967295,$=I+(A<<11&4294967295|A>>>21),A=B+($^I^N)+M[7]+4139469664&4294967295,B=$+(A<<16&4294967295|A>>>16),A=N+(B^$^I)+M[10]+3200236656&4294967295,N=B+(A<<23&4294967295|A>>>9),A=I+(N^B^$)+M[13]+681279174&4294967295,I=N+(A<<4&4294967295|A>>>28),A=$+(I^N^B)+M[0]+3936430074&4294967295,$=I+(A<<11&4294967295|A>>>21),A=B+($^I^N)+M[3]+3572445317&4294967295,B=$+(A<<16&4294967295|A>>>16),A=N+(B^$^I)+M[6]+76029189&4294967295,N=B+(A<<23&4294967295|A>>>9),A=I+(N^B^$)+M[9]+3654602809&4294967295,I=N+(A<<4&4294967295|A>>>28),A=$+(I^N^B)+M[12]+3873151461&4294967295,$=I+(A<<11&4294967295|A>>>21),A=B+($^I^N)+M[15]+530742520&4294967295,B=$+(A<<16&4294967295|A>>>16),A=N+(B^$^I)+M[2]+3299628645&4294967295,N=B+(A<<23&4294967295|A>>>9),A=I+(B^(N|~$))+M[0]+4096336452&4294967295,I=N+(A<<6&4294967295|A>>>26),A=$+(N^(I|~B))+M[7]+1126891415&4294967295,$=I+(A<<10&4294967295|A>>>22),A=B+(I^($|~N))+M[14]+2878612391&4294967295,B=$+(A<<15&4294967295|A>>>17),A=N+($^(B|~I))+M[5]+4237533241&4294967295,N=B+(A<<21&4294967295|A>>>11),A=I+(B^(N|~$))+M[12]+1700485571&4294967295,I=N+(A<<6&4294967295|A>>>26),A=$+(N^(I|~B))+M[3]+2399980690&4294967295,$=I+(A<<10&4294967295|A>>>22),A=B+(I^($|~N))+M[10]+4293915773&4294967295,B=$+(A<<15&4294967295|A>>>17),A=N+($^(B|~I))+M[1]+2240044497&4294967295,N=B+(A<<21&4294967295|A>>>11),A=I+(B^(N|~$))+M[8]+1873313359&4294967295,I=N+(A<<6&4294967295|A>>>26),A=$+(N^(I|~B))+M[15]+4264355552&4294967295,$=I+(A<<10&4294967295|A>>>22),A=B+(I^($|~N))+M[6]+2734768916&4294967295,B=$+(A<<15&4294967295|A>>>17),A=N+($^(B|~I))+M[13]+1309151649&4294967295,N=B+(A<<21&4294967295|A>>>11),A=I+(B^(N|~$))+M[4]+4149444226&4294967295,I=N+(A<<6&4294967295|A>>>26),A=$+(N^(I|~B))+M[11]+3174756917&4294967295,$=I+(A<<10&4294967295|A>>>22),A=B+(I^($|~N))+M[2]+718787259&4294967295,B=$+(A<<15&4294967295|A>>>17),A=N+($^(B|~I))+M[9]+3951481745&4294967295,R.g[0]=R.g[0]+I&4294967295,R.g[1]=R.g[1]+(B+(A<<21&4294967295|A>>>11))&4294967295,R.g[2]=R.g[2]+B&4294967295,R.g[3]=R.g[3]+$&4294967295}r.prototype.u=function(R,I){I===void 0&&(I=R.length);for(var N=I-this.blockSize,M=this.B,B=this.h,$=0;$<I;){if(B==0)for(;$<=N;)o(this,R,$),$+=this.blockSize;if(typeof R=="string"){for(;$<I;)if(M[B++]=R.charCodeAt($++),B==this.blockSize){o(this,M),B=0;break}}else for(;$<I;)if(M[B++]=R[$++],B==this.blockSize){o(this,M),B=0;break}}this.h=B,this.o+=I},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var I=1;I<R.length-8;++I)R[I]=0;var N=8*this.o;for(I=R.length-8;I<R.length;++I)R[I]=N&255,N/=256;for(this.u(R),R=Array(16),I=N=0;4>I;++I)for(var M=0;32>M;M+=8)R[N++]=this.g[I]>>>M&255;return R};function a(R,I){var N=d;return Object.prototype.hasOwnProperty.call(N,R)?N[R]:N[R]=I(R)}function c(R,I){this.h=I;for(var N=[],M=!0,B=R.length-1;0<=B;B--){var $=R[B]|0;M&&$==I||(N[B]=$,M=!1)}this.g=N}var d={};function p(R){return-128<=R&&128>R?a(R,function(I){return new c([I|0],0>I?-1:0)}):new c([R|0],0>R?-1:0)}function m(R){if(isNaN(R)||!isFinite(R))return w;if(0>R)return P(m(-R));for(var I=[],N=1,M=0;R>=N;M++)I[M]=R/N|0,N*=4294967296;return new c(I,0)}function v(R,I){if(R.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(R.charAt(0)=="-")return P(v(R.substring(1),I));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=m(Math.pow(I,8)),M=w,B=0;B<R.length;B+=8){var $=Math.min(8,R.length-B),A=parseInt(R.substring(B,B+$),I);8>$?($=m(Math.pow(I,$)),M=M.j($).add(m(A))):(M=M.j(N),M=M.add(m(A)))}return M}var w=p(0),E=p(1),b=p(16777216);n=c.prototype,n.m=function(){if(V(this))return-P(this).m();for(var R=0,I=1,N=0;N<this.g.length;N++){var M=this.i(N);R+=(0<=M?M:4294967296+M)*I,I*=4294967296}return R},n.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(L(this))return"0";if(V(this))return"-"+P(this).toString(R);for(var I=m(Math.pow(R,6)),N=this,M="";;){var B=W(N,I).g;N=D(N,B.j(I));var $=((0<N.g.length?N.g[0]:N.h)>>>0).toString(R);if(N=B,L(N))return $+M;for(;6>$.length;)$="0"+$;M=$+M}},n.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function L(R){if(R.h!=0)return!1;for(var I=0;I<R.g.length;I++)if(R.g[I]!=0)return!1;return!0}function V(R){return R.h==-1}n.l=function(R){return R=D(this,R),V(R)?-1:L(R)?0:1};function P(R){for(var I=R.g.length,N=[],M=0;M<I;M++)N[M]=~R.g[M];return new c(N,~R.h).add(E)}n.abs=function(){return V(this)?P(this):this},n.add=function(R){for(var I=Math.max(this.g.length,R.g.length),N=[],M=0,B=0;B<=I;B++){var $=M+(this.i(B)&65535)+(R.i(B)&65535),A=($>>>16)+(this.i(B)>>>16)+(R.i(B)>>>16);M=A>>>16,$&=65535,A&=65535,N[B]=A<<16|$}return new c(N,N[N.length-1]&-2147483648?-1:0)};function D(R,I){return R.add(P(I))}n.j=function(R){if(L(this)||L(R))return w;if(V(this))return V(R)?P(this).j(P(R)):P(P(this).j(R));if(V(R))return P(this.j(P(R)));if(0>this.l(b)&&0>R.l(b))return m(this.m()*R.m());for(var I=this.g.length+R.g.length,N=[],M=0;M<2*I;M++)N[M]=0;for(M=0;M<this.g.length;M++)for(var B=0;B<R.g.length;B++){var $=this.i(M)>>>16,A=this.i(M)&65535,_e=R.i(B)>>>16,Ue=R.i(B)&65535;N[2*M+2*B]+=A*Ue,O(N,2*M+2*B),N[2*M+2*B+1]+=$*Ue,O(N,2*M+2*B+1),N[2*M+2*B+1]+=A*_e,O(N,2*M+2*B+1),N[2*M+2*B+2]+=$*_e,O(N,2*M+2*B+2)}for(M=0;M<I;M++)N[M]=N[2*M+1]<<16|N[2*M];for(M=I;M<2*I;M++)N[M]=0;return new c(N,0)};function O(R,I){for(;(R[I]&65535)!=R[I];)R[I+1]+=R[I]>>>16,R[I]&=65535,I++}function j(R,I){this.g=R,this.h=I}function W(R,I){if(L(I))throw Error("division by zero");if(L(R))return new j(w,w);if(V(R))return I=W(P(R),I),new j(P(I.g),P(I.h));if(V(I))return I=W(R,P(I)),new j(P(I.g),I.h);if(30<R.g.length){if(V(R)||V(I))throw Error("slowDivide_ only works with positive integers.");for(var N=E,M=I;0>=M.l(R);)N=Z(N),M=Z(M);var B=ae(N,1),$=ae(M,1);for(M=ae(M,2),N=ae(N,2);!L(M);){var A=$.add(M);0>=A.l(R)&&(B=B.add(N),$=A),M=ae(M,1),N=ae(N,1)}return I=D(R,B.j(I)),new j(B,I)}for(B=w;0<=R.l(I);){for(N=Math.max(1,Math.floor(R.m()/I.m())),M=Math.ceil(Math.log(N)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),$=m(N),A=$.j(I);V(A)||0<A.l(R);)N-=M,$=m(N),A=$.j(I);L($)&&($=E),B=B.add($),R=D(R,A)}return new j(B,R)}n.A=function(R){return W(this,R).h},n.and=function(R){for(var I=Math.max(this.g.length,R.g.length),N=[],M=0;M<I;M++)N[M]=this.i(M)&R.i(M);return new c(N,this.h&R.h)},n.or=function(R){for(var I=Math.max(this.g.length,R.g.length),N=[],M=0;M<I;M++)N[M]=this.i(M)|R.i(M);return new c(N,this.h|R.h)},n.xor=function(R){for(var I=Math.max(this.g.length,R.g.length),N=[],M=0;M<I;M++)N[M]=this.i(M)^R.i(M);return new c(N,this.h^R.h)};function Z(R){for(var I=R.g.length+1,N=[],M=0;M<I;M++)N[M]=R.i(M)<<1|R.i(M-1)>>>31;return new c(N,R.h)}function ae(R,I){var N=I>>5;I%=32;for(var M=R.g.length-N,B=[],$=0;$<M;$++)B[$]=0<I?R.i($+N)>>>I|R.i($+N+1)<<32-I:R.i($+N);return new c(B,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,B_=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=v,qi=c}).apply(typeof Av<"u"?Av:typeof self<"u"?self:typeof window<"u"?window:{});var Bu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var z_,Rl,$_,eh,kp,q_,G_,H_;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,y,_){return h==Array.prototype||h==Object.prototype||(h[y]=_.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bu=="object"&&Bu];for(var y=0;y<h.length;++y){var _=h[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=t(this);function o(h,y){if(y)e:{var _=r;h=h.split(".");for(var S=0;S<h.length-1;S++){var q=h[S];if(!(q in _))break e;_=_[q]}h=h[h.length-1],S=_[h],y=y(S),y!=S&&y!=null&&e(_,h,{configurable:!0,writable:!0,value:y})}}function a(h,y){h instanceof String&&(h+="");var _=0,S=!1,q={next:function(){if(!S&&_<h.length){var Y=_++;return{value:y(Y,h[Y]),done:!1}}return S=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}o("Array.prototype.values",function(h){return h||function(){return a(this,function(y,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function p(h){var y=typeof h;return y=y!="object"?y:h?Array.isArray(h)?"array":y:"null",y=="array"||y=="object"&&typeof h.length=="number"}function m(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function v(h,y,_){return h.call.apply(h.bind,arguments)}function w(h,y,_){if(!h)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,S),h.apply(y,q)}}return function(){return h.apply(y,arguments)}}function E(h,y,_){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:w,E.apply(null,arguments)}function b(h,y){var _=Array.prototype.slice.call(arguments,1);return function(){var S=_.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function L(h,y){function _(){}_.prototype=y.prototype,h.aa=y.prototype,h.prototype=new _,h.prototype.constructor=h,h.Qb=function(S,q,Y){for(var ue=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)ue[Ye-2]=arguments[Ye];return y.prototype[q].apply(S,ue)}}function V(h){const y=h.length;if(0<y){const _=Array(y);for(let S=0;S<y;S++)_[S]=h[S];return _}return[]}function P(h,y){for(let _=1;_<arguments.length;_++){const S=arguments[_];if(p(S)){const q=h.length||0,Y=S.length||0;h.length=q+Y;for(let ue=0;ue<Y;ue++)h[q+ue]=S[ue]}else h.push(S)}}class D{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function O(h){return/^[\s\xa0]*$/.test(h)}function j(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function W(h){return W[" "](h),h}W[" "]=function(){};var Z=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function ae(h,y,_){for(const S in h)y.call(_,h[S],S,h)}function R(h,y){for(const _ in h)y.call(void 0,h[_],_,h)}function I(h){const y={};for(const _ in h)y[_]=h[_];return y}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(h,y){let _,S;for(let q=1;q<arguments.length;q++){S=arguments[q];for(_ in S)h[_]=S[_];for(let Y=0;Y<N.length;Y++)_=N[Y],Object.prototype.hasOwnProperty.call(S,_)&&(h[_]=S[_])}}function B(h){var y=1;h=h.split(":");const _=[];for(;0<y&&h.length;)_.push(h.shift()),y--;return h.length&&_.push(h.join(":")),_}function $(h){d.setTimeout(()=>{throw h},0)}function A(){var h=ee;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class _e{constructor(){this.h=this.g=null}add(y,_){const S=Ue.get();S.set(y,_),this.h?this.h.next=S:this.g=S,this.h=S}}var Ue=new D(()=>new Oe,h=>h.reset());class Oe{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Ae,oe=!1,ee=new _e,J=()=>{const h=d.Promise.resolve(void 0);Ae=()=>{h.then(U)}};var U=()=>{for(var h;h=A();){try{h.h.call(h.g)}catch(_){$(_)}var y=Ue;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}oe=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var ce=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const _=()=>{};d.addEventListener("test",_,y),d.removeEventListener("test",_,y)}catch{}return h}();function he(h,y){if(me.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var _=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(Z){e:{try{W(y.nodeName);var q=!0;break e}catch{}q=!1}q||(y=null)}}else _=="mouseover"?y=h.fromElement:_=="mouseout"&&(y=h.toElement);this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:ve[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&he.aa.h.call(this)}}L(he,me);var ve={2:"touch",3:"pen",4:"mouse"};he.prototype.h=function(){he.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Le="closure_listenable_"+(1e6*Math.random()|0),Q=0;function we(h,y,_,S,q){this.listener=h,this.proxy=null,this.src=y,this.type=_,this.capture=!!S,this.ha=q,this.key=++Q,this.da=this.fa=!1}function Ve(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function _t(h){this.src=h,this.g={},this.h=0}_t.prototype.add=function(h,y,_,S,q){var Y=h.toString();h=this.g[Y],h||(h=this.g[Y]=[],this.h++);var ue=zn(h,y,S,q);return-1<ue?(y=h[ue],_||(y.fa=!1)):(y=new we(y,this.src,Y,!!S,q),y.fa=_,h.push(y)),y};function jr(h,y){var _=y.type;if(_ in h.g){var S=h.g[_],q=Array.prototype.indexOf.call(S,y,void 0),Y;(Y=0<=q)&&Array.prototype.splice.call(S,q,1),Y&&(Ve(y),h.g[_].length==0&&(delete h.g[_],h.h--))}}function zn(h,y,_,S){for(var q=0;q<h.length;++q){var Y=h[q];if(!Y.da&&Y.listener==y&&Y.capture==!!_&&Y.ha==S)return q}return-1}var li="closure_lm_"+(1e6*Math.random()|0),lo={};function Ca(h,y,_,S,q){if(Array.isArray(y)){for(var Y=0;Y<y.length;Y++)Ca(h,y[Y],_,S,q);return null}return _=Da(_),h&&h[Le]?h.K(y,_,m(S)?!!S.capture:!1,q):Ra(h,y,_,!1,S,q)}function Ra(h,y,_,S,q,Y){if(!y)throw Error("Invalid event type");var ue=m(q)?!!q.capture:!!q,Ye=uo(h);if(Ye||(h[li]=Ye=new _t(h)),_=Ye.add(y,_,S,ue,Y),_.proxy)return _;if(S=bc(),_.proxy=S,S.src=h,S.listener=_,h.addEventListener)ce||(q=ue),q===void 0&&(q=!1),h.addEventListener(y.toString(),S,q);else if(h.attachEvent)h.attachEvent(Vr(y.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return _}function bc(){function h(_){return y.call(h.src,h.listener,_)}const y=ja;return h}function co(h,y,_,S,q){if(Array.isArray(y))for(var Y=0;Y<y.length;Y++)co(h,y[Y],_,S,q);else S=m(S)?!!S.capture:!!S,_=Da(_),h&&h[Le]?(h=h.i,y=String(y).toString(),y in h.g&&(Y=h.g[y],_=zn(Y,_,S,q),-1<_&&(Ve(Y[_]),Array.prototype.splice.call(Y,_,1),Y.length==0&&(delete h.g[y],h.h--)))):h&&(h=uo(h))&&(y=h.g[y.toString()],h=-1,y&&(h=zn(y,_,S,q)),(_=-1<h?y[h]:null)&&Dr(_))}function Dr(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Le])jr(y.i,h);else{var _=h.type,S=h.proxy;y.removeEventListener?y.removeEventListener(_,S,h.capture):y.detachEvent?y.detachEvent(Vr(_),S):y.addListener&&y.removeListener&&y.removeListener(S),(_=uo(y))?(jr(_,h),_.h==0&&(_.src=null,y[li]=null)):Ve(h)}}}function Vr(h){return h in lo?lo[h]:lo[h]="on"+h}function ja(h,y){if(h.da)h=!0;else{y=new he(y,this);var _=h.listener,S=h.ha||h.src;h.fa&&Dr(h),h=_.call(S,y)}return h}function uo(h){return h=h[li],h instanceof _t?h:null}var ho="__closure_events_fn_"+(1e9*Math.random()>>>0);function Da(h){return typeof h=="function"?h:(h[ho]||(h[ho]=function(y){return h.handleEvent(y)}),h[ho])}function Et(){X.call(this),this.i=new _t(this),this.M=this,this.F=null}L(Et,X),Et.prototype[Le]=!0,Et.prototype.removeEventListener=function(h,y,_,S){co(this,h,y,_,S)};function Tt(h,y){var _,S=h.F;if(S)for(_=[];S;S=S.F)_.push(S);if(h=h.M,S=y.type||y,typeof y=="string")y=new me(y,h);else if(y instanceof me)y.target=y.target||h;else{var q=y;y=new me(S,h),M(y,q)}if(q=!0,_)for(var Y=_.length-1;0<=Y;Y--){var ue=y.g=_[Y];q=Lr(ue,S,!0,y)&&q}if(ue=y.g=h,q=Lr(ue,S,!0,y)&&q,q=Lr(ue,S,!1,y)&&q,_)for(Y=0;Y<_.length;Y++)ue=y.g=_[Y],q=Lr(ue,S,!1,y)&&q}Et.prototype.N=function(){if(Et.aa.N.call(this),this.i){var h=this.i,y;for(y in h.g){for(var _=h.g[y],S=0;S<_.length;S++)Ve(_[S]);delete h.g[y],h.h--}}this.F=null},Et.prototype.K=function(h,y,_,S){return this.i.add(String(h),y,!1,_,S)},Et.prototype.L=function(h,y,_,S){return this.i.add(String(h),y,!0,_,S)};function Lr(h,y,_,S){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();for(var q=!0,Y=0;Y<y.length;++Y){var ue=y[Y];if(ue&&!ue.da&&ue.capture==_){var Ye=ue.listener,bt=ue.ha||ue.src;ue.fa&&jr(h.i,ue),q=Ye.call(bt,S)!==!1&&q}}return q&&!S.defaultPrevented}function Va(h,y,_){if(typeof h=="function")_&&(h=E(h,_));else if(h&&typeof h.handleEvent=="function")h=E(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:d.setTimeout(h,y||0)}function ps(h){h.g=Va(()=>{h.g=null,h.i&&(h.i=!1,ps(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class ci extends X{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:ps(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ui(h){X.call(this),this.h=h,this.g={}}L(ui,X);var La=[];function Oa(h){ae(h.g,function(y,_){this.g.hasOwnProperty(_)&&Dr(y)},h),h.g={}}ui.prototype.N=function(){ui.aa.N.call(this),Oa(this)},ui.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ma=d.JSON.stringify,Ua=d.JSON.parse,Fa=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function hi(){}hi.prototype.h=null;function fo(h){return h.h||(h.h=h.i())}function po(){}var In={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hr(){me.call(this,"d")}L(hr,me);function mo(){me.call(this,"c")}L(mo,me);var dr={},Ba=null;function di(){return Ba=Ba||new Et}dr.La="serverreachability";function za(h){me.call(this,dr.La,h)}L(za,me);function Or(h){const y=di();Tt(y,new za(y))}dr.STAT_EVENT="statevent";function $a(h,y){me.call(this,dr.STAT_EVENT,h),this.stat=y}L($a,me);function dt(h){const y=di();Tt(y,new $a(y,h))}dr.Ma="timingevent";function go(h,y){me.call(this,dr.Ma,h),this.size=y}L(go,me);function $n(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},y)}function fi(){this.g=!0}fi.prototype.xa=function(){this.g=!1};function pi(h,y,_,S,q,Y){h.info(function(){if(h.g)if(Y)for(var ue="",Ye=Y.split("&"),bt=0;bt<Ye.length;bt++){var qe=Ye[bt].split("=");if(1<qe.length){var At=qe[0];qe=qe[1];var yt=At.split("_");ue=2<=yt.length&&yt[1]=="type"?ue+(At+"="+qe+"&"):ue+(At+"=redacted&")}}else ue=null;else ue=Y;return"XMLHTTP REQ ("+S+") [attempt "+q+"]: "+y+`
`+_+`
`+ue})}function yo(h,y,_,S,q,Y,ue){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+q+"]: "+y+`
`+_+`
`+Y+" "+ue})}function qn(h,y,_,S){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+cd(h,_)+(S?" "+S:"")})}function qa(h,y){h.info(function(){return"TIMEOUT: "+y})}fi.prototype.info=function(){};function cd(h,y){if(!h.g)return y;if(!y)return null;try{var _=JSON.parse(y);if(_){for(h=0;h<_.length;h++)if(Array.isArray(_[h])){var S=_[h];if(!(2>S.length)){var q=S[1];if(Array.isArray(q)&&!(1>q.length)){var Y=q[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var ue=1;ue<q.length;ue++)q[ue]=""}}}}return Ma(_)}catch{return y}}var vo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Sc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gn;function mi(){}L(mi,hi),mi.prototype.g=function(){return new XMLHttpRequest},mi.prototype.i=function(){return{}},Gn=new mi;function Hn(h,y,_,S){this.j=h,this.i=y,this.l=_,this.R=S||1,this.U=new ui(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ic}function Ic(){this.i=null,this.g="",this.h=!1}var Ga={},xo={};function wo(h,y,_){h.L=1,h.v=xs(gn(y)),h.m=_,h.P=!0,Ha(h,null)}function Ha(h,y){h.F=Date.now(),Ze(h),h.A=gn(h.v);var _=h.A,S=h.R;Array.isArray(S)||(S=[String(S)]),_s(_.i,"t",S),h.C=0,_=h.j.J,h.h=new Ic,h.g=qc(h.j,_?y:null,!h.m),0<h.O&&(h.M=new ci(E(h.Y,h,h.g),h.O)),y=h.U,_=h.g,S=h.ca;var q="readystatechange";Array.isArray(q)||(q&&(La[0]=q.toString()),q=La);for(var Y=0;Y<q.length;Y++){var ue=Ca(_,q[Y],S||y.handleEvent,!1,y.h||y);if(!ue)break;y.g[ue.key]=ue}y=h.H?I(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),Or(),pi(h.i,h.u,h.A,h.l,h.R,h.m)}Hn.prototype.ca=function(h){h=h.target;const y=this.M;y&&sn(h)==3?y.j():this.Y(h)},Hn.prototype.Y=function(h){try{if(h==this.g)e:{const yt=sn(this.g);var y=this.g.Ba();const kn=this.g.Z();if(!(3>yt)&&(yt!=3||this.g&&(this.h.h||this.g.oa()||Ja(this.g)))){this.J||yt!=4||y==7||(y==8||0>=kn?Or(3):Or(2)),gi(this);var _=this.g.Z();this.X=_;t:if(Nc(this)){var S=Ja(this.g);h="";var q=S.length,Y=sn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Nn(this),ms(this);var ue="";break t}this.h.i=new d.TextDecoder}for(y=0;y<q;y++)this.h.h=!0,h+=this.h.i.decode(S[y],{stream:!(Y&&y==q-1)});S.length=0,this.h.g+=h,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=_==200,yo(this.i,this.u,this.A,this.l,this.R,yt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Ye,bt=this.g;if((Ye=bt.g?bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(Ye)){var qe=Ye;break t}}qe=null}if(_=qe)qn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wa(this,_);else{this.o=!1,this.s=3,dt(12),Nn(this),ms(this);break e}}if(this.P){_=!0;let vn;for(;!this.J&&this.C<ue.length;)if(vn=ud(this,ue),vn==xo){yt==4&&(this.s=4,dt(14),_=!1),qn(this.i,this.l,null,"[Incomplete Response]");break}else if(vn==Ga){this.s=4,dt(15),qn(this.i,this.l,ue,"[Invalid Chunk]"),_=!1;break}else qn(this.i,this.l,vn,null),Wa(this,vn);if(Nc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yt!=4||ue.length!=0||this.h.h||(this.s=1,dt(16),_=!1),this.o=this.o&&_,!_)qn(this.i,this.l,ue,"[Invalid Chunked Response]"),Nn(this),ms(this);else if(0<ue.length&&!this.W){this.W=!0;var At=this.j;At.g==this&&At.ba&&!At.M&&(At.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),el(At),At.M=!0,dt(11))}}else qn(this.i,this.l,ue,null),Wa(this,ue);yt==4&&Nn(this),this.o&&!this.J&&(yt==4?Co(this.j,this):(this.o=!1,Ze(this)))}else Io(this.g),_==400&&0<ue.indexOf("Unknown SID")?(this.s=3,dt(12)):(this.s=0,dt(13)),Nn(this),ms(this)}}}catch{}finally{}};function Nc(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function ud(h,y){var _=h.C,S=y.indexOf(`
`,_);return S==-1?xo:(_=Number(y.substring(_,S)),isNaN(_)?Ga:(S+=1,S+_>y.length?xo:(y=y.slice(S,S+_),h.C=S+_,y)))}Hn.prototype.cancel=function(){this.J=!0,Nn(this)};function Ze(h){h.S=Date.now()+h.I,Pc(h,h.I)}function Pc(h,y){if(h.B!=null)throw Error("WatchDog timer not null");h.B=$n(E(h.ba,h),y)}function gi(h){h.B&&(d.clearTimeout(h.B),h.B=null)}Hn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(qa(this.i,this.A),this.L!=2&&(Or(),dt(17)),Nn(this),this.s=2,ms(this)):Pc(this,this.S-h)};function ms(h){h.j.G==0||h.J||Co(h.j,h)}function Nn(h){gi(h);var y=h.M;y&&typeof y.ma=="function"&&y.ma(),h.M=null,Oa(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function Wa(h,y){try{var _=h.j;if(_.G!=0&&(_.g==h||Jt(_.h,h))){if(!h.K&&Jt(_.h,h)&&_.G==3){try{var S=_.Da.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var q=S;if(q[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<h.F)Ao(_),Xn(_);else break e;ko(_),dt(18)}}else _.za=q[1],0<_.za-_.T&&37500>q[2]&&_.F&&_.v==0&&!_.C&&(_.C=$n(E(_.Za,_),6e3));if(1>=Ac(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else zr(_,11)}else if((h.K||_.g==h)&&Ao(_),!O(y))for(q=_.Da.g.parse(y),y=0;y<q.length;y++){let qe=q[y];if(_.T=qe[0],qe=qe[1],_.G==2)if(qe[0]=="c"){_.K=qe[1],_.ia=qe[2];const At=qe[3];At!=null&&(_.la=At,_.j.info("VER="+_.la));const yt=qe[4];yt!=null&&(_.Aa=yt,_.j.info("SVER="+_.Aa));const kn=qe[5];kn!=null&&typeof kn=="number"&&0<kn&&(S=1.5*kn,_.L=S,_.j.info("backChannelRequestTimeoutMs_="+S)),S=_;const vn=h.g;if(vn){const Ti=vn.g?vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ti){var Y=S.h;Y.g||Ti.indexOf("spdy")==-1&&Ti.indexOf("quic")==-1&&Ti.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Ka(Y,Y.h),Y.h=null))}if(S.D){const jo=vn.g?vn.g.getResponseHeader("X-HTTP-Session-Id"):null;jo&&(S.ya=jo,Je(S.I,S.D,jo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-h.F,_.j.info("Handshake RTT: "+_.R+"ms")),S=_;var ue=h;if(S.qa=$c(S,S.J?S.ia:null,S.W),ue.K){Cc(S.h,ue);var Ye=ue,bt=S.L;bt&&(Ye.I=bt),Ye.B&&(gi(Ye),Ze(Ye)),S.g=ue}else Ei(S);0<_.i.length&&gr(_)}else qe[0]!="stop"&&qe[0]!="close"||zr(_,7);else _.G==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?zr(_,7):Lt(_):qe[0]!="noop"&&_.l&&_.l.ta(qe),_.v=0)}}Or(4)}catch{}}var kc=class{constructor(h,y){this.g=h,this.map=y}};function yi(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mn(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ac(h){return h.h?1:h.g?h.g.size:0}function Jt(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Ka(h,y){h.g?h.g.add(y):h.h=y}function Cc(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}yi.prototype.cancel=function(){if(this.i=Rc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Rc(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const _ of h.g.values())y=y.concat(_.D);return y}return V(h.i)}function _o(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(p(h)){for(var y=[],_=h.length,S=0;S<_;S++)y.push(h[S]);return y}y=[],_=0;for(S in h)y[_++]=h[S];return y}function Eo(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(p(h)||typeof h=="string"){var y=[];h=h.length;for(var _=0;_<h;_++)y.push(_);return y}y=[],_=0;for(const S in h)y[_++]=S;return y}}}function gs(h,y){if(h.forEach&&typeof h.forEach=="function")h.forEach(y,void 0);else if(p(h)||typeof h=="string")Array.prototype.forEach.call(h,y,void 0);else for(var _=Eo(h),S=_o(h),q=S.length,Y=0;Y<q;Y++)y.call(void 0,S[Y],_&&_[Y],h)}var vi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hd(h,y){if(h){h=h.split("&");for(var _=0;_<h.length;_++){var S=h[_].indexOf("="),q=null;if(0<=S){var Y=h[_].substring(0,S);q=h[_].substring(S+1)}else Y=h[_];y(Y,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Mr(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Mr){this.h=h.h,xi(this,h.j),this.o=h.o,this.g=h.g,ys(this,h.s),this.l=h.l;var y=h.i,_=new fr;_.i=y.i,y.g&&(_.g=new Map(y.g),_.h=y.h),vs(this,_),this.m=h.m}else h&&(y=String(h).match(vi))?(this.h=!1,xi(this,y[1]||"",!0),this.o=ze(y[2]||""),this.g=ze(y[3]||"",!0),ys(this,y[4]),this.l=ze(y[5]||"",!0),vs(this,y[6]||"",!0),this.m=ze(y[7]||"")):(this.h=!1,this.i=new fr(null,this.h))}Mr.prototype.toString=function(){var h=[],y=this.j;y&&h.push(ws(y,To,!0),":");var _=this.g;return(_||y=="file")&&(h.push("//"),(y=this.o)&&h.push(ws(y,To,!0),"@"),h.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&h.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&h.push("/"),h.push(ws(_,_.charAt(0)=="/"?Vc:Dc,!0))),(_=this.i.toString())&&h.push("?",_),(_=this.m)&&h.push("#",ws(_,Qa)),h.join("")};function gn(h){return new Mr(h)}function xi(h,y,_){h.j=_?ze(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function ys(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function vs(h,y,_){y instanceof fr?(h.i=y,pr(h.i,h.h)):(_||(y=ws(y,Lc)),h.i=new fr(y,h.h))}function Je(h,y,_){h.i.set(y,_)}function xs(h){return Je(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function ze(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ws(h,y,_){return typeof h=="string"?(h=encodeURI(h).replace(y,jc),_&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function jc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var To=/[#\/\?@]/g,Dc=/[#\?:]/g,Vc=/[#\?]/g,Lc=/[#\?@]/g,Qa=/#/g;function fr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Vt(h){h.g||(h.g=new Map,h.h=0,h.i&&hd(h.i,function(y,_){h.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}n=fr.prototype,n.add=function(h,y){Vt(this),this.i=null,h=Pn(this,h);var _=this.g.get(h);return _||this.g.set(h,_=[]),_.push(y),this.h+=1,this};function Wn(h,y){Vt(h),y=Pn(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Kn(h,y){return Vt(h),y=Pn(h,y),h.g.has(y)}n.forEach=function(h,y){Vt(this),this.g.forEach(function(_,S){_.forEach(function(q){h.call(y,q,S,this)},this)},this)},n.na=function(){Vt(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),_=[];for(let S=0;S<y.length;S++){const q=h[S];for(let Y=0;Y<q.length;Y++)_.push(y[S])}return _},n.V=function(h){Vt(this);let y=[];if(typeof h=="string")Kn(this,h)&&(y=y.concat(this.g.get(Pn(this,h))));else{h=Array.from(this.g.values());for(let _=0;_<h.length;_++)y=y.concat(h[_])}return y},n.set=function(h,y){return Vt(this),this.i=null,h=Pn(this,h),Kn(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},n.get=function(h,y){return h?(h=this.V(h),0<h.length?String(h[0]):y):y};function _s(h,y,_){Wn(h,y),0<_.length&&(h.i=null,h.g.set(Pn(h,y),V(_)),h.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var _=0;_<y.length;_++){var S=y[_];const Y=encodeURIComponent(String(S)),ue=this.V(S);for(S=0;S<ue.length;S++){var q=Y;ue[S]!==""&&(q+="="+encodeURIComponent(String(ue[S]))),h.push(q)}}return this.i=h.join("&")};function Pn(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function pr(h,y){y&&!h.j&&(Vt(h),h.i=null,h.g.forEach(function(_,S){var q=S.toLowerCase();S!=q&&(Wn(this,S),_s(this,q,_))},h)),h.j=y}function dd(h,y){const _=new fi;if(d.Image){const S=new Image;S.onload=b(rn,_,"TestLoadImage: loaded",!0,y,S),S.onerror=b(rn,_,"TestLoadImage: error",!1,y,S),S.onabort=b(rn,_,"TestLoadImage: abort",!1,y,S),S.ontimeout=b(rn,_,"TestLoadImage: timeout",!1,y,S),d.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else y(!1)}function Oc(h,y){const _=new fi,S=new AbortController,q=setTimeout(()=>{S.abort(),rn(_,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:S.signal}).then(Y=>{clearTimeout(q),Y.ok?rn(_,"TestPingServer: ok",!0,y):rn(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(q),rn(_,"TestPingServer: error",!1,y)})}function rn(h,y,_,S,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),S(_)}catch{}}function fd(){this.g=new Fa}function Mc(h,y,_){const S=_||"";try{gs(h,function(q,Y){let ue=q;m(q)&&(ue=Ma(q)),y.push(S+Y+"="+encodeURIComponent(ue))})}catch(q){throw y.push(S+"type="+encodeURIComponent("_badmap")),q}}function Ur(h){this.l=h.Ub||null,this.j=h.eb||!1}L(Ur,hi),Ur.prototype.g=function(){return new wi(this.l,this.j)},Ur.prototype.i=function(h){return function(){return h}}({});function wi(h,y){Et.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}L(wi,Et),n=wi.prototype,n.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,Yn(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||d).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Qn(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Yn(this)),this.g&&(this.readyState=3,Yn(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Uc(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Uc(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Qn(this):Yn(this),this.readyState==3&&Uc(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Qn(this))},n.Qa=function(h){this.g&&(this.response=h,Qn(this))},n.ga=function(){this.g&&Qn(this)};function Qn(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Yn(h)}n.setRequestHeader=function(h,y){this.u.append(h,y)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,h.push(_[0]+": "+_[1]),_=y.next();return h.join(`\r
`)};function Yn(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(wi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Fr(h){let y="";return ae(h,function(_,S){y+=S,y+=":",y+=_,y+=`\r
`}),y}function Es(h,y,_){e:{for(S in _){var S=!1;break e}S=!0}S||(_=Fr(_),typeof h=="string"?_!=null&&encodeURIComponent(String(_)):Je(h,y,_))}function st(h){Et.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}L(st,Et);var pd=/^https?$/i,Ya=["POST","PUT"];n=st.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,y,_,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gn.g(),this.v=this.o?fo(this.o):fo(Gn),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Y){_i(this,Y);return}if(h=_||"",_=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var q in S)_.set(q,S[q]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Y of S.keys())_.set(Y,S.get(Y));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(_.keys()).find(Y=>Y.toLowerCase()=="content-type"),q=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Ya,y,void 0))||S||q||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,ue]of _)this.g.setRequestHeader(Y,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{So(this),this.u=!0,this.g.send(h),this.u=!1}catch(Y){_i(this,Y)}};function _i(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,bo(h),yn(h)}function bo(h){h.A||(h.A=!0,Tt(h,"complete"),Tt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Tt(this,"complete"),Tt(this,"abort"),yn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yn(this,!0)),st.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Xa(this):this.bb())},n.bb=function(){Xa(this)};function Xa(h){if(h.h&&typeof c<"u"&&(!h.v[1]||sn(h)!=4||h.Z()!=2)){if(h.u&&sn(h)==4)Va(h.Ea,0,h);else if(Tt(h,"readystatechange"),sn(h)==4){h.h=!1;try{const ue=h.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var S;if(S=ue===0){var q=String(h.D).match(vi)[1]||null;!q&&d.self&&d.self.location&&(q=d.self.location.protocol.slice(0,-1)),S=!pd.test(q?q.toLowerCase():"")}_=S}if(_)Tt(h,"complete"),Tt(h,"success");else{h.m=6;try{var Y=2<sn(h)?h.g.statusText:""}catch{Y=""}h.l=Y+" ["+h.Z()+"]",bo(h)}}finally{yn(h)}}}}function yn(h,y){if(h.g){So(h);const _=h.g,S=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||Tt(h,"ready");try{_.onreadystatechange=S}catch{}}}function So(h){h.I&&(d.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function sn(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<sn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Ua(y)}};function Ja(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Io(h){const y={};h=(h.g&&2<=sn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(O(h[S]))continue;var _=B(h[S]);const q=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const Y=y[q]||[];y[q]=Y,Y.push(_)}R(y,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function mr(h,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[h]||y}function Za(h){this.Aa=0,this.i=[],this.j=new fi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=mr("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=mr("baseRetryDelayMs",5e3,h),this.cb=mr("retryDelaySeedMs",1e4,h),this.Wa=mr("forwardChannelMaxRetries",2,h),this.wa=mr("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new yi(h&&h.concurrentRequestLimit),this.Da=new fd,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Za.prototype,n.la=8,n.G=1,n.connect=function(h,y,_,S){dt(0),this.W=h,this.H=y||{},_&&S!==void 0&&(this.H.OSID=_,this.H.OAID=S),this.F=this.X,this.I=$c(this,null,this.W),gr(this)};function Lt(h){if(No(h),h.G==3){var y=h.U++,_=gn(h.I);if(Je(_,"SID",h.K),Je(_,"RID",y),Je(_,"TYPE","terminate"),Br(h,_),y=new Hn(h,h.j,y),y.L=2,y.v=xs(gn(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(y.v.toString(),"")}catch{}!_&&d.Image&&(new Image().src=y.v,_=!0),_||(y.g=qc(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Ze(y)}zc(h)}function Xn(h){h.g&&(el(h),h.g.cancel(),h.g=null)}function No(h){Xn(h),h.u&&(d.clearTimeout(h.u),h.u=null),Ao(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function gr(h){if(!mn(h.h)&&!h.s){h.s=!0;var y=h.Ga;Ae||J(),oe||(Ae(),oe=!0),ee.add(y,h),h.B=0}}function md(h,y){return Ac(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=y.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=$n(E(h.Ga,h,y),Bc(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const q=new Hn(this,this.j,h);let Y=this.o;if(this.S&&(Y?(Y=I(Y),M(Y,this.S)):Y=this.S),this.m!==null||this.O||(q.H=Y,Y=null),this.P)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var S=this.i[_];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,4096<y){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=Ts(this,q,y),_=gn(this.I),Je(_,"RID",h),Je(_,"CVER",22),this.D&&Je(_,"X-HTTP-Session-Id",this.D),Br(this,_),Y&&(this.O?y="headers="+encodeURIComponent(String(Fr(Y)))+"&"+y:this.m&&Es(_,this.m,Y)),Ka(this.h,q),this.Ua&&Je(_,"TYPE","init"),this.P?(Je(_,"$req",y),Je(_,"SID","null"),q.T=!0,wo(q,_,null)):wo(q,_,y),this.G=2}}else this.G==3&&(h?Po(this,h):this.i.length==0||mn(this.h)||Po(this))};function Po(h,y){var _;y?_=y.l:_=h.U++;const S=gn(h.I);Je(S,"SID",h.K),Je(S,"RID",_),Je(S,"AID",h.T),Br(h,S),h.m&&h.o&&Es(S,h.m,h.o),_=new Hn(h,h.j,_,h.B+1),h.m===null&&(_.H=h.o),y&&(h.i=y.D.concat(h.i)),y=Ts(h,_,1e3),_.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Ka(h.h,_),wo(_,S,y)}function Br(h,y){h.H&&ae(h.H,function(_,S){Je(y,S,_)}),h.l&&gs({},function(_,S){Je(y,S,_)})}function Ts(h,y,_){_=Math.min(h.i.length,_);var S=h.l?E(h.l.Na,h.l,h):null;e:{var q=h.i;let Y=-1;for(;;){const ue=["count="+_];Y==-1?0<_?(Y=q[0].g,ue.push("ofs="+Y)):Y=0:ue.push("ofs="+Y);let Ye=!0;for(let bt=0;bt<_;bt++){let qe=q[bt].g;const At=q[bt].map;if(qe-=Y,0>qe)Y=Math.max(0,q[bt].g-100),Ye=!1;else try{Mc(At,ue,"req"+qe+"_")}catch{S&&S(At)}}if(Ye){S=ue.join("&");break e}}}return h=h.i.splice(0,_),y.D=h,S}function Ei(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;Ae||J(),oe||(Ae(),oe=!0),ee.add(y,h),h.v=0}}function ko(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=$n(E(h.Fa,h),Bc(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,Fc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=$n(E(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dt(10),Xn(this),Fc(this))};function el(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Fc(h){h.g=new Hn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var y=gn(h.qa);Je(y,"RID","rpc"),Je(y,"SID",h.K),Je(y,"AID",h.T),Je(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&Je(y,"TO",h.ja),Je(y,"TYPE","xmlhttp"),Br(h,y),h.m&&h.o&&Es(y,h.m,h.o),h.L&&(h.g.I=h.L);var _=h.g;h=h.ia,_.L=1,_.v=xs(gn(y)),_.m=null,_.P=!0,Ha(_,h)}n.Za=function(){this.C!=null&&(this.C=null,Xn(this),ko(this),dt(19))};function Ao(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Co(h,y){var _=null;if(h.g==y){Ao(h),el(h),h.g=null;var S=2}else if(Jt(h.h,y))_=y.D,Cc(h.h,y),S=1;else return;if(h.G!=0){if(y.o)if(S==1){_=y.m?y.m.length:0,y=Date.now()-y.F;var q=h.B;S=di(),Tt(S,new go(S,_)),gr(h)}else Ei(h);else if(q=y.s,q==3||q==0&&0<y.X||!(S==1&&md(h,y)||S==2&&ko(h)))switch(_&&0<_.length&&(y=h.h,y.i=y.i.concat(_)),q){case 1:zr(h,5);break;case 4:zr(h,10);break;case 3:zr(h,6);break;default:zr(h,2)}}}function Bc(h,y){let _=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(_*=2),_*y}function zr(h,y){if(h.j.info("Error code "+y),y==2){var _=E(h.fb,h),S=h.Xa;const q=!S;S=new Mr(S||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||xi(S,"https"),xs(S),q?dd(S.toString(),_):Oc(S.toString(),_)}else dt(2);h.G=0,h.l&&h.l.sa(y),zc(h),No(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function zc(h){if(h.G=0,h.ka=[],h.l){const y=Rc(h.h);(y.length!=0||h.i.length!=0)&&(P(h.ka,y),P(h.ka,h.i),h.h.i.length=0,V(h.i),h.i.length=0),h.l.ra()}}function $c(h,y,_){var S=_ instanceof Mr?gn(_):new Mr(_);if(S.g!="")y&&(S.g=y+"."+S.g),ys(S,S.s);else{var q=d.location;S=q.protocol,y=y?y+"."+q.hostname:q.hostname,q=+q.port;var Y=new Mr(null);S&&xi(Y,S),y&&(Y.g=y),q&&ys(Y,q),_&&(Y.l=_),S=Y}return _=h.D,y=h.ya,_&&y&&Je(S,_,y),Je(S,"VER",h.la),Br(h,S),S}function qc(h,y,_){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Ca&&!h.pa?new st(new Ur({eb:_})):new st(h.pa),y.Ha(h.J),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function tl(){}n=tl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ro(){}Ro.prototype.g=function(h,y){return new Zt(h,y)};function Zt(h,y){Et.call(this),this.g=new Za(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!O(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!O(y)&&(this.g.D=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new yr(this)}L(Zt,Et),Zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Zt.prototype.close=function(){Lt(this.g)},Zt.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var _={};_.__data__=h,h=_}else this.u&&(_={},_.__data__=Ma(h),h=_);y.i.push(new kc(y.Ya++,h)),y.G==3&&gr(y)},Zt.prototype.N=function(){this.g.l=null,delete this.j,Lt(this.g),delete this.g,Zt.aa.N.call(this)};function Gc(h){hr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const _ in y){h=_;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}L(Gc,hr);function Hc(){mo.call(this),this.status=1}L(Hc,mo);function yr(h){this.g=h}L(yr,tl),yr.prototype.ua=function(){Tt(this.g,"a")},yr.prototype.ta=function(h){Tt(this.g,new Gc(h))},yr.prototype.sa=function(h){Tt(this.g,new Hc)},yr.prototype.ra=function(){Tt(this.g,"b")},Ro.prototype.createWebChannel=Ro.prototype.g,Zt.prototype.send=Zt.prototype.o,Zt.prototype.open=Zt.prototype.m,Zt.prototype.close=Zt.prototype.close,H_=function(){return new Ro},G_=function(){return di()},q_=dr,kp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vo.NO_ERROR=0,vo.TIMEOUT=8,vo.HTTP_ERROR=6,eh=vo,Sc.COMPLETE="complete",$_=Sc,po.EventType=In,In.OPEN="a",In.CLOSE="b",In.ERROR="c",In.MESSAGE="d",Et.prototype.listen=Et.prototype.K,Rl=po,st.prototype.listenOnce=st.prototype.L,st.prototype.getLastError=st.prototype.Ka,st.prototype.getLastErrorCode=st.prototype.Ba,st.prototype.getStatus=st.prototype.Z,st.prototype.getResponseJson=st.prototype.Oa,st.prototype.getResponseText=st.prototype.oa,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Ha,z_=st}).apply(typeof Bu<"u"?Bu:typeof self<"u"?self:typeof window<"u"?window:{});const Cv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Qt.UNAUTHENTICATED=new Qt(null),Qt.GOOGLE_CREDENTIALS=new Qt("google-credentials-uid"),Qt.FIRST_PARTY=new Qt("first-party-uid"),Qt.MOCK_USER=new Qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Na="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi=new Mh("@firebase/firestore");function Il(){return Qi.logLevel}function ye(n,...e){if(Qi.logLevel<=$e.DEBUG){const t=e.map(Em);Qi.debug(`Firestore (${Na}): ${n}`,...t)}}function cs(n,...e){if(Qi.logLevel<=$e.ERROR){const t=e.map(Em);Qi.error(`Firestore (${Na}): ${n}`,...t)}}function ma(n,...e){if(Qi.logLevel<=$e.WARN){const t=e.map(Em);Qi.warn(`Firestore (${Na}): ${n}`,...t)}}function Em(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(n="Unexpected state"){const e=`FIRESTORE (${Na}) INTERNAL ASSERTION FAILED: `+n;throw cs(e),new Error(e)}function Xe(n,e){n||Ce()}function De(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends ur{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Qt.UNAUTHENTICATED))}shutdown(){}}class gA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class yA{constructor(e){this.t=e,this.currentUser=Qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Xe(this.o===void 0);let r=this.i;const o=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let a=new Xs;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Xs,e.enqueueRetryable(()=>o(this.currentUser))};const c=()=>{const p=a;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},d=p=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(p=>d(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Xs)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Xe(typeof r.accessToken=="string"),new W_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string"),new Qt(e)}}class vA{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Qt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class xA{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new vA(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class wA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _A{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Xe(this.o===void 0);const r=a=>{a.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.R;return this.R=a.token,ye("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const o=a=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>o(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?o(a):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Xe(typeof t.token=="string"),this.R=t.token,new wA(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=EA(40);for(let a=0;a<o.length;++a)r.length<20&&o[a]<t&&(r+=e.charAt(o[a]%e.length))}return r}}function Qe(n,e){return n<e?-1:n>e?1:0}function ga(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new be(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new be(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new be(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pt.fromMillis(Date.now())}static fromDate(e){return Pt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Pt(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Qe(this.nanoseconds,e.nanoseconds):Qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Re(e)}static min(){return new Re(new Pt(0,0))}static max(){return new Re(new Pt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ce(),r===void 0?r=e.length-t:r>e.length-t&&Ce(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Xl.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Xl?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const a=e.get(o),c=t.get(o);if(a<c)return-1;if(a>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ht extends Xl{construct(e,t,r){return new ht(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new be(ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new ht(t)}static emptyPath(){return new ht([])}}const TA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ft extends Xl{construct(e,t,r){return new Ft(e,t,r)}static isValidIdentifier(e){return TA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ft.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ft(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const a=()=>{if(r.length===0)throw new be(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new be(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new be(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,o+=2}else d==="`"?(c=!c,o++):d!=="."||c?(r+=d,o++):(a(),o++)}if(a(),c)throw new be(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ft(t)}static emptyPath(){return new Ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(ht.fromString(e))}static fromName(e){return new Se(ht.fromString(e).popFirst(5))}static empty(){return new Se(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new ht(e.slice()))}}function bA(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(r===1e9?new Pt(t+1,0):new Pt(t,r));return new ei(o,Se.empty(),e)}function SA(n){return new ei(n.readTime,n.key,-1)}class ei{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ei(Re.min(),Se.empty(),-1)}static max(){return new ei(Re.max(),Se.empty(),-1)}}function IA(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Se.comparator(n.documentKey,e.documentKey),t!==0?t:Qe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pc(n){if(n.code!==ie.FAILED_PRECONDITION||n.message!==NA)throw n;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re((r,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):re.reject(t)}static resolve(e){return new re((t,r)=>{t(e)})}static reject(e){return new re((t,r)=>{r(e)})}static waitFor(e){return new re((t,r)=>{let o=0,a=0,c=!1;e.forEach(d=>{++o,d.next(()=>{++a,c&&a===o&&t()},p=>r(p))}),c=!0,a===o&&t()})}static or(e){let t=re.resolve(!1);for(const r of e)t=t.next(o=>o?re.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,a)=>{r.push(t.call(this,o,a))}),this.waitFor(r)}static mapArray(e,t){return new re((r,o)=>{const a=e.length,c=new Array(a);let d=0;for(let p=0;p<a;p++){const m=p;t(e[m]).next(v=>{c[m]=v,++d,d===a&&r(c)},v=>o(v))}})}static doWhile(e,t){return new re((r,o)=>{const a=()=>{e()===!0?t().next(()=>{a()},o):r()};a()})}}function kA(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function mc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Tm.oe=-1;function zh(n){return n==null}function mh(n){return n===0&&1/n==-1/0}function AA(n){return typeof n=="number"&&Number.isInteger(n)&&!mh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Pa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Q_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,t){this.comparator=e,this.root=t||Ut.EMPTY}insert(e,t){return new ct(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ut.BLACK,null,null))}remove(e){return new ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ut.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zu(this.root,e,this.comparator,!1)}getReverseIterator(){return new zu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zu(this.root,e,this.comparator,!0)}}class zu{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ut{constructor(e,t,r,o,a){this.key=e,this.value=t,this.color=r??Ut.RED,this.left=o??Ut.EMPTY,this.right=a??Ut.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,a){return new Ut(e??this.key,t??this.value,r??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const a=r(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,r),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ut.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ut.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ce();const e=this.left.check();if(e!==this.right.check())throw Ce();return e+(this.isRed()?0:1)}}Ut.EMPTY=null,Ut.RED=!0,Ut.BLACK=!1;Ut.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce()}get value(){throw Ce()}get color(){throw Ce()}get left(){throw Ce()}get right(){throw Ce()}copy(e,t,r,o,a){return this}insert(e,t,r){return new Ut(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new jv(this.data.getIterator())}getIteratorFrom(e){return new jv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=r.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Bt(this.comparator);return t.data=e,t}}class jv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new ir([])}unionWith(e){let t=new Bt(Ft.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ir(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ga(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Y_("Invalid base64 string: "+a):a}}(e);return new zt(t)}static fromUint8Array(e){const t=function(o){let a="";for(let c=0;c<o.length;++c)a+=String.fromCharCode(o[c]);return a}(e);return new zt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zt.EMPTY_BYTE_STRING=new zt("");const CA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ti(n){if(Xe(!!n),typeof n=="string"){let e=0;const t=CA.exec(n);if(Xe(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pt(n.seconds),nanos:pt(n.nanos)}}function pt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Yi(n){return typeof n=="string"?zt.fromBase64String(n):zt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Sm(n){const e=n.mapValue.fields.__previous_value__;return bm(e)?Sm(e):e}function Jl(n){const e=ti(n.mapValue.fields.__local_write_time__.timestampValue);return new Pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e,t,r,o,a,c,d,p,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=m}}class Zl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Zl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Zl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $u={mapValue:{}};function Xi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?bm(n)?4:DA(n)?9007199254740991:jA(n)?10:11:Ce()}function Ar(n,e){if(n===e)return!0;const t=Xi(n);if(t!==Xi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Jl(n).isEqual(Jl(e));case 3:return function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const c=ti(o.timestampValue),d=ti(a.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(o,a){return Yi(o.bytesValue).isEqual(Yi(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(o,a){return pt(o.geoPointValue.latitude)===pt(a.geoPointValue.latitude)&&pt(o.geoPointValue.longitude)===pt(a.geoPointValue.longitude)}(n,e);case 2:return function(o,a){if("integerValue"in o&&"integerValue"in a)return pt(o.integerValue)===pt(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const c=pt(o.doubleValue),d=pt(a.doubleValue);return c===d?mh(c)===mh(d):isNaN(c)&&isNaN(d)}return!1}(n,e);case 9:return ga(n.arrayValue.values||[],e.arrayValue.values||[],Ar);case 10:case 11:return function(o,a){const c=o.mapValue.fields||{},d=a.mapValue.fields||{};if(Rv(c)!==Rv(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!Ar(c[p],d[p])))return!1;return!0}(n,e);default:return Ce()}}function ec(n,e){return(n.values||[]).find(t=>Ar(t,e))!==void 0}function ya(n,e){if(n===e)return 0;const t=Xi(n),r=Xi(e);if(t!==r)return Qe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Qe(n.booleanValue,e.booleanValue);case 2:return function(a,c){const d=pt(a.integerValue||a.doubleValue),p=pt(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(n,e);case 3:return Dv(n.timestampValue,e.timestampValue);case 4:return Dv(Jl(n),Jl(e));case 5:return Qe(n.stringValue,e.stringValue);case 6:return function(a,c){const d=Yi(a),p=Yi(c);return d.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(a,c){const d=a.split("/"),p=c.split("/");for(let m=0;m<d.length&&m<p.length;m++){const v=Qe(d[m],p[m]);if(v!==0)return v}return Qe(d.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,c){const d=Qe(pt(a.latitude),pt(c.latitude));return d!==0?d:Qe(pt(a.longitude),pt(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Vv(n.arrayValue,e.arrayValue);case 10:return function(a,c){var d,p,m,v;const w=a.fields||{},E=c.fields||{},b=(d=w.value)===null||d===void 0?void 0:d.arrayValue,L=(p=E.value)===null||p===void 0?void 0:p.arrayValue,V=Qe(((m=b?.values)===null||m===void 0?void 0:m.length)||0,((v=L?.values)===null||v===void 0?void 0:v.length)||0);return V!==0?V:Vv(b,L)}(n.mapValue,e.mapValue);case 11:return function(a,c){if(a===$u.mapValue&&c===$u.mapValue)return 0;if(a===$u.mapValue)return 1;if(c===$u.mapValue)return-1;const d=a.fields||{},p=Object.keys(d),m=c.fields||{},v=Object.keys(m);p.sort(),v.sort();for(let w=0;w<p.length&&w<v.length;++w){const E=Qe(p[w],v[w]);if(E!==0)return E;const b=ya(d[p[w]],m[v[w]]);if(b!==0)return b}return Qe(p.length,v.length)}(n.mapValue,e.mapValue);default:throw Ce()}}function Dv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Qe(n,e);const t=ti(n),r=ti(e),o=Qe(t.seconds,r.seconds);return o!==0?o:Qe(t.nanos,r.nanos)}function Vv(n,e){const t=n.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const a=ya(t[o],r[o]);if(a)return a}return Qe(t.length,r.length)}function va(n){return Ap(n)}function Ap(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=ti(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Yi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Se.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",o=!0;for(const a of t.values||[])o?o=!1:r+=",",r+=Ap(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const c of r)a?a=!1:o+=",",o+=`${c}:${Ap(t.fields[c])}`;return o+"}"}(n.mapValue):Ce()}function Cp(n){return!!n&&"integerValue"in n}function Im(n){return!!n&&"arrayValue"in n}function Lv(n){return!!n&&"nullValue"in n}function Ov(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function th(n){return!!n&&"mapValue"in n}function jA(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Ol(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Pa(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ol(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ol(n.arrayValue.values[t]);return e}return Object.assign({},n)}function DA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.value=e}static empty(){return new Mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!th(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ol(t)}setAll(e){let t=Ft.emptyPath(),r={},o=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,r,o),r={},o=[],t=d.popLast()}c?r[d.lastSegment()]=Ol(c):o.push(d.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,o)}delete(e){const t=this.field(e.popLast());th(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ar(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];th(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Pa(t,(o,a)=>e[o]=a);for(const o of r)delete e[o]}clone(){return new Mn(Ol(this.value))}}function X_(n){const e=[];return Pa(n.fields,(t,r)=>{const o=new Ft([t]);if(th(r)){const a=X_(r.mapValue).fields;if(a.length===0)e.push(o);else for(const c of a)e.push(o.child(c))}else e.push(o)}),new ir(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e,t,r,o,a,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=a,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Yt(e,0,Re.min(),Re.min(),Re.min(),Mn.empty(),0)}static newFoundDocument(e,t,r,o){return new Yt(e,1,t,Re.min(),r,o,0)}static newNoDocument(e,t){return new Yt(e,2,t,Re.min(),Re.min(),Mn.empty(),0)}static newUnknownDocument(e,t){return new Yt(e,3,t,Re.min(),Re.min(),Mn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,t){this.position=e,this.inclusive=t}}function Mv(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const a=e[o],c=n.position[o];if(a.field.isKeyField()?r=Se.comparator(Se.fromName(c.referenceValue),t.key):r=ya(c,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Uv(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ar(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,t="asc"){this.field=e,this.dir=t}}function VA(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let J_=class{};class Nt extends J_{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new OA(e,t,r):t==="array-contains"?new FA(e,r):t==="in"?new BA(e,r):t==="not-in"?new zA(e,r):t==="array-contains-any"?new $A(e,r):new Nt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new MA(e,r):new UA(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ya(t,this.value)):t!==null&&Xi(this.value)===Xi(t)&&this.matchesComparison(ya(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cr extends J_{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Cr(e,t)}matches(e){return Z_(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Z_(n){return n.op==="and"}function eE(n){return LA(n)&&Z_(n)}function LA(n){for(const e of n.filters)if(e instanceof Cr)return!1;return!0}function Rp(n){if(n instanceof Nt)return n.field.canonicalString()+n.op.toString()+va(n.value);if(eE(n))return n.filters.map(e=>Rp(e)).join(",");{const e=n.filters.map(t=>Rp(t)).join(",");return`${n.op}(${e})`}}function tE(n,e){return n instanceof Nt?function(r,o){return o instanceof Nt&&r.op===o.op&&r.field.isEqual(o.field)&&Ar(r.value,o.value)}(n,e):n instanceof Cr?function(r,o){return o instanceof Cr&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((a,c,d)=>a&&tE(c,o.filters[d]),!0):!1}(n,e):void Ce()}function nE(n){return n instanceof Nt?function(t){return`${t.field.canonicalString()} ${t.op} ${va(t.value)}`}(n):n instanceof Cr?function(t){return t.op.toString()+" {"+t.getFilters().map(nE).join(" ,")+"}"}(n):"Filter"}class OA extends Nt{constructor(e,t,r){super(e,t,r),this.key=Se.fromName(r.referenceValue)}matches(e){const t=Se.comparator(e.key,this.key);return this.matchesComparison(t)}}class MA extends Nt{constructor(e,t){super(e,"in",t),this.keys=rE("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class UA extends Nt{constructor(e,t){super(e,"not-in",t),this.keys=rE("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function rE(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Se.fromName(r.referenceValue))}class FA extends Nt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Im(t)&&ec(t.arrayValue,this.value)}}class BA extends Nt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ec(this.value.arrayValue,t)}}class zA extends Nt{constructor(e,t){super(e,"not-in",t)}matches(e){if(ec(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!ec(this.value.arrayValue,t)}}class $A extends Nt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Im(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ec(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e,t=null,r=[],o=[],a=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=a,this.startAt=c,this.endAt=d,this.ue=null}}function Fv(n,e=null,t=[],r=[],o=null,a=null,c=null){return new qA(n,e,t,r,o,a,c)}function Nm(n){const e=De(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Rp(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),zh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>va(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>va(r)).join(",")),e.ue=t}return e.ue}function Pm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!VA(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!tE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Uv(n.startAt,e.startAt)&&Uv(n.endAt,e.endAt)}function jp(n){return Se.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,t=null,r=[],o=[],a=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=a,this.limitType=c,this.startAt=d,this.endAt=p,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function GA(n,e,t,r,o,a,c,d){return new $h(n,e,t,r,o,a,c,d)}function km(n){return new $h(n)}function Bv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function HA(n){return n.collectionGroup!==null}function Ml(n){const e=De(n);if(e.ce===null){e.ce=[];const t=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Bt(Ft.comparator);return c.filters.forEach(p=>{p.getFlattenedFilters().forEach(m=>{m.isInequality()&&(d=d.add(m.field))})}),d})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.ce.push(new yh(a,r))}),t.has(Ft.keyField().canonicalString())||e.ce.push(new yh(Ft.keyField(),r))}return e.ce}function Ir(n){const e=De(n);return e.le||(e.le=WA(e,Ml(n))),e.le}function WA(n,e){if(n.limitType==="F")return Fv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(o=>{const a=o.dir==="desc"?"asc":"desc";return new yh(o.field,a)});const t=n.endAt?new gh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new gh(n.startAt.position,n.startAt.inclusive):null;return Fv(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Dp(n,e,t){return new $h(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function qh(n,e){return Pm(Ir(n),Ir(e))&&n.limitType===e.limitType}function sE(n){return`${Nm(Ir(n))}|lt:${n.limitType}`}function ea(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(o=>nE(o)).join(", ")}]`),zh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(o=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(o)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(o=>va(o)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(o=>va(o)).join(",")),`Target(${r})`}(Ir(n))}; limitType=${n.limitType})`}function Gh(n,e){return e.isFoundDocument()&&function(r,o){const a=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Se.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,o){for(const a of Ml(r))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0}(n,e)&&function(r,o){for(const a of r.filters)if(!a.matches(o))return!1;return!0}(n,e)&&function(r,o){return!(r.startAt&&!function(c,d,p){const m=Mv(c,d,p);return c.inclusive?m<=0:m<0}(r.startAt,Ml(r),o)||r.endAt&&!function(c,d,p){const m=Mv(c,d,p);return c.inclusive?m>=0:m>0}(r.endAt,Ml(r),o))}(n,e)}function KA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function iE(n){return(e,t)=>{let r=!1;for(const o of Ml(n)){const a=QA(o,e,t);if(a!==0)return a;r=r||o.field.isKeyField()}return 0}}function QA(n,e,t){const r=n.field.isKeyField()?Se.comparator(e.key,t.key):function(a,c,d){const p=c.data.field(a),m=d.data.field(a);return p!==null&&m!==null?ya(p,m):Ce()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ce()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,a]of r)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Pa(this.inner,(t,r)=>{for(const[o,a]of r)e(o,a)})}isEmpty(){return Q_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA=new ct(Se.comparator);function us(){return YA}const oE=new ct(Se.comparator);function jl(...n){let e=oE;for(const t of n)e=e.insert(t.key,t);return e}function aE(n){let e=oE;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Bi(){return Ul()}function lE(){return Ul()}function Ul(){return new ka(n=>n.toString(),(n,e)=>n.isEqual(e))}const XA=new ct(Se.comparator),JA=new Bt(Se.comparator);function Be(...n){let e=JA;for(const t of n)e=e.add(t);return e}const ZA=new Bt(Qe);function e2(){return ZA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mh(e)?"-0":e}}function cE(n){return{integerValue:""+n}}function t2(n,e){return AA(e)?cE(e):Am(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(){this._=void 0}}function n2(n,e,t){return n instanceof vh?function(o,a){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&bm(a)&&(a=Sm(a)),a&&(c.fields.__previous_value__=a),{mapValue:c}}(t,e):n instanceof tc?hE(n,e):n instanceof nc?dE(n,e):function(o,a){const c=uE(o,a),d=zv(c)+zv(o.Pe);return Cp(c)&&Cp(o.Pe)?cE(d):Am(o.serializer,d)}(n,e)}function r2(n,e,t){return n instanceof tc?hE(n,e):n instanceof nc?dE(n,e):t}function uE(n,e){return n instanceof xh?function(r){return Cp(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class vh extends Hh{}class tc extends Hh{constructor(e){super(),this.elements=e}}function hE(n,e){const t=fE(e);for(const r of n.elements)t.some(o=>Ar(o,r))||t.push(r);return{arrayValue:{values:t}}}class nc extends Hh{constructor(e){super(),this.elements=e}}function dE(n,e){let t=fE(e);for(const r of n.elements)t=t.filter(o=>!Ar(o,r));return{arrayValue:{values:t}}}class xh extends Hh{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function zv(n){return pt(n.integerValue||n.doubleValue)}function fE(n){return Im(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function s2(n,e){return n.field.isEqual(e.field)&&function(r,o){return r instanceof tc&&o instanceof tc||r instanceof nc&&o instanceof nc?ga(r.elements,o.elements,Ar):r instanceof xh&&o instanceof xh?Ar(r.Pe,o.Pe):r instanceof vh&&o instanceof vh}(n.transform,e.transform)}class i2{constructor(e,t){this.version=e,this.transformResults=t}}class ns{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ns}static exists(e){return new ns(void 0,e)}static updateTime(e){return new ns(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Wh{}function pE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new gE(n.key,ns.none()):new gc(n.key,n.data,ns.none());{const t=n.data,r=Mn.empty();let o=new Bt(Ft.comparator);for(let a of e.fields)if(!o.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?r.delete(a):r.set(a,c),o=o.add(a)}return new so(n.key,r,new ir(o.toArray()),ns.none())}}function o2(n,e,t){n instanceof gc?function(o,a,c){const d=o.value.clone(),p=qv(o.fieldTransforms,a,c.transformResults);d.setAll(p),a.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(n,e,t):n instanceof so?function(o,a,c){if(!nh(o.precondition,a))return void a.convertToUnknownDocument(c.version);const d=qv(o.fieldTransforms,a,c.transformResults),p=a.data;p.setAll(mE(o)),p.setAll(d),a.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(n,e,t):function(o,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function Fl(n,e,t,r){return n instanceof gc?function(a,c,d,p){if(!nh(a.precondition,c))return d;const m=a.value.clone(),v=Gv(a.fieldTransforms,p,c);return m.setAll(v),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof so?function(a,c,d,p){if(!nh(a.precondition,c))return d;const m=Gv(a.fieldTransforms,p,c),v=c.data;return v.setAll(mE(a)),v.setAll(m),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(w=>w.field))}(n,e,t,r):function(a,c,d){return nh(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(n,e,t)}function a2(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),a=uE(r.transform,o||null);a!=null&&(t===null&&(t=Mn.empty()),t.set(r.field,a))}return t||null}function $v(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&ga(r,o,(a,c)=>s2(a,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class gc extends Wh{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class so extends Wh{constructor(e,t,r,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function mE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function qv(n,e,t){const r=new Map;Xe(n.length===t.length);for(let o=0;o<t.length;o++){const a=n[o],c=a.transform,d=e.data.field(a.field);r.set(a.field,r2(c,d,t[o]))}return r}function Gv(n,e,t){const r=new Map;for(const o of n){const a=o.transform,c=t.data.field(o.field);r.set(o.field,n2(a,c,e))}return r}class gE extends Wh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class l2 extends Wh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&o2(a,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Fl(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Fl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=lE();return this.mutations.forEach(o=>{const a=e.get(o.key),c=a.overlayedDocument;let d=this.applyToLocalView(c,a.mutatedFields);d=t.has(o.key)?null:d;const p=pE(c,d);p!==null&&r.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(Re.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Be())}isEqual(e){return this.batchId===e.batchId&&ga(this.mutations,e.mutations,(t,r)=>$v(t,r))&&ga(this.baseMutations,e.baseMutations,(t,r)=>$v(t,r))}}class Cm{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Xe(e.mutations.length===r.length);let o=function(){return XA}();const a=e.mutations;for(let c=0;c<a.length;c++)o=o.insert(a[c].key,r[c].version);return new Cm(e,t,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt,Ge;function d2(n){switch(n){default:return Ce();case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0}}function yE(n){if(n===void 0)return cs("GRPC error has no .code"),ie.UNKNOWN;switch(n){case xt.OK:return ie.OK;case xt.CANCELLED:return ie.CANCELLED;case xt.UNKNOWN:return ie.UNKNOWN;case xt.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case xt.INTERNAL:return ie.INTERNAL;case xt.UNAVAILABLE:return ie.UNAVAILABLE;case xt.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case xt.NOT_FOUND:return ie.NOT_FOUND;case xt.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case xt.ABORTED:return ie.ABORTED;case xt.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case xt.DATA_LOSS:return ie.DATA_LOSS;default:return Ce()}}(Ge=xt||(xt={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2=new qi([4294967295,4294967295],0);function Hv(n){const e=f2().encode(n),t=new B_;return t.update(e),new Uint8Array(t.digest())}function Wv(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new qi([t,r],0),new qi([o,a],0)]}class Rm{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Dl(`Invalid padding: ${t}`);if(r<0)throw new Dl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Dl(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Dl(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=qi.fromNumber(this.Ie)}Ee(e,t,r){let o=e.add(t.multiply(qi.fromNumber(r)));return o.compare(p2)===1&&(o=new qi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=Hv(e),[r,o]=Wv(t);for(let a=0;a<this.hashCount;a++){const c=this.Ee(r,o,a);if(!this.de(c))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new Rm(a,o,t);return r.forEach(d=>c.insert(d)),c}insert(e){if(this.Ie===0)return;const t=Hv(e),[r,o]=Wv(t);for(let a=0;a<this.hashCount;a++){const c=this.Ee(r,o,a);this.Ae(c)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Dl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,t,r,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,yc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Kh(Re.min(),o,new ct(Qe),us(),Be())}}class yc{constructor(e,t,r,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new yc(r,t,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,t,r,o){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=o}}class vE{constructor(e,t){this.targetId=e,this.me=t}}class xE{constructor(e,t,r=zt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Kv{constructor(){this.fe=0,this.ge=Yv(),this.pe=zt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Be(),t=Be(),r=Be();return this.ge.forEach((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Ce()}}),new yc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=Yv()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Xe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class m2{constructor(e){this.Le=e,this.Be=new Map,this.ke=us(),this.qe=Qv(),this.Qe=new ct(Qe)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Ce()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,o)=>{this.ze(o)&&t(o)})}He(e){const t=e.targetId,r=e.me.count,o=this.Je(t);if(o){const a=o.target;if(jp(a))if(r===0){const c=new Se(a.path);this.Ue(t,c,Yt.newNoDocument(c,Re.min()))}else Xe(r===1);else{const c=this.Ye(t);if(c!==r){const d=this.Ze(e),p=d?this.Xe(d,e,c):1;if(p!==0){this.je(t);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,m)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:a=0}=t;let c,d;try{c=Yi(r).toUint8Array()}catch(p){if(p instanceof Y_)return ma("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Rm(c,o,a)}catch(p){return ma(p instanceof Dl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.Ie===0?null:d}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let o=0;return r.forEach(a=>{const c=this.Le.tt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Ue(t,a,null),o++)}),o}rt(e){const t=new Map;this.Be.forEach((a,c)=>{const d=this.Je(c);if(d){if(a.current&&jp(d.target)){const p=new Se(d.target.path);this.ke.get(p)!==null||this.it(c,p)||this.Ue(c,p,Yt.newNoDocument(p,e))}a.be&&(t.set(c,a.ve()),a.Ce())}});let r=Be();this.qe.forEach((a,c)=>{let d=!0;c.forEachWhile(p=>{const m=this.Je(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(a))}),this.ke.forEach((a,c)=>c.setReadTime(e));const o=new Kh(e,t,this.Qe,this.ke,r);return this.ke=us(),this.qe=Qv(),this.Qe=new ct(Qe),o}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,t)?o.Fe(t,1):o.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Kv,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Bt(Qe),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||ye("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Kv),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Qv(){return new ct(Se.comparator)}function Yv(){return new ct(Se.comparator)}const g2={asc:"ASCENDING",desc:"DESCENDING"},y2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},v2={and:"AND",or:"OR"};class x2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Vp(n,e){return n.useProto3Json||zh(e)?e:{value:e}}function wh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function w2(n,e){return wh(n,e.toTimestamp())}function Nr(n){return Xe(!!n),Re.fromTimestamp(function(t){const r=ti(t);return new Pt(r.seconds,r.nanos)}(n))}function jm(n,e){return Lp(n,e).canonicalString()}function Lp(n,e){const t=function(o){return new ht(["projects",o.projectId,"databases",o.database])}(n).child("documents");return e===void 0?t:t.child(e)}function _E(n){const e=ht.fromString(n);return Xe(IE(e)),e}function Op(n,e){return jm(n.databaseId,e.path)}function Qf(n,e){const t=_E(e);if(t.get(1)!==n.databaseId.projectId)throw new be(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new be(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Se(TE(t))}function EE(n,e){return jm(n.databaseId,e)}function _2(n){const e=_E(n);return e.length===4?ht.emptyPath():TE(e)}function Mp(n){return new ht(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function TE(n){return Xe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Xv(n,e,t){return{name:Op(n,e),fields:t.value.mapValue.fields}}function E2(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ce()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=function(m,v){return m.useProto3Json?(Xe(v===void 0||typeof v=="string"),zt.fromBase64String(v||"")):(Xe(v===void 0||v instanceof Buffer||v instanceof Uint8Array),zt.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(m){const v=m.code===void 0?ie.UNKNOWN:yE(m.code);return new be(v,m.message||"")}(c);t=new xE(r,o,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Qf(n,r.document.name),a=Nr(r.document.updateTime),c=r.document.createTime?Nr(r.document.createTime):Re.min(),d=new Mn({mapValue:{fields:r.document.fields}}),p=Yt.newFoundDocument(o,a,c,d),m=r.targetIds||[],v=r.removedTargetIds||[];t=new rh(m,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Qf(n,r.document),a=r.readTime?Nr(r.readTime):Re.min(),c=Yt.newNoDocument(o,a),d=r.removedTargetIds||[];t=new rh([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Qf(n,r.document),a=r.removedTargetIds||[];t=new rh([],a,o,null)}else{if(!("filter"in e))return Ce();{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:a}=r,c=new h2(o,a),d=r.targetId;t=new vE(d,c)}}return t}function T2(n,e){let t;if(e instanceof gc)t={update:Xv(n,e.key,e.value)};else if(e instanceof gE)t={delete:Op(n,e.key)};else if(e instanceof so)t={update:Xv(n,e.key,e.data),updateMask:R2(e.fieldMask)};else{if(!(e instanceof l2))return Ce();t={verify:Op(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,c){const d=c.transform;if(d instanceof vh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof tc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof nc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof xh)return{fieldPath:c.field.canonicalString(),increment:d.Pe};throw Ce()}(0,r))),e.precondition.isNone||(t.currentDocument=function(o,a){return a.updateTime!==void 0?{updateTime:w2(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ce()}(n,e.precondition)),t}function b2(n,e){return n&&n.length>0?(Xe(e!==void 0),n.map(t=>function(o,a){let c=o.updateTime?Nr(o.updateTime):Nr(a);return c.isEqual(Re.min())&&(c=Nr(a)),new i2(c,o.transformResults||[])}(t,e))):[]}function S2(n,e){return{documents:[EE(n,e.path)]}}function I2(n,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=EE(n,o);const a=function(m){if(m.length!==0)return SE(Cr.create(m,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const c=function(m){if(m.length!==0)return m.map(v=>function(E){return{field:ta(E.field),direction:k2(E.dir)}}(v))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Vp(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{_t:t,parent:o}}function N2(n){let e=_2(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Xe(r===1);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=function(w){const E=bE(w);return E instanceof Cr&&eE(E)?E.getFilters():[E]}(t.where));let c=[];t.orderBy&&(c=function(w){return w.map(E=>function(L){return new yh(na(L.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(L.direction))}(E))}(t.orderBy));let d=null;t.limit&&(d=function(w){let E;return E=typeof w=="object"?w.value:w,zh(E)?null:E}(t.limit));let p=null;t.startAt&&(p=function(w){const E=!!w.before,b=w.values||[];return new gh(b,E)}(t.startAt));let m=null;return t.endAt&&(m=function(w){const E=!w.before,b=w.values||[];return new gh(b,E)}(t.endAt)),GA(e,o,c,a,d,"F",p,m)}function P2(n,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function bE(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=na(t.unaryFilter.field);return Nt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=na(t.unaryFilter.field);return Nt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=na(t.unaryFilter.field);return Nt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=na(t.unaryFilter.field);return Nt.create(c,"!=",{nullValue:"NULL_VALUE"});default:return Ce()}}(n):n.fieldFilter!==void 0?function(t){return Nt.create(na(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ce()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Cr.create(t.compositeFilter.filters.map(r=>bE(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ce()}}(t.compositeFilter.op))}(n):Ce()}function k2(n){return g2[n]}function A2(n){return y2[n]}function C2(n){return v2[n]}function ta(n){return{fieldPath:n.canonicalString()}}function na(n){return Ft.fromServerFormat(n.fieldPath)}function SE(n){return n instanceof Nt?function(t){if(t.op==="=="){if(Ov(t.value))return{unaryFilter:{field:ta(t.field),op:"IS_NAN"}};if(Lv(t.value))return{unaryFilter:{field:ta(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ov(t.value))return{unaryFilter:{field:ta(t.field),op:"IS_NOT_NAN"}};if(Lv(t.value))return{unaryFilter:{field:ta(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ta(t.field),op:A2(t.op),value:t.value}}}(n):n instanceof Cr?function(t){const r=t.getFilters().map(o=>SE(o));return r.length===1?r[0]:{compositeFilter:{op:C2(t.op),filters:r}}}(n):Ce()}function R2(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function IE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,t,r,o,a=Re.min(),c=Re.min(),d=zt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Ws(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ws(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e){this.ct=e}}function D2(n){const e=N2({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Dp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(){this.un=new L2}addToCollectionParentIndex(e,t){return this.un.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(ei.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(ei.min())}updateCollectionGroup(e,t,r){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class L2{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Bt(ht.comparator),a=!o.has(r);return this.index[t]=o.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Bt(ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new xa(0)}static kn(){return new xa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(){this.changes=new ka(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Yt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?re.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(r!==null&&Fl(r.mutation,o,ir.empty(),Pt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Be()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Be()){const o=Bi();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(a=>{let c=jl();return a.forEach((d,p)=>{c=c.insert(d,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Bi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Be()))}populateOverlays(e,t,r){const o=[];return r.forEach(a=>{t.has(a)||o.push(a)}),this.documentOverlayCache.getOverlays(e,o).next(a=>{a.forEach((c,d)=>{t.set(c,d)})})}computeViews(e,t,r,o){let a=us();const c=Ul(),d=function(){return Ul()}();return t.forEach((p,m)=>{const v=r.get(m.key);o.has(m.key)&&(v===void 0||v.mutation instanceof so)?a=a.insert(m.key,m):v!==void 0?(c.set(m.key,v.mutation.getFieldMask()),Fl(v.mutation,m,v.mutation.getFieldMask(),Pt.now())):c.set(m.key,ir.empty())}),this.recalculateAndSaveOverlays(e,a).next(p=>(p.forEach((m,v)=>c.set(m,v)),t.forEach((m,v)=>{var w;return d.set(m,new M2(v,(w=c.get(m))!==null&&w!==void 0?w:null))}),d))}recalculateAndSaveOverlays(e,t){const r=Ul();let o=new ct((c,d)=>c-d),a=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const d of c)d.keys().forEach(p=>{const m=t.get(p);if(m===null)return;let v=r.get(p)||ir.empty();v=d.applyToLocalView(m,v),r.set(p,v);const w=(o.get(d.batchId)||Be()).add(p);o=o.insert(d.batchId,w)})}).next(()=>{const c=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),m=p.key,v=p.value,w=lE();v.forEach(E=>{if(!a.has(E)){const b=pE(t.get(E),r.get(E));b!==null&&w.set(E,b),a=a.add(E)}}),c.push(this.documentOverlayCache.saveOverlays(e,m,w))}return re.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,o){return function(c){return Se.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):HA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(a=>{const c=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-a.size):re.resolve(Bi());let d=-1,p=a;return c.next(m=>re.forEach(m,(v,w)=>(d<w.largestBatchId&&(d=w.largestBatchId),a.get(v)?re.resolve():this.remoteDocumentCache.getEntry(e,v).next(E=>{p=p.insert(v,E)}))).next(()=>this.populateOverlays(e,m,a)).next(()=>this.computeViews(e,p,m,Be())).next(v=>({batchId:d,changes:aE(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Se(t)).next(r=>{let o=jl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const a=t.collectionGroup;let c=jl();return this.indexManager.getCollectionParents(e,a).next(d=>re.forEach(d,p=>{const m=function(w,E){return new $h(E,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(t,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,o).next(v=>{v.forEach((w,E)=>{c=c.insert(w,E)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,o))).next(c=>{a.forEach((p,m)=>{const v=m.getKey();c.get(v)===null&&(c=c.insert(v,Yt.newInvalidDocument(v)))});let d=jl();return c.forEach((p,m)=>{const v=a.get(p);v!==void 0&&Fl(v.mutation,m,ir.empty(),Pt.now()),Gh(t,m)&&(d=d.insert(p,m))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return re.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:Nr(o.createTime)}}(t)),re.resolve()}getNamedQuery(e,t){return re.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(o){return{name:o.name,query:D2(o.bundledQuery),readTime:Nr(o.readTime)}}(t)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(){this.overlays=new ct(Se.comparator),this.Ir=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Bi();return re.forEach(t,o=>this.getOverlay(e,o).next(a=>{a!==null&&r.set(o,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,a)=>{this.ht(e,t,a)}),re.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Ir.get(r);return o!==void 0&&(o.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(r)),re.resolve()}getOverlaysForCollection(e,t,r){const o=Bi(),a=t.length+1,c=new Se(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,m=p.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&p.largestBatchId>r&&o.set(p.getKey(),p)}return re.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let a=new ct((m,v)=>m-v);const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let v=a.get(m.largestBatchId);v===null&&(v=Bi(),a=a.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const d=Bi(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((m,v)=>d.set(m,v)),!(d.size()>=o)););return re.resolve(d)}ht(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const c=this.Ir.get(o.largestBatchId).delete(r.key);this.Ir.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new u2(t,r));let a=this.Ir.get(t);a===void 0&&(a=Be(),this.Ir.set(t,a)),this.Ir.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(){this.sessionToken=zt.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(){this.Tr=new Bt(Dt.Er),this.dr=new Bt(Dt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new Dt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Dt(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new Se(new ht([])),r=new Dt(t,e),o=new Dt(t,e+1),a=[];return this.dr.forEachInRange([r,o],c=>{this.Vr(c),a.push(c.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Se(new ht([])),r=new Dt(t,e),o=new Dt(t,e+1);let a=Be();return this.dr.forEachInRange([r,o],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new Dt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Dt{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Se.comparator(e.key,t.key)||Qe(e.wr,t.wr)}static Ar(e,t){return Qe(e.wr,t.wr)||Se.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Bt(Dt.Er)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new c2(a,t,r,o);this.mutationQueue.push(c);for(const d of o)this.br=this.br.add(new Dt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return re.resolve(c)}lookupMutationBatch(e,t){return re.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.vr(r),a=o<0?0:o;return re.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Dt(t,0),o=new Dt(t,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,o],c=>{const d=this.Dr(c.wr);a.push(d)}),re.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Bt(Qe);return t.forEach(o=>{const a=new Dt(o,0),c=new Dt(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,c],d=>{r=r.add(d.wr)})}),re.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let a=r;Se.isDocumentKey(a)||(a=a.child(""));const c=new Dt(new Se(a),0);let d=new Bt(Qe);return this.br.forEachWhile(p=>{const m=p.key.path;return!!r.isPrefixOf(m)&&(m.length===o&&(d=d.add(p.wr)),!0)},c),re.resolve(this.Cr(d))}Cr(e){const t=[];return e.forEach(r=>{const o=this.Dr(r);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Xe(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return re.forEach(t.mutations,o=>{const a=new Dt(o.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new Dt(t,0),o=this.br.firstAfterOrEqual(r);return re.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e){this.Mr=e,this.docs=function(){return new ct(Se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),a=o?o.size:0,c=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return re.resolve(r?r.document.mutableCopy():Yt.newInvalidDocument(t))}getEntries(e,t){let r=us();return t.forEach(o=>{const a=this.docs.get(o);r=r.insert(o,a?a.document.mutableCopy():Yt.newInvalidDocument(o))}),re.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let a=us();const c=t.path,d=new Se(c.child("")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:m,value:{document:v}}=p.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||IA(SA(v),r)<=0||(o.has(v.key)||Gh(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return re.resolve(a)}getAllFromCollectionGroup(e,t,r,o){Ce()}Or(e,t){return re.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new G2(this)}getSize(e){return re.resolve(this.size)}}class G2 extends O2{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.cr.addEntry(e,o)):this.cr.removeEntry(r)}),re.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e){this.persistence=e,this.Nr=new ka(t=>Nm(t),Pm),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Dm,this.targetCount=0,this.kr=xa.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,o)=>t(o)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),re.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new xa(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.Kn(t),re.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,r){let o=0;const a=[];return this.Nr.forEach((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.Nr.delete(c),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)}),re.waitFor(a).next(()=>o)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return re.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),re.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach(c=>{a.push(o.markPotentiallyOrphaned(e,c))}),re.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),re.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return re.resolve(r)}containsKey(e,t){return re.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Tm(0),this.Kr=!1,this.Kr=!0,this.$r=new z2,this.referenceDelegate=e(this),this.Ur=new H2(this),this.indexManager=new V2,this.remoteDocumentCache=function(o){return new q2(o)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new j2(t),this.Gr=new F2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new B2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new $2(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){ye("MemoryPersistence","Starting transaction:",e);const o=new K2(this.Qr.next());return this.referenceDelegate.zr(),r(o).next(a=>this.referenceDelegate.jr(o).next(()=>a)).toPromise().then(a=>(o.raiseOnCommittedEvent(),a))}Hr(e,t){return re.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class K2 extends PA{constructor(e){super(),this.currentSequenceNumber=e}}class Vm{constructor(e){this.persistence=e,this.Jr=new Dm,this.Yr=null}static Zr(e){return new Vm(e)}get Xr(){if(this.Yr)return this.Yr;throw Ce()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),re.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),re.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(o=>this.Xr.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(a=>this.Xr.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.Xr,r=>{const o=Se.fromPath(r);return this.ei(e,o).next(a=>{a||t.removeEntry(o,Re.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return re.or([()=>re.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=o}static Wi(e,t){let r=Be(),o=Be();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new Lm(e,t.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return DI()?8:kA(Xt())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,o){const a={result:null};return this.Yi(e,t).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.Zi(e,t,o,r).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new Q2;return this.Xi(e,t,c).next(d=>{if(a.result=d,this.zi)return this.es(e,t,c,d.size)})}).next(()=>a.result)}es(e,t,r,o){return r.documentReadCount<this.ji?(Il()<=$e.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",ea(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),re.resolve()):(Il()<=$e.DEBUG&&ye("QueryEngine","Query:",ea(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.Hi*o?(Il()<=$e.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",ea(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ir(t))):re.resolve())}Yi(e,t){if(Bv(t))return re.resolve(null);let r=Ir(t);return this.indexManager.getIndexType(e,r).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=Dp(t,null,"F"),r=Ir(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=Be(...a);return this.Ji.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,r).next(p=>{const m=this.ts(t,d);return this.ns(t,m,c,p.readTime)?this.Yi(e,Dp(t,null,"F")):this.rs(e,m,t,p)}))})))}Zi(e,t,r,o){return Bv(t)||o.isEqual(Re.min())?re.resolve(null):this.Ji.getDocuments(e,r).next(a=>{const c=this.ts(t,a);return this.ns(t,c,r,o)?re.resolve(null):(Il()<=$e.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ea(t)),this.rs(e,c,t,bA(o,-1)).next(d=>d))})}ts(e,t){let r=new Bt(iE(e));return t.forEach((o,a)=>{Gh(e,a)&&(r=r.add(a))}),r}ns(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}Xi(e,t,r){return Il()<=$e.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",ea(t)),this.Ji.getDocumentsMatchingQuery(e,t,ei.min(),r)}rs(e,t,r,o){return this.Ji.getDocumentsMatchingQuery(e,r,o).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e,t,r,o){this.persistence=e,this.ss=t,this.serializer=o,this.os=new ct(Qe),this._s=new ka(a=>Nm(a),Pm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new U2(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function J2(n,e,t,r){return new X2(n,e,t,r)}async function NE(n,e){const t=De(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(a=>(o=a,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],d=[];let p=Be();for(const m of o){c.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}for(const m of a){d.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(r,p).next(m=>({hs:m,removedBatchIds:c,addedBatchIds:d}))})})}function Z2(n,e){const t=De(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),a=t.cs.newChangeBuffer({trackRemovals:!0});return function(d,p,m,v){const w=m.batch,E=w.keys();let b=re.resolve();return E.forEach(L=>{b=b.next(()=>v.getEntry(p,L)).next(V=>{const P=m.docVersions.get(L);Xe(P!==null),V.version.compareTo(P)<0&&(w.applyToRemoteDocument(V,m),V.isValidDocument()&&(V.setReadTime(m.commitVersion),v.addEntry(V)))})}),b.next(()=>d.mutationQueue.removeMutationBatch(p,w))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let p=Be();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(p=p.add(d.batch.mutations[m].key));return p}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function PE(n){const e=De(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function eC(n,e){const t=De(n),r=e.snapshotVersion;let o=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.cs.newChangeBuffer({trackRemovals:!0});o=t.os;const d=[];e.targetChanges.forEach((v,w)=>{const E=o.get(w);if(!E)return;d.push(t.Ur.removeMatchingKeys(a,v.removedDocuments,w).next(()=>t.Ur.addMatchingKeys(a,v.addedDocuments,w)));let b=E.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?b=b.withResumeToken(zt.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):v.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(v.resumeToken,r)),o=o.insert(w,b),function(V,P,D){return V.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8?!0:D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0}(E,b,v)&&d.push(t.Ur.updateTargetData(a,b))});let p=us(),m=Be();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))}),d.push(tC(a,c,e.documentUpdates).next(v=>{p=v.Ps,m=v.Is})),!r.isEqual(Re.min())){const v=t.Ur.getLastRemoteSnapshotVersion(a).next(w=>t.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r));d.push(v)}return re.waitFor(d).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,p,m)).next(()=>p)}).then(a=>(t.os=o,a))}function tC(n,e,t){let r=Be(),o=Be();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let c=us();return t.forEach((d,p)=>{const m=a.get(d);p.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(Re.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):ye("LocalStore","Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",p.version)}),{Ps:c,Is:o}})}function nC(n,e){const t=De(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function rC(n,e){const t=De(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Ur.getTargetData(r,e).next(a=>a?(o=a,re.resolve(o)):t.Ur.allocateTargetId(r).next(c=>(o=new Ws(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.os.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}async function Up(n,e,t){const r=De(n),o=r.os.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,o))}catch(c){if(!mc(c))throw c;ye("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.os=r.os.remove(e),r._s.delete(o.target)}function Jv(n,e,t){const r=De(n);let o=Re.min(),a=Be();return r.persistence.runTransaction("Execute query","readwrite",c=>function(p,m,v){const w=De(p),E=w._s.get(v);return E!==void 0?re.resolve(w.os.get(E)):w.Ur.getTargetData(m,v)}(r,c,Ir(e)).next(d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(c,d.targetId).next(p=>{a=p})}).next(()=>r.ss.getDocumentsMatchingQuery(c,e,t?o:Re.min(),t?a:Be())).next(d=>(sC(r,KA(e),d),{documents:d,Ts:a})))}function sC(n,e,t){let r=n.us.get(e)||Re.min();t.forEach((o,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.us.set(e,r)}class Zv{constructor(){this.activeTargetIds=e2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class iC{constructor(){this.so=new Zv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Zv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ye("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ye("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qu=null;function Yf(){return qu===null?qu=function(){return 268435456+Math.round(2147483648*Math.random())}():qu++,"0x"+qu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt="WebChannelConnection";class cC extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${o}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${a}`}get Fo(){return!1}Mo(t,r,o,a,c){const d=Yf(),p=this.xo(t,r.toUriEncodedString());ye("RestConnection",`Sending RPC '${t}' ${d}:`,p,o);const m={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(m,a,c),this.No(t,p,m,o).then(v=>(ye("RestConnection",`Received RPC '${t}' ${d}: `,v),v),v=>{throw ma("RestConnection",`RPC '${t}' ${d} failed with error: `,v,"url: ",p,"request:",o),v})}Lo(t,r,o,a,c,d){return this.Mo(t,r,o,a,c)}Oo(t,r,o){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Na}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,c)=>t[c]=a),o&&o.headers.forEach((a,c)=>t[c]=a)}xo(t,r){const o=aC[t];return`${this.Do}/v1/${r}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,o){const a=Yf();return new Promise((c,d)=>{const p=new z_;p.setWithCredentials(!0),p.listenOnce($_.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case eh.NO_ERROR:const v=p.getResponseJson();ye(Wt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(v)),c(v);break;case eh.TIMEOUT:ye(Wt,`RPC '${e}' ${a} timed out`),d(new be(ie.DEADLINE_EXCEEDED,"Request time out"));break;case eh.HTTP_ERROR:const w=p.getStatus();if(ye(Wt,`RPC '${e}' ${a} failed with status:`,w,"response text:",p.getResponseText()),w>0){let E=p.getResponseJson();Array.isArray(E)&&(E=E[0]);const b=E?.error;if(b&&b.status&&b.message){const L=function(P){const D=P.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(D)>=0?D:ie.UNKNOWN}(b.status);d(new be(L,b.message))}else d(new be(ie.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new be(ie.UNAVAILABLE,"Connection failed."));break;default:Ce()}}finally{ye(Wt,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(o);ye(Wt,`RPC '${e}' ${a} sending request:`,o),p.send(t,"POST",m,r,15)})}Bo(e,t,r){const o=Yf(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=H_(),d=G_(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Oo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const v=a.join("");ye(Wt,`Creating RPC '${e}' stream ${o}: ${v}`,p);const w=c.createWebChannel(v,p);let E=!1,b=!1;const L=new lC({Io:P=>{b?ye(Wt,`Not sending because RPC '${e}' stream ${o} is closed:`,P):(E||(ye(Wt,`Opening RPC '${e}' stream ${o} transport.`),w.open(),E=!0),ye(Wt,`RPC '${e}' stream ${o} sending:`,P),w.send(P))},To:()=>w.close()}),V=(P,D,O)=>{P.listen(D,j=>{try{O(j)}catch(W){setTimeout(()=>{throw W},0)}})};return V(w,Rl.EventType.OPEN,()=>{b||(ye(Wt,`RPC '${e}' stream ${o} transport opened.`),L.yo())}),V(w,Rl.EventType.CLOSE,()=>{b||(b=!0,ye(Wt,`RPC '${e}' stream ${o} transport closed`),L.So())}),V(w,Rl.EventType.ERROR,P=>{b||(b=!0,ma(Wt,`RPC '${e}' stream ${o} transport errored:`,P),L.So(new be(ie.UNAVAILABLE,"The operation could not be completed")))}),V(w,Rl.EventType.MESSAGE,P=>{var D;if(!b){const O=P.data[0];Xe(!!O);const j=O,W=j.error||((D=j[0])===null||D===void 0?void 0:D.error);if(W){ye(Wt,`RPC '${e}' stream ${o} received error:`,W);const Z=W.status;let ae=function(N){const M=xt[N];if(M!==void 0)return yE(M)}(Z),R=W.message;ae===void 0&&(ae=ie.INTERNAL,R="Unknown error status: "+Z+" with message "+W.message),b=!0,L.So(new be(ae,R)),w.close()}else ye(Wt,`RPC '${e}' stream ${o} received:`,O),L.bo(O)}}),V(d,q_.STAT_EVENT,P=>{P.stat===kp.PROXY?ye(Wt,`RPC '${e}' stream ${o} detected buffering proxy`):P.stat===kp.NOPROXY&&ye(Wt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{L.wo()},0),L}}function Xf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(n){return new x2(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e,t,r=1e3,o=1.5,a=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=o,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),o=Math.max(0,t-r);o>0&&ye("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e,t,r,o,a,c,d,p){this.ui=e,this.Ho=r,this.Jo=o,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new kE(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(cs(t.toString()),cs("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Yo===t&&this.P_(r,o)},r=>{e(()=>{const o=new be(ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(o)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(o=>{r(()=>this.I_(o))}),this.stream.onMessage(o=>{r(()=>++this.e_==1?this.E_(o):this.onNext(o))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ye("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(ye("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class uC extends AE{constructor(e,t,r,o,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,c),this.serializer=a}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=E2(this.serializer,e),r=function(a){if(!("targetChange"in a))return Re.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?Re.min():c.readTime?Nr(c.readTime):Re.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=Mp(this.serializer),t.addTarget=function(a,c){let d;const p=c.target;if(d=jp(p)?{documents:S2(a,p)}:{query:I2(a,p)._t},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=wE(a,c.resumeToken);const m=Vp(a,c.expectedCount);m!==null&&(d.expectedCount=m)}else if(c.snapshotVersion.compareTo(Re.min())>0){d.readTime=wh(a,c.snapshotVersion.toTimestamp());const m=Vp(a,c.expectedCount);m!==null&&(d.expectedCount=m)}return d}(this.serializer,e);const r=P2(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=Mp(this.serializer),t.removeTarget=e,this.a_(t)}}class hC extends AE{constructor(e,t,r,o,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,c),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Xe(!!e.streamToken),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Xe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=b2(e.writeResults,e.commitTime),r=Nr(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=Mp(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>T2(this.serializer,r))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new be(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Mo(e,Lp(t,r),o,a,c)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new be(ie.UNKNOWN,a.toString())})}Lo(e,t,r,o,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Lo(e,Lp(t,r),o,c,d,a)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new be(ie.UNKNOWN,c.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class fC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(cs(t),this.D_=!1):ye("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,t,r,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(c=>{r.enqueueAndForget(async()=>{io(this)&&(ye("RemoteStore","Restarting streams for network reachability change."),await async function(p){const m=De(p);m.L_.add(4),await vc(m),m.q_.set("Unknown"),m.L_.delete(4),await Yh(m)}(this))})}),this.q_=new fC(r,o)}}async function Yh(n){if(io(n))for(const e of n.B_)await e(!0)}async function vc(n){for(const e of n.B_)await e(!1)}function CE(n,e){const t=De(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Fm(t)?Um(t):Aa(t).r_()&&Mm(t,e))}function Om(n,e){const t=De(n),r=Aa(t);t.N_.delete(e),r.r_()&&RE(t,e),t.N_.size===0&&(r.r_()?r.o_():io(t)&&t.q_.set("Unknown"))}function Mm(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Aa(n).A_(e)}function RE(n,e){n.Q_.xe(e),Aa(n).R_(e)}function Um(n){n.Q_=new m2({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Aa(n).start(),n.q_.v_()}function Fm(n){return io(n)&&!Aa(n).n_()&&n.N_.size>0}function io(n){return De(n).L_.size===0}function jE(n){n.Q_=void 0}async function mC(n){n.q_.set("Online")}async function gC(n){n.N_.forEach((e,t)=>{Mm(n,e)})}async function yC(n,e){jE(n),Fm(n)?(n.q_.M_(e),Um(n)):n.q_.set("Unknown")}async function vC(n,e,t){if(n.q_.set("Online"),e instanceof xE&&e.state===2&&e.cause)try{await async function(o,a){const c=a.cause;for(const d of a.targetIds)o.N_.has(d)&&(await o.remoteSyncer.rejectListen(d,c),o.N_.delete(d),o.Q_.removeTarget(d))}(n,e)}catch(r){ye("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await _h(n,r)}else if(e instanceof rh?n.Q_.Ke(e):e instanceof vE?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Re.min()))try{const r=await PE(n.localStore);t.compareTo(r)>=0&&await function(a,c){const d=a.Q_.rt(c);return d.targetChanges.forEach((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const v=a.N_.get(m);v&&a.N_.set(m,v.withResumeToken(p.resumeToken,c))}}),d.targetMismatches.forEach((p,m)=>{const v=a.N_.get(p);if(!v)return;a.N_.set(p,v.withResumeToken(zt.EMPTY_BYTE_STRING,v.snapshotVersion)),RE(a,p);const w=new Ws(v.target,p,m,v.sequenceNumber);Mm(a,w)}),a.remoteSyncer.applyRemoteEvent(d)}(n,t)}catch(r){ye("RemoteStore","Failed to raise snapshot:",r),await _h(n,r)}}async function _h(n,e,t){if(!mc(e))throw e;n.L_.add(1),await vc(n),n.q_.set("Offline"),t||(t=()=>PE(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ye("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await Yh(n)})}function DE(n,e){return e().catch(t=>_h(n,t,e))}async function Xh(n){const e=De(n),t=ni(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;xC(e);)try{const o=await nC(e.localStore,r);if(o===null){e.O_.length===0&&t.o_();break}r=o.batchId,wC(e,o)}catch(o){await _h(e,o)}VE(e)&&LE(e)}function xC(n){return io(n)&&n.O_.length<10}function wC(n,e){n.O_.push(e);const t=ni(n);t.r_()&&t.V_&&t.m_(e.mutations)}function VE(n){return io(n)&&!ni(n).n_()&&n.O_.length>0}function LE(n){ni(n).start()}async function _C(n){ni(n).p_()}async function EC(n){const e=ni(n);for(const t of n.O_)e.m_(t.mutations)}async function TC(n,e,t){const r=n.O_.shift(),o=Cm.from(r,e,t);await DE(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),await Xh(n)}async function bC(n,e){e&&ni(n).V_&&await async function(r,o){if(function(c){return d2(c)&&c!==ie.ABORTED}(o.code)){const a=r.O_.shift();ni(r).s_(),await DE(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,o)),await Xh(r)}}(n,e),VE(n)&&LE(n)}async function tx(n,e){const t=De(n);t.asyncQueue.verifyOperationInProgress(),ye("RemoteStore","RemoteStore received new credentials");const r=io(t);t.L_.add(3),await vc(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await Yh(t)}async function SC(n,e){const t=De(n);e?(t.L_.delete(2),await Yh(t)):e||(t.L_.add(2),await vc(t),t.q_.set("Unknown"))}function Aa(n){return n.K_||(n.K_=function(t,r,o){const a=De(t);return a.w_(),new uC(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(n.datastore,n.asyncQueue,{Eo:mC.bind(null,n),Ro:gC.bind(null,n),mo:yC.bind(null,n),d_:vC.bind(null,n)}),n.B_.push(async e=>{e?(n.K_.s_(),Fm(n)?Um(n):n.q_.set("Unknown")):(await n.K_.stop(),jE(n))})),n.K_}function ni(n){return n.U_||(n.U_=function(t,r,o){const a=De(t);return a.w_(),new hC(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:_C.bind(null,n),mo:bC.bind(null,n),f_:EC.bind(null,n),g_:TC.bind(null,n)}),n.B_.push(async e=>{e?(n.U_.s_(),await Xh(n)):(await n.U_.stop(),n.O_.length>0&&(ye("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))})),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e,t,r,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=a,this.deferred=new Xs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,a){const c=Date.now()+r,d=new Bm(e,t,c,o,a);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zm(n,e){if(cs("AsyncQueue",`${e}: ${n}`),mc(n))return new be(ie.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Se.comparator(t.key,r.key):(t,r)=>Se.comparator(t.key,r.key),this.keyedMap=jl(),this.sortedSet=new ct(this.comparator)}static emptySet(e){return new fa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof fa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=r.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new fa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(){this.W_=new ct(Se.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Ce():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class wa{constructor(e,t,r,o,a,c,d,p,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,o,a){const c=[];return t.forEach(d=>{c.push({type:0,doc:d})}),new wa(e,t,fa.emptySet(t),c,r,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class NC{constructor(){this.queries=rx(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const o=De(t),a=o.queries;o.queries=rx(),a.forEach((c,d)=>{for(const p of d.j_)p.onError(r)})})(this,new be(ie.ABORTED,"Firestore shutting down"))}}function rx(){return new ka(n=>sE(n),qh)}async function PC(n,e){const t=De(n);let r=3;const o=e.query;let a=t.queries.get(o);a?!a.H_()&&e.J_()&&(r=2):(a=new IC,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await t.onListen(o,!0);break;case 1:a.z_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const d=zm(c,`Initialization of query '${ea(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.j_.push(e),e.Z_(t.onlineState),a.z_&&e.X_(a.z_)&&$m(t)}async function kC(n,e){const t=De(n),r=e.query;let o=3;const a=t.queries.get(r);if(a){const c=a.j_.indexOf(e);c>=0&&(a.j_.splice(c,1),a.j_.length===0?o=e.J_()?0:1:!a.H_()&&e.J_()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function AC(n,e){const t=De(n);let r=!1;for(const o of e){const a=o.query,c=t.queries.get(a);if(c){for(const d of c.j_)d.X_(o)&&(r=!0);c.z_=o}}r&&$m(t)}function CC(n,e,t){const r=De(n),o=r.queries.get(e);if(o)for(const a of o.j_)a.onError(t);r.queries.delete(e)}function $m(n){n.Y_.forEach(e=>{e.next()})}var Fp,sx;(sx=Fp||(Fp={})).ea="default",sx.Cache="cache";class RC{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new wa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=wa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Fp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e){this.key=e}}class ME{constructor(e){this.key=e}}class jC{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Be(),this.mutatedKeys=Be(),this.Aa=iE(e),this.Ra=new fa(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new nx,o=t?t.Ra:this.Ra;let a=t?t.mutatedKeys:this.mutatedKeys,c=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((v,w)=>{const E=o.get(v),b=Gh(this.query,w)?w:null,L=!!E&&this.mutatedKeys.has(E.key),V=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let P=!1;E&&b?E.data.isEqual(b.data)?L!==V&&(r.track({type:3,doc:b}),P=!0):this.ga(E,b)||(r.track({type:2,doc:b}),P=!0,(p&&this.Aa(b,p)>0||m&&this.Aa(b,m)<0)&&(d=!0)):!E&&b?(r.track({type:0,doc:b}),P=!0):E&&!b&&(r.track({type:1,doc:E}),P=!0,(p||m)&&(d=!0)),P&&(b?(c=c.add(b),a=V?a.add(v):a.delete(v)):(c=c.delete(v),a=a.delete(v)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),a=a.delete(v.key),r.track({type:1,doc:v})}return{Ra:c,fa:r,ns:d,mutatedKeys:a}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const c=e.fa.G_();c.sort((v,w)=>function(b,L){const V=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce()}};return V(b)-V(L)}(v.type,w.type)||this.Aa(v.doc,w.doc)),this.pa(r),o=o!=null&&o;const d=t&&!o?this.ya():[],p=this.da.size===0&&this.current&&!o?1:0,m=p!==this.Ea;return this.Ea=p,c.length!==0||m?{snapshot:new wa(this.query,e.Ra,a,c,e.mutatedKeys,p===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:d}:{wa:d}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new nx,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Be(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new ME(r))}),this.da.forEach(r=>{e.has(r)||t.push(new OE(r))}),t}ba(e){this.Ta=e.Ts,this.da=Be();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return wa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class DC{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class VC{constructor(e){this.key=e,this.va=!1}}class LC{constructor(e,t,r,o,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Ca={},this.Fa=new ka(d=>sE(d),qh),this.Ma=new Map,this.xa=new Set,this.Oa=new ct(Se.comparator),this.Na=new Map,this.La=new Dm,this.Ba={},this.ka=new Map,this.qa=xa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function OC(n,e,t=!0){const r=qE(n);let o;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.Da()):o=await UE(r,e,t,!0),o}async function MC(n,e){const t=qE(n);await UE(t,e,!0,!1)}async function UE(n,e,t,r){const o=await rC(n.localStore,Ir(e)),a=o.targetId,c=n.sharedClientState.addLocalQueryTarget(a,t);let d;return r&&(d=await UC(n,e,a,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&CE(n.remoteStore,o),d}async function UC(n,e,t,r,o){n.Ka=(w,E,b)=>async function(V,P,D,O){let j=P.view.ma(D);j.ns&&(j=await Jv(V.localStore,P.query,!1).then(({documents:R})=>P.view.ma(R,j)));const W=O&&O.targetChanges.get(P.targetId),Z=O&&O.targetMismatches.get(P.targetId)!=null,ae=P.view.applyChanges(j,V.isPrimaryClient,W,Z);return ox(V,P.targetId,ae.wa),ae.snapshot}(n,w,E,b);const a=await Jv(n.localStore,e,!0),c=new jC(e,a.Ts),d=c.ma(a.documents),p=yc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",o),m=c.applyChanges(d,n.isPrimaryClient,p);ox(n,t,m.wa);const v=new DC(e,t,c);return n.Fa.set(e,v),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),m.snapshot}async function FC(n,e,t){const r=De(n),o=r.Fa.get(e),a=r.Ma.get(o.targetId);if(a.length>1)return r.Ma.set(o.targetId,a.filter(c=>!qh(c,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Up(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),t&&Om(r.remoteStore,o.targetId),Bp(r,o.targetId)}).catch(pc)):(Bp(r,o.targetId),await Up(r.localStore,o.targetId,!0))}async function BC(n,e){const t=De(n),r=t.Fa.get(e),o=t.Ma.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Om(t.remoteStore,r.targetId))}async function zC(n,e,t){const r=QC(n);try{const o=await function(c,d){const p=De(c),m=Pt.now(),v=d.reduce((b,L)=>b.add(L.key),Be());let w,E;return p.persistence.runTransaction("Locally write mutations","readwrite",b=>{let L=us(),V=Be();return p.cs.getEntries(b,v).next(P=>{L=P,L.forEach((D,O)=>{O.isValidDocument()||(V=V.add(D))})}).next(()=>p.localDocuments.getOverlayedDocuments(b,L)).next(P=>{w=P;const D=[];for(const O of d){const j=a2(O,w.get(O.key).overlayedDocument);j!=null&&D.push(new so(O.key,j,X_(j.value.mapValue),ns.exists(!0)))}return p.mutationQueue.addMutationBatch(b,m,D,d)}).next(P=>{E=P;const D=P.applyToLocalDocumentSet(w,V);return p.documentOverlayCache.saveOverlays(b,P.batchId,D)})}).then(()=>({batchId:E.batchId,changes:aE(w)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(c,d,p){let m=c.Ba[c.currentUser.toKey()];m||(m=new ct(Qe)),m=m.insert(d,p),c.Ba[c.currentUser.toKey()]=m}(r,o.batchId,t),await xc(r,o.changes),await Xh(r.remoteStore)}catch(o){const a=zm(o,"Failed to persist write");t.reject(a)}}async function FE(n,e){const t=De(n);try{const r=await eC(t.localStore,e);e.targetChanges.forEach((o,a)=>{const c=t.Na.get(a);c&&(Xe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?c.va=!0:o.modifiedDocuments.size>0?Xe(c.va):o.removedDocuments.size>0&&(Xe(c.va),c.va=!1))}),await xc(t,r,e)}catch(r){await pc(r)}}function ix(n,e,t){const r=De(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.Fa.forEach((a,c)=>{const d=c.view.Z_(e);d.snapshot&&o.push(d.snapshot)}),function(c,d){const p=De(c);p.onlineState=d;let m=!1;p.queries.forEach((v,w)=>{for(const E of w.j_)E.Z_(d)&&(m=!0)}),m&&$m(p)}(r.eventManager,e),o.length&&r.Ca.d_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function $C(n,e,t){const r=De(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Na.get(e),a=o&&o.key;if(a){let c=new ct(Se.comparator);c=c.insert(a,Yt.newNoDocument(a,Re.min()));const d=Be().add(a),p=new Kh(Re.min(),new Map,new ct(Qe),c,d);await FE(r,p),r.Oa=r.Oa.remove(a),r.Na.delete(e),qm(r)}else await Up(r.localStore,e,!1).then(()=>Bp(r,e,t)).catch(pc)}async function qC(n,e){const t=De(n),r=e.batch.batchId;try{const o=await Z2(t.localStore,e);zE(t,r,null),BE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await xc(t,o)}catch(o){await pc(o)}}async function GC(n,e,t){const r=De(n);try{const o=await function(c,d){const p=De(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return p.mutationQueue.lookupMutationBatch(m,d).next(w=>(Xe(w!==null),v=w.keys(),p.mutationQueue.removeMutationBatch(m,w))).next(()=>p.mutationQueue.performConsistencyCheck(m)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(m,v,d)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>p.localDocuments.getDocuments(m,v))})}(r.localStore,e);zE(r,e,t),BE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await xc(r,o)}catch(o){await pc(o)}}function BE(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function zE(n,e,t){const r=De(n);let o=r.Ba[r.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),r.Ba[r.currentUser.toKey()]=o}}function Bp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||$E(n,r)})}function $E(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(Om(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),qm(n))}function ox(n,e,t){for(const r of t)r instanceof OE?(n.La.addReference(r.key,e),HC(n,r)):r instanceof ME?(ye("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||$E(n,r.key)):Ce()}function HC(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(ye("SyncEngine","New document in limbo: "+t),n.xa.add(r),qm(n))}function qm(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Se(ht.fromString(e)),r=n.qa.next();n.Na.set(r,new VC(t)),n.Oa=n.Oa.insert(t,r),CE(n.remoteStore,new Ws(Ir(km(t.path)),r,"TargetPurposeLimboResolution",Tm.oe))}}async function xc(n,e,t){const r=De(n),o=[],a=[],c=[];r.Fa.isEmpty()||(r.Fa.forEach((d,p)=>{c.push(r.Ka(p,e,t).then(m=>{var v;if((m||t)&&r.isPrimaryClient){const w=m?!m.fromCache:(v=t?.targetChanges.get(p.targetId))===null||v===void 0?void 0:v.current;r.sharedClientState.updateQueryState(p.targetId,w?"current":"not-current")}if(m){o.push(m);const w=Lm.Wi(p.targetId,m);a.push(w)}}))}),await Promise.all(c),r.Ca.d_(o),await async function(p,m){const v=De(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>re.forEach(m,E=>re.forEach(E.$i,b=>v.persistence.referenceDelegate.addReference(w,E.targetId,b)).next(()=>re.forEach(E.Ui,b=>v.persistence.referenceDelegate.removeReference(w,E.targetId,b)))))}catch(w){if(!mc(w))throw w;ye("LocalStore","Failed to update sequence numbers: "+w)}for(const w of m){const E=w.targetId;if(!w.fromCache){const b=v.os.get(E),L=b.snapshotVersion,V=b.withLastLimboFreeSnapshotVersion(L);v.os=v.os.insert(E,V)}}}(r.localStore,a))}async function WC(n,e){const t=De(n);if(!t.currentUser.isEqual(e)){ye("SyncEngine","User change. New user:",e.toKey());const r=await NE(t.localStore,e);t.currentUser=e,function(a,c){a.ka.forEach(d=>{d.forEach(p=>{p.reject(new be(ie.CANCELLED,c))})}),a.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await xc(t,r.hs)}}function KC(n,e){const t=De(n),r=t.Na.get(e);if(r&&r.va)return Be().add(r.key);{let o=Be();const a=t.Ma.get(e);if(!a)return o;for(const c of a){const d=t.Fa.get(c);o=o.unionWith(d.view.Va)}return o}}function qE(n){const e=De(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=FE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=KC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$C.bind(null,e),e.Ca.d_=AC.bind(null,e.eventManager),e.Ca.$a=CC.bind(null,e.eventManager),e}function QC(n){const e=De(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=GC.bind(null,e),e}class Eh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return J2(this.persistence,new Y2,e.initialUser,this.serializer)}Ga(e){return new W2(Vm.Zr,this.serializer)}Wa(e){return new iC}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Eh.provider={build:()=>new Eh};class zp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ix(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=WC.bind(null,this.syncEngine),await SC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new NC}()}createDatastore(e){const t=Qh(e.databaseInfo.databaseId),r=function(a){return new cC(a)}(e.databaseInfo);return function(a,c,d,p){return new dC(a,c,d,p)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,o,a,c,d){return new pC(r,o,a,c,d)}(this.localStore,this.datastore,e.asyncQueue,t=>ix(this.syncEngine,t,0),function(){return ex.D()?new ex:new oC}())}createSyncEngine(e,t){return function(o,a,c,d,p,m,v){const w=new LC(o,a,c,d,p,m);return v&&(w.Qa=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const a=De(o);ye("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await vc(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}zp.provider={build:()=>new zp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):cs("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e,t,r,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Qt.UNAUTHENTICATED,this.clientId=K_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async c=>{ye("FirestoreClient","Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(ye("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=zm(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Jf(n,e){n.asyncQueue.verifyOperationInProgress(),ye("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async o=>{r.isEqual(o)||(await NE(e.localStore,o),r=o)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function ax(n,e){n.asyncQueue.verifyOperationInProgress();const t=await JC(n);ye("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>tx(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,o)=>tx(e.remoteStore,o)),n._onlineComponents=e}async function JC(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ye("FirestoreClient","Using user provided OfflineComponentProvider");try{await Jf(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===ie.FAILED_PRECONDITION||o.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;ma("Error using user provided cache. Falling back to memory cache: "+t),await Jf(n,new Eh)}}else ye("FirestoreClient","Using default OfflineComponentProvider"),await Jf(n,new Eh);return n._offlineComponents}async function GE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ye("FirestoreClient","Using user provided OnlineComponentProvider"),await ax(n,n._uninitializedComponentsProvider._online)):(ye("FirestoreClient","Using default OnlineComponentProvider"),await ax(n,new zp))),n._onlineComponents}function ZC(n){return GE(n).then(e=>e.syncEngine)}async function eR(n){const e=await GE(n),t=e.eventManager;return t.onListen=OC.bind(null,e.syncEngine),t.onUnlisten=FC.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=MC.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=BC.bind(null,e.syncEngine),t}function tR(n,e,t={}){const r=new Xs;return n.asyncQueue.enqueueAndForget(async()=>function(a,c,d,p,m){const v=new YC({next:E=>{v.Za(),c.enqueueAndForget(()=>kC(a,w));const b=E.docs.has(d);!b&&E.fromCache?m.reject(new be(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&E.fromCache&&p&&p.source==="server"?m.reject(new be(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(E)},error:E=>m.reject(E)}),w=new RC(km(d.path),v,{includeMetadataChanges:!0,_a:!0});return PC(a,w)}(await eR(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(n,e,t){if(!t)throw new be(ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function rR(n,e,t,r){if(e===!0&&r===!0)throw new be(ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function cx(n){if(!Se.isDocumentKey(n))throw new be(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Gm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ce()}function rc(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new be(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Gm(n);throw new be(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new be(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new be(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=HE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new be(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new be(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new be(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hm{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ux({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new be(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ux(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new mA;switch(r.type){case"firstParty":return new xA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new be(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=lx.get(t);r&&(ye("ComponentProvider","Removing Datastore"),lx.delete(t),r.terminate())}(this),Promise.resolve()}}function sR(n,e,t,r={}){var o;const a=(n=rc(n,Hm))._getSettings(),c=`${e}:${t}`;if(a.host!=="firestore.googleapis.com"&&a.host!==c&&ma("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:c,ssl:!1})),r.mockUserToken){let d,p;if(typeof r.mockUserToken=="string")d=r.mockUserToken,p=Qt.MOCK_USER;else{d=PI(r.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new be(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Qt(m)}n._authCredentials=new gA(new W_(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Wm(this.firestore,e,this._query)}}class Fn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Fn(this.firestore,e,this._key)}}class sc extends Wm{constructor(e,t,r){super(e,t,km(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Fn(this.firestore,null,new Se(e))}withConverter(e){return new sc(this.firestore,e,this._path)}}function hx(n,e,...t){if(n=kt(n),arguments.length===1&&(e=K_.newId()),nR("doc","path",e),n instanceof Hm){const r=ht.fromString(e,...t);return cx(r),new Fn(n,null,new Se(r))}{if(!(n instanceof Fn||n instanceof sc))throw new be(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ht.fromString(e,...t));return cx(r),new Fn(n.firestore,n instanceof sc?n.converter:null,new Se(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new kE(this,"async_queue_retry"),this.Vu=()=>{const r=Xf();r&&ye("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=Xf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Xf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Xs;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!mc(e))throw e;ye("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const o=function(c){let d=c.message||"";return c.stack&&(d=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),d}(r);throw cs("INTERNAL UNHANDLED ERROR: ",o),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const o=Bm.createAndSchedule(this,e,t,r,a=>this.yu(a));return this.Tu.push(o),o}fu(){this.Eu&&Ce()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class Km extends Hm{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new dx,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new dx(e),this._firestoreClient=void 0,await e}}}function iR(n,e){const t=typeof n=="object"?n:dm(),r=typeof n=="string"?n:"(default)",o=no(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const a=II("firestore");a&&sR(o,...a)}return o}function WE(n){if(n._terminated)throw new be(ie.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||oR(n),n._firestoreClient}function oR(n){var e,t,r;const o=n._freezeSettings(),a=function(d,p,m,v){return new RA(d,p,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,HE(v.experimentalLongPollingOptions),v.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new XC(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(d){const p=d?._online.build();return{_offline:d?._offline.build(p),_online:p}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _a(zt.fromBase64String(e))}catch(t){throw new be(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new _a(zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new be(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new be(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new be(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Qe(this._lat,e._lat)||Qe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,o){if(r.length!==o.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==o[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR=/^__.*__$/;class lR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new so(e,this.data,this.fieldMask,t,this.fieldTransforms):new gc(e,this.data,t,this.fieldTransforms)}}function QE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce()}}class Jm{constructor(e,t,r,o,a,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Jm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:r,xu:!1});return o.Ou(e),o}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:r,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Th(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(QE(this.Cu)&&aR.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class cR{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Qh(e)}Qu(e,t,r,o=!1){return new Jm({Cu:e,methodName:t,qu:r,path:Ft.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function uR(n){const e=n._freezeSettings(),t=Qh(n._databaseId);return new cR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function hR(n,e,t,r,o,a={}){const c=n.Qu(a.merge||a.mergeFields?2:0,e,t,o);ZE("Data must be an object, but it was:",c,r);const d=XE(r,c);let p,m;if(a.merge)p=new ir(c.fieldMask),m=c.fieldTransforms;else if(a.mergeFields){const v=[];for(const w of a.mergeFields){const E=dR(e,w,t);if(!c.contains(E))throw new be(ie.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);pR(v,E)||v.push(E)}p=new ir(v),m=c.fieldTransforms.filter(w=>p.covers(w.field))}else p=null,m=c.fieldTransforms;return new lR(new Mn(d),p,m)}function YE(n,e){if(JE(n=kt(n)))return ZE("Unsupported field value:",e,n),XE(n,e);if(n instanceof KE)return function(r,o){if(!QE(o.Cu))throw o.Bu(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(o);a&&o.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,o){const a=[];let c=0;for(const d of r){let p=YE(d,o.Lu(c));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),c++}return{arrayValue:{values:a}}}(n,e)}return function(r,o){if((r=kt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return t2(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Pt.fromDate(r);return{timestampValue:wh(o.serializer,a)}}if(r instanceof Pt){const a=new Pt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:wh(o.serializer,a)}}if(r instanceof Ym)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof _a)return{bytesValue:wE(o.serializer,r._byteString)};if(r instanceof Fn){const a=o.databaseId,c=r.firestore._databaseId;if(!c.isEqual(a))throw o.Bu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:jm(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Xm)return function(c,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw d.Bu("VectorValues must only contain numeric values.");return Am(d.serializer,p)})}}}}}}(r,o);throw o.Bu(`Unsupported field value: ${Gm(r)}`)}(n,e)}function XE(n,e){const t={};return Q_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pa(n,(r,o)=>{const a=YE(o,e.Mu(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function JE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Pt||n instanceof Ym||n instanceof _a||n instanceof Fn||n instanceof KE||n instanceof Xm)}function ZE(n,e,t){if(!JE(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const r=Gm(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function dR(n,e,t){if((e=kt(e))instanceof Qm)return e._internalPath;if(typeof e=="string")return eT(n,e);throw Th("Field path arguments must be of type string or ",n,!1,void 0,t)}const fR=new RegExp("[~\\*/\\[\\]]");function eT(n,e,t){if(e.search(fR)>=0)throw Th(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Qm(...e.split("."))._internalPath}catch{throw Th(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Th(n,e,t,r,o){const a=r&&!r.isEmpty(),c=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(a||c)&&(p+=" (found",a&&(p+=` in field ${r}`),c&&(p+=` in document ${o}`),p+=")"),new be(ie.INVALID_ARGUMENT,d+n+p)}function pR(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e,t,r,o,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Fn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(nT("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class mR extends tT{data(){return super.data()}}function nT(n,e){return typeof e=="string"?eT(n,e):e instanceof Qm?e._internalPath:e._delegate._internalPath}class gR{convertValue(e,t="none"){switch(Xi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Yi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Pa(e,(o,a)=>{r[o]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,o;const a=(o=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(c=>pt(c.doubleValue));return new Xm(a)}convertGeoPoint(e){return new Ym(pt(e.latitude),pt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Sm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Jl(e));default:return null}}convertTimestamp(e){const t=ti(e);return new Pt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ht.fromString(e);Xe(IE(r));const o=new Zl(r.get(1),r.get(3)),a=new Se(r.popFirst(5));return o.isEqual(t)||cs(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rT extends tT{constructor(e,t,r,o,a,c){super(e,t,r,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new xR(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(nT("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class xR extends rT{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wR(n){n=rc(n,Fn);const e=rc(n.firestore,Km);return tR(WE(e),n._key).then(t=>bR(e,n,t))}class _R extends gR{constructor(e){super(),this.firestore=e}convertBytes(e){return new _a(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Fn(this.firestore,null,t)}}function ER(n,e,t){n=rc(n,Fn);const r=rc(n.firestore,Km),o=yR(n.converter,e);return TR(r,[hR(uR(r),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,ns.none())])}function TR(n,e){return function(r,o){const a=new Xs;return r.asyncQueue.enqueueAndForget(async()=>zC(await ZC(r),o,a)),a.promise}(WE(n),e)}function bR(n,e,t){const r=t.docs.get(e._key),o=new _R(n);return new rT(n,o,e._key,r,new vR(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Na=o})(Ia),kr(new ar("firestore",(r,{instanceIdentifier:o,options:a})=>{const c=r.getProvider("app").getImmediate(),d=new Km(new yA(r.getProvider("auth-internal")),new _A(r.getProvider("app-check-internal")),function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new be(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zl(m.options.projectId,v)}(c,o),c);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d},"PUBLIC").setMultipleInstances(!0)),Un(Cv,"4.7.3",e),Un(Cv,"4.7.3","esm2017")})();var SR="firebase",IR="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Un(SR,IR,"app");const sT="@firebase/installations",Zm="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT=1e4,oT=`w:${Zm}`,aT="FIS_v2",NR="https://firebaseinstallations.googleapis.com/v1",PR=3600*1e3,kR="installations",AR="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ji=new to(kR,AR,CR);function lT(n){return n instanceof ur&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT({projectId:n}){return`${NR}/projects/${n}/installations`}function uT(n){return{token:n.token,requestStatus:2,expiresIn:jR(n.expiresIn),creationTime:Date.now()}}async function hT(n,e){const r=(await e.json()).error;return Ji.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function dT({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function RR(n,{refreshToken:e}){const t=dT(n);return t.append("Authorization",DR(e)),t}async function fT(n){const e=await n();return e.status>=500&&e.status<600?n():e}function jR(n){return Number(n.replace("s","000"))}function DR(n){return`${aT} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VR({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=cT(n),o=dT(n),a=e.getImmediate({optional:!0});if(a){const m=await a.getHeartbeatsHeader();m&&o.append("x-firebase-client",m)}const c={fid:t,authVersion:aT,appId:n.appId,sdkVersion:oT},d={method:"POST",headers:o,body:JSON.stringify(c)},p=await fT(()=>fetch(r,d));if(p.ok){const m=await p.json();return{fid:m.fid||t,registrationStatus:2,refreshToken:m.refreshToken,authToken:uT(m.authToken)}}else throw await hT("Create Installation",p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR=/^[cdef][\w-]{21}$/,$p="";function MR(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=UR(n);return OR.test(t)?t:$p}catch{return $p}}function UR(n){return LR(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT=new Map;function gT(n,e){const t=Jh(n);yT(t,e),FR(t,e)}function yT(n,e){const t=mT.get(n);if(t)for(const r of t)r(e)}function FR(n,e){const t=BR();t&&t.postMessage({key:n,fid:e}),zR()}let zi=null;function BR(){return!zi&&"BroadcastChannel"in self&&(zi=new BroadcastChannel("[Firebase] FID Change"),zi.onmessage=n=>{yT(n.data.key,n.data.fid)}),zi}function zR(){mT.size===0&&zi&&(zi.close(),zi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R="firebase-installations-database",qR=1,Zi="firebase-installations-store";let Zf=null;function eg(){return Zf||(Zf=t_($R,qR,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Zi)}}})),Zf}async function bh(n,e){const t=Jh(n),o=(await eg()).transaction(Zi,"readwrite"),a=o.objectStore(Zi),c=await a.get(t);return await a.put(e,t),await o.done,(!c||c.fid!==e.fid)&&gT(n,e.fid),e}async function vT(n){const e=Jh(n),r=(await eg()).transaction(Zi,"readwrite");await r.objectStore(Zi).delete(e),await r.done}async function Zh(n,e){const t=Jh(n),o=(await eg()).transaction(Zi,"readwrite"),a=o.objectStore(Zi),c=await a.get(t),d=e(c);return d===void 0?await a.delete(t):await a.put(d,t),await o.done,d&&(!c||c.fid!==d.fid)&&gT(n,d.fid),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tg(n){let e;const t=await Zh(n.appConfig,r=>{const o=GR(r),a=HR(n,o);return e=a.registrationPromise,a.installationEntry});return t.fid===$p?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function GR(n){const e=n||{fid:MR(),registrationStatus:0};return xT(e)}function HR(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(Ji.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=WR(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:KR(n)}:{installationEntry:e}}async function WR(n,e){try{const t=await VR(n,e);return bh(n.appConfig,t)}catch(t){throw lT(t)&&t.customData.serverCode===409?await vT(n.appConfig):await bh(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function KR(n){let e=await fx(n.appConfig);for(;e.registrationStatus===1;)await pT(100),e=await fx(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await tg(n);return r||t}return e}function fx(n){return Zh(n,e=>{if(!e)throw Ji.create("installation-not-found");return xT(e)})}function xT(n){return QR(n)?{fid:n.fid,registrationStatus:0}:n}function QR(n){return n.registrationStatus===1&&n.registrationTime+iT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YR({appConfig:n,heartbeatServiceProvider:e},t){const r=XR(n,t),o=RR(n,t),a=e.getImmediate({optional:!0});if(a){const m=await a.getHeartbeatsHeader();m&&o.append("x-firebase-client",m)}const c={installation:{sdkVersion:oT,appId:n.appId}},d={method:"POST",headers:o,body:JSON.stringify(c)},p=await fT(()=>fetch(r,d));if(p.ok){const m=await p.json();return uT(m)}else throw await hT("Generate Auth Token",p)}function XR(n,{fid:e}){return`${cT(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ng(n,e=!1){let t;const r=await Zh(n.appConfig,a=>{if(!wT(a))throw Ji.create("not-registered");const c=a.authToken;if(!e&&ej(c))return a;if(c.requestStatus===1)return t=JR(n,e),a;{if(!navigator.onLine)throw Ji.create("app-offline");const d=nj(a);return t=ZR(n,d),d}});return t?await t:r.authToken}async function JR(n,e){let t=await px(n.appConfig);for(;t.authToken.requestStatus===1;)await pT(100),t=await px(n.appConfig);const r=t.authToken;return r.requestStatus===0?ng(n,e):r}function px(n){return Zh(n,e=>{if(!wT(e))throw Ji.create("not-registered");const t=e.authToken;return rj(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function ZR(n,e){try{const t=await YR(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await bh(n.appConfig,r),t}catch(t){if(lT(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await vT(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await bh(n.appConfig,r)}throw t}}function wT(n){return n!==void 0&&n.registrationStatus===2}function ej(n){return n.requestStatus===2&&!tj(n)}function tj(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+PR}function nj(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function rj(n){return n.requestStatus===1&&n.requestTime+iT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sj(n){const e=n,{installationEntry:t,registrationPromise:r}=await tg(e);return r?r.catch(console.error):ng(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ij(n,e=!1){const t=n;return await oj(t),(await ng(t,e)).token}async function oj(n){const{registrationPromise:e}=await tg(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aj(n){if(!n||!n.options)throw ep("App Configuration");if(!n.name)throw ep("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw ep(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function ep(n){return Ji.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="installations",lj="installations-internal",cj=n=>{const e=n.getProvider("app").getImmediate(),t=aj(e),r=no(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},uj=n=>{const e=n.getProvider("app").getImmediate(),t=no(e,_T).getImmediate();return{getId:()=>sj(t),getToken:o=>ij(t,o)}};function hj(){kr(new ar(_T,cj,"PUBLIC")),kr(new ar(lj,uj,"PRIVATE"))}hj();Un(sT,Zm);Un(sT,Zm,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh="analytics",dj="firebase_id",fj="origin",pj=60*1e3,mj="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",rg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn=new Mh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Tn=new to("analytics","Analytics",gj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yj(n){if(!n.startsWith(rg)){const e=Tn.create("invalid-gtag-resource",{gtagURL:n});return dn.warn(e.message),""}return n}function ET(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function vj(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function xj(n,e){const t=vj("firebase-js-sdk-policy",{createScriptURL:yj}),r=document.createElement("script"),o=`${rg}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(o):o,r.async=!0,document.head.appendChild(r)}function wj(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function _j(n,e,t,r,o,a){const c=r[o];try{if(c)await e[c];else{const p=(await ET(t)).find(m=>m.measurementId===o);p&&await e[p.appId]}}catch(d){dn.error(d)}n("config",o,a)}async function Ej(n,e,t,r,o){try{let a=[];if(o&&o.send_to){let c=o.send_to;Array.isArray(c)||(c=[c]);const d=await ET(t);for(const p of c){const m=d.find(w=>w.measurementId===p),v=m&&e[m.appId];if(v)a.push(v);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),n("event",r,o||{})}catch(a){dn.error(a)}}function Tj(n,e,t,r){async function o(a,...c){try{if(a==="event"){const[d,p]=c;await Ej(n,e,t,d,p)}else if(a==="config"){const[d,p]=c;await _j(n,e,t,r,d,p)}else if(a==="consent"){const[d,p]=c;n("consent",d,p)}else if(a==="get"){const[d,p,m]=c;n("get",d,p,m)}else if(a==="set"){const[d]=c;n("set",d)}else n(a,...c)}catch(d){dn.error(d)}}return o}function bj(n,e,t,r,o){let a=function(...c){window[r].push(arguments)};return window[o]&&typeof window[o]=="function"&&(a=window[o]),window[o]=Tj(a,n,e,t),{gtagCore:a,wrappedGtag:window[o]}}function Sj(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(rg)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ij=30,Nj=1e3;class Pj{constructor(e={},t=Nj){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const TT=new Pj;function kj(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function Aj(n){var e;const{appId:t,apiKey:r}=n,o={method:"GET",headers:kj(r)},a=mj.replace("{app-id}",t),c=await fetch(a,o);if(c.status!==200&&c.status!==304){let d="";try{const p=await c.json();!((e=p.error)===null||e===void 0)&&e.message&&(d=p.error.message)}catch{}throw Tn.create("config-fetch-failed",{httpStatus:c.status,responseMessage:d})}return c.json()}async function Cj(n,e=TT,t){const{appId:r,apiKey:o,measurementId:a}=n.options;if(!r)throw Tn.create("no-app-id");if(!o){if(a)return{measurementId:a,appId:r};throw Tn.create("no-api-key")}const c=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new Dj;return setTimeout(async()=>{d.abort()},pj),bT({appId:r,apiKey:o,measurementId:a},c,d,e)}async function bT(n,{throttleEndTimeMillis:e,backoffCount:t},r,o=TT){var a;const{appId:c,measurementId:d}=n;try{await Rj(r,e)}catch(p){if(d)return dn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:c,measurementId:d};throw p}try{const p=await Aj(n);return o.deleteThrottleMetadata(c),p}catch(p){const m=p;if(!jj(m)){if(o.deleteThrottleMetadata(c),d)return dn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:c,measurementId:d};throw p}const v=Number((a=m?.customData)===null||a===void 0?void 0:a.httpStatus)===503?tv(t,o.intervalMillis,Ij):tv(t,o.intervalMillis),w={throttleEndTimeMillis:Date.now()+v,backoffCount:t+1};return o.setThrottleMetadata(c,w),dn.debug(`Calling attemptFetch again in ${v} millis`),bT(n,w,r,o)}}function Rj(n,e){return new Promise((t,r)=>{const o=Math.max(e-Date.now(),0),a=setTimeout(t,o);n.addEventListener(()=>{clearTimeout(a),r(Tn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function jj(n){if(!(n instanceof ur)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class Dj{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Vj(n,e,t,r,o){if(o&&o.global){n("event",t,r);return}else{const a=await e,c=Object.assign(Object.assign({},r),{send_to:a});n("event",t,c)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lj(){if(Xw())try{await Jw()}catch(n){return dn.warn(Tn.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return dn.warn(Tn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Oj(n,e,t,r,o,a,c){var d;const p=Cj(n);p.then(b=>{t[b.measurementId]=b.appId,n.options.measurementId&&b.measurementId!==n.options.measurementId&&dn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${b.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(b=>dn.error(b)),e.push(p);const m=Lj().then(b=>{if(b)return r.getId()}),[v,w]=await Promise.all([p,m]);Sj(a)||xj(a,v.measurementId),o("js",new Date);const E=(d=c?.config)!==null&&d!==void 0?d:{};return E[fj]="firebase",E.update=!0,w!=null&&(E[dj]=w),o("config",v.measurementId,E),v.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e){this.app=e}_delete(){return delete Bl[this.app.options.appId],Promise.resolve()}}let Bl={},mx=[];const gx={};let tp="dataLayer",Uj="gtag",yx,ST,vx=!1;function Fj(){const n=[];if(Yw()&&n.push("This is a browser extension environment."),VI()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,o)=>`(${o+1}) ${r}`).join(" "),t=Tn.create("invalid-analytics-context",{errorInfo:e});dn.warn(t.message)}}function Bj(n,e,t){Fj();const r=n.options.appId;if(!r)throw Tn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)dn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Tn.create("no-api-key");if(Bl[r]!=null)throw Tn.create("already-exists",{id:r});if(!vx){wj(tp);const{wrappedGtag:a,gtagCore:c}=bj(Bl,mx,gx,tp,Uj);ST=a,yx=c,vx=!0}return Bl[r]=Oj(n,mx,gx,e,yx,tp,t),new Mj(n)}function zj(n=dm()){n=kt(n);const e=no(n,Sh);return e.isInitialized()?e.getImmediate():$j(n)}function $j(n,e={}){const t=no(n,Sh);if(t.isInitialized()){const o=t.getImmediate();if(Kl(e,t.getOptions()))return o;throw Tn.create("already-initialized")}return t.initialize({options:e})}function qj(n,e,t,r){n=kt(n),Vj(ST,Bl[n.app.options.appId],e,t,r).catch(o=>dn.error(o))}const xx="@firebase/analytics",wx="0.10.8";function Gj(){kr(new ar(Sh,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return Bj(r,o,t)},"PUBLIC")),kr(new ar("analytics-internal",n,"PRIVATE")),Un(xx,wx),Un(xx,wx,"esm2017");function n(e){try{const t=e.getProvider(Sh).getImmediate();return{logEvent:(r,o,a)=>qj(t,r,o,a)}}catch(t){throw Tn.create("interop-component-reg-failed",{reason:t})}}}Gj();const Hj={apiKey:"AIzaSyDSplfIeCdHaXnAgH1WnmaY78uINeUHHeA",authDomain:"glyphmart.firebaseapp.com",projectId:"glyphmart",storageBucket:"glyphmart.firebasestorage.app",messagingSenderId:"582834377960",appId:"1:582834377960:web:2f844d65c9c0f92f93255d",measurementId:"G-1RC8D5PY66"},sg=n_(Hj),sa=fA(sg),_x=iR(sg);zj(sg);const IT=k.createContext(),Bn=()=>{const n=k.useContext(IT);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},Wj=({children:n})=>{const[e,t]=k.useState(null),[r,o]=k.useState(!0),[a,c]=k.useState(null),d=async(E,b,L,V)=>{const D=(await KP(sa,E,b)).user;return await Np(D,{displayName:V}),await ER(hx(_x,"users",D.uid),{uid:D.uid,email:E,username:L,displayName:V,createdAt:new Date,glyphsCount:0,bio:"",website:"",location:""}),D},p=(E,b)=>QP(sa,E,b),m=()=>nk(sa),v=async E=>{try{const b=await wR(hx(_x,"users",E));b.exists()&&c(b.data())}catch(b){console.error("Error fetching user profile:",b)}};k.useEffect(()=>tk(sa,b=>{t(b),b?v(b.uid):c(null),o(!1)}),[]);const w={currentUser:e,userProfile:a,signup:d,signin:p,logout:m,fetchUserProfile:v};return u.jsx(IT.Provider,{value:w,children:!r&&n})};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Kj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ke=(n,e)=>{const t=k.forwardRef(({color:r="currentColor",size:o=24,strokeWidth:a=2,absoluteStrokeWidth:c,className:d="",children:p,...m},v)=>k.createElement("svg",{ref:v,...Kj,width:o,height:o,stroke:r,strokeWidth:c?Number(a)*24/Number(o):a,className:["lucide",`lucide-${Qj(n)}`,d].join(" "),...m},[...e.map(([w,E])=>k.createElement(w,E)),...Array.isArray(p)?p:[p]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qp=ke("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=ke("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=ke("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=ke("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ex=ke("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ig=ke("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=ke("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=ke("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ed=ke("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=ke("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=ke("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=ke("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=ke("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=ke("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sh=ke("FileImage",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["circle",{cx:"10",cy:"13",r:"2",key:"6v46hv"}],["path",{d:"m20 17-1.09-1.09a2 2 0 0 0-2.82 0L10 22",key:"17vly1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PT=ke("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=ke("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kT=ke("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=ke("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=ke("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gp=ke("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=ke("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=ke("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=ke("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const og=ke("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=ke("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=ke("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=ke("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=ke("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=ke("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AT=ke("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bx=ke("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=ke("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hp=ke("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=ke("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=ke("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=ke("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CT=ke("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=ke("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RT=ke("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ih=ke("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=ke("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=ke("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=ke("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jT=ke("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=ke("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),DT=k.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),td=k.createContext({}),nd=k.createContext(null),rd=typeof document<"u",ag=rd?k.useLayoutEffect:k.useEffect,VT=k.createContext({strict:!1}),lg=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),d4="framerAppearId",LT="data-"+lg(d4);function f4(n,e,t,r){const{visualElement:o}=k.useContext(td),a=k.useContext(VT),c=k.useContext(nd),d=k.useContext(DT).reducedMotion,p=k.useRef();r=r||a.renderer,!p.current&&r&&(p.current=r(n,{visualState:e,parent:o,props:t,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const m=p.current;k.useInsertionEffect(()=>{m&&m.update(t,c)});const v=k.useRef(!!(t[LT]&&!window.HandoffComplete));return ag(()=>{m&&(m.render(),v.current&&m.animationState&&m.animationState.animateChanges())}),k.useEffect(()=>{m&&(m.updateFeatures(),!v.current&&m.animationState&&m.animationState.animateChanges(),v.current&&(v.current=!1,window.HandoffComplete=!0))}),m}function oa(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function p4(n,e,t){return k.useCallback(r=>{r&&n.mount&&n.mount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):oa(t)&&(t.current=r))},[e])}function ic(n){return typeof n=="string"||Array.isArray(n)}function sd(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const cg=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ug=["initial",...cg];function id(n){return sd(n.animate)||ug.some(e=>ic(n[e]))}function OT(n){return!!(id(n)||n.variants)}function m4(n,e){if(id(n)){const{initial:t,animate:r}=n;return{initial:t===!1||ic(t)?t:void 0,animate:ic(r)?r:void 0}}return n.inherit!==!1?e:{}}function g4(n){const{initial:e,animate:t}=m4(n,k.useContext(td));return k.useMemo(()=>({initial:e,animate:t}),[Nx(e),Nx(t)])}function Nx(n){return Array.isArray(n)?n.join(" "):n}const Px={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},oc={};for(const n in Px)oc[n]={isEnabled:e=>Px[n].some(t=>!!e[t])};function y4(n){for(const e in n)oc[e]={...oc[e],...n[e]}}const hg=k.createContext({}),MT=k.createContext({}),v4=Symbol.for("motionComponentSymbol");function x4({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:o}){n&&y4(n);function a(d,p){let m;const v={...k.useContext(DT),...d,layoutId:w4(d)},{isStatic:w}=v,E=g4(d),b=r(d,w);if(!w&&rd){E.visualElement=f4(o,b,v,e);const L=k.useContext(MT),V=k.useContext(VT).strict;E.visualElement&&(m=E.visualElement.loadFeatures(v,V,n,L))}return k.createElement(td.Provider,{value:E},m&&E.visualElement?k.createElement(m,{visualElement:E.visualElement,...v}):null,t(o,d,p4(b,E.visualElement,p),b,w,E.visualElement))}const c=k.forwardRef(a);return c[v4]=o,c}function w4({layoutId:n}){const e=k.useContext(hg).id;return e&&n!==void 0?e+"-"+n:n}function _4(n){function e(r,o={}){return x4(n(r,o))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(r,o)=>(t.has(o)||t.set(o,e(o)),t.get(o))})}const E4=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function dg(n){return typeof n!="string"||n.includes("-")?!1:!!(E4.indexOf(n)>-1||/[A-Z]/.test(n))}const Nh={};function T4(n){Object.assign(Nh,n)}const wc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],oo=new Set(wc);function UT(n,{layout:e,layoutId:t}){return oo.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Nh[n]||n==="opacity")}const pn=n=>!!(n&&n.getVelocity),b4={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},S4=wc.length;function I4(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},r,o){let a="";for(let c=0;c<S4;c++){const d=wc[c];if(n[d]!==void 0){const p=b4[d]||d;a+=`${p}(${n[d]}) `}}return e&&!n.z&&(a+="translateZ(0)"),a=a.trim(),o?a=o(n,r?"":a):t&&r&&(a="none"),a}const FT=n=>e=>typeof e=="string"&&e.startsWith(n),BT=FT("--"),Wp=FT("var(--"),N4=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,P4=(n,e)=>e&&typeof n=="number"?e.transform(n):n,ri=(n,e,t)=>Math.min(Math.max(t,n),e),ao={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},zl={...ao,transform:n=>ri(0,1,n)},Gu={...ao,default:1},$l=n=>Math.round(n*1e5)/1e5,od=/(-)?([\d]*\.?[\d])+/g,zT=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,k4=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function _c(n){return typeof n=="string"}const Ec=n=>({test:e=>_c(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Us=Ec("deg"),Pr=Ec("%"),Ie=Ec("px"),A4=Ec("vh"),C4=Ec("vw"),kx={...Pr,parse:n=>Pr.parse(n)/100,transform:n=>Pr.transform(n*100)},Ax={...ao,transform:Math.round},$T={borderWidth:Ie,borderTopWidth:Ie,borderRightWidth:Ie,borderBottomWidth:Ie,borderLeftWidth:Ie,borderRadius:Ie,radius:Ie,borderTopLeftRadius:Ie,borderTopRightRadius:Ie,borderBottomRightRadius:Ie,borderBottomLeftRadius:Ie,width:Ie,maxWidth:Ie,height:Ie,maxHeight:Ie,size:Ie,top:Ie,right:Ie,bottom:Ie,left:Ie,padding:Ie,paddingTop:Ie,paddingRight:Ie,paddingBottom:Ie,paddingLeft:Ie,margin:Ie,marginTop:Ie,marginRight:Ie,marginBottom:Ie,marginLeft:Ie,rotate:Us,rotateX:Us,rotateY:Us,rotateZ:Us,scale:Gu,scaleX:Gu,scaleY:Gu,scaleZ:Gu,skew:Us,skewX:Us,skewY:Us,distance:Ie,translateX:Ie,translateY:Ie,translateZ:Ie,x:Ie,y:Ie,z:Ie,perspective:Ie,transformPerspective:Ie,opacity:zl,originX:kx,originY:kx,originZ:Ie,zIndex:Ax,fillOpacity:zl,strokeOpacity:zl,numOctaves:Ax};function fg(n,e,t,r){const{style:o,vars:a,transform:c,transformOrigin:d}=n;let p=!1,m=!1,v=!0;for(const w in e){const E=e[w];if(BT(w)){a[w]=E;continue}const b=$T[w],L=P4(E,b);if(oo.has(w)){if(p=!0,c[w]=L,!v)continue;E!==(b.default||0)&&(v=!1)}else w.startsWith("origin")?(m=!0,d[w]=L):o[w]=L}if(e.transform||(p||r?o.transform=I4(n.transform,t,v,r):o.transform&&(o.transform="none")),m){const{originX:w="50%",originY:E="50%",originZ:b=0}=d;o.transformOrigin=`${w} ${E} ${b}`}}const pg=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function qT(n,e,t){for(const r in e)!pn(e[r])&&!UT(r,t)&&(n[r]=e[r])}function R4({transformTemplate:n},e,t){return k.useMemo(()=>{const r=pg();return fg(r,e,{enableHardwareAcceleration:!t},n),Object.assign({},r.vars,r.style)},[e])}function j4(n,e,t){const r=n.style||{},o={};return qT(o,r,n),Object.assign(o,R4(n,e,t)),n.transformValues?n.transformValues(o):o}function D4(n,e,t){const r={},o=j4(n,e,t);return n.drag&&n.dragListener!==!1&&(r.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(r.tabIndex=0),r.style=o,r}const V4=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ph(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||V4.has(n)}let GT=n=>!Ph(n);function L4(n){n&&(GT=e=>e.startsWith("on")?!Ph(e):n(e))}try{L4(require("@emotion/is-prop-valid").default)}catch{}function O4(n,e,t){const r={};for(const o in n)o==="values"&&typeof n.values=="object"||(GT(o)||t===!0&&Ph(o)||!e&&!Ph(o)||n.draggable&&o.startsWith("onDrag"))&&(r[o]=n[o]);return r}function Cx(n,e,t){return typeof n=="string"?n:Ie.transform(e+t*n)}function M4(n,e,t){const r=Cx(e,n.x,n.width),o=Cx(t,n.y,n.height);return`${r} ${o}`}const U4={offset:"stroke-dashoffset",array:"stroke-dasharray"},F4={offset:"strokeDashoffset",array:"strokeDasharray"};function B4(n,e,t=1,r=0,o=!0){n.pathLength=1;const a=o?U4:F4;n[a.offset]=Ie.transform(-r);const c=Ie.transform(e),d=Ie.transform(t);n[a.array]=`${c} ${d}`}function mg(n,{attrX:e,attrY:t,attrScale:r,originX:o,originY:a,pathLength:c,pathSpacing:d=1,pathOffset:p=0,...m},v,w,E){if(fg(n,m,v,E),w){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:b,style:L,dimensions:V}=n;b.transform&&(V&&(L.transform=b.transform),delete b.transform),V&&(o!==void 0||a!==void 0||L.transform)&&(L.transformOrigin=M4(V,o!==void 0?o:.5,a!==void 0?a:.5)),e!==void 0&&(b.x=e),t!==void 0&&(b.y=t),r!==void 0&&(b.scale=r),c!==void 0&&B4(b,c,d,p,!1)}const HT=()=>({...pg(),attrs:{}}),gg=n=>typeof n=="string"&&n.toLowerCase()==="svg";function z4(n,e,t,r){const o=k.useMemo(()=>{const a=HT();return mg(a,e,{enableHardwareAcceleration:!1},gg(r),n.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(n.style){const a={};qT(a,n.style,n),o.style={...a,...o.style}}return o}function $4(n=!1){return(t,r,o,{latestValues:a},c)=>{const p=(dg(t)?z4:D4)(r,a,c,t),v={...O4(r,typeof t=="string",n),...p,ref:o},{children:w}=r,E=k.useMemo(()=>pn(w)?w.get():w,[w]);return k.createElement(t,{...v,children:E})}}function WT(n,{style:e,vars:t},r,o){Object.assign(n.style,e,o&&o.getProjectionStyles(r));for(const a in t)n.style.setProperty(a,t[a])}const KT=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function QT(n,e,t,r){WT(n,e,void 0,r);for(const o in e.attrs)n.setAttribute(KT.has(o)?o:lg(o),e.attrs[o])}function yg(n,e){const{style:t}=n,r={};for(const o in t)(pn(t[o])||e.style&&pn(e.style[o])||UT(o,n))&&(r[o]=t[o]);return r}function YT(n,e){const t=yg(n,e);for(const r in n)if(pn(n[r])||pn(e[r])){const o=wc.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;t[o]=n[r]}return t}function vg(n,e,t,r={},o={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,o)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,o)),e}function XT(n){const e=k.useRef(null);return e.current===null&&(e.current=n()),e.current}const kh=n=>Array.isArray(n),q4=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),G4=n=>kh(n)?n[n.length-1]||0:n;function ih(n){const e=pn(n)?n.get():n;return q4(e)?e.toValue():e}function H4({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},r,o,a){const c={latestValues:W4(r,o,a,n),renderState:e()};return t&&(c.mount=d=>t(r,d,c)),c}const JT=n=>(e,t)=>{const r=k.useContext(td),o=k.useContext(nd),a=()=>H4(n,e,r,o);return t?a():XT(a)};function W4(n,e,t,r){const o={},a=r(n,{});for(const E in a)o[E]=ih(a[E]);let{initial:c,animate:d}=n;const p=id(n),m=OT(n);e&&m&&!p&&n.inherit!==!1&&(c===void 0&&(c=e.initial),d===void 0&&(d=e.animate));let v=t?t.initial===!1:!1;v=v||c===!1;const w=v?d:c;return w&&typeof w!="boolean"&&!sd(w)&&(Array.isArray(w)?w:[w]).forEach(b=>{const L=vg(n,b);if(!L)return;const{transitionEnd:V,transition:P,...D}=L;for(const O in D){let j=D[O];if(Array.isArray(j)){const W=v?j.length-1:0;j=j[W]}j!==null&&(o[O]=j)}for(const O in V)o[O]=V[O]}),o}const mt=n=>n;class Rx{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function K4(n){let e=new Rx,t=new Rx,r=0,o=!1,a=!1;const c=new WeakSet,d={schedule:(p,m=!1,v=!1)=>{const w=v&&o,E=w?e:t;return m&&c.add(p),E.add(p)&&w&&o&&(r=e.order.length),p},cancel:p=>{t.remove(p),c.delete(p)},process:p=>{if(o){a=!0;return}if(o=!0,[e,t]=[t,e],t.clear(),r=e.order.length,r)for(let m=0;m<r;m++){const v=e.order[m];v(p),c.has(v)&&(d.schedule(v),n())}o=!1,a&&(a=!1,d.process(p))}};return d}const Hu=["prepare","read","update","preRender","render","postRender"],Q4=40;function Y4(n,e){let t=!1,r=!0;const o={delta:0,timestamp:0,isProcessing:!1},a=Hu.reduce((w,E)=>(w[E]=K4(()=>t=!0),w),{}),c=w=>a[w].process(o),d=()=>{const w=performance.now();t=!1,o.delta=r?1e3/60:Math.max(Math.min(w-o.timestamp,Q4),1),o.timestamp=w,o.isProcessing=!0,Hu.forEach(c),o.isProcessing=!1,t&&e&&(r=!1,n(d))},p=()=>{t=!0,r=!0,o.isProcessing||n(d)};return{schedule:Hu.reduce((w,E)=>{const b=a[E];return w[E]=(L,V=!1,P=!1)=>(t||p(),b.schedule(L,V,P)),w},{}),cancel:w=>Hu.forEach(E=>a[E].cancel(w)),state:o,steps:a}}const{schedule:tt,cancel:ds,state:Kt,steps:np}=Y4(typeof requestAnimationFrame<"u"?requestAnimationFrame:mt,!0),X4={useVisualState:JT({scrapeMotionValuesFromProps:YT,createRenderState:HT,onMount:(n,e,{renderState:t,latestValues:r})=>{tt.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),tt.render(()=>{mg(t,r,{enableHardwareAcceleration:!1},gg(e.tagName),n.transformTemplate),QT(e,t)})}})},J4={useVisualState:JT({scrapeMotionValuesFromProps:yg,createRenderState:pg})};function Z4(n,{forwardMotionProps:e=!1},t,r){return{...dg(n)?X4:J4,preloadedFeatures:t,useRender:$4(e),createVisualElement:r,Component:n}}function ts(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const ZT=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function ad(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const eD=n=>e=>ZT(e)&&n(e,ad(e));function is(n,e,t,r){return ts(n,e,eD(t),r)}const tD=(n,e)=>t=>e(n(t)),Js=(...n)=>n.reduce(tD);function e1(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const jx=e1("dragHorizontal"),Dx=e1("dragVertical");function t1(n){let e=!1;if(n==="y")e=Dx();else if(n==="x")e=jx();else{const t=jx(),r=Dx();t&&r?e=()=>{t(),r()}:(t&&t(),r&&r())}return e}function n1(){const n=t1(!0);return n?(n(),!1):!0}class ai{constructor(e){this.isMounted=!1,this.node=e}update(){}}function Vx(n,e){const t="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),o=(a,c)=>{if(a.pointerType==="touch"||n1())return;const d=n.getProps();n.animationState&&d.whileHover&&n.animationState.setActive("whileHover",e),d[r]&&tt.update(()=>d[r](a,c))};return is(n.current,t,o,{passive:!n.getProps()[r]})}class nD extends ai{mount(){this.unmount=Js(Vx(this.node,!0),Vx(this.node,!1))}unmount(){}}class rD extends ai{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Js(ts(this.node.current,"focus",()=>this.onFocus()),ts(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const r1=(n,e)=>e?n===e?!0:r1(n,e.parentElement):!1;function rp(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,ad(t))}class sD extends ai{constructor(){super(...arguments),this.removeStartListeners=mt,this.removeEndListeners=mt,this.removeAccessibleListeners=mt,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),a=is(window,"pointerup",(d,p)=>{if(!this.checkPressEnd())return;const{onTap:m,onTapCancel:v,globalTapTarget:w}=this.node.getProps();tt.update(()=>{!w&&!r1(this.node.current,d.target)?v&&v(d,p):m&&m(d,p)})},{passive:!(r.onTap||r.onPointerUp)}),c=is(window,"pointercancel",(d,p)=>this.cancelPress(d,p),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Js(a,c),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=a=>{if(a.key!=="Enter"||this.isPressing)return;const c=d=>{d.key!=="Enter"||!this.checkPressEnd()||rp("up",(p,m)=>{const{onTap:v}=this.node.getProps();v&&tt.update(()=>v(p,m))})};this.removeEndListeners(),this.removeEndListeners=ts(this.node.current,"keyup",c),rp("down",(d,p)=>{this.startPress(d,p)})},t=ts(this.node.current,"keydown",e),r=()=>{this.isPressing&&rp("cancel",(a,c)=>this.cancelPress(a,c))},o=ts(this.node.current,"blur",r);this.removeAccessibleListeners=Js(t,o)}}startPress(e,t){this.isPressing=!0;const{onTapStart:r,whileTap:o}=this.node.getProps();o&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&tt.update(()=>r(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!n1()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&tt.update(()=>r(e,t))}mount(){const e=this.node.getProps(),t=is(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=ts(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Js(t,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Kp=new WeakMap,sp=new WeakMap,iD=n=>{const e=Kp.get(n.target);e&&e(n)},oD=n=>{n.forEach(iD)};function aD({root:n,...e}){const t=n||document;sp.has(t)||sp.set(t,{});const r=sp.get(t),o=JSON.stringify(e);return r[o]||(r[o]=new IntersectionObserver(oD,{root:n,...e})),r[o]}function lD(n,e,t){const r=aD(e);return Kp.set(n,t),r.observe(n),()=>{Kp.delete(n),r.unobserve(n)}}const cD={some:0,all:1};class uD extends ai{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:o="some",once:a}=e,c={root:t?t.current:void 0,rootMargin:r,threshold:typeof o=="number"?o:cD[o]},d=p=>{const{isIntersecting:m}=p;if(this.isInView===m||(this.isInView=m,a&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:v,onViewportLeave:w}=this.node.getProps(),E=m?v:w;E&&E(p)};return lD(this.node.current,c,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(hD(e,t))&&this.startObserver()}unmount(){}}function hD({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const dD={inView:{Feature:uD},tap:{Feature:sD},focus:{Feature:rD},hover:{Feature:nD}};function s1(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function fD(n){const e={};return n.values.forEach((t,r)=>e[r]=t.get()),e}function pD(n){const e={};return n.values.forEach((t,r)=>e[r]=t.getVelocity()),e}function ld(n,e,t){const r=n.getProps();return vg(r,e,t!==void 0?t:r.custom,fD(n),pD(n))}let xg=mt;const Gi=n=>n*1e3,os=n=>n/1e3,mD={current:!1},i1=n=>Array.isArray(n)&&typeof n[0]=="number";function o1(n){return!!(!n||typeof n=="string"&&a1[n]||i1(n)||Array.isArray(n)&&n.every(o1))}const Vl=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,a1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Vl([0,.65,.55,1]),circOut:Vl([.55,0,1,.45]),backIn:Vl([.31,.01,.66,-.59]),backOut:Vl([.33,1.53,.69,.99])};function l1(n){if(n)return i1(n)?Vl(n):Array.isArray(n)?n.map(l1):a1[n]}function gD(n,e,t,{delay:r=0,duration:o,repeat:a=0,repeatType:c="loop",ease:d,times:p}={}){const m={[e]:t};p&&(m.offset=p);const v=l1(d);return Array.isArray(v)&&(m.easing=v),n.animate(m,{delay:r,duration:o,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:a+1,direction:c==="reverse"?"alternate":"normal"})}function yD(n,{repeat:e,repeatType:t="loop"}){const r=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[r]}const c1=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,vD=1e-7,xD=12;function wD(n,e,t,r,o){let a,c,d=0;do c=e+(t-e)/2,a=c1(c,r,o)-n,a>0?t=c:e=c;while(Math.abs(a)>vD&&++d<xD);return c}function Tc(n,e,t,r){if(n===e&&t===r)return mt;const o=a=>wD(a,0,1,n,t);return a=>a===0||a===1?a:c1(o(a),e,r)}const _D=Tc(.42,0,1,1),ED=Tc(0,0,.58,1),u1=Tc(.42,0,.58,1),TD=n=>Array.isArray(n)&&typeof n[0]!="number",h1=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,d1=n=>e=>1-n(1-e),wg=n=>1-Math.sin(Math.acos(n)),f1=d1(wg),bD=h1(wg),p1=Tc(.33,1.53,.69,.99),_g=d1(p1),SD=h1(_g),ID=n=>(n*=2)<1?.5*_g(n):.5*(2-Math.pow(2,-10*(n-1))),ND={linear:mt,easeIn:_D,easeInOut:u1,easeOut:ED,circIn:wg,circInOut:bD,circOut:f1,backIn:_g,backInOut:SD,backOut:p1,anticipate:ID},Lx=n=>{if(Array.isArray(n)){xg(n.length===4);const[e,t,r,o]=n;return Tc(e,t,r,o)}else if(typeof n=="string")return ND[n];return n},Eg=(n,e)=>t=>!!(_c(t)&&k4.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),m1=(n,e,t)=>r=>{if(!_c(r))return r;const[o,a,c,d]=r.match(od);return{[n]:parseFloat(o),[e]:parseFloat(a),[t]:parseFloat(c),alpha:d!==void 0?parseFloat(d):1}},PD=n=>ri(0,255,n),ip={...ao,transform:n=>Math.round(PD(n))},$i={test:Eg("rgb","red"),parse:m1("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+ip.transform(n)+", "+ip.transform(e)+", "+ip.transform(t)+", "+$l(zl.transform(r))+")"};function kD(n){let e="",t="",r="",o="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),o=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),o=n.substring(4,5),e+=e,t+=t,r+=r,o+=o),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:o?parseInt(o,16)/255:1}}const Qp={test:Eg("#"),parse:kD,transform:$i.transform},aa={test:Eg("hsl","hue"),parse:m1("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Pr.transform($l(e))+", "+Pr.transform($l(t))+", "+$l(zl.transform(r))+")"},nn={test:n=>$i.test(n)||Qp.test(n)||aa.test(n),parse:n=>$i.test(n)?$i.parse(n):aa.test(n)?aa.parse(n):Qp.parse(n),transform:n=>_c(n)?n:n.hasOwnProperty("red")?$i.transform(n):aa.transform(n)},lt=(n,e,t)=>-t*n+t*e+n;function op(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function AD({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let o=0,a=0,c=0;if(!e)o=a=c=t;else{const d=t<.5?t*(1+e):t+e-t*e,p=2*t-d;o=op(p,d,n+1/3),a=op(p,d,n),c=op(p,d,n-1/3)}return{red:Math.round(o*255),green:Math.round(a*255),blue:Math.round(c*255),alpha:r}}const ap=(n,e,t)=>{const r=n*n;return Math.sqrt(Math.max(0,t*(e*e-r)+r))},CD=[Qp,$i,aa],RD=n=>CD.find(e=>e.test(n));function Ox(n){const e=RD(n);let t=e.parse(n);return e===aa&&(t=AD(t)),t}const g1=(n,e)=>{const t=Ox(n),r=Ox(e),o={...t};return a=>(o.red=ap(t.red,r.red,a),o.green=ap(t.green,r.green,a),o.blue=ap(t.blue,r.blue,a),o.alpha=lt(t.alpha,r.alpha,a),$i.transform(o))};function jD(n){var e,t;return isNaN(n)&&_c(n)&&(((e=n.match(od))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(zT))===null||t===void 0?void 0:t.length)||0)>0}const y1={regex:N4,countKey:"Vars",token:"${v}",parse:mt},v1={regex:zT,countKey:"Colors",token:"${c}",parse:nn.parse},x1={regex:od,countKey:"Numbers",token:"${n}",parse:ao.parse};function lp(n,{regex:e,countKey:t,token:r,parse:o}){const a=n.tokenised.match(e);a&&(n["num"+t]=a.length,n.tokenised=n.tokenised.replace(e,r),n.values.push(...a.map(o)))}function Ah(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&lp(t,y1),lp(t,v1),lp(t,x1),t}function w1(n){return Ah(n).values}function _1(n){const{values:e,numColors:t,numVars:r,tokenised:o}=Ah(n),a=e.length;return c=>{let d=o;for(let p=0;p<a;p++)p<r?d=d.replace(y1.token,c[p]):p<r+t?d=d.replace(v1.token,nn.transform(c[p])):d=d.replace(x1.token,$l(c[p]));return d}}const DD=n=>typeof n=="number"?0:n;function VD(n){const e=w1(n);return _1(n)(e.map(DD))}const si={test:jD,parse:w1,createTransformer:_1,getAnimatableNone:VD},E1=(n,e)=>t=>`${t>0?e:n}`;function T1(n,e){return typeof n=="number"?t=>lt(n,e,t):nn.test(n)?g1(n,e):n.startsWith("var(")?E1(n,e):S1(n,e)}const b1=(n,e)=>{const t=[...n],r=t.length,o=n.map((a,c)=>T1(a,e[c]));return a=>{for(let c=0;c<r;c++)t[c]=o[c](a);return t}},LD=(n,e)=>{const t={...n,...e},r={};for(const o in t)n[o]!==void 0&&e[o]!==void 0&&(r[o]=T1(n[o],e[o]));return o=>{for(const a in r)t[a]=r[a](o);return t}},S1=(n,e)=>{const t=si.createTransformer(e),r=Ah(n),o=Ah(e);return r.numVars===o.numVars&&r.numColors===o.numColors&&r.numNumbers>=o.numNumbers?Js(b1(r.values,o.values),t):E1(n,e)},ac=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},Mx=(n,e)=>t=>lt(n,e,t);function OD(n){return typeof n=="number"?Mx:typeof n=="string"?nn.test(n)?g1:S1:Array.isArray(n)?b1:typeof n=="object"?LD:Mx}function MD(n,e,t){const r=[],o=t||OD(n[0]),a=n.length-1;for(let c=0;c<a;c++){let d=o(n[c],n[c+1]);if(e){const p=Array.isArray(e)?e[c]||mt:e;d=Js(p,d)}r.push(d)}return r}function I1(n,e,{clamp:t=!0,ease:r,mixer:o}={}){const a=n.length;if(xg(a===e.length),a===1)return()=>e[0];n[0]>n[a-1]&&(n=[...n].reverse(),e=[...e].reverse());const c=MD(e,r,o),d=c.length,p=m=>{let v=0;if(d>1)for(;v<n.length-2&&!(m<n[v+1]);v++);const w=ac(n[v],n[v+1],m);return c[v](w)};return t?m=>p(ri(n[0],n[a-1],m)):p}function UD(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const o=ac(0,e,r);n.push(lt(t,1,o))}}function FD(n){const e=[0];return UD(e,n.length-1),e}function BD(n,e){return n.map(t=>t*e)}function zD(n,e){return n.map(()=>e||u1).splice(0,n.length-1)}function Ch({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const o=TD(r)?r.map(Lx):Lx(r),a={done:!1,value:e[0]},c=BD(t&&t.length===e.length?t:FD(e),n),d=I1(c,e,{ease:Array.isArray(o)?o:zD(e,o)});return{calculatedDuration:n,next:p=>(a.value=d(p),a.done=p>=n,a)}}function N1(n,e){return e?n*(1e3/e):0}const $D=5;function P1(n,e,t){const r=Math.max(e-$D,0);return N1(t-n(r),e-r)}const cp=.001,qD=.01,GD=10,HD=.05,WD=1;function KD({duration:n=800,bounce:e=.25,velocity:t=0,mass:r=1}){let o,a,c=1-e;c=ri(HD,WD,c),n=ri(qD,GD,os(n)),c<1?(o=m=>{const v=m*c,w=v*n,E=v-t,b=Yp(m,c),L=Math.exp(-w);return cp-E/b*L},a=m=>{const w=m*c*n,E=w*t+t,b=Math.pow(c,2)*Math.pow(m,2)*n,L=Math.exp(-w),V=Yp(Math.pow(m,2),c);return(-o(m)+cp>0?-1:1)*((E-b)*L)/V}):(o=m=>{const v=Math.exp(-m*n),w=(m-t)*n+1;return-cp+v*w},a=m=>{const v=Math.exp(-m*n),w=(t-m)*(n*n);return v*w});const d=5/n,p=YD(o,a,d);if(n=Gi(n),isNaN(p))return{stiffness:100,damping:10,duration:n};{const m=Math.pow(p,2)*r;return{stiffness:m,damping:c*2*Math.sqrt(r*m),duration:n}}}const QD=12;function YD(n,e,t){let r=t;for(let o=1;o<QD;o++)r=r-n(r)/e(r);return r}function Yp(n,e){return n*Math.sqrt(1-e*e)}const XD=["duration","bounce"],JD=["stiffness","damping","mass"];function Ux(n,e){return e.some(t=>n[t]!==void 0)}function ZD(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!Ux(n,JD)&&Ux(n,XD)){const t=KD(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function k1({keyframes:n,restDelta:e,restSpeed:t,...r}){const o=n[0],a=n[n.length-1],c={done:!1,value:o},{stiffness:d,damping:p,mass:m,duration:v,velocity:w,isResolvedFromDuration:E}=ZD({...r,velocity:-os(r.velocity||0)}),b=w||0,L=p/(2*Math.sqrt(d*m)),V=a-o,P=os(Math.sqrt(d/m)),D=Math.abs(V)<5;t||(t=D?.01:2),e||(e=D?.005:.5);let O;if(L<1){const j=Yp(P,L);O=W=>{const Z=Math.exp(-L*P*W);return a-Z*((b+L*P*V)/j*Math.sin(j*W)+V*Math.cos(j*W))}}else if(L===1)O=j=>a-Math.exp(-P*j)*(V+(b+P*V)*j);else{const j=P*Math.sqrt(L*L-1);O=W=>{const Z=Math.exp(-L*P*W),ae=Math.min(j*W,300);return a-Z*((b+L*P*V)*Math.sinh(ae)+j*V*Math.cosh(ae))/j}}return{calculatedDuration:E&&v||null,next:j=>{const W=O(j);if(E)c.done=j>=v;else{let Z=b;j!==0&&(L<1?Z=P1(O,j,W):Z=0);const ae=Math.abs(Z)<=t,R=Math.abs(a-W)<=e;c.done=ae&&R}return c.value=c.done?a:W,c}}}function Fx({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:o=10,bounceStiffness:a=500,modifyTarget:c,min:d,max:p,restDelta:m=.5,restSpeed:v}){const w=n[0],E={done:!1,value:w},b=I=>d!==void 0&&I<d||p!==void 0&&I>p,L=I=>d===void 0?p:p===void 0||Math.abs(d-I)<Math.abs(p-I)?d:p;let V=t*e;const P=w+V,D=c===void 0?P:c(P);D!==P&&(V=D-w);const O=I=>-V*Math.exp(-I/r),j=I=>D+O(I),W=I=>{const N=O(I),M=j(I);E.done=Math.abs(N)<=m,E.value=E.done?D:M};let Z,ae;const R=I=>{b(E.value)&&(Z=I,ae=k1({keyframes:[E.value,L(E.value)],velocity:P1(j,I,E.value),damping:o,stiffness:a,restDelta:m,restSpeed:v}))};return R(0),{calculatedDuration:null,next:I=>{let N=!1;return!ae&&Z===void 0&&(N=!0,W(I),R(I)),Z!==void 0&&I>Z?ae.next(I-Z):(!N&&W(I),E)}}}const eV=n=>{const e=({timestamp:t})=>n(t);return{start:()=>tt.update(e,!0),stop:()=>ds(e),now:()=>Kt.isProcessing?Kt.timestamp:performance.now()}},Bx=2e4;function zx(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<Bx;)e+=t,r=n.next(e);return e>=Bx?1/0:e}const tV={decay:Fx,inertia:Fx,tween:Ch,keyframes:Ch,spring:k1};function Rh({autoplay:n=!0,delay:e=0,driver:t=eV,keyframes:r,type:o="keyframes",repeat:a=0,repeatDelay:c=0,repeatType:d="loop",onPlay:p,onStop:m,onComplete:v,onUpdate:w,...E}){let b=1,L=!1,V,P;const D=()=>{P=new Promise(U=>{V=U})};D();let O;const j=tV[o]||Ch;let W;j!==Ch&&typeof r[0]!="number"&&(W=I1([0,100],r,{clamp:!1}),r=[0,100]);const Z=j({...E,keyframes:r});let ae;d==="mirror"&&(ae=j({...E,keyframes:[...r].reverse(),velocity:-(E.velocity||0)}));let R="idle",I=null,N=null,M=null;Z.calculatedDuration===null&&a&&(Z.calculatedDuration=zx(Z));const{calculatedDuration:B}=Z;let $=1/0,A=1/0;B!==null&&($=B+c,A=$*(a+1)-c);let _e=0;const Ue=U=>{if(N===null)return;b>0&&(N=Math.min(N,U)),b<0&&(N=Math.min(U-A/b,N)),I!==null?_e=I:_e=Math.round(U-N)*b;const X=_e-e*(b>=0?1:-1),me=b>=0?X<0:X>A;_e=Math.max(X,0),R==="finished"&&I===null&&(_e=A);let ce=_e,he=Z;if(a){const we=Math.min(_e,A)/$;let Ve=Math.floor(we),_t=we%1;!_t&&we>=1&&(_t=1),_t===1&&Ve--,Ve=Math.min(Ve,a+1),!!(Ve%2)&&(d==="reverse"?(_t=1-_t,c&&(_t-=c/$)):d==="mirror"&&(he=ae)),ce=ri(0,1,_t)*$}const ve=me?{done:!1,value:r[0]}:he.next(ce);W&&(ve.value=W(ve.value));let{done:Le}=ve;!me&&B!==null&&(Le=b>=0?_e>=A:_e<=0);const Q=I===null&&(R==="finished"||R==="running"&&Le);return w&&w(ve.value),Q&&oe(),ve},Oe=()=>{O&&O.stop(),O=void 0},Ae=()=>{R="idle",Oe(),V(),D(),N=M=null},oe=()=>{R="finished",v&&v(),Oe(),V()},ee=()=>{if(L)return;O||(O=t(Ue));const U=O.now();p&&p(),I!==null?N=U-I:(!N||R==="finished")&&(N=U),R==="finished"&&D(),M=N,I=null,R="running",O.start()};n&&ee();const J={then(U,X){return P.then(U,X)},get time(){return os(_e)},set time(U){U=Gi(U),_e=U,I!==null||!O||b===0?I=U:N=O.now()-U/b},get duration(){const U=Z.calculatedDuration===null?zx(Z):Z.calculatedDuration;return os(U)},get speed(){return b},set speed(U){U===b||!O||(b=U,J.time=os(_e))},get state(){return R},play:ee,pause:()=>{R="paused",I=_e},stop:()=>{L=!0,R!=="idle"&&(R="idle",m&&m(),Ae())},cancel:()=>{M!==null&&Ue(M),Ae()},complete:()=>{R="finished"},sample:U=>(N=0,Ue(U))};return J}function nV(n){let e;return()=>(e===void 0&&(e=n()),e)}const rV=nV(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),sV=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Wu=10,iV=2e4,oV=(n,e)=>e.type==="spring"||n==="backgroundColor"||!o1(e.ease);function aV(n,e,{onUpdate:t,onComplete:r,...o}){if(!(rV()&&sV.has(e)&&!o.repeatDelay&&o.repeatType!=="mirror"&&o.damping!==0&&o.type!=="inertia"))return!1;let c=!1,d,p,m=!1;const v=()=>{p=new Promise(j=>{d=j})};v();let{keyframes:w,duration:E=300,ease:b,times:L}=o;if(oV(e,o)){const j=Rh({...o,repeat:0,delay:0});let W={done:!1,value:w[0]};const Z=[];let ae=0;for(;!W.done&&ae<iV;)W=j.sample(ae),Z.push(W.value),ae+=Wu;L=void 0,w=Z,E=ae-Wu,b="linear"}const V=gD(n.owner.current,e,w,{...o,duration:E,ease:b,times:L}),P=()=>{m=!1,V.cancel()},D=()=>{m=!0,tt.update(P),d(),v()};return V.onfinish=()=>{m||(n.set(yD(w,o)),r&&r(),D())},{then(j,W){return p.then(j,W)},attachTimeline(j){return V.timeline=j,V.onfinish=null,mt},get time(){return os(V.currentTime||0)},set time(j){V.currentTime=Gi(j)},get speed(){return V.playbackRate},set speed(j){V.playbackRate=j},get duration(){return os(E)},play:()=>{c||(V.play(),ds(P))},pause:()=>V.pause(),stop:()=>{if(c=!0,V.playState==="idle")return;const{currentTime:j}=V;if(j){const W=Rh({...o,autoplay:!1});n.setWithVelocity(W.sample(j-Wu).value,W.sample(j).value,Wu)}D()},complete:()=>{m||V.finish()},cancel:D}}function lV({keyframes:n,delay:e,onUpdate:t,onComplete:r}){const o=()=>(t&&t(n[n.length-1]),r&&r(),{time:0,speed:1,duration:0,play:mt,pause:mt,stop:mt,then:a=>(a(),Promise.resolve()),cancel:mt,complete:mt});return e?Rh({keyframes:[0,1],duration:0,delay:e,onComplete:o}):o()}const cV={type:"spring",stiffness:500,damping:25,restSpeed:10},uV=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),hV={type:"keyframes",duration:.8},dV={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},fV=(n,{keyframes:e})=>e.length>2?hV:oo.has(n)?n.startsWith("scale")?uV(e[1]):cV:dV,Xp=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(si.test(e)||e==="0")&&!e.startsWith("url(")),pV=new Set(["brightness","contrast","saturate","opacity"]);function mV(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(od)||[];if(!r)return n;const o=t.replace(r,"");let a=pV.has(e)?1:0;return r!==t&&(a*=100),e+"("+a+o+")"}const gV=/([a-z-]*)\(.*?\)/g,Jp={...si,getAnimatableNone:n=>{const e=n.match(gV);return e?e.map(mV).join(" "):n}},yV={...$T,color:nn,backgroundColor:nn,outlineColor:nn,fill:nn,stroke:nn,borderColor:nn,borderTopColor:nn,borderRightColor:nn,borderBottomColor:nn,borderLeftColor:nn,filter:Jp,WebkitFilter:Jp},Tg=n=>yV[n];function A1(n,e){let t=Tg(n);return t!==Jp&&(t=si),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const C1=n=>/^0[^.\s]+$/.test(n);function vV(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||C1(n)}function xV(n,e,t,r){const o=Xp(e,t);let a;Array.isArray(t)?a=[...t]:a=[null,t];const c=r.from!==void 0?r.from:n.get();let d;const p=[];for(let m=0;m<a.length;m++)a[m]===null&&(a[m]=m===0?c:a[m-1]),vV(a[m])&&p.push(m),typeof a[m]=="string"&&a[m]!=="none"&&a[m]!=="0"&&(d=a[m]);if(o&&p.length&&d)for(let m=0;m<p.length;m++){const v=p[m];a[v]=A1(e,d)}return a}function wV({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:o,repeat:a,repeatType:c,repeatDelay:d,from:p,elapsed:m,...v}){return!!Object.keys(v).length}function bg(n,e){return n[e]||n.default||n}const _V={skipAnimations:!1},Sg=(n,e,t,r={})=>o=>{const a=bg(r,n)||{},c=a.delay||r.delay||0;let{elapsed:d=0}=r;d=d-Gi(c);const p=xV(e,n,t,a),m=p[0],v=p[p.length-1],w=Xp(n,m),E=Xp(n,v);let b={keyframes:p,velocity:e.getVelocity(),ease:"easeOut",...a,delay:-d,onUpdate:L=>{e.set(L),a.onUpdate&&a.onUpdate(L)},onComplete:()=>{o(),a.onComplete&&a.onComplete()}};if(wV(a)||(b={...b,...fV(n,b)}),b.duration&&(b.duration=Gi(b.duration)),b.repeatDelay&&(b.repeatDelay=Gi(b.repeatDelay)),!w||!E||mD.current||a.type===!1||_V.skipAnimations)return lV(b);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const L=aV(e,n,b);if(L)return L}return Rh(b)};function jh(n){return!!(pn(n)&&n.add)}const R1=n=>/^\-?\d*\.?\d+$/.test(n);function Ig(n,e){n.indexOf(e)===-1&&n.push(e)}function Ng(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class Pg{constructor(){this.subscriptions=[]}add(e){return Ig(this.subscriptions,e),()=>Ng(this.subscriptions,e)}notify(e,t,r){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](e,t,r);else for(let a=0;a<o;a++){const c=this.subscriptions[a];c&&c(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const EV=n=>!isNaN(parseFloat(n));class TV{constructor(e,t={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,o=!0)=>{this.prev=this.current,this.current=r;const{delta:a,timestamp:c}=Kt;this.lastUpdated!==c&&(this.timeDelta=a,this.lastUpdated=c,tt.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),o&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>tt.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=EV(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Pg);const r=this.events[e].add(t);return e==="change"?()=>{r(),tt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?N1(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ea(n,e){return new TV(n,e)}const j1=n=>e=>e.test(n),bV={test:n=>n==="auto",parse:n=>n},D1=[ao,Ie,Pr,Us,C4,A4,bV],Nl=n=>D1.find(j1(n)),SV=[...D1,nn,si],IV=n=>SV.find(j1(n));function NV(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Ea(t))}function PV(n,e){const t=ld(n,e);let{transitionEnd:r={},transition:o={},...a}=t?n.makeTargetAnimatable(t,!1):{};a={...a,...r};for(const c in a){const d=G4(a[c]);NV(n,c,d)}}function kV(n,e,t){var r,o;const a=Object.keys(e).filter(d=>!n.hasValue(d)),c=a.length;if(c)for(let d=0;d<c;d++){const p=a[d],m=e[p];let v=null;Array.isArray(m)&&(v=m[0]),v===null&&(v=(o=(r=t[p])!==null&&r!==void 0?r:n.readValue(p))!==null&&o!==void 0?o:e[p]),v!=null&&(typeof v=="string"&&(R1(v)||C1(v))?v=parseFloat(v):!IV(v)&&si.test(m)&&(v=A1(p,m)),n.addValue(p,Ea(v,{owner:n})),t[p]===void 0&&(t[p]=v),v!==null&&n.setBaseTarget(p,v))}}function AV(n,e){return e?(e[n]||e.default||e).from:void 0}function CV(n,e,t){const r={};for(const o in n){const a=AV(o,e);if(a!==void 0)r[o]=a;else{const c=t.getValue(o);c&&(r[o]=c.get())}}return r}function RV({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function jV(n,e){const t=n.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}else return t!==e}function V1(n,e,{delay:t=0,transitionOverride:r,type:o}={}){let{transition:a=n.getDefaultTransition(),transitionEnd:c,...d}=n.makeTargetAnimatable(e);const p=n.getValue("willChange");r&&(a=r);const m=[],v=o&&n.animationState&&n.animationState.getState()[o];for(const w in d){const E=n.getValue(w),b=d[w];if(!E||b===void 0||v&&RV(v,w))continue;const L={delay:t,elapsed:0,...bg(a||{},w)};if(window.HandoffAppearAnimations){const D=n.getProps()[LT];if(D){const O=window.HandoffAppearAnimations(D,w,E,tt);O!==null&&(L.elapsed=O,L.isHandoff=!0)}}let V=!L.isHandoff&&!jV(E,b);if(L.type==="spring"&&(E.getVelocity()||L.velocity)&&(V=!1),E.animation&&(V=!1),V)continue;E.start(Sg(w,E,b,n.shouldReduceMotion&&oo.has(w)?{type:!1}:L));const P=E.animation;jh(p)&&(p.add(w),P.then(()=>p.remove(w))),m.push(P)}return c&&Promise.all(m).then(()=>{c&&PV(n,c)}),m}function Zp(n,e,t={}){const r=ld(n,e,t.custom);let{transition:o=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(o=t.transitionOverride);const a=r?()=>Promise.all(V1(n,r,t)):()=>Promise.resolve(),c=n.variantChildren&&n.variantChildren.size?(p=0)=>{const{delayChildren:m=0,staggerChildren:v,staggerDirection:w}=o;return DV(n,e,m+p,v,w,t)}:()=>Promise.resolve(),{when:d}=o;if(d){const[p,m]=d==="beforeChildren"?[a,c]:[c,a];return p().then(()=>m())}else return Promise.all([a(),c(t.delay)])}function DV(n,e,t=0,r=0,o=1,a){const c=[],d=(n.variantChildren.size-1)*r,p=o===1?(m=0)=>m*r:(m=0)=>d-m*r;return Array.from(n.variantChildren).sort(VV).forEach((m,v)=>{m.notify("AnimationStart",e),c.push(Zp(m,e,{...a,delay:t+p(v)}).then(()=>m.notify("AnimationComplete",e)))}),Promise.all(c)}function VV(n,e){return n.sortNodePosition(e)}function LV(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const o=e.map(a=>Zp(n,a,t));r=Promise.all(o)}else if(typeof e=="string")r=Zp(n,e,t);else{const o=typeof e=="function"?ld(n,e,t.custom):e;r=Promise.all(V1(n,o,t))}return r.then(()=>n.notify("AnimationComplete",e))}const OV=[...cg].reverse(),MV=cg.length;function UV(n){return e=>Promise.all(e.map(({animation:t,options:r})=>LV(n,t,r)))}function FV(n){let e=UV(n);const t=zV();let r=!0;const o=(p,m)=>{const v=ld(n,m);if(v){const{transition:w,transitionEnd:E,...b}=v;p={...p,...b,...E}}return p};function a(p){e=p(n)}function c(p,m){const v=n.getProps(),w=n.getVariantContext(!0)||{},E=[],b=new Set;let L={},V=1/0;for(let D=0;D<MV;D++){const O=OV[D],j=t[O],W=v[O]!==void 0?v[O]:w[O],Z=ic(W),ae=O===m?j.isActive:null;ae===!1&&(V=D);let R=W===w[O]&&W!==v[O]&&Z;if(R&&r&&n.manuallyAnimateOnMount&&(R=!1),j.protectedKeys={...L},!j.isActive&&ae===null||!W&&!j.prevProp||sd(W)||typeof W=="boolean")continue;let N=BV(j.prevProp,W)||O===m&&j.isActive&&!R&&Z||D>V&&Z,M=!1;const B=Array.isArray(W)?W:[W];let $=B.reduce(o,{});ae===!1&&($={});const{prevResolvedValues:A={}}=j,_e={...A,...$},Ue=Oe=>{N=!0,b.has(Oe)&&(M=!0,b.delete(Oe)),j.needsAnimating[Oe]=!0};for(const Oe in _e){const Ae=$[Oe],oe=A[Oe];if(L.hasOwnProperty(Oe))continue;let ee=!1;kh(Ae)&&kh(oe)?ee=!s1(Ae,oe):ee=Ae!==oe,ee?Ae!==void 0?Ue(Oe):b.add(Oe):Ae!==void 0&&b.has(Oe)?Ue(Oe):j.protectedKeys[Oe]=!0}j.prevProp=W,j.prevResolvedValues=$,j.isActive&&(L={...L,...$}),r&&n.blockInitialAnimation&&(N=!1),N&&(!R||M)&&E.push(...B.map(Oe=>({animation:Oe,options:{type:O,...p}})))}if(b.size){const D={};b.forEach(O=>{const j=n.getBaseTarget(O);j!==void 0&&(D[O]=j)}),E.push({animation:D})}let P=!!E.length;return r&&(v.initial===!1||v.initial===v.animate)&&!n.manuallyAnimateOnMount&&(P=!1),r=!1,P?e(E):Promise.resolve()}function d(p,m,v){var w;if(t[p].isActive===m)return Promise.resolve();(w=n.variantChildren)===null||w===void 0||w.forEach(b=>{var L;return(L=b.animationState)===null||L===void 0?void 0:L.setActive(p,m)}),t[p].isActive=m;const E=c(v,p);for(const b in t)t[b].protectedKeys={};return E}return{animateChanges:c,setActive:d,setAnimateFunction:a,getState:()=>t}}function BV(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!s1(e,n):!1}function Li(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function zV(){return{animate:Li(!0),whileInView:Li(),whileHover:Li(),whileTap:Li(),whileDrag:Li(),whileFocus:Li(),exit:Li()}}class $V extends ai{constructor(e){super(e),e.animationState||(e.animationState=FV(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),sd(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let qV=0;class GV extends ai{constructor(){super(...arguments),this.id=qV++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:r}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===o)return;const a=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});t&&!e&&a.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const HV={animation:{Feature:$V},exit:{Feature:GV}},$x=(n,e)=>Math.abs(n-e);function WV(n,e){const t=$x(n.x,e.x),r=$x(n.y,e.y);return Math.sqrt(t**2+r**2)}class L1{constructor(e,t,{transformPagePoint:r,contextWindow:o,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=hp(this.lastMoveEventInfo,this.history),E=this.startEvent!==null,b=WV(w.offset,{x:0,y:0})>=3;if(!E&&!b)return;const{point:L}=w,{timestamp:V}=Kt;this.history.push({...L,timestamp:V});const{onStart:P,onMove:D}=this.handlers;E||(P&&P(this.lastMoveEvent,w),this.startEvent=this.lastMoveEvent),D&&D(this.lastMoveEvent,w)},this.handlePointerMove=(w,E)=>{this.lastMoveEvent=w,this.lastMoveEventInfo=up(E,this.transformPagePoint),tt.update(this.updatePoint,!0)},this.handlePointerUp=(w,E)=>{this.end();const{onEnd:b,onSessionEnd:L,resumeAnimation:V}=this.handlers;if(this.dragSnapToOrigin&&V&&V(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=hp(w.type==="pointercancel"?this.lastMoveEventInfo:up(E,this.transformPagePoint),this.history);this.startEvent&&b&&b(w,P),L&&L(w,P)},!ZT(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=r,this.contextWindow=o||window;const c=ad(e),d=up(c,this.transformPagePoint),{point:p}=d,{timestamp:m}=Kt;this.history=[{...p,timestamp:m}];const{onSessionStart:v}=t;v&&v(e,hp(d,this.history)),this.removeListeners=Js(is(this.contextWindow,"pointermove",this.handlePointerMove),is(this.contextWindow,"pointerup",this.handlePointerUp),is(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ds(this.updatePoint)}}function up(n,e){return e?{point:e(n.point)}:n}function qx(n,e){return{x:n.x-e.x,y:n.y-e.y}}function hp({point:n},e){return{point:n,delta:qx(n,O1(e)),offset:qx(n,KV(e)),velocity:QV(e,.1)}}function KV(n){return n[0]}function O1(n){return n[n.length-1]}function QV(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const o=O1(n);for(;t>=0&&(r=n[t],!(o.timestamp-r.timestamp>Gi(e)));)t--;if(!r)return{x:0,y:0};const a=os(o.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const c={x:(o.x-r.x)/a,y:(o.y-r.y)/a};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function Sn(n){return n.max-n.min}function em(n,e=0,t=.01){return Math.abs(n-e)<=t}function Gx(n,e,t,r=.5){n.origin=r,n.originPoint=lt(e.min,e.max,n.origin),n.scale=Sn(t)/Sn(e),(em(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=lt(t.min,t.max,n.origin)-n.originPoint,(em(n.translate)||isNaN(n.translate))&&(n.translate=0)}function ql(n,e,t,r){Gx(n.x,e.x,t.x,r?r.originX:void 0),Gx(n.y,e.y,t.y,r?r.originY:void 0)}function Hx(n,e,t){n.min=t.min+e.min,n.max=n.min+Sn(e)}function YV(n,e,t){Hx(n.x,e.x,t.x),Hx(n.y,e.y,t.y)}function Wx(n,e,t){n.min=e.min-t.min,n.max=n.min+Sn(e)}function Gl(n,e,t){Wx(n.x,e.x,t.x),Wx(n.y,e.y,t.y)}function XV(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?lt(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?lt(t,n,r.max):Math.min(n,t)),n}function Kx(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function JV(n,{top:e,left:t,bottom:r,right:o}){return{x:Kx(n.x,t,o),y:Kx(n.y,e,r)}}function Qx(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function ZV(n,e){return{x:Qx(n.x,e.x),y:Qx(n.y,e.y)}}function eL(n,e){let t=.5;const r=Sn(n),o=Sn(e);return o>r?t=ac(e.min,e.max-r,n.min):r>o&&(t=ac(n.min,n.max-o,e.min)),ri(0,1,t)}function tL(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const tm=.35;function nL(n=tm){return n===!1?n=0:n===!0&&(n=tm),{x:Yx(n,"left","right"),y:Yx(n,"top","bottom")}}function Yx(n,e,t){return{min:Xx(n,e),max:Xx(n,t)}}function Xx(n,e){return typeof n=="number"?n:n[e]||0}const Jx=()=>({translate:0,scale:1,origin:0,originPoint:0}),la=()=>({x:Jx(),y:Jx()}),Zx=()=>({min:0,max:0}),wt=()=>({x:Zx(),y:Zx()});function On(n){return[n("x"),n("y")]}function M1({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function rL({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function sL(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function dp(n){return n===void 0||n===1}function nm({scale:n,scaleX:e,scaleY:t}){return!dp(n)||!dp(e)||!dp(t)}function Mi(n){return nm(n)||U1(n)||n.z||n.rotate||n.rotateX||n.rotateY}function U1(n){return ew(n.x)||ew(n.y)}function ew(n){return n&&n!=="0%"}function Dh(n,e,t){const r=n-t,o=e*r;return t+o}function tw(n,e,t,r,o){return o!==void 0&&(n=Dh(n,o,r)),Dh(n,t,r)+e}function rm(n,e=0,t=1,r,o){n.min=tw(n.min,e,t,r,o),n.max=tw(n.max,e,t,r,o)}function F1(n,{x:e,y:t}){rm(n.x,e.translate,e.scale,e.originPoint),rm(n.y,t.translate,t.scale,t.originPoint)}function iL(n,e,t,r=!1){const o=t.length;if(!o)return;e.x=e.y=1;let a,c;for(let d=0;d<o;d++){a=t[d],c=a.projectionDelta;const p=a.instance;p&&p.style&&p.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&ca(n,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,F1(n,c)),r&&Mi(a.latestValues)&&ca(n,a.latestValues))}e.x=nw(e.x),e.y=nw(e.y)}function nw(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function Fs(n,e){n.min=n.min+e,n.max=n.max+e}function rw(n,e,[t,r,o]){const a=e[o]!==void 0?e[o]:.5,c=lt(n.min,n.max,a);rm(n,e[t],e[r],c,e.scale)}const oL=["x","scaleX","originX"],aL=["y","scaleY","originY"];function ca(n,e){rw(n.x,e,oL),rw(n.y,e,aL)}function B1(n,e){return M1(sL(n.getBoundingClientRect(),e))}function lL(n,e,t){const r=B1(n,t),{scroll:o}=e;return o&&(Fs(r.x,o.offset.x),Fs(r.y,o.offset.y)),r}const z1=({current:n})=>n?n.ownerDocument.defaultView:null,cL=new WeakMap;class uL{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=wt(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const o=v=>{const{dragSnapToOrigin:w}=this.getProps();w?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(ad(v,"page").point)},a=(v,w)=>{const{drag:E,dragPropagation:b,onDragStart:L}=this.getProps();if(E&&!b&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=t1(E),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),On(P=>{let D=this.getAxisMotionValue(P).get()||0;if(Pr.test(D)){const{projection:O}=this.visualElement;if(O&&O.layout){const j=O.layout.layoutBox[P];j&&(D=Sn(j)*(parseFloat(D)/100))}}this.originPoint[P]=D}),L&&tt.update(()=>L(v,w),!1,!0);const{animationState:V}=this.visualElement;V&&V.setActive("whileDrag",!0)},c=(v,w)=>{const{dragPropagation:E,dragDirectionLock:b,onDirectionLock:L,onDrag:V}=this.getProps();if(!E&&!this.openGlobalLock)return;const{offset:P}=w;if(b&&this.currentDirection===null){this.currentDirection=hL(P),this.currentDirection!==null&&L&&L(this.currentDirection);return}this.updateAxis("x",w.point,P),this.updateAxis("y",w.point,P),this.visualElement.render(),V&&V(v,w)},d=(v,w)=>this.stop(v,w),p=()=>On(v=>{var w;return this.getAnimationState(v)==="paused"&&((w=this.getAxisMotionValue(v).animation)===null||w===void 0?void 0:w.play())}),{dragSnapToOrigin:m}=this.getProps();this.panSession=new L1(e,{onSessionStart:o,onStart:a,onMove:c,onSessionEnd:d,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,contextWindow:z1(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:o}=t;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&tt.update(()=>a(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:o}=this.getProps();if(!r||!Ku(e,o,this.currentDirection))return;const a=this.getAxisMotionValue(e);let c=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(c=XV(c,this.constraints[e],this.elastic[e])),a.set(c)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;t&&oa(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&o?this.constraints=JV(o.layoutBox,t):this.constraints=!1,this.elastic=nL(r),a!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&On(c=>{this.getAxisMotionValue(c)&&(this.constraints[c]=tL(o.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!oa(e))return!1;const r=e.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const a=lL(r,o.root,this.visualElement.getTransformPagePoint());let c=ZV(o.layout.layoutBox,a);if(t){const d=t(rL(c));this.hasMutatedConstraints=!!d,d&&(c=M1(d))}return c}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:o,dragTransition:a,dragSnapToOrigin:c,onDragTransitionEnd:d}=this.getProps(),p=this.constraints||{},m=On(v=>{if(!Ku(v,t,this.currentDirection))return;let w=p&&p[v]||{};c&&(w={min:0,max:0});const E=o?200:1e6,b=o?40:1e7,L={type:"inertia",velocity:r?e[v]:0,bounceStiffness:E,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...a,...w};return this.startAxisValueAnimation(v,L)});return Promise.all(m).then(d)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return r.start(Sg(e,r,0,t))}stopAnimation(){On(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){On(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),o=r[t];return o||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){On(t=>{const{drag:r}=this.getProps();if(!Ku(t,r,this.currentDirection))return;const{projection:o}=this.visualElement,a=this.getAxisMotionValue(t);if(o&&o.layout){const{min:c,max:d}=o.layout.layoutBox[t];a.set(e[t]-lt(c,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!oa(t)||!r||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};On(c=>{const d=this.getAxisMotionValue(c);if(d){const p=d.get();o[c]=eL({min:p,max:p},this.constraints[c])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),On(c=>{if(!Ku(c,e,null))return;const d=this.getAxisMotionValue(c),{min:p,max:m}=this.constraints[c];d.set(lt(p,m,o[c]))})}addListeners(){if(!this.visualElement.current)return;cL.set(this.visualElement,this);const e=this.visualElement.current,t=is(e,"pointerdown",p=>{const{drag:m,dragListener:v=!0}=this.getProps();m&&v&&this.start(p)}),r=()=>{const{dragConstraints:p}=this.getProps();oa(p)&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,a=o.addEventListener("measure",r);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),r();const c=ts(window,"resize",()=>this.scalePositionWithinConstraints()),d=o.addEventListener("didUpdate",({delta:p,hasLayoutChanged:m})=>{this.isDragging&&m&&(On(v=>{const w=this.getAxisMotionValue(v);w&&(this.originPoint[v]+=p[v].translate,w.set(w.get()+p[v].translate))}),this.visualElement.render())});return()=>{c(),t(),a(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:o=!1,dragConstraints:a=!1,dragElastic:c=tm,dragMomentum:d=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:o,dragConstraints:a,dragElastic:c,dragMomentum:d}}}function Ku(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function hL(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class dL extends ai{constructor(e){super(e),this.removeGroupControls=mt,this.removeListeners=mt,this.controls=new uL(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||mt}unmount(){this.removeGroupControls(),this.removeListeners()}}const sw=n=>(e,t)=>{n&&tt.update(()=>n(e,t))};class fL extends ai{constructor(){super(...arguments),this.removePointerDownListener=mt}onPointerDown(e){this.session=new L1(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:z1(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:o}=this.node.getProps();return{onSessionStart:sw(e),onStart:sw(t),onMove:r,onEnd:(a,c)=>{delete this.session,o&&tt.update(()=>o(a,c))}}}mount(){this.removePointerDownListener=is(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function pL(){const n=k.useContext(nd);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:r}=n,o=k.useId();return k.useEffect(()=>r(o),[]),!e&&t?[!1,()=>t&&t(o)]:[!0]}const oh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function iw(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Pl={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Ie.test(n))n=parseFloat(n);else return n;const t=iw(n,e.target.x),r=iw(n,e.target.y);return`${t}% ${r}%`}},mL={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,o=si.parse(n);if(o.length>5)return r;const a=si.createTransformer(n),c=typeof o[0]!="number"?1:0,d=t.x.scale*e.x,p=t.y.scale*e.y;o[0+c]/=d,o[1+c]/=p;const m=lt(d,p,.5);return typeof o[2+c]=="number"&&(o[2+c]/=m),typeof o[3+c]=="number"&&(o[3+c]/=m),a(o)}};class gL extends Vh.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:o}=this.props,{projection:a}=e;T4(yL),a&&(t.group&&t.group.add(a),r&&r.register&&o&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),oh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:o,isPresent:a}=this.props,c=r.projection;return c&&(c.isPresent=a,o||e.layoutDependency!==t||t===void 0?c.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?c.promote():c.relegate()||tt.postRender(()=>{const d=c.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:o}=e;o&&(o.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(o),r&&r.deregister&&r.deregister(o))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function $1(n){const[e,t]=pL(),r=k.useContext(hg);return Vh.createElement(gL,{...n,layoutGroup:r,switchLayoutGroup:k.useContext(MT),isPresent:e,safeToRemove:t})}const yL={borderRadius:{...Pl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Pl,borderTopRightRadius:Pl,borderBottomLeftRadius:Pl,borderBottomRightRadius:Pl,boxShadow:mL},q1=["TopLeft","TopRight","BottomLeft","BottomRight"],vL=q1.length,ow=n=>typeof n=="string"?parseFloat(n):n,aw=n=>typeof n=="number"||Ie.test(n);function xL(n,e,t,r,o,a){o?(n.opacity=lt(0,t.opacity!==void 0?t.opacity:1,wL(r)),n.opacityExit=lt(e.opacity!==void 0?e.opacity:1,0,_L(r))):a&&(n.opacity=lt(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let c=0;c<vL;c++){const d=`border${q1[c]}Radius`;let p=lw(e,d),m=lw(t,d);if(p===void 0&&m===void 0)continue;p||(p=0),m||(m=0),p===0||m===0||aw(p)===aw(m)?(n[d]=Math.max(lt(ow(p),ow(m),r),0),(Pr.test(m)||Pr.test(p))&&(n[d]+="%")):n[d]=m}(e.rotate||t.rotate)&&(n.rotate=lt(e.rotate||0,t.rotate||0,r))}function lw(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const wL=G1(0,.5,f1),_L=G1(.5,.95,mt);function G1(n,e,t){return r=>r<n?0:r>e?1:t(ac(n,e,r))}function cw(n,e){n.min=e.min,n.max=e.max}function Ln(n,e){cw(n.x,e.x),cw(n.y,e.y)}function uw(n,e,t,r,o){return n-=e,n=Dh(n,1/t,r),o!==void 0&&(n=Dh(n,1/o,r)),n}function EL(n,e=0,t=1,r=.5,o,a=n,c=n){if(Pr.test(e)&&(e=parseFloat(e),e=lt(c.min,c.max,e/100)-c.min),typeof e!="number")return;let d=lt(a.min,a.max,r);n===a&&(d-=e),n.min=uw(n.min,e,t,d,o),n.max=uw(n.max,e,t,d,o)}function hw(n,e,[t,r,o],a,c){EL(n,e[t],e[r],e[o],e.scale,a,c)}const TL=["x","scaleX","originX"],bL=["y","scaleY","originY"];function dw(n,e,t,r){hw(n.x,e,TL,t?t.x:void 0,r?r.x:void 0),hw(n.y,e,bL,t?t.y:void 0,r?r.y:void 0)}function fw(n){return n.translate===0&&n.scale===1}function H1(n){return fw(n.x)&&fw(n.y)}function SL(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function W1(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function pw(n){return Sn(n.x)/Sn(n.y)}class IL{constructor(){this.members=[]}add(e){Ig(this.members,e),e.scheduleRender()}remove(e){if(Ng(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(o=>e===o);if(t===0)return!1;let r;for(let o=t;o>=0;o--){const a=this.members[o];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:o}=e.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function mw(n,e,t){let r="";const o=n.x.translate/e.x,a=n.y.translate/e.y;if((o||a)&&(r=`translate3d(${o}px, ${a}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:p,rotateX:m,rotateY:v}=t;p&&(r+=`rotate(${p}deg) `),m&&(r+=`rotateX(${m}deg) `),v&&(r+=`rotateY(${v}deg) `)}const c=n.x.scale*e.x,d=n.y.scale*e.y;return(c!==1||d!==1)&&(r+=`scale(${c}, ${d})`),r||"none"}const NL=(n,e)=>n.depth-e.depth;class PL{constructor(){this.children=[],this.isDirty=!1}add(e){Ig(this.children,e),this.isDirty=!0}remove(e){Ng(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(NL),this.isDirty=!1,this.children.forEach(e)}}function kL(n,e){const t=performance.now(),r=({timestamp:o})=>{const a=o-t;a>=e&&(ds(r),n(a-e))};return tt.read(r,!0),()=>ds(r)}function AL(n){window.MotionDebug&&window.MotionDebug.record(n)}function CL(n){return n instanceof SVGElement&&n.tagName!=="svg"}function RL(n,e,t){const r=pn(n)?n:Ea(n);return r.start(Sg("",r,e,t)),r.animation}const gw=["","X","Y","Z"],jL={visibility:"hidden"},yw=1e3;let DL=0;const Ui={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function K1({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:o}){return class{constructor(c={},d=e?.()){this.id=DL++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ui.totalNodes=Ui.resolvedTargetDeltas=Ui.recalculatedProjection=0,this.nodes.forEach(OL),this.nodes.forEach(zL),this.nodes.forEach($L),this.nodes.forEach(ML),AL(Ui)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let p=0;p<this.path.length;p++)this.path[p].shouldResetTransform=!0;this.root===this&&(this.nodes=new PL)}addEventListener(c,d){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new Pg),this.eventHandlers.get(c).add(d)}notifyListeners(c,...d){const p=this.eventHandlers.get(c);p&&p.notify(...d)}hasListeners(c){return this.eventHandlers.has(c)}mount(c,d=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=CL(c),this.instance=c;const{layoutId:p,layout:m,visualElement:v}=this.options;if(v&&!v.current&&v.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),d&&(m||p)&&(this.isLayoutDirty=!0),n){let w;const E=()=>this.root.updateBlockedByResize=!1;n(c,()=>{this.root.updateBlockedByResize=!0,w&&w(),w=kL(E,250),oh.hasAnimatedSinceResize&&(oh.hasAnimatedSinceResize=!1,this.nodes.forEach(xw))})}p&&this.root.registerSharedNode(p,this),this.options.animate!==!1&&v&&(p||m)&&this.addEventListener("didUpdate",({delta:w,hasLayoutChanged:E,hasRelativeTargetChanged:b,layout:L})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const V=this.options.transition||v.getDefaultTransition()||KL,{onLayoutAnimationStart:P,onLayoutAnimationComplete:D}=v.getProps(),O=!this.targetLayout||!W1(this.targetLayout,L)||b,j=!E&&b;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||j||E&&(O||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(w,j);const W={...bg(V,"layout"),onPlay:P,onComplete:D};(v.shouldReduceMotion||this.options.layoutRoot)&&(W.delay=0,W.type=!1),this.startAnimation(W)}else E||xw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=L})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ds(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(qL),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let v=0;v<this.path.length;v++){const w=this.path[v];w.shouldResetTransform=!0,w.updateScroll("snapshot"),w.options.layoutRoot&&w.willUpdate(!1)}const{layoutId:d,layout:p}=this.options;if(d===void 0&&!p)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(vw);return}this.isUpdating||this.nodes.forEach(FL),this.isUpdating=!1,this.nodes.forEach(BL),this.nodes.forEach(VL),this.nodes.forEach(LL),this.clearAllSnapshots();const d=performance.now();Kt.delta=ri(0,1e3/60,d-Kt.timestamp),Kt.timestamp=d,Kt.isProcessing=!0,np.update.process(Kt),np.preRender.process(Kt),np.render.process(Kt),Kt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(UL),this.sharedNodes.forEach(GL)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,tt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){tt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let p=0;p<this.path.length;p++)this.path[p].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=wt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let d=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(d=!1),d&&(this.scroll={animationId:this.root.animationId,phase:c,isRoot:r(this.instance),offset:t(this.instance)})}resetTransform(){if(!o)return;const c=this.isLayoutDirty||this.shouldResetTransform,d=this.projectionDelta&&!H1(this.projectionDelta),p=this.getTransformTemplate(),m=p?p(this.latestValues,""):void 0,v=m!==this.prevTransformTemplateValue;c&&(d||Mi(this.latestValues)||v)&&(o(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const d=this.measurePageBox();let p=this.removeElementScroll(d);return c&&(p=this.removeTransform(p)),QL(p),{animationId:this.root.animationId,measuredBox:d,layoutBox:p,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:c}=this.options;if(!c)return wt();const d=c.measureViewportBox(),{scroll:p}=this.root;return p&&(Fs(d.x,p.offset.x),Fs(d.y,p.offset.y)),d}removeElementScroll(c){const d=wt();Ln(d,c);for(let p=0;p<this.path.length;p++){const m=this.path[p],{scroll:v,options:w}=m;if(m!==this.root&&v&&w.layoutScroll){if(v.isRoot){Ln(d,c);const{scroll:E}=this.root;E&&(Fs(d.x,-E.offset.x),Fs(d.y,-E.offset.y))}Fs(d.x,v.offset.x),Fs(d.y,v.offset.y)}}return d}applyTransform(c,d=!1){const p=wt();Ln(p,c);for(let m=0;m<this.path.length;m++){const v=this.path[m];!d&&v.options.layoutScroll&&v.scroll&&v!==v.root&&ca(p,{x:-v.scroll.offset.x,y:-v.scroll.offset.y}),Mi(v.latestValues)&&ca(p,v.latestValues)}return Mi(this.latestValues)&&ca(p,this.latestValues),p}removeTransform(c){const d=wt();Ln(d,c);for(let p=0;p<this.path.length;p++){const m=this.path[p];if(!m.instance||!Mi(m.latestValues))continue;nm(m.latestValues)&&m.updateSnapshot();const v=wt(),w=m.measurePageBox();Ln(v,w),dw(d,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,v)}return Mi(this.latestValues)&&dw(d,this.latestValues),d}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Kt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var d;const p=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=p.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=p.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=p.isSharedProjectionDirty);const m=!!this.resumingFrom||this!==p;if(!(c||m&&this.isSharedProjectionDirty||this.isProjectionDirty||!((d=this.parent)===null||d===void 0)&&d.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:w,layoutId:E}=this.options;if(!(!this.layout||!(w||E))){if(this.resolvedRelativeTargetAt=Kt.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wt(),this.relativeTargetOrigin=wt(),Gl(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),Ln(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=wt(),this.targetWithTransforms=wt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),YV(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ln(this.target,this.layout.layoutBox),F1(this.target,this.targetDelta)):Ln(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wt(),this.relativeTargetOrigin=wt(),Gl(this.relativeTargetOrigin,this.target,b.target),Ln(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ui.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||nm(this.parent.latestValues)||U1(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var c;const d=this.getLead(),p=!!this.resumingFrom||this!==d;let m=!0;if((this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty)&&(m=!1),p&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(m=!1),this.resolvedRelativeTargetAt===Kt.timestamp&&(m=!1),m)return;const{layout:v,layoutId:w}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(v||w))return;Ln(this.layoutCorrected,this.layout.layoutBox);const E=this.treeScale.x,b=this.treeScale.y;iL(this.layoutCorrected,this.treeScale,this.path,p),d.layout&&!d.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(d.target=d.layout.layoutBox);const{target:L}=d;if(!L){this.projectionTransform&&(this.projectionDelta=la(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=la(),this.projectionDeltaWithTransform=la());const V=this.projectionTransform;ql(this.projectionDelta,this.layoutCorrected,L,this.latestValues),this.projectionTransform=mw(this.projectionDelta,this.treeScale),(this.projectionTransform!==V||this.treeScale.x!==E||this.treeScale.y!==b)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",L)),Ui.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),c){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(c,d=!1){const p=this.snapshot,m=p?p.latestValues:{},v={...this.latestValues},w=la();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const E=wt(),b=p?p.source:void 0,L=this.layout?this.layout.source:void 0,V=b!==L,P=this.getStack(),D=!P||P.members.length<=1,O=!!(V&&!D&&this.options.crossfade===!0&&!this.path.some(WL));this.animationProgress=0;let j;this.mixTargetDelta=W=>{const Z=W/1e3;ww(w.x,c.x,Z),ww(w.y,c.y,Z),this.setTargetDelta(w),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Gl(E,this.layout.layoutBox,this.relativeParent.layout.layoutBox),HL(this.relativeTarget,this.relativeTargetOrigin,E,Z),j&&SL(this.relativeTarget,j)&&(this.isProjectionDirty=!1),j||(j=wt()),Ln(j,this.relativeTarget)),V&&(this.animationValues=v,xL(v,m,this.latestValues,Z,O,D)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ds(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=tt.update(()=>{oh.hasAnimatedSinceResize=!0,this.currentAnimation=RL(0,yw,{...c,onUpdate:d=>{this.mixTargetDelta(d),c.onUpdate&&c.onUpdate(d)},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(yw),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:d,target:p,layout:m,latestValues:v}=c;if(!(!d||!p||!m)){if(this!==c&&this.layout&&m&&Q1(this.options.animationType,this.layout.layoutBox,m.layoutBox)){p=this.target||wt();const w=Sn(this.layout.layoutBox.x);p.x.min=c.target.x.min,p.x.max=p.x.min+w;const E=Sn(this.layout.layoutBox.y);p.y.min=c.target.y.min,p.y.max=p.y.min+E}Ln(d,p),ca(d,v),ql(this.projectionDeltaWithTransform,this.layoutCorrected,d,v)}}registerSharedNode(c,d){this.sharedNodes.has(c)||this.sharedNodes.set(c,new IL),this.sharedNodes.get(c).add(d);const m=d.options.initialPromotionConfig;d.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(d):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var c;const{layoutId:d}=this.options;return d?((c=this.getStack())===null||c===void 0?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:d}=this.options;return d?(c=this.getStack())===null||c===void 0?void 0:c.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:d,preserveFollowOpacity:p}={}){const m=this.getStack();m&&m.promote(this,p),c&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetRotation(){const{visualElement:c}=this.options;if(!c)return;let d=!1;const{latestValues:p}=c;if((p.rotate||p.rotateX||p.rotateY||p.rotateZ)&&(d=!0),!d)return;const m={};for(let v=0;v<gw.length;v++){const w="rotate"+gw[v];p[w]&&(m[w]=p[w],c.setStaticValue(w,0))}c.render();for(const v in m)c.setStaticValue(v,m[v]);c.scheduleRender()}getProjectionStyles(c){var d,p;if(!this.instance||this.isSVG)return;if(!this.isVisible)return jL;const m={visibility:""},v=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,m.opacity="",m.pointerEvents=ih(c?.pointerEvents)||"",m.transform=v?v(this.latestValues,""):"none",m;const w=this.getLead();if(!this.projectionDelta||!this.layout||!w.target){const V={};return this.options.layoutId&&(V.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,V.pointerEvents=ih(c?.pointerEvents)||""),this.hasProjected&&!Mi(this.latestValues)&&(V.transform=v?v({},""):"none",this.hasProjected=!1),V}const E=w.animationValues||w.latestValues;this.applyTransformsToTarget(),m.transform=mw(this.projectionDeltaWithTransform,this.treeScale,E),v&&(m.transform=v(E,m.transform));const{x:b,y:L}=this.projectionDelta;m.transformOrigin=`${b.origin*100}% ${L.origin*100}% 0`,w.animationValues?m.opacity=w===this?(p=(d=E.opacity)!==null&&d!==void 0?d:this.latestValues.opacity)!==null&&p!==void 0?p:1:this.preserveOpacity?this.latestValues.opacity:E.opacityExit:m.opacity=w===this?E.opacity!==void 0?E.opacity:"":E.opacityExit!==void 0?E.opacityExit:0;for(const V in Nh){if(E[V]===void 0)continue;const{correct:P,applyTo:D}=Nh[V],O=m.transform==="none"?E[V]:P(E[V],w);if(D){const j=D.length;for(let W=0;W<j;W++)m[D[W]]=O}else m[V]=O}return this.options.layoutId&&(m.pointerEvents=w===this?ih(c?.pointerEvents)||"":"none"),m}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var d;return(d=c.currentAnimation)===null||d===void 0?void 0:d.stop()}),this.root.nodes.forEach(vw),this.root.sharedNodes.clear()}}}function VL(n){n.updateLayout()}function LL(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:o}=n.layout,{animationType:a}=n.options,c=t.source!==n.layout.source;a==="size"?On(w=>{const E=c?t.measuredBox[w]:t.layoutBox[w],b=Sn(E);E.min=r[w].min,E.max=E.min+b}):Q1(a,t.layoutBox,r)&&On(w=>{const E=c?t.measuredBox[w]:t.layoutBox[w],b=Sn(r[w]);E.max=E.min+b,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[w].max=n.relativeTarget[w].min+b)});const d=la();ql(d,r,t.layoutBox);const p=la();c?ql(p,n.applyTransform(o,!0),t.measuredBox):ql(p,r,t.layoutBox);const m=!H1(d);let v=!1;if(!n.resumeFrom){const w=n.getClosestProjectingParent();if(w&&!w.resumeFrom){const{snapshot:E,layout:b}=w;if(E&&b){const L=wt();Gl(L,t.layoutBox,E.layoutBox);const V=wt();Gl(V,r,b.layoutBox),W1(L,V)||(v=!0),w.options.layoutRoot&&(n.relativeTarget=V,n.relativeTargetOrigin=L,n.relativeParent=w)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:p,layoutDelta:d,hasLayoutChanged:m,hasRelativeTargetChanged:v})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function OL(n){Ui.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function ML(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function UL(n){n.clearSnapshot()}function vw(n){n.clearMeasurements()}function FL(n){n.isLayoutDirty=!1}function BL(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function xw(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function zL(n){n.resolveTargetDelta()}function $L(n){n.calcProjection()}function qL(n){n.resetRotation()}function GL(n){n.removeLeadSnapshot()}function ww(n,e,t){n.translate=lt(e.translate,0,t),n.scale=lt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function _w(n,e,t,r){n.min=lt(e.min,t.min,r),n.max=lt(e.max,t.max,r)}function HL(n,e,t,r){_w(n.x,e.x,t.x,r),_w(n.y,e.y,t.y,r)}function WL(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const KL={duration:.45,ease:[.4,0,.1,1]},Ew=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),Tw=Ew("applewebkit/")&&!Ew("chrome/")?Math.round:mt;function bw(n){n.min=Tw(n.min),n.max=Tw(n.max)}function QL(n){bw(n.x),bw(n.y)}function Q1(n,e,t){return n==="position"||n==="preserve-aspect"&&!em(pw(e),pw(t),.2)}const YL=K1({attachResizeListener:(n,e)=>ts(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),fp={current:void 0},Y1=K1({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!fp.current){const n=new YL({});n.mount(window),n.setOptions({layoutScroll:!0}),fp.current=n}return fp.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),XL={pan:{Feature:fL},drag:{Feature:dL,ProjectionNode:Y1,MeasureLayout:$1}},JL=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function ZL(n){const e=JL.exec(n);if(!e)return[,];const[,t,r]=e;return[t,r]}function sm(n,e,t=1){const[r,o]=ZL(n);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const c=a.trim();return R1(c)?parseFloat(c):c}else return Wp(o)?sm(o,e,t+1):o}function eO(n,{...e},t){const r=n.current;if(!(r instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(o=>{const a=o.get();if(!Wp(a))return;const c=sm(a,r);c&&o.set(c)});for(const o in e){const a=e[o];if(!Wp(a))continue;const c=sm(a,r);c&&(e[o]=c,t||(t={}),t[o]===void 0&&(t[o]=a))}return{target:e,transitionEnd:t}}const tO=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),X1=n=>tO.has(n),nO=n=>Object.keys(n).some(X1),Sw=n=>n===ao||n===Ie,Iw=(n,e)=>parseFloat(n.split(", ")[e]),Nw=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const o=r.match(/^matrix3d\((.+)\)$/);if(o)return Iw(o[1],e);{const a=r.match(/^matrix\((.+)\)$/);return a?Iw(a[1],n):0}},rO=new Set(["x","y","z"]),sO=wc.filter(n=>!rO.has(n));function iO(n){const e=[];return sO.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const Ta={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:Nw(4,13),y:Nw(5,14)};Ta.translateX=Ta.x;Ta.translateY=Ta.y;const oO=(n,e,t)=>{const r=e.measureViewportBox(),o=e.current,a=getComputedStyle(o),{display:c}=a,d={};c==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(m=>{d[m]=Ta[m](r,a)}),e.render();const p=e.measureViewportBox();return t.forEach(m=>{const v=e.getValue(m);v&&v.jump(d[m]),n[m]=Ta[m](p,a)}),n},aO=(n,e,t={},r={})=>{e={...e},r={...r};const o=Object.keys(e).filter(X1);let a=[],c=!1;const d=[];if(o.forEach(p=>{const m=n.getValue(p);if(!n.hasValue(p))return;let v=t[p],w=Nl(v);const E=e[p];let b;if(kh(E)){const L=E.length,V=E[0]===null?1:0;v=E[V],w=Nl(v);for(let P=V;P<L&&E[P]!==null;P++)b?xg(Nl(E[P])===b):b=Nl(E[P])}else b=Nl(E);if(w!==b)if(Sw(w)&&Sw(b)){const L=m.get();typeof L=="string"&&m.set(parseFloat(L)),typeof E=="string"?e[p]=parseFloat(E):Array.isArray(E)&&b===Ie&&(e[p]=E.map(parseFloat))}else w?.transform&&b?.transform&&(v===0||E===0)?v===0?m.set(b.transform(v)):e[p]=w.transform(E):(c||(a=iO(n),c=!0),d.push(p),r[p]=r[p]!==void 0?r[p]:e[p],m.jump(E))}),d.length){const p=d.indexOf("height")>=0?window.pageYOffset:null,m=oO(e,n,d);return a.length&&a.forEach(([v,w])=>{n.getValue(v).set(w)}),n.render(),rd&&p!==null&&window.scrollTo({top:p}),{target:m,transitionEnd:r}}else return{target:e,transitionEnd:r}};function lO(n,e,t,r){return nO(e)?aO(n,e,t,r):{target:e,transitionEnd:r}}const cO=(n,e,t,r)=>{const o=eO(n,e,r);return e=o.target,r=o.transitionEnd,lO(n,e,t,r)},im={current:null},J1={current:!1};function uO(){if(J1.current=!0,!!rd)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>im.current=n.matches;n.addListener(e),e()}else im.current=!1}function hO(n,e,t){const{willChange:r}=e;for(const o in e){const a=e[o],c=t[o];if(pn(a))n.addValue(o,a),jh(r)&&r.add(o);else if(pn(c))n.addValue(o,Ea(a,{owner:n})),jh(r)&&r.remove(o);else if(c!==a)if(n.hasValue(o)){const d=n.getValue(o);!d.hasAnimated&&d.set(a)}else{const d=n.getStaticValue(o);n.addValue(o,Ea(d!==void 0?d:a,{owner:n}))}}for(const o in t)e[o]===void 0&&n.removeValue(o);return e}const Pw=new WeakMap,Z1=Object.keys(oc),dO=Z1.length,kw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],fO=ug.length;class pO{constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:o,visualState:a},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>tt.render(this.render,!1,!0);const{latestValues:d,renderState:p}=a;this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=p,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=o,this.options=c,this.isControllingVariants=id(t),this.isVariantNode=OT(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...v}=this.scrapeMotionValuesFromProps(t,{});for(const w in v){const E=v[w];d[w]!==void 0&&pn(E)&&(E.set(d[w],!1),jh(m)&&m.add(w))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,Pw.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),J1.current||uO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:im.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Pw.delete(this.current),this.projection&&this.projection.unmount(),ds(this.notifyUpdate),ds(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const r=oo.has(e),o=t.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&tt.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{o(),a()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},r,o,a){let c,d;for(let p=0;p<dO;p++){const m=Z1[p],{isEnabled:v,Feature:w,ProjectionNode:E,MeasureLayout:b}=oc[m];E&&(c=E),v(t)&&(!this.features[m]&&w&&(this.features[m]=new w(this)),b&&(d=b))}if((this.type==="html"||this.type==="svg")&&!this.projection&&c){this.projection=new c(this.latestValues,this.parent&&this.parent.projection);const{layoutId:p,layout:m,drag:v,dragConstraints:w,layoutScroll:E,layoutRoot:b}=t;this.projection.setOptions({layoutId:p,layout:m,alwaysMeasureLayout:!!v||w&&oa(w),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof m=="string"?m:"both",initialPromotionConfig:a,layoutScroll:E,layoutRoot:b})}return d}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):wt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<kw.length;r++){const o=kw[r];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const a=e["on"+o];a&&(this.propEventSubscriptions[o]=this.on(o,a))}this.prevMotionValues=hO(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const t={};for(let r=0;r<fO;r++){const o=ug[r],a=this.props[o];(ic(a)||a===!1)&&(t[o]=a)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Ea(t,{owner:this}),this.addValue(e,r)),r}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props,o=typeof r=="string"||typeof r=="object"?(t=vg(this.props,r))===null||t===void 0?void 0:t[e]:void 0;if(r&&o!==void 0)return o;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!pn(a)?a:this.initialValues[e]!==void 0&&o===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Pg),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class eb extends pO{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...r},{transformValues:o},a){let c=CV(r,e||{},this);if(o&&(t&&(t=o(t)),r&&(r=o(r)),c&&(c=o(c))),a){kV(this,r,c);const d=cO(this,r,c,t);t=d.transitionEnd,r=d.target}return{transition:e,transitionEnd:t,...r}}}function mO(n){return window.getComputedStyle(n)}class gO extends eb{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(oo.has(t)){const r=Tg(t);return r&&r.default||0}else{const r=mO(e),o=(BT(t)?r.getPropertyValue(t):r[t])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:t}){return B1(e,t)}build(e,t,r,o){fg(e,t,r,o.transformTemplate)}scrapeMotionValuesFromProps(e,t){return yg(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;pn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,r,o){WT(e,t,r,o)}}class yO extends eb{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(oo.has(t)){const r=Tg(t);return r&&r.default||0}return t=KT.has(t)?t:lg(t),e.getAttribute(t)}measureInstanceViewportBox(){return wt()}scrapeMotionValuesFromProps(e,t){return YT(e,t)}build(e,t,r,o){mg(e,t,r,this.isSVGTag,o.transformTemplate)}renderInstance(e,t,r,o){QT(e,t,r,o)}mount(e){this.isSVGTag=gg(e.tagName),super.mount(e)}}const vO=(n,e)=>dg(n)?new yO(e,{enableHardwareAcceleration:!1}):new gO(e,{enableHardwareAcceleration:!0}),xO={layout:{ProjectionNode:Y1,MeasureLayout:$1}},wO={...HV,...dD,...XL,...xO},je=_4((n,e)=>Z4(n,e,wO,vO));function tb(){const n=k.useRef(!1);return ag(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function _O(){const n=tb(),[e,t]=k.useState(0),r=k.useCallback(()=>{n.current&&t(e+1)},[e]);return[k.useCallback(()=>tt.postRender(r),[r]),e]}class EO extends k.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function TO({children:n,isPresent:e}){const t=k.useId(),r=k.useRef(null),o=k.useRef({width:0,height:0,top:0,left:0});return k.useInsertionEffect(()=>{const{width:a,height:c,top:d,left:p}=o.current;if(e||!r.current||!a||!c)return;r.current.dataset.motionPopId=t;const m=document.createElement("style");return document.head.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${c}px !important;
            top: ${d}px !important;
            left: ${p}px !important;
          }
        `),()=>{document.head.removeChild(m)}},[e]),k.createElement(EO,{isPresent:e,childRef:r,sizeRef:o},k.cloneElement(n,{ref:r}))}const pp=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:o,presenceAffectsLayout:a,mode:c})=>{const d=XT(bO),p=k.useId(),m=k.useMemo(()=>({id:p,initial:e,isPresent:t,custom:o,onExitComplete:v=>{d.set(v,!0);for(const w of d.values())if(!w)return;r&&r()},register:v=>(d.set(v,!1),()=>d.delete(v))}),a?void 0:[t]);return k.useMemo(()=>{d.forEach((v,w)=>d.set(w,!1))},[t]),k.useEffect(()=>{!t&&!d.size&&r&&r()},[t]),c==="popLayout"&&(n=k.createElement(TO,{isPresent:t},n)),k.createElement(nd.Provider,{value:m},n)};function bO(){return new Map}function SO(n){return k.useEffect(()=>()=>n(),[])}const Fi=n=>n.key||"";function IO(n,e){n.forEach(t=>{const r=Fi(t);e.set(r,t)})}function NO(n){const e=[];return k.Children.forEach(n,t=>{k.isValidElement(t)&&e.push(t)}),e}const PO=({children:n,custom:e,initial:t=!0,onExitComplete:r,exitBeforeEnter:o,presenceAffectsLayout:a=!0,mode:c="sync"})=>{const d=k.useContext(hg).forceRender||_O()[0],p=tb(),m=NO(n);let v=m;const w=k.useRef(new Map).current,E=k.useRef(v),b=k.useRef(new Map).current,L=k.useRef(!0);if(ag(()=>{L.current=!1,IO(m,b),E.current=v}),SO(()=>{L.current=!0,b.clear(),w.clear()}),L.current)return k.createElement(k.Fragment,null,v.map(O=>k.createElement(pp,{key:Fi(O),isPresent:!0,initial:t?void 0:!1,presenceAffectsLayout:a,mode:c},O)));v=[...v];const V=E.current.map(Fi),P=m.map(Fi),D=V.length;for(let O=0;O<D;O++){const j=V[O];P.indexOf(j)===-1&&!w.has(j)&&w.set(j,void 0)}return c==="wait"&&w.size&&(v=[]),w.forEach((O,j)=>{if(P.indexOf(j)!==-1)return;const W=b.get(j);if(!W)return;const Z=V.indexOf(j);let ae=O;if(!ae){const R=()=>{w.delete(j);const I=Array.from(b.keys()).filter(N=>!P.includes(N));if(I.forEach(N=>b.delete(N)),E.current=m.filter(N=>{const M=Fi(N);return M===j||I.includes(M)}),!w.size){if(p.current===!1)return;d(),r&&r()}};ae=k.createElement(pp,{key:Fi(W),isPresent:!1,onExitComplete:R,custom:e,presenceAffectsLayout:a,mode:c},W),w.set(j,ae)}v.splice(Z,0,ae)}),v=v.map(O=>{const j=O.key;return w.has(j)?O:k.createElement(pp,{key:Fi(O),isPresent:!0,presenceAffectsLayout:a,mode:c},O)}),k.createElement(k.Fragment,null,w.size?v:v.map(O=>k.cloneElement(O)))},kO="",Qu=new Map;class AO{constructor(){this.baseURL=kO}async getAuthToken(){return sa.currentUser?await sa.currentUser.getIdToken():null}async request(e,t={}){const r=`${this.baseURL}/api${e}`,o=await this.getAuthToken(),a={"Content-Type":"application/json",...t.headers};o&&(a.Authorization=`Bearer ${o}`);const c={...t,headers:a};try{const d=await fetch(r,c);if(!d.ok){const p=await d.json().catch(()=>({}));throw new Error(p.error||`HTTP ${d.status}`)}return await d.json()}catch(d){throw console.error(`API request failed: ${e}`,d),d}}async getGlyphs(e={}){const t=new URLSearchParams;Object.entries(e).forEach(([a,c])=>{c!=null&&c!==""&&t.append(a,c.toString())});const r=`/get-glyphs${t.toString()?"?"+t.toString():""}`;return(await this.request(r)).glyphs}async getGlyph(e){return(await this.request(`/get-glyph/${e}`)).glyph}async uploadGlyph(e){return await this.request("/upload-glyph",{method:"POST",body:JSON.stringify(e)})}async updateGlyph(e,t){return await this.request(`/update-glyph/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteGlyph(e){return await this.request(`/delete-glyph/${e}`,{method:"DELETE"})}async uploadFile(e,t="images"){const r=new FormData;r.append("file",e),r.append("type",t);const o=await this.getAuthToken(),c=await fetch("/api/upload-file",{method:"POST",headers:{Authorization:o?`Bearer ${o}`:""},body:r});if(!c.ok){const d=await c.json();throw new Error(d.error||"Failed to upload file")}return await c.json()}async deleteFile(e,t){return await this.request("/delete-file",{method:"DELETE",body:JSON.stringify({filename:e,type:t})})}getFileUrl(e,t){return`/api/files/${e}/${t}`}cleanImageUrl(e){if(!e)return e;if(Qu.has(e))return Qu.get(e);let t=e;if(e.startsWith("/api/files/"))return Qu.set(e,t),t;if(e.includes("://")){if(e.includes("127.0.0.1:5000")||e.includes("localhost:5000")){const r=e.match(/\/api\/files\/.*$/);r&&(t=r[0])}else if(e.includes("glyphmart.andreibanu.com")){const r=e.match(/\/api\/files\/.*$/);r&&(t=r[0])}}return Qu.set(e,t),t}async recordView(e){try{return(await this.request("/record-view",{method:"POST",body:JSON.stringify({glyphId:e})})).recorded}catch(t){return console.error("Failed to record view:",t),!1}}async recordDownload(e){try{return(await this.request("/record-download",{method:"POST",body:JSON.stringify({glyphId:e})})).recorded}catch(t){return console.error("Failed to record download:",t),!1}}async toggleLike(e){const t=await this.request("/toggle-like",{method:"POST",body:JSON.stringify({glyphId:e})});return{liked:t.liked,totalLikes:t.totalLikes}}async checkLikeStatus(e){return(await this.request(`/check-like-status?glyphId=${e}`)).liked}async getUserLikes(){return(await this.request("/get-user-likes")).glyphs}async getUser(e){return(await this.request(`/get-user/${e}`)).user}async getUserByUsername(e){return(await this.request(`/get-user-by-username/${e}`)).user}async updateUser(e){return await this.request("/update-user",{method:"POST",body:JSON.stringify(e)})}async deleteUserData(){return await this.request("/delete-user-data",{method:"DELETE"})}async healthCheck(){return await this.request("/health")}async getAdminStats(){return await this.request("/admin/stats")}async getAllUsers(){return(await this.request("/admin/users")).users}async adminUpdateUser(e,t){return await this.request(`/admin/users/${e}`,{method:"PUT",body:JSON.stringify(t)})}async makeUserAdmin(e){return await this.request(`/admin/make-admin/${e}`,{method:"POST"})}async addAdminByEmail(e){return await this.request("/admin/add-admin",{method:"POST",body:JSON.stringify({email:e})})}async adminDeleteGlyph(e){return await this.request(`/admin/glyphs/${e}`,{method:"DELETE"})}async getGlyphRequests(e={}){const t=new URLSearchParams(e);return this.request(`/glyph-requests?${t}`)}async createGlyphRequest(e){return this.request("/glyph-requests",{method:"POST",body:JSON.stringify(e)})}async getGlyphRequest(e){return this.request(`/glyph-requests/${e}`)}async takeOnGlyphRequest(e){return this.request(`/glyph-requests/${e}/take-on`,{method:"POST",body:JSON.stringify({})})}async completeGlyphRequest(e,t=null){const r=t?{glyph_id:t}:{};return this.request(`/glyph-requests/${e}/complete`,{method:"POST",body:JSON.stringify(r)})}async cancelGlyphRequest(e){return this.request(`/glyph-requests/${e}/cancel`,{method:"POST",body:JSON.stringify({})})}async getMyGlyphRequests(e="all"){const t=new URLSearchParams({type:e});return this.request(`/my-glyph-requests?${t}`)}}const Me=new AO,fn=n=>Me.cleanImageUrl(n),CO=()=>{const[n,e]=k.useState(!1),[t,r]=k.useState(""),{currentUser:o,userProfile:a,logout:c}=Bn(),d=cr(),p=eo(),m=o?.uid==="9H3pw5zS6GRDFTZaoYspEmruORj2"||a?.isAdmin===!0,v=async()=>{try{await c(),d("/")}catch(E){console.error("Failed to log out:",E)}},w=E=>{E.preventDefault(),t.trim()&&d(`/search?q=${encodeURIComponent(t.trim())}`)};return u.jsxs("nav",{className:"bg-nothing-black border-b border-nothing-gray-800 sticky top-0 z-50",children:[u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"flex justify-between items-center h-16",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsxs(He,{to:"/",className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-8 h-8 bg-nothing-red rounded-full flex items-center justify-center",children:u.jsx("div",{className:"w-4 h-4 bg-nothing-white rounded-full animate-glow"})}),u.jsx("span",{className:"text-xl font-bold text-nothing-white font-nothing",children:"GlyphMart"})]})}),p.pathname!=="/search"&&p.pathname!=="/request-glyphs"&&u.jsx("div",{className:"hidden md:block flex-1 max-w-lg mx-8",children:u.jsxs("form",{onSubmit:w,className:"relative",children:[u.jsx("input",{type:"text",value:t,onChange:E=>r(E.target.value),placeholder:"Search glyphs...",className:"w-full bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg py-2 pl-10 pr-4 text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200"}),u.jsx(Xr,{className:"absolute left-3 top-2.5 h-5 w-5 text-nothing-gray-400"})]})}),u.jsx("div",{className:"hidden md:flex items-center space-x-4",children:o?u.jsxs(u.Fragment,{children:[u.jsxs(He,{to:"/upload",className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center space-x-2",children:[u.jsx(AT,{className:"h-4 w-4"}),u.jsx("span",{children:"Upload Glyph"})]}),u.jsxs("div",{className:"relative group",children:[u.jsxs("button",{className:"flex items-center space-x-2 text-nothing-white hover:text-nothing-gray-300 transition-colors duration-200",children:[u.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden border border-nothing-gray-600",children:a?.profilePicture||o.photoURL?u.jsx("img",{src:fn(a?.profilePicture||o.photoURL),alt:"Profile",loading:"lazy",className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full bg-nothing-gray-700 flex items-center justify-center",children:u.jsx(ss,{className:"h-4 w-4"})})}),u.jsx("span",{className:"font-medium",children:a?.username||o.displayName})]}),u.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200",children:u.jsxs("div",{className:"py-1",children:[u.jsxs(He,{to:`/storefront/${a?.username||o.displayName}`,className:"block px-4 py-2 text-sm text-nothing-white hover:bg-nothing-gray-800 transition-colors duration-200 flex items-center space-x-2",children:[u.jsx(Sx,{className:"h-4 w-4"}),u.jsx("span",{children:"My Storefront"})]}),u.jsxs(He,{to:"/liked",className:"block px-4 py-2 text-sm text-nothing-white hover:bg-nothing-gray-800 transition-colors duration-200 flex items-center space-x-2",children:[u.jsx(or,{className:"h-4 w-4"}),u.jsx("span",{children:"Liked Posts"})]}),u.jsxs(He,{to:"/request-glyphs",className:"block px-4 py-2 text-sm text-nothing-white hover:bg-nothing-gray-800 transition-colors duration-200 flex items-center space-x-2",children:[u.jsx(rs,{className:"h-4 w-4"}),u.jsx("span",{children:"Request Glyphs"})]}),u.jsxs(He,{to:"/my-requests",className:"block px-4 py-2 text-sm text-nothing-white hover:bg-nothing-gray-800 transition-colors duration-200 flex items-center space-x-2",children:[u.jsx(rs,{className:"h-4 w-4"}),u.jsx("span",{children:"My Requests"})]}),u.jsxs(He,{to:"/settings",className:"block px-4 py-2 text-sm text-nothing-white hover:bg-nothing-gray-800 transition-colors duration-200 flex items-center space-x-2",children:[u.jsx(Hp,{className:"h-4 w-4"}),u.jsx("span",{children:"Settings"})]}),m&&u.jsxs(He,{to:"/admin",className:"block px-4 py-2 text-sm text-nothing-white hover:bg-nothing-gray-800 transition-colors duration-200 flex items-center space-x-2",children:[u.jsx(ia,{className:"h-4 w-4"}),u.jsx("span",{children:"Admin Panel"})]}),u.jsxs("button",{onClick:v,className:"w-full text-left block px-4 py-2 text-sm text-nothing-white hover:bg-nothing-gray-800 transition-colors duration-200 flex items-center space-x-2",children:[u.jsx(Tx,{className:"h-4 w-4"}),u.jsx("span",{children:"Logout"})]})]})})]})]}):u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx(He,{to:"/login",className:"text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200",children:"Login"}),u.jsx(He,{to:"/signup",className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",children:"Sign Up"})]})}),u.jsx("div",{className:"md:hidden",children:u.jsx("button",{onClick:()=>e(!n),className:"text-nothing-white hover:text-nothing-gray-300 transition-colors duration-200",children:n?u.jsx(jT,{className:"h-6 w-6"}):u.jsx(i4,{className:"h-6 w-6"})})})]}),u.jsx("div",{className:"md:hidden pb-4",children:u.jsxs("form",{onSubmit:w,className:"relative",children:[u.jsx("input",{type:"text",value:t,onChange:E=>r(E.target.value),placeholder:"Search glyphs...",className:"w-full bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg py-2 pl-10 pr-4 text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200"}),u.jsx(Xr,{className:"absolute left-3 top-2.5 h-5 w-5 text-nothing-gray-400"})]})})]}),u.jsx(PO,{children:n&&u.jsx(je.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden bg-nothing-gray-900 border-t border-nothing-gray-800",children:u.jsx("div",{className:"px-4 py-4 space-y-4",children:o?u.jsxs(u.Fragment,{children:[u.jsx(He,{to:"/upload",className:"block bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 text-center",onClick:()=>e(!1),children:"Upload Glyph"}),u.jsxs(He,{to:`/storefront/${a?.username||o.displayName}`,className:"block text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200 flex items-center space-x-2",onClick:()=>e(!1),children:[u.jsx(Sx,{className:"h-4 w-4"}),u.jsx("span",{children:"My Storefront"})]}),u.jsxs(He,{to:"/liked",className:"block text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200 flex items-center space-x-2",onClick:()=>e(!1),children:[u.jsx(or,{className:"h-4 w-4"}),u.jsx("span",{children:"Liked Posts"})]}),u.jsxs(He,{to:"/settings",className:"block text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200 flex items-center space-x-2",onClick:()=>e(!1),children:[u.jsx(Hp,{className:"h-4 w-4"}),u.jsx("span",{children:"Settings"})]}),m&&u.jsxs(He,{to:"/admin",className:"block text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200 flex items-center space-x-2",onClick:()=>e(!1),children:[u.jsx(ia,{className:"h-4 w-4"}),u.jsx("span",{children:"Admin Panel"})]}),u.jsxs("button",{onClick:()=>{v(),e(!1)},className:"block w-full text-left text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200 flex items-center space-x-2",children:[u.jsx(Tx,{className:"h-4 w-4"}),u.jsx("span",{children:"Logout"})]})]}):u.jsxs(u.Fragment,{children:[u.jsx(He,{to:"/login",className:"block text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200",onClick:()=>e(!1),children:"Login"}),u.jsx(He,{to:"/signup",className:"block bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 text-center",onClick:()=>e(!1),children:"Sign Up"})]})})})})]})},kg=Vh.memo(({glyph:n})=>{const e=cr(),t=k.useMemo(()=>n.images&&n.images.length>0?fn(n.images[0]):null,[n.images]),r=()=>{e(`/glyph/${n.id}`)},o=a=>{a.stopPropagation()};return u.jsx(je.div,{whileHover:{y:-5},className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg overflow-hidden hover:border-nothing-gray-700 transition-all duration-300",children:u.jsxs("div",{className:"cursor-pointer",onClick:r,children:[u.jsxs("div",{className:"aspect-square bg-nothing-gray-800 relative overflow-hidden",children:[t?u.jsx("img",{src:t,alt:n.title,loading:"lazy",className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"}):u.jsx("div",{className:"w-full h-full flex items-center justify-center",children:u.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center glyph-animation",children:u.jsx(Er,{className:"h-8 w-8 text-nothing-white"})})}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-nothing-black/80 via-transparent to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300",children:u.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:u.jsxs("div",{className:"flex items-center justify-between text-nothing-white text-sm",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(hs,{className:"h-4 w-4"}),u.jsx("span",{children:n.downloads||0})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(or,{className:"h-4 w-4"}),u.jsx("span",{children:n.likes||0})]})]})})})]}),u.jsxs("div",{className:"p-4",children:[u.jsx("h3",{className:"text-nothing-white font-semibold text-lg mb-2 truncate",children:n.title}),u.jsx("p",{className:"text-nothing-gray-400 text-sm mb-3 line-clamp-2",children:n.description}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs(He,{to:`/storefront/${n.creatorUsername}`,className:"text-nothing-red hover:text-red-400 text-sm font-medium transition-colors duration-200",onClick:o,children:["@",n.creatorUsername]}),u.jsxs("div",{className:"flex items-center space-x-4 text-nothing-gray-500 text-sm",children:[u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(hs,{className:"h-3 w-3"}),u.jsx("span",{children:n.downloads||0})]}),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(bn,{className:"h-3 w-3"}),u.jsx("span",{children:n.views||0})]})]})]})]})]})})});kg.displayName="GlyphCard";const RO=()=>{const[n,e]=k.useState([]),[t,r]=k.useState([]),[o,a]=k.useState(!0),[c,d]=k.useState("latest");return k.useEffect(()=>{(async()=>{try{const m=await Me.getGlyphs({sort:"latest",limit:12}),v=await Me.getGlyphs({sort:"popular",limit:12});e(m),r(v)}catch(m){console.error("Error fetching glyphs:",m)}finally{a(!1)}})()},[]),o?u.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-4 glyph-animation",children:u.jsx(Er,{className:"h-8 w-8 text-nothing-white"})}),u.jsx("p",{className:"text-nothing-gray-400",children:"Loading latest glyphs..."})]})}):u.jsxs("div",{className:"min-h-screen bg-nothing-black",children:[u.jsxs("section",{className:"relative py-20 px-4 sm:px-6 lg:px-8",children:[u.jsx("div",{className:"max-w-7xl mx-auto text-center",children:u.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:[u.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-nothing-white mb-6 font-nothing",children:["Glyph",u.jsx("span",{className:"text-nothing-red",children:"Mart"})]}),u.jsx("p",{className:"text-xl md:text-2xl text-nothing-gray-300 mb-8 max-w-3xl mx-auto",children:"Discover, share, and download custom Nothing Phone(3) glyphs created by the community"}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[u.jsx(He,{to:"/search",className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-8 py-3 rounded-lg font-semibold text-lg transition-colors duration-200",children:"Browse Glyphs"}),u.jsx(He,{to:"/upload",className:"border border-nothing-gray-700 hover:border-nothing-gray-600 text-nothing-white px-8 py-3 rounded-lg font-semibold text-lg transition-colors duration-200",children:"Upload Your Glyph"}),u.jsx(He,{to:"/request-glyphs",className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-nothing-white px-8 py-3 rounded-lg font-semibold text-lg transition-colors duration-200",children:"Request Glyph Toys"})]})]})}),u.jsx("div",{className:"absolute top-1/2 left-1/4 transform -translate-y-1/2 opacity-20",children:u.jsx("div",{className:"w-20 h-20 bg-nothing-red rounded-full flex items-center justify-center animate-float",children:u.jsx(Er,{className:"h-10 w-10 text-nothing-white"})})}),u.jsx("div",{className:"absolute top-1/3 right-1/4 transform -translate-y-1/2 opacity-10",children:u.jsx("div",{className:"w-16 h-16 bg-nothing-white rounded-full flex items-center justify-center animate-float",style:{animationDelay:"1s"},children:u.jsx(Er,{className:"h-8 w-8 text-nothing-black"})})})]}),u.jsx("section",{className:"px-4 sm:px-6 lg:px-8 mb-8",children:u.jsx("div",{className:"max-w-7xl mx-auto",children:u.jsxs("div",{className:"flex space-x-4 border-b border-nothing-gray-800",children:[u.jsxs("button",{onClick:()=>d("latest"),className:`flex items-center space-x-2 px-4 py-3 font-medium border-b-2 transition-colors duration-200 ${c==="latest"?"border-nothing-red text-nothing-red":"border-transparent text-nothing-gray-400 hover:text-nothing-white"}`,children:[u.jsx(ed,{className:"h-4 w-4"}),u.jsx("span",{children:"Latest"})]}),u.jsxs("button",{onClick:()=>d("popular"),className:`flex items-center space-x-2 px-4 py-3 font-medium border-b-2 transition-colors duration-200 ${c==="popular"?"border-nothing-red text-nothing-red":"border-transparent text-nothing-gray-400 hover:text-nothing-white"}`,children:[u.jsx(RT,{className:"h-4 w-4"}),u.jsx("span",{children:"Popular"})]})]})})}),u.jsx("section",{className:"px-4 sm:px-6 lg:px-8 pb-20",children:u.jsxs("div",{className:"max-w-7xl mx-auto",children:[u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:(c==="latest"?n:t).map((p,m)=>u.jsx(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:m*.1},children:u.jsx(kg,{glyph:p})},p.id))}),(c==="latest"?n:t).length===0&&u.jsxs("div",{className:"text-center py-12",children:[u.jsx("div",{className:"w-16 h-16 bg-nothing-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(Er,{className:"h-8 w-8 text-nothing-gray-600"})}),u.jsx("p",{className:"text-nothing-gray-400 text-lg",children:"No glyphs found"}),u.jsx("p",{className:"text-nothing-gray-500 text-sm mt-2",children:"Be the first to share your custom Nothing Phone(3) glyph!"})]})]})}),u.jsx("footer",{className:"px-4 sm:px-6 lg:px-8 pb-8",children:u.jsx("div",{className:"max-w-7xl mx-auto border-t border-nothing-gray-900 pt-6",children:u.jsxs("div",{className:"text-center space-y-4",children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("p",{className:"text-nothing-gray-400 text-sm mb-3",children:"Enjoying GlyphMart? Support the development!"}),u.jsxs("a",{href:"https://buymeacoffee.com/PzmuV1517",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-2 bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded-lg font-medium text-sm transition-colors duration-200",children:[u.jsx("span",{children:""}),u.jsx("span",{children:"Buy me a coffee"})]})]}),u.jsx("div",{children:u.jsxs("p",{className:"text-nothing-gray-500 text-sm mb-2",children:["Looking for tones instead? Check out"," ",u.jsx("a",{href:"https://glyphtones.firu.dev/",target:"_blank",rel:"noopener noreferrer",className:"text-nothing-gray-400 hover:text-nothing-gray-300 underline transition-colors duration-200 font-medium",children:"GlyphTones"})," ","by Firu - great work!"]})})]})})})]})},jO=()=>{const[n,e]=k.useState({email:"",password:""}),[t,r]=k.useState(!1),[o,a]=k.useState(!1),[c,d]=k.useState(""),{signin:p}=Bn(),m=cr(),v=E=>{e({...n,[E.target.name]:E.target.value}),d("")},w=async E=>{E.preventDefault(),a(!0),d("");try{await p(n.email,n.password),m("/")}catch(b){switch(console.error("Login error:",b),b.code){case"auth/user-not-found":d("No account found with this email address.");break;case"auth/wrong-password":d("Incorrect password.");break;case"auth/invalid-email":d("Invalid email address.");break;case"auth/too-many-requests":d("Too many failed attempts. Please try again later.");break;default:d("Failed to sign in. Please try again.")}}finally{a(!1)}};return u.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"max-w-md w-full space-y-8",children:[u.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center",children:[u.jsx("div",{className:"flex justify-center mb-6",children:u.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center glyph-animation",children:u.jsx(Er,{className:"h-8 w-8 text-nothing-white"})})}),u.jsx("h2",{className:"text-3xl font-bold text-nothing-white font-nothing",children:"Welcome back"}),u.jsx("p",{className:"mt-2 text-nothing-gray-400",children:"Sign in to your GlyphMart account"})]}),u.jsxs(je.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"mt-8 space-y-6",onSubmit:w,children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(og,{className:"h-5 w-5 text-nothing-gray-400"})}),u.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n.email,onChange:v,className:"appearance-none relative block w-full px-10 py-3 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Email address"})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(Gs,{className:"h-5 w-5 text-nothing-gray-400"})}),u.jsx("input",{id:"password",name:"password",type:t?"text":"password",autoComplete:"current-password",required:!0,value:n.password,onChange:v,className:"appearance-none relative block w-full px-10 py-3 pr-10 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Password"}),u.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>r(!t),children:t?u.jsx(pa,{className:"h-5 w-5 text-nothing-gray-400 hover:text-nothing-gray-300"}):u.jsx(bn,{className:"h-5 w-5 text-nothing-gray-400 hover:text-nothing-gray-300"})})]})]})]}),c&&u.jsx(je.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-900/20 border border-red-700 text-red-400 px-4 py-3 rounded-lg text-sm",children:c}),u.jsx("div",{className:"flex items-center justify-between",children:u.jsx("div",{className:"text-sm",children:u.jsx(He,{to:"/forgot-password",className:"text-nothing-red hover:text-red-400 transition-colors duration-200",children:"Forgot your password?"})})}),u.jsx("div",{children:u.jsx("button",{type:"submit",disabled:o,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-nothing-white bg-nothing-red hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nothing-red disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:o?u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-nothing-white mr-2"}),"Signing in..."]}):"Sign in"})}),u.jsx("div",{className:"text-center",children:u.jsxs("p",{className:"text-nothing-gray-400",children:["Don't have an account?"," ",u.jsx(He,{to:"/signup",className:"text-nothing-red hover:text-red-400 font-medium transition-colors duration-200",children:"Sign up"})]})})]})]})})},DO=()=>{const[n,e]=k.useState({email:"",username:"",displayName:"",password:"",confirmPassword:""}),[t,r]=k.useState(!1),[o,a]=k.useState(!1),[c,d]=k.useState(!1),[p,m]=k.useState(""),{signup:v}=Bn(),w=cr(),E=V=>{e({...n,[V.target.name]:V.target.value}),m("")},b=()=>n.password!==n.confirmPassword?(m("Passwords do not match"),!1):n.password.length<6?(m("Password must be at least 6 characters long"),!1):n.username.length<3?(m("Username must be at least 3 characters long"),!1):/^[a-zA-Z0-9_]+$/.test(n.username)?!0:(m("Username can only contain letters, numbers, and underscores"),!1),L=async V=>{if(V.preventDefault(),d(!0),m(""),!b()){d(!1);return}try{await v(n.email,n.password,n.username,n.displayName),w("/")}catch(P){switch(console.error("Signup error:",P),P.code){case"auth/email-already-in-use":m("An account with this email already exists.");break;case"auth/invalid-email":m("Invalid email address.");break;case"auth/weak-password":m("Password is too weak.");break;default:m("Failed to create account. Please try again.")}}finally{d(!1)}};return u.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center px-4 sm:px-6 lg:px-8 py-12",children:u.jsxs("div",{className:"max-w-md w-full space-y-8",children:[u.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center",children:[u.jsx("div",{className:"flex justify-center mb-6",children:u.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center glyph-animation",children:u.jsx(Er,{className:"h-8 w-8 text-nothing-white"})})}),u.jsx("h2",{className:"text-3xl font-bold text-nothing-white font-nothing",children:"Join GlyphMart"}),u.jsx("p",{className:"mt-2 text-nothing-gray-400",children:"Create your account and start sharing glyphs"})]}),u.jsxs(je.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"mt-8 space-y-6",onSubmit:L,children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(og,{className:"h-5 w-5 text-nothing-gray-400"})}),u.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n.email,onChange:E,className:"appearance-none relative block w-full px-10 py-3 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Email address"})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"username",className:"sr-only",children:"Username"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(Jj,{className:"h-5 w-5 text-nothing-gray-400"})}),u.jsx("input",{id:"username",name:"username",type:"text",autoComplete:"username",required:!0,value:n.username,onChange:E,className:"appearance-none relative block w-full px-10 py-3 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Username"})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"displayName",className:"sr-only",children:"Display Name"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(ss,{className:"h-5 w-5 text-nothing-gray-400"})}),u.jsx("input",{id:"displayName",name:"displayName",type:"text",autoComplete:"name",required:!0,value:n.displayName,onChange:E,className:"appearance-none relative block w-full px-10 py-3 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Display Name"})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(Gs,{className:"h-5 w-5 text-nothing-gray-400"})}),u.jsx("input",{id:"password",name:"password",type:t?"text":"password",autoComplete:"new-password",required:!0,value:n.password,onChange:E,className:"appearance-none relative block w-full px-10 py-3 pr-10 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Password"}),u.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>r(!t),children:t?u.jsx(pa,{className:"h-5 w-5 text-nothing-gray-400 hover:text-nothing-gray-300"}):u.jsx(bn,{className:"h-5 w-5 text-nothing-gray-400 hover:text-nothing-gray-300"})})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"confirmPassword",className:"sr-only",children:"Confirm Password"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(Gs,{className:"h-5 w-5 text-nothing-gray-400"})}),u.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:o?"text":"password",autoComplete:"new-password",required:!0,value:n.confirmPassword,onChange:E,className:"appearance-none relative block w-full px-10 py-3 pr-10 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Confirm Password"}),u.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>a(!o),children:o?u.jsx(pa,{className:"h-5 w-5 text-nothing-gray-400 hover:text-nothing-gray-300"}):u.jsx(bn,{className:"h-5 w-5 text-nothing-gray-400 hover:text-nothing-gray-300"})})]})]})]}),p&&u.jsx(je.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-900/20 border border-red-700 text-red-400 px-4 py-3 rounded-lg text-sm",children:p}),u.jsx("div",{children:u.jsx("button",{type:"submit",disabled:c,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-nothing-white bg-nothing-red hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nothing-red disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:c?u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-nothing-white mr-2"}),"Creating account..."]}):"Create Account"})}),u.jsx("div",{className:"text-center",children:u.jsxs("p",{className:"text-nothing-gray-400",children:["Already have an account?"," ",u.jsx(He,{to:"/login",className:"text-nothing-red hover:text-red-400 font-medium transition-colors duration-200",children:"Sign in"})]})})]})]})})},lc=({onFileUpload:n,acceptedTypes:e="images",multiple:t=!1,maxFiles:r=5})=>{const[o,a]=k.useState(!1),[c,d]=k.useState([]),[p,m]=k.useState(!1),v=k.useRef(null),w=()=>{switch(e){case"images":return"image/png,image/jpeg,image/jpg,image/gif,image/webp";case"apks":return".apk";case"profile":return"image/png,image/jpeg,image/jpg,image/gif,image/webp";default:return""}},E=j=>j.type?.startsWith("image/")?u.jsx(Gp,{className:"w-8 h-8 text-blue-500"}):u.jsx(PT,{className:"w-8 h-8 text-gray-500"}),b=j=>{const W=Array.from(j);if(!t&&W.length>1){alert("Only one file is allowed");return}if(t&&c.length+W.length>r){alert(`Maximum ${r} files allowed`);return}W.forEach(L)},L=async j=>{if(j){a(!0);try{const W=await Me.uploadFile(j,e),Z={id:Date.now()+Math.random(),name:j.name,url:W.url,thumbnail:W.thumbnail,filename:W.filename,type:W.type,file:j};d(ae=>[...ae,Z]),n(Z)}catch(W){console.error("Upload failed:",W),alert("Upload failed: "+W.message)}finally{a(!1)}}},V=async j=>{try{j.filename&&await Me.deleteFile(j.filename,j.type),d(W=>W.filter(Z=>Z.id!==j.id)),n(null,j)}catch(W){console.error("Failed to delete file:",W),alert("Failed to delete file: "+W.message)}},P=j=>{j.preventDefault(),j.stopPropagation(),j.type==="dragenter"||j.type==="dragover"?m(!0):j.type==="dragleave"&&m(!1)},D=j=>{j.preventDefault(),j.stopPropagation(),m(!1),j.dataTransfer.files&&j.dataTransfer.files[0]&&b(j.dataTransfer.files)},O=()=>{v.current?.click()};return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:`border-2 border-dashed rounded-lg p-6 text-center transition-colors cursor-pointer
          ${p?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}
          ${o?"opacity-50 pointer-events-none":""}`,onDragEnter:P,onDragLeave:P,onDragOver:P,onDrop:D,onClick:O,children:[u.jsx("input",{ref:v,type:"file",multiple:t,accept:w(),onChange:j=>b(j.target.files),className:"hidden"}),u.jsx(Ih,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),u.jsx("p",{className:"text-lg font-medium text-gray-700 mb-2",children:o?"Uploading...":`Upload ${e==="apks"?"APK file":"images"}`}),u.jsx("p",{className:"text-sm text-gray-500",children:"Drag and drop files here, or click to select files"}),e==="images"&&u.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Supported: PNG, JPG, JPEG, GIF, WebP (max 50MB each)"}),e==="apks"&&u.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Supported: APK files (max 50MB)"})]}),c.length>0&&u.jsxs("div",{className:"space-y-2",children:[u.jsx("h4",{className:"font-medium text-gray-700",children:"Uploaded Files:"}),u.jsx("div",{className:"grid gap-2",children:c.map(j=>u.jsxs(je.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[j.thumbnail?u.jsx("img",{src:fn(j.thumbnail),alt:"Preview",className:"w-10 h-10 object-cover rounded"}):E(j.file),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-700 truncate max-w-48",children:j.name}),u.jsxs("p",{className:"text-xs text-gray-500",children:[e==="images"?"Image":"APK","  Uploaded"]})]})]}),u.jsx("button",{onClick:()=>V(j),className:"p-1 text-red-500 hover:text-red-700 transition-colors",title:"Remove file",children:u.jsx(jT,{className:"w-4 h-4"})})]},j.id))})]})]})},VO=()=>{const{id:n}=Mw(),[e,t]=k.useState(null),[r,o]=k.useState(!0),[a,c]=k.useState(!1),[d,p]=k.useState(!1),[m,v]=k.useState(!1),[w,E]=k.useState(!1),{currentUser:b,userProfile:L}=Bn(),[V,P]=k.useState(!1),[D,O]=k.useState(null),[j,W]=k.useState(!1),[Z,ae]=k.useState(""),[R,I]=k.useState(!1),[N,M]=k.useState(!1),[B,$]=k.useState(!1),[A,_e]=k.useState([]),Ue=cr();k.useEffect(()=>{n&&(async()=>{try{const he=await Me.getGlyph(n);if(he.createdAt&&(he.createdAt=new Date(he.createdAt)),t(he),await Me.recordView(n),b){const ve=await Me.checkLikeStatus(n);p(ve)}else p(!1)}catch(he){console.error("Error fetching glyph:",he),he.message.includes("not found")&&Ue("/404")}finally{o(!1)}})()},[n,Ue,b]);const Oe=async()=>{if(!(!e.apkUrl&&!e.githubUrl)){if(e.apkUrl)E(!0);else if(e.githubUrl){window.open(e.githubUrl,"_blank");try{await Me.recordDownload(n)&&t(he=>({...he,downloads:(he.downloads||0)+1}))}catch(ce){console.error("Error updating download count:",ce)}}}},Ae=async()=>{c(!0);try{const ce=await Me.recordDownload(n),he=document.createElement("a");he.href=e.apkUrl,he.download=`${e.title.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.apk`,document.body.appendChild(he),he.click(),document.body.removeChild(he),ce&&t(ve=>({...ve,downloads:(ve.downloads||0)+1}))}catch(ce){console.error("Error downloading glyph:",ce)}finally{c(!1),E(!1)}},oe=async()=>{if(!b||m){b||Ue("/login");return}v(!0);try{const ce=await Me.toggleLike(n);p(ce.liked),t(he=>({...he,likes:ce.totalLikes}))}catch(ce){console.error("Error liking glyph:",ce)}finally{v(!1)}},ee=async()=>{const ce=window.location.href;if(navigator.share)try{await navigator.share({title:e.title,text:e.description,url:ce})}catch(he){console.error("Error sharing:",he),J(ce)}else J(ce)},J=async ce=>{try{await navigator.clipboard.writeText(ce),alert("Link copied to clipboard!")}catch(he){console.error("Error copying to clipboard:",he)}};k.useEffect(()=>{V&&e&&O({title:e.title,description:e.description,apkUrl:e.apkUrl||"",githubUrl:e.githubUrl||"",instructions:e.instructions||"",images:e.images||[]})},[V,e]);const U=ce=>{const{name:he,value:ve}=ce.target;O(Le=>({...Le,[he]:ve})),ae("")},X=(ce,he)=>{ce?(_e(ve=>[...ve,ce]),O(ve=>({...ve,images:[...ve.images,ce.url]}))):he&&(_e(ve=>ve.filter(Le=>Le.id!==he.id)),O(ve=>({...ve,images:ve.images.filter(Le=>Le!==he.url)})))},me=async ce=>{ce.preventDefault(),W(!0),ae("");try{await Me.updateGlyph(e.id,{title:D.title,description:D.description,apkUrl:D.apkUrl,githubUrl:D.githubUrl,instructions:D.instructions,images:D.images}),P(!1),t(he=>({...he,...D}))}catch(he){ae("Failed to update glyph: "+he.message)}finally{W(!1)}};return r?u.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-4 glyph-animation",children:u.jsx("div",{className:"w-8 h-8 bg-nothing-white rounded-full"})}),u.jsx("p",{className:"text-nothing-gray-400",children:"Loading glyph..."})]})}):e?e.deleted?u.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-2xl font-bold text-red-500 mb-4",children:"Glyph Deleted"}),u.jsx("p",{className:"text-nothing-gray-400 mb-6",children:"This glyph has been deleted by its creator and is no longer available."}),u.jsx(He,{to:"/",className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-6 py-3 rounded-lg font-medium transition-colors duration-200",children:"Return to home"})]})}):u.jsxs("div",{className:"min-h-screen bg-nothing-black",children:[u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsx(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"aspect-square bg-nothing-gray-900 rounded-lg overflow-hidden",children:e.images&&e.images.length>0?u.jsx("img",{src:fn(e.images[0]),alt:e.title,loading:"lazy",className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full flex items-center justify-center",children:u.jsx("div",{className:"w-24 h-24 bg-nothing-red rounded-full flex items-center justify-center glyph-animation",children:u.jsx("div",{className:"w-12 h-12 bg-nothing-white rounded-full"})})})}),L&&e.creatorUsername===L.username&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex space-x-3 mt-6",children:[u.jsx("button",{type:"button",onClick:()=>P(!0),className:"px-6 py-3 bg-nothing-gray-700 hover:bg-nothing-gray-800 text-nothing-white rounded-lg font-medium transition-colors duration-200",children:"Edit Glyph"}),u.jsx("button",{type:"button",onClick:()=>I(!0),className:"px-6 py-3 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200",children:"Delete Glyph"})]}),R&&u.jsx("div",{className:"fixed inset-0 bg-nothing-black/80 flex items-center justify-center z-50 p-4",children:u.jsxs(je.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6 max-w-md w-full",children:[u.jsxs("div",{className:"text-center mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-nothing-white mb-4",children:"Delete Glyph?"}),u.jsx("p",{className:"text-nothing-gray-300 mb-4",children:"Are you sure you want to permanently delete this glyph and all its related data? This action cannot be undone."})]}),u.jsxs("div",{className:"flex space-x-3",children:[u.jsx("button",{onClick:async()=>{if(!N){M(!0);try{await Me.deleteGlyph(e.id)}catch(ce){console.error("Error deleting glyph:",ce)}finally{M(!1),I(!1),Ue("/")}}},disabled:N,className:"flex-1 bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50",children:N?"Deleting...":"Yes, Delete"}),u.jsx("button",{onClick:()=>I(!1),disabled:N,className:"px-4 py-2 border border-nothing-gray-700 text-nothing-white hover:border-nothing-gray-600 rounded-lg font-medium transition-colors duration-200",children:"Cancel"})]})]})})]})]}),u.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-nothing-white mb-4 font-nothing",children:e.title}),u.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[u.jsxs(He,{to:`/storefront/${e.creatorUsername||e.creatorId}`,className:"flex items-center space-x-2 text-nothing-red hover:text-red-400 transition-colors duration-200",children:[u.jsx(ss,{className:"h-4 w-4"}),u.jsxs("span",{className:"font-medium",children:["@",e.creatorUsername||e.creatorId]})]}),u.jsxs("div",{className:"flex items-center space-x-1 text-nothing-gray-400",children:[u.jsx(ig,{className:"h-4 w-4"}),u.jsx("span",{className:"text-sm",children:e.createdAt?.toDate?.()?.toLocaleDateString()||"Unknown date"})]})]}),u.jsx("div",{className:"text-nothing-gray-300 text-lg leading-relaxed mb-6",style:{position:"relative"},children:e.description?u.jsxs("div",{style:{position:"relative"},children:[u.jsx("span",{className:B?"":"glyph-fade-text glyph-line-clamp",style:B?{display:"block",maxHeight:"none",overflow:"visible"}:void 0,children:e.description}),u.jsx("button",{type:"button",onClick:()=>$(ce=>!ce),className:"ml-2 text-nothing-red hover:underline focus:outline-none relative z-10",style:{marginTop:"0.5em"},children:B?"Show Less":"Show More"})]}):null})]}),u.jsxs("div",{className:"flex items-center space-x-6 py-4 border-y border-nothing-gray-800",children:[u.jsxs("div",{className:"flex items-center space-x-2 text-nothing-gray-400",children:[u.jsx(hs,{className:"h-5 w-5"}),u.jsx("span",{children:(()=>{const ce=e.downloads||0;return`${ce} ${ce===1?"download":"downloads"}`})()})]}),u.jsxs("div",{className:"flex items-center space-x-2 text-nothing-gray-400",children:[u.jsx(bn,{className:"h-5 w-5"}),u.jsx("span",{children:(()=>{const ce=e.views||0;return`${ce} ${ce===1?"view":"views"}`})()})]}),u.jsxs("div",{className:"flex items-center space-x-2 text-nothing-gray-400",children:[u.jsx(or,{className:"h-5 w-5"}),u.jsx("span",{children:(()=>{const ce=e.likes||0;return`${ce} ${ce===1?"like":"likes"}`})()})]})]}),u.jsxs("div",{className:"flex space-x-4",children:[(e.apkUrl||e.githubUrl)&&u.jsxs("button",{onClick:Oe,className:"flex-1 bg-nothing-red hover:bg-red-700 text-nothing-white px-6 py-3 rounded-lg font-semibold flex items-center justify-center space-x-2 transition-colors duration-200",children:[u.jsx(hs,{className:"h-5 w-5"}),u.jsx("span",{children:e.apkUrl?"Download APK":"View on GitHub"})]}),u.jsxs("button",{onClick:oe,disabled:m,className:`px-6 py-3 rounded-lg font-semibold flex items-center justify-center space-x-2 transition-colors duration-200 min-w-[120px] ${d?"bg-nothing-red text-nothing-white":"border border-nothing-gray-700 text-nothing-white hover:border-nothing-gray-600"} ${m?"opacity-50 cursor-not-allowed":""}`,children:[u.jsx(or,{className:`h-5 w-5 ${d?"fill-current":""}`}),u.jsx("span",{children:m?"...":d?"Liked":"Like"})]}),u.jsx("button",{onClick:ee,className:"px-6 py-3 border border-nothing-gray-700 text-nothing-white hover:border-nothing-gray-600 rounded-lg font-semibold flex items-center justify-center space-x-2 transition-colors duration-200",children:u.jsx(l4,{className:"h-5 w-5"})})]}),(e.githubUrl||e.instructions)&&u.jsxs("div",{className:"space-y-3",children:[u.jsx("h3",{className:"text-lg font-semibold text-nothing-white",children:e.githubUrl&&e.instructions?"Links & Instructions":e.githubUrl?"Repository":"Instructions"}),e.githubUrl&&u.jsxs("a",{href:e.githubUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 text-nothing-gray-300 hover:text-nothing-white transition-colors duration-200",children:[u.jsx(kT,{className:"h-5 w-5"}),u.jsx("span",{children:"View on GitHub"}),u.jsx(e4,{className:"h-4 w-4"})]}),e.instructions&&u.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-4",children:[u.jsx("h4",{className:"text-nothing-white font-medium mb-2",children:"Installation Instructions"}),u.jsx("p",{className:"text-nothing-gray-300 text-sm whitespace-pre-wrap",children:e.instructions})]})]})]})]})}),w&&u.jsx("div",{className:"fixed inset-0 bg-nothing-black/80 flex items-center justify-center z-50 p-4",children:u.jsxs(je.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6 max-w-md w-full",children:[u.jsxs("div",{className:"flex items-start space-x-3 mb-4",children:[u.jsx(Yj,{className:"h-6 w-6 text-yellow-500 flex-shrink-0 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-nothing-white mb-2",children:"Download Disclaimer"}),u.jsx("p",{className:"text-nothing-gray-300 text-sm",children:"This APK is shared by the community. GlyphMart does not guarantee the safety or functionality of third-party files. Download and install at your own risk."})]})]}),u.jsxs("div",{className:"flex space-x-3",children:[u.jsx("button",{onClick:Ae,disabled:a,className:"flex-1 bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50",children:a?"Downloading...":"I Understand, Download"}),u.jsx("button",{onClick:()=>E(!1),className:"px-4 py-2 border border-nothing-gray-700 text-nothing-white hover:border-nothing-gray-600 rounded-lg font-medium transition-colors duration-200",children:"Cancel"})]})]})}),V&&D?u.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-8 max-w-lg w-full",children:[u.jsx("h2",{className:"text-2xl font-bold text-nothing-white mb-6",children:"Edit Glyph"}),u.jsxs("form",{onSubmit:me,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Title"}),u.jsx("input",{type:"text",name:"title",value:D.title,onChange:U,className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Description"}),u.jsx("textarea",{name:"description",value:D.description,onChange:U,rows:4,className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"APK URL"}),u.jsx("input",{type:"url",name:"apkUrl",value:D.apkUrl,onChange:U,className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"GitHub URL"}),u.jsx("input",{type:"url",name:"githubUrl",value:D.githubUrl,onChange:U,className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Instructions"}),u.jsx("textarea",{name:"instructions",value:D.instructions,onChange:U,rows:2,className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Images"}),u.jsxs("div",{className:"space-y-4",children:[D.images&&D.images.length>0&&u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:D.images.map((ce,he)=>u.jsx("div",{className:"relative",children:u.jsx("img",{src:fn(ce),alt:`Preview ${he+1}`,className:"w-full h-24 object-cover rounded-lg"})},he))}),u.jsx("div",{className:"bg-nothing-gray-800 rounded-lg p-4",children:u.jsx(lc,{onFileUpload:X,acceptedTypes:"images",multiple:!0,maxFiles:5})}),u.jsx("div",{className:"text-center text-nothing-gray-400",children:u.jsx("span",{className:"px-3 py-1 bg-nothing-gray-800 rounded",children:"OR"})}),u.jsx("input",{type:"text",name:"images",value:D.images.join(", "),onChange:ce=>O(he=>({...he,images:ce.target.value.split(",").map(ve=>ve.trim())})),className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white",placeholder:"Or enter image URLs separated by commas"})]})]}),Z&&u.jsx("div",{className:"bg-red-900/20 border border-red-700 text-red-400 px-4 py-2 rounded-lg mb-4",children:Z}),u.jsxs("div",{className:"flex space-x-3 mt-6",children:[u.jsx("button",{type:"submit",disabled:j,className:"px-6 py-3 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50",children:j?"Saving...":"Save Changes"}),u.jsx("button",{type:"button",onClick:()=>P(!1),className:"px-6 py-3 bg-nothing-gray-700 hover:bg-nothing-gray-800 text-nothing-white rounded-lg font-medium transition-colors duration-200",children:"Cancel"})]})]})]})}):u.jsx(u.Fragment,{})]}):u.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-2xl font-bold text-nothing-white mb-4",children:"Glyph not found"}),u.jsx(He,{to:"/",className:"text-nothing-red hover:text-red-400",children:"Return to home"})]})})},LO=()=>{const{username:n}=Mw(),[e,t]=k.useState(null),[r,o]=k.useState([]),[a,c]=k.useState(!0),[d,p]=k.useState("latest"),[m,v]=k.useState(""),w=P=>{console.log(P),v(D=>D+`
`+P)};k.useEffect(()=>{n&&(async()=>{try{w("Fetching storefront for username: "+n);const D=await Me.getUserByUsername(n);w("Found user data: "+JSON.stringify({uid:D.uid,username:D.username,displayName:D.displayName})),t(D),w("Fetching glyphs for creatorId: "+D.uid);const O=await Me.getGlyphs({creator_id:D.uid,sort:"latest",limit:100});w("Found glyphs: "+O.length),O.length>0?w("First glyph: "+JSON.stringify({id:O[0].id,title:O[0].title,creatorId:O[0].creatorId})):w("No glyphs found for this user. Check if glyphs were created with the correct creatorId."),O.forEach(j=>{j.createdAt&&(j.createdAt=new Date(j.createdAt))}),o(O)}catch(D){w("Error fetching user data: "+D.message),console.error("Error fetching user data:",D)}finally{c(!1)}})()},[n]);const E=()=>{switch(d){case"popular":return[...r].sort((P,D)=>(D.downloads||0)-(P.downloads||0));case"liked":return[...r].sort((P,D)=>(D.likes||0)-(P.likes||0));default:return r}},b=({glyph:P})=>u.jsx(je.div,{whileHover:{y:-5},className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg overflow-hidden hover:border-nothing-gray-700 transition-all duration-300",children:u.jsxs(He,{to:`/glyph/${P.id}`,children:[u.jsxs("div",{className:"aspect-square bg-nothing-gray-800 relative overflow-hidden",children:[P.images&&P.images.length>0?u.jsx("img",{src:fn(P.images[0]),alt:P.title,loading:"lazy",className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"}):u.jsx("div",{className:"w-full h-full flex items-center justify-center",children:u.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center glyph-animation",children:u.jsx(Er,{className:"h-8 w-8 text-nothing-white"})})}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-nothing-black/80 via-transparent to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300",children:u.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:u.jsxs("div",{className:"flex items-center justify-between text-nothing-white text-sm",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(hs,{className:"h-4 w-4"}),u.jsx("span",{children:P.downloads||0})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(or,{className:"h-4 w-4"}),u.jsx("span",{children:P.likes||0})]})]})})})]}),u.jsxs("div",{className:"p-4",children:[u.jsx("h3",{className:"text-nothing-white font-semibold text-lg mb-2 truncate",children:P.title}),u.jsx("p",{className:"text-nothing-gray-400 text-sm mb-3 line-clamp-2",children:P.description}),u.jsxs("div",{className:"flex items-center justify-between text-nothing-gray-500 text-sm",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(hs,{className:"h-3 w-3"}),u.jsx("span",{children:P.downloads||0})]}),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(bn,{className:"h-3 w-3"}),u.jsx("span",{children:P.views||0})]}),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(or,{className:"h-3 w-3"}),u.jsx("span",{children:P.likes||0})]})]}),u.jsx("span",{className:"text-xs",children:P.createdAt?new Date(P.createdAt).toLocaleDateString():"Unknown"})]})]})]})});if(a)return u.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-4 glyph-animation",children:u.jsx(Er,{className:"h-8 w-8 text-nothing-white"})}),u.jsx("p",{className:"text-nothing-gray-400",children:"Loading storefront..."})]})});if(!e)return u.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-2xl font-bold text-nothing-white mb-4",children:"User not found"}),u.jsxs("p",{className:"text-nothing-gray-400 mb-6",children:["The user @",n," does not exist."]}),u.jsx(He,{to:"/",className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-6 py-3 rounded-lg font-medium transition-colors duration-200",children:"Return to home"})]})});const L=r.reduce((P,D)=>P+(D.downloads||0),0),V=r.reduce((P,D)=>P+(D.likes||0),0);return u.jsxs("div",{className:"min-h-screen bg-nothing-black",children:[u.jsxs("div",{className:"bg-nothing-gray-900 border-b border-nothing-gray-800 relative overflow-hidden",children:[e.bannerImage&&u.jsxs("div",{className:"absolute inset-0 w-full h-full",children:[u.jsx("img",{src:fn(e.bannerImage),alt:"Profile banner",className:"w-full h-full object-cover opacity-30"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-nothing-gray-900 via-nothing-gray-900/80 to-nothing-gray-900/40"})]}),u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 relative z-10",children:u.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center",children:[u.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden mx-auto mb-6 border-4 border-nothing-white shadow-lg",children:e.profilePicture?u.jsx("img",{src:fn(e.profilePicture),alt:e.displayName||e.username,loading:"lazy",className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full bg-nothing-red flex items-center justify-center",children:u.jsx("span",{className:"text-2xl font-bold text-nothing-white",children:e.displayName?.charAt(0).toUpperCase()||e.username?.charAt(0).toUpperCase()})})}),u.jsx("h1",{className:"text-3xl font-bold text-nothing-white mb-2 font-nothing",children:e.username}),u.jsxs("p",{className:"text-nothing-red text-lg mb-4",children:["@",e.username]}),e.bio&&u.jsx("p",{className:"text-nothing-gray-300 max-w-2xl mx-auto mb-6",children:e.bio}),u.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4 text-nothing-gray-400 text-sm mb-6",children:[e.location&&u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(s4,{className:"h-4 w-4"}),u.jsx("span",{children:e.location})]}),e.website&&u.jsxs("a",{href:e.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 hover:text-nothing-white transition-colors duration-200",children:[u.jsx(n4,{className:"h-4 w-4"}),u.jsx("span",{children:"Website"})]}),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(ig,{className:"h-4 w-4"}),u.jsxs("span",{children:["Joined ",e.createdAt?new Date(e.createdAt).toLocaleDateString():"Unknown"]})]})]}),u.jsxs("div",{className:"flex items-center justify-center space-x-8",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-nothing-white",children:r.length}),u.jsx("div",{className:"text-nothing-gray-400 text-sm",children:"Glyphs"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-nothing-white",children:L}),u.jsx("div",{className:"text-nothing-gray-400 text-sm",children:"Downloads"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-nothing-white",children:V}),u.jsx("div",{className:"text-nothing-gray-400 text-sm",children:"Likes"})]})]})]})})]}),u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[u.jsxs("div",{className:"flex space-x-4 border-b border-nothing-gray-800 mb-8",children:[u.jsx("button",{onClick:()=>p("latest"),className:`px-4 py-3 font-medium border-b-2 transition-colors duration-200 ${d==="latest"?"border-nothing-red text-nothing-red":"border-transparent text-nothing-gray-400 hover:text-nothing-white"}`,children:"Latest"}),u.jsx("button",{onClick:()=>p("popular"),className:`px-4 py-3 font-medium border-b-2 transition-colors duration-200 ${d==="popular"?"border-nothing-red text-nothing-red":"border-transparent text-nothing-gray-400 hover:text-nothing-white"}`,children:"Most Downloaded"}),u.jsx("button",{onClick:()=>p("liked"),className:`px-4 py-3 font-medium border-b-2 transition-colors duration-200 ${d==="liked"?"border-nothing-red text-nothing-red":"border-transparent text-nothing-gray-400 hover:text-nothing-white"}`,children:"Most Liked"})]}),r.length>0?u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:E().map((P,D)=>u.jsx(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:D*.1},children:u.jsx(b,{glyph:P})},P.id))}):u.jsxs("div",{className:"text-center py-12",children:[u.jsx("div",{className:"w-16 h-16 bg-nothing-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(Er,{className:"h-8 w-8 text-nothing-gray-600"})}),u.jsx("h3",{className:"text-nothing-white text-lg font-medium mb-2",children:"No glyphs yet"}),u.jsxs("p",{className:"text-nothing-gray-400",children:[e.username," hasn't shared any glyphs yet."]})]})]}),m&&u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:u.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg p-4",children:[u.jsx("h3",{className:"text-nothing-white font-bold mb-2",children:"Debug Info:"}),u.jsx("pre",{className:"text-nothing-gray-300 text-xs whitespace-pre-wrap overflow-auto",children:m})]})})]})},OO=()=>{const[n,e]=k.useState({title:"",description:"",images:[],apkUrl:"",githubUrl:"",instructions:""}),[t,r]=k.useState([]),[o,a]=k.useState(null),[c,d]=k.useState(!1),[p,m]=k.useState(""),[v,w]=k.useState(""),{currentUser:E,userProfile:b}=Bn(),L=cr(),V=async()=>{try{const Z=await Me.getGlyphs(),ae=Z.filter(I=>I.creatorId===E.uid),R=`Total glyphs in database: ${Z.length}
My glyphs: ${ae.length}
My UID: ${E.uid}
My username: ${b?.username}
My displayName: ${E.displayName}

My glyphs:
`+ae.map(I=>`- ${I.title} (ID: ${I.id})`).join(`
`);w(R),console.log("Debug info:",R)}catch(Z){console.error("Error checking glyphs:",Z),w("Error checking glyphs: "+Z.message)}};if(!E)return L("/login"),null;const P=Z=>{const{name:ae,value:R}=Z.target;e(I=>({...I,[ae]:R})),m("")},D=(Z,ae)=>{Z?(r(R=>[...R,Z]),e(R=>({...R,images:[...R.images,Z.url]}))):ae&&(r(R=>R.filter(I=>I.id!==ae.id)),e(R=>({...R,images:R.images.filter(I=>I!==ae.url)})))},O=(Z,ae)=>{Z?(a(Z),e(R=>({...R,apkUrl:Z.url}))):ae&&(a(null),e(R=>({...R,apkUrl:""})))},j=()=>{if(!n.title.trim())return m("Title is required"),!1;if(!n.description.trim())return m("Description is required"),!1;if(!n.apkUrl.trim()&&!n.githubUrl.trim())return m("Either APK file or GitHub repository URL is required"),!1;const Z=/^https?:\/\/.+/;return n.githubUrl.trim()&&!Z.test(n.githubUrl)?(m("GitHub URL must be a valid HTTP/HTTPS URL"),!1):!0},W=async Z=>{if(Z.preventDefault(),d(!0),m(""),!j()){d(!1);return}try{const ae={title:n.title.trim(),description:n.description.trim(),images:n.images,apkUrl:n.apkUrl.trim()||null,githubUrl:n.githubUrl.trim()||null,instructions:n.instructions.trim()||null,creatorId:E.uid,creatorUsername:b?.username,downloads:0,views:0,likes:0,createdAt:new Date};console.log("Creating glyph with data:",ae);const R=await Me.uploadGlyph(ae);console.log("Glyph created with ID:",R.id),L(`/glyph/${R.id}`)}catch(ae){console.error("Error creating glyph:",ae),m("Failed to upload glyph. Please try again.")}finally{d(!1)}};return u.jsx("div",{className:"min-h-screen bg-nothing-black py-12",children:u.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[u.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-6 glyph-animation",children:u.jsx(Ih,{className:"h-8 w-8 text-nothing-white"})}),u.jsx("h1",{className:"text-3xl font-bold text-nothing-white font-nothing mb-4",children:"Share Your Glyph"}),u.jsx("p",{className:"text-nothing-gray-400",children:"Upload your custom Nothing Phone(3) glyph and share it with the community"})]}),u.jsx(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-8",children:u.jsxs("form",{onSubmit:W,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-nothing-white mb-2",children:"Glyph Title *"}),u.jsx("input",{type:"text",id:"title",name:"title",value:n.title,onChange:P,placeholder:"e.g., Custom Boot Animation Glyph",className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-nothing-white mb-2",children:"Description *"}),u.jsx("textarea",{id:"description",name:"description",value:n.description,onChange:P,rows:4,placeholder:"Describe your glyph, what it does, and any special features...",className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200 resize-vertical",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-nothing-white mb-2",children:"Images (Optional)"}),u.jsx("p",{className:"text-sm text-nothing-gray-400 mb-4",children:"Upload images showcasing your glyph (screenshots, demos, etc.)"}),u.jsx("div",{className:"bg-nothing-gray-800 rounded-lg p-4",children:u.jsx(lc,{onFileUpload:D,acceptedTypes:"images",multiple:!0,maxFiles:5})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-nothing-white mb-2",children:"APK File or Download URL"}),u.jsx("p",{className:"text-sm text-nothing-gray-400 mb-4",children:"Upload an APK file directly or provide a download URL"}),u.jsx("div",{className:"bg-nothing-gray-800 rounded-lg p-4 mb-4",children:u.jsx(lc,{onFileUpload:O,acceptedTypes:"apks",multiple:!1})}),u.jsx("div",{className:"text-center text-nothing-gray-400 mb-4",children:u.jsx("span",{className:"px-3 py-1 bg-nothing-gray-800 rounded",children:"OR"})}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(r4,{className:"h-5 w-5 text-nothing-gray-400"})}),u.jsx("input",{type:"url",id:"apkUrl",name:"apkUrl",value:n.apkUrl,onChange:P,placeholder:"https://github.com/username/repo/releases/download/v1.0/glyph.apk",className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200",disabled:!!o})]}),u.jsx("p",{className:"text-sm text-nothing-gray-400 mt-2",children:o?"APK file uploaded":"Direct link to your APK file (GitHub Releases, Google Drive, etc.)"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"githubUrl",className:"block text-sm font-medium text-nothing-white mb-2",children:"GitHub Repository"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(kT,{className:"h-5 w-5 text-nothing-gray-400"})}),u.jsx("input",{type:"url",id:"githubUrl",name:"githubUrl",value:n.githubUrl,onChange:P,placeholder:"https://github.com/username/repository",className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200"})]}),u.jsx("p",{className:"text-sm text-nothing-gray-400 mt-2",children:"Link to your GitHub repository with source code"})]}),u.jsx("div",{className:"bg-blue-900/20 border border-blue-700 text-blue-400 px-4 py-3 rounded-lg",children:u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx("div",{className:"flex-shrink-0 mt-0.5",children:u.jsx("div",{className:"w-4 h-4 bg-blue-400 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-blue-900 text-xs font-bold",children:"!"})})}),u.jsxs("div",{className:"text-sm",children:[u.jsx("p",{className:"font-medium mb-1",children:"Download Requirement"}),u.jsx("p",{children:"You must provide either an APK download URL or a GitHub repository link (or both). Users need a way to access your glyph."})]})]})}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"instructions",className:"block text-sm font-medium text-nothing-white mb-2",children:"Installation Instructions (Optional)"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute top-3 left-3 pointer-events-none",children:u.jsx(PT,{className:"h-5 w-5 text-nothing-gray-400"})}),u.jsx("textarea",{id:"instructions",name:"instructions",value:n.instructions,onChange:P,rows:4,placeholder:`1. Download the APK file
2. Enable installation from unknown sources
3. Install the APK
4. Open Nothing Glyph Composer...`,className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200 resize-vertical"})]})]}),p&&u.jsxs(je.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-900/20 border border-red-700 text-red-400 px-4 py-3 rounded-lg flex items-start space-x-3",children:[u.jsx(qp,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),u.jsx("span",{className:"text-sm",children:p})]}),u.jsx("div",{className:"bg-yellow-900/20 border border-yellow-700 text-yellow-400 px-4 py-3 rounded-lg",children:u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx(qp,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),u.jsxs("div",{className:"text-sm",children:[u.jsx("p",{className:"font-medium mb-1",children:"Important Disclaimer"}),u.jsx("p",{children:"By uploading your glyph, you confirm that you own the rights to share this content. GlyphMart is not responsible for the safety or functionality of user-generated content."})]})]})}),u.jsxs("div",{className:"flex justify-end space-x-4",children:[u.jsx("button",{type:"button",onClick:()=>L("/"),className:"px-6 py-3 border border-nothing-gray-700 text-nothing-white hover:border-nothing-gray-600 rounded-lg font-medium transition-colors duration-200",children:"Cancel"}),u.jsx("button",{type:"submit",disabled:c,className:"px-6 py-3 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:c?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-nothing-white"}),u.jsx("span",{children:"Uploading..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(Ih,{className:"h-4 w-4"}),u.jsx("span",{children:"Share Glyph"})]})})]})]})}),u.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-nothing-gray-900 rounded-lg p-6 border border-nothing-gray-800 mt-6",children:[u.jsx("h2",{className:"text-nothing-white text-lg font-bold mb-4",children:"Debug: Check My Glyphs"}),u.jsx("button",{type:"button",onClick:V,className:"px-4 py-2 bg-nothing-gray-800 hover:bg-nothing-gray-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 mb-4",children:"Check Database"}),v&&u.jsx("div",{className:"bg-nothing-gray-800 rounded-lg p-4",children:u.jsx("pre",{className:"text-nothing-gray-300 text-xs whitespace-pre-wrap overflow-auto",children:v})})]})]})})},MO=()=>{const[n,e]=vI(),[t,r]=k.useState(n.get("q")||""),[o,a]=k.useState([]),[c,d]=k.useState(!1),[p,m]=k.useState("latest"),[v,w]=k.useState("all"),[E,b]=k.useState(!1);k.useEffect(()=>{const D=n.get("q");D&&(r(D),b(!0),L(D))},[n]);const L=async(D,O=p,j=v)=>{if(D.trim()){b(!0),d(!0);try{const W=await Me.getGlyphs({search:D,sort:O,limit:100});a(W)}catch(W){console.error("Error searching glyphs:",W),a([])}finally{d(!1)}}},V=D=>{D.preventDefault(),t.trim()&&(e({q:t.trim()}),L(t.trim()))},P=D=>{m(D),t.trim()&&L(t.trim(),D,v)};return u.jsx("div",{className:"min-h-screen bg-nothing-black",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[u.jsx("div",{className:"text-center mb-8",children:u.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[u.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-6 glyph-animation",children:u.jsx(Xr,{className:"h-8 w-8 text-nothing-white"})}),u.jsx("h1",{className:"text-3xl font-bold text-nothing-white font-nothing mb-4",children:"Search Glyphs"}),u.jsx("p",{className:"text-nothing-gray-400 max-w-2xl mx-auto",children:"Discover custom Nothing Phone(3) glyphs created by the community"})]})}),u.jsx(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"max-w-2xl mx-auto mb-8",children:u.jsxs("form",{onSubmit:V,className:"relative",children:[u.jsx("input",{type:"text",value:t,onChange:D=>r(D.target.value),placeholder:"Search for glyphs, creators, or keywords...",className:"w-full px-6 py-4 pl-14 pr-16 bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200 text-lg"}),u.jsx(Xr,{className:"absolute left-4 top-4 h-6 w-6 text-nothing-gray-400"}),u.jsx("button",{type:"submit",className:"absolute right-2 top-2 bottom-2 px-4 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-md font-medium transition-colors duration-200",children:"Search"})]})}),(o.length>0||c)&&u.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("span",{className:"text-nothing-gray-400 text-sm",children:c?"Searching...":`${o.length} results found`}),t&&u.jsxs("span",{className:"text-nothing-white text-sm",children:['for "',u.jsx("span",{className:"text-nothing-red",children:t}),'"']})]}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(t4,{className:"h-4 w-4 text-nothing-gray-400"}),u.jsx("span",{className:"text-nothing-gray-400 text-sm",children:"Sort by:"})]}),u.jsx("div",{className:"flex space-x-2",children:[{value:"latest",label:"Latest",icon:Xj},{value:"popular",label:"Popular",icon:hs},{value:"liked",label:"Most Liked",icon:or},{value:"viewed",label:"Most Viewed",icon:bn}].map(({value:D,label:O,icon:j})=>u.jsxs("button",{onClick:()=>P(D),className:`flex items-center space-x-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors duration-200 ${p===D?"bg-nothing-red text-nothing-white":"bg-nothing-gray-800 text-nothing-gray-300 hover:bg-nothing-gray-700"}`,children:[u.jsx(j,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden sm:inline",children:O})]},D))})]})]}),c&&u.jsx("div",{className:"flex items-center justify-center py-12",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-4 glyph-animation",children:u.jsx(Xr,{className:"h-8 w-8 text-nothing-white"})}),u.jsx("p",{className:"text-nothing-gray-400",children:"Searching glyphs..."})]})}),!c&&o.length>0&&u.jsx(je.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:o.map((D,O)=>u.jsx(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:O*.1},children:u.jsx(kg,{glyph:D})},D.id))}),!c&&E&&o.length===0&&u.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-12",children:[u.jsx("div",{className:"w-16 h-16 bg-nothing-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(Xr,{className:"h-8 w-8 text-nothing-gray-600"})}),u.jsx("h3",{className:"text-nothing-white text-lg font-medium mb-2",children:"No results found"}),u.jsx("p",{className:"text-nothing-gray-400 mb-6",children:"Try searching with different keywords or browse all glyphs."}),u.jsx(He,{to:"/",className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-6 py-3 rounded-lg font-medium transition-colors duration-200",children:"Browse All Glyphs"})]}),!c&&!E&&u.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-12",children:[u.jsx("div",{className:"w-16 h-16 bg-nothing-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(Xr,{className:"h-8 w-8 text-nothing-gray-600"})}),u.jsx("h3",{className:"text-nothing-white text-lg font-medium mb-2",children:"Start searching"}),u.jsx("p",{className:"text-nothing-gray-400 mb-6",children:"Enter a search term to find glyphs, creators, or specific features."}),u.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:["boot animation","notification","charging","custom"].map(D=>u.jsx("button",{onClick:()=>{r(D),e({q:D}),L(D)},className:"px-3 py-1 bg-nothing-gray-800 hover:bg-nothing-gray-700 text-nothing-gray-300 rounded-full text-sm transition-colors duration-200",children:D},D))})]})]})})},UO=()=>{const[n,e]=k.useState([]),[t,r]=k.useState(!0),{currentUser:o}=Bn();return k.useEffect(()=>{(async()=>{if(!o){r(!1);return}try{console.log("Fetching liked glyphs for user:",o.uid);const c=await Me.getUserLikes();console.log("Retrieved liked glyphs:",c),e(c)}catch(c){console.error("Error fetching liked glyphs:",c)}finally{r(!1)}})()},[o]),o?t?u.jsx("div",{className:"min-h-screen bg-nothing-black text-nothing-white flex items-center justify-center",children:u.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-nothing-red"})}):u.jsx("div",{className:"min-h-screen bg-nothing-black text-nothing-white",children:u.jsxs("div",{className:"container mx-auto px-4 py-8",children:[u.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[u.jsxs("h1",{className:"text-4xl font-bold mb-2 flex items-center",children:[u.jsx(or,{className:"h-8 w-8 mr-3 text-nothing-red fill-current"}),"Liked Posts"]}),u.jsxs("p",{className:"text-nothing-gray-400",children:[n.length," glyph",n.length!==1?"s":""," you've liked"]})]}),n.length>0?u.jsx(je.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:n.map((a,c)=>u.jsx(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:c*.1},className:"group",children:u.jsx(He,{to:`/glyph/${a.id}`,children:u.jsxs("div",{className:"bg-nothing-gray-900 rounded-lg overflow-hidden border border-nothing-gray-800 hover:border-nothing-gray-700 transition-all duration-300 hover:scale-105",children:[u.jsxs("div",{className:"aspect-square bg-nothing-gray-800 relative overflow-hidden",children:[a.images&&a.images.length>0?u.jsx("img",{src:fn(a.images[0]),alt:a.title,loading:"lazy",className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}):u.jsx("div",{className:"w-full h-full flex items-center justify-center",children:u.jsx("div",{className:"text-nothing-gray-500 text-6xl",children:""})}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-nothing-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:u.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:u.jsxs("div",{className:"flex items-center justify-between text-nothing-white text-sm",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(hs,{className:"h-4 w-4"}),u.jsx("span",{children:a.downloads||0})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(bn,{className:"h-4 w-4"}),u.jsx("span",{children:a.views||0})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(or,{className:"h-4 w-4 fill-current text-nothing-red"}),u.jsx("span",{children:a.likes||0})]})]})})})]}),u.jsxs("div",{className:"p-4",children:[u.jsx("h3",{className:"font-semibold text-nothing-white mb-2 line-clamp-2",children:a.title}),u.jsx("p",{className:"text-nothing-gray-400 text-sm mb-3 line-clamp-2",children:a.description}),u.jsxs("div",{className:"flex items-center justify-between text-xs text-nothing-gray-500",children:[u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(ss,{className:"h-3 w-3"}),u.jsx("span",{children:a.creatorUsername})]}),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(ig,{className:"h-3 w-3"}),u.jsx("span",{children:a.createdAt?.toDate?a.createdAt.toDate().toLocaleDateString():new Date(a.createdAt).toLocaleDateString()})]})]})]})]})})},a.id))}):u.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"text-center py-16",children:[u.jsx(or,{className:"h-16 w-16 mx-auto mb-4 text-nothing-gray-600"}),u.jsx("h2",{className:"text-2xl font-bold mb-2 text-nothing-gray-400",children:"No liked posts yet"}),u.jsx("p",{className:"text-nothing-gray-500 mb-6",children:"Start exploring glyphs and like the ones you love!"}),u.jsx(He,{to:"/",className:"bg-nothing-red text-nothing-white px-6 py-3 rounded-lg font-semibold hover:bg-red-600 transition-colors duration-200",children:"Explore Glyphs"})]})]})}):u.jsx("div",{className:"min-h-screen bg-nothing-black text-nothing-white flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Please log in to view your liked posts"}),u.jsx(He,{to:"/login",className:"bg-nothing-red text-nothing-white px-6 py-3 rounded-lg font-semibold hover:bg-red-600 transition-colors duration-200",children:"Log In"})]})})},FO=()=>{const{currentUser:n,userProfile:e,logout:t}=Bn(),r=cr(),[o,a]=k.useState({displayName:"",username:"",email:"",bio:"",profilePicture:"",bannerImage:""}),[c,d]=k.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[p,m]=k.useState(!1),[v,w]=k.useState(!1),[E,b]=k.useState(!1),[L,V]=k.useState(!1),[P,D]=k.useState(""),[O,j]=k.useState(""),[W,Z]=k.useState("profile"),[ae,R]=k.useState(""),[I,N]=k.useState(!1),[M,B]=k.useState(null),[$,A]=k.useState(null);k.useEffect(()=>{n&&e&&a({displayName:n.displayName||"",username:e.username||"",email:n.email||"",bio:e.bio||"",profilePicture:e.profilePicture||n.photoURL||"",bannerImage:e.bannerImage||""})},[n,e]);const _e=async ee=>{ee.preventDefault(),V(!0),j(""),D("");try{o.displayName!==n.displayName&&await Np(n,{displayName:o.displayName}),o.profilePicture!==n.photoURL&&await Np(n,{photoURL:o.profilePicture}),o.email!==n.email&&await XP(n,o.email),await Me.updateUser({username:o.username,displayName:o.displayName,bio:o.bio,profilePicture:o.profilePicture,bannerImage:o.bannerImage,updatedAt:new Date}),D("Profile updated successfully!")}catch(J){console.error("Error updating profile:",J),J.code==="auth/requires-recent-login"?j("Please log out and log back in before updating your email."):j("Failed to update profile: "+J.message)}finally{V(!1)}},Ue=(ee,J)=>{ee?(B(ee),a(U=>({...U,profilePicture:ee.url}))):J&&(B(null),a(U=>({...U,profilePicture:""})))},Oe=(ee,J)=>{ee?(A(ee),a(U=>({...U,bannerImage:ee.url}))):J&&(A(null),a(U=>({...U,bannerImage:""})))},Ae=async ee=>{if(ee.preventDefault(),V(!0),j(""),D(""),c.newPassword!==c.confirmPassword){j("New passwords do not match"),V(!1);return}if(c.newPassword.length<6){j("Password must be at least 6 characters long"),V(!1);return}try{const J=Zs.credential(n.email,c.currentPassword);await wv(n,J),await JP(n,c.newPassword),D("Password updated successfully!"),d({currentPassword:"",newPassword:"",confirmPassword:""})}catch(J){console.error("Error updating password:",J),J.code==="auth/wrong-password"?j("Current password is incorrect"):j("Failed to update password: "+J.message)}finally{V(!1)}},oe=async()=>{j(""),D(""),N(!0);try{if(!ae){j("Please enter your current password to confirm deletion."),N(!1);return}const ee=Zs.credential(n.email,ae);await wv(n,ee),await Me.deleteUserData(),await n.delete(),D("Account and all glyphs deleted successfully."),t(),r("/")}catch(ee){j("Failed to delete account: "+(ee.message||ee.code))}finally{N(!1)}};return n?u.jsx("div",{className:"min-h-screen bg-nothing-black text-nothing-white",children:u.jsxs("div",{className:"container mx-auto px-4 py-8",children:[u.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[u.jsxs("h1",{className:"text-4xl font-bold mb-2 flex items-center",children:[u.jsx(Hp,{className:"h-8 w-8 mr-3 text-nothing-red"}),"Settings"]}),u.jsx("p",{className:"text-nothing-gray-400",children:"Manage your account and preferences"})]}),P&&u.jsxs(je.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-green-900/20 border border-green-700 text-green-400 px-4 py-3 rounded-lg mb-6 flex items-center",children:[u.jsx(NT,{className:"h-5 w-5 mr-2"}),P]}),O&&u.jsxs(je.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-900/20 border border-red-700 text-red-400 px-4 py-3 rounded-lg mb-6 flex items-center",children:[u.jsx(qp,{className:"h-5 w-5 mr-2"}),O]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[u.jsx(je.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},className:"lg:col-span-1",children:u.jsx("div",{className:"bg-nothing-gray-900 rounded-lg p-6 border border-nothing-gray-800",children:u.jsxs("nav",{className:"space-y-2",children:[u.jsxs("button",{onClick:()=>Z("profile"),className:`w-full text-left px-4 py-3 rounded-lg font-medium transition-colors duration-200 flex items-center space-x-3 ${W==="profile"?"bg-nothing-red text-nothing-white":"text-nothing-gray-400 hover:text-nothing-white hover:bg-nothing-gray-800"}`,children:[u.jsx(ss,{className:"h-5 w-5"}),u.jsx("span",{children:"Profile"})]}),u.jsxs("button",{onClick:()=>Z("security"),className:`w-full text-left px-4 py-3 rounded-lg font-medium transition-colors duration-200 flex items-center space-x-3 ${W==="security"?"bg-nothing-red text-nothing-white":"text-nothing-gray-400 hover:text-nothing-white hover:bg-nothing-gray-800"}`,children:[u.jsx(Gs,{className:"h-5 w-5"}),u.jsx("span",{children:"Security"})]})]})})}),u.jsxs(je.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5},className:"lg:col-span-3",children:[W==="profile"&&u.jsxs("div",{className:"bg-nothing-gray-900 rounded-lg p-6 border border-nothing-gray-800",children:[u.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Profile Information"}),u.jsxs("form",{onSubmit:_e,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Banner Image"}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"w-full h-32 bg-nothing-gray-800 rounded-lg border border-nothing-gray-700 overflow-hidden",children:o.bannerImage?u.jsx("img",{src:fn(o.bannerImage),alt:"Banner preview",className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full flex items-center justify-center",children:u.jsx(Gp,{className:"h-8 w-8 text-nothing-gray-600"})})}),u.jsx("div",{className:"bg-nothing-gray-800 rounded-lg p-4",children:u.jsx(lc,{onFileUpload:Oe,acceptedTypes:"profile",multiple:!1})}),u.jsx("div",{className:"text-center text-nothing-gray-400",children:u.jsx("span",{className:"px-3 py-1 bg-nothing-gray-800 rounded",children:"OR"})}),u.jsxs("div",{className:"relative",children:[u.jsx(Gp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),u.jsx("input",{type:"url",value:o.bannerImage,onChange:ee=>a(J=>({...J,bannerImage:ee.target.value})),className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"https://example.com/banner-image.jpg",disabled:!!$}),$&&u.jsx("p",{className:"text-sm text-nothing-gray-400 mt-2",children:"Banner image uploaded"})]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Profile Picture"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("div",{className:"w-20 h-20 bg-nothing-gray-800 rounded-full border border-nothing-gray-700 overflow-hidden flex-shrink-0",children:o.profilePicture?u.jsx("img",{src:fn(o.profilePicture),alt:"Profile preview",className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full flex items-center justify-center",children:u.jsx(ss,{className:"h-8 w-8 text-nothing-gray-600"})})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-sm text-nothing-gray-300",children:"Upload a new profile picture"}),u.jsx("p",{className:"text-xs text-nothing-gray-500",children:"Recommended: 400x400px or larger"})]})]}),u.jsx("div",{className:"bg-nothing-gray-800 rounded-lg p-4",children:u.jsx(lc,{onFileUpload:Ue,acceptedTypes:"profile",multiple:!1})}),u.jsx("div",{className:"text-center text-nothing-gray-400",children:u.jsx("span",{className:"px-3 py-1 bg-nothing-gray-800 rounded",children:"OR"})}),u.jsxs("div",{className:"relative",children:[u.jsx(Zj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),u.jsx("input",{type:"url",value:o.profilePicture,onChange:ee=>a(J=>({...J,profilePicture:ee.target.value})),className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"https://example.com/profile-picture.jpg",disabled:!!M}),M&&u.jsx("p",{className:"text-sm text-nothing-gray-400 mt-2",children:"Profile picture uploaded"})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Display Name"}),u.jsxs("div",{className:"relative",children:[u.jsx(ss,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),u.jsx("input",{type:"text",value:o.displayName,onChange:ee=>a(J=>({...J,displayName:ee.target.value})),className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"Your display name"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Username"}),u.jsx("input",{type:"text",value:o.username,onChange:ee=>a(J=>({...J,username:ee.target.value})),className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"Your username"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Email Address"}),u.jsxs("div",{className:"relative",children:[u.jsx(og,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),u.jsx("input",{type:"email",value:o.email,onChange:ee=>a(J=>({...J,email:ee.target.value})),className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"your@email.com"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Bio"}),u.jsx("textarea",{value:o.bio,onChange:ee=>a(J=>({...J,bio:ee.target.value})),rows:4,className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent resize-none",placeholder:"Tell us about yourself..."})]}),u.jsx("button",{type:"submit",disabled:L,className:"w-full md:w-auto px-6 py-3 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:L?u.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-nothing-white"}):u.jsxs(u.Fragment,{children:[u.jsx(bx,{className:"h-5 w-5"}),u.jsx("span",{children:"Save Changes"})]})})]})]}),W==="security"&&u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"bg-nothing-gray-900 rounded-lg p-6 border border-nothing-gray-800",children:[u.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Change Password"}),u.jsxs("form",{onSubmit:Ae,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Current Password"}),u.jsxs("div",{className:"relative",children:[u.jsx(Gs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),u.jsx("input",{type:p?"text":"password",value:c.currentPassword,onChange:ee=>d(J=>({...J,currentPassword:ee.target.value})),className:"w-full pl-10 pr-12 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"Enter current password"}),u.jsx("button",{type:"button",onClick:()=>m(!p),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-nothing-gray-500 hover:text-nothing-white",children:p?u.jsx(pa,{className:"h-5 w-5"}):u.jsx(bn,{className:"h-5 w-5"})})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"New Password"}),u.jsxs("div",{className:"relative",children:[u.jsx(Gs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),u.jsx("input",{type:v?"text":"password",value:c.newPassword,onChange:ee=>d(J=>({...J,newPassword:ee.target.value})),className:"w-full pl-10 pr-12 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"Enter new password"}),u.jsx("button",{type:"button",onClick:()=>w(!v),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-nothing-gray-500 hover:text-nothing-white",children:v?u.jsx(pa,{className:"h-5 w-5"}):u.jsx(bn,{className:"h-5 w-5"})})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Confirm New Password"}),u.jsxs("div",{className:"relative",children:[u.jsx(Gs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),u.jsx("input",{type:E?"text":"password",value:c.confirmPassword,onChange:ee=>d(J=>({...J,confirmPassword:ee.target.value})),className:"w-full pl-10 pr-12 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"Confirm new password"}),u.jsx("button",{type:"button",onClick:()=>b(!E),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-nothing-gray-500 hover:text-nothing-white",children:E?u.jsx(pa,{className:"h-5 w-5"}):u.jsx(bn,{className:"h-5 w-5"})})]})]}),u.jsx("button",{type:"submit",disabled:L,className:"w-full md:w-auto px-6 py-3 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:L?u.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-nothing-white"}):u.jsxs(u.Fragment,{children:[u.jsx(bx,{className:"h-5 w-5"}),u.jsx("span",{children:"Update Password"})]})})]})]}),u.jsxs("div",{className:"bg-red-900/10 border border-red-700/30 rounded-lg p-6",children:[u.jsx("h2",{className:"text-2xl font-bold mb-4 text-red-400",children:"Danger Zone"}),u.jsx("p",{className:"text-nothing-gray-400 mb-6",children:"Once you delete your account, there is no going back. This will permanently delete all your glyphs and data. Please be certain."}),u.jsxs("form",{onSubmit:ee=>{ee.preventDefault(),oe()},className:"space-y-4",children:[u.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Current Password"}),u.jsxs("div",{className:"relative mb-4",children:[u.jsx(Gs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),u.jsx("input",{type:"password",value:ae,onChange:ee=>R(ee.target.value),className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"Enter your current password",required:!0})]}),u.jsx("button",{type:"submit",disabled:I,className:"px-6 py-3 bg-red-600 hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:I?"Deleting...":"Delete Account"})]})]})]})]})]})]})}):(r("/login"),null)},BO=()=>{const{currentUser:n,userProfile:e}=Bn(),t=cr(),[r,o]=k.useState({totalUsers:0,totalGlyphs:0,totalDownloads:0,totalViews:0,totalLikes:0,totalAdmins:0,uniqueViewers:0,uniqueDownloaders:0,topGlyphs:[]}),[a,c]=k.useState([]),[d,p]=k.useState(""),[m,v]=k.useState([]),[w,E]=k.useState(null),[b,L]=k.useState(!1),[V,P]=k.useState([]),[D,O]=k.useState(null),[j,W]=k.useState([]),[Z,ae]=k.useState(!1),[R,I]=k.useState(""),[N,M]=k.useState([]),[B,$]=k.useState(!0),[A,_e]=k.useState(!1),[Ue,Oe]=k.useState("stats"),Ae=n?.uid==="9H3pw5zS6GRDFTZaoYspEmruORj2"||e?.isAdmin===!0;k.useEffect(()=>{if(!n){t("/login");return}if(!Ae){t("/");return}oe()},[n,Ae,t]);const oe=async()=>{try{$(!0);const[Q,we,Ve,_t]=await Promise.all([Me.getAdminStats(),Me.getAllUsers(),Me.getGlyphs({limit:1e3}),Me.getGlyphRequests({limit:1e3})]);o(Q),c(we),v(we),P(Ve),W(_t.requests||[]);const jr=we.filter(zn=>zn.uid==="9H3pw5zS6GRDFTZaoYspEmruORj2"||zn.isAdmin);M(jr)}catch(Q){console.error("Error loading admin data:",Q)}finally{$(!1)}},ee=Q=>{if(p(Q),!Q.trim())v(a);else{const we=a.filter(Ve=>Ve.username?.toLowerCase().includes(Q.toLowerCase())||Ve.displayName?.toLowerCase().includes(Q.toLowerCase())||Ve.email?.toLowerCase().includes(Q.toLowerCase()));v(we)}},J=async Q=>{try{_e(!0),await Me.makeUserAdmin(Q),oe(),alert("User promoted to admin successfully!")}catch(we){console.error("Error making user admin:",we),alert("Failed to promote user to admin")}finally{_e(!1)}},U=async()=>{if(R.trim())try{_e(!0),await Me.addAdminByEmail(R),I(""),oe(),alert("Admin added successfully!")}catch(Q){console.error("Error adding admin:",Q),alert("Failed to add admin: "+Q.message)}finally{_e(!1)}},X=async Q=>{if(confirm("Are you sure you want to delete this glyph?"))try{_e(!0),await Me.adminDeleteGlyph(Q),P(we=>we.filter(Ve=>Ve.id!==Q)),alert("Glyph deleted successfully!")}catch(we){console.error("Error deleting glyph:",we),alert("Failed to delete glyph")}finally{_e(!1)}},me=async Q=>{if(confirm("Are you sure you want to delete this request?"))try{_e(!0),await Me.request(`/admin/glyph-requests/${Q}`,{method:"DELETE"}),W(we=>we.filter(Ve=>Ve.id!==Q)),alert("Request deleted successfully!")}catch(we){console.error("Error deleting request:",we),alert("Failed to delete request")}finally{_e(!1)}},ce=async Q=>{if(confirm("Are you sure you want to force complete this request?"))try{_e(!0),await Me.request(`/admin/glyph-requests/${Q}/force-complete`,{method:"POST",body:JSON.stringify({})}),W(we=>we.map(Ve=>Ve.id===Q?{...Ve,status:"completed"}:Ve)),alert("Request marked as completed!")}catch(we){console.error("Error completing request:",we),alert("Failed to complete request")}finally{_e(!1)}},he=async Q=>{if(confirm("Are you sure you want to reset this request to open status?"))try{_e(!0),await Me.request(`/admin/glyph-requests/${Q}/reset`,{method:"POST",body:JSON.stringify({})}),W(we=>we.map(Ve=>Ve.id===Q?{...Ve,status:"open",assigned_to:null}:Ve)),alert("Request reset to open status!")}catch(we){console.error("Error resetting request:",we),alert("Failed to reset request")}finally{_e(!1)}},ve=Q=>{try{return new Date(Q).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Unknown date"}},Le=Q=>{switch(Q){case"open":return"text-green-400 bg-green-400/10";case"in_progress":return"text-yellow-400 bg-yellow-400/10";case"completed":return"text-blue-400 bg-blue-400/10";case"cancelled":return"text-red-400 bg-red-400/10";default:return"text-nothing-gray-400 bg-nothing-gray-400/10"}};return B?u.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-4 glyph-animation",children:u.jsx(ia,{className:"h-8 w-8 text-nothing-white"})}),u.jsx("p",{className:"text-nothing-gray-400",children:"Loading admin panel..."})]})}):Ae?u.jsx("div",{className:"min-h-screen bg-nothing-black text-nothing-white",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[u.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[u.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[u.jsx(ia,{className:"h-8 w-8 text-nothing-red"}),u.jsx("h1",{className:"text-4xl font-bold font-nothing",children:"Admin Panel"})]}),u.jsxs("p",{className:"text-nothing-gray-400",children:["Welcome back, ",e?.displayName||n?.displayName,". Manage your GlyphMart platform."]})]}),u.jsx("div",{className:"border-b border-nothing-gray-800 mb-8",children:u.jsx("nav",{className:"flex space-x-8",children:[{id:"stats",label:"Statistics",icon:Ex},{id:"users",label:"Users",icon:Ix},{id:"glyphs",label:"Glyphs",icon:sh},{id:"requests",label:"Requests",icon:rs},{id:"admins",label:"Admins",icon:c4}].map(({id:Q,label:we,icon:Ve})=>u.jsxs("button",{onClick:()=>Oe(Q),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors duration-200 ${Ue===Q?"border-nothing-red text-nothing-red":"border-transparent text-nothing-gray-400 hover:text-nothing-white hover:border-nothing-gray-600"}`,children:[u.jsx(Ve,{className:"h-4 w-4"}),u.jsx("span",{children:we})]},Q))})}),u.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[Ue==="stats"&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsx("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-nothing-gray-400 text-sm",children:"Total Users"}),u.jsx("p",{className:"text-3xl font-bold text-nothing-white",children:r.totalUsers})]}),u.jsx(Ix,{className:"h-8 w-8 text-blue-500"})]})}),u.jsx("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-nothing-gray-400 text-sm",children:"Total Glyphs"}),u.jsx("p",{className:"text-3xl font-bold text-nothing-white",children:r.totalGlyphs})]}),u.jsx(sh,{className:"h-8 w-8 text-green-500"})]})}),u.jsx("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-nothing-gray-400 text-sm",children:"Unique Downloads"}),u.jsx("p",{className:"text-3xl font-bold text-nothing-white",children:r.uniqueDownloaders})]}),u.jsx(hs,{className:"h-8 w-8 text-purple-500"})]})}),u.jsx("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-nothing-gray-400 text-sm",children:"Unique Views"}),u.jsx("p",{className:"text-3xl font-bold text-nothing-white",children:r.uniqueViewers})]}),u.jsx(bn,{className:"h-8 w-8 text-orange-500"})]})})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"text-lg font-semibold text-nothing-white",children:"Additional Metrics"}),u.jsx(RT,{className:"h-6 w-6 text-nothing-red"})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-nothing-gray-400",children:"Total Likes"}),u.jsx("span",{className:"text-nothing-white font-semibold",children:r.totalLikes})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-nothing-gray-400",children:"Active Admins"}),u.jsx("span",{className:"text-nothing-white font-semibold",children:r.totalAdmins})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-nothing-gray-400",children:"Avg Unique Downloads/Glyph"}),u.jsx("span",{className:"text-nothing-white font-semibold",children:(r.totalGlyphs||0)>0?Math.round((r.uniqueDownloaders||0)/r.totalGlyphs):0})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-nothing-gray-400",children:"Avg Unique Views/Glyph"}),u.jsx("span",{className:"text-nothing-white font-semibold",children:(r.totalGlyphs||0)>0?Math.round((r.uniqueViewers||0)/r.totalGlyphs):0})]})]})]}),u.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"text-lg font-semibold text-nothing-white",children:"Top Performing Glyphs"}),u.jsx(Ex,{className:"h-6 w-6 text-nothing-red"})]}),u.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:[(r.topGlyphs||[]).slice(0,5).map((Q,we)=>u.jsxs("div",{className:"flex items-center justify-between p-2 bg-nothing-gray-800 rounded",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs("span",{className:"text-nothing-red font-bold text-sm",children:["#",we+1]}),u.jsx("span",{className:"text-nothing-white text-sm truncate max-w-32",title:Q.title,children:Q.title})]}),u.jsxs("div",{className:"flex items-center space-x-3 text-xs text-nothing-gray-400",children:[u.jsxs("span",{children:[Q.views,"v"]}),u.jsxs("span",{children:[Q.downloads,"d"]}),u.jsxs("span",{children:[Q.likes,""]})]})]},Q.id)),(!r.topGlyphs||r.topGlyphs.length===0)&&u.jsx("div",{className:"text-center text-nothing-gray-400 py-4",children:u.jsx("p",{children:"No glyph data available yet"})})]})]})]}),u.jsx("div",{className:"bg-yellow-900/20 border border-yellow-700/50 rounded-lg p-4",children:u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx("svg",{className:"w-5 h-5 text-yellow-500 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-yellow-500 font-medium text-sm",children:"Known Issues"}),u.jsx("p",{className:"text-yellow-200/80 text-sm mt-1",children:"Additional metrics and top performing glyphs are currently broken and may not display accurate data."})]})]})})]}),Ue==="users"&&u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"flex items-center space-x-4",children:u.jsxs("div",{className:"relative flex-1",children:[u.jsx(Xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-400"}),u.jsx("input",{type:"text",placeholder:"Search users by username, name, or email...",value:d,onChange:Q=>ee(Q.target.value),className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent"})]})}),u.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg overflow-hidden",children:[u.jsx("div",{className:"px-6 py-4 border-b border-nothing-gray-800",children:u.jsxs("h3",{className:"text-lg font-semibold",children:["Users (",(m||[]).length,")"]})}),u.jsx("div",{className:"max-h-96 overflow-y-auto",children:(m||[]).map(Q=>u.jsx("div",{className:"px-6 py-4 border-b border-nothing-gray-800 last:border-b-0 hover:bg-nothing-gray-800 transition-colors duration-200",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border border-nothing-gray-600",children:Q.profilePicture?u.jsx("img",{src:fn(Q.profilePicture),alt:Q.displayName,loading:"lazy",className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full bg-nothing-red flex items-center justify-center",children:u.jsx("span",{className:"text-sm font-bold text-nothing-white",children:Q.displayName?.charAt(0)?.toUpperCase()||Q.username?.charAt(0)?.toUpperCase()||"U"})})}),u.jsxs("div",{children:[u.jsxs("p",{className:"font-semibold text-nothing-white",children:[Q.displayName||Q.username,(Q.uid==="9H3pw5zS6GRDFTZaoYspEmruORj2"||Q.isAdmin)&&u.jsx(ia,{className:"inline h-4 w-4 ml-2 text-nothing-red"})]}),u.jsxs("p",{className:"text-sm text-nothing-gray-400",children:["@",Q.username]}),u.jsx("p",{className:"text-xs text-nothing-gray-500",children:Q.email})]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[!Q.isAdmin&&Q.uid!=="9H3pw5zS6GRDFTZaoYspEmruORj2"&&u.jsx("button",{onClick:()=>J(Q.uid),disabled:A,className:"px-3 py-1 bg-nothing-red hover:bg-red-700 text-nothing-white text-sm rounded transition-colors duration-200 disabled:opacity-50",children:"Make Admin"}),u.jsx("button",{onClick:()=>E(Q),className:"p-2 text-nothing-gray-400 hover:text-nothing-white transition-colors duration-200",children:u.jsx(a4,{className:"h-4 w-4"})})]})]})},Q.uid))})]})]}),Ue==="glyphs"&&u.jsx("div",{className:"space-y-6",children:u.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg overflow-hidden",children:[u.jsx("div",{className:"px-6 py-4 border-b border-nothing-gray-800",children:u.jsxs("h3",{className:"text-lg font-semibold",children:["All Glyphs (",(V||[]).length,")"]})}),u.jsx("div",{className:"max-h-96 overflow-y-auto",children:(V||[]).map(Q=>u.jsx("div",{className:"px-6 py-4 border-b border-nothing-gray-800 last:border-b-0 hover:bg-nothing-gray-800 transition-colors duration-200",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("div",{className:"w-12 h-12 rounded-lg overflow-hidden border border-nothing-gray-600",children:Q.images&&Q.images.length>0?u.jsx("img",{src:fn(Q.images[0]),alt:Q.title,loading:"lazy",className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full bg-nothing-gray-700 flex items-center justify-center",children:u.jsx(sh,{className:"h-6 w-6 text-nothing-gray-500"})})}),u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-nothing-white",children:Q.title}),u.jsxs("p",{className:"text-sm text-nothing-gray-400",children:["by @",Q.creatorUsername]}),u.jsxs("p",{className:"text-xs text-nothing-gray-500",children:[Q.downloads||0," downloads  ",Q.views||0," views  ",Q.likes||0," likes"]})]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("button",{onClick:()=>t(`/glyph/${Q.id}`),className:"px-3 py-1 bg-nothing-gray-700 hover:bg-nothing-gray-600 text-nothing-white text-sm rounded transition-colors duration-200",children:"View"}),u.jsx("button",{onClick:()=>X(Q.id),disabled:A,className:"p-2 text-red-400 hover:text-red-300 transition-colors duration-200 disabled:opacity-50",children:u.jsx(u4,{className:"h-4 w-4"})})]})]})},Q.id))})]})}),Ue==="requests"&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[u.jsx("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-nothing-gray-400 text-sm",children:"Total Requests"}),u.jsx("p",{className:"text-3xl font-bold text-nothing-white",children:j.length})]}),u.jsx(rs,{className:"h-8 w-8 text-purple-500"})]})}),u.jsx("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-nothing-gray-400 text-sm",children:"Open"}),u.jsx("p",{className:"text-3xl font-bold text-nothing-white",children:j.filter(Q=>Q.status==="open").length})]}),u.jsx(ed,{className:"h-8 w-8 text-green-500"})]})}),u.jsx("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-nothing-gray-400 text-sm",children:"In Progress"}),u.jsx("p",{className:"text-3xl font-bold text-nothing-white",children:j.filter(Q=>Q.status==="in_progress").length})]}),u.jsx(bn,{className:"h-8 w-8 text-yellow-500"})]})}),u.jsx("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-nothing-gray-400 text-sm",children:"Completed"}),u.jsx("p",{className:"text-3xl font-bold text-nothing-white",children:j.filter(Q=>Q.status==="completed").length})]}),u.jsx(NT,{className:"h-8 w-8 text-blue-500"})]})})]}),u.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg",children:[u.jsxs("div",{className:"p-6 border-b border-nothing-gray-800",children:[u.jsx("h3",{className:"text-lg font-semibold",children:"All Glyph Requests"}),u.jsx("p",{className:"text-nothing-gray-400 text-sm",children:"Manage and monitor all glyph requests"})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b border-nothing-gray-800",children:[u.jsx("th",{className:"text-left p-4 text-nothing-gray-400 font-medium",children:"Title"}),u.jsx("th",{className:"text-left p-4 text-nothing-gray-400 font-medium",children:"Status"}),u.jsx("th",{className:"text-left p-4 text-nothing-gray-400 font-medium",children:"Requester"}),u.jsx("th",{className:"text-left p-4 text-nothing-gray-400 font-medium",children:"Assigned To"}),u.jsx("th",{className:"text-left p-4 text-nothing-gray-400 font-medium",children:"Created"}),u.jsx("th",{className:"text-left p-4 text-nothing-gray-400 font-medium",children:"Actions"})]})}),u.jsx("tbody",{children:j.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:"6",className:"p-8 text-center text-nothing-gray-400",children:"No requests found"})}):j.map(Q=>u.jsxs("tr",{className:"border-b border-nothing-gray-800 hover:bg-nothing-gray-800/50",children:[u.jsx("td",{className:"p-4",children:u.jsxs("div",{children:[u.jsx("p",{className:"text-nothing-white font-medium",children:Q.title}),u.jsx("p",{className:"text-nothing-gray-400 text-sm truncate max-w-xs",children:Q.description})]})}),u.jsx("td",{className:"p-4",children:u.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${Le(Q.status)}`,children:Q.status.replace("_"," ").toUpperCase()})}),u.jsx("td",{className:"p-4",children:u.jsx("span",{className:"text-nothing-white",children:Q.user?.username||"Unknown"})}),u.jsx("td",{className:"p-4",children:u.jsx("span",{className:"text-nothing-white",children:Q.assigned_user?.username||(Q.assigned_to?"Unknown":"None")})}),u.jsx("td",{className:"p-4",children:u.jsx("span",{className:"text-nothing-gray-400 text-sm",children:ve(Q.created_at)})}),u.jsx("td",{className:"p-4",children:u.jsxs("div",{className:"flex items-center space-x-2",children:[Q.status==="in_progress"&&u.jsx("button",{onClick:()=>ce(Q.id),disabled:A,className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-xs rounded transition-colors duration-200 disabled:opacity-50",children:"Complete"}),(Q.status==="in_progress"||Q.status==="completed")&&u.jsx("button",{onClick:()=>he(Q.id),disabled:A,className:"px-3 py-1 bg-yellow-600 hover:bg-yellow-700 text-white text-xs rounded transition-colors duration-200 disabled:opacity-50",children:"Reset"}),u.jsx("button",{onClick:()=>me(Q.id),disabled:A,className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white text-xs rounded transition-colors duration-200 disabled:opacity-50",children:"Delete"})]})})]},Q.id))})]})})]})]}),Ue==="admins"&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6",children:[u.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add New Admin"}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("input",{type:"email",placeholder:"Enter email address",value:R,onChange:Q=>I(Q.target.value),className:"flex-1 px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent"}),u.jsxs("button",{onClick:U,disabled:A||!R.trim(),className:"px-6 py-3 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 flex items-center space-x-2",children:[u.jsx(h4,{className:"h-4 w-4"}),u.jsx("span",{children:"Add Admin"})]})]})]}),u.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg overflow-hidden",children:[u.jsx("div",{className:"px-6 py-4 border-b border-nothing-gray-800",children:u.jsxs("h3",{className:"text-lg font-semibold",children:["Current Admins (",N.length,")"]})}),u.jsx("div",{children:N.map(Q=>u.jsx("div",{className:"px-6 py-4 border-b border-nothing-gray-800 last:border-b-0",children:u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border border-nothing-gray-600",children:Q.profilePicture?u.jsx("img",{src:fn(Q.profilePicture),alt:Q.displayName,loading:"lazy",className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full bg-nothing-red flex items-center justify-center",children:u.jsx("span",{className:"text-sm font-bold text-nothing-white",children:Q.displayName?.charAt(0)?.toUpperCase()||Q.username?.charAt(0)?.toUpperCase()||"A"})})}),u.jsxs("div",{children:[u.jsxs("p",{className:"font-semibold text-nothing-white flex items-center",children:[Q.displayName||Q.username,u.jsx(ia,{className:"h-4 w-4 ml-2 text-nothing-red"}),Q.uid==="9H3pw5zS6GRDFTZaoYspEmruORj2"&&u.jsx("span",{className:"ml-2 px-2 py-1 bg-nothing-red text-nothing-white text-xs rounded",children:"Super Admin"})]}),u.jsxs("p",{className:"text-sm text-nothing-gray-400",children:["@",Q.username]}),u.jsx("p",{className:"text-xs text-nothing-gray-500",children:Q.email})]})]})})},Q.uid))})]})]})]},Ue)]})}):u.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-2xl font-bold text-red-500 mb-4",children:"Access Denied"}),u.jsx("p",{className:"text-nothing-gray-400 mb-6",children:"You don't have permission to access the admin panel."}),u.jsx("button",{onClick:()=>t("/"),className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-6 py-3 rounded-lg font-medium transition-colors duration-200",children:"Return to Home"})]})})},zO=()=>{const[n,e]=k.useState([]),[t,r]=k.useState(!0),[o,a]=k.useState(""),[c,d]=k.useState(!1),{currentUser:p,userProfile:m}=Bn(),[v,w]=k.useState({title:"",description:"",tags:"",referenceImages:[],referenceFiles:[]});k.useEffect(()=>{E()},[o]);const E=async()=>{try{r(!0);const O={limit:"20",offset:"0"};o.trim()&&(O.search=o.trim());const j=await Me.getGlyphRequests(O);e(j.requests||[])}catch(O){console.error("Error fetching requests:",O),e([])}finally{r(!1)}},b=async O=>{if(O.preventDefault(),!p){alert("Please log in to create a request");return}try{const j={title:v.title,description:v.description,tags:v.tags.split(",").map(W=>W.trim()).filter(W=>W),reference_images:v.referenceImages,reference_files:v.referenceFiles};await Me.createGlyphRequest(j),d(!1),w({title:"",description:"",tags:"",referenceImages:[],referenceFiles:[]}),E()}catch(j){console.error("Error creating request:",j),alert(j.message||"Failed to create request")}},L=async O=>{if(!p){alert("Please log in to take on requests");return}try{await Me.takeOnGlyphRequest(O),alert("Successfully took on the request!"),E()}catch(j){console.error("Error taking on request:",j),alert(j.message||"Failed to take on request")}},V=O=>{try{return new Date(O).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch{return"Unknown date"}},P=O=>{switch(O){case"open":return"text-green-400 bg-green-400/10";case"in_progress":return"text-yellow-400 bg-yellow-400/10";case"completed":return"text-blue-400 bg-blue-400/10";case"cancelled":return"text-red-400 bg-red-400/10";default:return"text-nothing-gray-400 bg-nothing-gray-400/10"}},D=(O,j=150)=>O.length<=j?O:O.substr(0,j)+"...";return t?u.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse",children:u.jsx(rs,{className:"h-8 w-8 text-nothing-white"})}),u.jsx("p",{className:"text-nothing-gray-400",children:"Loading requests..."})]})}):u.jsxs("div",{className:"min-h-screen bg-nothing-black",children:[u.jsx("section",{className:"relative py-16 px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"max-w-7xl mx-auto",children:[u.jsx("div",{className:"text-center mb-8",children:u.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:[u.jsxs("h1",{className:"text-4xl md:text-6xl font-bold text-nothing-white mb-4 font-nothing",children:["Request ",u.jsx("span",{className:"text-nothing-red",children:"Glyph Toys"})]}),u.jsx("p",{className:"text-xl text-nothing-gray-300 mb-8 max-w-3xl mx-auto",children:"Share your ideas for custom Nothing Phone(3) glyphs and let the community bring them to life"})]})}),u.jsx("div",{className:"max-w-4xl mx-auto mb-8",children:u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[u.jsxs("div",{className:"flex-1 relative",children:[u.jsx("input",{type:"text",value:o,onChange:O=>a(O.target.value),placeholder:"Search requests...",className:"w-full bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg py-3 pl-10 pr-4 text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200"}),u.jsx(Xr,{className:"absolute left-3 top-3.5 h-5 w-5 text-nothing-gray-400"})]}),p&&u.jsxs("button",{onClick:()=>d(!0),className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-6 py-3 rounded-lg font-semibold transition-colors duration-200 flex items-center space-x-2",children:[u.jsx(AT,{className:"h-5 w-5"}),u.jsx("span",{children:"Create Request"})]})]})})]})}),c&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsx("div",{className:"bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:u.jsxs("div",{className:"p-6",children:[u.jsx("h3",{className:"text-2xl font-bold text-nothing-white mb-6",children:"Create Glyph Request"}),u.jsxs("form",{onSubmit:b,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-nothing-white font-medium mb-2",children:"Title"}),u.jsx("input",{type:"text",value:v.title,onChange:O=>w({...v,title:O.target.value}),required:!0,className:"w-full bg-nothing-gray-800 border border-nothing-gray-600 rounded-lg py-2 px-3 text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red",placeholder:"Brief title for your glyph idea..."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-nothing-white font-medium mb-2",children:"Description"}),u.jsx("textarea",{value:v.description,onChange:O=>w({...v,description:O.target.value}),required:!0,rows:6,className:"w-full bg-nothing-gray-800 border border-nothing-gray-600 rounded-lg py-2 px-3 text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red resize-none",placeholder:"Describe your glyph idea in detail. What should it look like? How should it behave? Any specific requirements?"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-nothing-white font-medium mb-2",children:"Tags (comma-separated)"}),u.jsx("input",{type:"text",value:v.tags,onChange:O=>w({...v,tags:O.target.value}),className:"w-full bg-nothing-gray-800 border border-nothing-gray-600 rounded-lg py-2 px-3 text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red",placeholder:"animation, gaming, utility, fun, etc."})]}),u.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[u.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-6 py-2 border border-nothing-gray-600 text-nothing-gray-300 rounded-lg hover:bg-nothing-gray-800 transition-colors duration-200",children:"Cancel"}),u.jsx("button",{type:"submit",className:"px-6 py-2 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-lg transition-colors duration-200",children:"Create Request"})]})]})]})})}),u.jsx("section",{className:"px-4 sm:px-6 lg:px-8 pb-20",children:u.jsx("div",{className:"max-w-7xl mx-auto",children:n.length===0?u.jsxs("div",{className:"text-center py-16",children:[u.jsx("div",{className:"w-16 h-16 bg-nothing-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(rs,{className:"h-8 w-8 text-nothing-gray-600"})}),u.jsx("p",{className:"text-nothing-gray-400 text-lg",children:"No requests found"}),u.jsx("p",{className:"text-nothing-gray-500 text-sm mt-2",children:o?"Try a different search term":"Be the first to create a glyph request!"})]}):u.jsx("div",{className:"space-y-6",children:n.map((O,j)=>u.jsx(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:j*.1},className:"bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg p-6 hover:border-nothing-gray-600 transition-colors duration-200",children:u.jsx("div",{className:"flex justify-between items-start mb-4",children:u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[u.jsx("h3",{className:"text-xl font-semibold text-nothing-white",children:O.title}),u.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${P(O.status)}`,children:O.status.replace("_"," ").toUpperCase()})]}),u.jsx("p",{className:"text-nothing-gray-300 mb-4 leading-relaxed",children:D(O.description)}),O.tags&&O.tags.length>0&&u.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:O.tags.map((W,Z)=>u.jsxs("span",{className:"inline-flex items-center space-x-1 px-2 py-1 bg-nothing-gray-800 text-nothing-gray-300 text-xs rounded-full",children:[u.jsx(CT,{className:"h-3 w-3"}),u.jsx("span",{children:W})]},Z))}),u.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[O.reference_images&&O.reference_images.length>0&&u.jsxs("span",{className:"inline-flex items-center space-x-1 text-nothing-gray-400 text-sm",children:[u.jsx(sh,{className:"h-4 w-4"}),u.jsxs("span",{children:[O.reference_images.length," image",O.reference_images.length!==1?"s":""]})]}),O.reference_files&&O.reference_files.length>0&&u.jsxs("span",{className:"inline-flex items-center space-x-1 text-nothing-gray-400 text-sm",children:[u.jsx(o4,{className:"h-4 w-4"}),u.jsxs("span",{children:[O.reference_files.length," file",O.reference_files.length!==1?"s":""]})]})]}),u.jsxs("div",{className:"flex items-center justify-between text-sm text-nothing-gray-400",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("span",{className:"inline-flex items-center space-x-1",children:[u.jsx(ss,{className:"h-4 w-4"}),u.jsxs("span",{children:["by ",O.user?.username||"Unknown"]})]}),u.jsxs("span",{className:"inline-flex items-center space-x-1",children:[u.jsx(ed,{className:"h-4 w-4"}),u.jsx("span",{children:V(O.created_at)})]})]}),O.status==="open"&&p&&u.jsx("button",{onClick:()=>L(O.id),className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200",children:"Take On"})]})]})})},O.id))})})})]})},$O=()=>{const[n,e]=k.useState([]),[t,r]=k.useState([]),[o,a]=k.useState(!0),[c,d]=k.useState("taken"),{currentUser:p,userProfile:m}=Bn();k.useEffect(()=>{p&&(v(),w())},[p,c]);const v=async()=>{try{if(a(!0),c==="taken"){const D=await Me.getMyGlyphRequests("assigned");e(D.requests.filter(O=>O.type==="assigned"))}else{const D=await Me.getMyGlyphRequests("created");e(D.requests.filter(O=>O.type==="created"))}}catch(D){console.error("Error fetching my requests:",D),e([])}finally{a(!1)}},w=async()=>{try{const D=await Me.getGlyphs({creator_id:p.uid,limit:100});r(D)}catch(D){console.error("Error fetching my glyphs:",D),r([])}},E=async(D,O=null)=>{try{await Me.completeGlyphRequest(D,O),alert("Request marked as completed!"),v()}catch(j){console.error("Error completing request:",j),alert(j.message||"Failed to complete request")}},b=async D=>{if(confirm("Are you sure you want to cancel this request?"))try{await Me.cancelGlyphRequest(D),alert("Request cancelled"),v()}catch(O){console.error("Error cancelling request:",O),alert(O.message||"Failed to cancel request")}},L=D=>{try{return new Date(D).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch{return"Unknown date"}},V=D=>{switch(D){case"open":return"text-green-400 bg-green-400/10";case"in_progress":return"text-yellow-400 bg-yellow-400/10";case"completed":return"text-blue-400 bg-blue-400/10";case"cancelled":return"text-red-400 bg-red-400/10";default:return"text-nothing-gray-400 bg-nothing-gray-400/10"}},P=(D,O=100)=>D.length<=O?D:D.substr(0,O)+"...";return o?u.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse",children:u.jsx(rs,{className:"h-8 w-8 text-nothing-white"})}),u.jsx("p",{className:"text-nothing-gray-400",children:"Loading your requests..."})]})}):u.jsxs("div",{className:"min-h-screen bg-nothing-black",children:[u.jsx("section",{className:"relative py-16 px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"max-w-7xl mx-auto",children:[u.jsx("div",{className:"text-center mb-8",children:u.jsxs(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:[u.jsxs("h1",{className:"text-4xl md:text-6xl font-bold text-nothing-white mb-4 font-nothing",children:["My ",u.jsx("span",{className:"text-nothing-red",children:"Requests"})]}),u.jsx("p",{className:"text-xl text-nothing-gray-300 mb-8 max-w-3xl mx-auto",children:"Manage the glyph requests you've taken on and created"})]})}),u.jsx("div",{className:"max-w-4xl mx-auto mb-8",children:u.jsxs("div",{className:"flex space-x-4 border-b border-nothing-gray-800",children:[u.jsxs("button",{onClick:()=>d("taken"),className:`flex items-center space-x-2 px-4 py-3 font-medium border-b-2 transition-colors duration-200 ${c==="taken"?"border-nothing-red text-nothing-red":"border-transparent text-nothing-gray-400 hover:text-nothing-white"}`,children:[u.jsx(Ih,{className:"h-4 w-4"}),u.jsxs("span",{children:["Taken On (",n.filter(D=>D.assigned_to===p?.uid).length,")"]})]}),u.jsxs("button",{onClick:()=>d("created"),className:`flex items-center space-x-2 px-4 py-3 font-medium border-b-2 transition-colors duration-200 ${c==="created"?"border-nothing-red text-nothing-red":"border-transparent text-nothing-gray-400 hover:text-nothing-white"}`,children:[u.jsx(rs,{className:"h-4 w-4"}),u.jsxs("span",{children:["Created (",n.filter(D=>D.user_id===p?.uid).length,")"]})]})]})})]})}),u.jsx("section",{className:"px-4 sm:px-6 lg:px-8 pb-20",children:u.jsx("div",{className:"max-w-7xl mx-auto",children:n.length===0?u.jsxs("div",{className:"text-center py-16",children:[u.jsx("div",{className:"w-16 h-16 bg-nothing-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(rs,{className:"h-8 w-8 text-nothing-gray-600"})}),u.jsx("p",{className:"text-nothing-gray-400 text-lg",children:c==="taken"?"No requests taken on yet":"No requests created yet"}),u.jsx("p",{className:"text-nothing-gray-500 text-sm mt-2",children:c==="taken"?"Browse available requests to take on":"Create your first glyph request!"}),u.jsx(He,{to:"/request-glyphs",className:"inline-block mt-4 bg-nothing-red hover:bg-red-700 text-nothing-white px-6 py-2 rounded-lg transition-colors duration-200",children:c==="taken"?"Browse Requests":"Create Request"})]}):u.jsx("div",{className:"space-y-6",children:n.map((D,O)=>u.jsx(je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:O*.1},className:"bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg p-6 hover:border-nothing-gray-600 transition-colors duration-200",children:u.jsx("div",{className:"flex justify-between items-start mb-4",children:u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[u.jsx("h3",{className:"text-xl font-semibold text-nothing-white",children:D.title}),u.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${V(D.status)}`,children:D.status.replace("_"," ").toUpperCase()})]}),u.jsx("p",{className:"text-nothing-gray-300 mb-4 leading-relaxed",children:P(D.description)}),D.tags&&D.tags.length>0&&u.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:D.tags.map((j,W)=>u.jsxs("span",{className:"inline-flex items-center space-x-1 px-2 py-1 bg-nothing-gray-800 text-nothing-gray-300 text-xs rounded-full",children:[u.jsx(CT,{className:"h-3 w-3"}),u.jsx("span",{children:j})]},W))}),u.jsxs("div",{className:"flex items-center justify-between text-sm text-nothing-gray-400",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("span",{className:"inline-flex items-center space-x-1",children:[u.jsx(ss,{className:"h-4 w-4"}),u.jsxs("span",{children:["by ",D.user?.username||"Unknown"]})]}),u.jsxs("span",{className:"inline-flex items-center space-x-1",children:[u.jsx(ed,{className:"h-4 w-4"}),u.jsx("span",{children:L(D.created_at)})]})]}),c==="taken"&&D.status==="in_progress"&&u.jsxs("div",{className:"flex space-x-2",children:[u.jsxs("div",{className:"relative group",children:[u.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-nothing-white px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200",children:"Complete"}),u.jsx("div",{className:"absolute right-0 top-full mt-1 w-64 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10",children:u.jsxs("div",{className:"p-3",children:[u.jsx("p",{className:"text-nothing-white text-sm mb-2",children:"Complete with glyph:"}),u.jsxs("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:[u.jsx("button",{onClick:()=>E(D.id),className:"w-full text-left px-2 py-1 text-nothing-gray-300 hover:bg-nothing-gray-700 rounded text-xs",children:"Mark as complete (no glyph)"}),t.map(j=>u.jsx("button",{onClick:()=>E(D.id,j.id),className:"w-full text-left px-2 py-1 text-nothing-gray-300 hover:bg-nothing-gray-700 rounded text-xs",children:P(j.title,30)},j.id))]})]})})]}),u.jsx("button",{onClick:()=>b(D.id),className:"bg-red-600 hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200",children:"Cancel"})]}),c==="created"&&D.assigned_to&&u.jsxs("div",{className:"text-nothing-gray-400 text-sm",children:["Assigned to: ",D.assigned_user?.username||"Unknown"]})]})]})})},D.id))})})})]})},kl=({children:n})=>{const{currentUser:e}=Bn();return e?n:u.jsx($w,{to:"/login"})},Aw=({children:n})=>{const{currentUser:e}=Bn();return e?u.jsx($w,{to:"/"}):n};function qO(){return u.jsx(Wj,{children:u.jsx(pI,{children:u.jsxs("div",{className:"App",children:[u.jsx(CO,{}),u.jsxs(oI,{children:[u.jsx(En,{path:"/",element:u.jsx(RO,{})}),u.jsx(En,{path:"/login",element:u.jsx(Aw,{children:u.jsx(jO,{})})}),u.jsx(En,{path:"/signup",element:u.jsx(Aw,{children:u.jsx(DO,{})})}),u.jsx(En,{path:"/glyph/:id",element:u.jsx(VO,{})}),u.jsx(En,{path:"/storefront/:username",element:u.jsx(LO,{})}),u.jsx(En,{path:"/upload",element:u.jsx(kl,{children:u.jsx(OO,{})})}),u.jsx(En,{path:"/search",element:u.jsx(MO,{})}),u.jsx(En,{path:"/request-glyphs",element:u.jsx(zO,{})}),u.jsx(En,{path:"/my-requests",element:u.jsx(kl,{children:u.jsx($O,{})})}),u.jsx(En,{path:"/liked",element:u.jsx(kl,{children:u.jsx(UO,{})})}),u.jsx(En,{path:"/settings",element:u.jsx(kl,{children:u.jsx(FO,{})})}),u.jsx(En,{path:"/admin",element:u.jsx(kl,{children:u.jsx(BO,{})})})]})]})})})}mS.createRoot(document.getElementById("root")).render(u.jsx(k.StrictMode,{children:u.jsx(qO,{})}));
