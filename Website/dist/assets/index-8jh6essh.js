function eI(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in n)){const a=Object.getOwnPropertyDescriptor(r,o);a&&Object.defineProperty(n,o,a.get?a:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function tI(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Rf={exports:{}},Sl={},jf={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D0;function nI(){if(D0)return Ve;D0=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),x=Symbol.iterator;function E(L){return L===null||typeof L!="object"?null:(L=x&&L[x]||L["@@iterator"],typeof L=="function"?L:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,j={};function A(L,J,fe){this.props=L,this.context=J,this.refs=j,this.updater=fe||I}A.prototype.isReactComponent={},A.prototype.setState=function(L,J){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,J,"setState")},A.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function F(){}F.prototype=A.prototype;function H(L,J,fe){this.props=L,this.context=J,this.refs=j,this.updater=fe||I}var O=H.prototype=new F;O.constructor=H,D(O,A.prototype),O.isPureReactComponent=!0;var Q=Array.isArray,Z=Object.prototype.hasOwnProperty,ie={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function b(L,J,fe){var le,ue={},ve=null,je=null;if(J!=null)for(le in J.ref!==void 0&&(je=J.ref),J.key!==void 0&&(ve=""+J.key),J)Z.call(J,le)&&!C.hasOwnProperty(le)&&(ue[le]=J[le]);var Be=arguments.length-2;if(Be===1)ue.children=fe;else if(1<Be){for(var He=Array(Be),it=0;it<Be;it++)He[it]=arguments[it+2];ue.children=He}if(L&&L.defaultProps)for(le in Be=L.defaultProps,Be)ue[le]===void 0&&(ue[le]=Be[le]);return{$$typeof:n,type:L,key:ve,ref:je,props:ue,_owner:ie.current}}function P(L,J){return{$$typeof:n,type:L.type,key:J,ref:L.ref,props:L.props,_owner:L._owner}}function V(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function U(L){var J={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(fe){return J[fe]})}var z=/\/+/g;function N(L,J){return typeof L=="object"&&L!==null&&L.key!=null?U(""+L.key):J.toString(36)}function be(L,J,fe,le,ue){var ve=typeof L;(ve==="undefined"||ve==="boolean")&&(L=null);var je=!1;if(L===null)je=!0;else switch(ve){case"string":case"number":je=!0;break;case"object":switch(L.$$typeof){case n:case e:je=!0}}if(je)return je=L,ue=ue(je),L=le===""?"."+N(je,0):le,Q(ue)?(fe="",L!=null&&(fe=L.replace(z,"$&/")+"/"),be(ue,J,fe,"",function(it){return it})):ue!=null&&(V(ue)&&(ue=P(ue,fe+(!ue.key||je&&je.key===ue.key?"":(""+ue.key).replace(z,"$&/")+"/")+L)),J.push(ue)),1;if(je=0,le=le===""?".":le+":",Q(L))for(var Be=0;Be<L.length;Be++){ve=L[Be];var He=le+N(ve,Be);je+=be(ve,J,fe,He,ue)}else if(He=E(L),typeof He=="function")for(L=He.call(L),Be=0;!(ve=L.next()).done;)ve=ve.value,He=le+N(ve,Be++),je+=be(ve,J,fe,He,ue);else if(ve==="object")throw J=String(L),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return je}function $e(L,J,fe){if(L==null)return L;var le=[],ue=0;return be(L,le,"","",function(ve){return J.call(fe,ve,ue++)}),le}function Re(L){if(L._status===-1){var J=L._result;J=J(),J.then(function(fe){(L._status===0||L._status===-1)&&(L._status=1,L._result=fe)},function(fe){(L._status===0||L._status===-1)&&(L._status=2,L._result=fe)}),L._status===-1&&(L._status=0,L._result=J)}if(L._status===1)return L._result.default;throw L._result}var Ne={current:null},oe={transition:null},$={ReactCurrentDispatcher:Ne,ReactCurrentBatchConfig:oe,ReactCurrentOwner:ie};function X(){throw Error("act(...) is not supported in production builds of React.")}return Ve.Children={map:$e,forEach:function(L,J,fe){$e(L,function(){J.apply(this,arguments)},fe)},count:function(L){var J=0;return $e(L,function(){J++}),J},toArray:function(L){return $e(L,function(J){return J})||[]},only:function(L){if(!V(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Ve.Component=A,Ve.Fragment=t,Ve.Profiler=o,Ve.PureComponent=H,Ve.StrictMode=r,Ve.Suspense=p,Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$,Ve.act=X,Ve.cloneElement=function(L,J,fe){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var le=D({},L.props),ue=L.key,ve=L.ref,je=L._owner;if(J!=null){if(J.ref!==void 0&&(ve=J.ref,je=ie.current),J.key!==void 0&&(ue=""+J.key),L.type&&L.type.defaultProps)var Be=L.type.defaultProps;for(He in J)Z.call(J,He)&&!C.hasOwnProperty(He)&&(le[He]=J[He]===void 0&&Be!==void 0?Be[He]:J[He])}var He=arguments.length-2;if(He===1)le.children=fe;else if(1<He){Be=Array(He);for(var it=0;it<He;it++)Be[it]=arguments[it+2];le.children=Be}return{$$typeof:n,type:L.type,key:ue,ref:ve,props:le,_owner:je}},Ve.createContext=function(L){return L={$$typeof:c,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:a,_context:L},L.Consumer=L},Ve.createElement=b,Ve.createFactory=function(L){var J=b.bind(null,L);return J.type=L,J},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(L){return{$$typeof:h,render:L}},Ve.isValidElement=V,Ve.lazy=function(L){return{$$typeof:w,_payload:{_status:-1,_result:L},_init:Re}},Ve.memo=function(L,J){return{$$typeof:m,type:L,compare:J===void 0?null:J}},Ve.startTransition=function(L){var J=oe.transition;oe.transition={};try{L()}finally{oe.transition=J}},Ve.unstable_act=X,Ve.useCallback=function(L,J){return Ne.current.useCallback(L,J)},Ve.useContext=function(L){return Ne.current.useContext(L)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(L){return Ne.current.useDeferredValue(L)},Ve.useEffect=function(L,J){return Ne.current.useEffect(L,J)},Ve.useId=function(){return Ne.current.useId()},Ve.useImperativeHandle=function(L,J,fe){return Ne.current.useImperativeHandle(L,J,fe)},Ve.useInsertionEffect=function(L,J){return Ne.current.useInsertionEffect(L,J)},Ve.useLayoutEffect=function(L,J){return Ne.current.useLayoutEffect(L,J)},Ve.useMemo=function(L,J){return Ne.current.useMemo(L,J)},Ve.useReducer=function(L,J,fe){return Ne.current.useReducer(L,J,fe)},Ve.useRef=function(L){return Ne.current.useRef(L)},Ve.useState=function(L){return Ne.current.useState(L)},Ve.useSyncExternalStore=function(L,J,fe){return Ne.current.useSyncExternalStore(L,J,fe)},Ve.useTransition=function(){return Ne.current.useTransition()},Ve.version="18.3.1",Ve}var V0;function sm(){return V0||(V0=1,jf.exports=nI()),jf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L0;function rI(){if(L0)return Sl;L0=1;var n=sm(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(h,p,m){var w,x={},E=null,I=null;m!==void 0&&(E=""+m),p.key!==void 0&&(E=""+p.key),p.ref!==void 0&&(I=p.ref);for(w in p)r.call(p,w)&&!a.hasOwnProperty(w)&&(x[w]=p[w]);if(h&&h.defaultProps)for(w in p=h.defaultProps,p)x[w]===void 0&&(x[w]=p[w]);return{$$typeof:e,type:h,key:E,ref:I,props:x,_owner:o.current}}return Sl.Fragment=t,Sl.jsx=c,Sl.jsxs=c,Sl}var O0;function sI(){return O0||(O0=1,Rf.exports=rI()),Rf.exports}var f=sI(),R=sm();const Rh=tI(R),iI=eI({__proto__:null,default:Rh},[R]);var Ou={},Df={exports:{}},hn={},Vf={exports:{}},Lf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M0;function oI(){return M0||(M0=1,function(n){function e(oe,$){var X=oe.length;oe.push($);e:for(;0<X;){var L=X-1>>>1,J=oe[L];if(0<o(J,$))oe[L]=$,oe[X]=J,X=L;else break e}}function t(oe){return oe.length===0?null:oe[0]}function r(oe){if(oe.length===0)return null;var $=oe[0],X=oe.pop();if(X!==$){oe[0]=X;e:for(var L=0,J=oe.length,fe=J>>>1;L<fe;){var le=2*(L+1)-1,ue=oe[le],ve=le+1,je=oe[ve];if(0>o(ue,X))ve<J&&0>o(je,ue)?(oe[L]=je,oe[ve]=X,L=ve):(oe[L]=ue,oe[le]=X,L=le);else if(ve<J&&0>o(je,X))oe[L]=je,oe[ve]=X,L=ve;else break e}}return $}function o(oe,$){var X=oe.sortIndex-$.sortIndex;return X!==0?X:oe.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var p=[],m=[],w=1,x=null,E=3,I=!1,D=!1,j=!1,A=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(oe){for(var $=t(m);$!==null;){if($.callback===null)r(m);else if($.startTime<=oe)r(m),$.sortIndex=$.expirationTime,e(p,$);else break;$=t(m)}}function Q(oe){if(j=!1,O(oe),!D)if(t(p)!==null)D=!0,Re(Z);else{var $=t(m);$!==null&&Ne(Q,$.startTime-oe)}}function Z(oe,$){D=!1,j&&(j=!1,F(b),b=-1),I=!0;var X=E;try{for(O($),x=t(p);x!==null&&(!(x.expirationTime>$)||oe&&!U());){var L=x.callback;if(typeof L=="function"){x.callback=null,E=x.priorityLevel;var J=L(x.expirationTime<=$);$=n.unstable_now(),typeof J=="function"?x.callback=J:x===t(p)&&r(p),O($)}else r(p);x=t(p)}if(x!==null)var fe=!0;else{var le=t(m);le!==null&&Ne(Q,le.startTime-$),fe=!1}return fe}finally{x=null,E=X,I=!1}}var ie=!1,C=null,b=-1,P=5,V=-1;function U(){return!(n.unstable_now()-V<P)}function z(){if(C!==null){var oe=n.unstable_now();V=oe;var $=!0;try{$=C(!0,oe)}finally{$?N():(ie=!1,C=null)}}else ie=!1}var N;if(typeof H=="function")N=function(){H(z)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,$e=be.port2;be.port1.onmessage=z,N=function(){$e.postMessage(null)}}else N=function(){A(z,0)};function Re(oe){C=oe,ie||(ie=!0,N())}function Ne(oe,$){b=A(function(){oe(n.unstable_now())},$)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(oe){oe.callback=null},n.unstable_continueExecution=function(){D||I||(D=!0,Re(Z))},n.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<oe?Math.floor(1e3/oe):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(oe){switch(E){case 1:case 2:case 3:var $=3;break;default:$=E}var X=E;E=$;try{return oe()}finally{E=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(oe,$){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var X=E;E=oe;try{return $()}finally{E=X}},n.unstable_scheduleCallback=function(oe,$,X){var L=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?L+X:L):X=L,oe){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=X+J,oe={id:w++,callback:$,priorityLevel:oe,startTime:X,expirationTime:J,sortIndex:-1},X>L?(oe.sortIndex=X,e(m,oe),t(p)===null&&oe===t(m)&&(j?(F(b),b=-1):j=!0,Ne(Q,X-L))):(oe.sortIndex=J,e(p,oe),D||I||(D=!0,Re(Z))),oe},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(oe){var $=E;return function(){var X=E;E=$;try{return oe.apply(this,arguments)}finally{E=X}}}}(Lf)),Lf}var U0;function aI(){return U0||(U0=1,Vf.exports=oI()),Vf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F0;function lI(){if(F0)return hn;F0=1;var n=sm(),e=aI();function t(s){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+s,l=1;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function a(s,i){c(s,i),c(s+"Capture",i)}function c(s,i){for(o[s]=i,s=0;s<i.length;s++)r.add(i[s])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},x={};function E(s){return p.call(x,s)?!0:p.call(w,s)?!1:m.test(s)?x[s]=!0:(w[s]=!0,!1)}function I(s,i,l,d){if(l!==null&&l.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return d?!1:l!==null?!l.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function D(s,i,l,d){if(i===null||typeof i>"u"||I(s,i,l,d))return!0;if(d)return!1;if(l!==null)switch(l.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function j(s,i,l,d,g,v,T){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=d,this.attributeNamespace=g,this.mustUseProperty=l,this.propertyName=s,this.type=i,this.sanitizeURL=v,this.removeEmptyString=T}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){A[s]=new j(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var i=s[0];A[i]=new j(i,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){A[s]=new j(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){A[s]=new j(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){A[s]=new j(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){A[s]=new j(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){A[s]=new j(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){A[s]=new j(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){A[s]=new j(s,5,!1,s.toLowerCase(),null,!1,!1)});var F=/[\-:]([a-z])/g;function H(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var i=s.replace(F,H);A[i]=new j(i,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var i=s.replace(F,H);A[i]=new j(i,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var i=s.replace(F,H);A[i]=new j(i,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){A[s]=new j(s,1,!1,s.toLowerCase(),null,!1,!1)}),A.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){A[s]=new j(s,1,!1,s.toLowerCase(),null,!0,!0)});function O(s,i,l,d){var g=A.hasOwnProperty(i)?A[i]:null;(g!==null?g.type!==0:d||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(D(i,l,g,d)&&(l=null),d||g===null?E(i)&&(l===null?s.removeAttribute(i):s.setAttribute(i,""+l)):g.mustUseProperty?s[g.propertyName]=l===null?g.type===3?!1:"":l:(i=g.attributeName,d=g.attributeNamespace,l===null?s.removeAttribute(i):(g=g.type,l=g===3||g===4&&l===!0?"":""+l,d?s.setAttributeNS(d,i,l):s.setAttribute(i,l))))}var Q=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Z=Symbol.for("react.element"),ie=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),U=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),be=Symbol.for("react.suspense_list"),$e=Symbol.for("react.memo"),Re=Symbol.for("react.lazy"),Ne=Symbol.for("react.offscreen"),oe=Symbol.iterator;function $(s){return s===null||typeof s!="object"?null:(s=oe&&s[oe]||s["@@iterator"],typeof s=="function"?s:null)}var X=Object.assign,L;function J(s){if(L===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);L=i&&i[1]||""}return`
`+L+s}var fe=!1;function le(s,i){if(!s||fe)return"";fe=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(K){var d=K}Reflect.construct(s,[],i)}else{try{i.call()}catch(K){d=K}s.call(i.prototype)}else{try{throw Error()}catch(K){d=K}s()}}catch(K){if(K&&d&&typeof K.stack=="string"){for(var g=K.stack.split(`
`),v=d.stack.split(`
`),T=g.length-1,k=v.length-1;1<=T&&0<=k&&g[T]!==v[k];)k--;for(;1<=T&&0<=k;T--,k--)if(g[T]!==v[k]){if(T!==1||k!==1)do if(T--,k--,0>k||g[T]!==v[k]){var M=`
`+g[T].replace(" at new "," at ");return s.displayName&&M.includes("<anonymous>")&&(M=M.replace("<anonymous>",s.displayName)),M}while(1<=T&&0<=k);break}}}finally{fe=!1,Error.prepareStackTrace=l}return(s=s?s.displayName||s.name:"")?J(s):""}function ue(s){switch(s.tag){case 5:return J(s.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return s=le(s.type,!1),s;case 11:return s=le(s.type.render,!1),s;case 1:return s=le(s.type,!0),s;default:return""}}function ve(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case C:return"Fragment";case ie:return"Portal";case P:return"Profiler";case b:return"StrictMode";case N:return"Suspense";case be:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case U:return(s.displayName||"Context")+".Consumer";case V:return(s._context.displayName||"Context")+".Provider";case z:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case $e:return i=s.displayName||null,i!==null?i:ve(s.type)||"Memo";case Re:i=s._payload,s=s._init;try{return ve(s(i))}catch{}}return null}function je(s){var i=s.type;switch(s.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=i.render,s=s.displayName||s.name||"",i.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ve(i);case 8:return i===b?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Be(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function He(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function it(s){var i=He(s)?"checked":"value",l=Object.getOwnPropertyDescriptor(s.constructor.prototype,i),d=""+s[i];if(!s.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,v=l.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return g.call(this)},set:function(T){d=""+T,v.call(this,T)}}),Object.defineProperty(s,i,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(T){d=""+T},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function Dt(s){s._valueTracker||(s._valueTracker=it(s))}function ii(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var l=i.getValue(),d="";return s&&(d=He(s)?s.checked?"true":"false":s.value),s=d,s!==l?(i.setValue(s),!0):!1}function cs(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function oi(s,i){var l=i.checked;return X({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??s._wrapperState.initialChecked})}function ao(s,i){var l=i.defaultValue==null?"":i.defaultValue,d=i.checked!=null?i.checked:i.defaultChecked;l=Be(i.value!=null?i.value:l),s._wrapperState={initialChecked:d,initialValue:l,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Na(s,i){i=i.checked,i!=null&&O(s,"checked",i,!1)}function Ca(s,i){Na(s,i);var l=Be(i.value),d=i.type;if(l!=null)d==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+l):s.value!==""+l&&(s.value=""+l);else if(d==="submit"||d==="reset"){s.removeAttribute("value");return}i.hasOwnProperty("value")?lo(s,i.type,l):i.hasOwnProperty("defaultValue")&&lo(s,i.type,Be(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(s.defaultChecked=!!i.defaultChecked)}function Ec(s,i,l){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var d=i.type;if(!(d!=="submit"&&d!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+s._wrapperState.initialValue,l||i===s.value||(s.value=i),s.defaultValue=i}l=s.name,l!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,l!==""&&(s.name=l)}function lo(s,i,l){(i!=="number"||cs(s.ownerDocument)!==s)&&(l==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+l&&(s.defaultValue=""+l))}var Rr=Array.isArray;function jr(s,i,l,d){if(s=s.options,i){i={};for(var g=0;g<l.length;g++)i["$"+l[g]]=!0;for(l=0;l<s.length;l++)g=i.hasOwnProperty("$"+s[l].value),s[l].selected!==g&&(s[l].selected=g),g&&d&&(s[l].defaultSelected=!0)}else{for(l=""+Be(l),i=null,g=0;g<s.length;g++){if(s[g].value===l){s[g].selected=!0,d&&(s[g].defaultSelected=!0);return}i!==null||s[g].disabled||(i=s[g])}i!==null&&(i.selected=!0)}}function Ra(s,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return X({},i,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function co(s,i){var l=i.value;if(l==null){if(l=i.children,i=i.defaultValue,l!=null){if(i!=null)throw Error(t(92));if(Rr(l)){if(1<l.length)throw Error(t(93));l=l[0]}i=l}i==null&&(i=""),l=i}s._wrapperState={initialValue:Be(l)}}function uo(s,i){var l=Be(i.value),d=Be(i.defaultValue);l!=null&&(l=""+l,l!==s.value&&(s.value=l),i.defaultValue==null&&s.defaultValue!==l&&(s.defaultValue=l)),d!=null&&(s.defaultValue=""+d)}function ja(s){var i=s.textContent;i===s._wrapperState.initialValue&&i!==""&&i!==null&&(s.value=i)}function _t(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Et(s,i){return s==null||s==="http://www.w3.org/1999/xhtml"?_t(i):s==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Dr,Da=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,l,d,g){MSApp.execUnsafeLocalFunction(function(){return s(i,l,d,g)})}:s}(function(s,i){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=i;else{for(Dr=Dr||document.createElement("div"),Dr.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Dr.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;i.firstChild;)s.appendChild(i.firstChild)}});function us(s,i){if(i){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=i;return}}s.textContent=i}var ai={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},li=["Webkit","ms","Moz","O"];Object.keys(ai).forEach(function(s){li.forEach(function(i){i=i+s.charAt(0).toUpperCase()+s.substring(1),ai[i]=ai[s]})});function Va(s,i,l){return i==null||typeof i=="boolean"||i===""?"":l||typeof i!="number"||i===0||ai.hasOwnProperty(s)&&ai[s]?(""+i).trim():i+"px"}function La(s,i){s=s.style;for(var l in i)if(i.hasOwnProperty(l)){var d=l.indexOf("--")===0,g=Va(l,i[l],d);l==="float"&&(l="cssFloat"),d?s.setProperty(l,g):s[l]=g}}var Oa=X({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ma(s,i){if(i){if(Oa[s]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Ua(s,i){if(s.indexOf("-")===-1)return typeof i.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ci=null;function ho(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var fo=null,Sn=null,cr=null;function po(s){if(s=cl(s)){if(typeof fo!="function")throw Error(t(280));var i=s.stateNode;i&&(i=Jc(i),fo(s.stateNode,s.type,i))}}function ur(s){Sn?cr?cr.push(s):cr=[s]:Sn=s}function Fa(){if(Sn){var s=Sn,i=cr;if(cr=Sn=null,po(s),i)for(s=0;s<i.length;s++)po(i[s])}}function ui(s,i){return s(i)}function Ba(){}var Vr=!1;function za(s,i,l){if(Vr)return s(i,l);Vr=!0;try{return ui(s,i,l)}finally{Vr=!1,(Sn!==null||cr!==null)&&(Ba(),Fa())}}function dt(s,i){var l=s.stateNode;if(l===null)return null;var d=Jc(l);if(d===null)return null;l=d[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(t(231,i,typeof l));return l}var mo=!1;if(h)try{var Fn={};Object.defineProperty(Fn,"passive",{get:function(){mo=!0}}),window.addEventListener("test",Fn,Fn),window.removeEventListener("test",Fn,Fn)}catch{mo=!1}function hi(s,i,l,d,g,v,T,k,M){var K=Array.prototype.slice.call(arguments,3);try{i.apply(l,K)}catch(te){this.onError(te)}}var di=!1,go=null,Bn=!1,$a=null,id={onError:function(s){di=!0,go=s}};function yo(s,i,l,d,g,v,T,k,M){di=!1,go=null,hi.apply(id,arguments)}function Tc(s,i,l,d,g,v,T,k,M){if(yo.apply(this,arguments),di){if(di){var K=go;di=!1,go=null}else throw Error(t(198));Bn||(Bn=!0,$a=K)}}function zn(s){var i=s,l=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(l=i.return),s=i.return;while(s)}return i.tag===3?l:null}function fi(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function $n(s){if(zn(s)!==s)throw Error(t(188))}function Sc(s){var i=s.alternate;if(!i){if(i=zn(s),i===null)throw Error(t(188));return i!==s?null:s}for(var l=s,d=i;;){var g=l.return;if(g===null)break;var v=g.alternate;if(v===null){if(d=g.return,d!==null){l=d;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===l)return $n(g),s;if(v===d)return $n(g),i;v=v.sibling}throw Error(t(188))}if(l.return!==d.return)l=g,d=v;else{for(var T=!1,k=g.child;k;){if(k===l){T=!0,l=g,d=v;break}if(k===d){T=!0,d=g,l=v;break}k=k.sibling}if(!T){for(k=v.child;k;){if(k===l){T=!0,l=v,d=g;break}if(k===d){T=!0,d=v,l=g;break}k=k.sibling}if(!T)throw Error(t(189))}}if(l.alternate!==d)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?s:i}function qa(s){return s=Sc(s),s!==null?vo(s):null}function vo(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var i=vo(s);if(i!==null)return i;s=s.sibling}return null}var wo=e.unstable_scheduleCallback,Ga=e.unstable_cancelCallback,Ic=e.unstable_shouldYield,od=e.unstable_requestPaint,Je=e.unstable_now,bc=e.unstable_getCurrentPriorityLevel,pi=e.unstable_ImmediatePriority,hs=e.unstable_UserBlockingPriority,In=e.unstable_NormalPriority,Ha=e.unstable_LowPriority,Pc=e.unstable_IdlePriority,mi=null,mn=null;function Ac(s){if(mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(mi,s,void 0,(s.current.flags&128)===128)}catch{}}var Jt=Math.clz32?Math.clz32:Nc,Wa=Math.log,kc=Math.LN2;function Nc(s){return s>>>=0,s===0?32:31-(Wa(s)/kc|0)|0}var xo=64,_o=4194304;function ds(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function gi(s,i){var l=s.pendingLanes;if(l===0)return 0;var d=0,g=s.suspendedLanes,v=s.pingedLanes,T=l&268435455;if(T!==0){var k=T&~g;k!==0?d=ds(k):(v&=T,v!==0&&(d=ds(v)))}else T=l&~g,T!==0?d=ds(T):v!==0&&(d=ds(v));if(d===0)return 0;if(i!==0&&i!==d&&(i&g)===0&&(g=d&-d,v=i&-i,g>=v||g===16&&(v&4194240)!==0))return i;if((d&4)!==0&&(d|=l&16),i=s.entangledLanes,i!==0)for(s=s.entanglements,i&=d;0<i;)l=31-Jt(i),g=1<<l,d|=s[l],i&=~g;return d}function ad(s,i){switch(s){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lr(s,i){for(var l=s.suspendedLanes,d=s.pingedLanes,g=s.expirationTimes,v=s.pendingLanes;0<v;){var T=31-Jt(v),k=1<<T,M=g[T];M===-1?((k&l)===0||(k&d)!==0)&&(g[T]=ad(k,i)):M<=i&&(s.expiredLanes|=k),v&=~k}}function gn(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function yi(){var s=xo;return xo<<=1,(xo&4194240)===0&&(xo=64),s}function fs(s){for(var i=[],l=0;31>l;l++)i.push(s);return i}function ps(s,i,l){s.pendingLanes|=i,i!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,i=31-Jt(i),s[i]=l}function Ye(s,i){var l=s.pendingLanes&~i;s.pendingLanes=i,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=i,s.mutableReadLanes&=i,s.entangledLanes&=i,i=s.entanglements;var d=s.eventTimes;for(s=s.expirationTimes;0<l;){var g=31-Jt(l),v=1<<g;i[g]=0,d[g]=-1,s[g]=-1,l&=~v}}function ms(s,i){var l=s.entangledLanes|=i;for(s=s.entanglements;l;){var d=31-Jt(l),g=1<<d;g&i|s[d]&i&&(s[d]|=i),l&=~g}}var Oe=0;function gs(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Cc,Eo,Rc,jc,Dc,Ka=!1,hr=[],Vt=null,qn=null,Gn=null,ys=new Map,bn=new Map,dr=[],ld="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vc(s,i){switch(s){case"focusin":case"focusout":Vt=null;break;case"dragenter":case"dragleave":qn=null;break;case"mouseover":case"mouseout":Gn=null;break;case"pointerover":case"pointerout":ys.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":bn.delete(i.pointerId)}}function rn(s,i,l,d,g,v){return s===null||s.nativeEvent!==v?(s={blockedOn:i,domEventName:l,eventSystemFlags:d,nativeEvent:v,targetContainers:[g]},i!==null&&(i=cl(i),i!==null&&Eo(i)),s):(s.eventSystemFlags|=d,i=s.targetContainers,g!==null&&i.indexOf(g)===-1&&i.push(g),s)}function cd(s,i,l,d,g){switch(i){case"focusin":return Vt=rn(Vt,s,i,l,d,g),!0;case"dragenter":return qn=rn(qn,s,i,l,d,g),!0;case"mouseover":return Gn=rn(Gn,s,i,l,d,g),!0;case"pointerover":var v=g.pointerId;return ys.set(v,rn(ys.get(v)||null,s,i,l,d,g)),!0;case"gotpointercapture":return v=g.pointerId,bn.set(v,rn(bn.get(v)||null,s,i,l,d,g)),!0}return!1}function Lc(s){var i=Ei(s.target);if(i!==null){var l=zn(i);if(l!==null){if(i=l.tag,i===13){if(i=fi(l),i!==null){s.blockedOn=i,Dc(s.priority,function(){Rc(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Or(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var l=To(s.domEventName,s.eventSystemFlags,i[0],s.nativeEvent);if(l===null){l=s.nativeEvent;var d=new l.constructor(l.type,l);ci=d,l.target.dispatchEvent(d),ci=null}else return i=cl(l),i!==null&&Eo(i),s.blockedOn=l,!1;i.shift()}return!0}function vi(s,i,l){Or(s)&&l.delete(i)}function Oc(){Ka=!1,Vt!==null&&Or(Vt)&&(Vt=null),qn!==null&&Or(qn)&&(qn=null),Gn!==null&&Or(Gn)&&(Gn=null),ys.forEach(vi),bn.forEach(vi)}function Hn(s,i){s.blockedOn===i&&(s.blockedOn=null,Ka||(Ka=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Oc)))}function Wn(s){function i(g){return Hn(g,s)}if(0<hr.length){Hn(hr[0],s);for(var l=1;l<hr.length;l++){var d=hr[l];d.blockedOn===s&&(d.blockedOn=null)}}for(Vt!==null&&Hn(Vt,s),qn!==null&&Hn(qn,s),Gn!==null&&Hn(Gn,s),ys.forEach(i),bn.forEach(i),l=0;l<dr.length;l++)d=dr[l],d.blockedOn===s&&(d.blockedOn=null);for(;0<dr.length&&(l=dr[0],l.blockedOn===null);)Lc(l),l.blockedOn===null&&dr.shift()}var Mr=Q.ReactCurrentBatchConfig,vs=!0;function rt(s,i,l,d){var g=Oe,v=Mr.transition;Mr.transition=null;try{Oe=1,Qa(s,i,l,d)}finally{Oe=g,Mr.transition=v}}function ud(s,i,l,d){var g=Oe,v=Mr.transition;Mr.transition=null;try{Oe=4,Qa(s,i,l,d)}finally{Oe=g,Mr.transition=v}}function Qa(s,i,l,d){if(vs){var g=To(s,i,l,d);if(g===null)_d(s,i,d,wi,l),Vc(s,d);else if(cd(g,s,i,l,d))d.stopPropagation();else if(Vc(s,d),i&4&&-1<ld.indexOf(s)){for(;g!==null;){var v=cl(g);if(v!==null&&Cc(v),v=To(s,i,l,d),v===null&&_d(s,i,d,wi,l),v===g)break;g=v}g!==null&&d.stopPropagation()}else _d(s,i,d,null,l)}}var wi=null;function To(s,i,l,d){if(wi=null,s=ho(d),s=Ei(s),s!==null)if(i=zn(s),i===null)s=null;else if(l=i.tag,l===13){if(s=fi(i),s!==null)return s;s=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null);return wi=s,null}function Ya(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bc()){case pi:return 1;case hs:return 4;case In:case Ha:return 16;case Pc:return 536870912;default:return 16}default:return 16}}var yn=null,So=null,sn=null;function Xa(){if(sn)return sn;var s,i=So,l=i.length,d,g="value"in yn?yn.value:yn.textContent,v=g.length;for(s=0;s<l&&i[s]===g[s];s++);var T=l-s;for(d=1;d<=T&&i[l-d]===g[v-d];d++);return sn=g.slice(s,1<d?1-d:void 0)}function Io(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function fr(){return!0}function Ja(){return!1}function Lt(s){function i(l,d,g,v,T){this._reactName=l,this._targetInst=g,this.type=d,this.nativeEvent=v,this.target=T,this.currentTarget=null;for(var k in s)s.hasOwnProperty(k)&&(l=s[k],this[k]=l?l(v):v[k]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?fr:Ja,this.isPropagationStopped=Ja,this}return X(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=fr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=fr)},persist:function(){},isPersistent:fr}),i}var Kn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bo=Lt(Kn),pr=X({},Kn,{view:0,detail:0}),hd=Lt(pr),Po,Ur,ws,xi=X({},pr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ws&&(ws&&s.type==="mousemove"?(Po=s.screenX-ws.screenX,Ur=s.screenY-ws.screenY):Ur=Po=0,ws=s),Po)},movementY:function(s){return"movementY"in s?s.movementY:Ur}}),Ao=Lt(xi),Za=X({},xi,{dataTransfer:0}),Mc=Lt(Za),ko=X({},pr,{relatedTarget:0}),No=Lt(ko),Uc=X({},Kn,{animationName:0,elapsedTime:0,pseudoElement:0}),Fr=Lt(Uc),Fc=X({},Kn,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Bc=Lt(Fc),zc=X({},Kn,{data:0}),el=Lt(zc),Co={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$c={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qc(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=$c[s])?!!i[s]:!1}function mr(){return qc}var u=X({},pr,{key:function(s){if(s.key){var i=Co[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=Io(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Zt[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mr,charCode:function(s){return s.type==="keypress"?Io(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Io(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),y=Lt(u),_=X({},xi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),S=Lt(_),q=X({},pr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mr}),Y=Lt(q),ce=X({},Kn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ke=Lt(ce),Tt=X({},xi,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Ue=Lt(Tt),kt=[9,13,27,32],yt=h&&"CompositionEvent"in window,Pn=null;h&&"documentMode"in document&&(Pn=document.documentMode);var vn=h&&"TextEvent"in window&&!Pn,_i=h&&(!yt||Pn&&8<Pn&&11>=Pn),Ro=" ",Ag=!1;function kg(s,i){switch(s){case"keyup":return kt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ng(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var jo=!1;function X1(s,i){switch(s){case"compositionend":return Ng(i);case"keypress":return i.which!==32?null:(Ag=!0,Ro);case"textInput":return s=i.data,s===Ro&&Ag?null:s;default:return null}}function J1(s,i){if(jo)return s==="compositionend"||!yt&&kg(s,i)?(s=Xa(),sn=So=yn=null,jo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return _i&&i.locale!=="ko"?null:i.data;default:return null}}var Z1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cg(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!Z1[s.type]:i==="textarea"}function Rg(s,i,l,d){ur(d),i=Qc(i,"onChange"),0<i.length&&(l=new bo("onChange","change",null,l,d),s.push({event:l,listeners:i}))}var tl=null,nl=null;function eS(s){Yg(s,0)}function Gc(s){var i=Mo(s);if(ii(i))return s}function tS(s,i){if(s==="change")return i}var jg=!1;if(h){var dd;if(h){var fd="oninput"in document;if(!fd){var Dg=document.createElement("div");Dg.setAttribute("oninput","return;"),fd=typeof Dg.oninput=="function"}dd=fd}else dd=!1;jg=dd&&(!document.documentMode||9<document.documentMode)}function Vg(){tl&&(tl.detachEvent("onpropertychange",Lg),nl=tl=null)}function Lg(s){if(s.propertyName==="value"&&Gc(nl)){var i=[];Rg(i,nl,s,ho(s)),za(eS,i)}}function nS(s,i,l){s==="focusin"?(Vg(),tl=i,nl=l,tl.attachEvent("onpropertychange",Lg)):s==="focusout"&&Vg()}function rS(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Gc(nl)}function sS(s,i){if(s==="click")return Gc(i)}function iS(s,i){if(s==="input"||s==="change")return Gc(i)}function oS(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var Qn=typeof Object.is=="function"?Object.is:oS;function rl(s,i){if(Qn(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var l=Object.keys(s),d=Object.keys(i);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var g=l[d];if(!p.call(i,g)||!Qn(s[g],i[g]))return!1}return!0}function Og(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Mg(s,i){var l=Og(s);s=0;for(var d;l;){if(l.nodeType===3){if(d=s+l.textContent.length,s<=i&&d>=i)return{node:l,offset:i-s};s=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Og(l)}}function Ug(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?Ug(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function Fg(){for(var s=window,i=cs();i instanceof s.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)s=i.contentWindow;else break;i=cs(s.document)}return i}function pd(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}function aS(s){var i=Fg(),l=s.focusedElem,d=s.selectionRange;if(i!==l&&l&&l.ownerDocument&&Ug(l.ownerDocument.documentElement,l)){if(d!==null&&pd(l)){if(i=d.start,s=d.end,s===void 0&&(s=i),"selectionStart"in l)l.selectionStart=i,l.selectionEnd=Math.min(s,l.value.length);else if(s=(i=l.ownerDocument||document)&&i.defaultView||window,s.getSelection){s=s.getSelection();var g=l.textContent.length,v=Math.min(d.start,g);d=d.end===void 0?v:Math.min(d.end,g),!s.extend&&v>d&&(g=d,d=v,v=g),g=Mg(l,v);var T=Mg(l,d);g&&T&&(s.rangeCount!==1||s.anchorNode!==g.node||s.anchorOffset!==g.offset||s.focusNode!==T.node||s.focusOffset!==T.offset)&&(i=i.createRange(),i.setStart(g.node,g.offset),s.removeAllRanges(),v>d?(s.addRange(i),s.extend(T.node,T.offset)):(i.setEnd(T.node,T.offset),s.addRange(i)))}}for(i=[],s=l;s=s.parentNode;)s.nodeType===1&&i.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<i.length;l++)s=i[l],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var lS=h&&"documentMode"in document&&11>=document.documentMode,Do=null,md=null,sl=null,gd=!1;function Bg(s,i,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;gd||Do==null||Do!==cs(d)||(d=Do,"selectionStart"in d&&pd(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),sl&&rl(sl,d)||(sl=d,d=Qc(md,"onSelect"),0<d.length&&(i=new bo("onSelect","select",null,i,l),s.push({event:i,listeners:d}),i.target=Do)))}function Hc(s,i){var l={};return l[s.toLowerCase()]=i.toLowerCase(),l["Webkit"+s]="webkit"+i,l["Moz"+s]="moz"+i,l}var Vo={animationend:Hc("Animation","AnimationEnd"),animationiteration:Hc("Animation","AnimationIteration"),animationstart:Hc("Animation","AnimationStart"),transitionend:Hc("Transition","TransitionEnd")},yd={},zg={};h&&(zg=document.createElement("div").style,"AnimationEvent"in window||(delete Vo.animationend.animation,delete Vo.animationiteration.animation,delete Vo.animationstart.animation),"TransitionEvent"in window||delete Vo.transitionend.transition);function Wc(s){if(yd[s])return yd[s];if(!Vo[s])return s;var i=Vo[s],l;for(l in i)if(i.hasOwnProperty(l)&&l in zg)return yd[s]=i[l];return s}var $g=Wc("animationend"),qg=Wc("animationiteration"),Gg=Wc("animationstart"),Hg=Wc("transitionend"),Wg=new Map,Kg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xs(s,i){Wg.set(s,i),a(i,[s])}for(var vd=0;vd<Kg.length;vd++){var wd=Kg[vd],cS=wd.toLowerCase(),uS=wd[0].toUpperCase()+wd.slice(1);xs(cS,"on"+uS)}xs($g,"onAnimationEnd"),xs(qg,"onAnimationIteration"),xs(Gg,"onAnimationStart"),xs("dblclick","onDoubleClick"),xs("focusin","onFocus"),xs("focusout","onBlur"),xs(Hg,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hS=new Set("cancel close invalid load scroll toggle".split(" ").concat(il));function Qg(s,i,l){var d=s.type||"unknown-event";s.currentTarget=l,Tc(d,i,void 0,s),s.currentTarget=null}function Yg(s,i){i=(i&4)!==0;for(var l=0;l<s.length;l++){var d=s[l],g=d.event;d=d.listeners;e:{var v=void 0;if(i)for(var T=d.length-1;0<=T;T--){var k=d[T],M=k.instance,K=k.currentTarget;if(k=k.listener,M!==v&&g.isPropagationStopped())break e;Qg(g,k,K),v=M}else for(T=0;T<d.length;T++){if(k=d[T],M=k.instance,K=k.currentTarget,k=k.listener,M!==v&&g.isPropagationStopped())break e;Qg(g,k,K),v=M}}}if(Bn)throw s=$a,Bn=!1,$a=null,s}function tt(s,i){var l=i[Pd];l===void 0&&(l=i[Pd]=new Set);var d=s+"__bubble";l.has(d)||(Xg(i,s,2,!1),l.add(d))}function xd(s,i,l){var d=0;i&&(d|=4),Xg(l,s,d,i)}var Kc="_reactListening"+Math.random().toString(36).slice(2);function ol(s){if(!s[Kc]){s[Kc]=!0,r.forEach(function(l){l!=="selectionchange"&&(hS.has(l)||xd(l,!1,s),xd(l,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[Kc]||(i[Kc]=!0,xd("selectionchange",!1,i))}}function Xg(s,i,l,d){switch(Ya(i)){case 1:var g=rt;break;case 4:g=ud;break;default:g=Qa}l=g.bind(null,i,l,s),g=void 0,!mo||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(g=!0),d?g!==void 0?s.addEventListener(i,l,{capture:!0,passive:g}):s.addEventListener(i,l,!0):g!==void 0?s.addEventListener(i,l,{passive:g}):s.addEventListener(i,l,!1)}function _d(s,i,l,d,g){var v=d;if((i&1)===0&&(i&2)===0&&d!==null)e:for(;;){if(d===null)return;var T=d.tag;if(T===3||T===4){var k=d.stateNode.containerInfo;if(k===g||k.nodeType===8&&k.parentNode===g)break;if(T===4)for(T=d.return;T!==null;){var M=T.tag;if((M===3||M===4)&&(M=T.stateNode.containerInfo,M===g||M.nodeType===8&&M.parentNode===g))return;T=T.return}for(;k!==null;){if(T=Ei(k),T===null)return;if(M=T.tag,M===5||M===6){d=v=T;continue e}k=k.parentNode}}d=d.return}za(function(){var K=v,te=ho(l),re=[];e:{var ee=Wg.get(s);if(ee!==void 0){var he=bo,pe=s;switch(s){case"keypress":if(Io(l)===0)break e;case"keydown":case"keyup":he=y;break;case"focusin":pe="focus",he=No;break;case"focusout":pe="blur",he=No;break;case"beforeblur":case"afterblur":he=No;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=Ao;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=Mc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=Y;break;case $g:case qg:case Gg:he=Fr;break;case Hg:he=Ke;break;case"scroll":he=hd;break;case"wheel":he=Ue;break;case"copy":case"cut":case"paste":he=Bc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=S}var me=(i&4)!==0,ft=!me&&s==="scroll",G=me?ee!==null?ee+"Capture":null:ee;me=[];for(var B=K,W;B!==null;){W=B;var ae=W.stateNode;if(W.tag===5&&ae!==null&&(W=ae,G!==null&&(ae=dt(B,G),ae!=null&&me.push(al(B,ae,W)))),ft)break;B=B.return}0<me.length&&(ee=new he(ee,pe,null,l,te),re.push({event:ee,listeners:me}))}}if((i&7)===0){e:{if(ee=s==="mouseover"||s==="pointerover",he=s==="mouseout"||s==="pointerout",ee&&l!==ci&&(pe=l.relatedTarget||l.fromElement)&&(Ei(pe)||pe[Br]))break e;if((he||ee)&&(ee=te.window===te?te:(ee=te.ownerDocument)?ee.defaultView||ee.parentWindow:window,he?(pe=l.relatedTarget||l.toElement,he=K,pe=pe?Ei(pe):null,pe!==null&&(ft=zn(pe),pe!==ft||pe.tag!==5&&pe.tag!==6)&&(pe=null)):(he=null,pe=K),he!==pe)){if(me=Ao,ae="onMouseLeave",G="onMouseEnter",B="mouse",(s==="pointerout"||s==="pointerover")&&(me=S,ae="onPointerLeave",G="onPointerEnter",B="pointer"),ft=he==null?ee:Mo(he),W=pe==null?ee:Mo(pe),ee=new me(ae,B+"leave",he,l,te),ee.target=ft,ee.relatedTarget=W,ae=null,Ei(te)===K&&(me=new me(G,B+"enter",pe,l,te),me.target=W,me.relatedTarget=ft,ae=me),ft=ae,he&&pe)t:{for(me=he,G=pe,B=0,W=me;W;W=Lo(W))B++;for(W=0,ae=G;ae;ae=Lo(ae))W++;for(;0<B-W;)me=Lo(me),B--;for(;0<W-B;)G=Lo(G),W--;for(;B--;){if(me===G||G!==null&&me===G.alternate)break t;me=Lo(me),G=Lo(G)}me=null}else me=null;he!==null&&Jg(re,ee,he,me,!1),pe!==null&&ft!==null&&Jg(re,ft,pe,me,!0)}}e:{if(ee=K?Mo(K):window,he=ee.nodeName&&ee.nodeName.toLowerCase(),he==="select"||he==="input"&&ee.type==="file")var ye=tS;else if(Cg(ee))if(jg)ye=iS;else{ye=rS;var we=nS}else(he=ee.nodeName)&&he.toLowerCase()==="input"&&(ee.type==="checkbox"||ee.type==="radio")&&(ye=sS);if(ye&&(ye=ye(s,K))){Rg(re,ye,l,te);break e}we&&we(s,ee,K),s==="focusout"&&(we=ee._wrapperState)&&we.controlled&&ee.type==="number"&&lo(ee,"number",ee.value)}switch(we=K?Mo(K):window,s){case"focusin":(Cg(we)||we.contentEditable==="true")&&(Do=we,md=K,sl=null);break;case"focusout":sl=md=Do=null;break;case"mousedown":gd=!0;break;case"contextmenu":case"mouseup":case"dragend":gd=!1,Bg(re,l,te);break;case"selectionchange":if(lS)break;case"keydown":case"keyup":Bg(re,l,te)}var xe;if(yt)e:{switch(s){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else jo?kg(s,l)&&(Ie="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Ie="onCompositionStart");Ie&&(_i&&l.locale!=="ko"&&(jo||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&jo&&(xe=Xa()):(yn=te,So="value"in yn?yn.value:yn.textContent,jo=!0)),we=Qc(K,Ie),0<we.length&&(Ie=new el(Ie,s,null,l,te),re.push({event:Ie,listeners:we}),xe?Ie.data=xe:(xe=Ng(l),xe!==null&&(Ie.data=xe)))),(xe=vn?X1(s,l):J1(s,l))&&(K=Qc(K,"onBeforeInput"),0<K.length&&(te=new el("onBeforeInput","beforeinput",null,l,te),re.push({event:te,listeners:K}),te.data=xe))}Yg(re,i)})}function al(s,i,l){return{instance:s,listener:i,currentTarget:l}}function Qc(s,i){for(var l=i+"Capture",d=[];s!==null;){var g=s,v=g.stateNode;g.tag===5&&v!==null&&(g=v,v=dt(s,l),v!=null&&d.unshift(al(s,v,g)),v=dt(s,i),v!=null&&d.push(al(s,v,g))),s=s.return}return d}function Lo(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Jg(s,i,l,d,g){for(var v=i._reactName,T=[];l!==null&&l!==d;){var k=l,M=k.alternate,K=k.stateNode;if(M!==null&&M===d)break;k.tag===5&&K!==null&&(k=K,g?(M=dt(l,v),M!=null&&T.unshift(al(l,M,k))):g||(M=dt(l,v),M!=null&&T.push(al(l,M,k)))),l=l.return}T.length!==0&&s.push({event:i,listeners:T})}var dS=/\r\n?/g,fS=/\u0000|\uFFFD/g;function Zg(s){return(typeof s=="string"?s:""+s).replace(dS,`
`).replace(fS,"")}function Yc(s,i,l){if(i=Zg(i),Zg(s)!==i&&l)throw Error(t(425))}function Xc(){}var Ed=null,Td=null;function Sd(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Id=typeof setTimeout=="function"?setTimeout:void 0,pS=typeof clearTimeout=="function"?clearTimeout:void 0,ey=typeof Promise=="function"?Promise:void 0,mS=typeof queueMicrotask=="function"?queueMicrotask:typeof ey<"u"?function(s){return ey.resolve(null).then(s).catch(gS)}:Id;function gS(s){setTimeout(function(){throw s})}function bd(s,i){var l=i,d=0;do{var g=l.nextSibling;if(s.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"){if(d===0){s.removeChild(g),Wn(i);return}d--}else l!=="$"&&l!=="$?"&&l!=="$!"||d++;l=g}while(l);Wn(i)}function _s(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return s}function ty(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return s;i--}else l==="/$"&&i++}s=s.previousSibling}return null}var Oo=Math.random().toString(36).slice(2),gr="__reactFiber$"+Oo,ll="__reactProps$"+Oo,Br="__reactContainer$"+Oo,Pd="__reactEvents$"+Oo,yS="__reactListeners$"+Oo,vS="__reactHandles$"+Oo;function Ei(s){var i=s[gr];if(i)return i;for(var l=s.parentNode;l;){if(i=l[Br]||l[gr]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(s=ty(s);s!==null;){if(l=s[gr])return l;s=ty(s)}return i}s=l,l=s.parentNode}return null}function cl(s){return s=s[gr]||s[Br],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Mo(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function Jc(s){return s[ll]||null}var Ad=[],Uo=-1;function Es(s){return{current:s}}function nt(s){0>Uo||(s.current=Ad[Uo],Ad[Uo]=null,Uo--)}function Ze(s,i){Uo++,Ad[Uo]=s.current,s.current=i}var Ts={},$t=Es(Ts),on=Es(!1),Ti=Ts;function Fo(s,i){var l=s.type.contextTypes;if(!l)return Ts;var d=s.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===i)return d.__reactInternalMemoizedMaskedChildContext;var g={},v;for(v in l)g[v]=i[v];return d&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=i,s.__reactInternalMemoizedMaskedChildContext=g),g}function an(s){return s=s.childContextTypes,s!=null}function Zc(){nt(on),nt($t)}function ny(s,i,l){if($t.current!==Ts)throw Error(t(168));Ze($t,i),Ze(on,l)}function ry(s,i,l){var d=s.stateNode;if(i=i.childContextTypes,typeof d.getChildContext!="function")return l;d=d.getChildContext();for(var g in d)if(!(g in i))throw Error(t(108,je(s)||"Unknown",g));return X({},l,d)}function eu(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Ts,Ti=$t.current,Ze($t,s),Ze(on,on.current),!0}function sy(s,i,l){var d=s.stateNode;if(!d)throw Error(t(169));l?(s=ry(s,i,Ti),d.__reactInternalMemoizedMergedChildContext=s,nt(on),nt($t),Ze($t,s)):nt(on),Ze(on,l)}var zr=null,tu=!1,kd=!1;function iy(s){zr===null?zr=[s]:zr.push(s)}function wS(s){tu=!0,iy(s)}function Ss(){if(!kd&&zr!==null){kd=!0;var s=0,i=Oe;try{var l=zr;for(Oe=1;s<l.length;s++){var d=l[s];do d=d(!0);while(d!==null)}zr=null,tu=!1}catch(g){throw zr!==null&&(zr=zr.slice(s+1)),wo(pi,Ss),g}finally{Oe=i,kd=!1}}return null}var Bo=[],zo=0,nu=null,ru=0,An=[],kn=0,Si=null,$r=1,qr="";function Ii(s,i){Bo[zo++]=ru,Bo[zo++]=nu,nu=s,ru=i}function oy(s,i,l){An[kn++]=$r,An[kn++]=qr,An[kn++]=Si,Si=s;var d=$r;s=qr;var g=32-Jt(d)-1;d&=~(1<<g),l+=1;var v=32-Jt(i)+g;if(30<v){var T=g-g%5;v=(d&(1<<T)-1).toString(32),d>>=T,g-=T,$r=1<<32-Jt(i)+g|l<<g|d,qr=v+s}else $r=1<<v|l<<g|d,qr=s}function Nd(s){s.return!==null&&(Ii(s,1),oy(s,1,0))}function Cd(s){for(;s===nu;)nu=Bo[--zo],Bo[zo]=null,ru=Bo[--zo],Bo[zo]=null;for(;s===Si;)Si=An[--kn],An[kn]=null,qr=An[--kn],An[kn]=null,$r=An[--kn],An[kn]=null}var wn=null,xn=null,st=!1,Yn=null;function ay(s,i){var l=jn(5,null,null,0);l.elementType="DELETED",l.stateNode=i,l.return=s,i=s.deletions,i===null?(s.deletions=[l],s.flags|=16):i.push(l)}function ly(s,i){switch(s.tag){case 5:var l=s.type;return i=i.nodeType!==1||l.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(s.stateNode=i,wn=s,xn=_s(i.firstChild),!0):!1;case 6:return i=s.pendingProps===""||i.nodeType!==3?null:i,i!==null?(s.stateNode=i,wn=s,xn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(l=Si!==null?{id:$r,overflow:qr}:null,s.memoizedState={dehydrated:i,treeContext:l,retryLane:1073741824},l=jn(18,null,null,0),l.stateNode=i,l.return=s,s.child=l,wn=s,xn=null,!0):!1;default:return!1}}function Rd(s){return(s.mode&1)!==0&&(s.flags&128)===0}function jd(s){if(st){var i=xn;if(i){var l=i;if(!ly(s,i)){if(Rd(s))throw Error(t(418));i=_s(l.nextSibling);var d=wn;i&&ly(s,i)?ay(d,l):(s.flags=s.flags&-4097|2,st=!1,wn=s)}}else{if(Rd(s))throw Error(t(418));s.flags=s.flags&-4097|2,st=!1,wn=s}}}function cy(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;wn=s}function su(s){if(s!==wn)return!1;if(!st)return cy(s),st=!0,!1;var i;if((i=s.tag!==3)&&!(i=s.tag!==5)&&(i=s.type,i=i!=="head"&&i!=="body"&&!Sd(s.type,s.memoizedProps)),i&&(i=xn)){if(Rd(s))throw uy(),Error(t(418));for(;i;)ay(s,i),i=_s(i.nextSibling)}if(cy(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,i=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"){if(i===0){xn=_s(s.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++}s=s.nextSibling}xn=null}}else xn=wn?_s(s.stateNode.nextSibling):null;return!0}function uy(){for(var s=xn;s;)s=_s(s.nextSibling)}function $o(){xn=wn=null,st=!1}function Dd(s){Yn===null?Yn=[s]:Yn.push(s)}var xS=Q.ReactCurrentBatchConfig;function ul(s,i,l){if(s=l.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var d=l.stateNode}if(!d)throw Error(t(147,s));var g=d,v=""+s;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===v?i.ref:(i=function(T){var k=g.refs;T===null?delete k[v]:k[v]=T},i._stringRef=v,i)}if(typeof s!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,s))}return s}function iu(s,i){throw s=Object.prototype.toString.call(i),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s))}function hy(s){var i=s._init;return i(s._payload)}function dy(s){function i(G,B){if(s){var W=G.deletions;W===null?(G.deletions=[B],G.flags|=16):W.push(B)}}function l(G,B){if(!s)return null;for(;B!==null;)i(G,B),B=B.sibling;return null}function d(G,B){for(G=new Map;B!==null;)B.key!==null?G.set(B.key,B):G.set(B.index,B),B=B.sibling;return G}function g(G,B){return G=Rs(G,B),G.index=0,G.sibling=null,G}function v(G,B,W){return G.index=W,s?(W=G.alternate,W!==null?(W=W.index,W<B?(G.flags|=2,B):W):(G.flags|=2,B)):(G.flags|=1048576,B)}function T(G){return s&&G.alternate===null&&(G.flags|=2),G}function k(G,B,W,ae){return B===null||B.tag!==6?(B=bf(W,G.mode,ae),B.return=G,B):(B=g(B,W),B.return=G,B)}function M(G,B,W,ae){var ye=W.type;return ye===C?te(G,B,W.props.children,ae,W.key):B!==null&&(B.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Re&&hy(ye)===B.type)?(ae=g(B,W.props),ae.ref=ul(G,B,W),ae.return=G,ae):(ae=ku(W.type,W.key,W.props,null,G.mode,ae),ae.ref=ul(G,B,W),ae.return=G,ae)}function K(G,B,W,ae){return B===null||B.tag!==4||B.stateNode.containerInfo!==W.containerInfo||B.stateNode.implementation!==W.implementation?(B=Pf(W,G.mode,ae),B.return=G,B):(B=g(B,W.children||[]),B.return=G,B)}function te(G,B,W,ae,ye){return B===null||B.tag!==7?(B=ji(W,G.mode,ae,ye),B.return=G,B):(B=g(B,W),B.return=G,B)}function re(G,B,W){if(typeof B=="string"&&B!==""||typeof B=="number")return B=bf(""+B,G.mode,W),B.return=G,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Z:return W=ku(B.type,B.key,B.props,null,G.mode,W),W.ref=ul(G,null,B),W.return=G,W;case ie:return B=Pf(B,G.mode,W),B.return=G,B;case Re:var ae=B._init;return re(G,ae(B._payload),W)}if(Rr(B)||$(B))return B=ji(B,G.mode,W,null),B.return=G,B;iu(G,B)}return null}function ee(G,B,W,ae){var ye=B!==null?B.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return ye!==null?null:k(G,B,""+W,ae);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case Z:return W.key===ye?M(G,B,W,ae):null;case ie:return W.key===ye?K(G,B,W,ae):null;case Re:return ye=W._init,ee(G,B,ye(W._payload),ae)}if(Rr(W)||$(W))return ye!==null?null:te(G,B,W,ae,null);iu(G,W)}return null}function he(G,B,W,ae,ye){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return G=G.get(W)||null,k(B,G,""+ae,ye);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case Z:return G=G.get(ae.key===null?W:ae.key)||null,M(B,G,ae,ye);case ie:return G=G.get(ae.key===null?W:ae.key)||null,K(B,G,ae,ye);case Re:var we=ae._init;return he(G,B,W,we(ae._payload),ye)}if(Rr(ae)||$(ae))return G=G.get(W)||null,te(B,G,ae,ye,null);iu(B,ae)}return null}function pe(G,B,W,ae){for(var ye=null,we=null,xe=B,Ie=B=0,Rt=null;xe!==null&&Ie<W.length;Ie++){xe.index>Ie?(Rt=xe,xe=null):Rt=xe.sibling;var qe=ee(G,xe,W[Ie],ae);if(qe===null){xe===null&&(xe=Rt);break}s&&xe&&qe.alternate===null&&i(G,xe),B=v(qe,B,Ie),we===null?ye=qe:we.sibling=qe,we=qe,xe=Rt}if(Ie===W.length)return l(G,xe),st&&Ii(G,Ie),ye;if(xe===null){for(;Ie<W.length;Ie++)xe=re(G,W[Ie],ae),xe!==null&&(B=v(xe,B,Ie),we===null?ye=xe:we.sibling=xe,we=xe);return st&&Ii(G,Ie),ye}for(xe=d(G,xe);Ie<W.length;Ie++)Rt=he(xe,G,Ie,W[Ie],ae),Rt!==null&&(s&&Rt.alternate!==null&&xe.delete(Rt.key===null?Ie:Rt.key),B=v(Rt,B,Ie),we===null?ye=Rt:we.sibling=Rt,we=Rt);return s&&xe.forEach(function(js){return i(G,js)}),st&&Ii(G,Ie),ye}function me(G,B,W,ae){var ye=$(W);if(typeof ye!="function")throw Error(t(150));if(W=ye.call(W),W==null)throw Error(t(151));for(var we=ye=null,xe=B,Ie=B=0,Rt=null,qe=W.next();xe!==null&&!qe.done;Ie++,qe=W.next()){xe.index>Ie?(Rt=xe,xe=null):Rt=xe.sibling;var js=ee(G,xe,qe.value,ae);if(js===null){xe===null&&(xe=Rt);break}s&&xe&&js.alternate===null&&i(G,xe),B=v(js,B,Ie),we===null?ye=js:we.sibling=js,we=js,xe=Rt}if(qe.done)return l(G,xe),st&&Ii(G,Ie),ye;if(xe===null){for(;!qe.done;Ie++,qe=W.next())qe=re(G,qe.value,ae),qe!==null&&(B=v(qe,B,Ie),we===null?ye=qe:we.sibling=qe,we=qe);return st&&Ii(G,Ie),ye}for(xe=d(G,xe);!qe.done;Ie++,qe=W.next())qe=he(xe,G,Ie,qe.value,ae),qe!==null&&(s&&qe.alternate!==null&&xe.delete(qe.key===null?Ie:qe.key),B=v(qe,B,Ie),we===null?ye=qe:we.sibling=qe,we=qe);return s&&xe.forEach(function(ZS){return i(G,ZS)}),st&&Ii(G,Ie),ye}function ft(G,B,W,ae){if(typeof W=="object"&&W!==null&&W.type===C&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case Z:e:{for(var ye=W.key,we=B;we!==null;){if(we.key===ye){if(ye=W.type,ye===C){if(we.tag===7){l(G,we.sibling),B=g(we,W.props.children),B.return=G,G=B;break e}}else if(we.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Re&&hy(ye)===we.type){l(G,we.sibling),B=g(we,W.props),B.ref=ul(G,we,W),B.return=G,G=B;break e}l(G,we);break}else i(G,we);we=we.sibling}W.type===C?(B=ji(W.props.children,G.mode,ae,W.key),B.return=G,G=B):(ae=ku(W.type,W.key,W.props,null,G.mode,ae),ae.ref=ul(G,B,W),ae.return=G,G=ae)}return T(G);case ie:e:{for(we=W.key;B!==null;){if(B.key===we)if(B.tag===4&&B.stateNode.containerInfo===W.containerInfo&&B.stateNode.implementation===W.implementation){l(G,B.sibling),B=g(B,W.children||[]),B.return=G,G=B;break e}else{l(G,B);break}else i(G,B);B=B.sibling}B=Pf(W,G.mode,ae),B.return=G,G=B}return T(G);case Re:return we=W._init,ft(G,B,we(W._payload),ae)}if(Rr(W))return pe(G,B,W,ae);if($(W))return me(G,B,W,ae);iu(G,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,B!==null&&B.tag===6?(l(G,B.sibling),B=g(B,W),B.return=G,G=B):(l(G,B),B=bf(W,G.mode,ae),B.return=G,G=B),T(G)):l(G,B)}return ft}var qo=dy(!0),fy=dy(!1),ou=Es(null),au=null,Go=null,Vd=null;function Ld(){Vd=Go=au=null}function Od(s){var i=ou.current;nt(ou),s._currentValue=i}function Md(s,i,l){for(;s!==null;){var d=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),s===l)break;s=s.return}}function Ho(s,i){au=s,Vd=Go=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&i)!==0&&(ln=!0),s.firstContext=null)}function Nn(s){var i=s._currentValue;if(Vd!==s)if(s={context:s,memoizedValue:i,next:null},Go===null){if(au===null)throw Error(t(308));Go=s,au.dependencies={lanes:0,firstContext:s}}else Go=Go.next=s;return i}var bi=null;function Ud(s){bi===null?bi=[s]:bi.push(s)}function py(s,i,l,d){var g=i.interleaved;return g===null?(l.next=l,Ud(i)):(l.next=g.next,g.next=l),i.interleaved=l,Gr(s,d)}function Gr(s,i){s.lanes|=i;var l=s.alternate;for(l!==null&&(l.lanes|=i),l=s,s=s.return;s!==null;)s.childLanes|=i,l=s.alternate,l!==null&&(l.childLanes|=i),l=s,s=s.return;return l.tag===3?l.stateNode:null}var Is=!1;function Fd(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function my(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Hr(s,i){return{eventTime:s,lane:i,tag:0,payload:null,callback:null,next:null}}function bs(s,i,l){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,(ze&2)!==0){var g=d.pending;return g===null?i.next=i:(i.next=g.next,g.next=i),d.pending=i,Gr(s,l)}return g=d.interleaved,g===null?(i.next=i,Ud(d)):(i.next=g.next,g.next=i),d.interleaved=i,Gr(s,l)}function lu(s,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194240)!==0)){var d=i.lanes;d&=s.pendingLanes,l|=d,i.lanes=l,ms(s,l)}}function gy(s,i){var l=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var g=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var T={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};v===null?g=v=T:v=v.next=T,l=l.next}while(l!==null);v===null?g=v=i:v=v.next=i}else g=v=i;l={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:d.shared,effects:d.effects},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=i:s.next=i,l.lastBaseUpdate=i}function cu(s,i,l,d){var g=s.updateQueue;Is=!1;var v=g.firstBaseUpdate,T=g.lastBaseUpdate,k=g.shared.pending;if(k!==null){g.shared.pending=null;var M=k,K=M.next;M.next=null,T===null?v=K:T.next=K,T=M;var te=s.alternate;te!==null&&(te=te.updateQueue,k=te.lastBaseUpdate,k!==T&&(k===null?te.firstBaseUpdate=K:k.next=K,te.lastBaseUpdate=M))}if(v!==null){var re=g.baseState;T=0,te=K=M=null,k=v;do{var ee=k.lane,he=k.eventTime;if((d&ee)===ee){te!==null&&(te=te.next={eventTime:he,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var pe=s,me=k;switch(ee=i,he=l,me.tag){case 1:if(pe=me.payload,typeof pe=="function"){re=pe.call(he,re,ee);break e}re=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=me.payload,ee=typeof pe=="function"?pe.call(he,re,ee):pe,ee==null)break e;re=X({},re,ee);break e;case 2:Is=!0}}k.callback!==null&&k.lane!==0&&(s.flags|=64,ee=g.effects,ee===null?g.effects=[k]:ee.push(k))}else he={eventTime:he,lane:ee,tag:k.tag,payload:k.payload,callback:k.callback,next:null},te===null?(K=te=he,M=re):te=te.next=he,T|=ee;if(k=k.next,k===null){if(k=g.shared.pending,k===null)break;ee=k,k=ee.next,ee.next=null,g.lastBaseUpdate=ee,g.shared.pending=null}}while(!0);if(te===null&&(M=re),g.baseState=M,g.firstBaseUpdate=K,g.lastBaseUpdate=te,i=g.shared.interleaved,i!==null){g=i;do T|=g.lane,g=g.next;while(g!==i)}else v===null&&(g.shared.lanes=0);ki|=T,s.lanes=T,s.memoizedState=re}}function yy(s,i,l){if(s=i.effects,i.effects=null,s!==null)for(i=0;i<s.length;i++){var d=s[i],g=d.callback;if(g!==null){if(d.callback=null,d=l,typeof g!="function")throw Error(t(191,g));g.call(d)}}}var hl={},yr=Es(hl),dl=Es(hl),fl=Es(hl);function Pi(s){if(s===hl)throw Error(t(174));return s}function Bd(s,i){switch(Ze(fl,i),Ze(dl,s),Ze(yr,hl),s=i.nodeType,s){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Et(null,"");break;default:s=s===8?i.parentNode:i,i=s.namespaceURI||null,s=s.tagName,i=Et(i,s)}nt(yr),Ze(yr,i)}function Wo(){nt(yr),nt(dl),nt(fl)}function vy(s){Pi(fl.current);var i=Pi(yr.current),l=Et(i,s.type);i!==l&&(Ze(dl,s),Ze(yr,l))}function zd(s){dl.current===s&&(nt(yr),nt(dl))}var ot=Es(0);function uu(s){for(var i=s;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var $d=[];function qd(){for(var s=0;s<$d.length;s++)$d[s]._workInProgressVersionPrimary=null;$d.length=0}var hu=Q.ReactCurrentDispatcher,Gd=Q.ReactCurrentBatchConfig,Ai=0,at=null,St=null,Nt=null,du=!1,pl=!1,ml=0,_S=0;function qt(){throw Error(t(321))}function Hd(s,i){if(i===null)return!1;for(var l=0;l<i.length&&l<s.length;l++)if(!Qn(s[l],i[l]))return!1;return!0}function Wd(s,i,l,d,g,v){if(Ai=v,at=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,hu.current=s===null||s.memoizedState===null?IS:bS,s=l(d,g),pl){v=0;do{if(pl=!1,ml=0,25<=v)throw Error(t(301));v+=1,Nt=St=null,i.updateQueue=null,hu.current=PS,s=l(d,g)}while(pl)}if(hu.current=mu,i=St!==null&&St.next!==null,Ai=0,Nt=St=at=null,du=!1,i)throw Error(t(300));return s}function Kd(){var s=ml!==0;return ml=0,s}function vr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?at.memoizedState=Nt=s:Nt=Nt.next=s,Nt}function Cn(){if(St===null){var s=at.alternate;s=s!==null?s.memoizedState:null}else s=St.next;var i=Nt===null?at.memoizedState:Nt.next;if(i!==null)Nt=i,St=s;else{if(s===null)throw Error(t(310));St=s,s={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},Nt===null?at.memoizedState=Nt=s:Nt=Nt.next=s}return Nt}function gl(s,i){return typeof i=="function"?i(s):i}function Qd(s){var i=Cn(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=s;var d=St,g=d.baseQueue,v=l.pending;if(v!==null){if(g!==null){var T=g.next;g.next=v.next,v.next=T}d.baseQueue=g=v,l.pending=null}if(g!==null){v=g.next,d=d.baseState;var k=T=null,M=null,K=v;do{var te=K.lane;if((Ai&te)===te)M!==null&&(M=M.next={lane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),d=K.hasEagerState?K.eagerState:s(d,K.action);else{var re={lane:te,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null};M===null?(k=M=re,T=d):M=M.next=re,at.lanes|=te,ki|=te}K=K.next}while(K!==null&&K!==v);M===null?T=d:M.next=k,Qn(d,i.memoizedState)||(ln=!0),i.memoizedState=d,i.baseState=T,i.baseQueue=M,l.lastRenderedState=d}if(s=l.interleaved,s!==null){g=s;do v=g.lane,at.lanes|=v,ki|=v,g=g.next;while(g!==s)}else g===null&&(l.lanes=0);return[i.memoizedState,l.dispatch]}function Yd(s){var i=Cn(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=s;var d=l.dispatch,g=l.pending,v=i.memoizedState;if(g!==null){l.pending=null;var T=g=g.next;do v=s(v,T.action),T=T.next;while(T!==g);Qn(v,i.memoizedState)||(ln=!0),i.memoizedState=v,i.baseQueue===null&&(i.baseState=v),l.lastRenderedState=v}return[v,d]}function wy(){}function xy(s,i){var l=at,d=Cn(),g=i(),v=!Qn(d.memoizedState,g);if(v&&(d.memoizedState=g,ln=!0),d=d.queue,Xd(Ty.bind(null,l,d,s),[s]),d.getSnapshot!==i||v||Nt!==null&&Nt.memoizedState.tag&1){if(l.flags|=2048,yl(9,Ey.bind(null,l,d,g,i),void 0,null),Ct===null)throw Error(t(349));(Ai&30)!==0||_y(l,i,g)}return g}function _y(s,i,l){s.flags|=16384,s={getSnapshot:i,value:l},i=at.updateQueue,i===null?(i={lastEffect:null,stores:null},at.updateQueue=i,i.stores=[s]):(l=i.stores,l===null?i.stores=[s]:l.push(s))}function Ey(s,i,l,d){i.value=l,i.getSnapshot=d,Sy(i)&&Iy(s)}function Ty(s,i,l){return l(function(){Sy(i)&&Iy(s)})}function Sy(s){var i=s.getSnapshot;s=s.value;try{var l=i();return!Qn(s,l)}catch{return!0}}function Iy(s){var i=Gr(s,1);i!==null&&er(i,s,1,-1)}function by(s){var i=vr();return typeof s=="function"&&(s=s()),i.memoizedState=i.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gl,lastRenderedState:s},i.queue=s,s=s.dispatch=SS.bind(null,at,s),[i.memoizedState,s]}function yl(s,i,l,d){return s={tag:s,create:i,destroy:l,deps:d,next:null},i=at.updateQueue,i===null?(i={lastEffect:null,stores:null},at.updateQueue=i,i.lastEffect=s.next=s):(l=i.lastEffect,l===null?i.lastEffect=s.next=s:(d=l.next,l.next=s,s.next=d,i.lastEffect=s)),s}function Py(){return Cn().memoizedState}function fu(s,i,l,d){var g=vr();at.flags|=s,g.memoizedState=yl(1|i,l,void 0,d===void 0?null:d)}function pu(s,i,l,d){var g=Cn();d=d===void 0?null:d;var v=void 0;if(St!==null){var T=St.memoizedState;if(v=T.destroy,d!==null&&Hd(d,T.deps)){g.memoizedState=yl(i,l,v,d);return}}at.flags|=s,g.memoizedState=yl(1|i,l,v,d)}function Ay(s,i){return fu(8390656,8,s,i)}function Xd(s,i){return pu(2048,8,s,i)}function ky(s,i){return pu(4,2,s,i)}function Ny(s,i){return pu(4,4,s,i)}function Cy(s,i){if(typeof i=="function")return s=s(),i(s),function(){i(null)};if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function Ry(s,i,l){return l=l!=null?l.concat([s]):null,pu(4,4,Cy.bind(null,i,s),l)}function Jd(){}function jy(s,i){var l=Cn();i=i===void 0?null:i;var d=l.memoizedState;return d!==null&&i!==null&&Hd(i,d[1])?d[0]:(l.memoizedState=[s,i],s)}function Dy(s,i){var l=Cn();i=i===void 0?null:i;var d=l.memoizedState;return d!==null&&i!==null&&Hd(i,d[1])?d[0]:(s=s(),l.memoizedState=[s,i],s)}function Vy(s,i,l){return(Ai&21)===0?(s.baseState&&(s.baseState=!1,ln=!0),s.memoizedState=l):(Qn(l,i)||(l=yi(),at.lanes|=l,ki|=l,s.baseState=!0),i)}function ES(s,i){var l=Oe;Oe=l!==0&&4>l?l:4,s(!0);var d=Gd.transition;Gd.transition={};try{s(!1),i()}finally{Oe=l,Gd.transition=d}}function Ly(){return Cn().memoizedState}function TS(s,i,l){var d=Ns(s);if(l={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null},Oy(s))My(i,l);else if(l=py(s,i,l,d),l!==null){var g=tn();er(l,s,d,g),Uy(l,i,d)}}function SS(s,i,l){var d=Ns(s),g={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null};if(Oy(s))My(i,g);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=i.lastRenderedReducer,v!==null))try{var T=i.lastRenderedState,k=v(T,l);if(g.hasEagerState=!0,g.eagerState=k,Qn(k,T)){var M=i.interleaved;M===null?(g.next=g,Ud(i)):(g.next=M.next,M.next=g),i.interleaved=g;return}}catch{}finally{}l=py(s,i,g,d),l!==null&&(g=tn(),er(l,s,d,g),Uy(l,i,d))}}function Oy(s){var i=s.alternate;return s===at||i!==null&&i===at}function My(s,i){pl=du=!0;var l=s.pending;l===null?i.next=i:(i.next=l.next,l.next=i),s.pending=i}function Uy(s,i,l){if((l&4194240)!==0){var d=i.lanes;d&=s.pendingLanes,l|=d,i.lanes=l,ms(s,l)}}var mu={readContext:Nn,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useInsertionEffect:qt,useLayoutEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useMutableSource:qt,useSyncExternalStore:qt,useId:qt,unstable_isNewReconciler:!1},IS={readContext:Nn,useCallback:function(s,i){return vr().memoizedState=[s,i===void 0?null:i],s},useContext:Nn,useEffect:Ay,useImperativeHandle:function(s,i,l){return l=l!=null?l.concat([s]):null,fu(4194308,4,Cy.bind(null,i,s),l)},useLayoutEffect:function(s,i){return fu(4194308,4,s,i)},useInsertionEffect:function(s,i){return fu(4,2,s,i)},useMemo:function(s,i){var l=vr();return i=i===void 0?null:i,s=s(),l.memoizedState=[s,i],s},useReducer:function(s,i,l){var d=vr();return i=l!==void 0?l(i):i,d.memoizedState=d.baseState=i,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:i},d.queue=s,s=s.dispatch=TS.bind(null,at,s),[d.memoizedState,s]},useRef:function(s){var i=vr();return s={current:s},i.memoizedState=s},useState:by,useDebugValue:Jd,useDeferredValue:function(s){return vr().memoizedState=s},useTransition:function(){var s=by(!1),i=s[0];return s=ES.bind(null,s[1]),vr().memoizedState=s,[i,s]},useMutableSource:function(){},useSyncExternalStore:function(s,i,l){var d=at,g=vr();if(st){if(l===void 0)throw Error(t(407));l=l()}else{if(l=i(),Ct===null)throw Error(t(349));(Ai&30)!==0||_y(d,i,l)}g.memoizedState=l;var v={value:l,getSnapshot:i};return g.queue=v,Ay(Ty.bind(null,d,v,s),[s]),d.flags|=2048,yl(9,Ey.bind(null,d,v,l,i),void 0,null),l},useId:function(){var s=vr(),i=Ct.identifierPrefix;if(st){var l=qr,d=$r;l=(d&~(1<<32-Jt(d)-1)).toString(32)+l,i=":"+i+"R"+l,l=ml++,0<l&&(i+="H"+l.toString(32)),i+=":"}else l=_S++,i=":"+i+"r"+l.toString(32)+":";return s.memoizedState=i},unstable_isNewReconciler:!1},bS={readContext:Nn,useCallback:jy,useContext:Nn,useEffect:Xd,useImperativeHandle:Ry,useInsertionEffect:ky,useLayoutEffect:Ny,useMemo:Dy,useReducer:Qd,useRef:Py,useState:function(){return Qd(gl)},useDebugValue:Jd,useDeferredValue:function(s){var i=Cn();return Vy(i,St.memoizedState,s)},useTransition:function(){var s=Qd(gl)[0],i=Cn().memoizedState;return[s,i]},useMutableSource:wy,useSyncExternalStore:xy,useId:Ly,unstable_isNewReconciler:!1},PS={readContext:Nn,useCallback:jy,useContext:Nn,useEffect:Xd,useImperativeHandle:Ry,useInsertionEffect:ky,useLayoutEffect:Ny,useMemo:Dy,useReducer:Yd,useRef:Py,useState:function(){return Yd(gl)},useDebugValue:Jd,useDeferredValue:function(s){var i=Cn();return St===null?i.memoizedState=s:Vy(i,St.memoizedState,s)},useTransition:function(){var s=Yd(gl)[0],i=Cn().memoizedState;return[s,i]},useMutableSource:wy,useSyncExternalStore:xy,useId:Ly,unstable_isNewReconciler:!1};function Xn(s,i){if(s&&s.defaultProps){i=X({},i),s=s.defaultProps;for(var l in s)i[l]===void 0&&(i[l]=s[l]);return i}return i}function Zd(s,i,l,d){i=s.memoizedState,l=l(d,i),l=l==null?i:X({},i,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var gu={isMounted:function(s){return(s=s._reactInternals)?zn(s)===s:!1},enqueueSetState:function(s,i,l){s=s._reactInternals;var d=tn(),g=Ns(s),v=Hr(d,g);v.payload=i,l!=null&&(v.callback=l),i=bs(s,v,g),i!==null&&(er(i,s,g,d),lu(i,s,g))},enqueueReplaceState:function(s,i,l){s=s._reactInternals;var d=tn(),g=Ns(s),v=Hr(d,g);v.tag=1,v.payload=i,l!=null&&(v.callback=l),i=bs(s,v,g),i!==null&&(er(i,s,g,d),lu(i,s,g))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var l=tn(),d=Ns(s),g=Hr(l,d);g.tag=2,i!=null&&(g.callback=i),i=bs(s,g,d),i!==null&&(er(i,s,d,l),lu(i,s,d))}};function Fy(s,i,l,d,g,v,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,v,T):i.prototype&&i.prototype.isPureReactComponent?!rl(l,d)||!rl(g,v):!0}function By(s,i,l){var d=!1,g=Ts,v=i.contextType;return typeof v=="object"&&v!==null?v=Nn(v):(g=an(i)?Ti:$t.current,d=i.contextTypes,v=(d=d!=null)?Fo(s,g):Ts),i=new i(l,v),s.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=gu,s.stateNode=i,i._reactInternals=s,d&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=g,s.__reactInternalMemoizedMaskedChildContext=v),i}function zy(s,i,l,d){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,d),i.state!==s&&gu.enqueueReplaceState(i,i.state,null)}function ef(s,i,l,d){var g=s.stateNode;g.props=l,g.state=s.memoizedState,g.refs={},Fd(s);var v=i.contextType;typeof v=="object"&&v!==null?g.context=Nn(v):(v=an(i)?Ti:$t.current,g.context=Fo(s,v)),g.state=s.memoizedState,v=i.getDerivedStateFromProps,typeof v=="function"&&(Zd(s,i,v,l),g.state=s.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(i=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),i!==g.state&&gu.enqueueReplaceState(g,g.state,null),cu(s,l,g,d),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308)}function Ko(s,i){try{var l="",d=i;do l+=ue(d),d=d.return;while(d);var g=l}catch(v){g=`
Error generating stack: `+v.message+`
`+v.stack}return{value:s,source:i,stack:g,digest:null}}function tf(s,i,l){return{value:s,source:null,stack:l??null,digest:i??null}}function nf(s,i){try{console.error(i.value)}catch(l){setTimeout(function(){throw l})}}var AS=typeof WeakMap=="function"?WeakMap:Map;function $y(s,i,l){l=Hr(-1,l),l.tag=3,l.payload={element:null};var d=i.value;return l.callback=function(){Tu||(Tu=!0,vf=d),nf(s,i)},l}function qy(s,i,l){l=Hr(-1,l),l.tag=3;var d=s.type.getDerivedStateFromError;if(typeof d=="function"){var g=i.value;l.payload=function(){return d(g)},l.callback=function(){nf(s,i)}}var v=s.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(l.callback=function(){nf(s,i),typeof d!="function"&&(As===null?As=new Set([this]):As.add(this));var T=i.stack;this.componentDidCatch(i.value,{componentStack:T!==null?T:""})}),l}function Gy(s,i,l){var d=s.pingCache;if(d===null){d=s.pingCache=new AS;var g=new Set;d.set(i,g)}else g=d.get(i),g===void 0&&(g=new Set,d.set(i,g));g.has(l)||(g.add(l),s=zS.bind(null,s,i,l),i.then(s,s))}function Hy(s){do{var i;if((i=s.tag===13)&&(i=s.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return s;s=s.return}while(s!==null);return null}function Wy(s,i,l,d,g){return(s.mode&1)===0?(s===i?s.flags|=65536:(s.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(i=Hr(-1,1),i.tag=2,bs(l,i,1))),l.lanes|=1),s):(s.flags|=65536,s.lanes=g,s)}var kS=Q.ReactCurrentOwner,ln=!1;function en(s,i,l,d){i.child=s===null?fy(i,null,l,d):qo(i,s.child,l,d)}function Ky(s,i,l,d,g){l=l.render;var v=i.ref;return Ho(i,g),d=Wd(s,i,l,d,v,g),l=Kd(),s!==null&&!ln?(i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~g,Wr(s,i,g)):(st&&l&&Nd(i),i.flags|=1,en(s,i,d,g),i.child)}function Qy(s,i,l,d,g){if(s===null){var v=l.type;return typeof v=="function"&&!If(v)&&v.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(i.tag=15,i.type=v,Yy(s,i,v,d,g)):(s=ku(l.type,null,d,i,i.mode,g),s.ref=i.ref,s.return=i,i.child=s)}if(v=s.child,(s.lanes&g)===0){var T=v.memoizedProps;if(l=l.compare,l=l!==null?l:rl,l(T,d)&&s.ref===i.ref)return Wr(s,i,g)}return i.flags|=1,s=Rs(v,d),s.ref=i.ref,s.return=i,i.child=s}function Yy(s,i,l,d,g){if(s!==null){var v=s.memoizedProps;if(rl(v,d)&&s.ref===i.ref)if(ln=!1,i.pendingProps=d=v,(s.lanes&g)!==0)(s.flags&131072)!==0&&(ln=!0);else return i.lanes=s.lanes,Wr(s,i,g)}return rf(s,i,l,d,g)}function Xy(s,i,l){var d=i.pendingProps,g=d.children,v=s!==null?s.memoizedState:null;if(d.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(Yo,_n),_n|=l;else{if((l&1073741824)===0)return s=v!==null?v.baseLanes|l:l,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:s,cachePool:null,transitions:null},i.updateQueue=null,Ze(Yo,_n),_n|=s,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=v!==null?v.baseLanes:l,Ze(Yo,_n),_n|=d}else v!==null?(d=v.baseLanes|l,i.memoizedState=null):d=l,Ze(Yo,_n),_n|=d;return en(s,i,g,l),i.child}function Jy(s,i){var l=i.ref;(s===null&&l!==null||s!==null&&s.ref!==l)&&(i.flags|=512,i.flags|=2097152)}function rf(s,i,l,d,g){var v=an(l)?Ti:$t.current;return v=Fo(i,v),Ho(i,g),l=Wd(s,i,l,d,v,g),d=Kd(),s!==null&&!ln?(i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~g,Wr(s,i,g)):(st&&d&&Nd(i),i.flags|=1,en(s,i,l,g),i.child)}function Zy(s,i,l,d,g){if(an(l)){var v=!0;eu(i)}else v=!1;if(Ho(i,g),i.stateNode===null)vu(s,i),By(i,l,d),ef(i,l,d,g),d=!0;else if(s===null){var T=i.stateNode,k=i.memoizedProps;T.props=k;var M=T.context,K=l.contextType;typeof K=="object"&&K!==null?K=Nn(K):(K=an(l)?Ti:$t.current,K=Fo(i,K));var te=l.getDerivedStateFromProps,re=typeof te=="function"||typeof T.getSnapshotBeforeUpdate=="function";re||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(k!==d||M!==K)&&zy(i,T,d,K),Is=!1;var ee=i.memoizedState;T.state=ee,cu(i,d,T,g),M=i.memoizedState,k!==d||ee!==M||on.current||Is?(typeof te=="function"&&(Zd(i,l,te,d),M=i.memoizedState),(k=Is||Fy(i,l,k,d,ee,M,K))?(re||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(i.flags|=4194308)):(typeof T.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=M),T.props=d,T.state=M,T.context=K,d=k):(typeof T.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{T=i.stateNode,my(s,i),k=i.memoizedProps,K=i.type===i.elementType?k:Xn(i.type,k),T.props=K,re=i.pendingProps,ee=T.context,M=l.contextType,typeof M=="object"&&M!==null?M=Nn(M):(M=an(l)?Ti:$t.current,M=Fo(i,M));var he=l.getDerivedStateFromProps;(te=typeof he=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(k!==re||ee!==M)&&zy(i,T,d,M),Is=!1,ee=i.memoizedState,T.state=ee,cu(i,d,T,g);var pe=i.memoizedState;k!==re||ee!==pe||on.current||Is?(typeof he=="function"&&(Zd(i,l,he,d),pe=i.memoizedState),(K=Is||Fy(i,l,K,d,ee,pe,M)||!1)?(te||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(d,pe,M),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(d,pe,M)),typeof T.componentDidUpdate=="function"&&(i.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof T.componentDidUpdate!="function"||k===s.memoizedProps&&ee===s.memoizedState||(i.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||k===s.memoizedProps&&ee===s.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=pe),T.props=d,T.state=pe,T.context=M,d=K):(typeof T.componentDidUpdate!="function"||k===s.memoizedProps&&ee===s.memoizedState||(i.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||k===s.memoizedProps&&ee===s.memoizedState||(i.flags|=1024),d=!1)}return sf(s,i,l,d,v,g)}function sf(s,i,l,d,g,v){Jy(s,i);var T=(i.flags&128)!==0;if(!d&&!T)return g&&sy(i,l,!1),Wr(s,i,v);d=i.stateNode,kS.current=i;var k=T&&typeof l.getDerivedStateFromError!="function"?null:d.render();return i.flags|=1,s!==null&&T?(i.child=qo(i,s.child,null,v),i.child=qo(i,null,k,v)):en(s,i,k,v),i.memoizedState=d.state,g&&sy(i,l,!0),i.child}function e0(s){var i=s.stateNode;i.pendingContext?ny(s,i.pendingContext,i.pendingContext!==i.context):i.context&&ny(s,i.context,!1),Bd(s,i.containerInfo)}function t0(s,i,l,d,g){return $o(),Dd(g),i.flags|=256,en(s,i,l,d),i.child}var of={dehydrated:null,treeContext:null,retryLane:0};function af(s){return{baseLanes:s,cachePool:null,transitions:null}}function n0(s,i,l){var d=i.pendingProps,g=ot.current,v=!1,T=(i.flags&128)!==0,k;if((k=T)||(k=s!==null&&s.memoizedState===null?!1:(g&2)!==0),k?(v=!0,i.flags&=-129):(s===null||s.memoizedState!==null)&&(g|=1),Ze(ot,g&1),s===null)return jd(i),s=i.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((i.mode&1)===0?i.lanes=1:s.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(T=d.children,s=d.fallback,v?(d=i.mode,v=i.child,T={mode:"hidden",children:T},(d&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=T):v=Nu(T,d,0,null),s=ji(s,d,l,null),v.return=i,s.return=i,v.sibling=s,i.child=v,i.child.memoizedState=af(l),i.memoizedState=of,s):lf(i,T));if(g=s.memoizedState,g!==null&&(k=g.dehydrated,k!==null))return NS(s,i,T,d,k,g,l);if(v){v=d.fallback,T=i.mode,g=s.child,k=g.sibling;var M={mode:"hidden",children:d.children};return(T&1)===0&&i.child!==g?(d=i.child,d.childLanes=0,d.pendingProps=M,i.deletions=null):(d=Rs(g,M),d.subtreeFlags=g.subtreeFlags&14680064),k!==null?v=Rs(k,v):(v=ji(v,T,l,null),v.flags|=2),v.return=i,d.return=i,d.sibling=v,i.child=d,d=v,v=i.child,T=s.child.memoizedState,T=T===null?af(l):{baseLanes:T.baseLanes|l,cachePool:null,transitions:T.transitions},v.memoizedState=T,v.childLanes=s.childLanes&~l,i.memoizedState=of,d}return v=s.child,s=v.sibling,d=Rs(v,{mode:"visible",children:d.children}),(i.mode&1)===0&&(d.lanes=l),d.return=i,d.sibling=null,s!==null&&(l=i.deletions,l===null?(i.deletions=[s],i.flags|=16):l.push(s)),i.child=d,i.memoizedState=null,d}function lf(s,i){return i=Nu({mode:"visible",children:i},s.mode,0,null),i.return=s,s.child=i}function yu(s,i,l,d){return d!==null&&Dd(d),qo(i,s.child,null,l),s=lf(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function NS(s,i,l,d,g,v,T){if(l)return i.flags&256?(i.flags&=-257,d=tf(Error(t(422))),yu(s,i,T,d)):i.memoizedState!==null?(i.child=s.child,i.flags|=128,null):(v=d.fallback,g=i.mode,d=Nu({mode:"visible",children:d.children},g,0,null),v=ji(v,g,T,null),v.flags|=2,d.return=i,v.return=i,d.sibling=v,i.child=d,(i.mode&1)!==0&&qo(i,s.child,null,T),i.child.memoizedState=af(T),i.memoizedState=of,v);if((i.mode&1)===0)return yu(s,i,T,null);if(g.data==="$!"){if(d=g.nextSibling&&g.nextSibling.dataset,d)var k=d.dgst;return d=k,v=Error(t(419)),d=tf(v,d,void 0),yu(s,i,T,d)}if(k=(T&s.childLanes)!==0,ln||k){if(d=Ct,d!==null){switch(T&-T){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(d.suspendedLanes|T))!==0?0:g,g!==0&&g!==v.retryLane&&(v.retryLane=g,Gr(s,g),er(d,s,g,-1))}return Sf(),d=tf(Error(t(421))),yu(s,i,T,d)}return g.data==="$?"?(i.flags|=128,i.child=s.child,i=$S.bind(null,s),g._reactRetry=i,null):(s=v.treeContext,xn=_s(g.nextSibling),wn=i,st=!0,Yn=null,s!==null&&(An[kn++]=$r,An[kn++]=qr,An[kn++]=Si,$r=s.id,qr=s.overflow,Si=i),i=lf(i,d.children),i.flags|=4096,i)}function r0(s,i,l){s.lanes|=i;var d=s.alternate;d!==null&&(d.lanes|=i),Md(s.return,i,l)}function cf(s,i,l,d,g){var v=s.memoizedState;v===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:g}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=d,v.tail=l,v.tailMode=g)}function s0(s,i,l){var d=i.pendingProps,g=d.revealOrder,v=d.tail;if(en(s,i,d.children,l),d=ot.current,(d&2)!==0)d=d&1|2,i.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&r0(s,l,i);else if(s.tag===19)r0(s,l,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}d&=1}if(Ze(ot,d),(i.mode&1)===0)i.memoizedState=null;else switch(g){case"forwards":for(l=i.child,g=null;l!==null;)s=l.alternate,s!==null&&uu(s)===null&&(g=l),l=l.sibling;l=g,l===null?(g=i.child,i.child=null):(g=l.sibling,l.sibling=null),cf(i,!1,g,l,v);break;case"backwards":for(l=null,g=i.child,i.child=null;g!==null;){if(s=g.alternate,s!==null&&uu(s)===null){i.child=g;break}s=g.sibling,g.sibling=l,l=g,g=s}cf(i,!0,l,null,v);break;case"together":cf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function vu(s,i){(i.mode&1)===0&&s!==null&&(s.alternate=null,i.alternate=null,i.flags|=2)}function Wr(s,i,l){if(s!==null&&(i.dependencies=s.dependencies),ki|=i.lanes,(l&i.childLanes)===0)return null;if(s!==null&&i.child!==s.child)throw Error(t(153));if(i.child!==null){for(s=i.child,l=Rs(s,s.pendingProps),i.child=l,l.return=i;s.sibling!==null;)s=s.sibling,l=l.sibling=Rs(s,s.pendingProps),l.return=i;l.sibling=null}return i.child}function CS(s,i,l){switch(i.tag){case 3:e0(i),$o();break;case 5:vy(i);break;case 1:an(i.type)&&eu(i);break;case 4:Bd(i,i.stateNode.containerInfo);break;case 10:var d=i.type._context,g=i.memoizedProps.value;Ze(ou,d._currentValue),d._currentValue=g;break;case 13:if(d=i.memoizedState,d!==null)return d.dehydrated!==null?(Ze(ot,ot.current&1),i.flags|=128,null):(l&i.child.childLanes)!==0?n0(s,i,l):(Ze(ot,ot.current&1),s=Wr(s,i,l),s!==null?s.sibling:null);Ze(ot,ot.current&1);break;case 19:if(d=(l&i.childLanes)!==0,(s.flags&128)!==0){if(d)return s0(s,i,l);i.flags|=128}if(g=i.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Ze(ot,ot.current),d)break;return null;case 22:case 23:return i.lanes=0,Xy(s,i,l)}return Wr(s,i,l)}var i0,uf,o0,a0;i0=function(s,i){for(var l=i.child;l!==null;){if(l.tag===5||l.tag===6)s.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},uf=function(){},o0=function(s,i,l,d){var g=s.memoizedProps;if(g!==d){s=i.stateNode,Pi(yr.current);var v=null;switch(l){case"input":g=oi(s,g),d=oi(s,d),v=[];break;case"select":g=X({},g,{value:void 0}),d=X({},d,{value:void 0}),v=[];break;case"textarea":g=Ra(s,g),d=Ra(s,d),v=[];break;default:typeof g.onClick!="function"&&typeof d.onClick=="function"&&(s.onclick=Xc)}Ma(l,d);var T;l=null;for(K in g)if(!d.hasOwnProperty(K)&&g.hasOwnProperty(K)&&g[K]!=null)if(K==="style"){var k=g[K];for(T in k)k.hasOwnProperty(T)&&(l||(l={}),l[T]="")}else K!=="dangerouslySetInnerHTML"&&K!=="children"&&K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(o.hasOwnProperty(K)?v||(v=[]):(v=v||[]).push(K,null));for(K in d){var M=d[K];if(k=g?.[K],d.hasOwnProperty(K)&&M!==k&&(M!=null||k!=null))if(K==="style")if(k){for(T in k)!k.hasOwnProperty(T)||M&&M.hasOwnProperty(T)||(l||(l={}),l[T]="");for(T in M)M.hasOwnProperty(T)&&k[T]!==M[T]&&(l||(l={}),l[T]=M[T])}else l||(v||(v=[]),v.push(K,l)),l=M;else K==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,k=k?k.__html:void 0,M!=null&&k!==M&&(v=v||[]).push(K,M)):K==="children"?typeof M!="string"&&typeof M!="number"||(v=v||[]).push(K,""+M):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&(o.hasOwnProperty(K)?(M!=null&&K==="onScroll"&&tt("scroll",s),v||k===M||(v=[])):(v=v||[]).push(K,M))}l&&(v=v||[]).push("style",l);var K=v;(i.updateQueue=K)&&(i.flags|=4)}},a0=function(s,i,l,d){l!==d&&(i.flags|=4)};function vl(s,i){if(!st)switch(s.tailMode){case"hidden":i=s.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function Gt(s){var i=s.alternate!==null&&s.alternate.child===s.child,l=0,d=0;if(i)for(var g=s.child;g!==null;)l|=g.lanes|g.childLanes,d|=g.subtreeFlags&14680064,d|=g.flags&14680064,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)l|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=d,s.childLanes=l,i}function RS(s,i,l){var d=i.pendingProps;switch(Cd(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(i),null;case 1:return an(i.type)&&Zc(),Gt(i),null;case 3:return d=i.stateNode,Wo(),nt(on),nt($t),qd(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(s===null||s.child===null)&&(su(i)?i.flags|=4:s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Yn!==null&&(_f(Yn),Yn=null))),uf(s,i),Gt(i),null;case 5:zd(i);var g=Pi(fl.current);if(l=i.type,s!==null&&i.stateNode!=null)o0(s,i,l,d,g),s.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!d){if(i.stateNode===null)throw Error(t(166));return Gt(i),null}if(s=Pi(yr.current),su(i)){d=i.stateNode,l=i.type;var v=i.memoizedProps;switch(d[gr]=i,d[ll]=v,s=(i.mode&1)!==0,l){case"dialog":tt("cancel",d),tt("close",d);break;case"iframe":case"object":case"embed":tt("load",d);break;case"video":case"audio":for(g=0;g<il.length;g++)tt(il[g],d);break;case"source":tt("error",d);break;case"img":case"image":case"link":tt("error",d),tt("load",d);break;case"details":tt("toggle",d);break;case"input":ao(d,v),tt("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!v.multiple},tt("invalid",d);break;case"textarea":co(d,v),tt("invalid",d)}Ma(l,v),g=null;for(var T in v)if(v.hasOwnProperty(T)){var k=v[T];T==="children"?typeof k=="string"?d.textContent!==k&&(v.suppressHydrationWarning!==!0&&Yc(d.textContent,k,s),g=["children",k]):typeof k=="number"&&d.textContent!==""+k&&(v.suppressHydrationWarning!==!0&&Yc(d.textContent,k,s),g=["children",""+k]):o.hasOwnProperty(T)&&k!=null&&T==="onScroll"&&tt("scroll",d)}switch(l){case"input":Dt(d),Ec(d,v,!0);break;case"textarea":Dt(d),ja(d);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(d.onclick=Xc)}d=g,i.updateQueue=d,d!==null&&(i.flags|=4)}else{T=g.nodeType===9?g:g.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=_t(l)),s==="http://www.w3.org/1999/xhtml"?l==="script"?(s=T.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof d.is=="string"?s=T.createElement(l,{is:d.is}):(s=T.createElement(l),l==="select"&&(T=s,d.multiple?T.multiple=!0:d.size&&(T.size=d.size))):s=T.createElementNS(s,l),s[gr]=i,s[ll]=d,i0(s,i,!1,!1),i.stateNode=s;e:{switch(T=Ua(l,d),l){case"dialog":tt("cancel",s),tt("close",s),g=d;break;case"iframe":case"object":case"embed":tt("load",s),g=d;break;case"video":case"audio":for(g=0;g<il.length;g++)tt(il[g],s);g=d;break;case"source":tt("error",s),g=d;break;case"img":case"image":case"link":tt("error",s),tt("load",s),g=d;break;case"details":tt("toggle",s),g=d;break;case"input":ao(s,d),g=oi(s,d),tt("invalid",s);break;case"option":g=d;break;case"select":s._wrapperState={wasMultiple:!!d.multiple},g=X({},d,{value:void 0}),tt("invalid",s);break;case"textarea":co(s,d),g=Ra(s,d),tt("invalid",s);break;default:g=d}Ma(l,g),k=g;for(v in k)if(k.hasOwnProperty(v)){var M=k[v];v==="style"?La(s,M):v==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,M!=null&&Da(s,M)):v==="children"?typeof M=="string"?(l!=="textarea"||M!=="")&&us(s,M):typeof M=="number"&&us(s,""+M):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(o.hasOwnProperty(v)?M!=null&&v==="onScroll"&&tt("scroll",s):M!=null&&O(s,v,M,T))}switch(l){case"input":Dt(s),Ec(s,d,!1);break;case"textarea":Dt(s),ja(s);break;case"option":d.value!=null&&s.setAttribute("value",""+Be(d.value));break;case"select":s.multiple=!!d.multiple,v=d.value,v!=null?jr(s,!!d.multiple,v,!1):d.defaultValue!=null&&jr(s,!!d.multiple,d.defaultValue,!0);break;default:typeof g.onClick=="function"&&(s.onclick=Xc)}switch(l){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Gt(i),null;case 6:if(s&&i.stateNode!=null)a0(s,i,s.memoizedProps,d);else{if(typeof d!="string"&&i.stateNode===null)throw Error(t(166));if(l=Pi(fl.current),Pi(yr.current),su(i)){if(d=i.stateNode,l=i.memoizedProps,d[gr]=i,(v=d.nodeValue!==l)&&(s=wn,s!==null))switch(s.tag){case 3:Yc(d.nodeValue,l,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Yc(d.nodeValue,l,(s.mode&1)!==0)}v&&(i.flags|=4)}else d=(l.nodeType===9?l:l.ownerDocument).createTextNode(d),d[gr]=i,i.stateNode=d}return Gt(i),null;case 13:if(nt(ot),d=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(st&&xn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)uy(),$o(),i.flags|=98560,v=!1;else if(v=su(i),d!==null&&d.dehydrated!==null){if(s===null){if(!v)throw Error(t(318));if(v=i.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[gr]=i}else $o(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Gt(i),v=!1}else Yn!==null&&(_f(Yn),Yn=null),v=!0;if(!v)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=l,i):(d=d!==null,d!==(s!==null&&s.memoizedState!==null)&&d&&(i.child.flags|=8192,(i.mode&1)!==0&&(s===null||(ot.current&1)!==0?It===0&&(It=3):Sf())),i.updateQueue!==null&&(i.flags|=4),Gt(i),null);case 4:return Wo(),uf(s,i),s===null&&ol(i.stateNode.containerInfo),Gt(i),null;case 10:return Od(i.type._context),Gt(i),null;case 17:return an(i.type)&&Zc(),Gt(i),null;case 19:if(nt(ot),v=i.memoizedState,v===null)return Gt(i),null;if(d=(i.flags&128)!==0,T=v.rendering,T===null)if(d)vl(v,!1);else{if(It!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(T=uu(s),T!==null){for(i.flags|=128,vl(v,!1),d=T.updateQueue,d!==null&&(i.updateQueue=d,i.flags|=4),i.subtreeFlags=0,d=l,l=i.child;l!==null;)v=l,s=d,v.flags&=14680066,T=v.alternate,T===null?(v.childLanes=0,v.lanes=s,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=T.childLanes,v.lanes=T.lanes,v.child=T.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=T.memoizedProps,v.memoizedState=T.memoizedState,v.updateQueue=T.updateQueue,v.type=T.type,s=T.dependencies,v.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),l=l.sibling;return Ze(ot,ot.current&1|2),i.child}s=s.sibling}v.tail!==null&&Je()>Xo&&(i.flags|=128,d=!0,vl(v,!1),i.lanes=4194304)}else{if(!d)if(s=uu(T),s!==null){if(i.flags|=128,d=!0,l=s.updateQueue,l!==null&&(i.updateQueue=l,i.flags|=4),vl(v,!0),v.tail===null&&v.tailMode==="hidden"&&!T.alternate&&!st)return Gt(i),null}else 2*Je()-v.renderingStartTime>Xo&&l!==1073741824&&(i.flags|=128,d=!0,vl(v,!1),i.lanes=4194304);v.isBackwards?(T.sibling=i.child,i.child=T):(l=v.last,l!==null?l.sibling=T:i.child=T,v.last=T)}return v.tail!==null?(i=v.tail,v.rendering=i,v.tail=i.sibling,v.renderingStartTime=Je(),i.sibling=null,l=ot.current,Ze(ot,d?l&1|2:l&1),i):(Gt(i),null);case 22:case 23:return Tf(),d=i.memoizedState!==null,s!==null&&s.memoizedState!==null!==d&&(i.flags|=8192),d&&(i.mode&1)!==0?(_n&1073741824)!==0&&(Gt(i),i.subtreeFlags&6&&(i.flags|=8192)):Gt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function jS(s,i){switch(Cd(i),i.tag){case 1:return an(i.type)&&Zc(),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return Wo(),nt(on),nt($t),qd(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 5:return zd(i),null;case 13:if(nt(ot),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(t(340));$o()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return nt(ot),null;case 4:return Wo(),null;case 10:return Od(i.type._context),null;case 22:case 23:return Tf(),null;case 24:return null;default:return null}}var wu=!1,Ht=!1,DS=typeof WeakSet=="function"?WeakSet:Set,de=null;function Qo(s,i){var l=s.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(d){ut(s,i,d)}else l.current=null}function hf(s,i,l){try{l()}catch(d){ut(s,i,d)}}var l0=!1;function VS(s,i){if(Ed=vs,s=Fg(),pd(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var g=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var T=0,k=-1,M=-1,K=0,te=0,re=s,ee=null;t:for(;;){for(var he;re!==l||g!==0&&re.nodeType!==3||(k=T+g),re!==v||d!==0&&re.nodeType!==3||(M=T+d),re.nodeType===3&&(T+=re.nodeValue.length),(he=re.firstChild)!==null;)ee=re,re=he;for(;;){if(re===s)break t;if(ee===l&&++K===g&&(k=T),ee===v&&++te===d&&(M=T),(he=re.nextSibling)!==null)break;re=ee,ee=re.parentNode}re=he}l=k===-1||M===-1?null:{start:k,end:M}}else l=null}l=l||{start:0,end:0}}else l=null;for(Td={focusedElem:s,selectionRange:l},vs=!1,de=i;de!==null;)if(i=de,s=i.child,(i.subtreeFlags&1028)!==0&&s!==null)s.return=i,de=s;else for(;de!==null;){i=de;try{var pe=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(pe!==null){var me=pe.memoizedProps,ft=pe.memoizedState,G=i.stateNode,B=G.getSnapshotBeforeUpdate(i.elementType===i.type?me:Xn(i.type,me),ft);G.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var W=i.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ae){ut(i,i.return,ae)}if(s=i.sibling,s!==null){s.return=i.return,de=s;break}de=i.return}return pe=l0,l0=!1,pe}function wl(s,i,l){var d=i.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var g=d=d.next;do{if((g.tag&s)===s){var v=g.destroy;g.destroy=void 0,v!==void 0&&hf(i,l,v)}g=g.next}while(g!==d)}}function xu(s,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&s)===s){var d=l.create;l.destroy=d()}l=l.next}while(l!==i)}}function df(s){var i=s.ref;if(i!==null){var l=s.stateNode;switch(s.tag){case 5:s=l;break;default:s=l}typeof i=="function"?i(s):i.current=s}}function c0(s){var i=s.alternate;i!==null&&(s.alternate=null,c0(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&(delete i[gr],delete i[ll],delete i[Pd],delete i[yS],delete i[vS])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function u0(s){return s.tag===5||s.tag===3||s.tag===4}function h0(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||u0(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function ff(s,i,l){var d=s.tag;if(d===5||d===6)s=s.stateNode,i?l.nodeType===8?l.parentNode.insertBefore(s,i):l.insertBefore(s,i):(l.nodeType===8?(i=l.parentNode,i.insertBefore(s,l)):(i=l,i.appendChild(s)),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=Xc));else if(d!==4&&(s=s.child,s!==null))for(ff(s,i,l),s=s.sibling;s!==null;)ff(s,i,l),s=s.sibling}function pf(s,i,l){var d=s.tag;if(d===5||d===6)s=s.stateNode,i?l.insertBefore(s,i):l.appendChild(s);else if(d!==4&&(s=s.child,s!==null))for(pf(s,i,l),s=s.sibling;s!==null;)pf(s,i,l),s=s.sibling}var Ot=null,Jn=!1;function Ps(s,i,l){for(l=l.child;l!==null;)d0(s,i,l),l=l.sibling}function d0(s,i,l){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(mi,l)}catch{}switch(l.tag){case 5:Ht||Qo(l,i);case 6:var d=Ot,g=Jn;Ot=null,Ps(s,i,l),Ot=d,Jn=g,Ot!==null&&(Jn?(s=Ot,l=l.stateNode,s.nodeType===8?s.parentNode.removeChild(l):s.removeChild(l)):Ot.removeChild(l.stateNode));break;case 18:Ot!==null&&(Jn?(s=Ot,l=l.stateNode,s.nodeType===8?bd(s.parentNode,l):s.nodeType===1&&bd(s,l),Wn(s)):bd(Ot,l.stateNode));break;case 4:d=Ot,g=Jn,Ot=l.stateNode.containerInfo,Jn=!0,Ps(s,i,l),Ot=d,Jn=g;break;case 0:case 11:case 14:case 15:if(!Ht&&(d=l.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){g=d=d.next;do{var v=g,T=v.destroy;v=v.tag,T!==void 0&&((v&2)!==0||(v&4)!==0)&&hf(l,i,T),g=g.next}while(g!==d)}Ps(s,i,l);break;case 1:if(!Ht&&(Qo(l,i),d=l.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=l.memoizedProps,d.state=l.memoizedState,d.componentWillUnmount()}catch(k){ut(l,i,k)}Ps(s,i,l);break;case 21:Ps(s,i,l);break;case 22:l.mode&1?(Ht=(d=Ht)||l.memoizedState!==null,Ps(s,i,l),Ht=d):Ps(s,i,l);break;default:Ps(s,i,l)}}function f0(s){var i=s.updateQueue;if(i!==null){s.updateQueue=null;var l=s.stateNode;l===null&&(l=s.stateNode=new DS),i.forEach(function(d){var g=qS.bind(null,s,d);l.has(d)||(l.add(d),d.then(g,g))})}}function Zn(s,i){var l=i.deletions;if(l!==null)for(var d=0;d<l.length;d++){var g=l[d];try{var v=s,T=i,k=T;e:for(;k!==null;){switch(k.tag){case 5:Ot=k.stateNode,Jn=!1;break e;case 3:Ot=k.stateNode.containerInfo,Jn=!0;break e;case 4:Ot=k.stateNode.containerInfo,Jn=!0;break e}k=k.return}if(Ot===null)throw Error(t(160));d0(v,T,g),Ot=null,Jn=!1;var M=g.alternate;M!==null&&(M.return=null),g.return=null}catch(K){ut(g,i,K)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)p0(i,s),i=i.sibling}function p0(s,i){var l=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Zn(i,s),wr(s),d&4){try{wl(3,s,s.return),xu(3,s)}catch(me){ut(s,s.return,me)}try{wl(5,s,s.return)}catch(me){ut(s,s.return,me)}}break;case 1:Zn(i,s),wr(s),d&512&&l!==null&&Qo(l,l.return);break;case 5:if(Zn(i,s),wr(s),d&512&&l!==null&&Qo(l,l.return),s.flags&32){var g=s.stateNode;try{us(g,"")}catch(me){ut(s,s.return,me)}}if(d&4&&(g=s.stateNode,g!=null)){var v=s.memoizedProps,T=l!==null?l.memoizedProps:v,k=s.type,M=s.updateQueue;if(s.updateQueue=null,M!==null)try{k==="input"&&v.type==="radio"&&v.name!=null&&Na(g,v),Ua(k,T);var K=Ua(k,v);for(T=0;T<M.length;T+=2){var te=M[T],re=M[T+1];te==="style"?La(g,re):te==="dangerouslySetInnerHTML"?Da(g,re):te==="children"?us(g,re):O(g,te,re,K)}switch(k){case"input":Ca(g,v);break;case"textarea":uo(g,v);break;case"select":var ee=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!v.multiple;var he=v.value;he!=null?jr(g,!!v.multiple,he,!1):ee!==!!v.multiple&&(v.defaultValue!=null?jr(g,!!v.multiple,v.defaultValue,!0):jr(g,!!v.multiple,v.multiple?[]:"",!1))}g[ll]=v}catch(me){ut(s,s.return,me)}}break;case 6:if(Zn(i,s),wr(s),d&4){if(s.stateNode===null)throw Error(t(162));g=s.stateNode,v=s.memoizedProps;try{g.nodeValue=v}catch(me){ut(s,s.return,me)}}break;case 3:if(Zn(i,s),wr(s),d&4&&l!==null&&l.memoizedState.isDehydrated)try{Wn(i.containerInfo)}catch(me){ut(s,s.return,me)}break;case 4:Zn(i,s),wr(s);break;case 13:Zn(i,s),wr(s),g=s.child,g.flags&8192&&(v=g.memoizedState!==null,g.stateNode.isHidden=v,!v||g.alternate!==null&&g.alternate.memoizedState!==null||(yf=Je())),d&4&&f0(s);break;case 22:if(te=l!==null&&l.memoizedState!==null,s.mode&1?(Ht=(K=Ht)||te,Zn(i,s),Ht=K):Zn(i,s),wr(s),d&8192){if(K=s.memoizedState!==null,(s.stateNode.isHidden=K)&&!te&&(s.mode&1)!==0)for(de=s,te=s.child;te!==null;){for(re=de=te;de!==null;){switch(ee=de,he=ee.child,ee.tag){case 0:case 11:case 14:case 15:wl(4,ee,ee.return);break;case 1:Qo(ee,ee.return);var pe=ee.stateNode;if(typeof pe.componentWillUnmount=="function"){d=ee,l=ee.return;try{i=d,pe.props=i.memoizedProps,pe.state=i.memoizedState,pe.componentWillUnmount()}catch(me){ut(d,l,me)}}break;case 5:Qo(ee,ee.return);break;case 22:if(ee.memoizedState!==null){y0(re);continue}}he!==null?(he.return=ee,de=he):y0(re)}te=te.sibling}e:for(te=null,re=s;;){if(re.tag===5){if(te===null){te=re;try{g=re.stateNode,K?(v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(k=re.stateNode,M=re.memoizedProps.style,T=M!=null&&M.hasOwnProperty("display")?M.display:null,k.style.display=Va("display",T))}catch(me){ut(s,s.return,me)}}}else if(re.tag===6){if(te===null)try{re.stateNode.nodeValue=K?"":re.memoizedProps}catch(me){ut(s,s.return,me)}}else if((re.tag!==22&&re.tag!==23||re.memoizedState===null||re===s)&&re.child!==null){re.child.return=re,re=re.child;continue}if(re===s)break e;for(;re.sibling===null;){if(re.return===null||re.return===s)break e;te===re&&(te=null),re=re.return}te===re&&(te=null),re.sibling.return=re.return,re=re.sibling}}break;case 19:Zn(i,s),wr(s),d&4&&f0(s);break;case 21:break;default:Zn(i,s),wr(s)}}function wr(s){var i=s.flags;if(i&2){try{e:{for(var l=s.return;l!==null;){if(u0(l)){var d=l;break e}l=l.return}throw Error(t(160))}switch(d.tag){case 5:var g=d.stateNode;d.flags&32&&(us(g,""),d.flags&=-33);var v=h0(s);pf(s,v,g);break;case 3:case 4:var T=d.stateNode.containerInfo,k=h0(s);ff(s,k,T);break;default:throw Error(t(161))}}catch(M){ut(s,s.return,M)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function LS(s,i,l){de=s,m0(s)}function m0(s,i,l){for(var d=(s.mode&1)!==0;de!==null;){var g=de,v=g.child;if(g.tag===22&&d){var T=g.memoizedState!==null||wu;if(!T){var k=g.alternate,M=k!==null&&k.memoizedState!==null||Ht;k=wu;var K=Ht;if(wu=T,(Ht=M)&&!K)for(de=g;de!==null;)T=de,M=T.child,T.tag===22&&T.memoizedState!==null?v0(g):M!==null?(M.return=T,de=M):v0(g);for(;v!==null;)de=v,m0(v),v=v.sibling;de=g,wu=k,Ht=K}g0(s)}else(g.subtreeFlags&8772)!==0&&v!==null?(v.return=g,de=v):g0(s)}}function g0(s){for(;de!==null;){var i=de;if((i.flags&8772)!==0){var l=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Ht||xu(5,i);break;case 1:var d=i.stateNode;if(i.flags&4&&!Ht)if(l===null)d.componentDidMount();else{var g=i.elementType===i.type?l.memoizedProps:Xn(i.type,l.memoizedProps);d.componentDidUpdate(g,l.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var v=i.updateQueue;v!==null&&yy(i,v,d);break;case 3:var T=i.updateQueue;if(T!==null){if(l=null,i.child!==null)switch(i.child.tag){case 5:l=i.child.stateNode;break;case 1:l=i.child.stateNode}yy(i,T,l)}break;case 5:var k=i.stateNode;if(l===null&&i.flags&4){l=k;var M=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":M.autoFocus&&l.focus();break;case"img":M.src&&(l.src=M.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var K=i.alternate;if(K!==null){var te=K.memoizedState;if(te!==null){var re=te.dehydrated;re!==null&&Wn(re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ht||i.flags&512&&df(i)}catch(ee){ut(i,i.return,ee)}}if(i===s){de=null;break}if(l=i.sibling,l!==null){l.return=i.return,de=l;break}de=i.return}}function y0(s){for(;de!==null;){var i=de;if(i===s){de=null;break}var l=i.sibling;if(l!==null){l.return=i.return,de=l;break}de=i.return}}function v0(s){for(;de!==null;){var i=de;try{switch(i.tag){case 0:case 11:case 15:var l=i.return;try{xu(4,i)}catch(M){ut(i,l,M)}break;case 1:var d=i.stateNode;if(typeof d.componentDidMount=="function"){var g=i.return;try{d.componentDidMount()}catch(M){ut(i,g,M)}}var v=i.return;try{df(i)}catch(M){ut(i,v,M)}break;case 5:var T=i.return;try{df(i)}catch(M){ut(i,T,M)}}}catch(M){ut(i,i.return,M)}if(i===s){de=null;break}var k=i.sibling;if(k!==null){k.return=i.return,de=k;break}de=i.return}}var OS=Math.ceil,_u=Q.ReactCurrentDispatcher,mf=Q.ReactCurrentOwner,Rn=Q.ReactCurrentBatchConfig,ze=0,Ct=null,vt=null,Mt=0,_n=0,Yo=Es(0),It=0,xl=null,ki=0,Eu=0,gf=0,_l=null,cn=null,yf=0,Xo=1/0,Kr=null,Tu=!1,vf=null,As=null,Su=!1,ks=null,Iu=0,El=0,wf=null,bu=-1,Pu=0;function tn(){return(ze&6)!==0?Je():bu!==-1?bu:bu=Je()}function Ns(s){return(s.mode&1)===0?1:(ze&2)!==0&&Mt!==0?Mt&-Mt:xS.transition!==null?(Pu===0&&(Pu=yi()),Pu):(s=Oe,s!==0||(s=window.event,s=s===void 0?16:Ya(s.type)),s)}function er(s,i,l,d){if(50<El)throw El=0,wf=null,Error(t(185));ps(s,l,d),((ze&2)===0||s!==Ct)&&(s===Ct&&((ze&2)===0&&(Eu|=l),It===4&&Cs(s,Mt)),un(s,d),l===1&&ze===0&&(i.mode&1)===0&&(Xo=Je()+500,tu&&Ss()))}function un(s,i){var l=s.callbackNode;Lr(s,i);var d=gi(s,s===Ct?Mt:0);if(d===0)l!==null&&Ga(l),s.callbackNode=null,s.callbackPriority=0;else if(i=d&-d,s.callbackPriority!==i){if(l!=null&&Ga(l),i===1)s.tag===0?wS(x0.bind(null,s)):iy(x0.bind(null,s)),mS(function(){(ze&6)===0&&Ss()}),l=null;else{switch(gs(d)){case 1:l=pi;break;case 4:l=hs;break;case 16:l=In;break;case 536870912:l=Pc;break;default:l=In}l=A0(l,w0.bind(null,s))}s.callbackPriority=i,s.callbackNode=l}}function w0(s,i){if(bu=-1,Pu=0,(ze&6)!==0)throw Error(t(327));var l=s.callbackNode;if(Jo()&&s.callbackNode!==l)return null;var d=gi(s,s===Ct?Mt:0);if(d===0)return null;if((d&30)!==0||(d&s.expiredLanes)!==0||i)i=Au(s,d);else{i=d;var g=ze;ze|=2;var v=E0();(Ct!==s||Mt!==i)&&(Kr=null,Xo=Je()+500,Ci(s,i));do try{FS();break}catch(k){_0(s,k)}while(!0);Ld(),_u.current=v,ze=g,vt!==null?i=0:(Ct=null,Mt=0,i=It)}if(i!==0){if(i===2&&(g=gn(s),g!==0&&(d=g,i=xf(s,g))),i===1)throw l=xl,Ci(s,0),Cs(s,d),un(s,Je()),l;if(i===6)Cs(s,d);else{if(g=s.current.alternate,(d&30)===0&&!MS(g)&&(i=Au(s,d),i===2&&(v=gn(s),v!==0&&(d=v,i=xf(s,v))),i===1))throw l=xl,Ci(s,0),Cs(s,d),un(s,Je()),l;switch(s.finishedWork=g,s.finishedLanes=d,i){case 0:case 1:throw Error(t(345));case 2:Ri(s,cn,Kr);break;case 3:if(Cs(s,d),(d&130023424)===d&&(i=yf+500-Je(),10<i)){if(gi(s,0)!==0)break;if(g=s.suspendedLanes,(g&d)!==d){tn(),s.pingedLanes|=s.suspendedLanes&g;break}s.timeoutHandle=Id(Ri.bind(null,s,cn,Kr),i);break}Ri(s,cn,Kr);break;case 4:if(Cs(s,d),(d&4194240)===d)break;for(i=s.eventTimes,g=-1;0<d;){var T=31-Jt(d);v=1<<T,T=i[T],T>g&&(g=T),d&=~v}if(d=g,d=Je()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*OS(d/1960))-d,10<d){s.timeoutHandle=Id(Ri.bind(null,s,cn,Kr),d);break}Ri(s,cn,Kr);break;case 5:Ri(s,cn,Kr);break;default:throw Error(t(329))}}}return un(s,Je()),s.callbackNode===l?w0.bind(null,s):null}function xf(s,i){var l=_l;return s.current.memoizedState.isDehydrated&&(Ci(s,i).flags|=256),s=Au(s,i),s!==2&&(i=cn,cn=l,i!==null&&_f(i)),s}function _f(s){cn===null?cn=s:cn.push.apply(cn,s)}function MS(s){for(var i=s;;){if(i.flags&16384){var l=i.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var d=0;d<l.length;d++){var g=l[d],v=g.getSnapshot;g=g.value;try{if(!Qn(v(),g))return!1}catch{return!1}}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Cs(s,i){for(i&=~gf,i&=~Eu,s.suspendedLanes|=i,s.pingedLanes&=~i,s=s.expirationTimes;0<i;){var l=31-Jt(i),d=1<<l;s[l]=-1,i&=~d}}function x0(s){if((ze&6)!==0)throw Error(t(327));Jo();var i=gi(s,0);if((i&1)===0)return un(s,Je()),null;var l=Au(s,i);if(s.tag!==0&&l===2){var d=gn(s);d!==0&&(i=d,l=xf(s,d))}if(l===1)throw l=xl,Ci(s,0),Cs(s,i),un(s,Je()),l;if(l===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=i,Ri(s,cn,Kr),un(s,Je()),null}function Ef(s,i){var l=ze;ze|=1;try{return s(i)}finally{ze=l,ze===0&&(Xo=Je()+500,tu&&Ss())}}function Ni(s){ks!==null&&ks.tag===0&&(ze&6)===0&&Jo();var i=ze;ze|=1;var l=Rn.transition,d=Oe;try{if(Rn.transition=null,Oe=1,s)return s()}finally{Oe=d,Rn.transition=l,ze=i,(ze&6)===0&&Ss()}}function Tf(){_n=Yo.current,nt(Yo)}function Ci(s,i){s.finishedWork=null,s.finishedLanes=0;var l=s.timeoutHandle;if(l!==-1&&(s.timeoutHandle=-1,pS(l)),vt!==null)for(l=vt.return;l!==null;){var d=l;switch(Cd(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&Zc();break;case 3:Wo(),nt(on),nt($t),qd();break;case 5:zd(d);break;case 4:Wo();break;case 13:nt(ot);break;case 19:nt(ot);break;case 10:Od(d.type._context);break;case 22:case 23:Tf()}l=l.return}if(Ct=s,vt=s=Rs(s.current,null),Mt=_n=i,It=0,xl=null,gf=Eu=ki=0,cn=_l=null,bi!==null){for(i=0;i<bi.length;i++)if(l=bi[i],d=l.interleaved,d!==null){l.interleaved=null;var g=d.next,v=l.pending;if(v!==null){var T=v.next;v.next=g,d.next=T}l.pending=d}bi=null}return s}function _0(s,i){do{var l=vt;try{if(Ld(),hu.current=mu,du){for(var d=at.memoizedState;d!==null;){var g=d.queue;g!==null&&(g.pending=null),d=d.next}du=!1}if(Ai=0,Nt=St=at=null,pl=!1,ml=0,mf.current=null,l===null||l.return===null){It=1,xl=i,vt=null;break}e:{var v=s,T=l.return,k=l,M=i;if(i=Mt,k.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){var K=M,te=k,re=te.tag;if((te.mode&1)===0&&(re===0||re===11||re===15)){var ee=te.alternate;ee?(te.updateQueue=ee.updateQueue,te.memoizedState=ee.memoizedState,te.lanes=ee.lanes):(te.updateQueue=null,te.memoizedState=null)}var he=Hy(T);if(he!==null){he.flags&=-257,Wy(he,T,k,v,i),he.mode&1&&Gy(v,K,i),i=he,M=K;var pe=i.updateQueue;if(pe===null){var me=new Set;me.add(M),i.updateQueue=me}else pe.add(M);break e}else{if((i&1)===0){Gy(v,K,i),Sf();break e}M=Error(t(426))}}else if(st&&k.mode&1){var ft=Hy(T);if(ft!==null){(ft.flags&65536)===0&&(ft.flags|=256),Wy(ft,T,k,v,i),Dd(Ko(M,k));break e}}v=M=Ko(M,k),It!==4&&(It=2),_l===null?_l=[v]:_l.push(v),v=T;do{switch(v.tag){case 3:v.flags|=65536,i&=-i,v.lanes|=i;var G=$y(v,M,i);gy(v,G);break e;case 1:k=M;var B=v.type,W=v.stateNode;if((v.flags&128)===0&&(typeof B.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(As===null||!As.has(W)))){v.flags|=65536,i&=-i,v.lanes|=i;var ae=qy(v,k,i);gy(v,ae);break e}}v=v.return}while(v!==null)}S0(l)}catch(ye){i=ye,vt===l&&l!==null&&(vt=l=l.return);continue}break}while(!0)}function E0(){var s=_u.current;return _u.current=mu,s===null?mu:s}function Sf(){(It===0||It===3||It===2)&&(It=4),Ct===null||(ki&268435455)===0&&(Eu&268435455)===0||Cs(Ct,Mt)}function Au(s,i){var l=ze;ze|=2;var d=E0();(Ct!==s||Mt!==i)&&(Kr=null,Ci(s,i));do try{US();break}catch(g){_0(s,g)}while(!0);if(Ld(),ze=l,_u.current=d,vt!==null)throw Error(t(261));return Ct=null,Mt=0,It}function US(){for(;vt!==null;)T0(vt)}function FS(){for(;vt!==null&&!Ic();)T0(vt)}function T0(s){var i=P0(s.alternate,s,_n);s.memoizedProps=s.pendingProps,i===null?S0(s):vt=i,mf.current=null}function S0(s){var i=s;do{var l=i.alternate;if(s=i.return,(i.flags&32768)===0){if(l=RS(l,i,_n),l!==null){vt=l;return}}else{if(l=jS(l,i),l!==null){l.flags&=32767,vt=l;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{It=6,vt=null;return}}if(i=i.sibling,i!==null){vt=i;return}vt=i=s}while(i!==null);It===0&&(It=5)}function Ri(s,i,l){var d=Oe,g=Rn.transition;try{Rn.transition=null,Oe=1,BS(s,i,l,d)}finally{Rn.transition=g,Oe=d}return null}function BS(s,i,l,d){do Jo();while(ks!==null);if((ze&6)!==0)throw Error(t(327));l=s.finishedWork;var g=s.finishedLanes;if(l===null)return null;if(s.finishedWork=null,s.finishedLanes=0,l===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var v=l.lanes|l.childLanes;if(Ye(s,v),s===Ct&&(vt=Ct=null,Mt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Su||(Su=!0,A0(In,function(){return Jo(),null})),v=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||v){v=Rn.transition,Rn.transition=null;var T=Oe;Oe=1;var k=ze;ze|=4,mf.current=null,VS(s,l),p0(l,s),aS(Td),vs=!!Ed,Td=Ed=null,s.current=l,LS(l),od(),ze=k,Oe=T,Rn.transition=v}else s.current=l;if(Su&&(Su=!1,ks=s,Iu=g),v=s.pendingLanes,v===0&&(As=null),Ac(l.stateNode),un(s,Je()),i!==null)for(d=s.onRecoverableError,l=0;l<i.length;l++)g=i[l],d(g.value,{componentStack:g.stack,digest:g.digest});if(Tu)throw Tu=!1,s=vf,vf=null,s;return(Iu&1)!==0&&s.tag!==0&&Jo(),v=s.pendingLanes,(v&1)!==0?s===wf?El++:(El=0,wf=s):El=0,Ss(),null}function Jo(){if(ks!==null){var s=gs(Iu),i=Rn.transition,l=Oe;try{if(Rn.transition=null,Oe=16>s?16:s,ks===null)var d=!1;else{if(s=ks,ks=null,Iu=0,(ze&6)!==0)throw Error(t(331));var g=ze;for(ze|=4,de=s.current;de!==null;){var v=de,T=v.child;if((de.flags&16)!==0){var k=v.deletions;if(k!==null){for(var M=0;M<k.length;M++){var K=k[M];for(de=K;de!==null;){var te=de;switch(te.tag){case 0:case 11:case 15:wl(8,te,v)}var re=te.child;if(re!==null)re.return=te,de=re;else for(;de!==null;){te=de;var ee=te.sibling,he=te.return;if(c0(te),te===K){de=null;break}if(ee!==null){ee.return=he,de=ee;break}de=he}}}var pe=v.alternate;if(pe!==null){var me=pe.child;if(me!==null){pe.child=null;do{var ft=me.sibling;me.sibling=null,me=ft}while(me!==null)}}de=v}}if((v.subtreeFlags&2064)!==0&&T!==null)T.return=v,de=T;else e:for(;de!==null;){if(v=de,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:wl(9,v,v.return)}var G=v.sibling;if(G!==null){G.return=v.return,de=G;break e}de=v.return}}var B=s.current;for(de=B;de!==null;){T=de;var W=T.child;if((T.subtreeFlags&2064)!==0&&W!==null)W.return=T,de=W;else e:for(T=B;de!==null;){if(k=de,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:xu(9,k)}}catch(ye){ut(k,k.return,ye)}if(k===T){de=null;break e}var ae=k.sibling;if(ae!==null){ae.return=k.return,de=ae;break e}de=k.return}}if(ze=g,Ss(),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(mi,s)}catch{}d=!0}return d}finally{Oe=l,Rn.transition=i}}return!1}function I0(s,i,l){i=Ko(l,i),i=$y(s,i,1),s=bs(s,i,1),i=tn(),s!==null&&(ps(s,1,i),un(s,i))}function ut(s,i,l){if(s.tag===3)I0(s,s,l);else for(;i!==null;){if(i.tag===3){I0(i,s,l);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(As===null||!As.has(d))){s=Ko(l,s),s=qy(i,s,1),i=bs(i,s,1),s=tn(),i!==null&&(ps(i,1,s),un(i,s));break}}i=i.return}}function zS(s,i,l){var d=s.pingCache;d!==null&&d.delete(i),i=tn(),s.pingedLanes|=s.suspendedLanes&l,Ct===s&&(Mt&l)===l&&(It===4||It===3&&(Mt&130023424)===Mt&&500>Je()-yf?Ci(s,0):gf|=l),un(s,i)}function b0(s,i){i===0&&((s.mode&1)===0?i=1:(i=_o,_o<<=1,(_o&130023424)===0&&(_o=4194304)));var l=tn();s=Gr(s,i),s!==null&&(ps(s,i,l),un(s,l))}function $S(s){var i=s.memoizedState,l=0;i!==null&&(l=i.retryLane),b0(s,l)}function qS(s,i){var l=0;switch(s.tag){case 13:var d=s.stateNode,g=s.memoizedState;g!==null&&(l=g.retryLane);break;case 19:d=s.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(i),b0(s,l)}var P0;P0=function(s,i,l){if(s!==null)if(s.memoizedProps!==i.pendingProps||on.current)ln=!0;else{if((s.lanes&l)===0&&(i.flags&128)===0)return ln=!1,CS(s,i,l);ln=(s.flags&131072)!==0}else ln=!1,st&&(i.flags&1048576)!==0&&oy(i,ru,i.index);switch(i.lanes=0,i.tag){case 2:var d=i.type;vu(s,i),s=i.pendingProps;var g=Fo(i,$t.current);Ho(i,l),g=Wd(null,i,d,s,g,l);var v=Kd();return i.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,an(d)?(v=!0,eu(i)):v=!1,i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Fd(i),g.updater=gu,i.stateNode=g,g._reactInternals=i,ef(i,d,s,l),i=sf(null,i,d,!0,v,l)):(i.tag=0,st&&v&&Nd(i),en(null,i,g,l),i=i.child),i;case 16:d=i.elementType;e:{switch(vu(s,i),s=i.pendingProps,g=d._init,d=g(d._payload),i.type=d,g=i.tag=HS(d),s=Xn(d,s),g){case 0:i=rf(null,i,d,s,l);break e;case 1:i=Zy(null,i,d,s,l);break e;case 11:i=Ky(null,i,d,s,l);break e;case 14:i=Qy(null,i,d,Xn(d.type,s),l);break e}throw Error(t(306,d,""))}return i;case 0:return d=i.type,g=i.pendingProps,g=i.elementType===d?g:Xn(d,g),rf(s,i,d,g,l);case 1:return d=i.type,g=i.pendingProps,g=i.elementType===d?g:Xn(d,g),Zy(s,i,d,g,l);case 3:e:{if(e0(i),s===null)throw Error(t(387));d=i.pendingProps,v=i.memoizedState,g=v.element,my(s,i),cu(i,d,null,l);var T=i.memoizedState;if(d=T.element,v.isDehydrated)if(v={element:d,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},i.updateQueue.baseState=v,i.memoizedState=v,i.flags&256){g=Ko(Error(t(423)),i),i=t0(s,i,d,l,g);break e}else if(d!==g){g=Ko(Error(t(424)),i),i=t0(s,i,d,l,g);break e}else for(xn=_s(i.stateNode.containerInfo.firstChild),wn=i,st=!0,Yn=null,l=fy(i,null,d,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if($o(),d===g){i=Wr(s,i,l);break e}en(s,i,d,l)}i=i.child}return i;case 5:return vy(i),s===null&&jd(i),d=i.type,g=i.pendingProps,v=s!==null?s.memoizedProps:null,T=g.children,Sd(d,g)?T=null:v!==null&&Sd(d,v)&&(i.flags|=32),Jy(s,i),en(s,i,T,l),i.child;case 6:return s===null&&jd(i),null;case 13:return n0(s,i,l);case 4:return Bd(i,i.stateNode.containerInfo),d=i.pendingProps,s===null?i.child=qo(i,null,d,l):en(s,i,d,l),i.child;case 11:return d=i.type,g=i.pendingProps,g=i.elementType===d?g:Xn(d,g),Ky(s,i,d,g,l);case 7:return en(s,i,i.pendingProps,l),i.child;case 8:return en(s,i,i.pendingProps.children,l),i.child;case 12:return en(s,i,i.pendingProps.children,l),i.child;case 10:e:{if(d=i.type._context,g=i.pendingProps,v=i.memoizedProps,T=g.value,Ze(ou,d._currentValue),d._currentValue=T,v!==null)if(Qn(v.value,T)){if(v.children===g.children&&!on.current){i=Wr(s,i,l);break e}}else for(v=i.child,v!==null&&(v.return=i);v!==null;){var k=v.dependencies;if(k!==null){T=v.child;for(var M=k.firstContext;M!==null;){if(M.context===d){if(v.tag===1){M=Hr(-1,l&-l),M.tag=2;var K=v.updateQueue;if(K!==null){K=K.shared;var te=K.pending;te===null?M.next=M:(M.next=te.next,te.next=M),K.pending=M}}v.lanes|=l,M=v.alternate,M!==null&&(M.lanes|=l),Md(v.return,l,i),k.lanes|=l;break}M=M.next}}else if(v.tag===10)T=v.type===i.type?null:v.child;else if(v.tag===18){if(T=v.return,T===null)throw Error(t(341));T.lanes|=l,k=T.alternate,k!==null&&(k.lanes|=l),Md(T,l,i),T=v.sibling}else T=v.child;if(T!==null)T.return=v;else for(T=v;T!==null;){if(T===i){T=null;break}if(v=T.sibling,v!==null){v.return=T.return,T=v;break}T=T.return}v=T}en(s,i,g.children,l),i=i.child}return i;case 9:return g=i.type,d=i.pendingProps.children,Ho(i,l),g=Nn(g),d=d(g),i.flags|=1,en(s,i,d,l),i.child;case 14:return d=i.type,g=Xn(d,i.pendingProps),g=Xn(d.type,g),Qy(s,i,d,g,l);case 15:return Yy(s,i,i.type,i.pendingProps,l);case 17:return d=i.type,g=i.pendingProps,g=i.elementType===d?g:Xn(d,g),vu(s,i),i.tag=1,an(d)?(s=!0,eu(i)):s=!1,Ho(i,l),By(i,d,g),ef(i,d,g,l),sf(null,i,d,!0,s,l);case 19:return s0(s,i,l);case 22:return Xy(s,i,l)}throw Error(t(156,i.tag))};function A0(s,i){return wo(s,i)}function GS(s,i,l,d){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(s,i,l,d){return new GS(s,i,l,d)}function If(s){return s=s.prototype,!(!s||!s.isReactComponent)}function HS(s){if(typeof s=="function")return If(s)?1:0;if(s!=null){if(s=s.$$typeof,s===z)return 11;if(s===$e)return 14}return 2}function Rs(s,i){var l=s.alternate;return l===null?(l=jn(s.tag,i,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=i,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&14680064,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,i=s.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l}function ku(s,i,l,d,g,v){var T=2;if(d=s,typeof s=="function")If(s)&&(T=1);else if(typeof s=="string")T=5;else e:switch(s){case C:return ji(l.children,g,v,i);case b:T=8,g|=8;break;case P:return s=jn(12,l,i,g|2),s.elementType=P,s.lanes=v,s;case N:return s=jn(13,l,i,g),s.elementType=N,s.lanes=v,s;case be:return s=jn(19,l,i,g),s.elementType=be,s.lanes=v,s;case Ne:return Nu(l,g,v,i);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case V:T=10;break e;case U:T=9;break e;case z:T=11;break e;case $e:T=14;break e;case Re:T=16,d=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return i=jn(T,l,i,g),i.elementType=s,i.type=d,i.lanes=v,i}function ji(s,i,l,d){return s=jn(7,s,d,i),s.lanes=l,s}function Nu(s,i,l,d){return s=jn(22,s,d,i),s.elementType=Ne,s.lanes=l,s.stateNode={isHidden:!1},s}function bf(s,i,l){return s=jn(6,s,null,i),s.lanes=l,s}function Pf(s,i,l){return i=jn(4,s.children!==null?s.children:[],s.key,i),i.lanes=l,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}function WS(s,i,l,d,g){this.tag=i,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fs(0),this.expirationTimes=fs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fs(0),this.identifierPrefix=d,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Af(s,i,l,d,g,v,T,k,M){return s=new WS(s,i,l,k,M),i===1?(i=1,v===!0&&(i|=8)):i=0,v=jn(3,null,null,i),s.current=v,v.stateNode=s,v.memoizedState={element:d,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fd(v),s}function KS(s,i,l){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ie,key:d==null?null:""+d,children:s,containerInfo:i,implementation:l}}function k0(s){if(!s)return Ts;s=s._reactInternals;e:{if(zn(s)!==s||s.tag!==1)throw Error(t(170));var i=s;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(an(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(s.tag===1){var l=s.type;if(an(l))return ry(s,l,i)}return i}function N0(s,i,l,d,g,v,T,k,M){return s=Af(l,d,!0,s,g,v,T,k,M),s.context=k0(null),l=s.current,d=tn(),g=Ns(l),v=Hr(d,g),v.callback=i??null,bs(l,v,g),s.current.lanes=g,ps(s,g,d),un(s,d),s}function Cu(s,i,l,d){var g=i.current,v=tn(),T=Ns(g);return l=k0(l),i.context===null?i.context=l:i.pendingContext=l,i=Hr(v,T),i.payload={element:s},d=d===void 0?null:d,d!==null&&(i.callback=d),s=bs(g,i,T),s!==null&&(er(s,g,T,v),lu(s,g,T)),T}function Ru(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function C0(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<i?l:i}}function kf(s,i){C0(s,i),(s=s.alternate)&&C0(s,i)}function QS(){return null}var R0=typeof reportError=="function"?reportError:function(s){console.error(s)};function Nf(s){this._internalRoot=s}ju.prototype.render=Nf.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(t(409));Cu(s,i,null,null)},ju.prototype.unmount=Nf.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;Ni(function(){Cu(null,s,null,null)}),i[Br]=null}};function ju(s){this._internalRoot=s}ju.prototype.unstable_scheduleHydration=function(s){if(s){var i=jc();s={blockedOn:null,target:s,priority:i};for(var l=0;l<dr.length&&i!==0&&i<dr[l].priority;l++);dr.splice(l,0,s),l===0&&Lc(s)}};function Cf(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Du(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function j0(){}function YS(s,i,l,d,g){if(g){if(typeof d=="function"){var v=d;d=function(){var K=Ru(T);v.call(K)}}var T=N0(i,d,s,0,null,!1,!1,"",j0);return s._reactRootContainer=T,s[Br]=T.current,ol(s.nodeType===8?s.parentNode:s),Ni(),T}for(;g=s.lastChild;)s.removeChild(g);if(typeof d=="function"){var k=d;d=function(){var K=Ru(M);k.call(K)}}var M=Af(s,0,!1,null,null,!1,!1,"",j0);return s._reactRootContainer=M,s[Br]=M.current,ol(s.nodeType===8?s.parentNode:s),Ni(function(){Cu(i,M,l,d)}),M}function Vu(s,i,l,d,g){var v=l._reactRootContainer;if(v){var T=v;if(typeof g=="function"){var k=g;g=function(){var M=Ru(T);k.call(M)}}Cu(i,T,s,g)}else T=YS(l,i,s,g,d);return Ru(T)}Cc=function(s){switch(s.tag){case 3:var i=s.stateNode;if(i.current.memoizedState.isDehydrated){var l=ds(i.pendingLanes);l!==0&&(ms(i,l|1),un(i,Je()),(ze&6)===0&&(Xo=Je()+500,Ss()))}break;case 13:Ni(function(){var d=Gr(s,1);if(d!==null){var g=tn();er(d,s,1,g)}}),kf(s,1)}},Eo=function(s){if(s.tag===13){var i=Gr(s,134217728);if(i!==null){var l=tn();er(i,s,134217728,l)}kf(s,134217728)}},Rc=function(s){if(s.tag===13){var i=Ns(s),l=Gr(s,i);if(l!==null){var d=tn();er(l,s,i,d)}kf(s,i)}},jc=function(){return Oe},Dc=function(s,i){var l=Oe;try{return Oe=s,i()}finally{Oe=l}},fo=function(s,i,l){switch(i){case"input":if(Ca(s,l),i=l.name,l.type==="radio"&&i!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<l.length;i++){var d=l[i];if(d!==s&&d.form===s.form){var g=Jc(d);if(!g)throw Error(t(90));ii(d),Ca(d,g)}}}break;case"textarea":uo(s,l);break;case"select":i=l.value,i!=null&&jr(s,!!l.multiple,i,!1)}},ui=Ef,Ba=Ni;var XS={usingClientEntryPoint:!1,Events:[cl,Mo,Jc,ur,Fa,Ef]},Tl={findFiberByHostInstance:Ei,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},JS={bundleType:Tl.bundleType,version:Tl.version,rendererPackageName:Tl.rendererPackageName,rendererConfig:Tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Q.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=qa(s),s===null?null:s.stateNode},findFiberByHostInstance:Tl.findFiberByHostInstance||QS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lu.isDisabled&&Lu.supportsFiber)try{mi=Lu.inject(JS),mn=Lu}catch{}}return hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XS,hn.createPortal=function(s,i){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cf(i))throw Error(t(200));return KS(s,i,null,l)},hn.createRoot=function(s,i){if(!Cf(s))throw Error(t(299));var l=!1,d="",g=R0;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onRecoverableError!==void 0&&(g=i.onRecoverableError)),i=Af(s,1,!1,null,null,l,!1,d,g),s[Br]=i.current,ol(s.nodeType===8?s.parentNode:s),new Nf(i)},hn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=qa(i),s=s===null?null:s.stateNode,s},hn.flushSync=function(s){return Ni(s)},hn.hydrate=function(s,i,l){if(!Du(i))throw Error(t(200));return Vu(null,s,i,!0,l)},hn.hydrateRoot=function(s,i,l){if(!Cf(s))throw Error(t(405));var d=l!=null&&l.hydratedSources||null,g=!1,v="",T=R0;if(l!=null&&(l.unstable_strictMode===!0&&(g=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onRecoverableError!==void 0&&(T=l.onRecoverableError)),i=N0(i,null,s,1,l??null,g,!1,v,T),s[Br]=i.current,ol(s),d)for(s=0;s<d.length;s++)l=d[s],g=l._getVersion,g=g(l._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[l,g]:i.mutableSourceEagerHydrationData.push(l,g);return new ju(i)},hn.render=function(s,i,l){if(!Du(i))throw Error(t(200));return Vu(null,s,i,!1,l)},hn.unmountComponentAtNode=function(s){if(!Du(s))throw Error(t(40));return s._reactRootContainer?(Ni(function(){Vu(null,null,s,!1,function(){s._reactRootContainer=null,s[Br]=null})}),!0):!1},hn.unstable_batchedUpdates=Ef,hn.unstable_renderSubtreeIntoContainer=function(s,i,l,d){if(!Du(l))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Vu(s,i,l,!1,d)},hn.version="18.3.1-next-f1338f8080-20240426",hn}var B0;function kx(){if(B0)return Df.exports;B0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Df.exports=lI(),Df.exports}var z0;function cI(){if(z0)return Ou;z0=1;var n=kx();return Ou.createRoot=n.createRoot,Ou.hydrateRoot=n.hydrateRoot,Ou}var uI=cI();kx();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ql(){return ql=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ql.apply(this,arguments)}var $s;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})($s||($s={}));const $0="popstate";function hI(n){n===void 0&&(n={});function e(r,o){let{pathname:a,search:c,hash:h}=r.location;return dp("",{pathname:a,search:c,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(r,o){return typeof o=="string"?o:ih(o)}return fI(e,t,null,n)}function gt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Nx(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function dI(){return Math.random().toString(36).substr(2,8)}function q0(n,e){return{usr:n.state,key:n.key,idx:e}}function dp(n,e,t,r){return t===void 0&&(t=null),ql({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Ta(e):e,{state:t,key:e&&e.key||r||dI()})}function ih(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ta(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function fI(n,e,t,r){r===void 0&&(r={});let{window:o=document.defaultView,v5Compat:a=!1}=r,c=o.history,h=$s.Pop,p=null,m=w();m==null&&(m=0,c.replaceState(ql({},c.state,{idx:m}),""));function w(){return(c.state||{idx:null}).idx}function x(){h=$s.Pop;let A=w(),F=A==null?null:A-m;m=A,p&&p({action:h,location:j.location,delta:F})}function E(A,F){h=$s.Push;let H=dp(j.location,A,F);m=w()+1;let O=q0(H,m),Q=j.createHref(H);try{c.pushState(O,"",Q)}catch(Z){if(Z instanceof DOMException&&Z.name==="DataCloneError")throw Z;o.location.assign(Q)}a&&p&&p({action:h,location:j.location,delta:1})}function I(A,F){h=$s.Replace;let H=dp(j.location,A,F);m=w();let O=q0(H,m),Q=j.createHref(H);c.replaceState(O,"",Q),a&&p&&p({action:h,location:j.location,delta:0})}function D(A){let F=o.location.origin!=="null"?o.location.origin:o.location.href,H=typeof A=="string"?A:ih(A);return H=H.replace(/ $/,"%20"),gt(F,"No window.location.(origin|href) available to create URL for href: "+H),new URL(H,F)}let j={get action(){return h},get location(){return n(o,c)},listen(A){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener($0,x),p=A,()=>{o.removeEventListener($0,x),p=null}},createHref(A){return e(o,A)},createURL:D,encodeLocation(A){let F=D(A);return{pathname:F.pathname,search:F.search,hash:F.hash}},push:E,replace:I,go(A){return c.go(A)}};return j}var G0;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(G0||(G0={}));function pI(n,e,t){return t===void 0&&(t="/"),mI(n,e,t)}function mI(n,e,t,r){let o=typeof e=="string"?Ta(e):e,a=im(o.pathname||"/",t);if(a==null)return null;let c=Cx(n);gI(c);let h=null;for(let p=0;h==null&&p<c.length;++p){let m=AI(a);h=II(c[p],m)}return h}function Cx(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let o=(a,c,h)=>{let p={relativePath:h===void 0?a.path||"":h,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};p.relativePath.startsWith("/")&&(gt(p.relativePath.startsWith(r),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(r.length));let m=Gs([r,p.relativePath]),w=t.concat(p);a.children&&a.children.length>0&&(gt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),Cx(a.children,e,w,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:TI(m,a.index),routesMeta:w})};return n.forEach((a,c)=>{var h;if(a.path===""||!((h=a.path)!=null&&h.includes("?")))o(a,c);else for(let p of Rx(a.path))o(a,c,p)}),e}function Rx(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,o=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return o?[a,""]:[a];let c=Rx(r.join("/")),h=[];return h.push(...c.map(p=>p===""?a:[a,p].join("/"))),o&&h.push(...c),h.map(p=>n.startsWith("/")&&p===""?"/":p)}function gI(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:SI(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const yI=/^:[\w-]+$/,vI=3,wI=2,xI=1,_I=10,EI=-2,H0=n=>n==="*";function TI(n,e){let t=n.split("/"),r=t.length;return t.some(H0)&&(r+=EI),e&&(r+=wI),t.filter(o=>!H0(o)).reduce((o,a)=>o+(yI.test(a)?vI:a===""?xI:_I),r)}function SI(n,e){return n.length===e.length&&n.slice(0,-1).every((r,o)=>r===e[o])?n[n.length-1]-e[e.length-1]:0}function II(n,e,t){let{routesMeta:r}=n,o={},a="/",c=[];for(let h=0;h<r.length;++h){let p=r[h],m=h===r.length-1,w=a==="/"?e:e.slice(a.length)||"/",x=bI({path:p.relativePath,caseSensitive:p.caseSensitive,end:m},w),E=p.route;if(!x)return null;Object.assign(o,x.params),c.push({params:o,pathname:Gs([a,x.pathname]),pathnameBase:RI(Gs([a,x.pathnameBase])),route:E}),x.pathnameBase!=="/"&&(a=Gs([a,x.pathnameBase]))}return c}function bI(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=PI(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let a=o[0],c=a.replace(/(.)\/+$/,"$1"),h=o.slice(1);return{params:r.reduce((m,w,x)=>{let{paramName:E,isOptional:I}=w;if(E==="*"){let j=h[x]||"";c=a.slice(0,a.length-j.length).replace(/(.)\/+$/,"$1")}const D=h[x];return I&&!D?m[E]=void 0:m[E]=(D||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:c,pattern:n}}function PI(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Nx(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,p)=>(r.push({paramName:h,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function AI(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Nx(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function im(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function kI(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:o=""}=typeof n=="string"?Ta(n):n;return{pathname:t?t.startsWith("/")?t:NI(t,e):e,search:jI(r),hash:DI(o)}}function NI(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Of(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function CI(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function om(n,e){let t=CI(n);return e?t.map((r,o)=>o===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function am(n,e,t,r){r===void 0&&(r=!1);let o;typeof n=="string"?o=Ta(n):(o=ql({},n),gt(!o.pathname||!o.pathname.includes("?"),Of("?","pathname","search",o)),gt(!o.pathname||!o.pathname.includes("#"),Of("#","pathname","hash",o)),gt(!o.search||!o.search.includes("#"),Of("#","search","hash",o)));let a=n===""||o.pathname==="",c=a?"/":o.pathname,h;if(c==null)h=t;else{let x=e.length-1;if(!r&&c.startsWith("..")){let E=c.split("/");for(;E[0]==="..";)E.shift(),x-=1;o.pathname=E.join("/")}h=x>=0?e[x]:"/"}let p=kI(o,h),m=c&&c!=="/"&&c.endsWith("/"),w=(a||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(m||w)&&(p.pathname+="/"),p}const Gs=n=>n.join("/").replace(/\/\/+/g,"/"),RI=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),jI=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,DI=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function VI(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const jx=["post","put","patch","delete"];new Set(jx);const LI=["get",...jx];new Set(LI);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gl(){return Gl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Gl.apply(this,arguments)}const lm=R.createContext(null),OI=R.createContext(null),ni=R.createContext(null),jh=R.createContext(null),ls=R.createContext({outlet:null,matches:[],isDataRoute:!1}),Dx=R.createContext(null);function MI(n,e){let{relative:t}=e===void 0?{}:e;Sa()||gt(!1);let{basename:r,navigator:o}=R.useContext(ni),{hash:a,pathname:c,search:h}=Ox(n,{relative:t}),p=c;return r!=="/"&&(p=c==="/"?r:Gs([r,c])),o.createHref({pathname:p,search:h,hash:a})}function Sa(){return R.useContext(jh)!=null}function Zi(){return Sa()||gt(!1),R.useContext(jh).location}function Vx(n){R.useContext(ni).static||R.useLayoutEffect(n)}function ar(){let{isDataRoute:n}=R.useContext(ls);return n?XI():UI()}function UI(){Sa()||gt(!1);let n=R.useContext(lm),{basename:e,future:t,navigator:r}=R.useContext(ni),{matches:o}=R.useContext(ls),{pathname:a}=Zi(),c=JSON.stringify(om(o,t.v7_relativeSplatPath)),h=R.useRef(!1);return Vx(()=>{h.current=!0}),R.useCallback(function(m,w){if(w===void 0&&(w={}),!h.current)return;if(typeof m=="number"){r.go(m);return}let x=am(m,JSON.parse(c),a,w.relative==="path");n==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:Gs([e,x.pathname])),(w.replace?r.replace:r.push)(x,w.state,w)},[e,r,c,a,n])}function Lx(){let{matches:n}=R.useContext(ls),e=n[n.length-1];return e?e.params:{}}function Ox(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=R.useContext(ni),{matches:o}=R.useContext(ls),{pathname:a}=Zi(),c=JSON.stringify(om(o,r.v7_relativeSplatPath));return R.useMemo(()=>am(n,JSON.parse(c),a,t==="path"),[n,c,a,t])}function FI(n,e){return BI(n,e)}function BI(n,e,t,r){Sa()||gt(!1);let{navigator:o}=R.useContext(ni),{matches:a}=R.useContext(ls),c=a[a.length-1],h=c?c.params:{};c&&c.pathname;let p=c?c.pathnameBase:"/";c&&c.route;let m=Zi(),w;if(e){var x;let A=typeof e=="string"?Ta(e):e;p==="/"||(x=A.pathname)!=null&&x.startsWith(p)||gt(!1),w=A}else w=m;let E=w.pathname||"/",I=E;if(p!=="/"){let A=p.replace(/^\//,"").split("/");I="/"+E.replace(/^\//,"").split("/").slice(A.length).join("/")}let D=pI(n,{pathname:I}),j=HI(D&&D.map(A=>Object.assign({},A,{params:Object.assign({},h,A.params),pathname:Gs([p,o.encodeLocation?o.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?p:Gs([p,o.encodeLocation?o.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),a,t,r);return e&&j?R.createElement(jh.Provider,{value:{location:Gl({pathname:"/",search:"",hash:"",state:null,key:"default"},w),navigationType:$s.Pop}},j):j}function zI(){let n=YI(),e=VI(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),t?R.createElement("pre",{style:o},t):null,null)}const $I=R.createElement(zI,null);class qI extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?R.createElement(ls.Provider,{value:this.props.routeContext},R.createElement(Dx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function GI(n){let{routeContext:e,match:t,children:r}=n,o=R.useContext(lm);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),R.createElement(ls.Provider,{value:e},r)}function HI(n,e,t,r){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let c=n,h=(o=t)==null?void 0:o.errors;if(h!=null){let w=c.findIndex(x=>x.route.id&&h?.[x.route.id]!==void 0);w>=0||gt(!1),c=c.slice(0,Math.min(c.length,w+1))}let p=!1,m=-1;if(t&&r&&r.v7_partialHydration)for(let w=0;w<c.length;w++){let x=c[w];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(m=w),x.route.id){let{loaderData:E,errors:I}=t,D=x.route.loader&&E[x.route.id]===void 0&&(!I||I[x.route.id]===void 0);if(x.route.lazy||D){p=!0,m>=0?c=c.slice(0,m+1):c=[c[0]];break}}}return c.reduceRight((w,x,E)=>{let I,D=!1,j=null,A=null;t&&(I=h&&x.route.id?h[x.route.id]:void 0,j=x.route.errorElement||$I,p&&(m<0&&E===0?(JI("route-fallback"),D=!0,A=null):m===E&&(D=!0,A=x.route.hydrateFallbackElement||null)));let F=e.concat(c.slice(0,E+1)),H=()=>{let O;return I?O=j:D?O=A:x.route.Component?O=R.createElement(x.route.Component,null):x.route.element?O=x.route.element:O=w,R.createElement(GI,{match:x,routeContext:{outlet:w,matches:F,isDataRoute:t!=null},children:O})};return t&&(x.route.ErrorBoundary||x.route.errorElement||E===0)?R.createElement(qI,{location:t.location,revalidation:t.revalidation,component:j,error:I,children:H(),routeContext:{outlet:null,matches:F,isDataRoute:!0}}):H()},null)}var Mx=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(Mx||{}),Ux=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Ux||{});function WI(n){let e=R.useContext(lm);return e||gt(!1),e}function KI(n){let e=R.useContext(OI);return e||gt(!1),e}function QI(n){let e=R.useContext(ls);return e||gt(!1),e}function Fx(n){let e=QI(),t=e.matches[e.matches.length-1];return t.route.id||gt(!1),t.route.id}function YI(){var n;let e=R.useContext(Dx),t=KI(),r=Fx();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function XI(){let{router:n}=WI(Mx.UseNavigateStable),e=Fx(Ux.UseNavigateStable),t=R.useRef(!1);return Vx(()=>{t.current=!0}),R.useCallback(function(o,a){a===void 0&&(a={}),t.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,Gl({fromRouteId:e},a)))},[n,e])}const W0={};function JI(n,e,t){W0[n]||(W0[n]=!0)}function ZI(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function Bx(n){let{to:e,replace:t,state:r,relative:o}=n;Sa()||gt(!1);let{future:a,static:c}=R.useContext(ni),{matches:h}=R.useContext(ls),{pathname:p}=Zi(),m=ar(),w=am(e,om(h,a.v7_relativeSplatPath),p,o==="path"),x=JSON.stringify(w);return R.useEffect(()=>m(JSON.parse(x),{replace:t,state:r,relative:o}),[m,x,o,t,r]),null}function tr(n){gt(!1)}function eb(n){let{basename:e="/",children:t=null,location:r,navigationType:o=$s.Pop,navigator:a,static:c=!1,future:h}=n;Sa()&&gt(!1);let p=e.replace(/^\/*/,"/"),m=R.useMemo(()=>({basename:p,navigator:a,static:c,future:Gl({v7_relativeSplatPath:!1},h)}),[p,h,a,c]);typeof r=="string"&&(r=Ta(r));let{pathname:w="/",search:x="",hash:E="",state:I=null,key:D="default"}=r,j=R.useMemo(()=>{let A=im(w,p);return A==null?null:{location:{pathname:A,search:x,hash:E,state:I,key:D},navigationType:o}},[p,w,x,E,I,D,o]);return j==null?null:R.createElement(ni.Provider,{value:m},R.createElement(jh.Provider,{children:t,value:j}))}function tb(n){let{children:e,location:t}=n;return FI(fp(e),t)}new Promise(()=>{});function fp(n,e){e===void 0&&(e=[]);let t=[];return R.Children.forEach(n,(r,o)=>{if(!R.isValidElement(r))return;let a=[...e,o];if(r.type===R.Fragment){t.push.apply(t,fp(r.props.children,a));return}r.type!==tr&&gt(!1),!r.props.index||!r.props.children||gt(!1);let c={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=fp(r.props.children,a)),t.push(c)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pp(){return pp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},pp.apply(this,arguments)}function nb(n,e){if(n==null)return{};var t={},r=Object.keys(n),o,a;for(a=0;a<r.length;a++)o=r[a],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function rb(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function sb(n,e){return n.button===0&&(!e||e==="_self")&&!rb(n)}function mp(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(o=>[t,o]):[[t,r]])},[]))}function ib(n,e){let t=mp(n);return e&&e.forEach((r,o)=>{t.has(o)||e.getAll(o).forEach(a=>{t.append(o,a)})}),t}const ob=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ab="6";try{window.__reactRouterVersion=ab}catch{}const lb="startTransition",K0=iI[lb];function cb(n){let{basename:e,children:t,future:r,window:o}=n,a=R.useRef();a.current==null&&(a.current=hI({window:o,v5Compat:!0}));let c=a.current,[h,p]=R.useState({action:c.action,location:c.location}),{v7_startTransition:m}=r||{},w=R.useCallback(x=>{m&&K0?K0(()=>p(x)):p(x)},[p,m]);return R.useLayoutEffect(()=>c.listen(w),[c,w]),R.useEffect(()=>ZI(r),[r]),R.createElement(eb,{basename:e,children:t,location:h.location,navigationType:h.action,navigator:c,future:r})}const ub=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",hb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,We=R.forwardRef(function(e,t){let{onClick:r,relative:o,reloadDocument:a,replace:c,state:h,target:p,to:m,preventScrollReset:w,viewTransition:x}=e,E=nb(e,ob),{basename:I}=R.useContext(ni),D,j=!1;if(typeof m=="string"&&hb.test(m)&&(D=m,ub))try{let O=new URL(window.location.href),Q=m.startsWith("//")?new URL(O.protocol+m):new URL(m),Z=im(Q.pathname,I);Q.origin===O.origin&&Z!=null?m=Z+Q.search+Q.hash:j=!0}catch{}let A=MI(m,{relative:o}),F=db(m,{replace:c,state:h,target:p,preventScrollReset:w,relative:o,viewTransition:x});function H(O){r&&r(O),O.defaultPrevented||F(O)}return R.createElement("a",pp({},E,{href:D||A,onClick:j||a?r:H,ref:t,target:p}))});var Q0;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Q0||(Q0={}));var Y0;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Y0||(Y0={}));function db(n,e){let{target:t,replace:r,state:o,preventScrollReset:a,relative:c,viewTransition:h}=e===void 0?{}:e,p=ar(),m=Zi(),w=Ox(n,{relative:c});return R.useCallback(x=>{if(sb(x,t)){x.preventDefault();let E=r!==void 0?r:ih(m)===ih(w);p(n,{replace:E,state:o,preventScrollReset:a,relative:c,viewTransition:h})}},[m,p,w,r,o,t,n,a,c,h])}function fb(n){let e=R.useRef(mp(n)),t=R.useRef(!1),r=Zi(),o=R.useMemo(()=>ib(r.search,t.current?null:e.current),[r.search]),a=ar(),c=R.useCallback((h,p)=>{const m=mp(typeof h=="function"?h(o):h);t.current=!0,a("?"+m,p)},[a,o]);return[o,c]}var X0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let o=n.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},pb=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const o=n[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[r++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],c=n[t++],h=n[t++],p=((o&7)<<18|(a&63)<<12|(c&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const a=n[t++],c=n[t++];e[r++]=String.fromCharCode((o&15)<<12|(a&63)<<6|c&63)}}return e.join("")},$x={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<n.length;o+=3){const a=n[o],c=o+1<n.length,h=c?n[o+1]:0,p=o+2<n.length,m=p?n[o+2]:0,w=a>>2,x=(a&3)<<4|h>>4;let E=(h&15)<<2|m>>6,I=m&63;p||(I=64,c||(E=64)),r.push(t[w],t[x],t[E],t[I])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(zx(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):pb(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],h=o<n.length?t[n.charAt(o)]:0;++o;const m=o<n.length?t[n.charAt(o)]:64;++o;const x=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||h==null||m==null||x==null)throw new mb;const E=a<<2|h>>4;if(r.push(E),m!==64){const I=h<<4&240|m>>2;if(r.push(I),x!==64){const D=m<<6&192|x;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class mb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gb=function(n){const e=zx(n);return $x.encodeByteArray(e,!0)},oh=function(n){return gb(n).replace(/\./g,"")},qx=function(n){try{return $x.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb=()=>yb().__FIREBASE_DEFAULTS__,wb=()=>{if(typeof process>"u"||typeof X0>"u")return;const n=X0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},xb=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&qx(n[1]);return e&&JSON.parse(e)},Dh=()=>{try{return vb()||wb()||xb()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Gx=n=>{var e,t;return(t=(e=Dh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},_b=n=>{const e=Gx(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Hx=()=>{var n;return(n=Dh())===null||n===void 0?void 0:n.config},Wx=n=>{var e;return(e=Dh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[oh(JSON.stringify(t)),oh(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Sb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xt())}function Ib(){var n;const e=(n=Dh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Kx(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Pb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ab(){const n=Xt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function kb(){return!Ib()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Qx(){try{return typeof indexedDB=="object"}catch{return!1}}function Yx(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}function Nb(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb="FirebaseError";class lr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Cb,Object.setPrototypeOf(this,lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,eo.prototype.create)}}class eo{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],c=a?Rb(a,r):"Error",h=`${this.serviceName}: ${c} (${o}).`;return new lr(o,h,r)}}function Rb(n,e){return n.replace(jb,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const jb=/\{\$([^}]+)}/g;function Db(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Hl(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const a=n[o],c=e[o];if(J0(a)&&J0(c)){if(!Hl(a,c))return!1}else if(a!==c)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function J0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ac(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Al(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,a]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function kl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Vb(n,e){const t=new Lb(n,e);return t.subscribe.bind(t)}class Lb{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Ob(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=Mf),o.error===void 0&&(o.error=Mf),o.complete===void 0&&(o.complete=Mf);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ob(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Mf(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb=1e3,Ub=2,Fb=14400*1e3,Bb=.5;function Z0(n,e=Mb,t=Ub){const r=e*Math.pow(t,n),o=Math.round(Bb*r*(Math.random()-.5)*2);return Math.min(Fb,r+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(n){return n&&n._delegate?n._delegate:n}class ir{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Eb;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qb(e))try{this.getOrInitializeService({instanceIdentifier:Vi})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});r.resolve(a)}catch{}}}}clearInstance(e=Vi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vi){return this.instances.has(e)}getOptions(e=Vi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);r===h&&c.resolve(o)}return o}onInit(e,t){var r;const o=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(o,a);const c=this.instances.get(o);return c&&e(c,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$b(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Vi){return this.component?this.component.multipleInstances?e:Vi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $b(n){return n===Vi?void 0:n}function qb(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new zb(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Me||(Me={}));const Hb={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},Wb=Me.INFO,Kb={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},Qb=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),o=Kb[e];if(o)console[o](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vh{constructor(e){this.name=e,this._logLevel=Wb,this._logHandler=Qb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Hb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}const Yb=(n,e)=>e.some(t=>n instanceof t);let ev,tv;function Xb(){return ev||(ev=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Jb(){return tv||(tv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Xx=new WeakMap,gp=new WeakMap,Jx=new WeakMap,Uf=new WeakMap,cm=new WeakMap;function Zb(n){const e=new Promise((t,r)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{t(Hs(n.result)),o()},c=()=>{r(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Xx.set(t,n)}).catch(()=>{}),cm.set(e,n),e}function eP(n){if(gp.has(n))return;const e=new Promise((t,r)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{t(),o()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});gp.set(n,e)}let yp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return gp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Jx.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Hs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function tP(n){yp=n(yp)}function nP(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Ff(this),e,...t);return Jx.set(r,e.sort?e.sort():[e]),Hs(r)}:Jb().includes(n)?function(...e){return n.apply(Ff(this),e),Hs(Xx.get(this))}:function(...e){return Hs(n.apply(Ff(this),e))}}function rP(n){return typeof n=="function"?nP(n):(n instanceof IDBTransaction&&eP(n),Yb(n,Xb())?new Proxy(n,yp):n)}function Hs(n){if(n instanceof IDBRequest)return Zb(n);if(Uf.has(n))return Uf.get(n);const e=rP(n);return e!==n&&(Uf.set(n,e),cm.set(e,n)),e}const Ff=n=>cm.get(n);function Zx(n,e,{blocked:t,upgrade:r,blocking:o,terminated:a}={}){const c=indexedDB.open(n,e),h=Hs(c);return r&&c.addEventListener("upgradeneeded",p=>{r(Hs(c.result),p.oldVersion,p.newVersion,Hs(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),h.then(p=>{a&&p.addEventListener("close",()=>a()),o&&p.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const sP=["get","getKey","getAll","getAllKeys","count"],iP=["put","add","delete","clear"],Bf=new Map;function nv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Bf.get(e))return Bf.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=iP.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||sP.includes(t)))return;const a=async function(c,...h){const p=this.transaction(c,o?"readwrite":"readonly");let m=p.store;return r&&(m=m.index(h.shift())),(await Promise.all([m[t](...h),o&&p.done]))[0]};return Bf.set(e,a),a}tP(n=>({...n,get:(e,t,r)=>nv(e,t)||n.get(e,t,r),has:(e,t)=>!!nv(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(aP(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function aP(n){const e=n.getComponent();return e?.type==="VERSION"}const vp="@firebase/app",rv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=new Vh("@firebase/app"),lP="@firebase/app-compat",cP="@firebase/analytics-compat",uP="@firebase/analytics",hP="@firebase/app-check-compat",dP="@firebase/app-check",fP="@firebase/auth",pP="@firebase/auth-compat",mP="@firebase/database",gP="@firebase/data-connect",yP="@firebase/database-compat",vP="@firebase/functions",wP="@firebase/functions-compat",xP="@firebase/installations",_P="@firebase/installations-compat",EP="@firebase/messaging",TP="@firebase/messaging-compat",SP="@firebase/performance",IP="@firebase/performance-compat",bP="@firebase/remote-config",PP="@firebase/remote-config-compat",AP="@firebase/storage",kP="@firebase/storage-compat",NP="@firebase/firestore",CP="@firebase/vertexai-preview",RP="@firebase/firestore-compat",jP="firebase",DP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp="[DEFAULT]",VP={[vp]:"fire-core",[lP]:"fire-core-compat",[uP]:"fire-analytics",[cP]:"fire-analytics-compat",[dP]:"fire-app-check",[hP]:"fire-app-check-compat",[fP]:"fire-auth",[pP]:"fire-auth-compat",[mP]:"fire-rtdb",[gP]:"fire-data-connect",[yP]:"fire-rtdb-compat",[vP]:"fire-fn",[wP]:"fire-fn-compat",[xP]:"fire-iid",[_P]:"fire-iid-compat",[EP]:"fire-fcm",[TP]:"fire-fcm-compat",[SP]:"fire-perf",[IP]:"fire-perf-compat",[bP]:"fire-rc",[PP]:"fire-rc-compat",[AP]:"fire-gcs",[kP]:"fire-gcs-compat",[NP]:"fire-fst",[RP]:"fire-fst-compat",[CP]:"fire-vertex","fire-js":"fire-js",[jP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah=new Map,LP=new Map,xp=new Map;function sv(n,e){try{n.container.addComponent(e)}catch(t){ns.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Pr(n){const e=n.name;if(xp.has(e))return ns.debug(`There were multiple attempts to register component ${e}.`),!1;xp.set(e,n);for(const t of ah.values())sv(t,n);for(const t of LP.values())sv(t,n);return!0}function to(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function nr(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ws=new eo("app","Firebase",OP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ir("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ws.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia=DP;function e_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:wp,automaticDataCollectionEnabled:!1},e),o=r.name;if(typeof o!="string"||!o)throw Ws.create("bad-app-name",{appName:String(o)});if(t||(t=Hx()),!t)throw Ws.create("no-options");const a=ah.get(o);if(a){if(Hl(t,a.options)&&Hl(r,a.config))return a;throw Ws.create("duplicate-app",{appName:o})}const c=new Gb(o);for(const p of xp.values())c.addComponent(p);const h=new MP(t,r,c);return ah.set(o,h),h}function um(n=wp){const e=ah.get(n);if(!e&&n===wp&&Hx())return e_();if(!e)throw Ws.create("no-app",{appName:n});return e}function On(n,e,t){var r;let o=(r=VP[n])!==null&&r!==void 0?r:n;t&&(o+=`-${t}`);const a=o.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const h=[`Unable to register library "${o}" with version "${e}":`];a&&h.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ns.warn(h.join(" "));return}Pr(new ir(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP="firebase-heartbeat-database",FP=1,Wl="firebase-heartbeat-store";let zf=null;function t_(){return zf||(zf=Zx(UP,FP,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Wl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ws.create("idb-open",{originalErrorMessage:n.message})})),zf}async function BP(n){try{const t=(await t_()).transaction(Wl),r=await t.objectStore(Wl).get(n_(n));return await t.done,r}catch(e){if(e instanceof lr)ns.warn(e.message);else{const t=Ws.create("idb-get",{originalErrorMessage:e?.message});ns.warn(t.message)}}}async function iv(n,e){try{const r=(await t_()).transaction(Wl,"readwrite");await r.objectStore(Wl).put(e,n_(n)),await r.done}catch(t){if(t instanceof lr)ns.warn(t.message);else{const r=Ws.create("idb-set",{originalErrorMessage:t?.message});ns.warn(r.message)}}}function n_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP=1024,$P=720*60*60*1e3;class qP{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new HP(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=ov();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const h=new Date(c.date).valueOf();return Date.now()-h<=$P}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ns.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ov(),{heartbeatsToSend:r,unsentEntries:o}=GP(this._heartbeatsCache.heartbeats),a=oh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return ns.warn(t),""}}}function ov(){return new Date().toISOString().substring(0,10)}function GP(n,e=zP){const t=[];let r=n.slice();for(const o of n){const a=t.find(c=>c.agent===o.agent);if(a){if(a.dates.push(o.date),av(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),av(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class HP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Qx()?Yx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await BP(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return iv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return iv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function av(n){return oh(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WP(n){Pr(new ir("platform-logger",e=>new oP(e),"PRIVATE")),Pr(new ir("heartbeat",e=>new qP(e),"PRIVATE")),On(vp,rv,n),On(vp,rv,"esm2017"),On("fire-js","")}WP("");function hm(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]]);return t}function r_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KP=r_,s_=new eo("auth","Firebase",r_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh=new Vh("@firebase/auth");function QP(n,...e){lh.logLevel<=Me.WARN&&lh.warn(`Auth (${Ia}): ${n}`,...e)}function Qu(n,...e){lh.logLevel<=Me.ERROR&&lh.error(`Auth (${Ia}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(n,...e){throw dm(n,...e)}function _r(n,...e){return dm(n,...e)}function i_(n,e,t){const r=Object.assign(Object.assign({},KP()),{[e]:t});return new eo("auth","Firebase",r).create(e,{appName:n.name})}function Er(n){return i_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dm(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return s_.create(n,...e)}function Se(n,e,...t){if(!n)throw dm(e,...t)}function Qr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Qu(e),new Error(e)}function rs(n,e){n||Qr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function YP(){return lv()==="http:"||lv()==="https:"}function lv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(YP()||Kx()||"connection"in navigator)?navigator.onLine:!0}function JP(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,t){this.shortDelay=e,this.longDelay=t,rs(t>e,"Short delay should be less than long delay!"),this.isMobile=Sb()||Pb()}get(){return XP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(n,e){rs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA=new lc(3e4,6e4);function ri(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Nr(n,e,t,r,o={}){return a_(n,o,async()=>{let a={},c={};r&&(e==="GET"?c=r:a={body:JSON.stringify(r)});const h=ac(Object.assign({key:n.config.apiKey},c)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:p},a);return bb()||(m.referrerPolicy="no-referrer"),o_.fetch()(l_(n,n.config.apiHost,t,h),m)})}async function a_(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},ZP),e);try{const o=new nA(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw Mu(n,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const h=a.ok?c.errorMessage:c.error.message,[p,m]=h.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Mu(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw Mu(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw Mu(n,"user-disabled",c);const w=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw i_(n,w,m);or(n,w)}}catch(o){if(o instanceof lr)throw o;or(n,"network-request-failed",{message:String(o)})}}async function cc(n,e,t,r,o={}){const a=await Nr(n,e,t,r,o);return"mfaPendingCredential"in a&&or(n,"multi-factor-auth-required",{_serverResponse:a}),a}function l_(n,e,t,r){const o=`${e}${t}?${r}`;return n.config.emulator?fm(n.config,o):`${n.config.apiScheme}://${o}`}function tA(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nA{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(_r(this.auth,"network-request-failed")),eA.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Mu(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=_r(n,e,r);return o.customData._tokenResponse=t,o}function cv(n){return n!==void 0&&n.enterprise!==void 0}class rA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return tA(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function sA(n,e){return Nr(n,"GET","/v2/recaptchaConfig",ri(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iA(n,e){return Nr(n,"POST","/v1/accounts:delete",e)}async function c_(n,e){return Nr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oA(n,e=!1){const t=At(n),r=await t.getIdToken(e),o=pm(r);Se(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,c=a?.sign_in_provider;return{claims:o,token:r,authTime:Dl($f(o.auth_time)),issuedAtTime:Dl($f(o.iat)),expirationTime:Dl($f(o.exp)),signInProvider:c||null,signInSecondFactor:a?.sign_in_second_factor||null}}function $f(n){return Number(n)*1e3}function pm(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Qu("JWT malformed, contained fewer than 3 sections"),null;try{const o=qx(t);return o?JSON.parse(o):(Qu("Failed to decode base64 JWT payload"),null)}catch(o){return Qu("Caught error parsing JWT payload as JSON",o?.toString()),null}}function uv(n){const e=pm(n);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gi(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof lr&&aA(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function aA({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dl(this.lastLoginAt),this.creationTime=Dl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ch(n){var e;const t=n.auth,r=await n.getIdToken(),o=await Gi(n,c_(t,{idToken:r}));Se(o?.users.length,t,"internal-error");const a=o.users[0];n._notifyReloadListener(a);const c=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?u_(a.providerUserInfo):[],h=uA(n.providerData,c),p=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!h?.length,w=p?m:!1,x={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new Ep(a.createdAt,a.lastLoginAt),isAnonymous:w};Object.assign(n,x)}async function cA(n){const e=At(n);await ch(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uA(n,e){return[...n.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function u_(n){return n.map(e=>{var{providerId:t}=e,r=hm(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hA(n,e){const t=await a_(n,{},async()=>{const r=ac({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,c=l_(n,o,"/v1/token",`key=${a}`),h=await n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",o_.fetch()(c,{method:"POST",headers:h,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function dA(n,e){return Nr(n,"POST","/v2/accounts:revokeToken",ri(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):uv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=uv(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:a}=await hA(e,t);this.updateTokensAndExpiration(r,o,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:a}=t,c=new ca;return r&&(Se(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),o&&(Se(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),a&&(Se(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ca,this.toJSON())}_performRefresh(){return Qr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(n,e){Se(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Yr{constructor(e){var{uid:t,auth:r,stsTokenManager:o}=e,a=hm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new lA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Ep(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Gi(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return oA(this,e)}reload(){return cA(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Yr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await ch(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nr(this.auth.app))return Promise.reject(Er(this.auth));const e=await this.getIdToken();return await Gi(this,iA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,o,a,c,h,p,m,w;const x=(r=t.displayName)!==null&&r!==void 0?r:void 0,E=(o=t.email)!==null&&o!==void 0?o:void 0,I=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,D=(c=t.photoURL)!==null&&c!==void 0?c:void 0,j=(h=t.tenantId)!==null&&h!==void 0?h:void 0,A=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,F=(m=t.createdAt)!==null&&m!==void 0?m:void 0,H=(w=t.lastLoginAt)!==null&&w!==void 0?w:void 0,{uid:O,emailVerified:Q,isAnonymous:Z,providerData:ie,stsTokenManager:C}=t;Se(O&&C,e,"internal-error");const b=ca.fromJSON(this.name,C);Se(typeof O=="string",e,"internal-error"),Ds(x,e.name),Ds(E,e.name),Se(typeof Q=="boolean",e,"internal-error"),Se(typeof Z=="boolean",e,"internal-error"),Ds(I,e.name),Ds(D,e.name),Ds(j,e.name),Ds(A,e.name),Ds(F,e.name),Ds(H,e.name);const P=new Yr({uid:O,auth:e,email:E,emailVerified:Q,displayName:x,isAnonymous:Z,photoURL:D,phoneNumber:I,tenantId:j,stsTokenManager:b,createdAt:F,lastLoginAt:H});return ie&&Array.isArray(ie)&&(P.providerData=ie.map(V=>Object.assign({},V))),A&&(P._redirectEventId=A),P}static async _fromIdTokenResponse(e,t,r=!1){const o=new ca;o.updateFromServerResponse(t);const a=new Yr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await ch(a),a}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];Se(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?u_(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!a?.length,h=new ca;h.updateFromIdToken(r);const p=new Yr({uid:o.localId,auth:e,stsTokenManager:h,isAnonymous:c}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Ep(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!a?.length};return Object.assign(p,m),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv=new Map;function Xr(n){rs(n instanceof Function,"Expected a class definition");let e=hv.get(n);return e?(rs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,hv.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}h_.type="NONE";const dv=h_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(n,e,t){return`firebase:${n}:${e}:${t}`}class ua{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:a}=this.auth;this.fullUserKey=Yu(this.userKey,o.apiKey,a),this.fullPersistenceKey=Yu("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Yr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ua(Xr(dv),e,r);const o=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=o[0]||Xr(dv);const c=Yu(r,e.config.apiKey,e.name);let h=null;for(const m of t)try{const w=await m._get(c);if(w){const x=Yr._fromJSON(e,w);m!==a&&(h=x),a=m;break}}catch{}const p=o.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new ua(a,e,r):(a=p[0],h&&await a._set(c,h.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(c)}catch{}})),new ua(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(m_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(d_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(y_(e))return"Blackberry";if(v_(e))return"Webos";if(f_(e))return"Safari";if((e.includes("chrome/")||p_(e))&&!e.includes("edge/"))return"Chrome";if(g_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function d_(n=Xt()){return/firefox\//i.test(n)}function f_(n=Xt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function p_(n=Xt()){return/crios\//i.test(n)}function m_(n=Xt()){return/iemobile/i.test(n)}function g_(n=Xt()){return/android/i.test(n)}function y_(n=Xt()){return/blackberry/i.test(n)}function v_(n=Xt()){return/webos/i.test(n)}function mm(n=Xt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function fA(n=Xt()){var e;return mm(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function pA(){return Ab()&&document.documentMode===10}function w_(n=Xt()){return mm(n)||g_(n)||v_(n)||y_(n)||/windows phone/i.test(n)||m_(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(n,e=[]){let t;switch(n){case"Browser":t=fv(Xt());break;case"Worker":t=`${fv(Xt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ia}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((c,h)=>{try{const p=e(a);c(p)}catch(p){h(p)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gA(n,e={}){return Nr(n,"GET","/v2/passwordPolicy",ri(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA=6;class vA{constructor(e){var t,r,o,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:yA,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,o,a,c,h;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(r=p.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(a=p.containsUppercaseLetter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(h=p.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),p}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pv(this),this.idTokenSubscription=new pv(this),this.beforeStateQueue=new mA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=s_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xr(t)),this._initializationPromise=this.queue(async()=>{var r,o;if(!this._deleted&&(this.persistenceManager=await ua.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await c_(this,{idToken:e}),r=await Yr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(nr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let o=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=o?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===h)&&p?.user&&(o=p.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(c){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ch(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=JP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(nr(this.app))return Promise.reject(Er(this));const t=e?At(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return nr(this.app)?Promise.reject(Er(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return nr(this.app)?Promise.reject(Er(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gA(this),t=new vA(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new eo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await dA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Xr(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await ua.create(this,[Xr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(h,this,"internal-error"),h.then(()=>{c||a(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,r,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=x_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&QP(`Error while retrieving App Check token: ${t.error}`),t?.token}}function no(n){return At(n)}class pv{constructor(e){this.auth=e,this.observer=null,this.addObserver=Vb(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xA(n){Lh=n}function __(n){return Lh.loadJS(n)}function _A(){return Lh.recaptchaEnterpriseScript}function EA(){return Lh.gapiScript}function TA(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const SA="recaptcha-enterprise",IA="NO_RECAPTCHA";class bA{constructor(e){this.type=SA,this.auth=no(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,h)=>{sA(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new rA(p);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,c(m.siteKey)}}).catch(p=>{h(p)})})}function o(a,c,h){const p=window.grecaptcha;cv(p)?p.enterprise.ready(()=>{p.enterprise.execute(a,{action:e}).then(m=>{c(m)}).catch(()=>{c(IA)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,c)=>{r(this.auth).then(h=>{if(!t&&cv(window.grecaptcha))o(h,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=_A();p.length!==0&&(p+=h),__(p).then(()=>{o(h,a,c)}).catch(m=>{c(m)})}}).catch(h=>{c(h)})})}}async function mv(n,e,t,r=!1){const o=new bA(n);let a;try{a=await o.verify(t)}catch{a=await o.verify(t,!0)}const c=Object.assign({},e);return r?Object.assign(c,{captchaResp:a}):Object.assign(c,{captchaResponse:a}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Tp(n,e,t,r){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await mv(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await mv(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(n,e){const t=to(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(Hl(a,e??{}))return o;or(o,"already-initialized")}return t.initialize({options:e})}function AA(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Xr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function kA(n,e,t){const r=no(n);Se(r._canInitEmulator,r,"emulator-config-failed"),Se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,a=E_(e),{host:c,port:h}=NA(e),p=h===null?"":`:${h}`;r.config.emulator={url:`${a}//${c}${p}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:c,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})}),CA()}function E_(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function NA(n){const e=E_(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const a=o[1];return{host:a,port:gv(r.substr(a.length+1))}}else{const[a,c]=r.split(":");return{host:a,port:gv(c)}}}function gv(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function CA(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Qr("not implemented")}_getIdTokenResponse(e){return Qr("not implemented")}_linkToIdToken(e,t){return Qr("not implemented")}_getReauthenticationResolver(e){return Qr("not implemented")}}async function RA(n,e){return Nr(n,"POST","/v1/accounts:update",e)}async function jA(n,e){return Nr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DA(n,e){return cc(n,"POST","/v1/accounts:signInWithPassword",ri(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VA(n,e){return cc(n,"POST","/v1/accounts:signInWithEmailLink",ri(n,e))}async function LA(n,e){return cc(n,"POST","/v1/accounts:signInWithEmailLink",ri(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl extends gm{constructor(e,t,r,o=null){super("password",r),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Kl(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Kl(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Tp(e,t,"signInWithPassword",DA);case"emailLink":return VA(e,{email:this._email,oobCode:this._password});default:or(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Tp(e,r,"signUpPassword",jA);case"emailLink":return LA(e,{idToken:t,email:this._email,oobCode:this._password});default:or(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ha(n,e){return cc(n,"POST","/v1/accounts:signInWithIdp",ri(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA="http://localhost";class Hi extends gm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Hi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):or("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o}=t,a=hm(t,["providerId","signInMethod"]);if(!r||!o)return null;const c=new Hi(r,o);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return ha(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ha(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ha(e,t)}buildRequest(){const e={requestUri:OA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ac(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function UA(n){const e=Al(kl(n)).link,t=e?Al(kl(e)).deep_link_id:null,r=Al(kl(n)).deep_link_id;return(r?Al(kl(r)).link:null)||r||t||e||n}class ym{constructor(e){var t,r,o,a,c,h;const p=Al(kl(e)),m=(t=p.apiKey)!==null&&t!==void 0?t:null,w=(r=p.oobCode)!==null&&r!==void 0?r:null,x=MA((o=p.mode)!==null&&o!==void 0?o:null);Se(m&&w&&x,"argument-error"),this.apiKey=m,this.operation=x,this.code=w,this.continueUrl=(a=p.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(c=p.languageCode)!==null&&c!==void 0?c:null,this.tenantId=(h=p.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const t=UA(e);try{return new ym(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(){this.providerId=Ys.PROVIDER_ID}static credential(e,t){return Kl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=ym.parseLink(t);return Se(r,"argument-error"),Kl._fromEmailAndCode(e,r.code,r.tenantId)}}Ys.PROVIDER_ID="password";Ys.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ys.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc extends T_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os extends uc{constructor(){super("facebook.com")}static credential(e){return Hi._fromParams({providerId:Os.PROVIDER_ID,signInMethod:Os.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Os.credentialFromTaggedObject(e)}static credentialFromError(e){return Os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Os.credential(e.oauthAccessToken)}catch{return null}}}Os.FACEBOOK_SIGN_IN_METHOD="facebook.com";Os.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms extends uc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Hi._fromParams({providerId:Ms.PROVIDER_ID,signInMethod:Ms.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ms.credentialFromTaggedObject(e)}static credentialFromError(e){return Ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Ms.credential(t,r)}catch{return null}}}Ms.GOOGLE_SIGN_IN_METHOD="google.com";Ms.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us extends uc{constructor(){super("github.com")}static credential(e){return Hi._fromParams({providerId:Us.PROVIDER_ID,signInMethod:Us.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Us.credentialFromTaggedObject(e)}static credentialFromError(e){return Us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Us.credential(e.oauthAccessToken)}catch{return null}}}Us.GITHUB_SIGN_IN_METHOD="github.com";Us.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends uc{constructor(){super("twitter.com")}static credential(e,t){return Hi._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Fs.credential(t,r)}catch{return null}}}Fs.TWITTER_SIGN_IN_METHOD="twitter.com";Fs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FA(n,e){return cc(n,"POST","/v1/accounts:signUp",ri(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const a=await Yr._fromIdTokenResponse(e,r,o),c=yv(r);return new Wi({user:a,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=yv(r);return new Wi({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function yv(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh extends lr{constructor(e,t,r,o){var a;super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,uh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new uh(e,t,r,o)}}function S_(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?uh._fromErrorAndOperation(n,a,e,r):a})}async function BA(n,e,t=!1){const r=await Gi(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Wi._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I_(n,e,t=!1){const{auth:r}=n;if(nr(r.app))return Promise.reject(Er(r));const o="reauthenticate";try{const a=await Gi(n,S_(r,o,e,n),t);Se(a.idToken,r,"internal-error");const c=pm(a.idToken);Se(c,r,"internal-error");const{sub:h}=c;return Se(n.uid===h,r,"user-mismatch"),Wi._forOperation(n,o,a)}catch(a){throw a?.code==="auth/user-not-found"&&or(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b_(n,e,t=!1){if(nr(n.app))return Promise.reject(Er(n));const r="signIn",o=await S_(n,r,e),a=await Wi._fromIdTokenResponse(n,r,o);return t||await n._updateCurrentUser(a.user),a}async function zA(n,e){return b_(no(n),e)}async function vv(n,e){return I_(At(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P_(n){const e=no(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function $A(n,e,t){if(nr(n.app))return Promise.reject(Er(n));const r=no(n),c=await Tp(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",FA).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&P_(n),p}),h=await Wi._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(h.user),h}function qA(n,e,t){return nr(n.app)?Promise.reject(Er(n)):zA(At(n),Ys.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&P_(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GA(n,e){return Nr(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sp(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=At(n),a={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await Gi(r,GA(r.auth,a));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const h=r.providerData.find(({providerId:p})=>p==="password");h&&(h.displayName=r.displayName,h.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function HA(n,e){const t=At(n);return nr(t.auth.app)?Promise.reject(Er(t.auth)):A_(t,e,null)}function WA(n,e){return A_(At(n),null,e)}async function A_(n,e,t){const{auth:r}=n,a={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(a.email=e),t&&(a.password=t);const c=await Gi(n,RA(r,a));await n._updateTokensIfNecessary(c,!0)}function KA(n,e,t,r){return At(n).onIdTokenChanged(e,t,r)}function QA(n,e,t){return At(n).beforeAuthStateChanged(e,t)}function YA(n,e,t,r){return At(n).onAuthStateChanged(e,t,r)}function XA(n){return At(n).signOut()}const hh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(hh,"1"),this.storage.removeItem(hh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=1e3,ZA=10;class N_ extends k_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=w_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,h,p)=>{this.notifyListeners(c,p)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);pA()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,ZA):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},JA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}N_.type="LOCAL";const ek=N_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_ extends k_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}C_.type="SESSION";const R_=C_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new Oh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:a}=t.data,c=this.handlersMap[o];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const h=Array.from(c).map(async m=>m(t.origin,a)),p=await tk(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Oh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,c;return new Promise((h,p)=>{const m=vm("",20);o.port1.start();const w=setTimeout(()=>{p(new Error("unsupported_event"))},r);c={messageChannel:o,onMessage(x){const E=x;if(E.data.eventId===m)switch(E.data.status){case"ack":clearTimeout(w),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(E.data.response);break;default:clearTimeout(w),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(){return window}function rk(n){Tr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(){return typeof Tr().WorkerGlobalScope<"u"&&typeof Tr().importScripts=="function"}async function sk(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ik(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function ok(){return j_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_="firebaseLocalStorageDb",ak=1,dh="firebaseLocalStorage",V_="fbase_key";class hc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Mh(n,e){return n.transaction([dh],e?"readwrite":"readonly").objectStore(dh)}function lk(){const n=indexedDB.deleteDatabase(D_);return new hc(n).toPromise()}function Ip(){const n=indexedDB.open(D_,ak);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(dh,{keyPath:V_})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(dh)?e(r):(r.close(),await lk(),e(await Ip()))})})}async function wv(n,e,t){const r=Mh(n,!0).put({[V_]:e,value:t});return new hc(r).toPromise()}async function ck(n,e){const t=Mh(n,!1).get(e),r=await new hc(t).toPromise();return r===void 0?null:r.value}function xv(n,e){const t=Mh(n,!0).delete(e);return new hc(t).toPromise()}const uk=800,hk=3;class L_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ip(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>hk)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return j_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Oh._getInstance(ok()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await sk(),!this.activeServiceWorker)return;this.sender=new nk(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ik()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ip();return await wv(e,hh,"1"),await xv(e,hh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>wv(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>ck(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>xv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=Mh(o,!1).getAll();return new hc(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),uk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}L_.type="LOCAL";const dk=L_;new lc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fk(n,e){return e?Xr(e):(Se(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm extends gm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ha(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ha(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ha(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function pk(n){return b_(n.auth,new wm(n),n.bypassAuthState)}function mk(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),I_(t,new wm(n),n.bypassAuthState)}async function gk(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),BA(t,new wm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e,t,r,o,a=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:a,error:c,type:h}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pk;case"linkViaPopup":case"linkViaRedirect":return gk;case"reauthViaPopup":case"reauthViaRedirect":return mk;default:or(this.auth,"internal-error")}}resolve(e){rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk=new lc(2e3,1e4);class na extends O_{constructor(e,t,r,o,a){super(e,t,o,a),this.provider=r,this.authWindow=null,this.pollId=null,na.currentPopupAction&&na.currentPopupAction.cancel(),na.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){rs(this.filter.length===1,"Popup operations only handle one event");const e=vm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(_r(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(_r(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,na.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_r(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yk.get())};e()}}na.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk="pendingRedirect",Xu=new Map;class wk extends O_{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Xu.get(this.auth._key());if(!e){try{const r=await xk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Xu.set(this.auth._key(),e)}return this.bypassAuthState||Xu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function xk(n,e){const t=Tk(e),r=Ek(n);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function _k(n,e){Xu.set(n._key(),e)}function Ek(n){return Xr(n._redirectPersistence)}function Tk(n){return Yu(vk,n.config.apiKey,n.name)}async function Sk(n,e,t=!1){if(nr(n.app))return Promise.reject(Er(n));const r=no(n),o=fk(r,e),c=await new wk(r,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik=600*1e3;class bk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Pk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!M_(e)){const o=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(_r(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Ik&&this.cachedEventUids.clear(),this.cachedEventUids.has(_v(e))}saveEventToCache(e){this.cachedEventUids.add(_v(e)),this.lastProcessedEventTime=Date.now()}}function _v(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function M_({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Pk(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return M_(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ak(n,e={}){return Nr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Nk=/^https?/;async function Ck(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Ak(n);for(const t of e)try{if(Rk(t))return}catch{}or(n,"unauthorized-domain")}function Rk(n){const e=_p(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!Nk.test(t))return!1;if(kk.test(n))return r===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk=new lc(3e4,6e4);function Ev(){const n=Tr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Dk(n){return new Promise((e,t)=>{var r,o,a;function c(){Ev(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ev(),t(_r(n,"network-request-failed"))},timeout:jk.get()})}if(!((o=(r=Tr().gapi)===null||r===void 0?void 0:r.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((a=Tr().gapi)===null||a===void 0)&&a.load)c();else{const h=TA("iframefcb");return Tr()[h]=()=>{gapi.load?c():t(_r(n,"network-request-failed"))},__(`${EA()}?onload=${h}`).catch(p=>t(p))}}).catch(e=>{throw Ju=null,e})}let Ju=null;function Vk(n){return Ju=Ju||Dk(n),Ju}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk=new lc(5e3,15e3),Ok="__/auth/iframe",Mk="emulator/auth/iframe",Uk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Fk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Bk(n){const e=n.config;Se(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?fm(e,Mk):`https://${n.config.authDomain}/${Ok}`,r={apiKey:e.apiKey,appName:n.name,v:Ia},o=Fk.get(n.config.apiHost);o&&(r.eid=o);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${ac(r).slice(1)}`}async function zk(n){const e=await Vk(n),t=Tr().gapi;return Se(t,n,"internal-error"),e.open({where:document.body,url:Bk(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Uk,dontclear:!0},r=>new Promise(async(o,a)=>{await r.restyle({setHideOnLeave:!1});const c=_r(n,"network-request-failed"),h=Tr().setTimeout(()=>{a(c)},Lk.get());function p(){Tr().clearTimeout(h),o(r)}r.ping(p).then(p,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qk=500,Gk=600,Hk="_blank",Wk="http://localhost";class Tv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Kk(n,e,t,r=qk,o=Gk){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const p=Object.assign(Object.assign({},$k),{width:r.toString(),height:o.toString(),top:a,left:c}),m=Xt().toLowerCase();t&&(h=p_(m)?Hk:t),d_(m)&&(e=e||Wk,p.scrollbars="yes");const w=Object.entries(p).reduce((E,[I,D])=>`${E}${I}=${D},`,"");if(fA(m)&&h!=="_self")return Qk(e||"",h),new Tv(null);const x=window.open(e||"",h,w);Se(x,n,"popup-blocked");try{x.focus()}catch{}return new Tv(x)}function Qk(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk="__/auth/handler",Xk="emulator/auth/handler",Jk=encodeURIComponent("fac");async function Sv(n,e,t,r,o,a){Se(n.config.authDomain,n,"auth-domain-config-required"),Se(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ia,eventId:o};if(e instanceof T_){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",Db(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,x]of Object.entries({}))c[w]=x}if(e instanceof uc){const w=e.getScopes().filter(x=>x!=="");w.length>0&&(c.scopes=w.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const w of Object.keys(h))h[w]===void 0&&delete h[w];const p=await n._getAppCheckToken(),m=p?`#${Jk}=${encodeURIComponent(p)}`:"";return`${Zk(n)}?${ac(h).slice(1)}${m}`}function Zk({config:n}){return n.emulator?fm(n,Xk):`https://${n.authDomain}/${Yk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf="webStorageSupport";class eN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=R_,this._completeRedirectFn=Sk,this._overrideRedirectResult=_k}async _openPopup(e,t,r,o){var a;rs((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=await Sv(e,t,r,_p(),o);return Kk(e,c,vm())}async _openRedirect(e,t,r,o){await this._originValidation(e);const a=await Sv(e,t,r,_p(),o);return rk(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(rs(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await zk(e),r=new bk(e);return t.register("authEvent",o=>(Se(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(qf,{type:qf},o=>{var a;const c=(a=o?.[0])===null||a===void 0?void 0:a[qf];c!==void 0&&t(!!c),or(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ck(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return w_()||f_()||mm()}}const tN=eN;var Iv="@firebase/auth",bv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rN(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function sN(n){Pr(new ir("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=r.options;Se(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:x_(n)},m=new wA(r,o,a,p);return AA(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Pr(new ir("auth-internal",e=>{const t=no(e.getProvider("auth").getImmediate());return(r=>new nN(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),On(Iv,bv,rN(n)),On(Iv,bv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN=300,oN=Wx("authIdTokenMaxAge")||iN;let Pv=null;const aN=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>oN)return;const o=t?.token;Pv!==o&&(Pv=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function lN(n=um()){const e=to(n,"auth");if(e.isInitialized())return e.getImmediate();const t=PA(n,{popupRedirectResolver:tN,persistence:[dk,ek,R_]}),r=Wx("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const c=aN(a.toString());QA(t,c,()=>c(t.currentUser)),KA(t,h=>c(h))}}const o=Gx("auth");return o&&kA(t,`http://${o}`),t}function cN(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}xA({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=o=>{const a=_r("internal-error");a.customData=o,t(a)},r.type="text/javascript",r.charset="UTF-8",cN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});sN("Browser");var Av=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zi,U_;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,b){function P(){}P.prototype=b.prototype,C.D=b.prototype,C.prototype=new P,C.prototype.constructor=C,C.C=function(V,U,z){for(var N=Array(arguments.length-2),be=2;be<arguments.length;be++)N[be-2]=arguments[be];return b.prototype[U].apply(V,N)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,b,P){P||(P=0);var V=Array(16);if(typeof b=="string")for(var U=0;16>U;++U)V[U]=b.charCodeAt(P++)|b.charCodeAt(P++)<<8|b.charCodeAt(P++)<<16|b.charCodeAt(P++)<<24;else for(U=0;16>U;++U)V[U]=b[P++]|b[P++]<<8|b[P++]<<16|b[P++]<<24;b=C.g[0],P=C.g[1],U=C.g[2];var z=C.g[3],N=b+(z^P&(U^z))+V[0]+3614090360&4294967295;b=P+(N<<7&4294967295|N>>>25),N=z+(U^b&(P^U))+V[1]+3905402710&4294967295,z=b+(N<<12&4294967295|N>>>20),N=U+(P^z&(b^P))+V[2]+606105819&4294967295,U=z+(N<<17&4294967295|N>>>15),N=P+(b^U&(z^b))+V[3]+3250441966&4294967295,P=U+(N<<22&4294967295|N>>>10),N=b+(z^P&(U^z))+V[4]+4118548399&4294967295,b=P+(N<<7&4294967295|N>>>25),N=z+(U^b&(P^U))+V[5]+1200080426&4294967295,z=b+(N<<12&4294967295|N>>>20),N=U+(P^z&(b^P))+V[6]+2821735955&4294967295,U=z+(N<<17&4294967295|N>>>15),N=P+(b^U&(z^b))+V[7]+4249261313&4294967295,P=U+(N<<22&4294967295|N>>>10),N=b+(z^P&(U^z))+V[8]+1770035416&4294967295,b=P+(N<<7&4294967295|N>>>25),N=z+(U^b&(P^U))+V[9]+2336552879&4294967295,z=b+(N<<12&4294967295|N>>>20),N=U+(P^z&(b^P))+V[10]+4294925233&4294967295,U=z+(N<<17&4294967295|N>>>15),N=P+(b^U&(z^b))+V[11]+2304563134&4294967295,P=U+(N<<22&4294967295|N>>>10),N=b+(z^P&(U^z))+V[12]+1804603682&4294967295,b=P+(N<<7&4294967295|N>>>25),N=z+(U^b&(P^U))+V[13]+4254626195&4294967295,z=b+(N<<12&4294967295|N>>>20),N=U+(P^z&(b^P))+V[14]+2792965006&4294967295,U=z+(N<<17&4294967295|N>>>15),N=P+(b^U&(z^b))+V[15]+1236535329&4294967295,P=U+(N<<22&4294967295|N>>>10),N=b+(U^z&(P^U))+V[1]+4129170786&4294967295,b=P+(N<<5&4294967295|N>>>27),N=z+(P^U&(b^P))+V[6]+3225465664&4294967295,z=b+(N<<9&4294967295|N>>>23),N=U+(b^P&(z^b))+V[11]+643717713&4294967295,U=z+(N<<14&4294967295|N>>>18),N=P+(z^b&(U^z))+V[0]+3921069994&4294967295,P=U+(N<<20&4294967295|N>>>12),N=b+(U^z&(P^U))+V[5]+3593408605&4294967295,b=P+(N<<5&4294967295|N>>>27),N=z+(P^U&(b^P))+V[10]+38016083&4294967295,z=b+(N<<9&4294967295|N>>>23),N=U+(b^P&(z^b))+V[15]+3634488961&4294967295,U=z+(N<<14&4294967295|N>>>18),N=P+(z^b&(U^z))+V[4]+3889429448&4294967295,P=U+(N<<20&4294967295|N>>>12),N=b+(U^z&(P^U))+V[9]+568446438&4294967295,b=P+(N<<5&4294967295|N>>>27),N=z+(P^U&(b^P))+V[14]+3275163606&4294967295,z=b+(N<<9&4294967295|N>>>23),N=U+(b^P&(z^b))+V[3]+4107603335&4294967295,U=z+(N<<14&4294967295|N>>>18),N=P+(z^b&(U^z))+V[8]+1163531501&4294967295,P=U+(N<<20&4294967295|N>>>12),N=b+(U^z&(P^U))+V[13]+2850285829&4294967295,b=P+(N<<5&4294967295|N>>>27),N=z+(P^U&(b^P))+V[2]+4243563512&4294967295,z=b+(N<<9&4294967295|N>>>23),N=U+(b^P&(z^b))+V[7]+1735328473&4294967295,U=z+(N<<14&4294967295|N>>>18),N=P+(z^b&(U^z))+V[12]+2368359562&4294967295,P=U+(N<<20&4294967295|N>>>12),N=b+(P^U^z)+V[5]+4294588738&4294967295,b=P+(N<<4&4294967295|N>>>28),N=z+(b^P^U)+V[8]+2272392833&4294967295,z=b+(N<<11&4294967295|N>>>21),N=U+(z^b^P)+V[11]+1839030562&4294967295,U=z+(N<<16&4294967295|N>>>16),N=P+(U^z^b)+V[14]+4259657740&4294967295,P=U+(N<<23&4294967295|N>>>9),N=b+(P^U^z)+V[1]+2763975236&4294967295,b=P+(N<<4&4294967295|N>>>28),N=z+(b^P^U)+V[4]+1272893353&4294967295,z=b+(N<<11&4294967295|N>>>21),N=U+(z^b^P)+V[7]+4139469664&4294967295,U=z+(N<<16&4294967295|N>>>16),N=P+(U^z^b)+V[10]+3200236656&4294967295,P=U+(N<<23&4294967295|N>>>9),N=b+(P^U^z)+V[13]+681279174&4294967295,b=P+(N<<4&4294967295|N>>>28),N=z+(b^P^U)+V[0]+3936430074&4294967295,z=b+(N<<11&4294967295|N>>>21),N=U+(z^b^P)+V[3]+3572445317&4294967295,U=z+(N<<16&4294967295|N>>>16),N=P+(U^z^b)+V[6]+76029189&4294967295,P=U+(N<<23&4294967295|N>>>9),N=b+(P^U^z)+V[9]+3654602809&4294967295,b=P+(N<<4&4294967295|N>>>28),N=z+(b^P^U)+V[12]+3873151461&4294967295,z=b+(N<<11&4294967295|N>>>21),N=U+(z^b^P)+V[15]+530742520&4294967295,U=z+(N<<16&4294967295|N>>>16),N=P+(U^z^b)+V[2]+3299628645&4294967295,P=U+(N<<23&4294967295|N>>>9),N=b+(U^(P|~z))+V[0]+4096336452&4294967295,b=P+(N<<6&4294967295|N>>>26),N=z+(P^(b|~U))+V[7]+1126891415&4294967295,z=b+(N<<10&4294967295|N>>>22),N=U+(b^(z|~P))+V[14]+2878612391&4294967295,U=z+(N<<15&4294967295|N>>>17),N=P+(z^(U|~b))+V[5]+4237533241&4294967295,P=U+(N<<21&4294967295|N>>>11),N=b+(U^(P|~z))+V[12]+1700485571&4294967295,b=P+(N<<6&4294967295|N>>>26),N=z+(P^(b|~U))+V[3]+2399980690&4294967295,z=b+(N<<10&4294967295|N>>>22),N=U+(b^(z|~P))+V[10]+4293915773&4294967295,U=z+(N<<15&4294967295|N>>>17),N=P+(z^(U|~b))+V[1]+2240044497&4294967295,P=U+(N<<21&4294967295|N>>>11),N=b+(U^(P|~z))+V[8]+1873313359&4294967295,b=P+(N<<6&4294967295|N>>>26),N=z+(P^(b|~U))+V[15]+4264355552&4294967295,z=b+(N<<10&4294967295|N>>>22),N=U+(b^(z|~P))+V[6]+2734768916&4294967295,U=z+(N<<15&4294967295|N>>>17),N=P+(z^(U|~b))+V[13]+1309151649&4294967295,P=U+(N<<21&4294967295|N>>>11),N=b+(U^(P|~z))+V[4]+4149444226&4294967295,b=P+(N<<6&4294967295|N>>>26),N=z+(P^(b|~U))+V[11]+3174756917&4294967295,z=b+(N<<10&4294967295|N>>>22),N=U+(b^(z|~P))+V[2]+718787259&4294967295,U=z+(N<<15&4294967295|N>>>17),N=P+(z^(U|~b))+V[9]+3951481745&4294967295,C.g[0]=C.g[0]+b&4294967295,C.g[1]=C.g[1]+(U+(N<<21&4294967295|N>>>11))&4294967295,C.g[2]=C.g[2]+U&4294967295,C.g[3]=C.g[3]+z&4294967295}r.prototype.u=function(C,b){b===void 0&&(b=C.length);for(var P=b-this.blockSize,V=this.B,U=this.h,z=0;z<b;){if(U==0)for(;z<=P;)o(this,C,z),z+=this.blockSize;if(typeof C=="string"){for(;z<b;)if(V[U++]=C.charCodeAt(z++),U==this.blockSize){o(this,V),U=0;break}}else for(;z<b;)if(V[U++]=C[z++],U==this.blockSize){o(this,V),U=0;break}}this.h=U,this.o+=b},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var b=1;b<C.length-8;++b)C[b]=0;var P=8*this.o;for(b=C.length-8;b<C.length;++b)C[b]=P&255,P/=256;for(this.u(C),C=Array(16),b=P=0;4>b;++b)for(var V=0;32>V;V+=8)C[P++]=this.g[b]>>>V&255;return C};function a(C,b){var P=h;return Object.prototype.hasOwnProperty.call(P,C)?P[C]:P[C]=b(C)}function c(C,b){this.h=b;for(var P=[],V=!0,U=C.length-1;0<=U;U--){var z=C[U]|0;V&&z==b||(P[U]=z,V=!1)}this.g=P}var h={};function p(C){return-128<=C&&128>C?a(C,function(b){return new c([b|0],0>b?-1:0)}):new c([C|0],0>C?-1:0)}function m(C){if(isNaN(C)||!isFinite(C))return x;if(0>C)return A(m(-C));for(var b=[],P=1,V=0;C>=P;V++)b[V]=C/P|0,P*=4294967296;return new c(b,0)}function w(C,b){if(C.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(C.charAt(0)=="-")return A(w(C.substring(1),b));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=m(Math.pow(b,8)),V=x,U=0;U<C.length;U+=8){var z=Math.min(8,C.length-U),N=parseInt(C.substring(U,U+z),b);8>z?(z=m(Math.pow(b,z)),V=V.j(z).add(m(N))):(V=V.j(P),V=V.add(m(N)))}return V}var x=p(0),E=p(1),I=p(16777216);n=c.prototype,n.m=function(){if(j(this))return-A(this).m();for(var C=0,b=1,P=0;P<this.g.length;P++){var V=this.i(P);C+=(0<=V?V:4294967296+V)*b,b*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(D(this))return"0";if(j(this))return"-"+A(this).toString(C);for(var b=m(Math.pow(C,6)),P=this,V="";;){var U=Q(P,b).g;P=F(P,U.j(b));var z=((0<P.g.length?P.g[0]:P.h)>>>0).toString(C);if(P=U,D(P))return z+V;for(;6>z.length;)z="0"+z;V=z+V}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function D(C){if(C.h!=0)return!1;for(var b=0;b<C.g.length;b++)if(C.g[b]!=0)return!1;return!0}function j(C){return C.h==-1}n.l=function(C){return C=F(this,C),j(C)?-1:D(C)?0:1};function A(C){for(var b=C.g.length,P=[],V=0;V<b;V++)P[V]=~C.g[V];return new c(P,~C.h).add(E)}n.abs=function(){return j(this)?A(this):this},n.add=function(C){for(var b=Math.max(this.g.length,C.g.length),P=[],V=0,U=0;U<=b;U++){var z=V+(this.i(U)&65535)+(C.i(U)&65535),N=(z>>>16)+(this.i(U)>>>16)+(C.i(U)>>>16);V=N>>>16,z&=65535,N&=65535,P[U]=N<<16|z}return new c(P,P[P.length-1]&-2147483648?-1:0)};function F(C,b){return C.add(A(b))}n.j=function(C){if(D(this)||D(C))return x;if(j(this))return j(C)?A(this).j(A(C)):A(A(this).j(C));if(j(C))return A(this.j(A(C)));if(0>this.l(I)&&0>C.l(I))return m(this.m()*C.m());for(var b=this.g.length+C.g.length,P=[],V=0;V<2*b;V++)P[V]=0;for(V=0;V<this.g.length;V++)for(var U=0;U<C.g.length;U++){var z=this.i(V)>>>16,N=this.i(V)&65535,be=C.i(U)>>>16,$e=C.i(U)&65535;P[2*V+2*U]+=N*$e,H(P,2*V+2*U),P[2*V+2*U+1]+=z*$e,H(P,2*V+2*U+1),P[2*V+2*U+1]+=N*be,H(P,2*V+2*U+1),P[2*V+2*U+2]+=z*be,H(P,2*V+2*U+2)}for(V=0;V<b;V++)P[V]=P[2*V+1]<<16|P[2*V];for(V=b;V<2*b;V++)P[V]=0;return new c(P,0)};function H(C,b){for(;(C[b]&65535)!=C[b];)C[b+1]+=C[b]>>>16,C[b]&=65535,b++}function O(C,b){this.g=C,this.h=b}function Q(C,b){if(D(b))throw Error("division by zero");if(D(C))return new O(x,x);if(j(C))return b=Q(A(C),b),new O(A(b.g),A(b.h));if(j(b))return b=Q(C,A(b)),new O(A(b.g),b.h);if(30<C.g.length){if(j(C)||j(b))throw Error("slowDivide_ only works with positive integers.");for(var P=E,V=b;0>=V.l(C);)P=Z(P),V=Z(V);var U=ie(P,1),z=ie(V,1);for(V=ie(V,2),P=ie(P,2);!D(V);){var N=z.add(V);0>=N.l(C)&&(U=U.add(P),z=N),V=ie(V,1),P=ie(P,1)}return b=F(C,U.j(b)),new O(U,b)}for(U=x;0<=C.l(b);){for(P=Math.max(1,Math.floor(C.m()/b.m())),V=Math.ceil(Math.log(P)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),z=m(P),N=z.j(b);j(N)||0<N.l(C);)P-=V,z=m(P),N=z.j(b);D(z)&&(z=E),U=U.add(z),C=F(C,N)}return new O(U,C)}n.A=function(C){return Q(this,C).h},n.and=function(C){for(var b=Math.max(this.g.length,C.g.length),P=[],V=0;V<b;V++)P[V]=this.i(V)&C.i(V);return new c(P,this.h&C.h)},n.or=function(C){for(var b=Math.max(this.g.length,C.g.length),P=[],V=0;V<b;V++)P[V]=this.i(V)|C.i(V);return new c(P,this.h|C.h)},n.xor=function(C){for(var b=Math.max(this.g.length,C.g.length),P=[],V=0;V<b;V++)P[V]=this.i(V)^C.i(V);return new c(P,this.h^C.h)};function Z(C){for(var b=C.g.length+1,P=[],V=0;V<b;V++)P[V]=C.i(V)<<1|C.i(V-1)>>>31;return new c(P,C.h)}function ie(C,b){var P=b>>5;b%=32;for(var V=C.g.length-P,U=[],z=0;z<V;z++)U[z]=0<b?C.i(z+P)>>>b|C.i(z+P+1)<<32-b:C.i(z+P);return new c(U,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,U_=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=w,zi=c}).apply(typeof Av<"u"?Av:typeof self<"u"?self:typeof window<"u"?window:{});var Uu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var F_,Nl,B_,Zu,bp,z_,$_,q_;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,y,_){return u==Array.prototype||u==Object.prototype||(u[y]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uu=="object"&&Uu];for(var y=0;y<u.length;++y){var _=u[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=t(this);function o(u,y){if(y)e:{var _=r;u=u.split(".");for(var S=0;S<u.length-1;S++){var q=u[S];if(!(q in _))break e;_=_[q]}u=u[u.length-1],S=_[u],y=y(S),y!=S&&y!=null&&e(_,u,{configurable:!0,writable:!0,value:y})}}function a(u,y){u instanceof String&&(u+="");var _=0,S=!1,q={next:function(){if(!S&&_<u.length){var Y=_++;return{value:y(Y,u[Y]),done:!1}}return S=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}o("Array.prototype.values",function(u){return u||function(){return a(this,function(y,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function p(u){var y=typeof u;return y=y!="object"?y:u?Array.isArray(u)?"array":y:"null",y=="array"||y=="object"&&typeof u.length=="number"}function m(u){var y=typeof u;return y=="object"&&u!=null||y=="function"}function w(u,y,_){return u.call.apply(u.bind,arguments)}function x(u,y,_){if(!u)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,S),u.apply(y,q)}}return function(){return u.apply(y,arguments)}}function E(u,y,_){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:x,E.apply(null,arguments)}function I(u,y){var _=Array.prototype.slice.call(arguments,1);return function(){var S=_.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function D(u,y){function _(){}_.prototype=y.prototype,u.aa=y.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(S,q,Y){for(var ce=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)ce[Ke-2]=arguments[Ke];return y.prototype[q].apply(S,ce)}}function j(u){const y=u.length;if(0<y){const _=Array(y);for(let S=0;S<y;S++)_[S]=u[S];return _}return[]}function A(u,y){for(let _=1;_<arguments.length;_++){const S=arguments[_];if(p(S)){const q=u.length||0,Y=S.length||0;u.length=q+Y;for(let ce=0;ce<Y;ce++)u[q+ce]=S[ce]}else u.push(S)}}class F{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function H(u){return/^[\s\xa0]*$/.test(u)}function O(){var u=h.navigator;return u&&(u=u.userAgent)?u:""}function Q(u){return Q[" "](u),u}Q[" "]=function(){};var Z=O().indexOf("Gecko")!=-1&&!(O().toLowerCase().indexOf("webkit")!=-1&&O().indexOf("Edge")==-1)&&!(O().indexOf("Trident")!=-1||O().indexOf("MSIE")!=-1)&&O().indexOf("Edge")==-1;function ie(u,y,_){for(const S in u)y.call(_,u[S],S,u)}function C(u,y){for(const _ in u)y.call(void 0,u[_],_,u)}function b(u){const y={};for(const _ in u)y[_]=u[_];return y}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(u,y){let _,S;for(let q=1;q<arguments.length;q++){S=arguments[q];for(_ in S)u[_]=S[_];for(let Y=0;Y<P.length;Y++)_=P[Y],Object.prototype.hasOwnProperty.call(S,_)&&(u[_]=S[_])}}function U(u){var y=1;u=u.split(":");const _=[];for(;0<y&&u.length;)_.push(u.shift()),y--;return u.length&&_.push(u.join(":")),_}function z(u){h.setTimeout(()=>{throw u},0)}function N(){var u=$;let y=null;return u.g&&(y=u.g,u.g=u.g.next,u.g||(u.h=null),y.next=null),y}class be{constructor(){this.h=this.g=null}add(y,_){const S=$e.get();S.set(y,_),this.h?this.h.next=S:this.g=S,this.h=S}}var $e=new F(()=>new Re,u=>u.reset());class Re{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Ne,oe=!1,$=new be,X=()=>{const u=h.Promise.resolve(void 0);Ne=()=>{u.then(L)}};var L=()=>{for(var u;u=N();){try{u.h.call(u.g)}catch(_){z(_)}var y=$e;y.j(u),100>y.h&&(y.h++,u.next=y.g,y.g=u)}oe=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(u,y){this.type=u,this.g=this.target=y,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var le=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,y=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};h.addEventListener("test",_,y),h.removeEventListener("test",_,y)}catch{}return u}();function ue(u,y){if(fe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=y,y=u.relatedTarget){if(Z){e:{try{Q(y.nodeName);var q=!0;break e}catch{}q=!1}q||(y=null)}}else _=="mouseover"?y=u.fromElement:_=="mouseout"&&(y=u.toElement);this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ve[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ue.aa.h.call(this)}}D(ue,fe);var ve={2:"touch",3:"pen",4:"mouse"};ue.prototype.h=function(){ue.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var je="closure_listenable_"+(1e6*Math.random()|0),Be=0;function He(u,y,_,S,q){this.listener=u,this.proxy=null,this.src=y,this.type=_,this.capture=!!S,this.ha=q,this.key=++Be,this.da=this.fa=!1}function it(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Dt(u){this.src=u,this.g={},this.h=0}Dt.prototype.add=function(u,y,_,S,q){var Y=u.toString();u=this.g[Y],u||(u=this.g[Y]=[],this.h++);var ce=cs(u,y,S,q);return-1<ce?(y=u[ce],_||(y.fa=!1)):(y=new He(y,this.src,Y,!!S,q),y.fa=_,u.push(y)),y};function ii(u,y){var _=y.type;if(_ in u.g){var S=u.g[_],q=Array.prototype.indexOf.call(S,y,void 0),Y;(Y=0<=q)&&Array.prototype.splice.call(S,q,1),Y&&(it(y),u.g[_].length==0&&(delete u.g[_],u.h--))}}function cs(u,y,_,S){for(var q=0;q<u.length;++q){var Y=u[q];if(!Y.da&&Y.listener==y&&Y.capture==!!_&&Y.ha==S)return q}return-1}var oi="closure_lm_"+(1e6*Math.random()|0),ao={};function Na(u,y,_,S,q){if(Array.isArray(y)){for(var Y=0;Y<y.length;Y++)Na(u,y[Y],_,S,q);return null}return _=ja(_),u&&u[je]?u.K(y,_,m(S)?!!S.capture:!1,q):Ca(u,y,_,!1,S,q)}function Ca(u,y,_,S,q,Y){if(!y)throw Error("Invalid event type");var ce=m(q)?!!q.capture:!!q,Ke=co(u);if(Ke||(u[oi]=Ke=new Dt(u)),_=Ke.add(y,_,S,ce,Y),_.proxy)return _;if(S=Ec(),_.proxy=S,S.src=u,S.listener=_,u.addEventListener)le||(q=ce),q===void 0&&(q=!1),u.addEventListener(y.toString(),S,q);else if(u.attachEvent)u.attachEvent(jr(y.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Ec(){function u(_){return y.call(u.src,u.listener,_)}const y=Ra;return u}function lo(u,y,_,S,q){if(Array.isArray(y))for(var Y=0;Y<y.length;Y++)lo(u,y[Y],_,S,q);else S=m(S)?!!S.capture:!!S,_=ja(_),u&&u[je]?(u=u.i,y=String(y).toString(),y in u.g&&(Y=u.g[y],_=cs(Y,_,S,q),-1<_&&(it(Y[_]),Array.prototype.splice.call(Y,_,1),Y.length==0&&(delete u.g[y],u.h--)))):u&&(u=co(u))&&(y=u.g[y.toString()],u=-1,y&&(u=cs(y,_,S,q)),(_=-1<u?y[u]:null)&&Rr(_))}function Rr(u){if(typeof u!="number"&&u&&!u.da){var y=u.src;if(y&&y[je])ii(y.i,u);else{var _=u.type,S=u.proxy;y.removeEventListener?y.removeEventListener(_,S,u.capture):y.detachEvent?y.detachEvent(jr(_),S):y.addListener&&y.removeListener&&y.removeListener(S),(_=co(y))?(ii(_,u),_.h==0&&(_.src=null,y[oi]=null)):it(u)}}}function jr(u){return u in ao?ao[u]:ao[u]="on"+u}function Ra(u,y){if(u.da)u=!0;else{y=new ue(y,this);var _=u.listener,S=u.ha||u.src;u.fa&&Rr(u),u=_.call(S,y)}return u}function co(u){return u=u[oi],u instanceof Dt?u:null}var uo="__closure_events_fn_"+(1e9*Math.random()>>>0);function ja(u){return typeof u=="function"?u:(u[uo]||(u[uo]=function(y){return u.handleEvent(y)}),u[uo])}function _t(){J.call(this),this.i=new Dt(this),this.M=this,this.F=null}D(_t,J),_t.prototype[je]=!0,_t.prototype.removeEventListener=function(u,y,_,S){lo(this,u,y,_,S)};function Et(u,y){var _,S=u.F;if(S)for(_=[];S;S=S.F)_.push(S);if(u=u.M,S=y.type||y,typeof y=="string")y=new fe(y,u);else if(y instanceof fe)y.target=y.target||u;else{var q=y;y=new fe(S,u),V(y,q)}if(q=!0,_)for(var Y=_.length-1;0<=Y;Y--){var ce=y.g=_[Y];q=Dr(ce,S,!0,y)&&q}if(ce=y.g=u,q=Dr(ce,S,!0,y)&&q,q=Dr(ce,S,!1,y)&&q,_)for(Y=0;Y<_.length;Y++)ce=y.g=_[Y],q=Dr(ce,S,!1,y)&&q}_t.prototype.N=function(){if(_t.aa.N.call(this),this.i){var u=this.i,y;for(y in u.g){for(var _=u.g[y],S=0;S<_.length;S++)it(_[S]);delete u.g[y],u.h--}}this.F=null},_t.prototype.K=function(u,y,_,S){return this.i.add(String(u),y,!1,_,S)},_t.prototype.L=function(u,y,_,S){return this.i.add(String(u),y,!0,_,S)};function Dr(u,y,_,S){if(y=u.i.g[String(y)],!y)return!0;y=y.concat();for(var q=!0,Y=0;Y<y.length;++Y){var ce=y[Y];if(ce&&!ce.da&&ce.capture==_){var Ke=ce.listener,Tt=ce.ha||ce.src;ce.fa&&ii(u.i,ce),q=Ke.call(Tt,S)!==!1&&q}}return q&&!S.defaultPrevented}function Da(u,y,_){if(typeof u=="function")_&&(u=E(u,_));else if(u&&typeof u.handleEvent=="function")u=E(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:h.setTimeout(u,y||0)}function us(u){u.g=Da(()=>{u.g=null,u.i&&(u.i=!1,us(u))},u.l);const y=u.h;u.h=null,u.m.apply(null,y)}class ai extends J{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:us(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function li(u){J.call(this),this.h=u,this.g={}}D(li,J);var Va=[];function La(u){ie(u.g,function(y,_){this.g.hasOwnProperty(_)&&Rr(y)},u),u.g={}}li.prototype.N=function(){li.aa.N.call(this),La(this)},li.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Oa=h.JSON.stringify,Ma=h.JSON.parse,Ua=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function ci(){}ci.prototype.h=null;function ho(u){return u.h||(u.h=u.i())}function fo(){}var Sn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function cr(){fe.call(this,"d")}D(cr,fe);function po(){fe.call(this,"c")}D(po,fe);var ur={},Fa=null;function ui(){return Fa=Fa||new _t}ur.La="serverreachability";function Ba(u){fe.call(this,ur.La,u)}D(Ba,fe);function Vr(u){const y=ui();Et(y,new Ba(y))}ur.STAT_EVENT="statevent";function za(u,y){fe.call(this,ur.STAT_EVENT,u),this.stat=y}D(za,fe);function dt(u){const y=ui();Et(y,new za(y,u))}ur.Ma="timingevent";function mo(u,y){fe.call(this,ur.Ma,u),this.size=y}D(mo,fe);function Fn(u,y){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},y)}function hi(){this.g=!0}hi.prototype.xa=function(){this.g=!1};function di(u,y,_,S,q,Y){u.info(function(){if(u.g)if(Y)for(var ce="",Ke=Y.split("&"),Tt=0;Tt<Ke.length;Tt++){var Ue=Ke[Tt].split("=");if(1<Ue.length){var kt=Ue[0];Ue=Ue[1];var yt=kt.split("_");ce=2<=yt.length&&yt[1]=="type"?ce+(kt+"="+Ue+"&"):ce+(kt+"=redacted&")}}else ce=null;else ce=Y;return"XMLHTTP REQ ("+S+") [attempt "+q+"]: "+y+`
`+_+`
`+ce})}function go(u,y,_,S,q,Y,ce){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+q+"]: "+y+`
`+_+`
`+Y+" "+ce})}function Bn(u,y,_,S){u.info(function(){return"XMLHTTP TEXT ("+y+"): "+id(u,_)+(S?" "+S:"")})}function $a(u,y){u.info(function(){return"TIMEOUT: "+y})}hi.prototype.info=function(){};function id(u,y){if(!u.g)return y;if(!y)return null;try{var _=JSON.parse(y);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var S=_[u];if(!(2>S.length)){var q=S[1];if(Array.isArray(q)&&!(1>q.length)){var Y=q[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var ce=1;ce<q.length;ce++)q[ce]=""}}}}return Oa(_)}catch{return y}}var yo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Tc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},zn;function fi(){}D(fi,ci),fi.prototype.g=function(){return new XMLHttpRequest},fi.prototype.i=function(){return{}},zn=new fi;function $n(u,y,_,S){this.j=u,this.i=y,this.l=_,this.R=S||1,this.U=new li(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Sc}function Sc(){this.i=null,this.g="",this.h=!1}var qa={},vo={};function wo(u,y,_){u.L=1,u.v=ms(gn(y)),u.m=_,u.P=!0,Ga(u,null)}function Ga(u,y){u.F=Date.now(),Je(u),u.A=gn(u.v);var _=u.A,S=u.R;Array.isArray(S)||(S=[String(S)]),ys(_.i,"t",S),u.C=0,_=u.j.J,u.h=new Sc,u.g=zc(u.j,_?y:null,!u.m),0<u.O&&(u.M=new ai(E(u.Y,u,u.g),u.O)),y=u.U,_=u.g,S=u.ca;var q="readystatechange";Array.isArray(q)||(q&&(Va[0]=q.toString()),q=Va);for(var Y=0;Y<q.length;Y++){var ce=Na(_,q[Y],S||y.handleEvent,!1,y.h||y);if(!ce)break;y.g[ce.key]=ce}y=u.H?b(u.H):{},u.m?(u.u||(u.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,y)):(u.u="GET",u.g.ea(u.A,u.u,null,y)),Vr(),di(u.i,u.u,u.A,u.l,u.R,u.m)}$n.prototype.ca=function(u){u=u.target;const y=this.M;y&&sn(u)==3?y.j():this.Y(u)},$n.prototype.Y=function(u){try{if(u==this.g)e:{const yt=sn(this.g);var y=this.g.Ba();const Pn=this.g.Z();if(!(3>yt)&&(yt!=3||this.g&&(this.h.h||this.g.oa()||Xa(this.g)))){this.J||yt!=4||y==7||(y==8||0>=Pn?Vr(3):Vr(2)),pi(this);var _=this.g.Z();this.X=_;t:if(Ic(this)){var S=Xa(this.g);u="";var q=S.length,Y=sn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){In(this),hs(this);var ce="";break t}this.h.i=new h.TextDecoder}for(y=0;y<q;y++)this.h.h=!0,u+=this.h.i.decode(S[y],{stream:!(Y&&y==q-1)});S.length=0,this.h.g+=u,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=_==200,go(this.i,this.u,this.A,this.l,this.R,yt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Ke,Tt=this.g;if((Ke=Tt.g?Tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(Ke)){var Ue=Ke;break t}}Ue=null}if(_=Ue)Bn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ha(this,_);else{this.o=!1,this.s=3,dt(12),In(this),hs(this);break e}}if(this.P){_=!0;let vn;for(;!this.J&&this.C<ce.length;)if(vn=od(this,ce),vn==vo){yt==4&&(this.s=4,dt(14),_=!1),Bn(this.i,this.l,null,"[Incomplete Response]");break}else if(vn==qa){this.s=4,dt(15),Bn(this.i,this.l,ce,"[Invalid Chunk]"),_=!1;break}else Bn(this.i,this.l,vn,null),Ha(this,vn);if(Ic(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yt!=4||ce.length!=0||this.h.h||(this.s=1,dt(16),_=!1),this.o=this.o&&_,!_)Bn(this.i,this.l,ce,"[Invalid Chunked Response]"),In(this),hs(this);else if(0<ce.length&&!this.W){this.W=!0;var kt=this.j;kt.g==this&&kt.ba&&!kt.M&&(kt.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),Za(kt),kt.M=!0,dt(11))}}else Bn(this.i,this.l,ce,null),Ha(this,ce);yt==4&&In(this),this.o&&!this.J&&(yt==4?No(this.j,this):(this.o=!1,Je(this)))}else Io(this.g),_==400&&0<ce.indexOf("Unknown SID")?(this.s=3,dt(12)):(this.s=0,dt(13)),In(this),hs(this)}}}catch{}finally{}};function Ic(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function od(u,y){var _=u.C,S=y.indexOf(`
`,_);return S==-1?vo:(_=Number(y.substring(_,S)),isNaN(_)?qa:(S+=1,S+_>y.length?vo:(y=y.slice(S,S+_),u.C=S+_,y)))}$n.prototype.cancel=function(){this.J=!0,In(this)};function Je(u){u.S=Date.now()+u.I,bc(u,u.I)}function bc(u,y){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Fn(E(u.ba,u),y)}function pi(u){u.B&&(h.clearTimeout(u.B),u.B=null)}$n.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?($a(this.i,this.A),this.L!=2&&(Vr(),dt(17)),In(this),this.s=2,hs(this)):bc(this,this.S-u)};function hs(u){u.j.G==0||u.J||No(u.j,u)}function In(u){pi(u);var y=u.M;y&&typeof y.ma=="function"&&y.ma(),u.M=null,La(u.U),u.g&&(y=u.g,u.g=null,y.abort(),y.ma())}function Ha(u,y){try{var _=u.j;if(_.G!=0&&(_.g==u||Jt(_.h,u))){if(!u.K&&Jt(_.h,u)&&_.G==3){try{var S=_.Da.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var q=S;if(q[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)ko(_),Kn(_);else break e;Ao(_),dt(18)}}else _.za=q[1],0<_.za-_.T&&37500>q[2]&&_.F&&_.v==0&&!_.C&&(_.C=Fn(E(_.Za,_),6e3));if(1>=Ac(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Fr(_,11)}else if((u.K||_.g==u)&&ko(_),!H(y))for(q=_.Da.g.parse(y),y=0;y<q.length;y++){let Ue=q[y];if(_.T=Ue[0],Ue=Ue[1],_.G==2)if(Ue[0]=="c"){_.K=Ue[1],_.ia=Ue[2];const kt=Ue[3];kt!=null&&(_.la=kt,_.j.info("VER="+_.la));const yt=Ue[4];yt!=null&&(_.Aa=yt,_.j.info("SVER="+_.Aa));const Pn=Ue[5];Pn!=null&&typeof Pn=="number"&&0<Pn&&(S=1.5*Pn,_.L=S,_.j.info("backChannelRequestTimeoutMs_="+S)),S=_;const vn=u.g;if(vn){const _i=vn.g?vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_i){var Y=S.h;Y.g||_i.indexOf("spdy")==-1&&_i.indexOf("quic")==-1&&_i.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Wa(Y,Y.h),Y.h=null))}if(S.D){const Ro=vn.g?vn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ro&&(S.ya=Ro,Ye(S.I,S.D,Ro))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),S=_;var ce=u;if(S.qa=Bc(S,S.J?S.ia:null,S.W),ce.K){kc(S.h,ce);var Ke=ce,Tt=S.L;Tt&&(Ke.I=Tt),Ke.B&&(pi(Ke),Je(Ke)),S.g=ce}else xi(S);0<_.i.length&&pr(_)}else Ue[0]!="stop"&&Ue[0]!="close"||Fr(_,7);else _.G==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?Fr(_,7):Lt(_):Ue[0]!="noop"&&_.l&&_.l.ta(Ue),_.v=0)}}Vr(4)}catch{}}var Pc=class{constructor(u,y){this.g=u,this.map=y}};function mi(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ac(u){return u.h?1:u.g?u.g.size:0}function Jt(u,y){return u.h?u.h==y:u.g?u.g.has(y):!1}function Wa(u,y){u.g?u.g.add(y):u.h=y}function kc(u,y){u.h&&u.h==y?u.h=null:u.g&&u.g.has(y)&&u.g.delete(y)}mi.prototype.cancel=function(){if(this.i=Nc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Nc(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let y=u.i;for(const _ of u.g.values())y=y.concat(_.D);return y}return j(u.i)}function xo(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var y=[],_=u.length,S=0;S<_;S++)y.push(u[S]);return y}y=[],_=0;for(S in u)y[_++]=u[S];return y}function _o(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var y=[];u=u.length;for(var _=0;_<u;_++)y.push(_);return y}y=[],_=0;for(const S in u)y[_++]=S;return y}}}function ds(u,y){if(u.forEach&&typeof u.forEach=="function")u.forEach(y,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,y,void 0);else for(var _=_o(u),S=xo(u),q=S.length,Y=0;Y<q;Y++)y.call(void 0,S[Y],_&&_[Y],u)}var gi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ad(u,y){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var S=u[_].indexOf("="),q=null;if(0<=S){var Y=u[_].substring(0,S);q=u[_].substring(S+1)}else Y=u[_];y(Y,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Lr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Lr){this.h=u.h,yi(this,u.j),this.o=u.o,this.g=u.g,fs(this,u.s),this.l=u.l;var y=u.i,_=new hr;_.i=y.i,y.g&&(_.g=new Map(y.g),_.h=y.h),ps(this,_),this.m=u.m}else u&&(y=String(u).match(gi))?(this.h=!1,yi(this,y[1]||"",!0),this.o=Oe(y[2]||""),this.g=Oe(y[3]||"",!0),fs(this,y[4]),this.l=Oe(y[5]||"",!0),ps(this,y[6]||"",!0),this.m=Oe(y[7]||"")):(this.h=!1,this.i=new hr(null,this.h))}Lr.prototype.toString=function(){var u=[],y=this.j;y&&u.push(gs(y,Eo,!0),":");var _=this.g;return(_||y=="file")&&(u.push("//"),(y=this.o)&&u.push(gs(y,Eo,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(gs(_,_.charAt(0)=="/"?jc:Rc,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",gs(_,Ka)),u.join("")};function gn(u){return new Lr(u)}function yi(u,y,_){u.j=_?Oe(y,!0):y,u.j&&(u.j=u.j.replace(/:$/,""))}function fs(u,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);u.s=y}else u.s=null}function ps(u,y,_){y instanceof hr?(u.i=y,dr(u.i,u.h)):(_||(y=gs(y,Dc)),u.i=new hr(y,u.h))}function Ye(u,y,_){u.i.set(y,_)}function ms(u){return Ye(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Oe(u,y){return u?y?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function gs(u,y,_){return typeof u=="string"?(u=encodeURI(u).replace(y,Cc),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Cc(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Eo=/[#\/\?@]/g,Rc=/[#\?:]/g,jc=/[#\?]/g,Dc=/[#\?@]/g,Ka=/#/g;function hr(u,y){this.h=this.g=null,this.i=u||null,this.j=!!y}function Vt(u){u.g||(u.g=new Map,u.h=0,u.i&&ad(u.i,function(y,_){u.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}n=hr.prototype,n.add=function(u,y){Vt(this),this.i=null,u=bn(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(y),this.h+=1,this};function qn(u,y){Vt(u),y=bn(u,y),u.g.has(y)&&(u.i=null,u.h-=u.g.get(y).length,u.g.delete(y))}function Gn(u,y){return Vt(u),y=bn(u,y),u.g.has(y)}n.forEach=function(u,y){Vt(this),this.g.forEach(function(_,S){_.forEach(function(q){u.call(y,q,S,this)},this)},this)},n.na=function(){Vt(this);const u=Array.from(this.g.values()),y=Array.from(this.g.keys()),_=[];for(let S=0;S<y.length;S++){const q=u[S];for(let Y=0;Y<q.length;Y++)_.push(y[S])}return _},n.V=function(u){Vt(this);let y=[];if(typeof u=="string")Gn(this,u)&&(y=y.concat(this.g.get(bn(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)y=y.concat(u[_])}return y},n.set=function(u,y){return Vt(this),this.i=null,u=bn(this,u),Gn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[y]),this.h+=1,this},n.get=function(u,y){return u?(u=this.V(u),0<u.length?String(u[0]):y):y};function ys(u,y,_){qn(u,y),0<_.length&&(u.i=null,u.g.set(bn(u,y),j(_)),u.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],y=Array.from(this.g.keys());for(var _=0;_<y.length;_++){var S=y[_];const Y=encodeURIComponent(String(S)),ce=this.V(S);for(S=0;S<ce.length;S++){var q=Y;ce[S]!==""&&(q+="="+encodeURIComponent(String(ce[S]))),u.push(q)}}return this.i=u.join("&")};function bn(u,y){return y=String(y),u.j&&(y=y.toLowerCase()),y}function dr(u,y){y&&!u.j&&(Vt(u),u.i=null,u.g.forEach(function(_,S){var q=S.toLowerCase();S!=q&&(qn(this,S),ys(this,q,_))},u)),u.j=y}function ld(u,y){const _=new hi;if(h.Image){const S=new Image;S.onload=I(rn,_,"TestLoadImage: loaded",!0,y,S),S.onerror=I(rn,_,"TestLoadImage: error",!1,y,S),S.onabort=I(rn,_,"TestLoadImage: abort",!1,y,S),S.ontimeout=I(rn,_,"TestLoadImage: timeout",!1,y,S),h.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else y(!1)}function Vc(u,y){const _=new hi,S=new AbortController,q=setTimeout(()=>{S.abort(),rn(_,"TestPingServer: timeout",!1,y)},1e4);fetch(u,{signal:S.signal}).then(Y=>{clearTimeout(q),Y.ok?rn(_,"TestPingServer: ok",!0,y):rn(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(q),rn(_,"TestPingServer: error",!1,y)})}function rn(u,y,_,S,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),S(_)}catch{}}function cd(){this.g=new Ua}function Lc(u,y,_){const S=_||"";try{ds(u,function(q,Y){let ce=q;m(q)&&(ce=Oa(q)),y.push(S+Y+"="+encodeURIComponent(ce))})}catch(q){throw y.push(S+"type="+encodeURIComponent("_badmap")),q}}function Or(u){this.l=u.Ub||null,this.j=u.eb||!1}D(Or,ci),Or.prototype.g=function(){return new vi(this.l,this.j)},Or.prototype.i=function(u){return function(){return u}}({});function vi(u,y){_t.call(this),this.D=u,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(vi,_t),n=vi.prototype,n.open=function(u,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=y,this.readyState=1,Wn(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(y.body=u),(this.D||h).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Hn(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Wn(this)),this.g&&(this.readyState=3,Wn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Oc(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Oc(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var y=u.value?u.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!u.done}))&&(this.response=this.responseText+=y)}u.done?Hn(this):Wn(this),this.readyState==3&&Oc(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Hn(this))},n.Qa=function(u){this.g&&(this.response=u,Hn(this))},n.ga=function(){this.g&&Hn(this)};function Hn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Wn(u)}n.setRequestHeader=function(u,y){this.u.append(u,y)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=y.next();return u.join(`\r
`)};function Wn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(vi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Mr(u){let y="";return ie(u,function(_,S){y+=S,y+=":",y+=_,y+=`\r
`}),y}function vs(u,y,_){e:{for(S in _){var S=!1;break e}S=!0}S||(_=Mr(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):Ye(u,y,_))}function rt(u){_t.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(rt,_t);var ud=/^https?$/i,Qa=["POST","PUT"];n=rt.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,y,_,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);y=y?y.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():zn.g(),this.v=this.o?ho(this.o):ho(zn),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(y,String(u),!0),this.B=!1}catch(Y){wi(this,Y);return}if(u=_||"",_=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var q in S)_.set(q,S[q]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Y of S.keys())_.set(Y,S.get(Y));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(_.keys()).find(Y=>Y.toLowerCase()=="content-type"),q=h.FormData&&u instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Qa,y,void 0))||S||q||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,ce]of _)this.g.setRequestHeader(Y,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{So(this),this.u=!0,this.g.send(u),this.u=!1}catch(Y){wi(this,Y)}};function wi(u,y){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=y,u.m=5,To(u),yn(u)}function To(u){u.A||(u.A=!0,Et(u,"complete"),Et(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Et(this,"complete"),Et(this,"abort"),yn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yn(this,!0)),rt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ya(this):this.bb())},n.bb=function(){Ya(this)};function Ya(u){if(u.h&&typeof c<"u"&&(!u.v[1]||sn(u)!=4||u.Z()!=2)){if(u.u&&sn(u)==4)Da(u.Ea,0,u);else if(Et(u,"readystatechange"),sn(u)==4){u.h=!1;try{const ce=u.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var S;if(S=ce===0){var q=String(u.D).match(gi)[1]||null;!q&&h.self&&h.self.location&&(q=h.self.location.protocol.slice(0,-1)),S=!ud.test(q?q.toLowerCase():"")}_=S}if(_)Et(u,"complete"),Et(u,"success");else{u.m=6;try{var Y=2<sn(u)?u.g.statusText:""}catch{Y=""}u.l=Y+" ["+u.Z()+"]",To(u)}}finally{yn(u)}}}}function yn(u,y){if(u.g){So(u);const _=u.g,S=u.v[0]?()=>{}:null;u.g=null,u.v=null,y||Et(u,"ready");try{_.onreadystatechange=S}catch{}}}function So(u){u.I&&(h.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function sn(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<sn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var y=this.g.responseText;return u&&y.indexOf(u)==0&&(y=y.substring(u.length)),Ma(y)}};function Xa(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Io(u){const y={};u=(u.g&&2<=sn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(H(u[S]))continue;var _=U(u[S]);const q=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const Y=y[q]||[];y[q]=Y,Y.push(_)}C(y,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function fr(u,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||y}function Ja(u){this.Aa=0,this.i=[],this.j=new hi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=fr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=fr("baseRetryDelayMs",5e3,u),this.cb=fr("retryDelaySeedMs",1e4,u),this.Wa=fr("forwardChannelMaxRetries",2,u),this.wa=fr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new mi(u&&u.concurrentRequestLimit),this.Da=new cd,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ja.prototype,n.la=8,n.G=1,n.connect=function(u,y,_,S){dt(0),this.W=u,this.H=y||{},_&&S!==void 0&&(this.H.OSID=_,this.H.OAID=S),this.F=this.X,this.I=Bc(this,null,this.W),pr(this)};function Lt(u){if(bo(u),u.G==3){var y=u.U++,_=gn(u.I);if(Ye(_,"SID",u.K),Ye(_,"RID",y),Ye(_,"TYPE","terminate"),Ur(u,_),y=new $n(u,u.j,y),y.L=2,y.v=ms(gn(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(y.v.toString(),"")}catch{}!_&&h.Image&&(new Image().src=y.v,_=!0),_||(y.g=zc(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Je(y)}Fc(u)}function Kn(u){u.g&&(Za(u),u.g.cancel(),u.g=null)}function bo(u){Kn(u),u.u&&(h.clearTimeout(u.u),u.u=null),ko(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&h.clearTimeout(u.s),u.s=null)}function pr(u){if(!mn(u.h)&&!u.s){u.s=!0;var y=u.Ga;Ne||X(),oe||(Ne(),oe=!0),$.add(y,u),u.B=0}}function hd(u,y){return Ac(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=y.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Fn(E(u.Ga,u,y),Uc(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const q=new $n(this,this.j,u);let Y=this.o;if(this.S&&(Y?(Y=b(Y),V(Y,this.S)):Y=this.S),this.m!==null||this.O||(q.H=Y,Y=null),this.P)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var S=this.i[_];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,4096<y){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=ws(this,q,y),_=gn(this.I),Ye(_,"RID",u),Ye(_,"CVER",22),this.D&&Ye(_,"X-HTTP-Session-Id",this.D),Ur(this,_),Y&&(this.O?y="headers="+encodeURIComponent(String(Mr(Y)))+"&"+y:this.m&&vs(_,this.m,Y)),Wa(this.h,q),this.Ua&&Ye(_,"TYPE","init"),this.P?(Ye(_,"$req",y),Ye(_,"SID","null"),q.T=!0,wo(q,_,null)):wo(q,_,y),this.G=2}}else this.G==3&&(u?Po(this,u):this.i.length==0||mn(this.h)||Po(this))};function Po(u,y){var _;y?_=y.l:_=u.U++;const S=gn(u.I);Ye(S,"SID",u.K),Ye(S,"RID",_),Ye(S,"AID",u.T),Ur(u,S),u.m&&u.o&&vs(S,u.m,u.o),_=new $n(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),y&&(u.i=y.D.concat(u.i)),y=ws(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Wa(u.h,_),wo(_,S,y)}function Ur(u,y){u.H&&ie(u.H,function(_,S){Ye(y,S,_)}),u.l&&ds({},function(_,S){Ye(y,S,_)})}function ws(u,y,_){_=Math.min(u.i.length,_);var S=u.l?E(u.l.Na,u.l,u):null;e:{var q=u.i;let Y=-1;for(;;){const ce=["count="+_];Y==-1?0<_?(Y=q[0].g,ce.push("ofs="+Y)):Y=0:ce.push("ofs="+Y);let Ke=!0;for(let Tt=0;Tt<_;Tt++){let Ue=q[Tt].g;const kt=q[Tt].map;if(Ue-=Y,0>Ue)Y=Math.max(0,q[Tt].g-100),Ke=!1;else try{Lc(kt,ce,"req"+Ue+"_")}catch{S&&S(kt)}}if(Ke){S=ce.join("&");break e}}}return u=u.i.splice(0,_),y.D=u,S}function xi(u){if(!u.g&&!u.u){u.Y=1;var y=u.Fa;Ne||X(),oe||(Ne(),oe=!0),$.add(y,u),u.v=0}}function Ao(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Fn(E(u.Fa,u),Uc(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,Mc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Fn(E(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dt(10),Kn(this),Mc(this))};function Za(u){u.A!=null&&(h.clearTimeout(u.A),u.A=null)}function Mc(u){u.g=new $n(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var y=gn(u.qa);Ye(y,"RID","rpc"),Ye(y,"SID",u.K),Ye(y,"AID",u.T),Ye(y,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ye(y,"TO",u.ja),Ye(y,"TYPE","xmlhttp"),Ur(u,y),u.m&&u.o&&vs(y,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=ms(gn(y)),_.m=null,_.P=!0,Ga(_,u)}n.Za=function(){this.C!=null&&(this.C=null,Kn(this),Ao(this),dt(19))};function ko(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function No(u,y){var _=null;if(u.g==y){ko(u),Za(u),u.g=null;var S=2}else if(Jt(u.h,y))_=y.D,kc(u.h,y),S=1;else return;if(u.G!=0){if(y.o)if(S==1){_=y.m?y.m.length:0,y=Date.now()-y.F;var q=u.B;S=ui(),Et(S,new mo(S,_)),pr(u)}else xi(u);else if(q=y.s,q==3||q==0&&0<y.X||!(S==1&&hd(u,y)||S==2&&Ao(u)))switch(_&&0<_.length&&(y=u.h,y.i=y.i.concat(_)),q){case 1:Fr(u,5);break;case 4:Fr(u,10);break;case 3:Fr(u,6);break;default:Fr(u,2)}}}function Uc(u,y){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*y}function Fr(u,y){if(u.j.info("Error code "+y),y==2){var _=E(u.fb,u),S=u.Xa;const q=!S;S=new Lr(S||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||yi(S,"https"),ms(S),q?ld(S.toString(),_):Vc(S.toString(),_)}else dt(2);u.G=0,u.l&&u.l.sa(y),Fc(u),bo(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function Fc(u){if(u.G=0,u.ka=[],u.l){const y=Nc(u.h);(y.length!=0||u.i.length!=0)&&(A(u.ka,y),A(u.ka,u.i),u.h.i.length=0,j(u.i),u.i.length=0),u.l.ra()}}function Bc(u,y,_){var S=_ instanceof Lr?gn(_):new Lr(_);if(S.g!="")y&&(S.g=y+"."+S.g),fs(S,S.s);else{var q=h.location;S=q.protocol,y=y?y+"."+q.hostname:q.hostname,q=+q.port;var Y=new Lr(null);S&&yi(Y,S),y&&(Y.g=y),q&&fs(Y,q),_&&(Y.l=_),S=Y}return _=u.D,y=u.ya,_&&y&&Ye(S,_,y),Ye(S,"VER",u.la),Ur(u,S),S}function zc(u,y,_){if(y&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=u.Ca&&!u.pa?new rt(new Or({eb:_})):new rt(u.pa),y.Ha(u.J),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function el(){}n=el.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Co(){}Co.prototype.g=function(u,y){return new Zt(u,y)};function Zt(u,y){_t.call(this),this.g=new Ja(y),this.l=u,this.h=y&&y.messageUrlParams||null,u=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(u?u["X-WebChannel-Content-Type"]=y.messageContentType:u={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(u?u["X-WebChannel-Client-Profile"]=y.va:u={"X-WebChannel-Client-Profile":y.va}),this.g.S=u,(u=y&&y.Sb)&&!H(u)&&(this.g.m=u),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!H(y)&&(this.g.D=y,u=this.h,u!==null&&y in u&&(u=this.h,y in u&&delete u[y])),this.j=new mr(this)}D(Zt,_t),Zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Zt.prototype.close=function(){Lt(this.g)},Zt.prototype.o=function(u){var y=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Oa(u),u=_);y.i.push(new Pc(y.Ya++,u)),y.G==3&&pr(y)},Zt.prototype.N=function(){this.g.l=null,delete this.j,Lt(this.g),delete this.g,Zt.aa.N.call(this)};function $c(u){cr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var y=u.__sm__;if(y){e:{for(const _ in y){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,y=y!==null&&u in y?y[u]:void 0),this.data=y}else this.data=u}D($c,cr);function qc(){po.call(this),this.status=1}D(qc,po);function mr(u){this.g=u}D(mr,el),mr.prototype.ua=function(){Et(this.g,"a")},mr.prototype.ta=function(u){Et(this.g,new $c(u))},mr.prototype.sa=function(u){Et(this.g,new qc)},mr.prototype.ra=function(){Et(this.g,"b")},Co.prototype.createWebChannel=Co.prototype.g,Zt.prototype.send=Zt.prototype.o,Zt.prototype.open=Zt.prototype.m,Zt.prototype.close=Zt.prototype.close,q_=function(){return new Co},$_=function(){return ui()},z_=ur,bp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},yo.NO_ERROR=0,yo.TIMEOUT=8,yo.HTTP_ERROR=6,Zu=yo,Tc.COMPLETE="complete",B_=Tc,fo.EventType=Sn,Sn.OPEN="a",Sn.CLOSE="b",Sn.ERROR="c",Sn.MESSAGE="d",_t.prototype.listen=_t.prototype.K,Nl=fo,rt.prototype.listenOnce=rt.prototype.L,rt.prototype.getLastError=rt.prototype.Ka,rt.prototype.getLastErrorCode=rt.prototype.Ba,rt.prototype.getStatus=rt.prototype.Z,rt.prototype.getResponseJson=rt.prototype.Oa,rt.prototype.getResponseText=rt.prototype.oa,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Ha,F_=rt}).apply(typeof Uu<"u"?Uu:typeof self<"u"?self:typeof window<"u"?window:{});const kv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Qt.UNAUTHENTICATED=new Qt(null),Qt.GOOGLE_CREDENTIALS=new Qt("google-credentials-uid"),Qt.FIRST_PARTY=new Qt("first-party-uid"),Qt.MOCK_USER=new Qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ba="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki=new Vh("@firebase/firestore");function Il(){return Ki.logLevel}function ge(n,...e){if(Ki.logLevel<=Me.DEBUG){const t=e.map(xm);Ki.debug(`Firestore (${ba}): ${n}`,...t)}}function ss(n,...e){if(Ki.logLevel<=Me.ERROR){const t=e.map(xm);Ki.error(`Firestore (${ba}): ${n}`,...t)}}function pa(n,...e){if(Ki.logLevel<=Me.WARN){const t=e.map(xm);Ki.warn(`Firestore (${ba}): ${n}`,...t)}}function xm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(n="Unexpected state"){const e=`FIRESTORE (${ba}) INTERNAL ASSERTION FAILED: `+n;throw ss(e),new Error(e)}function Qe(n,e){n||Pe()}function ke(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends lr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Qt.UNAUTHENTICATED))}shutdown(){}}class hN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class dN{constructor(e){this.t=e,this.currentUser=Qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qe(this.o===void 0);let r=this.i;const o=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let a=new Ks;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ks,e.enqueueRetryable(()=>o(this.currentUser))};const c=()=>{const p=a;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},h=p=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(p=>h(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?h(p):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ks)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qe(typeof r.accessToken=="string"),new G_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string"),new Qt(e)}}class fN{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Qt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class pN{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new fN(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class mN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gN{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Qe(this.o===void 0);const r=a=>{a.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.R;return this.R=a.token,ge("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const o=a=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>o(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?o(a):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Qe(typeof t.token=="string"),this.R=t.token,new mN(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=yN(40);for(let a=0;a<o.length;++a)r.length<20&&o[a]<t&&(r+=e.charAt(o[a]%e.length))}return r}}function Ge(n,e){return n<e?-1:n>e?1:0}function ma(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new _e(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pt.fromMillis(Date.now())}static fromDate(e){return Pt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Pt(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ge(this.nanoseconds,e.nanoseconds):Ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new Pt(0,0))}static max(){return new Ae(new Pt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,t,r){t===void 0?t=0:t>e.length&&Pe(),r===void 0?r=e.length-t:r>e.length-t&&Pe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ql.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ql?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const a=e.get(o),c=t.get(o);if(a<c)return-1;if(a>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ht extends Ql{construct(e,t,r){return new ht(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new _e(se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new ht(t)}static emptyPath(){return new ht([])}}const vN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ft extends Ql{construct(e,t,r){return new Ft(e,t,r)}static isValidIdentifier(e){return vN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ft.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ft(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const a=()=>{if(r.length===0)throw new _e(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;o<e.length;){const h=e[o];if(h==="\\"){if(o+1===e.length)throw new _e(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new _e(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,o+=2}else h==="`"?(c=!c,o++):h!=="."||c?(r+=h,o++):(a(),o++)}if(a(),c)throw new _e(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ft(t)}static emptyPath(){return new Ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(ht.fromString(e))}static fromName(e){return new Ee(ht.fromString(e).popFirst(5))}static empty(){return new Ee(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new ht(e.slice()))}}function wN(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Ae.fromTimestamp(r===1e9?new Pt(t+1,0):new Pt(t,r));return new Xs(o,Ee.empty(),e)}function xN(n){return new Xs(n.readTime,n.key,-1)}class Xs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Xs(Ae.min(),Ee.empty(),-1)}static max(){return new Xs(Ae.max(),Ee.empty(),-1)}}function _N(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(n.documentKey,e.documentKey),t!==0?t:Ge(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dc(n){if(n.code!==se.FAILED_PRECONDITION||n.message!==EN)throw n;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne((r,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.reject(t)}static resolve(e){return new ne((t,r)=>{t(e)})}static reject(e){return new ne((t,r)=>{r(e)})}static waitFor(e){return new ne((t,r)=>{let o=0,a=0,c=!1;e.forEach(h=>{++o,h.next(()=>{++a,c&&a===o&&t()},p=>r(p))}),c=!0,a===o&&t()})}static or(e){let t=ne.resolve(!1);for(const r of e)t=t.next(o=>o?ne.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,a)=>{r.push(t.call(this,o,a))}),this.waitFor(r)}static mapArray(e,t){return new ne((r,o)=>{const a=e.length,c=new Array(a);let h=0;for(let p=0;p<a;p++){const m=p;t(e[m]).next(w=>{c[m]=w,++h,h===a&&r(c)},w=>o(w))}})}static doWhile(e,t){return new ne((r,o)=>{const a=()=>{e()===!0?t().next(()=>{a()},o):r()};a()})}}function SN(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function fc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}_m.oe=-1;function Uh(n){return n==null}function fh(n){return n===0&&1/n==-1/0}function IN(n){return typeof n=="number"&&Number.isInteger(n)&&!fh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Pa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function W_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,t){this.comparator=e,this.root=t||Ut.EMPTY}insert(e,t){return new ct(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ut.BLACK,null,null))}remove(e){return new ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ut.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fu(this.root,e,this.comparator,!0)}}class Fu{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ut{constructor(e,t,r,o,a){this.key=e,this.value=t,this.color=r??Ut.RED,this.left=o??Ut.EMPTY,this.right=a??Ut.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,a){return new Ut(e??this.key,t??this.value,r??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const a=r(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,r),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ut.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ut.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Pe();const e=this.left.check();if(e!==this.right.check())throw Pe();return e+(this.isRed()?0:1)}}Ut.EMPTY=null,Ut.RED=!0,Ut.BLACK=!1;Ut.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe()}get value(){throw Pe()}get color(){throw Pe()}get left(){throw Pe()}get right(){throw Pe()}copy(e,t,r,o,a){return this}insert(e,t,r){return new Ut(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Cv(this.data.getIterator())}getIteratorFrom(e){return new Cv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=r.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Bt(this.comparator);return t.data=e,t}}class Cv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new rr([])}unionWith(e){let t=new Bt(Ft.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new rr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ma(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new K_("Invalid base64 string: "+a):a}}(e);return new zt(t)}static fromUint8Array(e){const t=function(o){let a="";for(let c=0;c<o.length;++c)a+=String.fromCharCode(o[c]);return a}(e);return new zt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zt.EMPTY_BYTE_STRING=new zt("");const bN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Js(n){if(Qe(!!n),typeof n=="string"){let e=0;const t=bN.exec(n);if(Qe(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pt(n.seconds),nanos:pt(n.nanos)}}function pt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Qi(n){return typeof n=="string"?zt.fromBase64String(n):zt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Tm(n){const e=n.mapValue.fields.__previous_value__;return Em(e)?Tm(e):e}function Yl(n){const e=Js(n.mapValue.fields.__local_write_time__.timestampValue);return new Pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e,t,r,o,a,c,h,p,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=m}}class Xl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Xl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Xl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bu={mapValue:{}};function Yi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Em(n)?4:kN(n)?9007199254740991:AN(n)?10:11:Pe()}function Ar(n,e){if(n===e)return!0;const t=Yi(n);if(t!==Yi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Yl(n).isEqual(Yl(e));case 3:return function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const c=Js(o.timestampValue),h=Js(a.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(o,a){return Qi(o.bytesValue).isEqual(Qi(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(o,a){return pt(o.geoPointValue.latitude)===pt(a.geoPointValue.latitude)&&pt(o.geoPointValue.longitude)===pt(a.geoPointValue.longitude)}(n,e);case 2:return function(o,a){if("integerValue"in o&&"integerValue"in a)return pt(o.integerValue)===pt(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const c=pt(o.doubleValue),h=pt(a.doubleValue);return c===h?fh(c)===fh(h):isNaN(c)&&isNaN(h)}return!1}(n,e);case 9:return ma(n.arrayValue.values||[],e.arrayValue.values||[],Ar);case 10:case 11:return function(o,a){const c=o.mapValue.fields||{},h=a.mapValue.fields||{};if(Nv(c)!==Nv(h))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(h[p]===void 0||!Ar(c[p],h[p])))return!1;return!0}(n,e);default:return Pe()}}function Jl(n,e){return(n.values||[]).find(t=>Ar(t,e))!==void 0}function ga(n,e){if(n===e)return 0;const t=Yi(n),r=Yi(e);if(t!==r)return Ge(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ge(n.booleanValue,e.booleanValue);case 2:return function(a,c){const h=pt(a.integerValue||a.doubleValue),p=pt(c.integerValue||c.doubleValue);return h<p?-1:h>p?1:h===p?0:isNaN(h)?isNaN(p)?0:-1:1}(n,e);case 3:return Rv(n.timestampValue,e.timestampValue);case 4:return Rv(Yl(n),Yl(e));case 5:return Ge(n.stringValue,e.stringValue);case 6:return function(a,c){const h=Qi(a),p=Qi(c);return h.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(a,c){const h=a.split("/"),p=c.split("/");for(let m=0;m<h.length&&m<p.length;m++){const w=Ge(h[m],p[m]);if(w!==0)return w}return Ge(h.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,c){const h=Ge(pt(a.latitude),pt(c.latitude));return h!==0?h:Ge(pt(a.longitude),pt(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return jv(n.arrayValue,e.arrayValue);case 10:return function(a,c){var h,p,m,w;const x=a.fields||{},E=c.fields||{},I=(h=x.value)===null||h===void 0?void 0:h.arrayValue,D=(p=E.value)===null||p===void 0?void 0:p.arrayValue,j=Ge(((m=I?.values)===null||m===void 0?void 0:m.length)||0,((w=D?.values)===null||w===void 0?void 0:w.length)||0);return j!==0?j:jv(I,D)}(n.mapValue,e.mapValue);case 11:return function(a,c){if(a===Bu.mapValue&&c===Bu.mapValue)return 0;if(a===Bu.mapValue)return 1;if(c===Bu.mapValue)return-1;const h=a.fields||{},p=Object.keys(h),m=c.fields||{},w=Object.keys(m);p.sort(),w.sort();for(let x=0;x<p.length&&x<w.length;++x){const E=Ge(p[x],w[x]);if(E!==0)return E;const I=ga(h[p[x]],m[w[x]]);if(I!==0)return I}return Ge(p.length,w.length)}(n.mapValue,e.mapValue);default:throw Pe()}}function Rv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ge(n,e);const t=Js(n),r=Js(e),o=Ge(t.seconds,r.seconds);return o!==0?o:Ge(t.nanos,r.nanos)}function jv(n,e){const t=n.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const a=ga(t[o],r[o]);if(a)return a}return Ge(t.length,r.length)}function ya(n){return Pp(n)}function Pp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Js(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Qi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ee.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",o=!0;for(const a of t.values||[])o?o=!1:r+=",",r+=Pp(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const c of r)a?a=!1:o+=",",o+=`${c}:${Pp(t.fields[c])}`;return o+"}"}(n.mapValue):Pe()}function Ap(n){return!!n&&"integerValue"in n}function Sm(n){return!!n&&"arrayValue"in n}function Dv(n){return!!n&&"nullValue"in n}function Vv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function eh(n){return!!n&&"mapValue"in n}function AN(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Vl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Pa(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Vl(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function kN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.value=e}static empty(){return new Ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!eh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vl(t)}setAll(e){let t=Ft.emptyPath(),r={},o=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,r,o),r={},o=[],t=h.popLast()}c?r[h.lastSegment()]=Vl(c):o.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,o)}delete(e){const t=this.field(e.popLast());eh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ar(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];eh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Pa(t,(o,a)=>e[o]=a);for(const o of r)delete e[o]}clone(){return new Ln(Vl(this.value))}}function Q_(n){const e=[];return Pa(n.fields,(t,r)=>{const o=new Ft([t]);if(eh(r)){const a=Q_(r.mapValue).fields;if(a.length===0)e.push(o);else for(const c of a)e.push(o.child(c))}else e.push(o)}),new rr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e,t,r,o,a,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=a,this.data=c,this.documentState=h}static newInvalidDocument(e){return new Yt(e,0,Ae.min(),Ae.min(),Ae.min(),Ln.empty(),0)}static newFoundDocument(e,t,r,o){return new Yt(e,1,t,Ae.min(),r,o,0)}static newNoDocument(e,t){return new Yt(e,2,t,Ae.min(),Ae.min(),Ln.empty(),0)}static newUnknownDocument(e,t){return new Yt(e,3,t,Ae.min(),Ae.min(),Ln.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,t){this.position=e,this.inclusive=t}}function Lv(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const a=e[o],c=n.position[o];if(a.field.isKeyField()?r=Ee.comparator(Ee.fromName(c.referenceValue),t.key):r=ga(c,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ov(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ar(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,t="asc"){this.field=e,this.dir=t}}function NN(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Y_=class{};class bt extends Y_{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new RN(e,t,r):t==="array-contains"?new VN(e,r):t==="in"?new LN(e,r):t==="not-in"?new ON(e,r):t==="array-contains-any"?new MN(e,r):new bt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new jN(e,r):new DN(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ga(t,this.value)):t!==null&&Yi(this.value)===Yi(t)&&this.matchesComparison(ga(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kr extends Y_{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new kr(e,t)}matches(e){return X_(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function X_(n){return n.op==="and"}function J_(n){return CN(n)&&X_(n)}function CN(n){for(const e of n.filters)if(e instanceof kr)return!1;return!0}function kp(n){if(n instanceof bt)return n.field.canonicalString()+n.op.toString()+ya(n.value);if(J_(n))return n.filters.map(e=>kp(e)).join(",");{const e=n.filters.map(t=>kp(t)).join(",");return`${n.op}(${e})`}}function Z_(n,e){return n instanceof bt?function(r,o){return o instanceof bt&&r.op===o.op&&r.field.isEqual(o.field)&&Ar(r.value,o.value)}(n,e):n instanceof kr?function(r,o){return o instanceof kr&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((a,c,h)=>a&&Z_(c,o.filters[h]),!0):!1}(n,e):void Pe()}function eE(n){return n instanceof bt?function(t){return`${t.field.canonicalString()} ${t.op} ${ya(t.value)}`}(n):n instanceof kr?function(t){return t.op.toString()+" {"+t.getFilters().map(eE).join(" ,")+"}"}(n):"Filter"}class RN extends bt{constructor(e,t,r){super(e,t,r),this.key=Ee.fromName(r.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class jN extends bt{constructor(e,t){super(e,"in",t),this.keys=tE("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class DN extends bt{constructor(e,t){super(e,"not-in",t),this.keys=tE("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function tE(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Ee.fromName(r.referenceValue))}class VN extends bt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Sm(t)&&Jl(t.arrayValue,this.value)}}class LN extends bt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Jl(this.value.arrayValue,t)}}class ON extends bt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Jl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Jl(this.value.arrayValue,t)}}class MN extends bt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Sm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Jl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e,t=null,r=[],o=[],a=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=a,this.startAt=c,this.endAt=h,this.ue=null}}function Mv(n,e=null,t=[],r=[],o=null,a=null,c=null){return new UN(n,e,t,r,o,a,c)}function Im(n){const e=ke(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>kp(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Uh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ya(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ya(r)).join(",")),e.ue=t}return e.ue}function bm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!NN(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Z_(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Ov(n.startAt,e.startAt)&&Ov(n.endAt,e.endAt)}function Np(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,t=null,r=[],o=[],a=null,c="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=a,this.limitType=c,this.startAt=h,this.endAt=p,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function FN(n,e,t,r,o,a,c,h){return new Fh(n,e,t,r,o,a,c,h)}function Pm(n){return new Fh(n)}function Uv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function BN(n){return n.collectionGroup!==null}function Ll(n){const e=ke(n);if(e.ce===null){e.ce=[];const t=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new Bt(Ft.comparator);return c.filters.forEach(p=>{p.getFlattenedFilters().forEach(m=>{m.isInequality()&&(h=h.add(m.field))})}),h})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.ce.push(new mh(a,r))}),t.has(Ft.keyField().canonicalString())||e.ce.push(new mh(Ft.keyField(),r))}return e.ce}function Sr(n){const e=ke(n);return e.le||(e.le=zN(e,Ll(n))),e.le}function zN(n,e){if(n.limitType==="F")return Mv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(o=>{const a=o.dir==="desc"?"asc":"desc";return new mh(o.field,a)});const t=n.endAt?new ph(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ph(n.startAt.position,n.startAt.inclusive):null;return Mv(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Cp(n,e,t){return new Fh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Bh(n,e){return bm(Sr(n),Sr(e))&&n.limitType===e.limitType}function nE(n){return`${Im(Sr(n))}|lt:${n.limitType}`}function Zo(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(o=>eE(o)).join(", ")}]`),Uh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(o=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(o)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(o=>ya(o)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(o=>ya(o)).join(",")),`Target(${r})`}(Sr(n))}; limitType=${n.limitType})`}function zh(n,e){return e.isFoundDocument()&&function(r,o){const a=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Ee.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,o){for(const a of Ll(r))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0}(n,e)&&function(r,o){for(const a of r.filters)if(!a.matches(o))return!1;return!0}(n,e)&&function(r,o){return!(r.startAt&&!function(c,h,p){const m=Lv(c,h,p);return c.inclusive?m<=0:m<0}(r.startAt,Ll(r),o)||r.endAt&&!function(c,h,p){const m=Lv(c,h,p);return c.inclusive?m>=0:m>0}(r.endAt,Ll(r),o))}(n,e)}function $N(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function rE(n){return(e,t)=>{let r=!1;for(const o of Ll(n)){const a=qN(o,e,t);if(a!==0)return a;r=r||o.field.isKeyField()}return 0}}function qN(n,e,t){const r=n.field.isKeyField()?Ee.comparator(e.key,t.key):function(a,c,h){const p=c.data.field(a),m=h.data.field(a);return p!==null&&m!==null?ga(p,m):Pe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Pe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,a]of r)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Pa(this.inner,(t,r)=>{for(const[o,a]of r)e(o,a)})}isEmpty(){return W_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=new ct(Ee.comparator);function is(){return GN}const sE=new ct(Ee.comparator);function Cl(...n){let e=sE;for(const t of n)e=e.insert(t.key,t);return e}function iE(n){let e=sE;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ui(){return Ol()}function oE(){return Ol()}function Ol(){return new Aa(n=>n.toString(),(n,e)=>n.isEqual(e))}const HN=new ct(Ee.comparator),WN=new Bt(Ee.comparator);function Le(...n){let e=WN;for(const t of n)e=e.add(t);return e}const KN=new Bt(Ge);function QN(){return KN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fh(e)?"-0":e}}function aE(n){return{integerValue:""+n}}function YN(n,e){return IN(e)?aE(e):Am(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(){this._=void 0}}function XN(n,e,t){return n instanceof gh?function(o,a){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&Em(a)&&(a=Tm(a)),a&&(c.fields.__previous_value__=a),{mapValue:c}}(t,e):n instanceof Zl?cE(n,e):n instanceof ec?uE(n,e):function(o,a){const c=lE(o,a),h=Fv(c)+Fv(o.Pe);return Ap(c)&&Ap(o.Pe)?aE(h):Am(o.serializer,h)}(n,e)}function JN(n,e,t){return n instanceof Zl?cE(n,e):n instanceof ec?uE(n,e):t}function lE(n,e){return n instanceof yh?function(r){return Ap(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class gh extends $h{}class Zl extends $h{constructor(e){super(),this.elements=e}}function cE(n,e){const t=hE(e);for(const r of n.elements)t.some(o=>Ar(o,r))||t.push(r);return{arrayValue:{values:t}}}class ec extends $h{constructor(e){super(),this.elements=e}}function uE(n,e){let t=hE(e);for(const r of n.elements)t=t.filter(o=>!Ar(o,r));return{arrayValue:{values:t}}}class yh extends $h{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Fv(n){return pt(n.integerValue||n.doubleValue)}function hE(n){return Sm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function ZN(n,e){return n.field.isEqual(e.field)&&function(r,o){return r instanceof Zl&&o instanceof Zl||r instanceof ec&&o instanceof ec?ma(r.elements,o.elements,Ar):r instanceof yh&&o instanceof yh?Ar(r.Pe,o.Pe):r instanceof gh&&o instanceof gh}(n.transform,e.transform)}class eC{constructor(e,t){this.version=e,this.transformResults=t}}class Zr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Zr}static exists(e){return new Zr(void 0,e)}static updateTime(e){return new Zr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function th(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class qh{}function dE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new pE(n.key,Zr.none()):new pc(n.key,n.data,Zr.none());{const t=n.data,r=Ln.empty();let o=new Bt(Ft.comparator);for(let a of e.fields)if(!o.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?r.delete(a):r.set(a,c),o=o.add(a)}return new ro(n.key,r,new rr(o.toArray()),Zr.none())}}function tC(n,e,t){n instanceof pc?function(o,a,c){const h=o.value.clone(),p=zv(o.fieldTransforms,a,c.transformResults);h.setAll(p),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):n instanceof ro?function(o,a,c){if(!th(o.precondition,a))return void a.convertToUnknownDocument(c.version);const h=zv(o.fieldTransforms,a,c.transformResults),p=a.data;p.setAll(fE(o)),p.setAll(h),a.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(n,e,t):function(o,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function Ml(n,e,t,r){return n instanceof pc?function(a,c,h,p){if(!th(a.precondition,c))return h;const m=a.value.clone(),w=$v(a.fieldTransforms,p,c);return m.setAll(w),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof ro?function(a,c,h,p){if(!th(a.precondition,c))return h;const m=$v(a.fieldTransforms,p,c),w=c.data;return w.setAll(fE(a)),w.setAll(m),c.convertToFoundDocument(c.version,w).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(x=>x.field))}(n,e,t,r):function(a,c,h){return th(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h}(n,e,t)}function nC(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),a=lE(r.transform,o||null);a!=null&&(t===null&&(t=Ln.empty()),t.set(r.field,a))}return t||null}function Bv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&ma(r,o,(a,c)=>ZN(a,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class pc extends qh{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ro extends qh{constructor(e,t,r,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function fE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function zv(n,e,t){const r=new Map;Qe(n.length===t.length);for(let o=0;o<t.length;o++){const a=n[o],c=a.transform,h=e.data.field(a.field);r.set(a.field,JN(c,h,t[o]))}return r}function $v(n,e,t){const r=new Map;for(const o of n){const a=o.transform,c=t.data.field(o.field);r.set(o.field,XN(a,c,e))}return r}class pE extends qh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rC extends qh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&tC(a,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ml(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ml(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=oE();return this.mutations.forEach(o=>{const a=e.get(o.key),c=a.overlayedDocument;let h=this.applyToLocalView(c,a.mutatedFields);h=t.has(o.key)?null:h;const p=dE(c,h);p!==null&&r.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(Ae.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Le())}isEqual(e){return this.batchId===e.batchId&&ma(this.mutations,e.mutations,(t,r)=>Bv(t,r))&&ma(this.baseMutations,e.baseMutations,(t,r)=>Bv(t,r))}}class km{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Qe(e.mutations.length===r.length);let o=function(){return HN}();const a=e.mutations;for(let c=0;c<a.length;c++)o=o.insert(a[c].key,r[c].version);return new km(e,t,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt,Fe;function aC(n){switch(n){default:return Pe();case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0}}function mE(n){if(n===void 0)return ss("GRPC error has no .code"),se.UNKNOWN;switch(n){case wt.OK:return se.OK;case wt.CANCELLED:return se.CANCELLED;case wt.UNKNOWN:return se.UNKNOWN;case wt.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case wt.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case wt.INTERNAL:return se.INTERNAL;case wt.UNAVAILABLE:return se.UNAVAILABLE;case wt.UNAUTHENTICATED:return se.UNAUTHENTICATED;case wt.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case wt.NOT_FOUND:return se.NOT_FOUND;case wt.ALREADY_EXISTS:return se.ALREADY_EXISTS;case wt.PERMISSION_DENIED:return se.PERMISSION_DENIED;case wt.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case wt.ABORTED:return se.ABORTED;case wt.OUT_OF_RANGE:return se.OUT_OF_RANGE;case wt.UNIMPLEMENTED:return se.UNIMPLEMENTED;case wt.DATA_LOSS:return se.DATA_LOSS;default:return Pe()}}(Fe=wt||(wt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC=new zi([4294967295,4294967295],0);function qv(n){const e=lC().encode(n),t=new U_;return t.update(e),new Uint8Array(t.digest())}function Gv(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new zi([t,r],0),new zi([o,a],0)]}class Nm{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Rl(`Invalid padding: ${t}`);if(r<0)throw new Rl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Rl(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Rl(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=zi.fromNumber(this.Ie)}Ee(e,t,r){let o=e.add(t.multiply(zi.fromNumber(r)));return o.compare(cC)===1&&(o=new zi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=qv(e),[r,o]=Gv(t);for(let a=0;a<this.hashCount;a++){const c=this.Ee(r,o,a);if(!this.de(c))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new Nm(a,o,t);return r.forEach(h=>c.insert(h)),c}insert(e){if(this.Ie===0)return;const t=qv(e),[r,o]=Gv(t);for(let a=0;a<this.hashCount;a++){const c=this.Ee(r,o,a);this.Ae(c)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Rl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,t,r,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,mc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Gh(Ae.min(),o,new ct(Ge),is(),Le())}}class mc{constructor(e,t,r,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new mc(r,t,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,t,r,o){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=o}}class gE{constructor(e,t){this.targetId=e,this.me=t}}class yE{constructor(e,t,r=zt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Hv{constructor(){this.fe=0,this.ge=Kv(),this.pe=zt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Le(),t=Le(),r=Le();return this.ge.forEach((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Pe()}}),new mc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=Kv()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Qe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class uC{constructor(e){this.Le=e,this.Be=new Map,this.ke=is(),this.qe=Wv(),this.Qe=new ct(Ge)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Pe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,o)=>{this.ze(o)&&t(o)})}He(e){const t=e.targetId,r=e.me.count,o=this.Je(t);if(o){const a=o.target;if(Np(a))if(r===0){const c=new Ee(a.path);this.Ue(t,c,Yt.newNoDocument(c,Ae.min()))}else Qe(r===1);else{const c=this.Ye(t);if(c!==r){const h=this.Ze(e),p=h?this.Xe(h,e,c):1;if(p!==0){this.je(t);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,m)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:a=0}=t;let c,h;try{c=Qi(r).toUint8Array()}catch(p){if(p instanceof K_)return pa("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{h=new Nm(c,o,a)}catch(p){return pa(p instanceof Rl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return h.Ie===0?null:h}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let o=0;return r.forEach(a=>{const c=this.Le.tt(),h=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.Ue(t,a,null),o++)}),o}rt(e){const t=new Map;this.Be.forEach((a,c)=>{const h=this.Je(c);if(h){if(a.current&&Np(h.target)){const p=new Ee(h.target.path);this.ke.get(p)!==null||this.it(c,p)||this.Ue(c,p,Yt.newNoDocument(p,e))}a.be&&(t.set(c,a.ve()),a.Ce())}});let r=Le();this.qe.forEach((a,c)=>{let h=!0;c.forEachWhile(p=>{const m=this.Je(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(a))}),this.ke.forEach((a,c)=>c.setReadTime(e));const o=new Gh(e,t,this.Qe,this.ke,r);return this.ke=is(),this.qe=Wv(),this.Qe=new ct(Ge),o}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,t)?o.Fe(t,1):o.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Hv,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Bt(Ge),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Hv),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Wv(){return new ct(Ee.comparator)}function Kv(){return new ct(Ee.comparator)}const hC={asc:"ASCENDING",desc:"DESCENDING"},dC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fC={and:"AND",or:"OR"};class pC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Rp(n,e){return n.useProto3Json||Uh(e)?e:{value:e}}function vh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function mC(n,e){return vh(n,e.toTimestamp())}function Ir(n){return Qe(!!n),Ae.fromTimestamp(function(t){const r=Js(t);return new Pt(r.seconds,r.nanos)}(n))}function Cm(n,e){return jp(n,e).canonicalString()}function jp(n,e){const t=function(o){return new ht(["projects",o.projectId,"databases",o.database])}(n).child("documents");return e===void 0?t:t.child(e)}function wE(n){const e=ht.fromString(n);return Qe(SE(e)),e}function Dp(n,e){return Cm(n.databaseId,e.path)}function Gf(n,e){const t=wE(e);if(t.get(1)!==n.databaseId.projectId)throw new _e(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new _e(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ee(_E(t))}function xE(n,e){return Cm(n.databaseId,e)}function gC(n){const e=wE(n);return e.length===4?ht.emptyPath():_E(e)}function Vp(n){return new ht(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function _E(n){return Qe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Qv(n,e,t){return{name:Dp(n,e),fields:t.value.mapValue.fields}}function yC(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Pe()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=function(m,w){return m.useProto3Json?(Qe(w===void 0||typeof w=="string"),zt.fromBase64String(w||"")):(Qe(w===void 0||w instanceof Buffer||w instanceof Uint8Array),zt.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(m){const w=m.code===void 0?se.UNKNOWN:mE(m.code);return new _e(w,m.message||"")}(c);t=new yE(r,o,a,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Gf(n,r.document.name),a=Ir(r.document.updateTime),c=r.document.createTime?Ir(r.document.createTime):Ae.min(),h=new Ln({mapValue:{fields:r.document.fields}}),p=Yt.newFoundDocument(o,a,c,h),m=r.targetIds||[],w=r.removedTargetIds||[];t=new nh(m,w,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Gf(n,r.document),a=r.readTime?Ir(r.readTime):Ae.min(),c=Yt.newNoDocument(o,a),h=r.removedTargetIds||[];t=new nh([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Gf(n,r.document),a=r.removedTargetIds||[];t=new nh([],a,o,null)}else{if(!("filter"in e))return Pe();{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:a}=r,c=new oC(o,a),h=r.targetId;t=new gE(h,c)}}return t}function vC(n,e){let t;if(e instanceof pc)t={update:Qv(n,e.key,e.value)};else if(e instanceof pE)t={delete:Dp(n,e.key)};else if(e instanceof ro)t={update:Qv(n,e.key,e.data),updateMask:PC(e.fieldMask)};else{if(!(e instanceof rC))return Pe();t={verify:Dp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,c){const h=c.transform;if(h instanceof gh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Zl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof ec)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof yh)return{fieldPath:c.field.canonicalString(),increment:h.Pe};throw Pe()}(0,r))),e.precondition.isNone||(t.currentDocument=function(o,a){return a.updateTime!==void 0?{updateTime:mC(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Pe()}(n,e.precondition)),t}function wC(n,e){return n&&n.length>0?(Qe(e!==void 0),n.map(t=>function(o,a){let c=o.updateTime?Ir(o.updateTime):Ir(a);return c.isEqual(Ae.min())&&(c=Ir(a)),new eC(c,o.transformResults||[])}(t,e))):[]}function xC(n,e){return{documents:[xE(n,e.path)]}}function _C(n,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=xE(n,o);const a=function(m){if(m.length!==0)return TE(kr.create(m,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const c=function(m){if(m.length!==0)return m.map(w=>function(E){return{field:ea(E.field),direction:SC(E.dir)}}(w))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=Rp(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{_t:t,parent:o}}function EC(n){let e=gC(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Qe(r===1);const w=t.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let a=[];t.where&&(a=function(x){const E=EE(x);return E instanceof kr&&J_(E)?E.getFilters():[E]}(t.where));let c=[];t.orderBy&&(c=function(x){return x.map(E=>function(D){return new mh(ta(D.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(E))}(t.orderBy));let h=null;t.limit&&(h=function(x){let E;return E=typeof x=="object"?x.value:x,Uh(E)?null:E}(t.limit));let p=null;t.startAt&&(p=function(x){const E=!!x.before,I=x.values||[];return new ph(I,E)}(t.startAt));let m=null;return t.endAt&&(m=function(x){const E=!x.before,I=x.values||[];return new ph(I,E)}(t.endAt)),FN(e,o,c,a,h,"F",p,m)}function TC(n,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function EE(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ta(t.unaryFilter.field);return bt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=ta(t.unaryFilter.field);return bt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ta(t.unaryFilter.field);return bt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=ta(t.unaryFilter.field);return bt.create(c,"!=",{nullValue:"NULL_VALUE"});default:return Pe()}}(n):n.fieldFilter!==void 0?function(t){return bt.create(ta(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Pe()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return kr.create(t.compositeFilter.filters.map(r=>EE(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Pe()}}(t.compositeFilter.op))}(n):Pe()}function SC(n){return hC[n]}function IC(n){return dC[n]}function bC(n){return fC[n]}function ea(n){return{fieldPath:n.canonicalString()}}function ta(n){return Ft.fromServerFormat(n.fieldPath)}function TE(n){return n instanceof bt?function(t){if(t.op==="=="){if(Vv(t.value))return{unaryFilter:{field:ea(t.field),op:"IS_NAN"}};if(Dv(t.value))return{unaryFilter:{field:ea(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Vv(t.value))return{unaryFilter:{field:ea(t.field),op:"IS_NOT_NAN"}};if(Dv(t.value))return{unaryFilter:{field:ea(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ea(t.field),op:IC(t.op),value:t.value}}}(n):n instanceof kr?function(t){const r=t.getFilters().map(o=>TE(o));return r.length===1?r[0]:{compositeFilter:{op:bC(t.op),filters:r}}}(n):Pe()}function PC(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function SE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,t,r,o,a=Ae.min(),c=Ae.min(),h=zt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(e){return new qs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e){this.ct=e}}function kC(n){const e=EC({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Cp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(){this.un=new CC}addToCollectionParentIndex(e,t){return this.un.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(Xs.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(Xs.min())}updateCollectionGroup(e,t,r){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class CC{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Bt(ht.comparator),a=!o.has(r);return this.index[t]=o.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Bt(ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new va(0)}static kn(){return new va(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(){this.changes=new Aa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Yt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ne.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(r!==null&&Ml(r.mutation,o,rr.empty(),Pt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Le()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Le()){const o=Ui();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(a=>{let c=Cl();return a.forEach((h,p)=>{c=c.insert(h,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Ui();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Le()))}populateOverlays(e,t,r){const o=[];return r.forEach(a=>{t.has(a)||o.push(a)}),this.documentOverlayCache.getOverlays(e,o).next(a=>{a.forEach((c,h)=>{t.set(c,h)})})}computeViews(e,t,r,o){let a=is();const c=Ol(),h=function(){return Ol()}();return t.forEach((p,m)=>{const w=r.get(m.key);o.has(m.key)&&(w===void 0||w.mutation instanceof ro)?a=a.insert(m.key,m):w!==void 0?(c.set(m.key,w.mutation.getFieldMask()),Ml(w.mutation,m,w.mutation.getFieldMask(),Pt.now())):c.set(m.key,rr.empty())}),this.recalculateAndSaveOverlays(e,a).next(p=>(p.forEach((m,w)=>c.set(m,w)),t.forEach((m,w)=>{var x;return h.set(m,new jC(w,(x=c.get(m))!==null&&x!==void 0?x:null))}),h))}recalculateAndSaveOverlays(e,t){const r=Ol();let o=new ct((c,h)=>c-h),a=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const h of c)h.keys().forEach(p=>{const m=t.get(p);if(m===null)return;let w=r.get(p)||rr.empty();w=h.applyToLocalView(m,w),r.set(p,w);const x=(o.get(h.batchId)||Le()).add(p);o=o.insert(h.batchId,x)})}).next(()=>{const c=[],h=o.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),m=p.key,w=p.value,x=oE();w.forEach(E=>{if(!a.has(E)){const I=dE(t.get(E),r.get(E));I!==null&&x.set(E,I),a=a.add(E)}}),c.push(this.documentOverlayCache.saveOverlays(e,m,x))}return ne.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,o){return function(c){return Ee.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):BN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(a=>{const c=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-a.size):ne.resolve(Ui());let h=-1,p=a;return c.next(m=>ne.forEach(m,(w,x)=>(h<x.largestBatchId&&(h=x.largestBatchId),a.get(w)?ne.resolve():this.remoteDocumentCache.getEntry(e,w).next(E=>{p=p.insert(w,E)}))).next(()=>this.populateOverlays(e,m,a)).next(()=>this.computeViews(e,p,m,Le())).next(w=>({batchId:h,changes:iE(w)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next(r=>{let o=Cl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const a=t.collectionGroup;let c=Cl();return this.indexManager.getCollectionParents(e,a).next(h=>ne.forEach(h,p=>{const m=function(x,E){return new Fh(E,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)}(t,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,o).next(w=>{w.forEach((x,E)=>{c=c.insert(x,E)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,o))).next(c=>{a.forEach((p,m)=>{const w=m.getKey();c.get(w)===null&&(c=c.insert(w,Yt.newInvalidDocument(w)))});let h=Cl();return c.forEach((p,m)=>{const w=a.get(p);w!==void 0&&Ml(w.mutation,m,rr.empty(),Pt.now()),zh(t,m)&&(h=h.insert(p,m))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return ne.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:Ir(o.createTime)}}(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(o){return{name:o.name,query:kC(o.bundledQuery),readTime:Ir(o.readTime)}}(t)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(){this.overlays=new ct(Ee.comparator),this.Ir=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ui();return ne.forEach(t,o=>this.getOverlay(e,o).next(a=>{a!==null&&r.set(o,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,a)=>{this.ht(e,t,a)}),ne.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Ir.get(r);return o!==void 0&&(o.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(r)),ne.resolve()}getOverlaysForCollection(e,t,r){const o=Ui(),a=t.length+1,c=new Ee(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const p=h.getNext().value,m=p.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&p.largestBatchId>r&&o.set(p.getKey(),p)}return ne.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let a=new ct((m,w)=>m-w);const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let w=a.get(m.largestBatchId);w===null&&(w=Ui(),a=a.insert(m.largestBatchId,w)),w.set(m.getKey(),m)}}const h=Ui(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((m,w)=>h.set(m,w)),!(h.size()>=o)););return ne.resolve(h)}ht(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const c=this.Ir.get(o.largestBatchId).delete(r.key);this.Ir.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new iC(t,r));let a=this.Ir.get(t);a===void 0&&(a=Le(),this.Ir.set(t,a)),this.Ir.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(){this.sessionToken=zt.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(){this.Tr=new Bt(jt.Er),this.dr=new Bt(jt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new jt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new jt(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new Ee(new ht([])),r=new jt(t,e),o=new jt(t,e+1),a=[];return this.dr.forEachInRange([r,o],c=>{this.Vr(c),a.push(c.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Ee(new ht([])),r=new jt(t,e),o=new jt(t,e+1);let a=Le();return this.dr.forEachInRange([r,o],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new jt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class jt{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Ee.comparator(e.key,t.key)||Ge(e.wr,t.wr)}static Ar(e,t){return Ge(e.wr,t.wr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Bt(jt.Er)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new sC(a,t,r,o);this.mutationQueue.push(c);for(const h of o)this.br=this.br.add(new jt(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ne.resolve(c)}lookupMutationBatch(e,t){return ne.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.vr(r),a=o<0?0:o;return ne.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new jt(t,0),o=new jt(t,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,o],c=>{const h=this.Dr(c.wr);a.push(h)}),ne.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Bt(Ge);return t.forEach(o=>{const a=new jt(o,0),c=new jt(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,c],h=>{r=r.add(h.wr)})}),ne.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let a=r;Ee.isDocumentKey(a)||(a=a.child(""));const c=new jt(new Ee(a),0);let h=new Bt(Ge);return this.br.forEachWhile(p=>{const m=p.key.path;return!!r.isPrefixOf(m)&&(m.length===o&&(h=h.add(p.wr)),!0)},c),ne.resolve(this.Cr(h))}Cr(e){const t=[];return e.forEach(r=>{const o=this.Dr(r);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Qe(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return ne.forEach(t.mutations,o=>{const a=new jt(o.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new jt(t,0),o=this.br.firstAfterOrEqual(r);return ne.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e){this.Mr=e,this.docs=function(){return new ct(Ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),a=o?o.size:0,c=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ne.resolve(r?r.document.mutableCopy():Yt.newInvalidDocument(t))}getEntries(e,t){let r=is();return t.forEach(o=>{const a=this.docs.get(o);r=r.insert(o,a?a.document.mutableCopy():Yt.newInvalidDocument(o))}),ne.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let a=is();const c=t.path,h=new Ee(c.child("")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:m,value:{document:w}}=p.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||_N(xN(w),r)<=0||(o.has(w.key)||zh(t,w))&&(a=a.insert(w.key,w.mutableCopy()))}return ne.resolve(a)}getAllFromCollectionGroup(e,t,r,o){Pe()}Or(e,t){return ne.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new FC(this)}getSize(e){return ne.resolve(this.size)}}class FC extends RC{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.cr.addEntry(e,o)):this.cr.removeEntry(r)}),ne.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e){this.persistence=e,this.Nr=new Aa(t=>Im(t),bm),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Rm,this.targetCount=0,this.kr=va.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,o)=>t(o)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),ne.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new va(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.Kn(t),ne.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,r){let o=0;const a=[];return this.Nr.forEach((c,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.Nr.delete(c),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),o++)}),ne.waitFor(a).next(()=>o)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return ne.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),ne.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach(c=>{a.push(o.markPotentiallyOrphaned(e,c))}),ne.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return ne.resolve(r)}containsKey(e,t){return ne.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,t){this.qr={},this.overlays={},this.Qr=new _m(0),this.Kr=!1,this.Kr=!0,this.$r=new OC,this.referenceDelegate=e(this),this.Ur=new BC(this),this.indexManager=new NC,this.remoteDocumentCache=function(o){return new UC(o)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new AC(t),this.Gr=new VC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new LC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new MC(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){ge("MemoryPersistence","Starting transaction:",e);const o=new $C(this.Qr.next());return this.referenceDelegate.zr(),r(o).next(a=>this.referenceDelegate.jr(o).next(()=>a)).toPromise().then(a=>(o.raiseOnCommittedEvent(),a))}Hr(e,t){return ne.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class $C extends TN{constructor(e){super(),this.currentSequenceNumber=e}}class jm{constructor(e){this.persistence=e,this.Jr=new Rm,this.Yr=null}static Zr(e){return new jm(e)}get Xr(){if(this.Yr)return this.Yr;throw Pe()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),ne.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(o=>this.Xr.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(a=>this.Xr.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.Xr,r=>{const o=Ee.fromPath(r);return this.ei(e,o).next(a=>{a||t.removeEntry(o,Ae.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return ne.or([()=>ne.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=o}static Wi(e,t){let r=Le(),o=Le();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new Dm(e,t.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return kb()?8:SN(Xt())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,o){const a={result:null};return this.Yi(e,t).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.Zi(e,t,o,r).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new qC;return this.Xi(e,t,c).next(h=>{if(a.result=h,this.zi)return this.es(e,t,c,h.size)})}).next(()=>a.result)}es(e,t,r,o){return r.documentReadCount<this.ji?(Il()<=Me.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",Zo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ne.resolve()):(Il()<=Me.DEBUG&&ge("QueryEngine","Query:",Zo(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.Hi*o?(Il()<=Me.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",Zo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sr(t))):ne.resolve())}Yi(e,t){if(Uv(t))return ne.resolve(null);let r=Sr(t);return this.indexManager.getIndexType(e,r).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=Cp(t,null,"F"),r=Sr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=Le(...a);return this.Ji.getDocuments(e,c).next(h=>this.indexManager.getMinOffset(e,r).next(p=>{const m=this.ts(t,h);return this.ns(t,m,c,p.readTime)?this.Yi(e,Cp(t,null,"F")):this.rs(e,m,t,p)}))})))}Zi(e,t,r,o){return Uv(t)||o.isEqual(Ae.min())?ne.resolve(null):this.Ji.getDocuments(e,r).next(a=>{const c=this.ts(t,a);return this.ns(t,c,r,o)?ne.resolve(null):(Il()<=Me.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Zo(t)),this.rs(e,c,t,wN(o,-1)).next(h=>h))})}ts(e,t){let r=new Bt(rE(e));return t.forEach((o,a)=>{zh(e,a)&&(r=r.add(a))}),r}ns(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}Xi(e,t,r){return Il()<=Me.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",Zo(t)),this.Ji.getDocumentsMatchingQuery(e,t,Xs.min(),r)}rs(e,t,r,o){return this.Ji.getDocumentsMatchingQuery(e,r,o).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,t,r,o){this.persistence=e,this.ss=t,this.serializer=o,this.os=new ct(Ge),this._s=new Aa(a=>Im(a),bm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DC(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function WC(n,e,t,r){return new HC(n,e,t,r)}async function IE(n,e){const t=ke(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(a=>(o=a,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],h=[];let p=Le();for(const m of o){c.push(m.batchId);for(const w of m.mutations)p=p.add(w.key)}for(const m of a){h.push(m.batchId);for(const w of m.mutations)p=p.add(w.key)}return t.localDocuments.getDocuments(r,p).next(m=>({hs:m,removedBatchIds:c,addedBatchIds:h}))})})}function KC(n,e){const t=ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),a=t.cs.newChangeBuffer({trackRemovals:!0});return function(h,p,m,w){const x=m.batch,E=x.keys();let I=ne.resolve();return E.forEach(D=>{I=I.next(()=>w.getEntry(p,D)).next(j=>{const A=m.docVersions.get(D);Qe(A!==null),j.version.compareTo(A)<0&&(x.applyToRemoteDocument(j,m),j.isValidDocument()&&(j.setReadTime(m.commitVersion),w.addEntry(j)))})}),I.next(()=>h.mutationQueue.removeMutationBatch(p,x))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let p=Le();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(p=p.add(h.batch.mutations[m].key));return p}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function bE(n){const e=ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function QC(n,e){const t=ke(n),r=e.snapshotVersion;let o=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.cs.newChangeBuffer({trackRemovals:!0});o=t.os;const h=[];e.targetChanges.forEach((w,x)=>{const E=o.get(x);if(!E)return;h.push(t.Ur.removeMatchingKeys(a,w.removedDocuments,x).next(()=>t.Ur.addMatchingKeys(a,w.addedDocuments,x)));let I=E.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(x)!==null?I=I.withResumeToken(zt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):w.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(w.resumeToken,r)),o=o.insert(x,I),function(j,A,F){return j.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=3e8?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(E,I,w)&&h.push(t.Ur.updateTargetData(a,I))});let p=is(),m=Le();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,w))}),h.push(YC(a,c,e.documentUpdates).next(w=>{p=w.Ps,m=w.Is})),!r.isEqual(Ae.min())){const w=t.Ur.getLastRemoteSnapshotVersion(a).next(x=>t.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(w)}return ne.waitFor(h).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,p,m)).next(()=>p)}).then(a=>(t.os=o,a))}function YC(n,e,t){let r=Le(),o=Le();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let c=is();return t.forEach((h,p)=>{const m=a.get(h);p.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(h)),p.isNoDocument()&&p.version.isEqual(Ae.min())?(e.removeEntry(h,p.readTime),c=c.insert(h,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),c=c.insert(h,p)):ge("LocalStore","Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",p.version)}),{Ps:c,Is:o}})}function XC(n,e){const t=ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function JC(n,e){const t=ke(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Ur.getTargetData(r,e).next(a=>a?(o=a,ne.resolve(o)):t.Ur.allocateTargetId(r).next(c=>(o=new qs(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.os.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}async function Lp(n,e,t){const r=ke(n),o=r.os.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,o))}catch(c){if(!fc(c))throw c;ge("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.os=r.os.remove(e),r._s.delete(o.target)}function Yv(n,e,t){const r=ke(n);let o=Ae.min(),a=Le();return r.persistence.runTransaction("Execute query","readwrite",c=>function(p,m,w){const x=ke(p),E=x._s.get(w);return E!==void 0?ne.resolve(x.os.get(E)):x.Ur.getTargetData(m,w)}(r,c,Sr(e)).next(h=>{if(h)return o=h.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(c,h.targetId).next(p=>{a=p})}).next(()=>r.ss.getDocumentsMatchingQuery(c,e,t?o:Ae.min(),t?a:Le())).next(h=>(ZC(r,$N(e),h),{documents:h,Ts:a})))}function ZC(n,e,t){let r=n.us.get(e)||Ae.min();t.forEach((o,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.us.set(e,r)}class Xv{constructor(){this.activeTargetIds=QN()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class e2{constructor(){this.so=new Xv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Xv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ge("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ge("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zu=null;function Hf(){return zu===null?zu=function(){return 268435456+Math.round(2147483648*Math.random())}():zu++,"0x"+zu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt="WebChannelConnection";class s2 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${o}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${a}`}get Fo(){return!1}Mo(t,r,o,a,c){const h=Hf(),p=this.xo(t,r.toUriEncodedString());ge("RestConnection",`Sending RPC '${t}' ${h}:`,p,o);const m={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(m,a,c),this.No(t,p,m,o).then(w=>(ge("RestConnection",`Received RPC '${t}' ${h}: `,w),w),w=>{throw pa("RestConnection",`RPC '${t}' ${h} failed with error: `,w,"url: ",p,"request:",o),w})}Lo(t,r,o,a,c,h){return this.Mo(t,r,o,a,c)}Oo(t,r,o){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ba}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,c)=>t[c]=a),o&&o.headers.forEach((a,c)=>t[c]=a)}xo(t,r){const o=n2[t];return`${this.Do}/v1/${r}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,o){const a=Hf();return new Promise((c,h)=>{const p=new F_;p.setWithCredentials(!0),p.listenOnce(B_.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Zu.NO_ERROR:const w=p.getResponseJson();ge(Wt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(w)),c(w);break;case Zu.TIMEOUT:ge(Wt,`RPC '${e}' ${a} timed out`),h(new _e(se.DEADLINE_EXCEEDED,"Request time out"));break;case Zu.HTTP_ERROR:const x=p.getStatus();if(ge(Wt,`RPC '${e}' ${a} failed with status:`,x,"response text:",p.getResponseText()),x>0){let E=p.getResponseJson();Array.isArray(E)&&(E=E[0]);const I=E?.error;if(I&&I.status&&I.message){const D=function(A){const F=A.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(F)>=0?F:se.UNKNOWN}(I.status);h(new _e(D,I.message))}else h(new _e(se.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new _e(se.UNAVAILABLE,"Connection failed."));break;default:Pe()}}finally{ge(Wt,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(o);ge(Wt,`RPC '${e}' ${a} sending request:`,o),p.send(t,"POST",m,r,15)})}Bo(e,t,r){const o=Hf(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=q_(),h=$_(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Oo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const w=a.join("");ge(Wt,`Creating RPC '${e}' stream ${o}: ${w}`,p);const x=c.createWebChannel(w,p);let E=!1,I=!1;const D=new r2({Io:A=>{I?ge(Wt,`Not sending because RPC '${e}' stream ${o} is closed:`,A):(E||(ge(Wt,`Opening RPC '${e}' stream ${o} transport.`),x.open(),E=!0),ge(Wt,`RPC '${e}' stream ${o} sending:`,A),x.send(A))},To:()=>x.close()}),j=(A,F,H)=>{A.listen(F,O=>{try{H(O)}catch(Q){setTimeout(()=>{throw Q},0)}})};return j(x,Nl.EventType.OPEN,()=>{I||(ge(Wt,`RPC '${e}' stream ${o} transport opened.`),D.yo())}),j(x,Nl.EventType.CLOSE,()=>{I||(I=!0,ge(Wt,`RPC '${e}' stream ${o} transport closed`),D.So())}),j(x,Nl.EventType.ERROR,A=>{I||(I=!0,pa(Wt,`RPC '${e}' stream ${o} transport errored:`,A),D.So(new _e(se.UNAVAILABLE,"The operation could not be completed")))}),j(x,Nl.EventType.MESSAGE,A=>{var F;if(!I){const H=A.data[0];Qe(!!H);const O=H,Q=O.error||((F=O[0])===null||F===void 0?void 0:F.error);if(Q){ge(Wt,`RPC '${e}' stream ${o} received error:`,Q);const Z=Q.status;let ie=function(P){const V=wt[P];if(V!==void 0)return mE(V)}(Z),C=Q.message;ie===void 0&&(ie=se.INTERNAL,C="Unknown error status: "+Z+" with message "+Q.message),I=!0,D.So(new _e(ie,C)),x.close()}else ge(Wt,`RPC '${e}' stream ${o} received:`,H),D.bo(H)}}),j(h,z_.STAT_EVENT,A=>{A.stat===bp.PROXY?ge(Wt,`RPC '${e}' stream ${o} detected buffering proxy`):A.stat===bp.NOPROXY&&ge(Wt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}}function Wf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(n){return new pC(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e,t,r=1e3,o=1.5,a=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=o,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),o=Math.max(0,t-r);o>0&&ge("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e,t,r,o,a,c,h,p){this.ui=e,this.Ho=r,this.Jo=o,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new PE(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===se.RESOURCE_EXHAUSTED?(ss(t.toString()),ss("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Yo===t&&this.P_(r,o)},r=>{e(()=>{const o=new _e(se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(o)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(o=>{r(()=>this.I_(o))}),this.stream.onMessage(o=>{r(()=>++this.e_==1?this.E_(o):this.onNext(o))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ge("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(ge("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class i2 extends AE{constructor(e,t,r,o,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,c),this.serializer=a}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=yC(this.serializer,e),r=function(a){if(!("targetChange"in a))return Ae.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?Ae.min():c.readTime?Ir(c.readTime):Ae.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=Vp(this.serializer),t.addTarget=function(a,c){let h;const p=c.target;if(h=Np(p)?{documents:xC(a,p)}:{query:_C(a,p)._t},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=vE(a,c.resumeToken);const m=Rp(a,c.expectedCount);m!==null&&(h.expectedCount=m)}else if(c.snapshotVersion.compareTo(Ae.min())>0){h.readTime=vh(a,c.snapshotVersion.toTimestamp());const m=Rp(a,c.expectedCount);m!==null&&(h.expectedCount=m)}return h}(this.serializer,e);const r=TC(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=Vp(this.serializer),t.removeTarget=e,this.a_(t)}}class o2 extends AE{constructor(e,t,r,o,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,c),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Qe(!!e.streamToken),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Qe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=wC(e.writeResults,e.commitTime),r=Ir(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=Vp(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>vC(this.serializer,r))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2 extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new _e(se.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Mo(e,jp(t,r),o,a,c)).catch(a=>{throw a.name==="FirebaseError"?(a.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new _e(se.UNKNOWN,a.toString())})}Lo(e,t,r,o,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.Lo(e,jp(t,r),o,c,h,a)).catch(c=>{throw c.name==="FirebaseError"?(c.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new _e(se.UNKNOWN,c.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class l2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ss(t),this.D_=!1):ge("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e,t,r,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(c=>{r.enqueueAndForget(async()=>{so(this)&&(ge("RemoteStore","Restarting streams for network reachability change."),await async function(p){const m=ke(p);m.L_.add(4),await gc(m),m.q_.set("Unknown"),m.L_.delete(4),await Wh(m)}(this))})}),this.q_=new l2(r,o)}}async function Wh(n){if(so(n))for(const e of n.B_)await e(!0)}async function gc(n){for(const e of n.B_)await e(!1)}function kE(n,e){const t=ke(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Mm(t)?Om(t):ka(t).r_()&&Lm(t,e))}function Vm(n,e){const t=ke(n),r=ka(t);t.N_.delete(e),r.r_()&&NE(t,e),t.N_.size===0&&(r.r_()?r.o_():so(t)&&t.q_.set("Unknown"))}function Lm(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ka(n).A_(e)}function NE(n,e){n.Q_.xe(e),ka(n).R_(e)}function Om(n){n.Q_=new uC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),ka(n).start(),n.q_.v_()}function Mm(n){return so(n)&&!ka(n).n_()&&n.N_.size>0}function so(n){return ke(n).L_.size===0}function CE(n){n.Q_=void 0}async function u2(n){n.q_.set("Online")}async function h2(n){n.N_.forEach((e,t)=>{Lm(n,e)})}async function d2(n,e){CE(n),Mm(n)?(n.q_.M_(e),Om(n)):n.q_.set("Unknown")}async function f2(n,e,t){if(n.q_.set("Online"),e instanceof yE&&e.state===2&&e.cause)try{await async function(o,a){const c=a.cause;for(const h of a.targetIds)o.N_.has(h)&&(await o.remoteSyncer.rejectListen(h,c),o.N_.delete(h),o.Q_.removeTarget(h))}(n,e)}catch(r){ge("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await wh(n,r)}else if(e instanceof nh?n.Q_.Ke(e):e instanceof gE?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Ae.min()))try{const r=await bE(n.localStore);t.compareTo(r)>=0&&await function(a,c){const h=a.Q_.rt(c);return h.targetChanges.forEach((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const w=a.N_.get(m);w&&a.N_.set(m,w.withResumeToken(p.resumeToken,c))}}),h.targetMismatches.forEach((p,m)=>{const w=a.N_.get(p);if(!w)return;a.N_.set(p,w.withResumeToken(zt.EMPTY_BYTE_STRING,w.snapshotVersion)),NE(a,p);const x=new qs(w.target,p,m,w.sequenceNumber);Lm(a,x)}),a.remoteSyncer.applyRemoteEvent(h)}(n,t)}catch(r){ge("RemoteStore","Failed to raise snapshot:",r),await wh(n,r)}}async function wh(n,e,t){if(!fc(e))throw e;n.L_.add(1),await gc(n),n.q_.set("Offline"),t||(t=()=>bE(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ge("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await Wh(n)})}function RE(n,e){return e().catch(t=>wh(n,t,e))}async function Kh(n){const e=ke(n),t=Zs(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;p2(e);)try{const o=await XC(e.localStore,r);if(o===null){e.O_.length===0&&t.o_();break}r=o.batchId,m2(e,o)}catch(o){await wh(e,o)}jE(e)&&DE(e)}function p2(n){return so(n)&&n.O_.length<10}function m2(n,e){n.O_.push(e);const t=Zs(n);t.r_()&&t.V_&&t.m_(e.mutations)}function jE(n){return so(n)&&!Zs(n).n_()&&n.O_.length>0}function DE(n){Zs(n).start()}async function g2(n){Zs(n).p_()}async function y2(n){const e=Zs(n);for(const t of n.O_)e.m_(t.mutations)}async function v2(n,e,t){const r=n.O_.shift(),o=km.from(r,e,t);await RE(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),await Kh(n)}async function w2(n,e){e&&Zs(n).V_&&await async function(r,o){if(function(c){return aC(c)&&c!==se.ABORTED}(o.code)){const a=r.O_.shift();Zs(r).s_(),await RE(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,o)),await Kh(r)}}(n,e),jE(n)&&DE(n)}async function Zv(n,e){const t=ke(n);t.asyncQueue.verifyOperationInProgress(),ge("RemoteStore","RemoteStore received new credentials");const r=so(t);t.L_.add(3),await gc(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await Wh(t)}async function x2(n,e){const t=ke(n);e?(t.L_.delete(2),await Wh(t)):e||(t.L_.add(2),await gc(t),t.q_.set("Unknown"))}function ka(n){return n.K_||(n.K_=function(t,r,o){const a=ke(t);return a.w_(),new i2(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(n.datastore,n.asyncQueue,{Eo:u2.bind(null,n),Ro:h2.bind(null,n),mo:d2.bind(null,n),d_:f2.bind(null,n)}),n.B_.push(async e=>{e?(n.K_.s_(),Mm(n)?Om(n):n.q_.set("Unknown")):(await n.K_.stop(),CE(n))})),n.K_}function Zs(n){return n.U_||(n.U_=function(t,r,o){const a=ke(t);return a.w_(),new o2(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:g2.bind(null,n),mo:w2.bind(null,n),f_:y2.bind(null,n),g_:v2.bind(null,n)}),n.B_.push(async e=>{e?(n.U_.s_(),await Kh(n)):(await n.U_.stop(),n.O_.length>0&&(ge("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))})),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,t,r,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=a,this.deferred=new Ks,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,a){const c=Date.now()+r,h=new Um(e,t,c,o,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fm(n,e){if(ss("AsyncQueue",`${e}: ${n}`),fc(n))return new _e(se.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ee.comparator(t.key,r.key):(t,r)=>Ee.comparator(t.key,r.key),this.keyedMap=Cl(),this.sortedSet=new ct(this.comparator)}static emptySet(e){return new da(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof da)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=r.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new da;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(){this.W_=new ct(Ee.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Pe():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class wa{constructor(e,t,r,o,a,c,h,p,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,o,a){const c=[];return t.forEach(h=>{c.push({type:0,doc:h})}),new wa(e,t,da.emptySet(t),c,r,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class E2{constructor(){this.queries=tw(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const o=ke(t),a=o.queries;o.queries=tw(),a.forEach((c,h)=>{for(const p of h.j_)p.onError(r)})})(this,new _e(se.ABORTED,"Firestore shutting down"))}}function tw(){return new Aa(n=>nE(n),Bh)}async function T2(n,e){const t=ke(n);let r=3;const o=e.query;let a=t.queries.get(o);a?!a.H_()&&e.J_()&&(r=2):(a=new _2,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await t.onListen(o,!0);break;case 1:a.z_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const h=Fm(c,`Initialization of query '${Zo(e.query)}' failed`);return void e.onError(h)}t.queries.set(o,a),a.j_.push(e),e.Z_(t.onlineState),a.z_&&e.X_(a.z_)&&Bm(t)}async function S2(n,e){const t=ke(n),r=e.query;let o=3;const a=t.queries.get(r);if(a){const c=a.j_.indexOf(e);c>=0&&(a.j_.splice(c,1),a.j_.length===0?o=e.J_()?0:1:!a.H_()&&e.J_()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function I2(n,e){const t=ke(n);let r=!1;for(const o of e){const a=o.query,c=t.queries.get(a);if(c){for(const h of c.j_)h.X_(o)&&(r=!0);c.z_=o}}r&&Bm(t)}function b2(n,e,t){const r=ke(n),o=r.queries.get(e);if(o)for(const a of o.j_)a.onError(t);r.queries.delete(e)}function Bm(n){n.Y_.forEach(e=>{e.next()})}var Op,nw;(nw=Op||(Op={})).ea="default",nw.Cache="cache";class P2{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new wa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=wa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Op.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e){this.key=e}}class LE{constructor(e){this.key=e}}class A2{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Le(),this.mutatedKeys=Le(),this.Aa=rE(e),this.Ra=new da(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new ew,o=t?t.Ra:this.Ra;let a=t?t.mutatedKeys:this.mutatedKeys,c=o,h=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((w,x)=>{const E=o.get(w),I=zh(this.query,x)?x:null,D=!!E&&this.mutatedKeys.has(E.key),j=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let A=!1;E&&I?E.data.isEqual(I.data)?D!==j&&(r.track({type:3,doc:I}),A=!0):this.ga(E,I)||(r.track({type:2,doc:I}),A=!0,(p&&this.Aa(I,p)>0||m&&this.Aa(I,m)<0)&&(h=!0)):!E&&I?(r.track({type:0,doc:I}),A=!0):E&&!I&&(r.track({type:1,doc:E}),A=!0,(p||m)&&(h=!0)),A&&(I?(c=c.add(I),a=j?a.add(w):a.delete(w)):(c=c.delete(w),a=a.delete(w)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const w=this.query.limitType==="F"?c.last():c.first();c=c.delete(w.key),a=a.delete(w.key),r.track({type:1,doc:w})}return{Ra:c,fa:r,ns:h,mutatedKeys:a}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const c=e.fa.G_();c.sort((w,x)=>function(I,D){const j=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe()}};return j(I)-j(D)}(w.type,x.type)||this.Aa(w.doc,x.doc)),this.pa(r),o=o!=null&&o;const h=t&&!o?this.ya():[],p=this.da.size===0&&this.current&&!o?1:0,m=p!==this.Ea;return this.Ea=p,c.length!==0||m?{snapshot:new wa(this.query,e.Ra,a,c,e.mutatedKeys,p===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:h}:{wa:h}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new ew,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Le(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new LE(r))}),this.da.forEach(r=>{e.has(r)||t.push(new VE(r))}),t}ba(e){this.Ta=e.Ts,this.da=Le();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return wa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class k2{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class N2{constructor(e){this.key=e,this.va=!1}}class C2{constructor(e,t,r,o,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Ca={},this.Fa=new Aa(h=>nE(h),Bh),this.Ma=new Map,this.xa=new Set,this.Oa=new ct(Ee.comparator),this.Na=new Map,this.La=new Rm,this.Ba={},this.ka=new Map,this.qa=va.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function R2(n,e,t=!0){const r=zE(n);let o;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.Da()):o=await OE(r,e,t,!0),o}async function j2(n,e){const t=zE(n);await OE(t,e,!0,!1)}async function OE(n,e,t,r){const o=await JC(n.localStore,Sr(e)),a=o.targetId,c=n.sharedClientState.addLocalQueryTarget(a,t);let h;return r&&(h=await D2(n,e,a,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&kE(n.remoteStore,o),h}async function D2(n,e,t,r,o){n.Ka=(x,E,I)=>async function(j,A,F,H){let O=A.view.ma(F);O.ns&&(O=await Yv(j.localStore,A.query,!1).then(({documents:C})=>A.view.ma(C,O)));const Q=H&&H.targetChanges.get(A.targetId),Z=H&&H.targetMismatches.get(A.targetId)!=null,ie=A.view.applyChanges(O,j.isPrimaryClient,Q,Z);return sw(j,A.targetId,ie.wa),ie.snapshot}(n,x,E,I);const a=await Yv(n.localStore,e,!0),c=new A2(e,a.Ts),h=c.ma(a.documents),p=mc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",o),m=c.applyChanges(h,n.isPrimaryClient,p);sw(n,t,m.wa);const w=new k2(e,t,c);return n.Fa.set(e,w),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),m.snapshot}async function V2(n,e,t){const r=ke(n),o=r.Fa.get(e),a=r.Ma.get(o.targetId);if(a.length>1)return r.Ma.set(o.targetId,a.filter(c=>!Bh(c,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Lp(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),t&&Vm(r.remoteStore,o.targetId),Mp(r,o.targetId)}).catch(dc)):(Mp(r,o.targetId),await Lp(r.localStore,o.targetId,!0))}async function L2(n,e){const t=ke(n),r=t.Fa.get(e),o=t.Ma.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Vm(t.remoteStore,r.targetId))}async function O2(n,e,t){const r=q2(n);try{const o=await function(c,h){const p=ke(c),m=Pt.now(),w=h.reduce((I,D)=>I.add(D.key),Le());let x,E;return p.persistence.runTransaction("Locally write mutations","readwrite",I=>{let D=is(),j=Le();return p.cs.getEntries(I,w).next(A=>{D=A,D.forEach((F,H)=>{H.isValidDocument()||(j=j.add(F))})}).next(()=>p.localDocuments.getOverlayedDocuments(I,D)).next(A=>{x=A;const F=[];for(const H of h){const O=nC(H,x.get(H.key).overlayedDocument);O!=null&&F.push(new ro(H.key,O,Q_(O.value.mapValue),Zr.exists(!0)))}return p.mutationQueue.addMutationBatch(I,m,F,h)}).next(A=>{E=A;const F=A.applyToLocalDocumentSet(x,j);return p.documentOverlayCache.saveOverlays(I,A.batchId,F)})}).then(()=>({batchId:E.batchId,changes:iE(x)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(c,h,p){let m=c.Ba[c.currentUser.toKey()];m||(m=new ct(Ge)),m=m.insert(h,p),c.Ba[c.currentUser.toKey()]=m}(r,o.batchId,t),await yc(r,o.changes),await Kh(r.remoteStore)}catch(o){const a=Fm(o,"Failed to persist write");t.reject(a)}}async function ME(n,e){const t=ke(n);try{const r=await QC(t.localStore,e);e.targetChanges.forEach((o,a)=>{const c=t.Na.get(a);c&&(Qe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?c.va=!0:o.modifiedDocuments.size>0?Qe(c.va):o.removedDocuments.size>0&&(Qe(c.va),c.va=!1))}),await yc(t,r,e)}catch(r){await dc(r)}}function rw(n,e,t){const r=ke(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.Fa.forEach((a,c)=>{const h=c.view.Z_(e);h.snapshot&&o.push(h.snapshot)}),function(c,h){const p=ke(c);p.onlineState=h;let m=!1;p.queries.forEach((w,x)=>{for(const E of x.j_)E.Z_(h)&&(m=!0)}),m&&Bm(p)}(r.eventManager,e),o.length&&r.Ca.d_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function M2(n,e,t){const r=ke(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Na.get(e),a=o&&o.key;if(a){let c=new ct(Ee.comparator);c=c.insert(a,Yt.newNoDocument(a,Ae.min()));const h=Le().add(a),p=new Gh(Ae.min(),new Map,new ct(Ge),c,h);await ME(r,p),r.Oa=r.Oa.remove(a),r.Na.delete(e),zm(r)}else await Lp(r.localStore,e,!1).then(()=>Mp(r,e,t)).catch(dc)}async function U2(n,e){const t=ke(n),r=e.batch.batchId;try{const o=await KC(t.localStore,e);FE(t,r,null),UE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await yc(t,o)}catch(o){await dc(o)}}async function F2(n,e,t){const r=ke(n);try{const o=await function(c,h){const p=ke(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let w;return p.mutationQueue.lookupMutationBatch(m,h).next(x=>(Qe(x!==null),w=x.keys(),p.mutationQueue.removeMutationBatch(m,x))).next(()=>p.mutationQueue.performConsistencyCheck(m)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(m,w,h)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,w)).next(()=>p.localDocuments.getDocuments(m,w))})}(r.localStore,e);FE(r,e,t),UE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await yc(r,o)}catch(o){await dc(o)}}function UE(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function FE(n,e,t){const r=ke(n);let o=r.Ba[r.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),r.Ba[r.currentUser.toKey()]=o}}function Mp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||BE(n,r)})}function BE(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(Vm(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),zm(n))}function sw(n,e,t){for(const r of t)r instanceof VE?(n.La.addReference(r.key,e),B2(n,r)):r instanceof LE?(ge("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||BE(n,r.key)):Pe()}function B2(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(ge("SyncEngine","New document in limbo: "+t),n.xa.add(r),zm(n))}function zm(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Ee(ht.fromString(e)),r=n.qa.next();n.Na.set(r,new N2(t)),n.Oa=n.Oa.insert(t,r),kE(n.remoteStore,new qs(Sr(Pm(t.path)),r,"TargetPurposeLimboResolution",_m.oe))}}async function yc(n,e,t){const r=ke(n),o=[],a=[],c=[];r.Fa.isEmpty()||(r.Fa.forEach((h,p)=>{c.push(r.Ka(p,e,t).then(m=>{var w;if((m||t)&&r.isPrimaryClient){const x=m?!m.fromCache:(w=t?.targetChanges.get(p.targetId))===null||w===void 0?void 0:w.current;r.sharedClientState.updateQueryState(p.targetId,x?"current":"not-current")}if(m){o.push(m);const x=Dm.Wi(p.targetId,m);a.push(x)}}))}),await Promise.all(c),r.Ca.d_(o),await async function(p,m){const w=ke(p);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>ne.forEach(m,E=>ne.forEach(E.$i,I=>w.persistence.referenceDelegate.addReference(x,E.targetId,I)).next(()=>ne.forEach(E.Ui,I=>w.persistence.referenceDelegate.removeReference(x,E.targetId,I)))))}catch(x){if(!fc(x))throw x;ge("LocalStore","Failed to update sequence numbers: "+x)}for(const x of m){const E=x.targetId;if(!x.fromCache){const I=w.os.get(E),D=I.snapshotVersion,j=I.withLastLimboFreeSnapshotVersion(D);w.os=w.os.insert(E,j)}}}(r.localStore,a))}async function z2(n,e){const t=ke(n);if(!t.currentUser.isEqual(e)){ge("SyncEngine","User change. New user:",e.toKey());const r=await IE(t.localStore,e);t.currentUser=e,function(a,c){a.ka.forEach(h=>{h.forEach(p=>{p.reject(new _e(se.CANCELLED,c))})}),a.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await yc(t,r.hs)}}function $2(n,e){const t=ke(n),r=t.Na.get(e);if(r&&r.va)return Le().add(r.key);{let o=Le();const a=t.Ma.get(e);if(!a)return o;for(const c of a){const h=t.Fa.get(c);o=o.unionWith(h.view.Va)}return o}}function zE(n){const e=ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ME.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=M2.bind(null,e),e.Ca.d_=I2.bind(null,e.eventManager),e.Ca.$a=b2.bind(null,e.eventManager),e}function q2(n){const e=ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=U2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=F2.bind(null,e),e}class xh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return WC(this.persistence,new GC,e.initialUser,this.serializer)}Ga(e){return new zC(jm.Zr,this.serializer)}Wa(e){return new e2}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xh.provider={build:()=>new xh};class Up{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>rw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=z2.bind(null,this.syncEngine),await x2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new E2}()}createDatastore(e){const t=Hh(e.databaseInfo.databaseId),r=function(a){return new s2(a)}(e.databaseInfo);return function(a,c,h,p){return new a2(a,c,h,p)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,o,a,c,h){return new c2(r,o,a,c,h)}(this.localStore,this.datastore,e.asyncQueue,t=>rw(this.syncEngine,t,0),function(){return Jv.D()?new Jv:new t2}())}createSyncEngine(e,t){return function(o,a,c,h,p,m,w){const x=new C2(o,a,c,h,p,m);return w&&(x.Qa=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const a=ke(o);ge("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await gc(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Up.provider={build:()=>new Up};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ss("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e,t,r,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Qt.UNAUTHENTICATED,this.clientId=H_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async c=>{ge("FirestoreClient","Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(ge("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ks;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Fm(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Kf(n,e){n.asyncQueue.verifyOperationInProgress(),ge("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async o=>{r.isEqual(o)||(await IE(e.localStore,o),r=o)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function iw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await W2(n);ge("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Zv(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,o)=>Zv(e.remoteStore,o)),n._onlineComponents=e}async function W2(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ge("FirestoreClient","Using user provided OfflineComponentProvider");try{await Kf(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===se.FAILED_PRECONDITION||o.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;pa("Error using user provided cache. Falling back to memory cache: "+t),await Kf(n,new xh)}}else ge("FirestoreClient","Using default OfflineComponentProvider"),await Kf(n,new xh);return n._offlineComponents}async function $E(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ge("FirestoreClient","Using user provided OnlineComponentProvider"),await iw(n,n._uninitializedComponentsProvider._online)):(ge("FirestoreClient","Using default OnlineComponentProvider"),await iw(n,new Up))),n._onlineComponents}function K2(n){return $E(n).then(e=>e.syncEngine)}async function Q2(n){const e=await $E(n),t=e.eventManager;return t.onListen=R2.bind(null,e.syncEngine),t.onUnlisten=V2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=j2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=L2.bind(null,e.syncEngine),t}function Y2(n,e,t={}){const r=new Ks;return n.asyncQueue.enqueueAndForget(async()=>function(a,c,h,p,m){const w=new G2({next:E=>{w.Za(),c.enqueueAndForget(()=>S2(a,x));const I=E.docs.has(h);!I&&E.fromCache?m.reject(new _e(se.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&E.fromCache&&p&&p.source==="server"?m.reject(new _e(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(E)},error:E=>m.reject(E)}),x=new P2(Pm(h.path),w,{includeMetadataChanges:!0,_a:!0});return T2(a,x)}(await Q2(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2(n,e,t){if(!t)throw new _e(se.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function J2(n,e,t,r){if(e===!0&&r===!0)throw new _e(se.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function aw(n){if(!Ee.isDocumentKey(n))throw new _e(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function $m(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Pe()}function tc(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new _e(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=$m(n);throw new _e(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new _e(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new _e(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}J2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new _e(se.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new _e(se.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new _e(se.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qm{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new uN;switch(r.type){case"firstParty":return new pN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new _e(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=ow.get(t);r&&(ge("ComponentProvider","Removing Datastore"),ow.delete(t),r.terminate())}(this),Promise.resolve()}}function Z2(n,e,t,r={}){var o;const a=(n=tc(n,qm))._getSettings(),c=`${e}:${t}`;if(a.host!=="firestore.googleapis.com"&&a.host!==c&&pa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:c,ssl:!1})),r.mockUserToken){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=Qt.MOCK_USER;else{h=Tb(r.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new _e(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Qt(m)}n._authCredentials=new hN(new G_(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Gm(this.firestore,e,this._query)}}class Mn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mn(this.firestore,e,this._key)}}class nc extends Gm{constructor(e,t,r){super(e,t,Pm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mn(this.firestore,null,new Ee(e))}withConverter(e){return new nc(this.firestore,e,this._path)}}function cw(n,e,...t){if(n=At(n),arguments.length===1&&(e=H_.newId()),X2("doc","path",e),n instanceof qm){const r=ht.fromString(e,...t);return aw(r),new Mn(n,null,new Ee(r))}{if(!(n instanceof Mn||n instanceof nc))throw new _e(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ht.fromString(e,...t));return aw(r),new Mn(n.firestore,n instanceof nc?n.converter:null,new Ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new PE(this,"async_queue_retry"),this.Vu=()=>{const r=Wf();r&&ge("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=Wf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Wf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Ks;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!fc(e))throw e;ge("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const o=function(c){let h=c.message||"";return c.stack&&(h=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),h}(r);throw ss("INTERNAL UNHANDLED ERROR: ",o),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const o=Um.createAndSchedule(this,e,t,r,a=>this.yu(a));return this.Tu.push(o),o}fu(){this.Eu&&Pe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class Hm extends qm{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new uw,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new uw(e),this._firestoreClient=void 0,await e}}}function eR(n,e){const t=typeof n=="object"?n:um(),r=typeof n=="string"?n:"(default)",o=to(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const a=_b("firestore");a&&Z2(o,...a)}return o}function GE(n){if(n._terminated)throw new _e(se.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||tR(n),n._firestoreClient}function tR(n){var e,t,r;const o=n._freezeSettings(),a=function(h,p,m,w){return new PN(h,p,m,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,qE(w.experimentalLongPollingOptions),w.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new H2(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(h){const p=h?._online.build();return{_offline:h?._offline.build(p),_online:p}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xa(zt.fromBase64String(e))}catch(t){throw new _e(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new xa(zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new _e(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ge(this._lat,e._lat)||Ge(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,o){if(r.length!==o.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==o[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR=/^__.*__$/;class rR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ro(e,this.data,this.fieldMask,t,this.fieldTransforms):new pc(e,this.data,t,this.fieldTransforms)}}function WE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe()}}class Ym{constructor(e,t,r,o,a,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Ym(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:r,xu:!1});return o.Ou(e),o}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:r,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return _h(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(WE(this.Cu)&&nR.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class sR{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Hh(e)}Qu(e,t,r,o=!1){return new Ym({Cu:e,methodName:t,qu:r,path:Ft.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function iR(n){const e=n._freezeSettings(),t=Hh(n._databaseId);return new sR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function oR(n,e,t,r,o,a={}){const c=n.Qu(a.merge||a.mergeFields?2:0,e,t,o);XE("Data must be an object, but it was:",c,r);const h=QE(r,c);let p,m;if(a.merge)p=new rr(c.fieldMask),m=c.fieldTransforms;else if(a.mergeFields){const w=[];for(const x of a.mergeFields){const E=aR(e,x,t);if(!c.contains(E))throw new _e(se.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);cR(w,E)||w.push(E)}p=new rr(w),m=c.fieldTransforms.filter(x=>p.covers(x.field))}else p=null,m=c.fieldTransforms;return new rR(new Ln(h),p,m)}function KE(n,e){if(YE(n=At(n)))return XE("Unsupported field value:",e,n),QE(n,e);if(n instanceof HE)return function(r,o){if(!WE(o.Cu))throw o.Bu(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(o);a&&o.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,o){const a=[];let c=0;for(const h of r){let p=KE(h,o.Lu(c));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),c++}return{arrayValue:{values:a}}}(n,e)}return function(r,o){if((r=At(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return YN(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Pt.fromDate(r);return{timestampValue:vh(o.serializer,a)}}if(r instanceof Pt){const a=new Pt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:vh(o.serializer,a)}}if(r instanceof Km)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xa)return{bytesValue:vE(o.serializer,r._byteString)};if(r instanceof Mn){const a=o.databaseId,c=r.firestore._databaseId;if(!c.isEqual(a))throw o.Bu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Cm(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Qm)return function(c,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw h.Bu("VectorValues must only contain numeric values.");return Am(h.serializer,p)})}}}}}}(r,o);throw o.Bu(`Unsupported field value: ${$m(r)}`)}(n,e)}function QE(n,e){const t={};return W_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pa(n,(r,o)=>{const a=KE(o,e.Mu(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function YE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Pt||n instanceof Km||n instanceof xa||n instanceof Mn||n instanceof HE||n instanceof Qm)}function XE(n,e,t){if(!YE(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const r=$m(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function aR(n,e,t){if((e=At(e))instanceof Wm)return e._internalPath;if(typeof e=="string")return JE(n,e);throw _h("Field path arguments must be of type string or ",n,!1,void 0,t)}const lR=new RegExp("[~\\*/\\[\\]]");function JE(n,e,t){if(e.search(lR)>=0)throw _h(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Wm(...e.split("."))._internalPath}catch{throw _h(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function _h(n,e,t,r,o){const a=r&&!r.isEmpty(),c=o!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(a||c)&&(p+=" (found",a&&(p+=` in field ${r}`),c&&(p+=` in document ${o}`),p+=")"),new _e(se.INVALID_ARGUMENT,h+n+p)}function cR(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e,t,r,o,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new uR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(eT("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class uR extends ZE{data(){return super.data()}}function eT(n,e){return typeof e=="string"?JE(n,e):e instanceof Wm?e._internalPath:e._delegate._internalPath}class hR{convertValue(e,t="none"){switch(Yi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Qi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Pa(e,(o,a)=>{r[o]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,o;const a=(o=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(c=>pt(c.doubleValue));return new Qm(a)}convertGeoPoint(e){return new Km(pt(e.latitude),pt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Tm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Yl(e));default:return null}}convertTimestamp(e){const t=Js(e);return new Pt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ht.fromString(e);Qe(SE(r));const o=new Xl(r.get(1),r.get(3)),a=new Ee(r.popFirst(5));return o.isEqual(t)||ss(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class tT extends ZE{constructor(e,t,r,o,a,c){super(e,t,r,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new pR(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(eT("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class pR extends tT{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(n){n=tc(n,Mn);const e=tc(n.firestore,Hm);return Y2(GE(e),n._key).then(t=>wR(e,n,t))}class gR extends hR{constructor(e){super(),this.firestore=e}convertBytes(e){return new xa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mn(this.firestore,null,t)}}function yR(n,e,t){n=tc(n,Mn);const r=tc(n.firestore,Hm),o=dR(n.converter,e);return vR(r,[oR(iR(r),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,Zr.none())])}function vR(n,e){return function(r,o){const a=new Ks;return r.asyncQueue.enqueueAndForget(async()=>O2(await K2(r),o,a)),a.promise}(GE(n),e)}function wR(n,e,t){const r=t.docs.get(e._key),o=new gR(n);return new tT(n,o,e._key,r,new fR(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){ba=o})(Ia),Pr(new ir("firestore",(r,{instanceIdentifier:o,options:a})=>{const c=r.getProvider("app").getImmediate(),h=new Hm(new dN(r.getProvider("auth-internal")),new gN(r.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new _e(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xl(m.options.projectId,w)}(c,o),c);return a=Object.assign({useFetchStreams:t},a),h._setSettings(a),h},"PUBLIC").setMultipleInstances(!0)),On(kv,"4.7.3",e),On(kv,"4.7.3","esm2017")})();var xR="firebase",_R="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */On(xR,_R,"app");const nT="@firebase/installations",Xm="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT=1e4,sT=`w:${Xm}`,iT="FIS_v2",ER="https://firebaseinstallations.googleapis.com/v1",TR=3600*1e3,SR="installations",IR="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Xi=new eo(SR,IR,bR);function oT(n){return n instanceof lr&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT({projectId:n}){return`${ER}/projects/${n}/installations`}function lT(n){return{token:n.token,requestStatus:2,expiresIn:AR(n.expiresIn),creationTime:Date.now()}}async function cT(n,e){const r=(await e.json()).error;return Xi.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function uT({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function PR(n,{refreshToken:e}){const t=uT(n);return t.append("Authorization",kR(e)),t}async function hT(n){const e=await n();return e.status>=500&&e.status<600?n():e}function AR(n){return Number(n.replace("s","000"))}function kR(n){return`${iT} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NR({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=aT(n),o=uT(n),a=e.getImmediate({optional:!0});if(a){const m=await a.getHeartbeatsHeader();m&&o.append("x-firebase-client",m)}const c={fid:t,authVersion:iT,appId:n.appId,sdkVersion:sT},h={method:"POST",headers:o,body:JSON.stringify(c)},p=await hT(()=>fetch(r,h));if(p.ok){const m=await p.json();return{fid:m.fid||t,registrationStatus:2,refreshToken:m.refreshToken,authToken:lT(m.authToken)}}else throw await cT("Create Installation",p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR=/^[cdef][\w-]{21}$/,Fp="";function jR(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=DR(n);return RR.test(t)?t:Fp}catch{return Fp}}function DR(n){return CR(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT=new Map;function pT(n,e){const t=Qh(n);mT(t,e),VR(t,e)}function mT(n,e){const t=fT.get(n);if(t)for(const r of t)r(e)}function VR(n,e){const t=LR();t&&t.postMessage({key:n,fid:e}),OR()}let Fi=null;function LR(){return!Fi&&"BroadcastChannel"in self&&(Fi=new BroadcastChannel("[Firebase] FID Change"),Fi.onmessage=n=>{mT(n.data.key,n.data.fid)}),Fi}function OR(){fT.size===0&&Fi&&(Fi.close(),Fi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR="firebase-installations-database",UR=1,Ji="firebase-installations-store";let Qf=null;function Jm(){return Qf||(Qf=Zx(MR,UR,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Ji)}}})),Qf}async function Eh(n,e){const t=Qh(n),o=(await Jm()).transaction(Ji,"readwrite"),a=o.objectStore(Ji),c=await a.get(t);return await a.put(e,t),await o.done,(!c||c.fid!==e.fid)&&pT(n,e.fid),e}async function gT(n){const e=Qh(n),r=(await Jm()).transaction(Ji,"readwrite");await r.objectStore(Ji).delete(e),await r.done}async function Yh(n,e){const t=Qh(n),o=(await Jm()).transaction(Ji,"readwrite"),a=o.objectStore(Ji),c=await a.get(t),h=e(c);return h===void 0?await a.delete(t):await a.put(h,t),await o.done,h&&(!c||c.fid!==h.fid)&&pT(n,h.fid),h}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zm(n){let e;const t=await Yh(n.appConfig,r=>{const o=FR(r),a=BR(n,o);return e=a.registrationPromise,a.installationEntry});return t.fid===Fp?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function FR(n){const e=n||{fid:jR(),registrationStatus:0};return yT(e)}function BR(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(Xi.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=zR(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:$R(n)}:{installationEntry:e}}async function zR(n,e){try{const t=await NR(n,e);return Eh(n.appConfig,t)}catch(t){throw oT(t)&&t.customData.serverCode===409?await gT(n.appConfig):await Eh(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function $R(n){let e=await hw(n.appConfig);for(;e.registrationStatus===1;)await dT(100),e=await hw(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await Zm(n);return r||t}return e}function hw(n){return Yh(n,e=>{if(!e)throw Xi.create("installation-not-found");return yT(e)})}function yT(n){return qR(n)?{fid:n.fid,registrationStatus:0}:n}function qR(n){return n.registrationStatus===1&&n.registrationTime+rT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GR({appConfig:n,heartbeatServiceProvider:e},t){const r=HR(n,t),o=PR(n,t),a=e.getImmediate({optional:!0});if(a){const m=await a.getHeartbeatsHeader();m&&o.append("x-firebase-client",m)}const c={installation:{sdkVersion:sT,appId:n.appId}},h={method:"POST",headers:o,body:JSON.stringify(c)},p=await hT(()=>fetch(r,h));if(p.ok){const m=await p.json();return lT(m)}else throw await cT("Generate Auth Token",p)}function HR(n,{fid:e}){return`${aT(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eg(n,e=!1){let t;const r=await Yh(n.appConfig,a=>{if(!vT(a))throw Xi.create("not-registered");const c=a.authToken;if(!e&&QR(c))return a;if(c.requestStatus===1)return t=WR(n,e),a;{if(!navigator.onLine)throw Xi.create("app-offline");const h=XR(a);return t=KR(n,h),h}});return t?await t:r.authToken}async function WR(n,e){let t=await dw(n.appConfig);for(;t.authToken.requestStatus===1;)await dT(100),t=await dw(n.appConfig);const r=t.authToken;return r.requestStatus===0?eg(n,e):r}function dw(n){return Yh(n,e=>{if(!vT(e))throw Xi.create("not-registered");const t=e.authToken;return JR(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function KR(n,e){try{const t=await GR(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await Eh(n.appConfig,r),t}catch(t){if(oT(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await gT(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Eh(n.appConfig,r)}throw t}}function vT(n){return n!==void 0&&n.registrationStatus===2}function QR(n){return n.requestStatus===2&&!YR(n)}function YR(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+TR}function XR(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function JR(n){return n.requestStatus===1&&n.requestTime+rT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZR(n){const e=n,{installationEntry:t,registrationPromise:r}=await Zm(e);return r?r.catch(console.error):eg(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ej(n,e=!1){const t=n;return await tj(t),(await eg(t,e)).token}async function tj(n){const{registrationPromise:e}=await Zm(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nj(n){if(!n||!n.options)throw Yf("App Configuration");if(!n.name)throw Yf("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Yf(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Yf(n){return Xi.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT="installations",rj="installations-internal",sj=n=>{const e=n.getProvider("app").getImmediate(),t=nj(e),r=to(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},ij=n=>{const e=n.getProvider("app").getImmediate(),t=to(e,wT).getImmediate();return{getId:()=>ZR(t),getToken:o=>ej(t,o)}};function oj(){Pr(new ir(wT,sj,"PUBLIC")),Pr(new ir(rj,ij,"PRIVATE"))}oj();On(nT,Xm);On(nT,Xm,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th="analytics",aj="firebase_id",lj="origin",cj=60*1e3,uj="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",tg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn=new Vh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hj={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},En=new eo("analytics","Analytics",hj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dj(n){if(!n.startsWith(tg)){const e=En.create("invalid-gtag-resource",{gtagURL:n});return dn.warn(e.message),""}return n}function xT(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function fj(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function pj(n,e){const t=fj("firebase-js-sdk-policy",{createScriptURL:dj}),r=document.createElement("script"),o=`${tg}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(o):o,r.async=!0,document.head.appendChild(r)}function mj(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function gj(n,e,t,r,o,a){const c=r[o];try{if(c)await e[c];else{const p=(await xT(t)).find(m=>m.measurementId===o);p&&await e[p.appId]}}catch(h){dn.error(h)}n("config",o,a)}async function yj(n,e,t,r,o){try{let a=[];if(o&&o.send_to){let c=o.send_to;Array.isArray(c)||(c=[c]);const h=await xT(t);for(const p of c){const m=h.find(x=>x.measurementId===p),w=m&&e[m.appId];if(w)a.push(w);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),n("event",r,o||{})}catch(a){dn.error(a)}}function vj(n,e,t,r){async function o(a,...c){try{if(a==="event"){const[h,p]=c;await yj(n,e,t,h,p)}else if(a==="config"){const[h,p]=c;await gj(n,e,t,r,h,p)}else if(a==="consent"){const[h,p]=c;n("consent",h,p)}else if(a==="get"){const[h,p,m]=c;n("get",h,p,m)}else if(a==="set"){const[h]=c;n("set",h)}else n(a,...c)}catch(h){dn.error(h)}}return o}function wj(n,e,t,r,o){let a=function(...c){window[r].push(arguments)};return window[o]&&typeof window[o]=="function"&&(a=window[o]),window[o]=vj(a,n,e,t),{gtagCore:a,wrappedGtag:window[o]}}function xj(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(tg)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j=30,Ej=1e3;class Tj{constructor(e={},t=Ej){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const _T=new Tj;function Sj(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function Ij(n){var e;const{appId:t,apiKey:r}=n,o={method:"GET",headers:Sj(r)},a=uj.replace("{app-id}",t),c=await fetch(a,o);if(c.status!==200&&c.status!==304){let h="";try{const p=await c.json();!((e=p.error)===null||e===void 0)&&e.message&&(h=p.error.message)}catch{}throw En.create("config-fetch-failed",{httpStatus:c.status,responseMessage:h})}return c.json()}async function bj(n,e=_T,t){const{appId:r,apiKey:o,measurementId:a}=n.options;if(!r)throw En.create("no-app-id");if(!o){if(a)return{measurementId:a,appId:r};throw En.create("no-api-key")}const c=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},h=new kj;return setTimeout(async()=>{h.abort()},cj),ET({appId:r,apiKey:o,measurementId:a},c,h,e)}async function ET(n,{throttleEndTimeMillis:e,backoffCount:t},r,o=_T){var a;const{appId:c,measurementId:h}=n;try{await Pj(r,e)}catch(p){if(h)return dn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:c,measurementId:h};throw p}try{const p=await Ij(n);return o.deleteThrottleMetadata(c),p}catch(p){const m=p;if(!Aj(m)){if(o.deleteThrottleMetadata(c),h)return dn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:c,measurementId:h};throw p}const w=Number((a=m?.customData)===null||a===void 0?void 0:a.httpStatus)===503?Z0(t,o.intervalMillis,_j):Z0(t,o.intervalMillis),x={throttleEndTimeMillis:Date.now()+w,backoffCount:t+1};return o.setThrottleMetadata(c,x),dn.debug(`Calling attemptFetch again in ${w} millis`),ET(n,x,r,o)}}function Pj(n,e){return new Promise((t,r)=>{const o=Math.max(e-Date.now(),0),a=setTimeout(t,o);n.addEventListener(()=>{clearTimeout(a),r(En.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Aj(n){if(!(n instanceof lr)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class kj{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Nj(n,e,t,r,o){if(o&&o.global){n("event",t,r);return}else{const a=await e,c=Object.assign(Object.assign({},r),{send_to:a});n("event",t,c)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cj(){if(Qx())try{await Yx()}catch(n){return dn.warn(En.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return dn.warn(En.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Rj(n,e,t,r,o,a,c){var h;const p=bj(n);p.then(I=>{t[I.measurementId]=I.appId,n.options.measurementId&&I.measurementId!==n.options.measurementId&&dn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${I.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(I=>dn.error(I)),e.push(p);const m=Cj().then(I=>{if(I)return r.getId()}),[w,x]=await Promise.all([p,m]);xj(a)||pj(a,w.measurementId),o("js",new Date);const E=(h=c?.config)!==null&&h!==void 0?h:{};return E[lj]="firebase",E.update=!0,x!=null&&(E[aj]=x),o("config",w.measurementId,E),w.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e){this.app=e}_delete(){return delete Ul[this.app.options.appId],Promise.resolve()}}let Ul={},fw=[];const pw={};let Xf="dataLayer",Dj="gtag",mw,TT,gw=!1;function Vj(){const n=[];if(Kx()&&n.push("This is a browser extension environment."),Nb()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,o)=>`(${o+1}) ${r}`).join(" "),t=En.create("invalid-analytics-context",{errorInfo:e});dn.warn(t.message)}}function Lj(n,e,t){Vj();const r=n.options.appId;if(!r)throw En.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)dn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw En.create("no-api-key");if(Ul[r]!=null)throw En.create("already-exists",{id:r});if(!gw){mj(Xf);const{wrappedGtag:a,gtagCore:c}=wj(Ul,fw,pw,Xf,Dj);TT=a,mw=c,gw=!0}return Ul[r]=Rj(n,fw,pw,e,mw,Xf,t),new jj(n)}function Oj(n=um()){n=At(n);const e=to(n,Th);return e.isInitialized()?e.getImmediate():Mj(n)}function Mj(n,e={}){const t=to(n,Th);if(t.isInitialized()){const o=t.getImmediate();if(Hl(e,t.getOptions()))return o;throw En.create("already-initialized")}return t.initialize({options:e})}function Uj(n,e,t,r){n=At(n),Nj(TT,Ul[n.app.options.appId],e,t,r).catch(o=>dn.error(o))}const yw="@firebase/analytics",vw="0.10.8";function Fj(){Pr(new ir(Th,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return Lj(r,o,t)},"PUBLIC")),Pr(new ir("analytics-internal",n,"PRIVATE")),On(yw,vw),On(yw,vw,"esm2017");function n(e){try{const t=e.getProvider(Th).getImmediate();return{logEvent:(r,o,a)=>Uj(t,r,o,a)}}catch(t){throw En.create("interop-component-reg-failed",{reason:t})}}}Fj();const Bj={apiKey:"AIzaSyDSplfIeCdHaXnAgH1WnmaY78uINeUHHeA",authDomain:"glyphmart.firebaseapp.com",projectId:"glyphmart",storageBucket:"glyphmart.firebasestorage.app",messagingSenderId:"582834377960",appId:"1:582834377960:web:2f844d65c9c0f92f93255d",measurementId:"G-1RC8D5PY66"},ng=e_(Bj),ra=lN(ng),ww=eR(ng);Oj(ng);const ST=R.createContext(),Cr=()=>{const n=R.useContext(ST);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},zj=({children:n})=>{const[e,t]=R.useState(null),[r,o]=R.useState(!0),[a,c]=R.useState(null),h=async(E,I,D,j)=>{const F=(await $A(ra,E,I)).user;return await Sp(F,{displayName:j}),await yR(cw(ww,"users",F.uid),{uid:F.uid,email:E,username:D,displayName:j,createdAt:new Date,glyphsCount:0,bio:"",website:"",location:""}),F},p=(E,I)=>qA(ra,E,I),m=()=>XA(ra),w=async E=>{try{const I=await mR(cw(ww,"users",E));I.exists()&&c(I.data())}catch(I){console.error("Error fetching user profile:",I)}};R.useEffect(()=>YA(ra,I=>{t(I),I?w(I.uid):c(null),o(!1)}),[]);const x={currentUser:e,userProfile:a,signup:h,signin:p,logout:m,fetchUserProfile:w};return f.jsx(ST.Provider,{value:x,children:!r&&n})};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $j={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qj=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ce=(n,e)=>{const t=R.forwardRef(({color:r="currentColor",size:o=24,strokeWidth:a=2,absoluteStrokeWidth:c,className:h="",children:p,...m},w)=>R.createElement("svg",{ref:w,...$j,width:o,height:o,stroke:r,strokeWidth:c?Number(a)*24/Number(o):a,className:["lucide",`lucide-${qj(n)}`,h].join(" "),...m},[...e.map(([x,E])=>R.createElement(x,E)),...Array.isArray(p)?p:[p]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bp=Ce("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=Ce("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj=Ce("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=Ce("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xw=Ce("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rg=Ce("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=Ce("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=Ce("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=Ce("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=Ce("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=Ce("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=Ce("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=Ce("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=Ce("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jf=Ce("FileImage",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["circle",{cx:"10",cy:"13",r:"2",key:"6v46hv"}],["path",{d:"m20 17-1.09-1.09a2 2 0 0 0-2.82 0L10 22",key:"17vly1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IT=Ce("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=Ce("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bT=Ce("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=Ce("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=Ce("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=Ce("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eD=Ce("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=Ce("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=Ce("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sg=Ce("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tD=Ce("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nD=Ce("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rD=Ce("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=Ce("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ew=Ce("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=Ce("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $p=Ce("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=Ce("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=Ce("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tw=Ce("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=Ce("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PT=Ce("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qp=Ce("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lD=Ce("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=Ce("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=Ce("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AT=Ce("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=Ce("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),kT=R.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),Xh=R.createContext({}),Jh=R.createContext(null),Zh=typeof document<"u",ig=Zh?R.useLayoutEffect:R.useEffect,NT=R.createContext({strict:!1}),og=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),cD="framerAppearId",CT="data-"+og(cD);function uD(n,e,t,r){const{visualElement:o}=R.useContext(Xh),a=R.useContext(NT),c=R.useContext(Jh),h=R.useContext(kT).reducedMotion,p=R.useRef();r=r||a.renderer,!p.current&&r&&(p.current=r(n,{visualState:e,parent:o,props:t,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:h}));const m=p.current;R.useInsertionEffect(()=>{m&&m.update(t,c)});const w=R.useRef(!!(t[CT]&&!window.HandoffComplete));return ig(()=>{m&&(m.render(),w.current&&m.animationState&&m.animationState.animateChanges())}),R.useEffect(()=>{m&&(m.updateFeatures(),!w.current&&m.animationState&&m.animationState.animateChanges(),w.current&&(w.current=!1,window.HandoffComplete=!0))}),m}function ia(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function hD(n,e,t){return R.useCallback(r=>{r&&n.mount&&n.mount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):ia(t)&&(t.current=r))},[e])}function rc(n){return typeof n=="string"||Array.isArray(n)}function ed(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const ag=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],lg=["initial",...ag];function td(n){return ed(n.animate)||lg.some(e=>rc(n[e]))}function RT(n){return!!(td(n)||n.variants)}function dD(n,e){if(td(n)){const{initial:t,animate:r}=n;return{initial:t===!1||rc(t)?t:void 0,animate:rc(r)?r:void 0}}return n.inherit!==!1?e:{}}function fD(n){const{initial:e,animate:t}=dD(n,R.useContext(Xh));return R.useMemo(()=>({initial:e,animate:t}),[Iw(e),Iw(t)])}function Iw(n){return Array.isArray(n)?n.join(" "):n}const bw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},sc={};for(const n in bw)sc[n]={isEnabled:e=>bw[n].some(t=>!!e[t])};function pD(n){for(const e in n)sc[e]={...sc[e],...n[e]}}const cg=R.createContext({}),jT=R.createContext({}),mD=Symbol.for("motionComponentSymbol");function gD({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:o}){n&&pD(n);function a(h,p){let m;const w={...R.useContext(kT),...h,layoutId:yD(h)},{isStatic:x}=w,E=fD(h),I=r(h,x);if(!x&&Zh){E.visualElement=uD(o,I,w,e);const D=R.useContext(jT),j=R.useContext(NT).strict;E.visualElement&&(m=E.visualElement.loadFeatures(w,j,n,D))}return R.createElement(Xh.Provider,{value:E},m&&E.visualElement?R.createElement(m,{visualElement:E.visualElement,...w}):null,t(o,h,hD(I,E.visualElement,p),I,x,E.visualElement))}const c=R.forwardRef(a);return c[mD]=o,c}function yD({layoutId:n}){const e=R.useContext(cg).id;return e&&n!==void 0?e+"-"+n:n}function vD(n){function e(r,o={}){return gD(n(r,o))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(r,o)=>(t.has(o)||t.set(o,e(o)),t.get(o))})}const wD=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ug(n){return typeof n!="string"||n.includes("-")?!1:!!(wD.indexOf(n)>-1||/[A-Z]/.test(n))}const Sh={};function xD(n){Object.assign(Sh,n)}const vc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],io=new Set(vc);function DT(n,{layout:e,layoutId:t}){return io.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Sh[n]||n==="opacity")}const pn=n=>!!(n&&n.getVelocity),_D={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ED=vc.length;function TD(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},r,o){let a="";for(let c=0;c<ED;c++){const h=vc[c];if(n[h]!==void 0){const p=_D[h]||h;a+=`${p}(${n[h]}) `}}return e&&!n.z&&(a+="translateZ(0)"),a=a.trim(),o?a=o(n,r?"":a):t&&r&&(a="none"),a}const VT=n=>e=>typeof e=="string"&&e.startsWith(n),LT=VT("--"),Gp=VT("var(--"),SD=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,ID=(n,e)=>e&&typeof n=="number"?e.transform(n):n,ei=(n,e,t)=>Math.min(Math.max(t,n),e),oo={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Fl={...oo,transform:n=>ei(0,1,n)},$u={...oo,default:1},Bl=n=>Math.round(n*1e5)/1e5,nd=/(-)?([\d]*\.?[\d])+/g,OT=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,bD=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function wc(n){return typeof n=="string"}const xc=n=>({test:e=>wc(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Vs=xc("deg"),br=xc("%"),Te=xc("px"),PD=xc("vh"),AD=xc("vw"),Pw={...br,parse:n=>br.parse(n)/100,transform:n=>br.transform(n*100)},Aw={...oo,transform:Math.round},MT={borderWidth:Te,borderTopWidth:Te,borderRightWidth:Te,borderBottomWidth:Te,borderLeftWidth:Te,borderRadius:Te,radius:Te,borderTopLeftRadius:Te,borderTopRightRadius:Te,borderBottomRightRadius:Te,borderBottomLeftRadius:Te,width:Te,maxWidth:Te,height:Te,maxHeight:Te,size:Te,top:Te,right:Te,bottom:Te,left:Te,padding:Te,paddingTop:Te,paddingRight:Te,paddingBottom:Te,paddingLeft:Te,margin:Te,marginTop:Te,marginRight:Te,marginBottom:Te,marginLeft:Te,rotate:Vs,rotateX:Vs,rotateY:Vs,rotateZ:Vs,scale:$u,scaleX:$u,scaleY:$u,scaleZ:$u,skew:Vs,skewX:Vs,skewY:Vs,distance:Te,translateX:Te,translateY:Te,translateZ:Te,x:Te,y:Te,z:Te,perspective:Te,transformPerspective:Te,opacity:Fl,originX:Pw,originY:Pw,originZ:Te,zIndex:Aw,fillOpacity:Fl,strokeOpacity:Fl,numOctaves:Aw};function hg(n,e,t,r){const{style:o,vars:a,transform:c,transformOrigin:h}=n;let p=!1,m=!1,w=!0;for(const x in e){const E=e[x];if(LT(x)){a[x]=E;continue}const I=MT[x],D=ID(E,I);if(io.has(x)){if(p=!0,c[x]=D,!w)continue;E!==(I.default||0)&&(w=!1)}else x.startsWith("origin")?(m=!0,h[x]=D):o[x]=D}if(e.transform||(p||r?o.transform=TD(n.transform,t,w,r):o.transform&&(o.transform="none")),m){const{originX:x="50%",originY:E="50%",originZ:I=0}=h;o.transformOrigin=`${x} ${E} ${I}`}}const dg=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function UT(n,e,t){for(const r in e)!pn(e[r])&&!DT(r,t)&&(n[r]=e[r])}function kD({transformTemplate:n},e,t){return R.useMemo(()=>{const r=dg();return hg(r,e,{enableHardwareAcceleration:!t},n),Object.assign({},r.vars,r.style)},[e])}function ND(n,e,t){const r=n.style||{},o={};return UT(o,r,n),Object.assign(o,kD(n,e,t)),n.transformValues?n.transformValues(o):o}function CD(n,e,t){const r={},o=ND(n,e,t);return n.drag&&n.dragListener!==!1&&(r.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(r.tabIndex=0),r.style=o,r}const RD=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ih(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||RD.has(n)}let FT=n=>!Ih(n);function jD(n){n&&(FT=e=>e.startsWith("on")?!Ih(e):n(e))}try{jD(require("@emotion/is-prop-valid").default)}catch{}function DD(n,e,t){const r={};for(const o in n)o==="values"&&typeof n.values=="object"||(FT(o)||t===!0&&Ih(o)||!e&&!Ih(o)||n.draggable&&o.startsWith("onDrag"))&&(r[o]=n[o]);return r}function kw(n,e,t){return typeof n=="string"?n:Te.transform(e+t*n)}function VD(n,e,t){const r=kw(e,n.x,n.width),o=kw(t,n.y,n.height);return`${r} ${o}`}const LD={offset:"stroke-dashoffset",array:"stroke-dasharray"},OD={offset:"strokeDashoffset",array:"strokeDasharray"};function MD(n,e,t=1,r=0,o=!0){n.pathLength=1;const a=o?LD:OD;n[a.offset]=Te.transform(-r);const c=Te.transform(e),h=Te.transform(t);n[a.array]=`${c} ${h}`}function fg(n,{attrX:e,attrY:t,attrScale:r,originX:o,originY:a,pathLength:c,pathSpacing:h=1,pathOffset:p=0,...m},w,x,E){if(hg(n,m,w,E),x){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:I,style:D,dimensions:j}=n;I.transform&&(j&&(D.transform=I.transform),delete I.transform),j&&(o!==void 0||a!==void 0||D.transform)&&(D.transformOrigin=VD(j,o!==void 0?o:.5,a!==void 0?a:.5)),e!==void 0&&(I.x=e),t!==void 0&&(I.y=t),r!==void 0&&(I.scale=r),c!==void 0&&MD(I,c,h,p,!1)}const BT=()=>({...dg(),attrs:{}}),pg=n=>typeof n=="string"&&n.toLowerCase()==="svg";function UD(n,e,t,r){const o=R.useMemo(()=>{const a=BT();return fg(a,e,{enableHardwareAcceleration:!1},pg(r),n.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(n.style){const a={};UT(a,n.style,n),o.style={...a,...o.style}}return o}function FD(n=!1){return(t,r,o,{latestValues:a},c)=>{const p=(ug(t)?UD:CD)(r,a,c,t),w={...DD(r,typeof t=="string",n),...p,ref:o},{children:x}=r,E=R.useMemo(()=>pn(x)?x.get():x,[x]);return R.createElement(t,{...w,children:E})}}function zT(n,{style:e,vars:t},r,o){Object.assign(n.style,e,o&&o.getProjectionStyles(r));for(const a in t)n.style.setProperty(a,t[a])}const $T=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function qT(n,e,t,r){zT(n,e,void 0,r);for(const o in e.attrs)n.setAttribute($T.has(o)?o:og(o),e.attrs[o])}function mg(n,e){const{style:t}=n,r={};for(const o in t)(pn(t[o])||e.style&&pn(e.style[o])||DT(o,n))&&(r[o]=t[o]);return r}function GT(n,e){const t=mg(n,e);for(const r in n)if(pn(n[r])||pn(e[r])){const o=vc.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;t[o]=n[r]}return t}function gg(n,e,t,r={},o={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,o)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,o)),e}function HT(n){const e=R.useRef(null);return e.current===null&&(e.current=n()),e.current}const bh=n=>Array.isArray(n),BD=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),zD=n=>bh(n)?n[n.length-1]||0:n;function rh(n){const e=pn(n)?n.get():n;return BD(e)?e.toValue():e}function $D({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},r,o,a){const c={latestValues:qD(r,o,a,n),renderState:e()};return t&&(c.mount=h=>t(r,h,c)),c}const WT=n=>(e,t)=>{const r=R.useContext(Xh),o=R.useContext(Jh),a=()=>$D(n,e,r,o);return t?a():HT(a)};function qD(n,e,t,r){const o={},a=r(n,{});for(const E in a)o[E]=rh(a[E]);let{initial:c,animate:h}=n;const p=td(n),m=RT(n);e&&m&&!p&&n.inherit!==!1&&(c===void 0&&(c=e.initial),h===void 0&&(h=e.animate));let w=t?t.initial===!1:!1;w=w||c===!1;const x=w?h:c;return x&&typeof x!="boolean"&&!ed(x)&&(Array.isArray(x)?x:[x]).forEach(I=>{const D=gg(n,I);if(!D)return;const{transitionEnd:j,transition:A,...F}=D;for(const H in F){let O=F[H];if(Array.isArray(O)){const Q=w?O.length-1:0;O=O[Q]}O!==null&&(o[H]=O)}for(const H in j)o[H]=j[H]}),o}const mt=n=>n;class Nw{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function GD(n){let e=new Nw,t=new Nw,r=0,o=!1,a=!1;const c=new WeakSet,h={schedule:(p,m=!1,w=!1)=>{const x=w&&o,E=x?e:t;return m&&c.add(p),E.add(p)&&x&&o&&(r=e.order.length),p},cancel:p=>{t.remove(p),c.delete(p)},process:p=>{if(o){a=!0;return}if(o=!0,[e,t]=[t,e],t.clear(),r=e.order.length,r)for(let m=0;m<r;m++){const w=e.order[m];w(p),c.has(w)&&(h.schedule(w),n())}o=!1,a&&(a=!1,h.process(p))}};return h}const qu=["prepare","read","update","preRender","render","postRender"],HD=40;function WD(n,e){let t=!1,r=!0;const o={delta:0,timestamp:0,isProcessing:!1},a=qu.reduce((x,E)=>(x[E]=GD(()=>t=!0),x),{}),c=x=>a[x].process(o),h=()=>{const x=performance.now();t=!1,o.delta=r?1e3/60:Math.max(Math.min(x-o.timestamp,HD),1),o.timestamp=x,o.isProcessing=!0,qu.forEach(c),o.isProcessing=!1,t&&e&&(r=!1,n(h))},p=()=>{t=!0,r=!0,o.isProcessing||n(h)};return{schedule:qu.reduce((x,E)=>{const I=a[E];return x[E]=(D,j=!1,A=!1)=>(t||p(),I.schedule(D,j,A)),x},{}),cancel:x=>qu.forEach(E=>a[E].cancel(x)),state:o,steps:a}}const{schedule:et,cancel:as,state:Kt,steps:Zf}=WD(typeof requestAnimationFrame<"u"?requestAnimationFrame:mt,!0),KD={useVisualState:WT({scrapeMotionValuesFromProps:GT,createRenderState:BT,onMount:(n,e,{renderState:t,latestValues:r})=>{et.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),et.render(()=>{fg(t,r,{enableHardwareAcceleration:!1},pg(e.tagName),n.transformTemplate),qT(e,t)})}})},QD={useVisualState:WT({scrapeMotionValuesFromProps:mg,createRenderState:dg})};function YD(n,{forwardMotionProps:e=!1},t,r){return{...ug(n)?KD:QD,preloadedFeatures:t,useRender:FD(e),createVisualElement:r,Component:n}}function Jr(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const KT=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function rd(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const XD=n=>e=>KT(e)&&n(e,rd(e));function es(n,e,t,r){return Jr(n,e,XD(t),r)}const JD=(n,e)=>t=>e(n(t)),Qs=(...n)=>n.reduce(JD);function QT(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const Cw=QT("dragHorizontal"),Rw=QT("dragVertical");function YT(n){let e=!1;if(n==="y")e=Rw();else if(n==="x")e=Cw();else{const t=Cw(),r=Rw();t&&r?e=()=>{t(),r()}:(t&&t(),r&&r())}return e}function XT(){const n=YT(!0);return n?(n(),!1):!0}class si{constructor(e){this.isMounted=!1,this.node=e}update(){}}function jw(n,e){const t="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),o=(a,c)=>{if(a.pointerType==="touch"||XT())return;const h=n.getProps();n.animationState&&h.whileHover&&n.animationState.setActive("whileHover",e),h[r]&&et.update(()=>h[r](a,c))};return es(n.current,t,o,{passive:!n.getProps()[r]})}class ZD extends si{mount(){this.unmount=Qs(jw(this.node,!0),jw(this.node,!1))}unmount(){}}class eV extends si{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Qs(Jr(this.node.current,"focus",()=>this.onFocus()),Jr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const JT=(n,e)=>e?n===e?!0:JT(n,e.parentElement):!1;function ep(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,rd(t))}class tV extends si{constructor(){super(...arguments),this.removeStartListeners=mt,this.removeEndListeners=mt,this.removeAccessibleListeners=mt,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),a=es(window,"pointerup",(h,p)=>{if(!this.checkPressEnd())return;const{onTap:m,onTapCancel:w,globalTapTarget:x}=this.node.getProps();et.update(()=>{!x&&!JT(this.node.current,h.target)?w&&w(h,p):m&&m(h,p)})},{passive:!(r.onTap||r.onPointerUp)}),c=es(window,"pointercancel",(h,p)=>this.cancelPress(h,p),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Qs(a,c),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=a=>{if(a.key!=="Enter"||this.isPressing)return;const c=h=>{h.key!=="Enter"||!this.checkPressEnd()||ep("up",(p,m)=>{const{onTap:w}=this.node.getProps();w&&et.update(()=>w(p,m))})};this.removeEndListeners(),this.removeEndListeners=Jr(this.node.current,"keyup",c),ep("down",(h,p)=>{this.startPress(h,p)})},t=Jr(this.node.current,"keydown",e),r=()=>{this.isPressing&&ep("cancel",(a,c)=>this.cancelPress(a,c))},o=Jr(this.node.current,"blur",r);this.removeAccessibleListeners=Qs(t,o)}}startPress(e,t){this.isPressing=!0;const{onTapStart:r,whileTap:o}=this.node.getProps();o&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&et.update(()=>r(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!XT()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&et.update(()=>r(e,t))}mount(){const e=this.node.getProps(),t=es(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Jr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Qs(t,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Hp=new WeakMap,tp=new WeakMap,nV=n=>{const e=Hp.get(n.target);e&&e(n)},rV=n=>{n.forEach(nV)};function sV({root:n,...e}){const t=n||document;tp.has(t)||tp.set(t,{});const r=tp.get(t),o=JSON.stringify(e);return r[o]||(r[o]=new IntersectionObserver(rV,{root:n,...e})),r[o]}function iV(n,e,t){const r=sV(e);return Hp.set(n,t),r.observe(n),()=>{Hp.delete(n),r.unobserve(n)}}const oV={some:0,all:1};class aV extends si{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:o="some",once:a}=e,c={root:t?t.current:void 0,rootMargin:r,threshold:typeof o=="number"?o:oV[o]},h=p=>{const{isIntersecting:m}=p;if(this.isInView===m||(this.isInView=m,a&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:w,onViewportLeave:x}=this.node.getProps(),E=m?w:x;E&&E(p)};return iV(this.node.current,c,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(lV(e,t))&&this.startObserver()}unmount(){}}function lV({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const cV={inView:{Feature:aV},tap:{Feature:tV},focus:{Feature:eV},hover:{Feature:ZD}};function ZT(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function uV(n){const e={};return n.values.forEach((t,r)=>e[r]=t.get()),e}function hV(n){const e={};return n.values.forEach((t,r)=>e[r]=t.getVelocity()),e}function sd(n,e,t){const r=n.getProps();return gg(r,e,t!==void 0?t:r.custom,uV(n),hV(n))}let yg=mt;const qi=n=>n*1e3,ts=n=>n/1e3,dV={current:!1},e1=n=>Array.isArray(n)&&typeof n[0]=="number";function t1(n){return!!(!n||typeof n=="string"&&n1[n]||e1(n)||Array.isArray(n)&&n.every(t1))}const jl=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,n1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:jl([0,.65,.55,1]),circOut:jl([.55,0,1,.45]),backIn:jl([.31,.01,.66,-.59]),backOut:jl([.33,1.53,.69,.99])};function r1(n){if(n)return e1(n)?jl(n):Array.isArray(n)?n.map(r1):n1[n]}function fV(n,e,t,{delay:r=0,duration:o,repeat:a=0,repeatType:c="loop",ease:h,times:p}={}){const m={[e]:t};p&&(m.offset=p);const w=r1(h);return Array.isArray(w)&&(m.easing=w),n.animate(m,{delay:r,duration:o,easing:Array.isArray(w)?"linear":w,fill:"both",iterations:a+1,direction:c==="reverse"?"alternate":"normal"})}function pV(n,{repeat:e,repeatType:t="loop"}){const r=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[r]}const s1=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,mV=1e-7,gV=12;function yV(n,e,t,r,o){let a,c,h=0;do c=e+(t-e)/2,a=s1(c,r,o)-n,a>0?t=c:e=c;while(Math.abs(a)>mV&&++h<gV);return c}function _c(n,e,t,r){if(n===e&&t===r)return mt;const o=a=>yV(a,0,1,n,t);return a=>a===0||a===1?a:s1(o(a),e,r)}const vV=_c(.42,0,1,1),wV=_c(0,0,.58,1),i1=_c(.42,0,.58,1),xV=n=>Array.isArray(n)&&typeof n[0]!="number",o1=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,a1=n=>e=>1-n(1-e),vg=n=>1-Math.sin(Math.acos(n)),l1=a1(vg),_V=o1(vg),c1=_c(.33,1.53,.69,.99),wg=a1(c1),EV=o1(wg),TV=n=>(n*=2)<1?.5*wg(n):.5*(2-Math.pow(2,-10*(n-1))),SV={linear:mt,easeIn:vV,easeInOut:i1,easeOut:wV,circIn:vg,circInOut:_V,circOut:l1,backIn:wg,backInOut:EV,backOut:c1,anticipate:TV},Dw=n=>{if(Array.isArray(n)){yg(n.length===4);const[e,t,r,o]=n;return _c(e,t,r,o)}else if(typeof n=="string")return SV[n];return n},xg=(n,e)=>t=>!!(wc(t)&&bD.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),u1=(n,e,t)=>r=>{if(!wc(r))return r;const[o,a,c,h]=r.match(nd);return{[n]:parseFloat(o),[e]:parseFloat(a),[t]:parseFloat(c),alpha:h!==void 0?parseFloat(h):1}},IV=n=>ei(0,255,n),np={...oo,transform:n=>Math.round(IV(n))},Bi={test:xg("rgb","red"),parse:u1("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+np.transform(n)+", "+np.transform(e)+", "+np.transform(t)+", "+Bl(Fl.transform(r))+")"};function bV(n){let e="",t="",r="",o="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),o=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),o=n.substring(4,5),e+=e,t+=t,r+=r,o+=o),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:o?parseInt(o,16)/255:1}}const Wp={test:xg("#"),parse:bV,transform:Bi.transform},oa={test:xg("hsl","hue"),parse:u1("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+br.transform(Bl(e))+", "+br.transform(Bl(t))+", "+Bl(Fl.transform(r))+")"},nn={test:n=>Bi.test(n)||Wp.test(n)||oa.test(n),parse:n=>Bi.test(n)?Bi.parse(n):oa.test(n)?oa.parse(n):Wp.parse(n),transform:n=>wc(n)?n:n.hasOwnProperty("red")?Bi.transform(n):oa.transform(n)},lt=(n,e,t)=>-t*n+t*e+n;function rp(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function PV({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let o=0,a=0,c=0;if(!e)o=a=c=t;else{const h=t<.5?t*(1+e):t+e-t*e,p=2*t-h;o=rp(p,h,n+1/3),a=rp(p,h,n),c=rp(p,h,n-1/3)}return{red:Math.round(o*255),green:Math.round(a*255),blue:Math.round(c*255),alpha:r}}const sp=(n,e,t)=>{const r=n*n;return Math.sqrt(Math.max(0,t*(e*e-r)+r))},AV=[Wp,Bi,oa],kV=n=>AV.find(e=>e.test(n));function Vw(n){const e=kV(n);let t=e.parse(n);return e===oa&&(t=PV(t)),t}const h1=(n,e)=>{const t=Vw(n),r=Vw(e),o={...t};return a=>(o.red=sp(t.red,r.red,a),o.green=sp(t.green,r.green,a),o.blue=sp(t.blue,r.blue,a),o.alpha=lt(t.alpha,r.alpha,a),Bi.transform(o))};function NV(n){var e,t;return isNaN(n)&&wc(n)&&(((e=n.match(nd))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(OT))===null||t===void 0?void 0:t.length)||0)>0}const d1={regex:SD,countKey:"Vars",token:"${v}",parse:mt},f1={regex:OT,countKey:"Colors",token:"${c}",parse:nn.parse},p1={regex:nd,countKey:"Numbers",token:"${n}",parse:oo.parse};function ip(n,{regex:e,countKey:t,token:r,parse:o}){const a=n.tokenised.match(e);a&&(n["num"+t]=a.length,n.tokenised=n.tokenised.replace(e,r),n.values.push(...a.map(o)))}function Ph(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&ip(t,d1),ip(t,f1),ip(t,p1),t}function m1(n){return Ph(n).values}function g1(n){const{values:e,numColors:t,numVars:r,tokenised:o}=Ph(n),a=e.length;return c=>{let h=o;for(let p=0;p<a;p++)p<r?h=h.replace(d1.token,c[p]):p<r+t?h=h.replace(f1.token,nn.transform(c[p])):h=h.replace(p1.token,Bl(c[p]));return h}}const CV=n=>typeof n=="number"?0:n;function RV(n){const e=m1(n);return g1(n)(e.map(CV))}const ti={test:NV,parse:m1,createTransformer:g1,getAnimatableNone:RV},y1=(n,e)=>t=>`${t>0?e:n}`;function v1(n,e){return typeof n=="number"?t=>lt(n,e,t):nn.test(n)?h1(n,e):n.startsWith("var(")?y1(n,e):x1(n,e)}const w1=(n,e)=>{const t=[...n],r=t.length,o=n.map((a,c)=>v1(a,e[c]));return a=>{for(let c=0;c<r;c++)t[c]=o[c](a);return t}},jV=(n,e)=>{const t={...n,...e},r={};for(const o in t)n[o]!==void 0&&e[o]!==void 0&&(r[o]=v1(n[o],e[o]));return o=>{for(const a in r)t[a]=r[a](o);return t}},x1=(n,e)=>{const t=ti.createTransformer(e),r=Ph(n),o=Ph(e);return r.numVars===o.numVars&&r.numColors===o.numColors&&r.numNumbers>=o.numNumbers?Qs(w1(r.values,o.values),t):y1(n,e)},ic=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},Lw=(n,e)=>t=>lt(n,e,t);function DV(n){return typeof n=="number"?Lw:typeof n=="string"?nn.test(n)?h1:x1:Array.isArray(n)?w1:typeof n=="object"?jV:Lw}function VV(n,e,t){const r=[],o=t||DV(n[0]),a=n.length-1;for(let c=0;c<a;c++){let h=o(n[c],n[c+1]);if(e){const p=Array.isArray(e)?e[c]||mt:e;h=Qs(p,h)}r.push(h)}return r}function _1(n,e,{clamp:t=!0,ease:r,mixer:o}={}){const a=n.length;if(yg(a===e.length),a===1)return()=>e[0];n[0]>n[a-1]&&(n=[...n].reverse(),e=[...e].reverse());const c=VV(e,r,o),h=c.length,p=m=>{let w=0;if(h>1)for(;w<n.length-2&&!(m<n[w+1]);w++);const x=ic(n[w],n[w+1],m);return c[w](x)};return t?m=>p(ei(n[0],n[a-1],m)):p}function LV(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const o=ic(0,e,r);n.push(lt(t,1,o))}}function OV(n){const e=[0];return LV(e,n.length-1),e}function MV(n,e){return n.map(t=>t*e)}function UV(n,e){return n.map(()=>e||i1).splice(0,n.length-1)}function Ah({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const o=xV(r)?r.map(Dw):Dw(r),a={done:!1,value:e[0]},c=MV(t&&t.length===e.length?t:OV(e),n),h=_1(c,e,{ease:Array.isArray(o)?o:UV(e,o)});return{calculatedDuration:n,next:p=>(a.value=h(p),a.done=p>=n,a)}}function E1(n,e){return e?n*(1e3/e):0}const FV=5;function T1(n,e,t){const r=Math.max(e-FV,0);return E1(t-n(r),e-r)}const op=.001,BV=.01,zV=10,$V=.05,qV=1;function GV({duration:n=800,bounce:e=.25,velocity:t=0,mass:r=1}){let o,a,c=1-e;c=ei($V,qV,c),n=ei(BV,zV,ts(n)),c<1?(o=m=>{const w=m*c,x=w*n,E=w-t,I=Kp(m,c),D=Math.exp(-x);return op-E/I*D},a=m=>{const x=m*c*n,E=x*t+t,I=Math.pow(c,2)*Math.pow(m,2)*n,D=Math.exp(-x),j=Kp(Math.pow(m,2),c);return(-o(m)+op>0?-1:1)*((E-I)*D)/j}):(o=m=>{const w=Math.exp(-m*n),x=(m-t)*n+1;return-op+w*x},a=m=>{const w=Math.exp(-m*n),x=(t-m)*(n*n);return w*x});const h=5/n,p=WV(o,a,h);if(n=qi(n),isNaN(p))return{stiffness:100,damping:10,duration:n};{const m=Math.pow(p,2)*r;return{stiffness:m,damping:c*2*Math.sqrt(r*m),duration:n}}}const HV=12;function WV(n,e,t){let r=t;for(let o=1;o<HV;o++)r=r-n(r)/e(r);return r}function Kp(n,e){return n*Math.sqrt(1-e*e)}const KV=["duration","bounce"],QV=["stiffness","damping","mass"];function Ow(n,e){return e.some(t=>n[t]!==void 0)}function YV(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!Ow(n,QV)&&Ow(n,KV)){const t=GV(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function S1({keyframes:n,restDelta:e,restSpeed:t,...r}){const o=n[0],a=n[n.length-1],c={done:!1,value:o},{stiffness:h,damping:p,mass:m,duration:w,velocity:x,isResolvedFromDuration:E}=YV({...r,velocity:-ts(r.velocity||0)}),I=x||0,D=p/(2*Math.sqrt(h*m)),j=a-o,A=ts(Math.sqrt(h/m)),F=Math.abs(j)<5;t||(t=F?.01:2),e||(e=F?.005:.5);let H;if(D<1){const O=Kp(A,D);H=Q=>{const Z=Math.exp(-D*A*Q);return a-Z*((I+D*A*j)/O*Math.sin(O*Q)+j*Math.cos(O*Q))}}else if(D===1)H=O=>a-Math.exp(-A*O)*(j+(I+A*j)*O);else{const O=A*Math.sqrt(D*D-1);H=Q=>{const Z=Math.exp(-D*A*Q),ie=Math.min(O*Q,300);return a-Z*((I+D*A*j)*Math.sinh(ie)+O*j*Math.cosh(ie))/O}}return{calculatedDuration:E&&w||null,next:O=>{const Q=H(O);if(E)c.done=O>=w;else{let Z=I;O!==0&&(D<1?Z=T1(H,O,Q):Z=0);const ie=Math.abs(Z)<=t,C=Math.abs(a-Q)<=e;c.done=ie&&C}return c.value=c.done?a:Q,c}}}function Mw({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:o=10,bounceStiffness:a=500,modifyTarget:c,min:h,max:p,restDelta:m=.5,restSpeed:w}){const x=n[0],E={done:!1,value:x},I=b=>h!==void 0&&b<h||p!==void 0&&b>p,D=b=>h===void 0?p:p===void 0||Math.abs(h-b)<Math.abs(p-b)?h:p;let j=t*e;const A=x+j,F=c===void 0?A:c(A);F!==A&&(j=F-x);const H=b=>-j*Math.exp(-b/r),O=b=>F+H(b),Q=b=>{const P=H(b),V=O(b);E.done=Math.abs(P)<=m,E.value=E.done?F:V};let Z,ie;const C=b=>{I(E.value)&&(Z=b,ie=S1({keyframes:[E.value,D(E.value)],velocity:T1(O,b,E.value),damping:o,stiffness:a,restDelta:m,restSpeed:w}))};return C(0),{calculatedDuration:null,next:b=>{let P=!1;return!ie&&Z===void 0&&(P=!0,Q(b),C(b)),Z!==void 0&&b>Z?ie.next(b-Z):(!P&&Q(b),E)}}}const XV=n=>{const e=({timestamp:t})=>n(t);return{start:()=>et.update(e,!0),stop:()=>as(e),now:()=>Kt.isProcessing?Kt.timestamp:performance.now()}},Uw=2e4;function Fw(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<Uw;)e+=t,r=n.next(e);return e>=Uw?1/0:e}const JV={decay:Mw,inertia:Mw,tween:Ah,keyframes:Ah,spring:S1};function kh({autoplay:n=!0,delay:e=0,driver:t=XV,keyframes:r,type:o="keyframes",repeat:a=0,repeatDelay:c=0,repeatType:h="loop",onPlay:p,onStop:m,onComplete:w,onUpdate:x,...E}){let I=1,D=!1,j,A;const F=()=>{A=new Promise(L=>{j=L})};F();let H;const O=JV[o]||Ah;let Q;O!==Ah&&typeof r[0]!="number"&&(Q=_1([0,100],r,{clamp:!1}),r=[0,100]);const Z=O({...E,keyframes:r});let ie;h==="mirror"&&(ie=O({...E,keyframes:[...r].reverse(),velocity:-(E.velocity||0)}));let C="idle",b=null,P=null,V=null;Z.calculatedDuration===null&&a&&(Z.calculatedDuration=Fw(Z));const{calculatedDuration:U}=Z;let z=1/0,N=1/0;U!==null&&(z=U+c,N=z*(a+1)-c);let be=0;const $e=L=>{if(P===null)return;I>0&&(P=Math.min(P,L)),I<0&&(P=Math.min(L-N/I,P)),b!==null?be=b:be=Math.round(L-P)*I;const J=be-e*(I>=0?1:-1),fe=I>=0?J<0:J>N;be=Math.max(J,0),C==="finished"&&b===null&&(be=N);let le=be,ue=Z;if(a){const He=Math.min(be,N)/z;let it=Math.floor(He),Dt=He%1;!Dt&&He>=1&&(Dt=1),Dt===1&&it--,it=Math.min(it,a+1),!!(it%2)&&(h==="reverse"?(Dt=1-Dt,c&&(Dt-=c/z)):h==="mirror"&&(ue=ie)),le=ei(0,1,Dt)*z}const ve=fe?{done:!1,value:r[0]}:ue.next(le);Q&&(ve.value=Q(ve.value));let{done:je}=ve;!fe&&U!==null&&(je=I>=0?be>=N:be<=0);const Be=b===null&&(C==="finished"||C==="running"&&je);return x&&x(ve.value),Be&&oe(),ve},Re=()=>{H&&H.stop(),H=void 0},Ne=()=>{C="idle",Re(),j(),F(),P=V=null},oe=()=>{C="finished",w&&w(),Re(),j()},$=()=>{if(D)return;H||(H=t($e));const L=H.now();p&&p(),b!==null?P=L-b:(!P||C==="finished")&&(P=L),C==="finished"&&F(),V=P,b=null,C="running",H.start()};n&&$();const X={then(L,J){return A.then(L,J)},get time(){return ts(be)},set time(L){L=qi(L),be=L,b!==null||!H||I===0?b=L:P=H.now()-L/I},get duration(){const L=Z.calculatedDuration===null?Fw(Z):Z.calculatedDuration;return ts(L)},get speed(){return I},set speed(L){L===I||!H||(I=L,X.time=ts(be))},get state(){return C},play:$,pause:()=>{C="paused",b=be},stop:()=>{D=!0,C!=="idle"&&(C="idle",m&&m(),Ne())},cancel:()=>{V!==null&&$e(V),Ne()},complete:()=>{C="finished"},sample:L=>(P=0,$e(L))};return X}function ZV(n){let e;return()=>(e===void 0&&(e=n()),e)}const e4=ZV(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),t4=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Gu=10,n4=2e4,r4=(n,e)=>e.type==="spring"||n==="backgroundColor"||!t1(e.ease);function s4(n,e,{onUpdate:t,onComplete:r,...o}){if(!(e4()&&t4.has(e)&&!o.repeatDelay&&o.repeatType!=="mirror"&&o.damping!==0&&o.type!=="inertia"))return!1;let c=!1,h,p,m=!1;const w=()=>{p=new Promise(O=>{h=O})};w();let{keyframes:x,duration:E=300,ease:I,times:D}=o;if(r4(e,o)){const O=kh({...o,repeat:0,delay:0});let Q={done:!1,value:x[0]};const Z=[];let ie=0;for(;!Q.done&&ie<n4;)Q=O.sample(ie),Z.push(Q.value),ie+=Gu;D=void 0,x=Z,E=ie-Gu,I="linear"}const j=fV(n.owner.current,e,x,{...o,duration:E,ease:I,times:D}),A=()=>{m=!1,j.cancel()},F=()=>{m=!0,et.update(A),h(),w()};return j.onfinish=()=>{m||(n.set(pV(x,o)),r&&r(),F())},{then(O,Q){return p.then(O,Q)},attachTimeline(O){return j.timeline=O,j.onfinish=null,mt},get time(){return ts(j.currentTime||0)},set time(O){j.currentTime=qi(O)},get speed(){return j.playbackRate},set speed(O){j.playbackRate=O},get duration(){return ts(E)},play:()=>{c||(j.play(),as(A))},pause:()=>j.pause(),stop:()=>{if(c=!0,j.playState==="idle")return;const{currentTime:O}=j;if(O){const Q=kh({...o,autoplay:!1});n.setWithVelocity(Q.sample(O-Gu).value,Q.sample(O).value,Gu)}F()},complete:()=>{m||j.finish()},cancel:F}}function i4({keyframes:n,delay:e,onUpdate:t,onComplete:r}){const o=()=>(t&&t(n[n.length-1]),r&&r(),{time:0,speed:1,duration:0,play:mt,pause:mt,stop:mt,then:a=>(a(),Promise.resolve()),cancel:mt,complete:mt});return e?kh({keyframes:[0,1],duration:0,delay:e,onComplete:o}):o()}const o4={type:"spring",stiffness:500,damping:25,restSpeed:10},a4=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),l4={type:"keyframes",duration:.8},c4={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},u4=(n,{keyframes:e})=>e.length>2?l4:io.has(n)?n.startsWith("scale")?a4(e[1]):o4:c4,Qp=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ti.test(e)||e==="0")&&!e.startsWith("url(")),h4=new Set(["brightness","contrast","saturate","opacity"]);function d4(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(nd)||[];if(!r)return n;const o=t.replace(r,"");let a=h4.has(e)?1:0;return r!==t&&(a*=100),e+"("+a+o+")"}const f4=/([a-z-]*)\(.*?\)/g,Yp={...ti,getAnimatableNone:n=>{const e=n.match(f4);return e?e.map(d4).join(" "):n}},p4={...MT,color:nn,backgroundColor:nn,outlineColor:nn,fill:nn,stroke:nn,borderColor:nn,borderTopColor:nn,borderRightColor:nn,borderBottomColor:nn,borderLeftColor:nn,filter:Yp,WebkitFilter:Yp},_g=n=>p4[n];function I1(n,e){let t=_g(n);return t!==Yp&&(t=ti),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const b1=n=>/^0[^.\s]+$/.test(n);function m4(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||b1(n)}function g4(n,e,t,r){const o=Qp(e,t);let a;Array.isArray(t)?a=[...t]:a=[null,t];const c=r.from!==void 0?r.from:n.get();let h;const p=[];for(let m=0;m<a.length;m++)a[m]===null&&(a[m]=m===0?c:a[m-1]),m4(a[m])&&p.push(m),typeof a[m]=="string"&&a[m]!=="none"&&a[m]!=="0"&&(h=a[m]);if(o&&p.length&&h)for(let m=0;m<p.length;m++){const w=p[m];a[w]=I1(e,h)}return a}function y4({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:o,repeat:a,repeatType:c,repeatDelay:h,from:p,elapsed:m,...w}){return!!Object.keys(w).length}function Eg(n,e){return n[e]||n.default||n}const v4={skipAnimations:!1},Tg=(n,e,t,r={})=>o=>{const a=Eg(r,n)||{},c=a.delay||r.delay||0;let{elapsed:h=0}=r;h=h-qi(c);const p=g4(e,n,t,a),m=p[0],w=p[p.length-1],x=Qp(n,m),E=Qp(n,w);let I={keyframes:p,velocity:e.getVelocity(),ease:"easeOut",...a,delay:-h,onUpdate:D=>{e.set(D),a.onUpdate&&a.onUpdate(D)},onComplete:()=>{o(),a.onComplete&&a.onComplete()}};if(y4(a)||(I={...I,...u4(n,I)}),I.duration&&(I.duration=qi(I.duration)),I.repeatDelay&&(I.repeatDelay=qi(I.repeatDelay)),!x||!E||dV.current||a.type===!1||v4.skipAnimations)return i4(I);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const D=s4(e,n,I);if(D)return D}return kh(I)};function Nh(n){return!!(pn(n)&&n.add)}const P1=n=>/^\-?\d*\.?\d+$/.test(n);function Sg(n,e){n.indexOf(e)===-1&&n.push(e)}function Ig(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class bg{constructor(){this.subscriptions=[]}add(e){return Sg(this.subscriptions,e),()=>Ig(this.subscriptions,e)}notify(e,t,r){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](e,t,r);else for(let a=0;a<o;a++){const c=this.subscriptions[a];c&&c(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const w4=n=>!isNaN(parseFloat(n));class x4{constructor(e,t={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,o=!0)=>{this.prev=this.current,this.current=r;const{delta:a,timestamp:c}=Kt;this.lastUpdated!==c&&(this.timeDelta=a,this.lastUpdated=c,et.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),o&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>et.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=w4(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new bg);const r=this.events[e].add(t);return e==="change"?()=>{r(),et.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?E1(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function _a(n,e){return new x4(n,e)}const A1=n=>e=>e.test(n),_4={test:n=>n==="auto",parse:n=>n},k1=[oo,Te,br,Vs,AD,PD,_4],bl=n=>k1.find(A1(n)),E4=[...k1,nn,ti],T4=n=>E4.find(A1(n));function S4(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,_a(t))}function I4(n,e){const t=sd(n,e);let{transitionEnd:r={},transition:o={},...a}=t?n.makeTargetAnimatable(t,!1):{};a={...a,...r};for(const c in a){const h=zD(a[c]);S4(n,c,h)}}function b4(n,e,t){var r,o;const a=Object.keys(e).filter(h=>!n.hasValue(h)),c=a.length;if(c)for(let h=0;h<c;h++){const p=a[h],m=e[p];let w=null;Array.isArray(m)&&(w=m[0]),w===null&&(w=(o=(r=t[p])!==null&&r!==void 0?r:n.readValue(p))!==null&&o!==void 0?o:e[p]),w!=null&&(typeof w=="string"&&(P1(w)||b1(w))?w=parseFloat(w):!T4(w)&&ti.test(m)&&(w=I1(p,m)),n.addValue(p,_a(w,{owner:n})),t[p]===void 0&&(t[p]=w),w!==null&&n.setBaseTarget(p,w))}}function P4(n,e){return e?(e[n]||e.default||e).from:void 0}function A4(n,e,t){const r={};for(const o in n){const a=P4(o,e);if(a!==void 0)r[o]=a;else{const c=t.getValue(o);c&&(r[o]=c.get())}}return r}function k4({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function N4(n,e){const t=n.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}else return t!==e}function N1(n,e,{delay:t=0,transitionOverride:r,type:o}={}){let{transition:a=n.getDefaultTransition(),transitionEnd:c,...h}=n.makeTargetAnimatable(e);const p=n.getValue("willChange");r&&(a=r);const m=[],w=o&&n.animationState&&n.animationState.getState()[o];for(const x in h){const E=n.getValue(x),I=h[x];if(!E||I===void 0||w&&k4(w,x))continue;const D={delay:t,elapsed:0,...Eg(a||{},x)};if(window.HandoffAppearAnimations){const F=n.getProps()[CT];if(F){const H=window.HandoffAppearAnimations(F,x,E,et);H!==null&&(D.elapsed=H,D.isHandoff=!0)}}let j=!D.isHandoff&&!N4(E,I);if(D.type==="spring"&&(E.getVelocity()||D.velocity)&&(j=!1),E.animation&&(j=!1),j)continue;E.start(Tg(x,E,I,n.shouldReduceMotion&&io.has(x)?{type:!1}:D));const A=E.animation;Nh(p)&&(p.add(x),A.then(()=>p.remove(x))),m.push(A)}return c&&Promise.all(m).then(()=>{c&&I4(n,c)}),m}function Xp(n,e,t={}){const r=sd(n,e,t.custom);let{transition:o=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(o=t.transitionOverride);const a=r?()=>Promise.all(N1(n,r,t)):()=>Promise.resolve(),c=n.variantChildren&&n.variantChildren.size?(p=0)=>{const{delayChildren:m=0,staggerChildren:w,staggerDirection:x}=o;return C4(n,e,m+p,w,x,t)}:()=>Promise.resolve(),{when:h}=o;if(h){const[p,m]=h==="beforeChildren"?[a,c]:[c,a];return p().then(()=>m())}else return Promise.all([a(),c(t.delay)])}function C4(n,e,t=0,r=0,o=1,a){const c=[],h=(n.variantChildren.size-1)*r,p=o===1?(m=0)=>m*r:(m=0)=>h-m*r;return Array.from(n.variantChildren).sort(R4).forEach((m,w)=>{m.notify("AnimationStart",e),c.push(Xp(m,e,{...a,delay:t+p(w)}).then(()=>m.notify("AnimationComplete",e)))}),Promise.all(c)}function R4(n,e){return n.sortNodePosition(e)}function j4(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const o=e.map(a=>Xp(n,a,t));r=Promise.all(o)}else if(typeof e=="string")r=Xp(n,e,t);else{const o=typeof e=="function"?sd(n,e,t.custom):e;r=Promise.all(N1(n,o,t))}return r.then(()=>n.notify("AnimationComplete",e))}const D4=[...ag].reverse(),V4=ag.length;function L4(n){return e=>Promise.all(e.map(({animation:t,options:r})=>j4(n,t,r)))}function O4(n){let e=L4(n);const t=U4();let r=!0;const o=(p,m)=>{const w=sd(n,m);if(w){const{transition:x,transitionEnd:E,...I}=w;p={...p,...I,...E}}return p};function a(p){e=p(n)}function c(p,m){const w=n.getProps(),x=n.getVariantContext(!0)||{},E=[],I=new Set;let D={},j=1/0;for(let F=0;F<V4;F++){const H=D4[F],O=t[H],Q=w[H]!==void 0?w[H]:x[H],Z=rc(Q),ie=H===m?O.isActive:null;ie===!1&&(j=F);let C=Q===x[H]&&Q!==w[H]&&Z;if(C&&r&&n.manuallyAnimateOnMount&&(C=!1),O.protectedKeys={...D},!O.isActive&&ie===null||!Q&&!O.prevProp||ed(Q)||typeof Q=="boolean")continue;let P=M4(O.prevProp,Q)||H===m&&O.isActive&&!C&&Z||F>j&&Z,V=!1;const U=Array.isArray(Q)?Q:[Q];let z=U.reduce(o,{});ie===!1&&(z={});const{prevResolvedValues:N={}}=O,be={...N,...z},$e=Re=>{P=!0,I.has(Re)&&(V=!0,I.delete(Re)),O.needsAnimating[Re]=!0};for(const Re in be){const Ne=z[Re],oe=N[Re];if(D.hasOwnProperty(Re))continue;let $=!1;bh(Ne)&&bh(oe)?$=!ZT(Ne,oe):$=Ne!==oe,$?Ne!==void 0?$e(Re):I.add(Re):Ne!==void 0&&I.has(Re)?$e(Re):O.protectedKeys[Re]=!0}O.prevProp=Q,O.prevResolvedValues=z,O.isActive&&(D={...D,...z}),r&&n.blockInitialAnimation&&(P=!1),P&&(!C||V)&&E.push(...U.map(Re=>({animation:Re,options:{type:H,...p}})))}if(I.size){const F={};I.forEach(H=>{const O=n.getBaseTarget(H);O!==void 0&&(F[H]=O)}),E.push({animation:F})}let A=!!E.length;return r&&(w.initial===!1||w.initial===w.animate)&&!n.manuallyAnimateOnMount&&(A=!1),r=!1,A?e(E):Promise.resolve()}function h(p,m,w){var x;if(t[p].isActive===m)return Promise.resolve();(x=n.variantChildren)===null||x===void 0||x.forEach(I=>{var D;return(D=I.animationState)===null||D===void 0?void 0:D.setActive(p,m)}),t[p].isActive=m;const E=c(w,p);for(const I in t)t[I].protectedKeys={};return E}return{animateChanges:c,setActive:h,setAnimateFunction:a,getState:()=>t}}function M4(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!ZT(e,n):!1}function Di(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function U4(){return{animate:Di(!0),whileInView:Di(),whileHover:Di(),whileTap:Di(),whileDrag:Di(),whileFocus:Di(),exit:Di()}}class F4 extends si{constructor(e){super(e),e.animationState||(e.animationState=O4(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),ed(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let B4=0;class z4 extends si{constructor(){super(...arguments),this.id=B4++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:r}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===o)return;const a=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});t&&!e&&a.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const $4={animation:{Feature:F4},exit:{Feature:z4}},Bw=(n,e)=>Math.abs(n-e);function q4(n,e){const t=Bw(n.x,e.x),r=Bw(n.y,e.y);return Math.sqrt(t**2+r**2)}class C1{constructor(e,t,{transformPagePoint:r,contextWindow:o,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=lp(this.lastMoveEventInfo,this.history),E=this.startEvent!==null,I=q4(x.offset,{x:0,y:0})>=3;if(!E&&!I)return;const{point:D}=x,{timestamp:j}=Kt;this.history.push({...D,timestamp:j});const{onStart:A,onMove:F}=this.handlers;E||(A&&A(this.lastMoveEvent,x),this.startEvent=this.lastMoveEvent),F&&F(this.lastMoveEvent,x)},this.handlePointerMove=(x,E)=>{this.lastMoveEvent=x,this.lastMoveEventInfo=ap(E,this.transformPagePoint),et.update(this.updatePoint,!0)},this.handlePointerUp=(x,E)=>{this.end();const{onEnd:I,onSessionEnd:D,resumeAnimation:j}=this.handlers;if(this.dragSnapToOrigin&&j&&j(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=lp(x.type==="pointercancel"?this.lastMoveEventInfo:ap(E,this.transformPagePoint),this.history);this.startEvent&&I&&I(x,A),D&&D(x,A)},!KT(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=r,this.contextWindow=o||window;const c=rd(e),h=ap(c,this.transformPagePoint),{point:p}=h,{timestamp:m}=Kt;this.history=[{...p,timestamp:m}];const{onSessionStart:w}=t;w&&w(e,lp(h,this.history)),this.removeListeners=Qs(es(this.contextWindow,"pointermove",this.handlePointerMove),es(this.contextWindow,"pointerup",this.handlePointerUp),es(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),as(this.updatePoint)}}function ap(n,e){return e?{point:e(n.point)}:n}function zw(n,e){return{x:n.x-e.x,y:n.y-e.y}}function lp({point:n},e){return{point:n,delta:zw(n,R1(e)),offset:zw(n,G4(e)),velocity:H4(e,.1)}}function G4(n){return n[0]}function R1(n){return n[n.length-1]}function H4(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const o=R1(n);for(;t>=0&&(r=n[t],!(o.timestamp-r.timestamp>qi(e)));)t--;if(!r)return{x:0,y:0};const a=ts(o.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const c={x:(o.x-r.x)/a,y:(o.y-r.y)/a};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function Tn(n){return n.max-n.min}function Jp(n,e=0,t=.01){return Math.abs(n-e)<=t}function $w(n,e,t,r=.5){n.origin=r,n.originPoint=lt(e.min,e.max,n.origin),n.scale=Tn(t)/Tn(e),(Jp(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=lt(t.min,t.max,n.origin)-n.originPoint,(Jp(n.translate)||isNaN(n.translate))&&(n.translate=0)}function zl(n,e,t,r){$w(n.x,e.x,t.x,r?r.originX:void 0),$w(n.y,e.y,t.y,r?r.originY:void 0)}function qw(n,e,t){n.min=t.min+e.min,n.max=n.min+Tn(e)}function W4(n,e,t){qw(n.x,e.x,t.x),qw(n.y,e.y,t.y)}function Gw(n,e,t){n.min=e.min-t.min,n.max=n.min+Tn(e)}function $l(n,e,t){Gw(n.x,e.x,t.x),Gw(n.y,e.y,t.y)}function K4(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?lt(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?lt(t,n,r.max):Math.min(n,t)),n}function Hw(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function Q4(n,{top:e,left:t,bottom:r,right:o}){return{x:Hw(n.x,t,o),y:Hw(n.y,e,r)}}function Ww(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function Y4(n,e){return{x:Ww(n.x,e.x),y:Ww(n.y,e.y)}}function X4(n,e){let t=.5;const r=Tn(n),o=Tn(e);return o>r?t=ic(e.min,e.max-r,n.min):r>o&&(t=ic(n.min,n.max-o,e.min)),ei(0,1,t)}function J4(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Zp=.35;function Z4(n=Zp){return n===!1?n=0:n===!0&&(n=Zp),{x:Kw(n,"left","right"),y:Kw(n,"top","bottom")}}function Kw(n,e,t){return{min:Qw(n,e),max:Qw(n,t)}}function Qw(n,e){return typeof n=="number"?n:n[e]||0}const Yw=()=>({translate:0,scale:1,origin:0,originPoint:0}),aa=()=>({x:Yw(),y:Yw()}),Xw=()=>({min:0,max:0}),xt=()=>({x:Xw(),y:Xw()});function Vn(n){return[n("x"),n("y")]}function j1({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function eL({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function tL(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function cp(n){return n===void 0||n===1}function em({scale:n,scaleX:e,scaleY:t}){return!cp(n)||!cp(e)||!cp(t)}function Li(n){return em(n)||D1(n)||n.z||n.rotate||n.rotateX||n.rotateY}function D1(n){return Jw(n.x)||Jw(n.y)}function Jw(n){return n&&n!=="0%"}function Ch(n,e,t){const r=n-t,o=e*r;return t+o}function Zw(n,e,t,r,o){return o!==void 0&&(n=Ch(n,o,r)),Ch(n,t,r)+e}function tm(n,e=0,t=1,r,o){n.min=Zw(n.min,e,t,r,o),n.max=Zw(n.max,e,t,r,o)}function V1(n,{x:e,y:t}){tm(n.x,e.translate,e.scale,e.originPoint),tm(n.y,t.translate,t.scale,t.originPoint)}function nL(n,e,t,r=!1){const o=t.length;if(!o)return;e.x=e.y=1;let a,c;for(let h=0;h<o;h++){a=t[h],c=a.projectionDelta;const p=a.instance;p&&p.style&&p.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&la(n,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,V1(n,c)),r&&Li(a.latestValues)&&la(n,a.latestValues))}e.x=ex(e.x),e.y=ex(e.y)}function ex(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function Ls(n,e){n.min=n.min+e,n.max=n.max+e}function tx(n,e,[t,r,o]){const a=e[o]!==void 0?e[o]:.5,c=lt(n.min,n.max,a);tm(n,e[t],e[r],c,e.scale)}const rL=["x","scaleX","originX"],sL=["y","scaleY","originY"];function la(n,e){tx(n.x,e,rL),tx(n.y,e,sL)}function L1(n,e){return j1(tL(n.getBoundingClientRect(),e))}function iL(n,e,t){const r=L1(n,t),{scroll:o}=e;return o&&(Ls(r.x,o.offset.x),Ls(r.y,o.offset.y)),r}const O1=({current:n})=>n?n.ownerDocument.defaultView:null,oL=new WeakMap;class aL{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=xt(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const o=w=>{const{dragSnapToOrigin:x}=this.getProps();x?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(rd(w,"page").point)},a=(w,x)=>{const{drag:E,dragPropagation:I,onDragStart:D}=this.getProps();if(E&&!I&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=YT(E),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Vn(A=>{let F=this.getAxisMotionValue(A).get()||0;if(br.test(F)){const{projection:H}=this.visualElement;if(H&&H.layout){const O=H.layout.layoutBox[A];O&&(F=Tn(O)*(parseFloat(F)/100))}}this.originPoint[A]=F}),D&&et.update(()=>D(w,x),!1,!0);const{animationState:j}=this.visualElement;j&&j.setActive("whileDrag",!0)},c=(w,x)=>{const{dragPropagation:E,dragDirectionLock:I,onDirectionLock:D,onDrag:j}=this.getProps();if(!E&&!this.openGlobalLock)return;const{offset:A}=x;if(I&&this.currentDirection===null){this.currentDirection=lL(A),this.currentDirection!==null&&D&&D(this.currentDirection);return}this.updateAxis("x",x.point,A),this.updateAxis("y",x.point,A),this.visualElement.render(),j&&j(w,x)},h=(w,x)=>this.stop(w,x),p=()=>Vn(w=>{var x;return this.getAnimationState(w)==="paused"&&((x=this.getAxisMotionValue(w).animation)===null||x===void 0?void 0:x.play())}),{dragSnapToOrigin:m}=this.getProps();this.panSession=new C1(e,{onSessionStart:o,onStart:a,onMove:c,onSessionEnd:h,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,contextWindow:O1(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:o}=t;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&et.update(()=>a(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:o}=this.getProps();if(!r||!Hu(e,o,this.currentDirection))return;const a=this.getAxisMotionValue(e);let c=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(c=K4(c,this.constraints[e],this.elastic[e])),a.set(c)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;t&&ia(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&o?this.constraints=Q4(o.layoutBox,t):this.constraints=!1,this.elastic=Z4(r),a!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&Vn(c=>{this.getAxisMotionValue(c)&&(this.constraints[c]=J4(o.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!ia(e))return!1;const r=e.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const a=iL(r,o.root,this.visualElement.getTransformPagePoint());let c=Y4(o.layout.layoutBox,a);if(t){const h=t(eL(c));this.hasMutatedConstraints=!!h,h&&(c=j1(h))}return c}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:o,dragTransition:a,dragSnapToOrigin:c,onDragTransitionEnd:h}=this.getProps(),p=this.constraints||{},m=Vn(w=>{if(!Hu(w,t,this.currentDirection))return;let x=p&&p[w]||{};c&&(x={min:0,max:0});const E=o?200:1e6,I=o?40:1e7,D={type:"inertia",velocity:r?e[w]:0,bounceStiffness:E,bounceDamping:I,timeConstant:750,restDelta:1,restSpeed:10,...a,...x};return this.startAxisValueAnimation(w,D)});return Promise.all(m).then(h)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return r.start(Tg(e,r,0,t))}stopAnimation(){Vn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Vn(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),o=r[t];return o||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Vn(t=>{const{drag:r}=this.getProps();if(!Hu(t,r,this.currentDirection))return;const{projection:o}=this.visualElement,a=this.getAxisMotionValue(t);if(o&&o.layout){const{min:c,max:h}=o.layout.layoutBox[t];a.set(e[t]-lt(c,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!ia(t)||!r||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};Vn(c=>{const h=this.getAxisMotionValue(c);if(h){const p=h.get();o[c]=X4({min:p,max:p},this.constraints[c])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Vn(c=>{if(!Hu(c,e,null))return;const h=this.getAxisMotionValue(c),{min:p,max:m}=this.constraints[c];h.set(lt(p,m,o[c]))})}addListeners(){if(!this.visualElement.current)return;oL.set(this.visualElement,this);const e=this.visualElement.current,t=es(e,"pointerdown",p=>{const{drag:m,dragListener:w=!0}=this.getProps();m&&w&&this.start(p)}),r=()=>{const{dragConstraints:p}=this.getProps();ia(p)&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,a=o.addEventListener("measure",r);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),r();const c=Jr(window,"resize",()=>this.scalePositionWithinConstraints()),h=o.addEventListener("didUpdate",({delta:p,hasLayoutChanged:m})=>{this.isDragging&&m&&(Vn(w=>{const x=this.getAxisMotionValue(w);x&&(this.originPoint[w]+=p[w].translate,x.set(x.get()+p[w].translate))}),this.visualElement.render())});return()=>{c(),t(),a(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:o=!1,dragConstraints:a=!1,dragElastic:c=Zp,dragMomentum:h=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:o,dragConstraints:a,dragElastic:c,dragMomentum:h}}}function Hu(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function lL(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class cL extends si{constructor(e){super(e),this.removeGroupControls=mt,this.removeListeners=mt,this.controls=new aL(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||mt}unmount(){this.removeGroupControls(),this.removeListeners()}}const nx=n=>(e,t)=>{n&&et.update(()=>n(e,t))};class uL extends si{constructor(){super(...arguments),this.removePointerDownListener=mt}onPointerDown(e){this.session=new C1(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:O1(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:o}=this.node.getProps();return{onSessionStart:nx(e),onStart:nx(t),onMove:r,onEnd:(a,c)=>{delete this.session,o&&et.update(()=>o(a,c))}}}mount(){this.removePointerDownListener=es(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function hL(){const n=R.useContext(Jh);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:r}=n,o=R.useId();return R.useEffect(()=>r(o),[]),!e&&t?[!1,()=>t&&t(o)]:[!0]}const sh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function rx(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Pl={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Te.test(n))n=parseFloat(n);else return n;const t=rx(n,e.target.x),r=rx(n,e.target.y);return`${t}% ${r}%`}},dL={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,o=ti.parse(n);if(o.length>5)return r;const a=ti.createTransformer(n),c=typeof o[0]!="number"?1:0,h=t.x.scale*e.x,p=t.y.scale*e.y;o[0+c]/=h,o[1+c]/=p;const m=lt(h,p,.5);return typeof o[2+c]=="number"&&(o[2+c]/=m),typeof o[3+c]=="number"&&(o[3+c]/=m),a(o)}};class fL extends Rh.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:o}=this.props,{projection:a}=e;xD(pL),a&&(t.group&&t.group.add(a),r&&r.register&&o&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),sh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:o,isPresent:a}=this.props,c=r.projection;return c&&(c.isPresent=a,o||e.layoutDependency!==t||t===void 0?c.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?c.promote():c.relegate()||et.postRender(()=>{const h=c.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:o}=e;o&&(o.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(o),r&&r.deregister&&r.deregister(o))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function M1(n){const[e,t]=hL(),r=R.useContext(cg);return Rh.createElement(fL,{...n,layoutGroup:r,switchLayoutGroup:R.useContext(jT),isPresent:e,safeToRemove:t})}const pL={borderRadius:{...Pl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Pl,borderTopRightRadius:Pl,borderBottomLeftRadius:Pl,borderBottomRightRadius:Pl,boxShadow:dL},U1=["TopLeft","TopRight","BottomLeft","BottomRight"],mL=U1.length,sx=n=>typeof n=="string"?parseFloat(n):n,ix=n=>typeof n=="number"||Te.test(n);function gL(n,e,t,r,o,a){o?(n.opacity=lt(0,t.opacity!==void 0?t.opacity:1,yL(r)),n.opacityExit=lt(e.opacity!==void 0?e.opacity:1,0,vL(r))):a&&(n.opacity=lt(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let c=0;c<mL;c++){const h=`border${U1[c]}Radius`;let p=ox(e,h),m=ox(t,h);if(p===void 0&&m===void 0)continue;p||(p=0),m||(m=0),p===0||m===0||ix(p)===ix(m)?(n[h]=Math.max(lt(sx(p),sx(m),r),0),(br.test(m)||br.test(p))&&(n[h]+="%")):n[h]=m}(e.rotate||t.rotate)&&(n.rotate=lt(e.rotate||0,t.rotate||0,r))}function ox(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const yL=F1(0,.5,l1),vL=F1(.5,.95,mt);function F1(n,e,t){return r=>r<n?0:r>e?1:t(ic(n,e,r))}function ax(n,e){n.min=e.min,n.max=e.max}function Dn(n,e){ax(n.x,e.x),ax(n.y,e.y)}function lx(n,e,t,r,o){return n-=e,n=Ch(n,1/t,r),o!==void 0&&(n=Ch(n,1/o,r)),n}function wL(n,e=0,t=1,r=.5,o,a=n,c=n){if(br.test(e)&&(e=parseFloat(e),e=lt(c.min,c.max,e/100)-c.min),typeof e!="number")return;let h=lt(a.min,a.max,r);n===a&&(h-=e),n.min=lx(n.min,e,t,h,o),n.max=lx(n.max,e,t,h,o)}function cx(n,e,[t,r,o],a,c){wL(n,e[t],e[r],e[o],e.scale,a,c)}const xL=["x","scaleX","originX"],_L=["y","scaleY","originY"];function ux(n,e,t,r){cx(n.x,e,xL,t?t.x:void 0,r?r.x:void 0),cx(n.y,e,_L,t?t.y:void 0,r?r.y:void 0)}function hx(n){return n.translate===0&&n.scale===1}function B1(n){return hx(n.x)&&hx(n.y)}function EL(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function z1(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function dx(n){return Tn(n.x)/Tn(n.y)}class TL{constructor(){this.members=[]}add(e){Sg(this.members,e),e.scheduleRender()}remove(e){if(Ig(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(o=>e===o);if(t===0)return!1;let r;for(let o=t;o>=0;o--){const a=this.members[o];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:o}=e.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function fx(n,e,t){let r="";const o=n.x.translate/e.x,a=n.y.translate/e.y;if((o||a)&&(r=`translate3d(${o}px, ${a}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:p,rotateX:m,rotateY:w}=t;p&&(r+=`rotate(${p}deg) `),m&&(r+=`rotateX(${m}deg) `),w&&(r+=`rotateY(${w}deg) `)}const c=n.x.scale*e.x,h=n.y.scale*e.y;return(c!==1||h!==1)&&(r+=`scale(${c}, ${h})`),r||"none"}const SL=(n,e)=>n.depth-e.depth;class IL{constructor(){this.children=[],this.isDirty=!1}add(e){Sg(this.children,e),this.isDirty=!0}remove(e){Ig(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(SL),this.isDirty=!1,this.children.forEach(e)}}function bL(n,e){const t=performance.now(),r=({timestamp:o})=>{const a=o-t;a>=e&&(as(r),n(a-e))};return et.read(r,!0),()=>as(r)}function PL(n){window.MotionDebug&&window.MotionDebug.record(n)}function AL(n){return n instanceof SVGElement&&n.tagName!=="svg"}function kL(n,e,t){const r=pn(n)?n:_a(n);return r.start(Tg("",r,e,t)),r.animation}const px=["","X","Y","Z"],NL={visibility:"hidden"},mx=1e3;let CL=0;const Oi={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function $1({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:o}){return class{constructor(c={},h=e?.()){this.id=CL++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Oi.totalNodes=Oi.resolvedTargetDeltas=Oi.recalculatedProjection=0,this.nodes.forEach(DL),this.nodes.forEach(UL),this.nodes.forEach(FL),this.nodes.forEach(VL),PL(Oi)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let p=0;p<this.path.length;p++)this.path[p].shouldResetTransform=!0;this.root===this&&(this.nodes=new IL)}addEventListener(c,h){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new bg),this.eventHandlers.get(c).add(h)}notifyListeners(c,...h){const p=this.eventHandlers.get(c);p&&p.notify(...h)}hasListeners(c){return this.eventHandlers.has(c)}mount(c,h=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=AL(c),this.instance=c;const{layoutId:p,layout:m,visualElement:w}=this.options;if(w&&!w.current&&w.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),h&&(m||p)&&(this.isLayoutDirty=!0),n){let x;const E=()=>this.root.updateBlockedByResize=!1;n(c,()=>{this.root.updateBlockedByResize=!0,x&&x(),x=bL(E,250),sh.hasAnimatedSinceResize&&(sh.hasAnimatedSinceResize=!1,this.nodes.forEach(yx))})}p&&this.root.registerSharedNode(p,this),this.options.animate!==!1&&w&&(p||m)&&this.addEventListener("didUpdate",({delta:x,hasLayoutChanged:E,hasRelativeTargetChanged:I,layout:D})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const j=this.options.transition||w.getDefaultTransition()||GL,{onLayoutAnimationStart:A,onLayoutAnimationComplete:F}=w.getProps(),H=!this.targetLayout||!z1(this.targetLayout,D)||I,O=!E&&I;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||O||E&&(H||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(x,O);const Q={...Eg(j,"layout"),onPlay:A,onComplete:F};(w.shouldReduceMotion||this.options.layoutRoot)&&(Q.delay=0,Q.type=!1),this.startAnimation(Q)}else E||yx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=D})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,as(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(BL),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let w=0;w<this.path.length;w++){const x=this.path[w];x.shouldResetTransform=!0,x.updateScroll("snapshot"),x.options.layoutRoot&&x.willUpdate(!1)}const{layoutId:h,layout:p}=this.options;if(h===void 0&&!p)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(gx);return}this.isUpdating||this.nodes.forEach(OL),this.isUpdating=!1,this.nodes.forEach(ML),this.nodes.forEach(RL),this.nodes.forEach(jL),this.clearAllSnapshots();const h=performance.now();Kt.delta=ei(0,1e3/60,h-Kt.timestamp),Kt.timestamp=h,Kt.isProcessing=!0,Zf.update.process(Kt),Zf.preRender.process(Kt),Zf.render.process(Kt),Kt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(LL),this.sharedNodes.forEach(zL)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,et.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){et.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let p=0;p<this.path.length;p++)this.path[p].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=xt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let h=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(h=!1),h&&(this.scroll={animationId:this.root.animationId,phase:c,isRoot:r(this.instance),offset:t(this.instance)})}resetTransform(){if(!o)return;const c=this.isLayoutDirty||this.shouldResetTransform,h=this.projectionDelta&&!B1(this.projectionDelta),p=this.getTransformTemplate(),m=p?p(this.latestValues,""):void 0,w=m!==this.prevTransformTemplateValue;c&&(h||Li(this.latestValues)||w)&&(o(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const h=this.measurePageBox();let p=this.removeElementScroll(h);return c&&(p=this.removeTransform(p)),HL(p),{animationId:this.root.animationId,measuredBox:h,layoutBox:p,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:c}=this.options;if(!c)return xt();const h=c.measureViewportBox(),{scroll:p}=this.root;return p&&(Ls(h.x,p.offset.x),Ls(h.y,p.offset.y)),h}removeElementScroll(c){const h=xt();Dn(h,c);for(let p=0;p<this.path.length;p++){const m=this.path[p],{scroll:w,options:x}=m;if(m!==this.root&&w&&x.layoutScroll){if(w.isRoot){Dn(h,c);const{scroll:E}=this.root;E&&(Ls(h.x,-E.offset.x),Ls(h.y,-E.offset.y))}Ls(h.x,w.offset.x),Ls(h.y,w.offset.y)}}return h}applyTransform(c,h=!1){const p=xt();Dn(p,c);for(let m=0;m<this.path.length;m++){const w=this.path[m];!h&&w.options.layoutScroll&&w.scroll&&w!==w.root&&la(p,{x:-w.scroll.offset.x,y:-w.scroll.offset.y}),Li(w.latestValues)&&la(p,w.latestValues)}return Li(this.latestValues)&&la(p,this.latestValues),p}removeTransform(c){const h=xt();Dn(h,c);for(let p=0;p<this.path.length;p++){const m=this.path[p];if(!m.instance||!Li(m.latestValues))continue;em(m.latestValues)&&m.updateSnapshot();const w=xt(),x=m.measurePageBox();Dn(w,x),ux(h,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,w)}return Li(this.latestValues)&&ux(h,this.latestValues),h}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Kt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var h;const p=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=p.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=p.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=p.isSharedProjectionDirty);const m=!!this.resumingFrom||this!==p;if(!(c||m&&this.isSharedProjectionDirty||this.isProjectionDirty||!((h=this.parent)===null||h===void 0)&&h.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:x,layoutId:E}=this.options;if(!(!this.layout||!(x||E))){if(this.resolvedRelativeTargetAt=Kt.timestamp,!this.targetDelta&&!this.relativeTarget){const I=this.getClosestProjectingParent();I&&I.layout&&this.animationProgress!==1?(this.relativeParent=I,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xt(),this.relativeTargetOrigin=xt(),$l(this.relativeTargetOrigin,this.layout.layoutBox,I.layout.layoutBox),Dn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=xt(),this.targetWithTransforms=xt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),W4(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Dn(this.target,this.layout.layoutBox),V1(this.target,this.targetDelta)):Dn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const I=this.getClosestProjectingParent();I&&!!I.resumingFrom==!!this.resumingFrom&&!I.options.layoutScroll&&I.target&&this.animationProgress!==1?(this.relativeParent=I,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xt(),this.relativeTargetOrigin=xt(),$l(this.relativeTargetOrigin,this.target,I.target),Dn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Oi.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||em(this.parent.latestValues)||D1(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var c;const h=this.getLead(),p=!!this.resumingFrom||this!==h;let m=!0;if((this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty)&&(m=!1),p&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(m=!1),this.resolvedRelativeTargetAt===Kt.timestamp&&(m=!1),m)return;const{layout:w,layoutId:x}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(w||x))return;Dn(this.layoutCorrected,this.layout.layoutBox);const E=this.treeScale.x,I=this.treeScale.y;nL(this.layoutCorrected,this.treeScale,this.path,p),h.layout&&!h.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(h.target=h.layout.layoutBox);const{target:D}=h;if(!D){this.projectionTransform&&(this.projectionDelta=aa(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=aa(),this.projectionDeltaWithTransform=aa());const j=this.projectionTransform;zl(this.projectionDelta,this.layoutCorrected,D,this.latestValues),this.projectionTransform=fx(this.projectionDelta,this.treeScale),(this.projectionTransform!==j||this.treeScale.x!==E||this.treeScale.y!==I)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",D)),Oi.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),c){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(c,h=!1){const p=this.snapshot,m=p?p.latestValues:{},w={...this.latestValues},x=aa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const E=xt(),I=p?p.source:void 0,D=this.layout?this.layout.source:void 0,j=I!==D,A=this.getStack(),F=!A||A.members.length<=1,H=!!(j&&!F&&this.options.crossfade===!0&&!this.path.some(qL));this.animationProgress=0;let O;this.mixTargetDelta=Q=>{const Z=Q/1e3;vx(x.x,c.x,Z),vx(x.y,c.y,Z),this.setTargetDelta(x),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&($l(E,this.layout.layoutBox,this.relativeParent.layout.layoutBox),$L(this.relativeTarget,this.relativeTargetOrigin,E,Z),O&&EL(this.relativeTarget,O)&&(this.isProjectionDirty=!1),O||(O=xt()),Dn(O,this.relativeTarget)),j&&(this.animationValues=w,gL(w,m,this.latestValues,Z,H,F)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(as(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=et.update(()=>{sh.hasAnimatedSinceResize=!0,this.currentAnimation=kL(0,mx,{...c,onUpdate:h=>{this.mixTargetDelta(h),c.onUpdate&&c.onUpdate(h)},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(mx),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:h,target:p,layout:m,latestValues:w}=c;if(!(!h||!p||!m)){if(this!==c&&this.layout&&m&&q1(this.options.animationType,this.layout.layoutBox,m.layoutBox)){p=this.target||xt();const x=Tn(this.layout.layoutBox.x);p.x.min=c.target.x.min,p.x.max=p.x.min+x;const E=Tn(this.layout.layoutBox.y);p.y.min=c.target.y.min,p.y.max=p.y.min+E}Dn(h,p),la(h,w),zl(this.projectionDeltaWithTransform,this.layoutCorrected,h,w)}}registerSharedNode(c,h){this.sharedNodes.has(c)||this.sharedNodes.set(c,new TL),this.sharedNodes.get(c).add(h);const m=h.options.initialPromotionConfig;h.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(h):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var c;const{layoutId:h}=this.options;return h?((c=this.getStack())===null||c===void 0?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:h}=this.options;return h?(c=this.getStack())===null||c===void 0?void 0:c.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:h,preserveFollowOpacity:p}={}){const m=this.getStack();m&&m.promote(this,p),c&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetRotation(){const{visualElement:c}=this.options;if(!c)return;let h=!1;const{latestValues:p}=c;if((p.rotate||p.rotateX||p.rotateY||p.rotateZ)&&(h=!0),!h)return;const m={};for(let w=0;w<px.length;w++){const x="rotate"+px[w];p[x]&&(m[x]=p[x],c.setStaticValue(x,0))}c.render();for(const w in m)c.setStaticValue(w,m[w]);c.scheduleRender()}getProjectionStyles(c){var h,p;if(!this.instance||this.isSVG)return;if(!this.isVisible)return NL;const m={visibility:""},w=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,m.opacity="",m.pointerEvents=rh(c?.pointerEvents)||"",m.transform=w?w(this.latestValues,""):"none",m;const x=this.getLead();if(!this.projectionDelta||!this.layout||!x.target){const j={};return this.options.layoutId&&(j.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,j.pointerEvents=rh(c?.pointerEvents)||""),this.hasProjected&&!Li(this.latestValues)&&(j.transform=w?w({},""):"none",this.hasProjected=!1),j}const E=x.animationValues||x.latestValues;this.applyTransformsToTarget(),m.transform=fx(this.projectionDeltaWithTransform,this.treeScale,E),w&&(m.transform=w(E,m.transform));const{x:I,y:D}=this.projectionDelta;m.transformOrigin=`${I.origin*100}% ${D.origin*100}% 0`,x.animationValues?m.opacity=x===this?(p=(h=E.opacity)!==null&&h!==void 0?h:this.latestValues.opacity)!==null&&p!==void 0?p:1:this.preserveOpacity?this.latestValues.opacity:E.opacityExit:m.opacity=x===this?E.opacity!==void 0?E.opacity:"":E.opacityExit!==void 0?E.opacityExit:0;for(const j in Sh){if(E[j]===void 0)continue;const{correct:A,applyTo:F}=Sh[j],H=m.transform==="none"?E[j]:A(E[j],x);if(F){const O=F.length;for(let Q=0;Q<O;Q++)m[F[Q]]=H}else m[j]=H}return this.options.layoutId&&(m.pointerEvents=x===this?rh(c?.pointerEvents)||"":"none"),m}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var h;return(h=c.currentAnimation)===null||h===void 0?void 0:h.stop()}),this.root.nodes.forEach(gx),this.root.sharedNodes.clear()}}}function RL(n){n.updateLayout()}function jL(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:o}=n.layout,{animationType:a}=n.options,c=t.source!==n.layout.source;a==="size"?Vn(x=>{const E=c?t.measuredBox[x]:t.layoutBox[x],I=Tn(E);E.min=r[x].min,E.max=E.min+I}):q1(a,t.layoutBox,r)&&Vn(x=>{const E=c?t.measuredBox[x]:t.layoutBox[x],I=Tn(r[x]);E.max=E.min+I,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[x].max=n.relativeTarget[x].min+I)});const h=aa();zl(h,r,t.layoutBox);const p=aa();c?zl(p,n.applyTransform(o,!0),t.measuredBox):zl(p,r,t.layoutBox);const m=!B1(h);let w=!1;if(!n.resumeFrom){const x=n.getClosestProjectingParent();if(x&&!x.resumeFrom){const{snapshot:E,layout:I}=x;if(E&&I){const D=xt();$l(D,t.layoutBox,E.layoutBox);const j=xt();$l(j,r,I.layoutBox),z1(D,j)||(w=!0),x.options.layoutRoot&&(n.relativeTarget=j,n.relativeTargetOrigin=D,n.relativeParent=x)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:p,layoutDelta:h,hasLayoutChanged:m,hasRelativeTargetChanged:w})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function DL(n){Oi.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function VL(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function LL(n){n.clearSnapshot()}function gx(n){n.clearMeasurements()}function OL(n){n.isLayoutDirty=!1}function ML(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function yx(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function UL(n){n.resolveTargetDelta()}function FL(n){n.calcProjection()}function BL(n){n.resetRotation()}function zL(n){n.removeLeadSnapshot()}function vx(n,e,t){n.translate=lt(e.translate,0,t),n.scale=lt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function wx(n,e,t,r){n.min=lt(e.min,t.min,r),n.max=lt(e.max,t.max,r)}function $L(n,e,t,r){wx(n.x,e.x,t.x,r),wx(n.y,e.y,t.y,r)}function qL(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const GL={duration:.45,ease:[.4,0,.1,1]},xx=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),_x=xx("applewebkit/")&&!xx("chrome/")?Math.round:mt;function Ex(n){n.min=_x(n.min),n.max=_x(n.max)}function HL(n){Ex(n.x),Ex(n.y)}function q1(n,e,t){return n==="position"||n==="preserve-aspect"&&!Jp(dx(e),dx(t),.2)}const WL=$1({attachResizeListener:(n,e)=>Jr(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),up={current:void 0},G1=$1({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!up.current){const n=new WL({});n.mount(window),n.setOptions({layoutScroll:!0}),up.current=n}return up.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),KL={pan:{Feature:uL},drag:{Feature:cL,ProjectionNode:G1,MeasureLayout:M1}},QL=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function YL(n){const e=QL.exec(n);if(!e)return[,];const[,t,r]=e;return[t,r]}function nm(n,e,t=1){const[r,o]=YL(n);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const c=a.trim();return P1(c)?parseFloat(c):c}else return Gp(o)?nm(o,e,t+1):o}function XL(n,{...e},t){const r=n.current;if(!(r instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(o=>{const a=o.get();if(!Gp(a))return;const c=nm(a,r);c&&o.set(c)});for(const o in e){const a=e[o];if(!Gp(a))continue;const c=nm(a,r);c&&(e[o]=c,t||(t={}),t[o]===void 0&&(t[o]=a))}return{target:e,transitionEnd:t}}const JL=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),H1=n=>JL.has(n),ZL=n=>Object.keys(n).some(H1),Tx=n=>n===oo||n===Te,Sx=(n,e)=>parseFloat(n.split(", ")[e]),Ix=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const o=r.match(/^matrix3d\((.+)\)$/);if(o)return Sx(o[1],e);{const a=r.match(/^matrix\((.+)\)$/);return a?Sx(a[1],n):0}},eO=new Set(["x","y","z"]),tO=vc.filter(n=>!eO.has(n));function nO(n){const e=[];return tO.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const Ea={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:Ix(4,13),y:Ix(5,14)};Ea.translateX=Ea.x;Ea.translateY=Ea.y;const rO=(n,e,t)=>{const r=e.measureViewportBox(),o=e.current,a=getComputedStyle(o),{display:c}=a,h={};c==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(m=>{h[m]=Ea[m](r,a)}),e.render();const p=e.measureViewportBox();return t.forEach(m=>{const w=e.getValue(m);w&&w.jump(h[m]),n[m]=Ea[m](p,a)}),n},sO=(n,e,t={},r={})=>{e={...e},r={...r};const o=Object.keys(e).filter(H1);let a=[],c=!1;const h=[];if(o.forEach(p=>{const m=n.getValue(p);if(!n.hasValue(p))return;let w=t[p],x=bl(w);const E=e[p];let I;if(bh(E)){const D=E.length,j=E[0]===null?1:0;w=E[j],x=bl(w);for(let A=j;A<D&&E[A]!==null;A++)I?yg(bl(E[A])===I):I=bl(E[A])}else I=bl(E);if(x!==I)if(Tx(x)&&Tx(I)){const D=m.get();typeof D=="string"&&m.set(parseFloat(D)),typeof E=="string"?e[p]=parseFloat(E):Array.isArray(E)&&I===Te&&(e[p]=E.map(parseFloat))}else x?.transform&&I?.transform&&(w===0||E===0)?w===0?m.set(I.transform(w)):e[p]=x.transform(E):(c||(a=nO(n),c=!0),h.push(p),r[p]=r[p]!==void 0?r[p]:e[p],m.jump(E))}),h.length){const p=h.indexOf("height")>=0?window.pageYOffset:null,m=rO(e,n,h);return a.length&&a.forEach(([w,x])=>{n.getValue(w).set(x)}),n.render(),Zh&&p!==null&&window.scrollTo({top:p}),{target:m,transitionEnd:r}}else return{target:e,transitionEnd:r}};function iO(n,e,t,r){return ZL(e)?sO(n,e,t,r):{target:e,transitionEnd:r}}const oO=(n,e,t,r)=>{const o=XL(n,e,r);return e=o.target,r=o.transitionEnd,iO(n,e,t,r)},rm={current:null},W1={current:!1};function aO(){if(W1.current=!0,!!Zh)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>rm.current=n.matches;n.addListener(e),e()}else rm.current=!1}function lO(n,e,t){const{willChange:r}=e;for(const o in e){const a=e[o],c=t[o];if(pn(a))n.addValue(o,a),Nh(r)&&r.add(o);else if(pn(c))n.addValue(o,_a(a,{owner:n})),Nh(r)&&r.remove(o);else if(c!==a)if(n.hasValue(o)){const h=n.getValue(o);!h.hasAnimated&&h.set(a)}else{const h=n.getStaticValue(o);n.addValue(o,_a(h!==void 0?h:a,{owner:n}))}}for(const o in t)e[o]===void 0&&n.removeValue(o);return e}const bx=new WeakMap,K1=Object.keys(sc),cO=K1.length,Px=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],uO=lg.length;class hO{constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:o,visualState:a},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>et.render(this.render,!1,!0);const{latestValues:h,renderState:p}=a;this.latestValues=h,this.baseTarget={...h},this.initialValues=t.initial?{...h}:{},this.renderState=p,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=o,this.options=c,this.isControllingVariants=td(t),this.isVariantNode=RT(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...w}=this.scrapeMotionValuesFromProps(t,{});for(const x in w){const E=w[x];h[x]!==void 0&&pn(E)&&(E.set(h[x],!1),Nh(m)&&m.add(x))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,bx.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),W1.current||aO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:rm.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){bx.delete(this.current),this.projection&&this.projection.unmount(),as(this.notifyUpdate),as(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const r=io.has(e),o=t.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&et.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{o(),a()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},r,o,a){let c,h;for(let p=0;p<cO;p++){const m=K1[p],{isEnabled:w,Feature:x,ProjectionNode:E,MeasureLayout:I}=sc[m];E&&(c=E),w(t)&&(!this.features[m]&&x&&(this.features[m]=new x(this)),I&&(h=I))}if((this.type==="html"||this.type==="svg")&&!this.projection&&c){this.projection=new c(this.latestValues,this.parent&&this.parent.projection);const{layoutId:p,layout:m,drag:w,dragConstraints:x,layoutScroll:E,layoutRoot:I}=t;this.projection.setOptions({layoutId:p,layout:m,alwaysMeasureLayout:!!w||x&&ia(x),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof m=="string"?m:"both",initialPromotionConfig:a,layoutScroll:E,layoutRoot:I})}return h}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):xt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<Px.length;r++){const o=Px[r];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const a=e["on"+o];a&&(this.propEventSubscriptions[o]=this.on(o,a))}this.prevMotionValues=lO(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const t={};for(let r=0;r<uO;r++){const o=lg[r],a=this.props[o];(rc(a)||a===!1)&&(t[o]=a)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=_a(t,{owner:this}),this.addValue(e,r)),r}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props,o=typeof r=="string"||typeof r=="object"?(t=gg(this.props,r))===null||t===void 0?void 0:t[e]:void 0;if(r&&o!==void 0)return o;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!pn(a)?a:this.initialValues[e]!==void 0&&o===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new bg),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class Q1 extends hO{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...r},{transformValues:o},a){let c=A4(r,e||{},this);if(o&&(t&&(t=o(t)),r&&(r=o(r)),c&&(c=o(c))),a){b4(this,r,c);const h=oO(this,r,c,t);t=h.transitionEnd,r=h.target}return{transition:e,transitionEnd:t,...r}}}function dO(n){return window.getComputedStyle(n)}class fO extends Q1{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(io.has(t)){const r=_g(t);return r&&r.default||0}else{const r=dO(e),o=(LT(t)?r.getPropertyValue(t):r[t])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:t}){return L1(e,t)}build(e,t,r,o){hg(e,t,r,o.transformTemplate)}scrapeMotionValuesFromProps(e,t){return mg(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;pn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,r,o){zT(e,t,r,o)}}class pO extends Q1{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(io.has(t)){const r=_g(t);return r&&r.default||0}return t=$T.has(t)?t:og(t),e.getAttribute(t)}measureInstanceViewportBox(){return xt()}scrapeMotionValuesFromProps(e,t){return GT(e,t)}build(e,t,r,o){fg(e,t,r,this.isSVGTag,o.transformTemplate)}renderInstance(e,t,r,o){qT(e,t,r,o)}mount(e){this.isSVGTag=pg(e.tagName),super.mount(e)}}const mO=(n,e)=>ug(n)?new pO(e,{enableHardwareAcceleration:!1}):new fO(e,{enableHardwareAcceleration:!0}),gO={layout:{ProjectionNode:G1,MeasureLayout:M1}},yO={...$4,...cV,...KL,...gO},De=vD((n,e)=>YD(n,e,yO,mO));function Y1(){const n=R.useRef(!1);return ig(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function vO(){const n=Y1(),[e,t]=R.useState(0),r=R.useCallback(()=>{n.current&&t(e+1)},[e]);return[R.useCallback(()=>et.postRender(r),[r]),e]}class wO extends R.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function xO({children:n,isPresent:e}){const t=R.useId(),r=R.useRef(null),o=R.useRef({width:0,height:0,top:0,left:0});return R.useInsertionEffect(()=>{const{width:a,height:c,top:h,left:p}=o.current;if(e||!r.current||!a||!c)return;r.current.dataset.motionPopId=t;const m=document.createElement("style");return document.head.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${c}px !important;
            top: ${h}px !important;
            left: ${p}px !important;
          }
        `),()=>{document.head.removeChild(m)}},[e]),R.createElement(wO,{isPresent:e,childRef:r,sizeRef:o},R.cloneElement(n,{ref:r}))}const hp=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:o,presenceAffectsLayout:a,mode:c})=>{const h=HT(_O),p=R.useId(),m=R.useMemo(()=>({id:p,initial:e,isPresent:t,custom:o,onExitComplete:w=>{h.set(w,!0);for(const x of h.values())if(!x)return;r&&r()},register:w=>(h.set(w,!1),()=>h.delete(w))}),a?void 0:[t]);return R.useMemo(()=>{h.forEach((w,x)=>h.set(x,!1))},[t]),R.useEffect(()=>{!t&&!h.size&&r&&r()},[t]),c==="popLayout"&&(n=R.createElement(xO,{isPresent:t},n)),R.createElement(Jh.Provider,{value:m},n)};function _O(){return new Map}function EO(n){return R.useEffect(()=>()=>n(),[])}const Mi=n=>n.key||"";function TO(n,e){n.forEach(t=>{const r=Mi(t);e.set(r,t)})}function SO(n){const e=[];return R.Children.forEach(n,t=>{R.isValidElement(t)&&e.push(t)}),e}const IO=({children:n,custom:e,initial:t=!0,onExitComplete:r,exitBeforeEnter:o,presenceAffectsLayout:a=!0,mode:c="sync"})=>{const h=R.useContext(cg).forceRender||vO()[0],p=Y1(),m=SO(n);let w=m;const x=R.useRef(new Map).current,E=R.useRef(w),I=R.useRef(new Map).current,D=R.useRef(!0);if(ig(()=>{D.current=!1,TO(m,I),E.current=w}),EO(()=>{D.current=!0,I.clear(),x.clear()}),D.current)return R.createElement(R.Fragment,null,w.map(H=>R.createElement(hp,{key:Mi(H),isPresent:!0,initial:t?void 0:!1,presenceAffectsLayout:a,mode:c},H)));w=[...w];const j=E.current.map(Mi),A=m.map(Mi),F=j.length;for(let H=0;H<F;H++){const O=j[H];A.indexOf(O)===-1&&!x.has(O)&&x.set(O,void 0)}return c==="wait"&&x.size&&(w=[]),x.forEach((H,O)=>{if(A.indexOf(O)!==-1)return;const Q=I.get(O);if(!Q)return;const Z=j.indexOf(O);let ie=H;if(!ie){const C=()=>{x.delete(O);const b=Array.from(I.keys()).filter(P=>!A.includes(P));if(b.forEach(P=>I.delete(P)),E.current=m.filter(P=>{const V=Mi(P);return V===O||b.includes(V)}),!x.size){if(p.current===!1)return;h(),r&&r()}};ie=R.createElement(hp,{key:Mi(Q),isPresent:!1,onExitComplete:C,custom:e,presenceAffectsLayout:a,mode:c},Q),x.set(O,ie)}w.splice(Z,0,ie)}),w=w.map(H=>{const O=H.key;return x.has(O)?H:R.createElement(hp,{key:Mi(H),isPresent:!0,presenceAffectsLayout:a,mode:c},H)}),R.createElement(R.Fragment,null,x.size?w:w.map(H=>R.cloneElement(H)))},bO="",Wu=new Map;class PO{constructor(){this.baseURL=bO}async getAuthToken(){return ra.currentUser?await ra.currentUser.getIdToken():null}async request(e,t={}){const r=`${this.baseURL}/api${e}`,o=await this.getAuthToken(),a={"Content-Type":"application/json",...t.headers};o&&(a.Authorization=`Bearer ${o}`);const c={...t,headers:a};try{const h=await fetch(r,c);if(!h.ok){const p=await h.json().catch(()=>({}));throw new Error(p.error||`HTTP ${h.status}`)}return await h.json()}catch(h){throw console.error(`API request failed: ${e}`,h),h}}async getGlyphs(e={}){const t=new URLSearchParams;Object.entries(e).forEach(([a,c])=>{c!=null&&c!==""&&t.append(a,c.toString())});const r=`/get-glyphs${t.toString()?"?"+t.toString():""}`;return(await this.request(r)).glyphs}async getGlyph(e){return(await this.request(`/get-glyph/${e}`)).glyph}async uploadGlyph(e){return await this.request("/upload-glyph",{method:"POST",body:JSON.stringify(e)})}async updateGlyph(e,t){return await this.request(`/update-glyph/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteGlyph(e){return await this.request(`/delete-glyph/${e}`,{method:"DELETE"})}async uploadFile(e,t="images"){const r=new FormData;r.append("file",e),r.append("type",t);const o=await this.getAuthToken(),c=await fetch("/api/upload-file",{method:"POST",headers:{Authorization:o?`Bearer ${o}`:""},body:r});if(!c.ok){const h=await c.json();throw new Error(h.error||"Failed to upload file")}return await c.json()}async deleteFile(e,t){return await this.request("/delete-file",{method:"DELETE",body:JSON.stringify({filename:e,type:t})})}getFileUrl(e,t){return`/api/files/${e}/${t}`}cleanImageUrl(e){if(!e)return e;if(Wu.has(e))return Wu.get(e);let t=e;if(e.startsWith("/api/files/"))return Wu.set(e,t),t;if(e.includes("://")){if(e.includes("127.0.0.1:5000")||e.includes("localhost:5000")){const r=e.match(/\/api\/files\/.*$/);r&&(t=r[0])}else if(e.includes("glyphmart.andreibanu.com")){const r=e.match(/\/api\/files\/.*$/);r&&(t=r[0])}}return Wu.set(e,t),t}async recordView(e){try{return(await this.request("/record-view",{method:"POST",body:JSON.stringify({glyphId:e})})).recorded}catch(t){return console.error("Failed to record view:",t),!1}}async recordDownload(e){try{return(await this.request("/record-download",{method:"POST",body:JSON.stringify({glyphId:e})})).recorded}catch(t){return console.error("Failed to record download:",t),!1}}async toggleLike(e){const t=await this.request("/toggle-like",{method:"POST",body:JSON.stringify({glyphId:e})});return{liked:t.liked,totalLikes:t.totalLikes}}async checkLikeStatus(e){return(await this.request(`/check-like-status?glyphId=${e}`)).liked}async getUserLikes(){return(await this.request("/get-user-likes")).glyphs}async getUser(e){return(await this.request(`/get-user/${e}`)).user}async getUserByUsername(e){return(await this.request(`/get-user-by-username/${e}`)).user}async updateUser(e){return await this.request("/update-user",{method:"POST",body:JSON.stringify(e)})}async deleteUserData(){return await this.request("/delete-user-data",{method:"DELETE"})}async healthCheck(){return await this.request("/health")}async getAdminStats(){return await this.request("/admin/stats")}async getAllUsers(){return(await this.request("/admin/users")).users}async adminUpdateUser(e,t){return await this.request(`/admin/users/${e}`,{method:"PUT",body:JSON.stringify(t)})}async makeUserAdmin(e){return await this.request(`/admin/make-admin/${e}`,{method:"POST"})}async addAdminByEmail(e){return await this.request("/admin/add-admin",{method:"POST",body:JSON.stringify({email:e})})}async adminDeleteGlyph(e){return await this.request(`/admin/glyphs/${e}`,{method:"DELETE"})}}const Xe=new PO,fn=n=>Xe.cleanImageUrl(n),AO=()=>{const[n,e]=R.useState(!1),[t,r]=R.useState(""),{currentUser:o,userProfile:a,logout:c}=Cr(),h=ar(),p=Zi(),m=o?.uid==="9H3pw5zS6GRDFTZaoYspEmruORj2"||a?.isAdmin===!0,w=async()=>{try{await c(),h("/")}catch(E){console.error("Failed to log out:",E)}},x=E=>{E.preventDefault(),t.trim()&&h(`/search?q=${encodeURIComponent(t.trim())}`)};return f.jsxs("nav",{className:"bg-nothing-black border-b border-nothing-gray-800 sticky top-0 z-50",children:[f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"flex justify-between items-center h-16",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsxs(We,{to:"/",className:"flex items-center space-x-2",children:[f.jsx("div",{className:"w-8 h-8 bg-nothing-red rounded-full flex items-center justify-center",children:f.jsx("div",{className:"w-4 h-4 bg-nothing-white rounded-full animate-glow"})}),f.jsx("span",{className:"text-xl font-bold text-nothing-white font-nothing",children:"GlyphMart"})]})}),p.pathname!=="/search"&&f.jsx("div",{className:"hidden md:block flex-1 max-w-lg mx-8",children:f.jsxs("form",{onSubmit:x,className:"relative",children:[f.jsx("input",{type:"text",value:t,onChange:E=>r(E.target.value),placeholder:"Search glyphs...",className:"w-full bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg py-2 pl-10 pr-4 text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200"}),f.jsx(zs,{className:"absolute left-3 top-2.5 h-5 w-5 text-nothing-gray-400"})]})}),f.jsx("div",{className:"hidden md:flex items-center space-x-4",children:o?f.jsxs(f.Fragment,{children:[f.jsxs(We,{to:"/upload",className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center space-x-2",children:[f.jsx(sD,{className:"h-4 w-4"}),f.jsx("span",{children:"Upload Glyph"})]}),f.jsxs("div",{className:"relative group",children:[f.jsxs("button",{className:"flex items-center space-x-2 text-nothing-white hover:text-nothing-gray-300 transition-colors duration-200",children:[f.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden border border-nothing-gray-600",children:a?.profilePicture||o.photoURL?f.jsx("img",{src:fn(a?.profilePicture||o.photoURL),alt:"Profile",loading:"lazy",className:"w-full h-full object-cover"}):f.jsx("div",{className:"w-full h-full bg-nothing-gray-700 flex items-center justify-center",children:f.jsx($i,{className:"h-4 w-4"})})}),f.jsx("span",{className:"font-medium",children:a?.username||o.displayName})]}),f.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200",children:f.jsxs("div",{className:"py-1",children:[f.jsxs(We,{to:`/storefront/${a?.username||o.displayName}`,className:"block px-4 py-2 text-sm text-nothing-white hover:bg-nothing-gray-800 transition-colors duration-200 flex items-center space-x-2",children:[f.jsx(Tw,{className:"h-4 w-4"}),f.jsx("span",{children:"My Storefront"})]}),f.jsxs(We,{to:"/liked",className:"block px-4 py-2 text-sm text-nothing-white hover:bg-nothing-gray-800 transition-colors duration-200 flex items-center space-x-2",children:[f.jsx(sr,{className:"h-4 w-4"}),f.jsx("span",{children:"Liked Posts"})]}),f.jsxs(We,{to:"/settings",className:"block px-4 py-2 text-sm text-nothing-white hover:bg-nothing-gray-800 transition-colors duration-200 flex items-center space-x-2",children:[f.jsx($p,{className:"h-4 w-4"}),f.jsx("span",{children:"Settings"})]}),m&&f.jsxs(We,{to:"/admin",className:"block px-4 py-2 text-sm text-nothing-white hover:bg-nothing-gray-800 transition-colors duration-200 flex items-center space-x-2",children:[f.jsx(sa,{className:"h-4 w-4"}),f.jsx("span",{children:"Admin Panel"})]}),f.jsxs("button",{onClick:w,className:"w-full text-left block px-4 py-2 text-sm text-nothing-white hover:bg-nothing-gray-800 transition-colors duration-200 flex items-center space-x-2",children:[f.jsx(_w,{className:"h-4 w-4"}),f.jsx("span",{children:"Logout"})]})]})})]})]}):f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx(We,{to:"/login",className:"text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200",children:"Login"}),f.jsx(We,{to:"/signup",className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",children:"Sign Up"})]})}),f.jsx("div",{className:"md:hidden",children:f.jsx("button",{onClick:()=>e(!n),className:"text-nothing-white hover:text-nothing-gray-300 transition-colors duration-200",children:n?f.jsx(AT,{className:"h-6 w-6"}):f.jsx(nD,{className:"h-6 w-6"})})})]}),f.jsx("div",{className:"md:hidden pb-4",children:f.jsxs("form",{onSubmit:x,className:"relative",children:[f.jsx("input",{type:"text",value:t,onChange:E=>r(E.target.value),placeholder:"Search glyphs...",className:"w-full bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg py-2 pl-10 pr-4 text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200"}),f.jsx(zs,{className:"absolute left-3 top-2.5 h-5 w-5 text-nothing-gray-400"})]})})]}),f.jsx(IO,{children:n&&f.jsx(De.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden bg-nothing-gray-900 border-t border-nothing-gray-800",children:f.jsx("div",{className:"px-4 py-4 space-y-4",children:o?f.jsxs(f.Fragment,{children:[f.jsx(We,{to:"/upload",className:"block bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 text-center",onClick:()=>e(!1),children:"Upload Glyph"}),f.jsxs(We,{to:`/storefront/${a?.username||o.displayName}`,className:"block text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200 flex items-center space-x-2",onClick:()=>e(!1),children:[f.jsx(Tw,{className:"h-4 w-4"}),f.jsx("span",{children:"My Storefront"})]}),f.jsxs(We,{to:"/liked",className:"block text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200 flex items-center space-x-2",onClick:()=>e(!1),children:[f.jsx(sr,{className:"h-4 w-4"}),f.jsx("span",{children:"Liked Posts"})]}),f.jsxs(We,{to:"/settings",className:"block text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200 flex items-center space-x-2",onClick:()=>e(!1),children:[f.jsx($p,{className:"h-4 w-4"}),f.jsx("span",{children:"Settings"})]}),m&&f.jsxs(We,{to:"/admin",className:"block text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200 flex items-center space-x-2",onClick:()=>e(!1),children:[f.jsx(sa,{className:"h-4 w-4"}),f.jsx("span",{children:"Admin Panel"})]}),f.jsxs("button",{onClick:()=>{w(),e(!1)},className:"block w-full text-left text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200 flex items-center space-x-2",children:[f.jsx(_w,{className:"h-4 w-4"}),f.jsx("span",{children:"Logout"})]})]}):f.jsxs(f.Fragment,{children:[f.jsx(We,{to:"/login",className:"block text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200",onClick:()=>e(!1),children:"Login"}),f.jsx(We,{to:"/signup",className:"block bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 text-center",onClick:()=>e(!1),children:"Sign Up"})]})})})})]})},Pg=Rh.memo(({glyph:n})=>{const e=ar(),t=R.useMemo(()=>n.images&&n.images.length>0?fn(n.images[0]):null,[n.images]),r=()=>{e(`/glyph/${n.id}`)},o=a=>{a.stopPropagation()};return f.jsx(De.div,{whileHover:{y:-5},className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg overflow-hidden hover:border-nothing-gray-700 transition-all duration-300",children:f.jsxs("div",{className:"cursor-pointer",onClick:r,children:[f.jsxs("div",{className:"aspect-square bg-nothing-gray-800 relative overflow-hidden",children:[t?f.jsx("img",{src:t,alt:n.title,loading:"lazy",className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"}):f.jsx("div",{className:"w-full h-full flex items-center justify-center",children:f.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center glyph-animation",children:f.jsx(xr,{className:"h-8 w-8 text-nothing-white"})})}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-nothing-black/80 via-transparent to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300",children:f.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:f.jsxs("div",{className:"flex items-center justify-between text-nothing-white text-sm",children:[f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx(os,{className:"h-4 w-4"}),f.jsx("span",{children:n.downloads||0})]}),f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx(sr,{className:"h-4 w-4"}),f.jsx("span",{children:n.likes||0})]})]})})})]}),f.jsxs("div",{className:"p-4",children:[f.jsx("h3",{className:"text-nothing-white font-semibold text-lg mb-2 truncate",children:n.title}),f.jsx("p",{className:"text-nothing-gray-400 text-sm mb-3 line-clamp-2",children:n.description}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs(We,{to:`/storefront/${n.creatorUsername}`,className:"text-nothing-red hover:text-red-400 text-sm font-medium transition-colors duration-200",onClick:o,children:["@",n.creatorUsername]}),f.jsxs("div",{className:"flex items-center space-x-4 text-nothing-gray-500 text-sm",children:[f.jsxs("div",{className:"flex items-center space-x-1",children:[f.jsx(os,{className:"h-3 w-3"}),f.jsx("span",{children:n.downloads||0})]}),f.jsxs("div",{className:"flex items-center space-x-1",children:[f.jsx(Un,{className:"h-3 w-3"}),f.jsx("span",{children:n.views||0})]})]})]})]})]})})});Pg.displayName="GlyphCard";const kO=()=>{const[n,e]=R.useState([]),[t,r]=R.useState([]),[o,a]=R.useState(!0),[c,h]=R.useState("latest");return R.useEffect(()=>{(async()=>{try{const m=await Xe.getGlyphs({sort:"latest",limit:12}),w=await Xe.getGlyphs({sort:"popular",limit:12});e(m),r(w)}catch(m){console.error("Error fetching glyphs:",m)}finally{a(!1)}})()},[]),o?f.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-4 glyph-animation",children:f.jsx(xr,{className:"h-8 w-8 text-nothing-white"})}),f.jsx("p",{className:"text-nothing-gray-400",children:"Loading latest glyphs..."})]})}):f.jsxs("div",{className:"min-h-screen bg-nothing-black",children:[f.jsxs("section",{className:"relative py-20 px-4 sm:px-6 lg:px-8",children:[f.jsx("div",{className:"max-w-7xl mx-auto text-center",children:f.jsxs(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:[f.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-nothing-white mb-6 font-nothing",children:["Glyph",f.jsx("span",{className:"text-nothing-red",children:"Mart"})]}),f.jsx("p",{className:"text-xl md:text-2xl text-nothing-gray-300 mb-8 max-w-3xl mx-auto",children:"Discover, share, and download custom Nothing Phone(3) glyphs created by the community"}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[f.jsx(We,{to:"/search",className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-8 py-3 rounded-lg font-semibold text-lg transition-colors duration-200",children:"Browse Glyphs"}),f.jsx(We,{to:"/upload",className:"border border-nothing-gray-700 hover:border-nothing-gray-600 text-nothing-white px-8 py-3 rounded-lg font-semibold text-lg transition-colors duration-200",children:"Upload Your Glyph"})]})]})}),f.jsx("div",{className:"absolute top-1/2 left-1/4 transform -translate-y-1/2 opacity-20",children:f.jsx("div",{className:"w-20 h-20 bg-nothing-red rounded-full flex items-center justify-center animate-float",children:f.jsx(xr,{className:"h-10 w-10 text-nothing-white"})})}),f.jsx("div",{className:"absolute top-1/3 right-1/4 transform -translate-y-1/2 opacity-10",children:f.jsx("div",{className:"w-16 h-16 bg-nothing-white rounded-full flex items-center justify-center animate-float",style:{animationDelay:"1s"},children:f.jsx(xr,{className:"h-8 w-8 text-nothing-black"})})})]}),f.jsx("section",{className:"px-4 sm:px-6 lg:px-8 mb-8",children:f.jsx("div",{className:"max-w-7xl mx-auto",children:f.jsxs("div",{className:"flex space-x-4 border-b border-nothing-gray-800",children:[f.jsxs("button",{onClick:()=>h("latest"),className:`flex items-center space-x-2 px-4 py-3 font-medium border-b-2 transition-colors duration-200 ${c==="latest"?"border-nothing-red text-nothing-red":"border-transparent text-nothing-gray-400 hover:text-nothing-white"}`,children:[f.jsx(Yj,{className:"h-4 w-4"}),f.jsx("span",{children:"Latest"})]}),f.jsxs("button",{onClick:()=>h("popular"),className:`flex items-center space-x-2 px-4 py-3 font-medium border-b-2 transition-colors duration-200 ${c==="popular"?"border-nothing-red text-nothing-red":"border-transparent text-nothing-gray-400 hover:text-nothing-white"}`,children:[f.jsx(PT,{className:"h-4 w-4"}),f.jsx("span",{children:"Popular"})]})]})})}),f.jsx("section",{className:"px-4 sm:px-6 lg:px-8 pb-20",children:f.jsxs("div",{className:"max-w-7xl mx-auto",children:[f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:(c==="latest"?n:t).map((p,m)=>f.jsx(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:m*.1},children:f.jsx(Pg,{glyph:p})},p.id))}),(c==="latest"?n:t).length===0&&f.jsxs("div",{className:"text-center py-12",children:[f.jsx("div",{className:"w-16 h-16 bg-nothing-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:f.jsx(xr,{className:"h-8 w-8 text-nothing-gray-600"})}),f.jsx("p",{className:"text-nothing-gray-400 text-lg",children:"No glyphs found"}),f.jsx("p",{className:"text-nothing-gray-500 text-sm mt-2",children:"Be the first to share your custom Nothing Phone(3) glyph!"})]})]})}),f.jsx("footer",{className:"px-4 sm:px-6 lg:px-8 pb-8",children:f.jsx("div",{className:"max-w-7xl mx-auto border-t border-nothing-gray-900 pt-6",children:f.jsxs("div",{className:"text-center space-y-4",children:[f.jsxs("div",{className:"mb-4",children:[f.jsx("p",{className:"text-nothing-gray-400 text-sm mb-3",children:"Enjoying GlyphMart? Support the development!"}),f.jsxs("a",{href:"https://buymeacoffee.com/PzmuV1517",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-2 bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded-lg font-medium text-sm transition-colors duration-200",children:[f.jsx("span",{children:"☕"}),f.jsx("span",{children:"Buy me a coffee"})]})]}),f.jsx("div",{children:f.jsxs("p",{className:"text-nothing-gray-500 text-sm mb-2",children:["Looking for tones instead? Check out"," ",f.jsx("a",{href:"https://glyphtones.firu.dev/",target:"_blank",rel:"noopener noreferrer",className:"text-nothing-gray-400 hover:text-nothing-gray-300 underline transition-colors duration-200 font-medium",children:"GlyphTones"})," ","by Firu - great work!"]})})]})})})]})},NO=()=>{const[n,e]=R.useState({email:"",password:""}),[t,r]=R.useState(!1),[o,a]=R.useState(!1),[c,h]=R.useState(""),{signin:p}=Cr(),m=ar(),w=E=>{e({...n,[E.target.name]:E.target.value}),h("")},x=async E=>{E.preventDefault(),a(!0),h("");try{await p(n.email,n.password),m("/")}catch(I){switch(console.error("Login error:",I),I.code){case"auth/user-not-found":h("No account found with this email address.");break;case"auth/wrong-password":h("Incorrect password.");break;case"auth/invalid-email":h("Invalid email address.");break;case"auth/too-many-requests":h("Too many failed attempts. Please try again later.");break;default:h("Failed to sign in. Please try again.")}}finally{a(!1)}};return f.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-md w-full space-y-8",children:[f.jsxs(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center",children:[f.jsx("div",{className:"flex justify-center mb-6",children:f.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center glyph-animation",children:f.jsx(xr,{className:"h-8 w-8 text-nothing-white"})})}),f.jsx("h2",{className:"text-3xl font-bold text-nothing-white font-nothing",children:"Welcome back"}),f.jsx("p",{className:"mt-2 text-nothing-gray-400",children:"Sign in to your GlyphMart account"})]}),f.jsxs(De.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"mt-8 space-y-6",onSubmit:x,children:[f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(sg,{className:"h-5 w-5 text-nothing-gray-400"})}),f.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n.email,onChange:w,className:"appearance-none relative block w-full px-10 py-3 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Email address"})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(Bs,{className:"h-5 w-5 text-nothing-gray-400"})}),f.jsx("input",{id:"password",name:"password",type:t?"text":"password",autoComplete:"current-password",required:!0,value:n.password,onChange:w,className:"appearance-none relative block w-full px-10 py-3 pr-10 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Password"}),f.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>r(!t),children:t?f.jsx(fa,{className:"h-5 w-5 text-nothing-gray-400 hover:text-nothing-gray-300"}):f.jsx(Un,{className:"h-5 w-5 text-nothing-gray-400 hover:text-nothing-gray-300"})})]})]})]}),c&&f.jsx(De.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-900/20 border border-red-700 text-red-400 px-4 py-3 rounded-lg text-sm",children:c}),f.jsx("div",{className:"flex items-center justify-between",children:f.jsx("div",{className:"text-sm",children:f.jsx(We,{to:"/forgot-password",className:"text-nothing-red hover:text-red-400 transition-colors duration-200",children:"Forgot your password?"})})}),f.jsx("div",{children:f.jsx("button",{type:"submit",disabled:o,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-nothing-white bg-nothing-red hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nothing-red disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:o?f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-nothing-white mr-2"}),"Signing in..."]}):"Sign in"})}),f.jsx("div",{className:"text-center",children:f.jsxs("p",{className:"text-nothing-gray-400",children:["Don't have an account?"," ",f.jsx(We,{to:"/signup",className:"text-nothing-red hover:text-red-400 font-medium transition-colors duration-200",children:"Sign up"})]})})]})]})})},CO=()=>{const[n,e]=R.useState({email:"",username:"",displayName:"",password:"",confirmPassword:""}),[t,r]=R.useState(!1),[o,a]=R.useState(!1),[c,h]=R.useState(!1),[p,m]=R.useState(""),{signup:w}=Cr(),x=ar(),E=j=>{e({...n,[j.target.name]:j.target.value}),m("")},I=()=>n.password!==n.confirmPassword?(m("Passwords do not match"),!1):n.password.length<6?(m("Password must be at least 6 characters long"),!1):n.username.length<3?(m("Username must be at least 3 characters long"),!1):/^[a-zA-Z0-9_]+$/.test(n.username)?!0:(m("Username can only contain letters, numbers, and underscores"),!1),D=async j=>{if(j.preventDefault(),h(!0),m(""),!I()){h(!1);return}try{await w(n.email,n.password,n.username,n.displayName),x("/")}catch(A){switch(console.error("Signup error:",A),A.code){case"auth/email-already-in-use":m("An account with this email already exists.");break;case"auth/invalid-email":m("Invalid email address.");break;case"auth/weak-password":m("Password is too weak.");break;default:m("Failed to create account. Please try again.")}}finally{h(!1)}};return f.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center px-4 sm:px-6 lg:px-8 py-12",children:f.jsxs("div",{className:"max-w-md w-full space-y-8",children:[f.jsxs(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center",children:[f.jsx("div",{className:"flex justify-center mb-6",children:f.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center glyph-animation",children:f.jsx(xr,{className:"h-8 w-8 text-nothing-white"})})}),f.jsx("h2",{className:"text-3xl font-bold text-nothing-white font-nothing",children:"Join GlyphMart"}),f.jsx("p",{className:"mt-2 text-nothing-gray-400",children:"Create your account and start sharing glyphs"})]}),f.jsxs(De.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"mt-8 space-y-6",onSubmit:D,children:[f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(sg,{className:"h-5 w-5 text-nothing-gray-400"})}),f.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n.email,onChange:E,className:"appearance-none relative block w-full px-10 py-3 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Email address"})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"username",className:"sr-only",children:"Username"}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(Wj,{className:"h-5 w-5 text-nothing-gray-400"})}),f.jsx("input",{id:"username",name:"username",type:"text",autoComplete:"username",required:!0,value:n.username,onChange:E,className:"appearance-none relative block w-full px-10 py-3 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Username"})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"displayName",className:"sr-only",children:"Display Name"}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx($i,{className:"h-5 w-5 text-nothing-gray-400"})}),f.jsx("input",{id:"displayName",name:"displayName",type:"text",autoComplete:"name",required:!0,value:n.displayName,onChange:E,className:"appearance-none relative block w-full px-10 py-3 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Display Name"})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(Bs,{className:"h-5 w-5 text-nothing-gray-400"})}),f.jsx("input",{id:"password",name:"password",type:t?"text":"password",autoComplete:"new-password",required:!0,value:n.password,onChange:E,className:"appearance-none relative block w-full px-10 py-3 pr-10 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Password"}),f.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>r(!t),children:t?f.jsx(fa,{className:"h-5 w-5 text-nothing-gray-400 hover:text-nothing-gray-300"}):f.jsx(Un,{className:"h-5 w-5 text-nothing-gray-400 hover:text-nothing-gray-300"})})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"confirmPassword",className:"sr-only",children:"Confirm Password"}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(Bs,{className:"h-5 w-5 text-nothing-gray-400"})}),f.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:o?"text":"password",autoComplete:"new-password",required:!0,value:n.confirmPassword,onChange:E,className:"appearance-none relative block w-full px-10 py-3 pr-10 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Confirm Password"}),f.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>a(!o),children:o?f.jsx(fa,{className:"h-5 w-5 text-nothing-gray-400 hover:text-nothing-gray-300"}):f.jsx(Un,{className:"h-5 w-5 text-nothing-gray-400 hover:text-nothing-gray-300"})})]})]})]}),p&&f.jsx(De.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-900/20 border border-red-700 text-red-400 px-4 py-3 rounded-lg text-sm",children:p}),f.jsx("div",{children:f.jsx("button",{type:"submit",disabled:c,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-nothing-white bg-nothing-red hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nothing-red disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:c?f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-nothing-white mr-2"}),"Creating account..."]}):"Create Account"})}),f.jsx("div",{className:"text-center",children:f.jsxs("p",{className:"text-nothing-gray-400",children:["Already have an account?"," ",f.jsx(We,{to:"/login",className:"text-nothing-red hover:text-red-400 font-medium transition-colors duration-200",children:"Sign in"})]})})]})]})})},oc=({onFileUpload:n,acceptedTypes:e="images",multiple:t=!1,maxFiles:r=5})=>{const[o,a]=R.useState(!1),[c,h]=R.useState([]),[p,m]=R.useState(!1),w=R.useRef(null),x=()=>{switch(e){case"images":return"image/png,image/jpeg,image/jpg,image/gif,image/webp";case"apks":return".apk";case"profile":return"image/png,image/jpeg,image/jpg,image/gif,image/webp";default:return""}},E=O=>O.type?.startsWith("image/")?f.jsx(zp,{className:"w-8 h-8 text-blue-500"}):f.jsx(IT,{className:"w-8 h-8 text-gray-500"}),I=O=>{const Q=Array.from(O);if(!t&&Q.length>1){alert("Only one file is allowed");return}if(t&&c.length+Q.length>r){alert(`Maximum ${r} files allowed`);return}Q.forEach(D)},D=async O=>{if(O){a(!0);try{const Q=await Xe.uploadFile(O,e),Z={id:Date.now()+Math.random(),name:O.name,url:Q.url,thumbnail:Q.thumbnail,filename:Q.filename,type:Q.type,file:O};h(ie=>[...ie,Z]),n(Z)}catch(Q){console.error("Upload failed:",Q),alert("Upload failed: "+Q.message)}finally{a(!1)}}},j=async O=>{try{O.filename&&await Xe.deleteFile(O.filename,O.type),h(Q=>Q.filter(Z=>Z.id!==O.id)),n(null,O)}catch(Q){console.error("Failed to delete file:",Q),alert("Failed to delete file: "+Q.message)}},A=O=>{O.preventDefault(),O.stopPropagation(),O.type==="dragenter"||O.type==="dragover"?m(!0):O.type==="dragleave"&&m(!1)},F=O=>{O.preventDefault(),O.stopPropagation(),m(!1),O.dataTransfer.files&&O.dataTransfer.files[0]&&I(O.dataTransfer.files)},H=()=>{w.current?.click()};return f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:`border-2 border-dashed rounded-lg p-6 text-center transition-colors cursor-pointer
          ${p?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}
          ${o?"opacity-50 pointer-events-none":""}`,onDragEnter:A,onDragLeave:A,onDragOver:A,onDrop:F,onClick:H,children:[f.jsx("input",{ref:w,type:"file",multiple:t,accept:x(),onChange:O=>I(O.target.files),className:"hidden"}),f.jsx(qp,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),f.jsx("p",{className:"text-lg font-medium text-gray-700 mb-2",children:o?"Uploading...":`Upload ${e==="apks"?"APK file":"images"}`}),f.jsx("p",{className:"text-sm text-gray-500",children:"Drag and drop files here, or click to select files"}),e==="images"&&f.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Supported: PNG, JPG, JPEG, GIF, WebP (max 50MB each)"}),e==="apks"&&f.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Supported: APK files (max 50MB)"})]}),c.length>0&&f.jsxs("div",{className:"space-y-2",children:[f.jsx("h4",{className:"font-medium text-gray-700",children:"Uploaded Files:"}),f.jsx("div",{className:"grid gap-2",children:c.map(O=>f.jsxs(De.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[f.jsxs("div",{className:"flex items-center space-x-3",children:[O.thumbnail?f.jsx("img",{src:fn(O.thumbnail),alt:"Preview",className:"w-10 h-10 object-cover rounded"}):E(O.file),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-gray-700 truncate max-w-48",children:O.name}),f.jsxs("p",{className:"text-xs text-gray-500",children:[e==="images"?"Image":"APK"," • Uploaded"]})]})]}),f.jsx("button",{onClick:()=>j(O),className:"p-1 text-red-500 hover:text-red-700 transition-colors",title:"Remove file",children:f.jsx(AT,{className:"w-4 h-4"})})]},O.id))})]})]})},RO=()=>{const{id:n}=Lx(),[e,t]=R.useState(null),[r,o]=R.useState(!0),[a,c]=R.useState(!1),[h,p]=R.useState(!1),[m,w]=R.useState(!1),[x,E]=R.useState(!1),{currentUser:I,userProfile:D}=Cr(),[j,A]=R.useState(!1),[F,H]=R.useState(null),[O,Q]=R.useState(!1),[Z,ie]=R.useState(""),[C,b]=R.useState(!1),[P,V]=R.useState(!1),[U,z]=R.useState(!1),[N,be]=R.useState([]),$e=ar();R.useEffect(()=>{n&&(async()=>{try{const ue=await Xe.getGlyph(n);if(ue.createdAt&&(ue.createdAt=new Date(ue.createdAt)),t(ue),await Xe.recordView(n),I){const ve=await Xe.checkLikeStatus(n);p(ve)}else p(!1)}catch(ue){console.error("Error fetching glyph:",ue),ue.message.includes("not found")&&$e("/404")}finally{o(!1)}})()},[n,$e,I]);const Re=async()=>{if(!(!e.apkUrl&&!e.githubUrl)){if(e.apkUrl)E(!0);else if(e.githubUrl){window.open(e.githubUrl,"_blank");try{await Xe.recordDownload(n)&&t(ue=>({...ue,downloads:(ue.downloads||0)+1}))}catch(le){console.error("Error updating download count:",le)}}}},Ne=async()=>{c(!0);try{const le=await Xe.recordDownload(n),ue=document.createElement("a");ue.href=e.apkUrl,ue.download=`${e.title.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.apk`,document.body.appendChild(ue),ue.click(),document.body.removeChild(ue),le&&t(ve=>({...ve,downloads:(ve.downloads||0)+1}))}catch(le){console.error("Error downloading glyph:",le)}finally{c(!1),E(!1)}},oe=async()=>{if(!I||m){I||$e("/login");return}w(!0);try{const le=await Xe.toggleLike(n);p(le.liked),t(ue=>({...ue,likes:le.totalLikes}))}catch(le){console.error("Error liking glyph:",le)}finally{w(!1)}},$=async()=>{const le=window.location.href;if(navigator.share)try{await navigator.share({title:e.title,text:e.description,url:le})}catch(ue){console.error("Error sharing:",ue),X(le)}else X(le)},X=async le=>{try{await navigator.clipboard.writeText(le),alert("Link copied to clipboard!")}catch(ue){console.error("Error copying to clipboard:",ue)}};R.useEffect(()=>{j&&e&&H({title:e.title,description:e.description,apkUrl:e.apkUrl||"",githubUrl:e.githubUrl||"",instructions:e.instructions||"",images:e.images||[]})},[j,e]);const L=le=>{const{name:ue,value:ve}=le.target;H(je=>({...je,[ue]:ve})),ie("")},J=(le,ue)=>{le?(be(ve=>[...ve,le]),H(ve=>({...ve,images:[...ve.images,le.url]}))):ue&&(be(ve=>ve.filter(je=>je.id!==ue.id)),H(ve=>({...ve,images:ve.images.filter(je=>je!==ue.url)})))},fe=async le=>{le.preventDefault(),Q(!0),ie("");try{await Xe.updateGlyph(e.id,{title:F.title,description:F.description,apkUrl:F.apkUrl,githubUrl:F.githubUrl,instructions:F.instructions,images:F.images}),A(!1),t(ue=>({...ue,...F}))}catch(ue){ie("Failed to update glyph: "+ue.message)}finally{Q(!1)}};return r?f.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-4 glyph-animation",children:f.jsx("div",{className:"w-8 h-8 bg-nothing-white rounded-full"})}),f.jsx("p",{className:"text-nothing-gray-400",children:"Loading glyph..."})]})}):e?e.deleted?f.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("h1",{className:"text-2xl font-bold text-red-500 mb-4",children:"Glyph Deleted"}),f.jsx("p",{className:"text-nothing-gray-400 mb-6",children:"This glyph has been deleted by its creator and is no longer available."}),f.jsx(We,{to:"/",className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-6 py-3 rounded-lg font-medium transition-colors duration-200",children:"Return to home"})]})}):f.jsxs("div",{className:"min-h-screen bg-nothing-black",children:[f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[f.jsxs("div",{className:"space-y-4",children:[f.jsx(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"aspect-square bg-nothing-gray-900 rounded-lg overflow-hidden",children:e.images&&e.images.length>0?f.jsx("img",{src:fn(e.images[0]),alt:e.title,loading:"lazy",className:"w-full h-full object-cover"}):f.jsx("div",{className:"w-full h-full flex items-center justify-center",children:f.jsx("div",{className:"w-24 h-24 bg-nothing-red rounded-full flex items-center justify-center glyph-animation",children:f.jsx("div",{className:"w-12 h-12 bg-nothing-white rounded-full"})})})}),D&&e.creatorUsername===D.username&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"flex space-x-3 mt-6",children:[f.jsx("button",{type:"button",onClick:()=>A(!0),className:"px-6 py-3 bg-nothing-gray-700 hover:bg-nothing-gray-800 text-nothing-white rounded-lg font-medium transition-colors duration-200",children:"Edit Glyph"}),f.jsx("button",{type:"button",onClick:()=>b(!0),className:"px-6 py-3 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200",children:"Delete Glyph"})]}),C&&f.jsx("div",{className:"fixed inset-0 bg-nothing-black/80 flex items-center justify-center z-50 p-4",children:f.jsxs(De.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6 max-w-md w-full",children:[f.jsxs("div",{className:"text-center mb-6",children:[f.jsx("h2",{className:"text-2xl font-bold text-nothing-white mb-4",children:"Delete Glyph?"}),f.jsx("p",{className:"text-nothing-gray-300 mb-4",children:"Are you sure you want to permanently delete this glyph and all its related data? This action cannot be undone."})]}),f.jsxs("div",{className:"flex space-x-3",children:[f.jsx("button",{onClick:async()=>{if(!P){V(!0);try{await Xe.deleteGlyph(e.id)}catch(le){console.error("Error deleting glyph:",le)}finally{V(!1),b(!1),$e("/")}}},disabled:P,className:"flex-1 bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50",children:P?"Deleting...":"Yes, Delete"}),f.jsx("button",{onClick:()=>b(!1),disabled:P,className:"px-4 py-2 border border-nothing-gray-700 text-nothing-white hover:border-nothing-gray-600 rounded-lg font-medium transition-colors duration-200",children:"Cancel"})]})]})})]})]}),f.jsxs(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold text-nothing-white mb-4 font-nothing",children:e.title}),f.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[f.jsxs(We,{to:`/storefront/${e.creatorUsername||e.creatorId}`,className:"flex items-center space-x-2 text-nothing-red hover:text-red-400 transition-colors duration-200",children:[f.jsx($i,{className:"h-4 w-4"}),f.jsxs("span",{className:"font-medium",children:["@",e.creatorUsername||e.creatorId]})]}),f.jsxs("div",{className:"flex items-center space-x-1 text-nothing-gray-400",children:[f.jsx(rg,{className:"h-4 w-4"}),f.jsx("span",{className:"text-sm",children:e.createdAt?.toDate?.()?.toLocaleDateString()||"Unknown date"})]})]}),f.jsx("div",{className:"text-nothing-gray-300 text-lg leading-relaxed mb-6",style:{position:"relative"},children:e.description?f.jsxs("div",{style:{position:"relative"},children:[f.jsx("span",{className:U?"":"glyph-fade-text glyph-line-clamp",style:U?{display:"block",maxHeight:"none",overflow:"visible"}:void 0,children:e.description}),f.jsx("button",{type:"button",onClick:()=>z(le=>!le),className:"ml-2 text-nothing-red hover:underline focus:outline-none relative z-10",style:{marginTop:"0.5em"},children:U?"Show Less":"Show More"})]}):null})]}),f.jsxs("div",{className:"flex items-center space-x-6 py-4 border-y border-nothing-gray-800",children:[f.jsxs("div",{className:"flex items-center space-x-2 text-nothing-gray-400",children:[f.jsx(os,{className:"h-5 w-5"}),f.jsx("span",{children:(()=>{const le=e.downloads||0;return`${le} ${le===1?"download":"downloads"}`})()})]}),f.jsxs("div",{className:"flex items-center space-x-2 text-nothing-gray-400",children:[f.jsx(Un,{className:"h-5 w-5"}),f.jsx("span",{children:(()=>{const le=e.views||0;return`${le} ${le===1?"view":"views"}`})()})]}),f.jsxs("div",{className:"flex items-center space-x-2 text-nothing-gray-400",children:[f.jsx(sr,{className:"h-5 w-5"}),f.jsx("span",{children:(()=>{const le=e.likes||0;return`${le} ${le===1?"like":"likes"}`})()})]})]}),f.jsxs("div",{className:"flex space-x-4",children:[(e.apkUrl||e.githubUrl)&&f.jsxs("button",{onClick:Re,className:"flex-1 bg-nothing-red hover:bg-red-700 text-nothing-white px-6 py-3 rounded-lg font-semibold flex items-center justify-center space-x-2 transition-colors duration-200",children:[f.jsx(os,{className:"h-5 w-5"}),f.jsx("span",{children:e.apkUrl?"Download APK":"View on GitHub"})]}),f.jsxs("button",{onClick:oe,disabled:m,className:`px-6 py-3 rounded-lg font-semibold flex items-center justify-center space-x-2 transition-colors duration-200 min-w-[120px] ${h?"bg-nothing-red text-nothing-white":"border border-nothing-gray-700 text-nothing-white hover:border-nothing-gray-600"} ${m?"opacity-50 cursor-not-allowed":""}`,children:[f.jsx(sr,{className:`h-5 w-5 ${h?"fill-current":""}`}),f.jsx("span",{children:m?"...":h?"Liked":"Like"})]}),f.jsx("button",{onClick:$,className:"px-6 py-3 border border-nothing-gray-700 text-nothing-white hover:border-nothing-gray-600 rounded-lg font-semibold flex items-center justify-center space-x-2 transition-colors duration-200",children:f.jsx(iD,{className:"h-5 w-5"})})]}),(e.githubUrl||e.instructions)&&f.jsxs("div",{className:"space-y-3",children:[f.jsx("h3",{className:"text-lg font-semibold text-nothing-white",children:e.githubUrl&&e.instructions?"Links & Instructions":e.githubUrl?"Repository":"Instructions"}),e.githubUrl&&f.jsxs("a",{href:e.githubUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 text-nothing-gray-300 hover:text-nothing-white transition-colors duration-200",children:[f.jsx(bT,{className:"h-5 w-5"}),f.jsx("span",{children:"View on GitHub"}),f.jsx(Xj,{className:"h-4 w-4"})]}),e.instructions&&f.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-4",children:[f.jsx("h4",{className:"text-nothing-white font-medium mb-2",children:"Installation Instructions"}),f.jsx("p",{className:"text-nothing-gray-300 text-sm whitespace-pre-wrap",children:e.instructions})]})]})]})]})}),x&&f.jsx("div",{className:"fixed inset-0 bg-nothing-black/80 flex items-center justify-center z-50 p-4",children:f.jsxs(De.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6 max-w-md w-full",children:[f.jsxs("div",{className:"flex items-start space-x-3 mb-4",children:[f.jsx(Gj,{className:"h-6 w-6 text-yellow-500 flex-shrink-0 mt-0.5"}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-nothing-white mb-2",children:"Download Disclaimer"}),f.jsx("p",{className:"text-nothing-gray-300 text-sm",children:"This APK is shared by the community. GlyphMart does not guarantee the safety or functionality of third-party files. Download and install at your own risk."})]})]}),f.jsxs("div",{className:"flex space-x-3",children:[f.jsx("button",{onClick:Ne,disabled:a,className:"flex-1 bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50",children:a?"Downloading...":"I Understand, Download"}),f.jsx("button",{onClick:()=>E(!1),className:"px-4 py-2 border border-nothing-gray-700 text-nothing-white hover:border-nothing-gray-600 rounded-lg font-medium transition-colors duration-200",children:"Cancel"})]})]})}),j&&F?f.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center p-4",children:f.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-8 max-w-lg w-full",children:[f.jsx("h2",{className:"text-2xl font-bold text-nothing-white mb-6",children:"Edit Glyph"}),f.jsxs("form",{onSubmit:fe,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Title"}),f.jsx("input",{type:"text",name:"title",value:F.title,onChange:L,className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Description"}),f.jsx("textarea",{name:"description",value:F.description,onChange:L,rows:4,className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"APK URL"}),f.jsx("input",{type:"url",name:"apkUrl",value:F.apkUrl,onChange:L,className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"GitHub URL"}),f.jsx("input",{type:"url",name:"githubUrl",value:F.githubUrl,onChange:L,className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Instructions"}),f.jsx("textarea",{name:"instructions",value:F.instructions,onChange:L,rows:2,className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Images"}),f.jsxs("div",{className:"space-y-4",children:[F.images&&F.images.length>0&&f.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:F.images.map((le,ue)=>f.jsx("div",{className:"relative",children:f.jsx("img",{src:fn(le),alt:`Preview ${ue+1}`,className:"w-full h-24 object-cover rounded-lg"})},ue))}),f.jsx("div",{className:"bg-nothing-gray-800 rounded-lg p-4",children:f.jsx(oc,{onFileUpload:J,acceptedTypes:"images",multiple:!0,maxFiles:5})}),f.jsx("div",{className:"text-center text-nothing-gray-400",children:f.jsx("span",{className:"px-3 py-1 bg-nothing-gray-800 rounded",children:"OR"})}),f.jsx("input",{type:"text",name:"images",value:F.images.join(", "),onChange:le=>H(ue=>({...ue,images:le.target.value.split(",").map(ve=>ve.trim())})),className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white",placeholder:"Or enter image URLs separated by commas"})]})]}),Z&&f.jsx("div",{className:"bg-red-900/20 border border-red-700 text-red-400 px-4 py-2 rounded-lg mb-4",children:Z}),f.jsxs("div",{className:"flex space-x-3 mt-6",children:[f.jsx("button",{type:"submit",disabled:O,className:"px-6 py-3 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50",children:O?"Saving...":"Save Changes"}),f.jsx("button",{type:"button",onClick:()=>A(!1),className:"px-6 py-3 bg-nothing-gray-700 hover:bg-nothing-gray-800 text-nothing-white rounded-lg font-medium transition-colors duration-200",children:"Cancel"})]})]})]})}):f.jsx(f.Fragment,{})]}):f.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("h1",{className:"text-2xl font-bold text-nothing-white mb-4",children:"Glyph not found"}),f.jsx(We,{to:"/",className:"text-nothing-red hover:text-red-400",children:"Return to home"})]})})},jO=()=>{const{username:n}=Lx(),[e,t]=R.useState(null),[r,o]=R.useState([]),[a,c]=R.useState(!0),[h,p]=R.useState("latest"),[m,w]=R.useState(""),x=A=>{console.log(A),w(F=>F+`
`+A)};R.useEffect(()=>{n&&(async()=>{try{x("Fetching storefront for username: "+n);const F=await Xe.getUserByUsername(n);x("Found user data: "+JSON.stringify({uid:F.uid,username:F.username,displayName:F.displayName})),t(F),x("Fetching glyphs for creatorId: "+F.uid);const H=await Xe.getGlyphs({creator_id:F.uid,sort:"latest",limit:100});x("Found glyphs: "+H.length),H.length>0?x("First glyph: "+JSON.stringify({id:H[0].id,title:H[0].title,creatorId:H[0].creatorId})):x("No glyphs found for this user. Check if glyphs were created with the correct creatorId."),H.forEach(O=>{O.createdAt&&(O.createdAt=new Date(O.createdAt))}),o(H)}catch(F){x("Error fetching user data: "+F.message),console.error("Error fetching user data:",F)}finally{c(!1)}})()},[n]);const E=()=>{switch(h){case"popular":return[...r].sort((A,F)=>(F.downloads||0)-(A.downloads||0));case"liked":return[...r].sort((A,F)=>(F.likes||0)-(A.likes||0));default:return r}},I=({glyph:A})=>f.jsx(De.div,{whileHover:{y:-5},className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg overflow-hidden hover:border-nothing-gray-700 transition-all duration-300",children:f.jsxs(We,{to:`/glyph/${A.id}`,children:[f.jsxs("div",{className:"aspect-square bg-nothing-gray-800 relative overflow-hidden",children:[A.images&&A.images.length>0?f.jsx("img",{src:fn(A.images[0]),alt:A.title,loading:"lazy",className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"}):f.jsx("div",{className:"w-full h-full flex items-center justify-center",children:f.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center glyph-animation",children:f.jsx(xr,{className:"h-8 w-8 text-nothing-white"})})}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-nothing-black/80 via-transparent to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300",children:f.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:f.jsxs("div",{className:"flex items-center justify-between text-nothing-white text-sm",children:[f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx(os,{className:"h-4 w-4"}),f.jsx("span",{children:A.downloads||0})]}),f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx(sr,{className:"h-4 w-4"}),f.jsx("span",{children:A.likes||0})]})]})})})]}),f.jsxs("div",{className:"p-4",children:[f.jsx("h3",{className:"text-nothing-white font-semibold text-lg mb-2 truncate",children:A.title}),f.jsx("p",{className:"text-nothing-gray-400 text-sm mb-3 line-clamp-2",children:A.description}),f.jsxs("div",{className:"flex items-center justify-between text-nothing-gray-500 text-sm",children:[f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsxs("div",{className:"flex items-center space-x-1",children:[f.jsx(os,{className:"h-3 w-3"}),f.jsx("span",{children:A.downloads||0})]}),f.jsxs("div",{className:"flex items-center space-x-1",children:[f.jsx(Un,{className:"h-3 w-3"}),f.jsx("span",{children:A.views||0})]}),f.jsxs("div",{className:"flex items-center space-x-1",children:[f.jsx(sr,{className:"h-3 w-3"}),f.jsx("span",{children:A.likes||0})]})]}),f.jsx("span",{className:"text-xs",children:A.createdAt?new Date(A.createdAt).toLocaleDateString():"Unknown"})]})]})]})});if(a)return f.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-4 glyph-animation",children:f.jsx(xr,{className:"h-8 w-8 text-nothing-white"})}),f.jsx("p",{className:"text-nothing-gray-400",children:"Loading storefront..."})]})});if(!e)return f.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("h1",{className:"text-2xl font-bold text-nothing-white mb-4",children:"User not found"}),f.jsxs("p",{className:"text-nothing-gray-400 mb-6",children:["The user @",n," does not exist."]}),f.jsx(We,{to:"/",className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-6 py-3 rounded-lg font-medium transition-colors duration-200",children:"Return to home"})]})});const D=r.reduce((A,F)=>A+(F.downloads||0),0),j=r.reduce((A,F)=>A+(F.likes||0),0);return f.jsxs("div",{className:"min-h-screen bg-nothing-black",children:[f.jsxs("div",{className:"bg-nothing-gray-900 border-b border-nothing-gray-800 relative overflow-hidden",children:[e.bannerImage&&f.jsxs("div",{className:"absolute inset-0 w-full h-full",children:[f.jsx("img",{src:fn(e.bannerImage),alt:"Profile banner",className:"w-full h-full object-cover opacity-30"}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-nothing-gray-900 via-nothing-gray-900/80 to-nothing-gray-900/40"})]}),f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 relative z-10",children:f.jsxs(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center",children:[f.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden mx-auto mb-6 border-4 border-nothing-white shadow-lg",children:e.profilePicture?f.jsx("img",{src:fn(e.profilePicture),alt:e.displayName||e.username,loading:"lazy",className:"w-full h-full object-cover"}):f.jsx("div",{className:"w-full h-full bg-nothing-red flex items-center justify-center",children:f.jsx("span",{className:"text-2xl font-bold text-nothing-white",children:e.displayName?.charAt(0).toUpperCase()||e.username?.charAt(0).toUpperCase()})})}),f.jsx("h1",{className:"text-3xl font-bold text-nothing-white mb-2 font-nothing",children:e.username}),f.jsxs("p",{className:"text-nothing-red text-lg mb-4",children:["@",e.username]}),e.bio&&f.jsx("p",{className:"text-nothing-gray-300 max-w-2xl mx-auto mb-6",children:e.bio}),f.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4 text-nothing-gray-400 text-sm mb-6",children:[e.location&&f.jsxs("div",{className:"flex items-center space-x-1",children:[f.jsx(tD,{className:"h-4 w-4"}),f.jsx("span",{children:e.location})]}),e.website&&f.jsxs("a",{href:e.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 hover:text-nothing-white transition-colors duration-200",children:[f.jsx(Zj,{className:"h-4 w-4"}),f.jsx("span",{children:"Website"})]}),f.jsxs("div",{className:"flex items-center space-x-1",children:[f.jsx(rg,{className:"h-4 w-4"}),f.jsxs("span",{children:["Joined ",e.createdAt?new Date(e.createdAt).toLocaleDateString():"Unknown"]})]})]}),f.jsxs("div",{className:"flex items-center justify-center space-x-8",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-2xl font-bold text-nothing-white",children:r.length}),f.jsx("div",{className:"text-nothing-gray-400 text-sm",children:"Glyphs"})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-2xl font-bold text-nothing-white",children:D}),f.jsx("div",{className:"text-nothing-gray-400 text-sm",children:"Downloads"})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-2xl font-bold text-nothing-white",children:j}),f.jsx("div",{className:"text-nothing-gray-400 text-sm",children:"Likes"})]})]})]})})]}),f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[f.jsxs("div",{className:"flex space-x-4 border-b border-nothing-gray-800 mb-8",children:[f.jsx("button",{onClick:()=>p("latest"),className:`px-4 py-3 font-medium border-b-2 transition-colors duration-200 ${h==="latest"?"border-nothing-red text-nothing-red":"border-transparent text-nothing-gray-400 hover:text-nothing-white"}`,children:"Latest"}),f.jsx("button",{onClick:()=>p("popular"),className:`px-4 py-3 font-medium border-b-2 transition-colors duration-200 ${h==="popular"?"border-nothing-red text-nothing-red":"border-transparent text-nothing-gray-400 hover:text-nothing-white"}`,children:"Most Downloaded"}),f.jsx("button",{onClick:()=>p("liked"),className:`px-4 py-3 font-medium border-b-2 transition-colors duration-200 ${h==="liked"?"border-nothing-red text-nothing-red":"border-transparent text-nothing-gray-400 hover:text-nothing-white"}`,children:"Most Liked"})]}),r.length>0?f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:E().map((A,F)=>f.jsx(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:F*.1},children:f.jsx(I,{glyph:A})},A.id))}):f.jsxs("div",{className:"text-center py-12",children:[f.jsx("div",{className:"w-16 h-16 bg-nothing-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:f.jsx(xr,{className:"h-8 w-8 text-nothing-gray-600"})}),f.jsx("h3",{className:"text-nothing-white text-lg font-medium mb-2",children:"No glyphs yet"}),f.jsxs("p",{className:"text-nothing-gray-400",children:[e.username," hasn't shared any glyphs yet."]})]})]}),m&&f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:f.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg p-4",children:[f.jsx("h3",{className:"text-nothing-white font-bold mb-2",children:"Debug Info:"}),f.jsx("pre",{className:"text-nothing-gray-300 text-xs whitespace-pre-wrap overflow-auto",children:m})]})})]})},DO=()=>{const[n,e]=R.useState({title:"",description:"",images:[],apkUrl:"",githubUrl:"",instructions:""}),[t,r]=R.useState([]),[o,a]=R.useState(null),[c,h]=R.useState(!1),[p,m]=R.useState(""),[w,x]=R.useState(""),{currentUser:E,userProfile:I}=Cr(),D=ar(),j=async()=>{try{const Z=await Xe.getGlyphs(),ie=Z.filter(b=>b.creatorId===E.uid),C=`Total glyphs in database: ${Z.length}
My glyphs: ${ie.length}
My UID: ${E.uid}
My username: ${I?.username}
My displayName: ${E.displayName}

My glyphs:
`+ie.map(b=>`- ${b.title} (ID: ${b.id})`).join(`
`);x(C),console.log("Debug info:",C)}catch(Z){console.error("Error checking glyphs:",Z),x("Error checking glyphs: "+Z.message)}};if(!E)return D("/login"),null;const A=Z=>{const{name:ie,value:C}=Z.target;e(b=>({...b,[ie]:C})),m("")},F=(Z,ie)=>{Z?(r(C=>[...C,Z]),e(C=>({...C,images:[...C.images,Z.url]}))):ie&&(r(C=>C.filter(b=>b.id!==ie.id)),e(C=>({...C,images:C.images.filter(b=>b!==ie.url)})))},H=(Z,ie)=>{Z?(a(Z),e(C=>({...C,apkUrl:Z.url}))):ie&&(a(null),e(C=>({...C,apkUrl:""})))},O=()=>{if(!n.title.trim())return m("Title is required"),!1;if(!n.description.trim())return m("Description is required"),!1;if(!n.apkUrl.trim()&&!n.githubUrl.trim())return m("Either APK file or GitHub repository URL is required"),!1;const Z=/^https?:\/\/.+/;return n.githubUrl.trim()&&!Z.test(n.githubUrl)?(m("GitHub URL must be a valid HTTP/HTTPS URL"),!1):!0},Q=async Z=>{if(Z.preventDefault(),h(!0),m(""),!O()){h(!1);return}try{const ie={title:n.title.trim(),description:n.description.trim(),images:n.images,apkUrl:n.apkUrl.trim()||null,githubUrl:n.githubUrl.trim()||null,instructions:n.instructions.trim()||null,creatorId:E.uid,creatorUsername:I?.username,downloads:0,views:0,likes:0,createdAt:new Date};console.log("Creating glyph with data:",ie);const C=await Xe.uploadGlyph(ie);console.log("Glyph created with ID:",C.id),D(`/glyph/${C.id}`)}catch(ie){console.error("Error creating glyph:",ie),m("Failed to upload glyph. Please try again.")}finally{h(!1)}};return f.jsx("div",{className:"min-h-screen bg-nothing-black py-12",children:f.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsxs(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[f.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-6 glyph-animation",children:f.jsx(qp,{className:"h-8 w-8 text-nothing-white"})}),f.jsx("h1",{className:"text-3xl font-bold text-nothing-white font-nothing mb-4",children:"Share Your Glyph"}),f.jsx("p",{className:"text-nothing-gray-400",children:"Upload your custom Nothing Phone(3) glyph and share it with the community"})]}),f.jsx(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-8",children:f.jsxs("form",{onSubmit:Q,className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-nothing-white mb-2",children:"Glyph Title *"}),f.jsx("input",{type:"text",id:"title",name:"title",value:n.title,onChange:A,placeholder:"e.g., Custom Boot Animation Glyph",className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-nothing-white mb-2",children:"Description *"}),f.jsx("textarea",{id:"description",name:"description",value:n.description,onChange:A,rows:4,placeholder:"Describe your glyph, what it does, and any special features...",className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200 resize-vertical",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-nothing-white mb-2",children:"Images (Optional)"}),f.jsx("p",{className:"text-sm text-nothing-gray-400 mb-4",children:"Upload images showcasing your glyph (screenshots, demos, etc.)"}),f.jsx("div",{className:"bg-nothing-gray-800 rounded-lg p-4",children:f.jsx(oc,{onFileUpload:F,acceptedTypes:"images",multiple:!0,maxFiles:5})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-nothing-white mb-2",children:"APK File or Download URL"}),f.jsx("p",{className:"text-sm text-nothing-gray-400 mb-4",children:"Upload an APK file directly or provide a download URL"}),f.jsx("div",{className:"bg-nothing-gray-800 rounded-lg p-4 mb-4",children:f.jsx(oc,{onFileUpload:H,acceptedTypes:"apks",multiple:!1})}),f.jsx("div",{className:"text-center text-nothing-gray-400 mb-4",children:f.jsx("span",{className:"px-3 py-1 bg-nothing-gray-800 rounded",children:"OR"})}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(eD,{className:"h-5 w-5 text-nothing-gray-400"})}),f.jsx("input",{type:"url",id:"apkUrl",name:"apkUrl",value:n.apkUrl,onChange:A,placeholder:"https://github.com/username/repo/releases/download/v1.0/glyph.apk",className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200",disabled:!!o})]}),f.jsx("p",{className:"text-sm text-nothing-gray-400 mt-2",children:o?"APK file uploaded":"Direct link to your APK file (GitHub Releases, Google Drive, etc.)"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"githubUrl",className:"block text-sm font-medium text-nothing-white mb-2",children:"GitHub Repository"}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(bT,{className:"h-5 w-5 text-nothing-gray-400"})}),f.jsx("input",{type:"url",id:"githubUrl",name:"githubUrl",value:n.githubUrl,onChange:A,placeholder:"https://github.com/username/repository",className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200"})]}),f.jsx("p",{className:"text-sm text-nothing-gray-400 mt-2",children:"Link to your GitHub repository with source code"})]}),f.jsx("div",{className:"bg-blue-900/20 border border-blue-700 text-blue-400 px-4 py-3 rounded-lg",children:f.jsxs("div",{className:"flex items-start space-x-3",children:[f.jsx("div",{className:"flex-shrink-0 mt-0.5",children:f.jsx("div",{className:"w-4 h-4 bg-blue-400 rounded-full flex items-center justify-center",children:f.jsx("span",{className:"text-blue-900 text-xs font-bold",children:"!"})})}),f.jsxs("div",{className:"text-sm",children:[f.jsx("p",{className:"font-medium mb-1",children:"Download Requirement"}),f.jsx("p",{children:"You must provide either an APK download URL or a GitHub repository link (or both). Users need a way to access your glyph."})]})]})}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"instructions",className:"block text-sm font-medium text-nothing-white mb-2",children:"Installation Instructions (Optional)"}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute top-3 left-3 pointer-events-none",children:f.jsx(IT,{className:"h-5 w-5 text-nothing-gray-400"})}),f.jsx("textarea",{id:"instructions",name:"instructions",value:n.instructions,onChange:A,rows:4,placeholder:`1. Download the APK file
2. Enable installation from unknown sources
3. Install the APK
4. Open Nothing Glyph Composer...`,className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200 resize-vertical"})]})]}),p&&f.jsxs(De.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-900/20 border border-red-700 text-red-400 px-4 py-3 rounded-lg flex items-start space-x-3",children:[f.jsx(Bp,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),f.jsx("span",{className:"text-sm",children:p})]}),f.jsx("div",{className:"bg-yellow-900/20 border border-yellow-700 text-yellow-400 px-4 py-3 rounded-lg",children:f.jsxs("div",{className:"flex items-start space-x-3",children:[f.jsx(Bp,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),f.jsxs("div",{className:"text-sm",children:[f.jsx("p",{className:"font-medium mb-1",children:"Important Disclaimer"}),f.jsx("p",{children:"By uploading your glyph, you confirm that you own the rights to share this content. GlyphMart is not responsible for the safety or functionality of user-generated content."})]})]})}),f.jsxs("div",{className:"flex justify-end space-x-4",children:[f.jsx("button",{type:"button",onClick:()=>D("/"),className:"px-6 py-3 border border-nothing-gray-700 text-nothing-white hover:border-nothing-gray-600 rounded-lg font-medium transition-colors duration-200",children:"Cancel"}),f.jsx("button",{type:"submit",disabled:c,className:"px-6 py-3 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:c?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-nothing-white"}),f.jsx("span",{children:"Uploading..."})]}):f.jsxs(f.Fragment,{children:[f.jsx(qp,{className:"h-4 w-4"}),f.jsx("span",{children:"Share Glyph"})]})})]})]})}),f.jsxs(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-nothing-gray-900 rounded-lg p-6 border border-nothing-gray-800 mt-6",children:[f.jsx("h2",{className:"text-nothing-white text-lg font-bold mb-4",children:"Debug: Check My Glyphs"}),f.jsx("button",{type:"button",onClick:j,className:"px-4 py-2 bg-nothing-gray-800 hover:bg-nothing-gray-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 mb-4",children:"Check Database"}),w&&f.jsx("div",{className:"bg-nothing-gray-800 rounded-lg p-4",children:f.jsx("pre",{className:"text-nothing-gray-300 text-xs whitespace-pre-wrap overflow-auto",children:w})})]})]})})},VO=()=>{const[n,e]=fb(),[t,r]=R.useState(n.get("q")||""),[o,a]=R.useState([]),[c,h]=R.useState(!1),[p,m]=R.useState("latest"),[w,x]=R.useState("all"),[E,I]=R.useState(!1);R.useEffect(()=>{const F=n.get("q");F&&(r(F),I(!0),D(F))},[n]);const D=async(F,H=p,O=w)=>{if(F.trim()){I(!0),h(!0);try{const Q=await Xe.getGlyphs({search:F,sort:H,limit:100});a(Q)}catch(Q){console.error("Error searching glyphs:",Q),a([])}finally{h(!1)}}},j=F=>{F.preventDefault(),t.trim()&&(e({q:t.trim()}),D(t.trim()))},A=F=>{m(F),t.trim()&&D(t.trim(),F,w)};return f.jsx("div",{className:"min-h-screen bg-nothing-black",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[f.jsx("div",{className:"text-center mb-8",children:f.jsxs(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[f.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-6 glyph-animation",children:f.jsx(zs,{className:"h-8 w-8 text-nothing-white"})}),f.jsx("h1",{className:"text-3xl font-bold text-nothing-white font-nothing mb-4",children:"Search Glyphs"}),f.jsx("p",{className:"text-nothing-gray-400 max-w-2xl mx-auto",children:"Discover custom Nothing Phone(3) glyphs created by the community"})]})}),f.jsx(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"max-w-2xl mx-auto mb-8",children:f.jsxs("form",{onSubmit:j,className:"relative",children:[f.jsx("input",{type:"text",value:t,onChange:F=>r(F.target.value),placeholder:"Search for glyphs, creators, or keywords...",className:"w-full px-6 py-4 pl-14 pr-16 bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200 text-lg"}),f.jsx(zs,{className:"absolute left-4 top-4 h-6 w-6 text-nothing-gray-400"}),f.jsx("button",{type:"submit",className:"absolute right-2 top-2 bottom-2 px-4 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-md font-medium transition-colors duration-200",children:"Search"})]})}),(o.length>0||c)&&f.jsxs(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx("span",{className:"text-nothing-gray-400 text-sm",children:c?"Searching...":`${o.length} results found`}),t&&f.jsxs("span",{className:"text-nothing-white text-sm",children:['for "',f.jsx("span",{className:"text-nothing-red",children:t}),'"']})]}),f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx(Jj,{className:"h-4 w-4 text-nothing-gray-400"}),f.jsx("span",{className:"text-nothing-gray-400 text-sm",children:"Sort by:"})]}),f.jsx("div",{className:"flex space-x-2",children:[{value:"latest",label:"Latest",icon:Hj},{value:"popular",label:"Popular",icon:os},{value:"liked",label:"Most Liked",icon:sr},{value:"viewed",label:"Most Viewed",icon:Un}].map(({value:F,label:H,icon:O})=>f.jsxs("button",{onClick:()=>A(F),className:`flex items-center space-x-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors duration-200 ${p===F?"bg-nothing-red text-nothing-white":"bg-nothing-gray-800 text-nothing-gray-300 hover:bg-nothing-gray-700"}`,children:[f.jsx(O,{className:"h-4 w-4"}),f.jsx("span",{className:"hidden sm:inline",children:H})]},F))})]})]}),c&&f.jsx("div",{className:"flex items-center justify-center py-12",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-4 glyph-animation",children:f.jsx(zs,{className:"h-8 w-8 text-nothing-white"})}),f.jsx("p",{className:"text-nothing-gray-400",children:"Searching glyphs..."})]})}),!c&&o.length>0&&f.jsx(De.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:o.map((F,H)=>f.jsx(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:H*.1},children:f.jsx(Pg,{glyph:F})},F.id))}),!c&&E&&o.length===0&&f.jsxs(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-12",children:[f.jsx("div",{className:"w-16 h-16 bg-nothing-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:f.jsx(zs,{className:"h-8 w-8 text-nothing-gray-600"})}),f.jsx("h3",{className:"text-nothing-white text-lg font-medium mb-2",children:"No results found"}),f.jsx("p",{className:"text-nothing-gray-400 mb-6",children:"Try searching with different keywords or browse all glyphs."}),f.jsx(We,{to:"/",className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-6 py-3 rounded-lg font-medium transition-colors duration-200",children:"Browse All Glyphs"})]}),!c&&!E&&f.jsxs(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-12",children:[f.jsx("div",{className:"w-16 h-16 bg-nothing-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:f.jsx(zs,{className:"h-8 w-8 text-nothing-gray-600"})}),f.jsx("h3",{className:"text-nothing-white text-lg font-medium mb-2",children:"Start searching"}),f.jsx("p",{className:"text-nothing-gray-400 mb-6",children:"Enter a search term to find glyphs, creators, or specific features."}),f.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:["boot animation","notification","charging","custom"].map(F=>f.jsx("button",{onClick:()=>{r(F),e({q:F}),D(F)},className:"px-3 py-1 bg-nothing-gray-800 hover:bg-nothing-gray-700 text-nothing-gray-300 rounded-full text-sm transition-colors duration-200",children:F},F))})]})]})})},LO=()=>{const[n,e]=R.useState([]),[t,r]=R.useState(!0),{currentUser:o}=Cr();return R.useEffect(()=>{(async()=>{if(!o){r(!1);return}try{console.log("Fetching liked glyphs for user:",o.uid);const c=await Xe.getUserLikes();console.log("Retrieved liked glyphs:",c),e(c)}catch(c){console.error("Error fetching liked glyphs:",c)}finally{r(!1)}})()},[o]),o?t?f.jsx("div",{className:"min-h-screen bg-nothing-black text-nothing-white flex items-center justify-center",children:f.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-nothing-red"})}):f.jsx("div",{className:"min-h-screen bg-nothing-black text-nothing-white",children:f.jsxs("div",{className:"container mx-auto px-4 py-8",children:[f.jsxs(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[f.jsxs("h1",{className:"text-4xl font-bold mb-2 flex items-center",children:[f.jsx(sr,{className:"h-8 w-8 mr-3 text-nothing-red fill-current"}),"Liked Posts"]}),f.jsxs("p",{className:"text-nothing-gray-400",children:[n.length," glyph",n.length!==1?"s":""," you've liked"]})]}),n.length>0?f.jsx(De.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:n.map((a,c)=>f.jsx(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:c*.1},className:"group",children:f.jsx(We,{to:`/glyph/${a.id}`,children:f.jsxs("div",{className:"bg-nothing-gray-900 rounded-lg overflow-hidden border border-nothing-gray-800 hover:border-nothing-gray-700 transition-all duration-300 hover:scale-105",children:[f.jsxs("div",{className:"aspect-square bg-nothing-gray-800 relative overflow-hidden",children:[a.images&&a.images.length>0?f.jsx("img",{src:fn(a.images[0]),alt:a.title,loading:"lazy",className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}):f.jsx("div",{className:"w-full h-full flex items-center justify-center",children:f.jsx("div",{className:"text-nothing-gray-500 text-6xl",children:"📱"})}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-nothing-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:f.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:f.jsxs("div",{className:"flex items-center justify-between text-nothing-white text-sm",children:[f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx(os,{className:"h-4 w-4"}),f.jsx("span",{children:a.downloads||0})]}),f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx(Un,{className:"h-4 w-4"}),f.jsx("span",{children:a.views||0})]}),f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx(sr,{className:"h-4 w-4 fill-current text-nothing-red"}),f.jsx("span",{children:a.likes||0})]})]})})})]}),f.jsxs("div",{className:"p-4",children:[f.jsx("h3",{className:"font-semibold text-nothing-white mb-2 line-clamp-2",children:a.title}),f.jsx("p",{className:"text-nothing-gray-400 text-sm mb-3 line-clamp-2",children:a.description}),f.jsxs("div",{className:"flex items-center justify-between text-xs text-nothing-gray-500",children:[f.jsxs("div",{className:"flex items-center space-x-1",children:[f.jsx($i,{className:"h-3 w-3"}),f.jsx("span",{children:a.creatorUsername})]}),f.jsxs("div",{className:"flex items-center space-x-1",children:[f.jsx(rg,{className:"h-3 w-3"}),f.jsx("span",{children:a.createdAt?.toDate?a.createdAt.toDate().toLocaleDateString():new Date(a.createdAt).toLocaleDateString()})]})]})]})]})})},a.id))}):f.jsxs(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"text-center py-16",children:[f.jsx(sr,{className:"h-16 w-16 mx-auto mb-4 text-nothing-gray-600"}),f.jsx("h2",{className:"text-2xl font-bold mb-2 text-nothing-gray-400",children:"No liked posts yet"}),f.jsx("p",{className:"text-nothing-gray-500 mb-6",children:"Start exploring glyphs and like the ones you love!"}),f.jsx(We,{to:"/",className:"bg-nothing-red text-nothing-white px-6 py-3 rounded-lg font-semibold hover:bg-red-600 transition-colors duration-200",children:"Explore Glyphs"})]})]})}):f.jsx("div",{className:"min-h-screen bg-nothing-black text-nothing-white flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Please log in to view your liked posts"}),f.jsx(We,{to:"/login",className:"bg-nothing-red text-nothing-white px-6 py-3 rounded-lg font-semibold hover:bg-red-600 transition-colors duration-200",children:"Log In"})]})})},OO=()=>{const{currentUser:n,userProfile:e,logout:t}=Cr(),r=ar(),[o,a]=R.useState({displayName:"",username:"",email:"",bio:"",profilePicture:"",bannerImage:""}),[c,h]=R.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[p,m]=R.useState(!1),[w,x]=R.useState(!1),[E,I]=R.useState(!1),[D,j]=R.useState(!1),[A,F]=R.useState(""),[H,O]=R.useState(""),[Q,Z]=R.useState("profile"),[ie,C]=R.useState(""),[b,P]=R.useState(!1),[V,U]=R.useState(null),[z,N]=R.useState(null);R.useEffect(()=>{n&&e&&a({displayName:n.displayName||"",username:e.username||"",email:n.email||"",bio:e.bio||"",profilePicture:e.profilePicture||n.photoURL||"",bannerImage:e.bannerImage||""})},[n,e]);const be=async $=>{$.preventDefault(),j(!0),O(""),F("");try{o.displayName!==n.displayName&&await Sp(n,{displayName:o.displayName}),o.profilePicture!==n.photoURL&&await Sp(n,{photoURL:o.profilePicture}),o.email!==n.email&&await HA(n,o.email),await Xe.updateUser({username:o.username,displayName:o.displayName,bio:o.bio,profilePicture:o.profilePicture,bannerImage:o.bannerImage,updatedAt:new Date}),F("Profile updated successfully!")}catch(X){console.error("Error updating profile:",X),X.code==="auth/requires-recent-login"?O("Please log out and log back in before updating your email."):O("Failed to update profile: "+X.message)}finally{j(!1)}},$e=($,X)=>{$?(U($),a(L=>({...L,profilePicture:$.url}))):X&&(U(null),a(L=>({...L,profilePicture:""})))},Re=($,X)=>{$?(N($),a(L=>({...L,bannerImage:$.url}))):X&&(N(null),a(L=>({...L,bannerImage:""})))},Ne=async $=>{if($.preventDefault(),j(!0),O(""),F(""),c.newPassword!==c.confirmPassword){O("New passwords do not match"),j(!1);return}if(c.newPassword.length<6){O("Password must be at least 6 characters long"),j(!1);return}try{const X=Ys.credential(n.email,c.currentPassword);await vv(n,X),await WA(n,c.newPassword),F("Password updated successfully!"),h({currentPassword:"",newPassword:"",confirmPassword:""})}catch(X){console.error("Error updating password:",X),X.code==="auth/wrong-password"?O("Current password is incorrect"):O("Failed to update password: "+X.message)}finally{j(!1)}},oe=async()=>{O(""),F(""),P(!0);try{if(!ie){O("Please enter your current password to confirm deletion."),P(!1);return}const $=Ys.credential(n.email,ie);await vv(n,$),await Xe.deleteUserData(),await n.delete(),F("Account and all glyphs deleted successfully."),t(),r("/")}catch($){O("Failed to delete account: "+($.message||$.code))}finally{P(!1)}};return n?f.jsx("div",{className:"min-h-screen bg-nothing-black text-nothing-white",children:f.jsxs("div",{className:"container mx-auto px-4 py-8",children:[f.jsxs(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[f.jsxs("h1",{className:"text-4xl font-bold mb-2 flex items-center",children:[f.jsx($p,{className:"h-8 w-8 mr-3 text-nothing-red"}),"Settings"]}),f.jsx("p",{className:"text-nothing-gray-400",children:"Manage your account and preferences"})]}),A&&f.jsxs(De.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-green-900/20 border border-green-700 text-green-400 px-4 py-3 rounded-lg mb-6 flex items-center",children:[f.jsx(Qj,{className:"h-5 w-5 mr-2"}),A]}),H&&f.jsxs(De.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-900/20 border border-red-700 text-red-400 px-4 py-3 rounded-lg mb-6 flex items-center",children:[f.jsx(Bp,{className:"h-5 w-5 mr-2"}),H]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[f.jsx(De.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},className:"lg:col-span-1",children:f.jsx("div",{className:"bg-nothing-gray-900 rounded-lg p-6 border border-nothing-gray-800",children:f.jsxs("nav",{className:"space-y-2",children:[f.jsxs("button",{onClick:()=>Z("profile"),className:`w-full text-left px-4 py-3 rounded-lg font-medium transition-colors duration-200 flex items-center space-x-3 ${Q==="profile"?"bg-nothing-red text-nothing-white":"text-nothing-gray-400 hover:text-nothing-white hover:bg-nothing-gray-800"}`,children:[f.jsx($i,{className:"h-5 w-5"}),f.jsx("span",{children:"Profile"})]}),f.jsxs("button",{onClick:()=>Z("security"),className:`w-full text-left px-4 py-3 rounded-lg font-medium transition-colors duration-200 flex items-center space-x-3 ${Q==="security"?"bg-nothing-red text-nothing-white":"text-nothing-gray-400 hover:text-nothing-white hover:bg-nothing-gray-800"}`,children:[f.jsx(Bs,{className:"h-5 w-5"}),f.jsx("span",{children:"Security"})]})]})})}),f.jsxs(De.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5},className:"lg:col-span-3",children:[Q==="profile"&&f.jsxs("div",{className:"bg-nothing-gray-900 rounded-lg p-6 border border-nothing-gray-800",children:[f.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Profile Information"}),f.jsxs("form",{onSubmit:be,className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Banner Image"}),f.jsxs("div",{className:"space-y-4",children:[f.jsx("div",{className:"w-full h-32 bg-nothing-gray-800 rounded-lg border border-nothing-gray-700 overflow-hidden",children:o.bannerImage?f.jsx("img",{src:fn(o.bannerImage),alt:"Banner preview",className:"w-full h-full object-cover"}):f.jsx("div",{className:"w-full h-full flex items-center justify-center",children:f.jsx(zp,{className:"h-8 w-8 text-nothing-gray-600"})})}),f.jsx("div",{className:"bg-nothing-gray-800 rounded-lg p-4",children:f.jsx(oc,{onFileUpload:Re,acceptedTypes:"profile",multiple:!1})}),f.jsx("div",{className:"text-center text-nothing-gray-400",children:f.jsx("span",{className:"px-3 py-1 bg-nothing-gray-800 rounded",children:"OR"})}),f.jsxs("div",{className:"relative",children:[f.jsx(zp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),f.jsx("input",{type:"url",value:o.bannerImage,onChange:$=>a(X=>({...X,bannerImage:$.target.value})),className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"https://example.com/banner-image.jpg",disabled:!!z}),z&&f.jsx("p",{className:"text-sm text-nothing-gray-400 mt-2",children:"Banner image uploaded"})]})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Profile Picture"}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx("div",{className:"w-20 h-20 bg-nothing-gray-800 rounded-full border border-nothing-gray-700 overflow-hidden flex-shrink-0",children:o.profilePicture?f.jsx("img",{src:fn(o.profilePicture),alt:"Profile preview",className:"w-full h-full object-cover"}):f.jsx("div",{className:"w-full h-full flex items-center justify-center",children:f.jsx($i,{className:"h-8 w-8 text-nothing-gray-600"})})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:"text-sm text-nothing-gray-300",children:"Upload a new profile picture"}),f.jsx("p",{className:"text-xs text-nothing-gray-500",children:"Recommended: 400x400px or larger"})]})]}),f.jsx("div",{className:"bg-nothing-gray-800 rounded-lg p-4",children:f.jsx(oc,{onFileUpload:$e,acceptedTypes:"profile",multiple:!1})}),f.jsx("div",{className:"text-center text-nothing-gray-400",children:f.jsx("span",{className:"px-3 py-1 bg-nothing-gray-800 rounded",children:"OR"})}),f.jsxs("div",{className:"relative",children:[f.jsx(Kj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),f.jsx("input",{type:"url",value:o.profilePicture,onChange:$=>a(X=>({...X,profilePicture:$.target.value})),className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"https://example.com/profile-picture.jpg",disabled:!!V}),V&&f.jsx("p",{className:"text-sm text-nothing-gray-400 mt-2",children:"Profile picture uploaded"})]})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Display Name"}),f.jsxs("div",{className:"relative",children:[f.jsx($i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),f.jsx("input",{type:"text",value:o.displayName,onChange:$=>a(X=>({...X,displayName:$.target.value})),className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"Your display name"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Username"}),f.jsx("input",{type:"text",value:o.username,onChange:$=>a(X=>({...X,username:$.target.value})),className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"Your username"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Email Address"}),f.jsxs("div",{className:"relative",children:[f.jsx(sg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),f.jsx("input",{type:"email",value:o.email,onChange:$=>a(X=>({...X,email:$.target.value})),className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"your@email.com"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Bio"}),f.jsx("textarea",{value:o.bio,onChange:$=>a(X=>({...X,bio:$.target.value})),rows:4,className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent resize-none",placeholder:"Tell us about yourself..."})]}),f.jsx("button",{type:"submit",disabled:D,className:"w-full md:w-auto px-6 py-3 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:D?f.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-nothing-white"}):f.jsxs(f.Fragment,{children:[f.jsx(Ew,{className:"h-5 w-5"}),f.jsx("span",{children:"Save Changes"})]})})]})]}),Q==="security"&&f.jsxs("div",{className:"space-y-8",children:[f.jsxs("div",{className:"bg-nothing-gray-900 rounded-lg p-6 border border-nothing-gray-800",children:[f.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Change Password"}),f.jsxs("form",{onSubmit:Ne,className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Current Password"}),f.jsxs("div",{className:"relative",children:[f.jsx(Bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),f.jsx("input",{type:p?"text":"password",value:c.currentPassword,onChange:$=>h(X=>({...X,currentPassword:$.target.value})),className:"w-full pl-10 pr-12 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"Enter current password"}),f.jsx("button",{type:"button",onClick:()=>m(!p),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-nothing-gray-500 hover:text-nothing-white",children:p?f.jsx(fa,{className:"h-5 w-5"}):f.jsx(Un,{className:"h-5 w-5"})})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"New Password"}),f.jsxs("div",{className:"relative",children:[f.jsx(Bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),f.jsx("input",{type:w?"text":"password",value:c.newPassword,onChange:$=>h(X=>({...X,newPassword:$.target.value})),className:"w-full pl-10 pr-12 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"Enter new password"}),f.jsx("button",{type:"button",onClick:()=>x(!w),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-nothing-gray-500 hover:text-nothing-white",children:w?f.jsx(fa,{className:"h-5 w-5"}):f.jsx(Un,{className:"h-5 w-5"})})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Confirm New Password"}),f.jsxs("div",{className:"relative",children:[f.jsx(Bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),f.jsx("input",{type:E?"text":"password",value:c.confirmPassword,onChange:$=>h(X=>({...X,confirmPassword:$.target.value})),className:"w-full pl-10 pr-12 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"Confirm new password"}),f.jsx("button",{type:"button",onClick:()=>I(!E),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-nothing-gray-500 hover:text-nothing-white",children:E?f.jsx(fa,{className:"h-5 w-5"}):f.jsx(Un,{className:"h-5 w-5"})})]})]}),f.jsx("button",{type:"submit",disabled:D,className:"w-full md:w-auto px-6 py-3 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:D?f.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-nothing-white"}):f.jsxs(f.Fragment,{children:[f.jsx(Ew,{className:"h-5 w-5"}),f.jsx("span",{children:"Update Password"})]})})]})]}),f.jsxs("div",{className:"bg-red-900/10 border border-red-700/30 rounded-lg p-6",children:[f.jsx("h2",{className:"text-2xl font-bold mb-4 text-red-400",children:"Danger Zone"}),f.jsx("p",{className:"text-nothing-gray-400 mb-6",children:"Once you delete your account, there is no going back. This will permanently delete all your glyphs and data. Please be certain."}),f.jsxs("form",{onSubmit:$=>{$.preventDefault(),oe()},className:"space-y-4",children:[f.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Current Password"}),f.jsxs("div",{className:"relative mb-4",children:[f.jsx(Bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),f.jsx("input",{type:"password",value:ie,onChange:$=>C($.target.value),className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"Enter your current password",required:!0})]}),f.jsx("button",{type:"submit",disabled:b,className:"px-6 py-3 bg-red-600 hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:b?"Deleting...":"Delete Account"})]})]})]})]})]})]})}):(r("/login"),null)},MO=()=>{const{currentUser:n,userProfile:e}=Cr(),t=ar(),[r,o]=R.useState({totalUsers:0,totalGlyphs:0,totalDownloads:0,totalViews:0,totalLikes:0,totalAdmins:0,uniqueViewers:0,uniqueDownloaders:0,topGlyphs:[]}),[a,c]=R.useState([]),[h,p]=R.useState(""),[m,w]=R.useState([]),[x,E]=R.useState(null),[I,D]=R.useState(!1),[j,A]=R.useState([]),[F,H]=R.useState(null),[O,Q]=R.useState(""),[Z,ie]=R.useState([]),[C,b]=R.useState(!0),[P,V]=R.useState(!1),[U,z]=R.useState("stats"),N=n?.uid==="9H3pw5zS6GRDFTZaoYspEmruORj2"||e?.isAdmin===!0;R.useEffect(()=>{if(!n){t("/login");return}if(!N){t("/");return}be()},[n,N,t]);const be=async()=>{try{b(!0);const[$,X,L]=await Promise.all([Xe.getAdminStats(),Xe.getAllUsers(),Xe.getGlyphs({limit:1e3})]);o($),c(X),w(X),A(L);const J=X.filter(fe=>fe.uid==="9H3pw5zS6GRDFTZaoYspEmruORj2"||fe.isAdmin);ie(J)}catch($){console.error("Error loading admin data:",$)}finally{b(!1)}},$e=$=>{if(p($),!$.trim())w(a);else{const X=a.filter(L=>L.username?.toLowerCase().includes($.toLowerCase())||L.displayName?.toLowerCase().includes($.toLowerCase())||L.email?.toLowerCase().includes($.toLowerCase()));w(X)}},Re=async $=>{try{V(!0),await Xe.makeUserAdmin($),be(),alert("User promoted to admin successfully!")}catch(X){console.error("Error making user admin:",X),alert("Failed to promote user to admin")}finally{V(!1)}},Ne=async()=>{if(O.trim())try{V(!0),await Xe.addAdminByEmail(O),Q(""),be(),alert("Admin added successfully!")}catch($){console.error("Error adding admin:",$),alert("Failed to add admin: "+$.message)}finally{V(!1)}},oe=async $=>{if(confirm("Are you sure you want to delete this glyph?"))try{V(!0),await Xe.adminDeleteGlyph($),A(X=>X.filter(L=>L.id!==$)),alert("Glyph deleted successfully!")}catch(X){console.error("Error deleting glyph:",X),alert("Failed to delete glyph")}finally{V(!1)}};return C?f.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-4 glyph-animation",children:f.jsx(sa,{className:"h-8 w-8 text-nothing-white"})}),f.jsx("p",{className:"text-nothing-gray-400",children:"Loading admin panel..."})]})}):N?f.jsx("div",{className:"min-h-screen bg-nothing-black text-nothing-white",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[f.jsxs(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[f.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[f.jsx(sa,{className:"h-8 w-8 text-nothing-red"}),f.jsx("h1",{className:"text-4xl font-bold font-nothing",children:"Admin Panel"})]}),f.jsxs("p",{className:"text-nothing-gray-400",children:["Welcome back, ",e?.displayName||n?.displayName,". Manage your GlyphMart platform."]})]}),f.jsx("div",{className:"border-b border-nothing-gray-800 mb-8",children:f.jsx("nav",{className:"flex space-x-8",children:[{id:"stats",label:"Statistics",icon:xw},{id:"users",label:"Users",icon:Sw},{id:"glyphs",label:"Glyphs",icon:Jf},{id:"admins",label:"Admins",icon:oD}].map(({id:$,label:X,icon:L})=>f.jsxs("button",{onClick:()=>z($),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors duration-200 ${U===$?"border-nothing-red text-nothing-red":"border-transparent text-nothing-gray-400 hover:text-nothing-white hover:border-nothing-gray-600"}`,children:[f.jsx(L,{className:"h-4 w-4"}),f.jsx("span",{children:X})]},$))})}),f.jsxs(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[U==="stats"&&f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[f.jsx("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-nothing-gray-400 text-sm",children:"Total Users"}),f.jsx("p",{className:"text-3xl font-bold text-nothing-white",children:r.totalUsers})]}),f.jsx(Sw,{className:"h-8 w-8 text-blue-500"})]})}),f.jsx("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-nothing-gray-400 text-sm",children:"Total Glyphs"}),f.jsx("p",{className:"text-3xl font-bold text-nothing-white",children:r.totalGlyphs})]}),f.jsx(Jf,{className:"h-8 w-8 text-green-500"})]})}),f.jsx("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-nothing-gray-400 text-sm",children:"Unique Downloads"}),f.jsx("p",{className:"text-3xl font-bold text-nothing-white",children:r.uniqueDownloaders})]}),f.jsx(os,{className:"h-8 w-8 text-purple-500"})]})}),f.jsx("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-nothing-gray-400 text-sm",children:"Unique Views"}),f.jsx("p",{className:"text-3xl font-bold text-nothing-white",children:r.uniqueViewers})]}),f.jsx(Un,{className:"h-8 w-8 text-orange-500"})]})})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h3",{className:"text-lg font-semibold text-nothing-white",children:"Additional Metrics"}),f.jsx(PT,{className:"h-6 w-6 text-nothing-red"})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-nothing-gray-400",children:"Total Likes"}),f.jsx("span",{className:"text-nothing-white font-semibold",children:r.totalLikes})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-nothing-gray-400",children:"Active Admins"}),f.jsx("span",{className:"text-nothing-white font-semibold",children:r.totalAdmins})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-nothing-gray-400",children:"Avg Unique Downloads/Glyph"}),f.jsx("span",{className:"text-nothing-white font-semibold",children:(r.totalGlyphs||0)>0?Math.round((r.uniqueDownloaders||0)/r.totalGlyphs):0})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-nothing-gray-400",children:"Avg Unique Views/Glyph"}),f.jsx("span",{className:"text-nothing-white font-semibold",children:(r.totalGlyphs||0)>0?Math.round((r.uniqueViewers||0)/r.totalGlyphs):0})]})]})]}),f.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h3",{className:"text-lg font-semibold text-nothing-white",children:"Top Performing Glyphs"}),f.jsx(xw,{className:"h-6 w-6 text-nothing-red"})]}),f.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:[(r.topGlyphs||[]).slice(0,5).map(($,X)=>f.jsxs("div",{className:"flex items-center justify-between p-2 bg-nothing-gray-800 rounded",children:[f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsxs("span",{className:"text-nothing-red font-bold text-sm",children:["#",X+1]}),f.jsx("span",{className:"text-nothing-white text-sm truncate max-w-32",title:$.title,children:$.title})]}),f.jsxs("div",{className:"flex items-center space-x-3 text-xs text-nothing-gray-400",children:[f.jsxs("span",{children:[$.views,"v"]}),f.jsxs("span",{children:[$.downloads,"d"]}),f.jsxs("span",{children:[$.likes,"♥"]})]})]},$.id)),(!r.topGlyphs||r.topGlyphs.length===0)&&f.jsx("div",{className:"text-center text-nothing-gray-400 py-4",children:f.jsx("p",{children:"No glyph data available yet"})})]})]})]}),f.jsx("div",{className:"bg-yellow-900/20 border border-yellow-700/50 rounded-lg p-4",children:f.jsxs("div",{className:"flex items-start space-x-3",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx("svg",{className:"w-5 h-5 text-yellow-500 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-yellow-500 font-medium text-sm",children:"Known Issues"}),f.jsx("p",{className:"text-yellow-200/80 text-sm mt-1",children:"Additional metrics and top performing glyphs are currently broken and may not display accurate data."})]})]})})]}),U==="users"&&f.jsxs("div",{className:"space-y-6",children:[f.jsx("div",{className:"flex items-center space-x-4",children:f.jsxs("div",{className:"relative flex-1",children:[f.jsx(zs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-400"}),f.jsx("input",{type:"text",placeholder:"Search users by username, name, or email...",value:h,onChange:$=>$e($.target.value),className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent"})]})}),f.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg overflow-hidden",children:[f.jsx("div",{className:"px-6 py-4 border-b border-nothing-gray-800",children:f.jsxs("h3",{className:"text-lg font-semibold",children:["Users (",(m||[]).length,")"]})}),f.jsx("div",{className:"max-h-96 overflow-y-auto",children:(m||[]).map($=>f.jsx("div",{className:"px-6 py-4 border-b border-nothing-gray-800 last:border-b-0 hover:bg-nothing-gray-800 transition-colors duration-200",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border border-nothing-gray-600",children:$.profilePicture?f.jsx("img",{src:fn($.profilePicture),alt:$.displayName,loading:"lazy",className:"w-full h-full object-cover"}):f.jsx("div",{className:"w-full h-full bg-nothing-red flex items-center justify-center",children:f.jsx("span",{className:"text-sm font-bold text-nothing-white",children:$.displayName?.charAt(0)?.toUpperCase()||$.username?.charAt(0)?.toUpperCase()||"U"})})}),f.jsxs("div",{children:[f.jsxs("p",{className:"font-semibold text-nothing-white",children:[$.displayName||$.username,($.uid==="9H3pw5zS6GRDFTZaoYspEmruORj2"||$.isAdmin)&&f.jsx(sa,{className:"inline h-4 w-4 ml-2 text-nothing-red"})]}),f.jsxs("p",{className:"text-sm text-nothing-gray-400",children:["@",$.username]}),f.jsx("p",{className:"text-xs text-nothing-gray-500",children:$.email})]})]}),f.jsxs("div",{className:"flex items-center space-x-2",children:[!$.isAdmin&&$.uid!=="9H3pw5zS6GRDFTZaoYspEmruORj2"&&f.jsx("button",{onClick:()=>Re($.uid),disabled:P,className:"px-3 py-1 bg-nothing-red hover:bg-red-700 text-nothing-white text-sm rounded transition-colors duration-200 disabled:opacity-50",children:"Make Admin"}),f.jsx("button",{onClick:()=>E($),className:"p-2 text-nothing-gray-400 hover:text-nothing-white transition-colors duration-200",children:f.jsx(rD,{className:"h-4 w-4"})})]})]})},$.uid))})]})]}),U==="glyphs"&&f.jsx("div",{className:"space-y-6",children:f.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg overflow-hidden",children:[f.jsx("div",{className:"px-6 py-4 border-b border-nothing-gray-800",children:f.jsxs("h3",{className:"text-lg font-semibold",children:["All Glyphs (",(j||[]).length,")"]})}),f.jsx("div",{className:"max-h-96 overflow-y-auto",children:(j||[]).map($=>f.jsx("div",{className:"px-6 py-4 border-b border-nothing-gray-800 last:border-b-0 hover:bg-nothing-gray-800 transition-colors duration-200",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx("div",{className:"w-12 h-12 rounded-lg overflow-hidden border border-nothing-gray-600",children:$.images&&$.images.length>0?f.jsx("img",{src:fn($.images[0]),alt:$.title,loading:"lazy",className:"w-full h-full object-cover"}):f.jsx("div",{className:"w-full h-full bg-nothing-gray-700 flex items-center justify-center",children:f.jsx(Jf,{className:"h-6 w-6 text-nothing-gray-500"})})}),f.jsxs("div",{children:[f.jsx("p",{className:"font-semibold text-nothing-white",children:$.title}),f.jsxs("p",{className:"text-sm text-nothing-gray-400",children:["by @",$.creatorUsername]}),f.jsxs("p",{className:"text-xs text-nothing-gray-500",children:[$.downloads||0," downloads • ",$.views||0," views • ",$.likes||0," likes"]})]})]}),f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx("button",{onClick:()=>t(`/glyph/${$.id}`),className:"px-3 py-1 bg-nothing-gray-700 hover:bg-nothing-gray-600 text-nothing-white text-sm rounded transition-colors duration-200",children:"View"}),f.jsx("button",{onClick:()=>oe($.id),disabled:P,className:"p-2 text-red-400 hover:text-red-300 transition-colors duration-200 disabled:opacity-50",children:f.jsx(aD,{className:"h-4 w-4"})})]})]})},$.id))})]})}),U==="admins"&&f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6",children:[f.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add New Admin"}),f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx("input",{type:"email",placeholder:"Enter email address",value:O,onChange:$=>Q($.target.value),className:"flex-1 px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent"}),f.jsxs("button",{onClick:Ne,disabled:P||!O.trim(),className:"px-6 py-3 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 flex items-center space-x-2",children:[f.jsx(lD,{className:"h-4 w-4"}),f.jsx("span",{children:"Add Admin"})]})]})]}),f.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg overflow-hidden",children:[f.jsx("div",{className:"px-6 py-4 border-b border-nothing-gray-800",children:f.jsxs("h3",{className:"text-lg font-semibold",children:["Current Admins (",Z.length,")"]})}),f.jsx("div",{children:Z.map($=>f.jsx("div",{className:"px-6 py-4 border-b border-nothing-gray-800 last:border-b-0",children:f.jsx("div",{className:"flex items-center justify-between",children:f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border border-nothing-gray-600",children:$.profilePicture?f.jsx("img",{src:fn($.profilePicture),alt:$.displayName,loading:"lazy",className:"w-full h-full object-cover"}):f.jsx("div",{className:"w-full h-full bg-nothing-red flex items-center justify-center",children:f.jsx("span",{className:"text-sm font-bold text-nothing-white",children:$.displayName?.charAt(0)?.toUpperCase()||$.username?.charAt(0)?.toUpperCase()||"A"})})}),f.jsxs("div",{children:[f.jsxs("p",{className:"font-semibold text-nothing-white flex items-center",children:[$.displayName||$.username,f.jsx(sa,{className:"h-4 w-4 ml-2 text-nothing-red"}),$.uid==="9H3pw5zS6GRDFTZaoYspEmruORj2"&&f.jsx("span",{className:"ml-2 px-2 py-1 bg-nothing-red text-nothing-white text-xs rounded",children:"Super Admin"})]}),f.jsxs("p",{className:"text-sm text-nothing-gray-400",children:["@",$.username]}),f.jsx("p",{className:"text-xs text-nothing-gray-500",children:$.email})]})]})})},$.uid))})]})]})]},U)]})}):f.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("h1",{className:"text-2xl font-bold text-red-500 mb-4",children:"Access Denied"}),f.jsx("p",{className:"text-nothing-gray-400 mb-6",children:"You don't have permission to access the admin panel."}),f.jsx("button",{onClick:()=>t("/"),className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-6 py-3 rounded-lg font-medium transition-colors duration-200",children:"Return to Home"})]})})},Ku=({children:n})=>{const{currentUser:e}=Cr();return e?n:f.jsx(Bx,{to:"/login"})},Ax=({children:n})=>{const{currentUser:e}=Cr();return e?f.jsx(Bx,{to:"/"}):n};function UO(){return f.jsx(zj,{children:f.jsx(cb,{children:f.jsxs("div",{className:"App",children:[f.jsx(AO,{}),f.jsxs(tb,{children:[f.jsx(tr,{path:"/",element:f.jsx(kO,{})}),f.jsx(tr,{path:"/login",element:f.jsx(Ax,{children:f.jsx(NO,{})})}),f.jsx(tr,{path:"/signup",element:f.jsx(Ax,{children:f.jsx(CO,{})})}),f.jsx(tr,{path:"/glyph/:id",element:f.jsx(RO,{})}),f.jsx(tr,{path:"/storefront/:username",element:f.jsx(jO,{})}),f.jsx(tr,{path:"/upload",element:f.jsx(Ku,{children:f.jsx(DO,{})})}),f.jsx(tr,{path:"/search",element:f.jsx(VO,{})}),f.jsx(tr,{path:"/liked",element:f.jsx(Ku,{children:f.jsx(LO,{})})}),f.jsx(tr,{path:"/settings",element:f.jsx(Ku,{children:f.jsx(OO,{})})}),f.jsx(tr,{path:"/admin",element:f.jsx(Ku,{children:f.jsx(MO,{})})})]})]})})})}uI.createRoot(document.getElementById("root")).render(f.jsx(R.StrictMode,{children:f.jsx(UO,{})}));
