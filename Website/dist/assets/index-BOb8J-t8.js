function GS(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in n)){const a=Object.getOwnPropertyDescriptor(r,o);a&&Object.defineProperty(n,o,a.get?a:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function KS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var bf={exports:{}},El={},Af={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kv;function QS(){if(kv)return je;kv=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),_=Symbol.iterator;function E(L){return L===null||typeof L!="object"?null:(L=_&&L[_]||L["@@iterator"],typeof L=="function"?L:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,C={};function A(L,Y,ge){this.props=L,this.context=Y,this.refs=C,this.updater=ge||S}A.prototype.isReactComponent={},A.prototype.setState=function(L,Y){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,Y,"setState")},A.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function z(){}z.prototype=A.prototype;function H(L,Y,ge){this.props=L,this.context=Y,this.refs=C,this.updater=ge||S}var M=H.prototype=new z;M.constructor=H,D(M,A.prototype),M.isPureReactComponent=!0;var Q=Array.isArray,te=Object.prototype.hasOwnProperty,se={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function P(L,Y,ge){var le,ce={},ve=null,Ne=null;if(Y!=null)for(le in Y.ref!==void 0&&(Ne=Y.ref),Y.key!==void 0&&(ve=""+Y.key),Y)te.call(Y,le)&&!R.hasOwnProperty(le)&&(ce[le]=Y[le]);var Be=arguments.length-2;if(Be===1)ce.children=ge;else if(1<Be){for(var He=Array(Be),it=0;it<Be;it++)He[it]=arguments[it+2];ce.children=He}if(L&&L.defaultProps)for(le in Be=L.defaultProps,Be)ce[le]===void 0&&(ce[le]=Be[le]);return{$$typeof:n,type:L,key:ve,ref:Ne,props:ce,_owner:se.current}}function b(L,Y){return{$$typeof:n,type:L.type,key:Y,ref:L.ref,props:L.props,_owner:L._owner}}function V(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function F(L){var Y={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ge){return Y[ge]})}var B=/\/+/g;function N(L,Y){return typeof L=="object"&&L!==null&&L.key!=null?F(""+L.key):Y.toString(36)}function ke(L,Y,ge,le,ce){var ve=typeof L;(ve==="undefined"||ve==="boolean")&&(L=null);var Ne=!1;if(L===null)Ne=!0;else switch(ve){case"string":case"number":Ne=!0;break;case"object":switch(L.$$typeof){case n:case e:Ne=!0}}if(Ne)return Ne=L,ce=ce(Ne),L=le===""?"."+N(Ne,0):le,Q(ce)?(ge="",L!=null&&(ge=L.replace(B,"$&/")+"/"),ke(ce,Y,ge,"",function(it){return it})):ce!=null&&(V(ce)&&(ce=b(ce,ge+(!ce.key||Ne&&Ne.key===ce.key?"":(""+ce.key).replace(B,"$&/")+"/")+L)),Y.push(ce)),1;if(Ne=0,le=le===""?".":le+":",Q(L))for(var Be=0;Be<L.length;Be++){ve=L[Be];var He=le+N(ve,Be);Ne+=ke(ve,Y,ge,He,ce)}else if(He=E(L),typeof He=="function")for(L=He.call(L),Be=0;!(ve=L.next()).done;)ve=ve.value,He=le+N(ve,Be++),Ne+=ke(ve,Y,ge,He,ce);else if(ve==="object")throw Y=String(L),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return Ne}function qe(L,Y,ge){if(L==null)return L;var le=[],ce=0;return ke(L,le,"","",function(ve){return Y.call(ge,ve,ce++)}),le}function Re(L){if(L._status===-1){var Y=L._result;Y=Y(),Y.then(function(ge){(L._status===0||L._status===-1)&&(L._status=1,L._result=ge)},function(ge){(L._status===0||L._status===-1)&&(L._status=2,L._result=ge)}),L._status===-1&&(L._status=0,L._result=Y)}if(L._status===1)return L._result.default;throw L._result}var Ce={current:null},ae={transition:null},Z={ReactCurrentDispatcher:Ce,ReactCurrentBatchConfig:ae,ReactCurrentOwner:se};function X(){throw Error("act(...) is not supported in production builds of React.")}return je.Children={map:qe,forEach:function(L,Y,ge){qe(L,function(){Y.apply(this,arguments)},ge)},count:function(L){var Y=0;return qe(L,function(){Y++}),Y},toArray:function(L){return qe(L,function(Y){return Y})||[]},only:function(L){if(!V(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},je.Component=A,je.Fragment=t,je.Profiler=o,je.PureComponent=H,je.StrictMode=r,je.Suspense=f,je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z,je.act=X,je.cloneElement=function(L,Y,ge){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var le=D({},L.props),ce=L.key,ve=L.ref,Ne=L._owner;if(Y!=null){if(Y.ref!==void 0&&(ve=Y.ref,Ne=se.current),Y.key!==void 0&&(ce=""+Y.key),L.type&&L.type.defaultProps)var Be=L.type.defaultProps;for(He in Y)te.call(Y,He)&&!R.hasOwnProperty(He)&&(le[He]=Y[He]===void 0&&Be!==void 0?Be[He]:Y[He])}var He=arguments.length-2;if(He===1)le.children=ge;else if(1<He){Be=Array(He);for(var it=0;it<He;it++)Be[it]=arguments[it+2];le.children=Be}return{$$typeof:n,type:L.type,key:ce,ref:ve,props:le,_owner:Ne}},je.createContext=function(L){return L={$$typeof:u,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:a,_context:L},L.Consumer=L},je.createElement=P,je.createFactory=function(L){var Y=P.bind(null,L);return Y.type=L,Y},je.createRef=function(){return{current:null}},je.forwardRef=function(L){return{$$typeof:h,render:L}},je.isValidElement=V,je.lazy=function(L){return{$$typeof:w,_payload:{_status:-1,_result:L},_init:Re}},je.memo=function(L,Y){return{$$typeof:m,type:L,compare:Y===void 0?null:Y}},je.startTransition=function(L){var Y=ae.transition;ae.transition={};try{L()}finally{ae.transition=Y}},je.unstable_act=X,je.useCallback=function(L,Y){return Ce.current.useCallback(L,Y)},je.useContext=function(L){return Ce.current.useContext(L)},je.useDebugValue=function(){},je.useDeferredValue=function(L){return Ce.current.useDeferredValue(L)},je.useEffect=function(L,Y){return Ce.current.useEffect(L,Y)},je.useId=function(){return Ce.current.useId()},je.useImperativeHandle=function(L,Y,ge){return Ce.current.useImperativeHandle(L,Y,ge)},je.useInsertionEffect=function(L,Y){return Ce.current.useInsertionEffect(L,Y)},je.useLayoutEffect=function(L,Y){return Ce.current.useLayoutEffect(L,Y)},je.useMemo=function(L,Y){return Ce.current.useMemo(L,Y)},je.useReducer=function(L,Y,ge){return Ce.current.useReducer(L,Y,ge)},je.useRef=function(L){return Ce.current.useRef(L)},je.useState=function(L){return Ce.current.useState(L)},je.useSyncExternalStore=function(L,Y,ge){return Ce.current.useSyncExternalStore(L,Y,ge)},je.useTransition=function(){return Ce.current.useTransition()},je.version="18.3.1",je}var Cv;function Zp(){return Cv||(Cv=1,Af.exports=QS()),Af.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nv;function YS(){if(Nv)return El;Nv=1;var n=Zp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(h,f,m){var w,_={},E=null,S=null;m!==void 0&&(E=""+m),f.key!==void 0&&(E=""+f.key),f.ref!==void 0&&(S=f.ref);for(w in f)r.call(f,w)&&!a.hasOwnProperty(w)&&(_[w]=f[w]);if(h&&h.defaultProps)for(w in f=h.defaultProps,f)_[w]===void 0&&(_[w]=f[w]);return{$$typeof:e,type:h,key:E,ref:S,props:_,_owner:o.current}}return El.Fragment=t,El.jsx=u,El.jsxs=u,El}var Rv;function XS(){return Rv||(Rv=1,bf.exports=YS()),bf.exports}var p=XS(),j=Zp();const em=KS(j),JS=GS({__proto__:null,default:em},[j]);var Vc={},kf={exports:{}},hn={},Cf={exports:{}},Nf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jv;function ZS(){return jv||(jv=1,function(n){function e(ae,Z){var X=ae.length;ae.push(Z);e:for(;0<X;){var L=X-1>>>1,Y=ae[L];if(0<o(Y,Z))ae[L]=Z,ae[X]=Y,X=L;else break e}}function t(ae){return ae.length===0?null:ae[0]}function r(ae){if(ae.length===0)return null;var Z=ae[0],X=ae.pop();if(X!==Z){ae[0]=X;e:for(var L=0,Y=ae.length,ge=Y>>>1;L<ge;){var le=2*(L+1)-1,ce=ae[le],ve=le+1,Ne=ae[ve];if(0>o(ce,X))ve<Y&&0>o(Ne,ce)?(ae[L]=Ne,ae[ve]=X,L=ve):(ae[L]=ce,ae[le]=X,L=le);else if(ve<Y&&0>o(Ne,X))ae[L]=Ne,ae[ve]=X,L=ve;else break e}}return Z}function o(ae,Z){var X=ae.sortIndex-Z.sortIndex;return X!==0?X:ae.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var f=[],m=[],w=1,_=null,E=3,S=!1,D=!1,C=!1,A=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(ae){for(var Z=t(m);Z!==null;){if(Z.callback===null)r(m);else if(Z.startTime<=ae)r(m),Z.sortIndex=Z.expirationTime,e(f,Z);else break;Z=t(m)}}function Q(ae){if(C=!1,M(ae),!D)if(t(f)!==null)D=!0,Re(te);else{var Z=t(m);Z!==null&&Ce(Q,Z.startTime-ae)}}function te(ae,Z){D=!1,C&&(C=!1,z(P),P=-1),S=!0;var X=E;try{for(M(Z),_=t(f);_!==null&&(!(_.expirationTime>Z)||ae&&!F());){var L=_.callback;if(typeof L=="function"){_.callback=null,E=_.priorityLevel;var Y=L(_.expirationTime<=Z);Z=n.unstable_now(),typeof Y=="function"?_.callback=Y:_===t(f)&&r(f),M(Z)}else r(f);_=t(f)}if(_!==null)var ge=!0;else{var le=t(m);le!==null&&Ce(Q,le.startTime-Z),ge=!1}return ge}finally{_=null,E=X,S=!1}}var se=!1,R=null,P=-1,b=5,V=-1;function F(){return!(n.unstable_now()-V<b)}function B(){if(R!==null){var ae=n.unstable_now();V=ae;var Z=!0;try{Z=R(!0,ae)}finally{Z?N():(se=!1,R=null)}}else se=!1}var N;if(typeof H=="function")N=function(){H(B)};else if(typeof MessageChannel<"u"){var ke=new MessageChannel,qe=ke.port2;ke.port1.onmessage=B,N=function(){qe.postMessage(null)}}else N=function(){A(B,0)};function Re(ae){R=ae,se||(se=!0,N())}function Ce(ae,Z){P=A(function(){ae(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ae){ae.callback=null},n.unstable_continueExecution=function(){D||S||(D=!0,Re(te))},n.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<ae?Math.floor(1e3/ae):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(ae){switch(E){case 1:case 2:case 3:var Z=3;break;default:Z=E}var X=E;E=Z;try{return ae()}finally{E=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ae,Z){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var X=E;E=ae;try{return Z()}finally{E=X}},n.unstable_scheduleCallback=function(ae,Z,X){var L=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?L+X:L):X=L,ae){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=X+Y,ae={id:w++,callback:Z,priorityLevel:ae,startTime:X,expirationTime:Y,sortIndex:-1},X>L?(ae.sortIndex=X,e(m,ae),t(f)===null&&ae===t(m)&&(C?(z(P),P=-1):C=!0,Ce(Q,X-L))):(ae.sortIndex=Y,e(f,ae),D||S||(D=!0,Re(te))),ae},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(ae){var Z=E;return function(){var X=E;E=Z;try{return ae.apply(this,arguments)}finally{E=X}}}}(Nf)),Nf}var Dv;function e1(){return Dv||(Dv=1,Cf.exports=ZS()),Cf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vv;function t1(){if(Vv)return hn;Vv=1;var n=Zp(),e=e1();function t(i){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+i,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function a(i,s){u(i,s),u(i+"Capture",s)}function u(i,s){for(o[i]=s,i=0;i<s.length;i++)r.add(s[i])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},_={};function E(i){return f.call(_,i)?!0:f.call(w,i)?!1:m.test(i)?_[i]=!0:(w[i]=!0,!1)}function S(i,s,l,d){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return d?!1:l!==null?!l.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function D(i,s,l,d){if(s===null||typeof s>"u"||S(i,s,l,d))return!0;if(d)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function C(i,s,l,d,g,v,T){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=d,this.attributeNamespace=g,this.mustUseProperty=l,this.propertyName=i,this.type=s,this.sanitizeURL=v,this.removeEmptyString=T}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){A[i]=new C(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var s=i[0];A[s]=new C(s,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){A[i]=new C(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){A[i]=new C(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){A[i]=new C(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){A[i]=new C(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){A[i]=new C(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){A[i]=new C(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){A[i]=new C(i,5,!1,i.toLowerCase(),null,!1,!1)});var z=/[\-:]([a-z])/g;function H(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var s=i.replace(z,H);A[s]=new C(s,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var s=i.replace(z,H);A[s]=new C(s,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var s=i.replace(z,H);A[s]=new C(s,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){A[i]=new C(i,1,!1,i.toLowerCase(),null,!1,!1)}),A.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){A[i]=new C(i,1,!1,i.toLowerCase(),null,!0,!0)});function M(i,s,l,d){var g=A.hasOwnProperty(s)?A[s]:null;(g!==null?g.type!==0:d||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(D(s,l,g,d)&&(l=null),d||g===null?E(s)&&(l===null?i.removeAttribute(s):i.setAttribute(s,""+l)):g.mustUseProperty?i[g.propertyName]=l===null?g.type===3?!1:"":l:(s=g.attributeName,d=g.attributeNamespace,l===null?i.removeAttribute(s):(g=g.type,l=g===3||g===4&&l===!0?"":""+l,d?i.setAttributeNS(d,s,l):i.setAttribute(s,l))))}var Q=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,te=Symbol.for("react.element"),se=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),F=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),ke=Symbol.for("react.suspense_list"),qe=Symbol.for("react.memo"),Re=Symbol.for("react.lazy"),Ce=Symbol.for("react.offscreen"),ae=Symbol.iterator;function Z(i){return i===null||typeof i!="object"?null:(i=ae&&i[ae]||i["@@iterator"],typeof i=="function"?i:null)}var X=Object.assign,L;function Y(i){if(L===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);L=s&&s[1]||""}return`
`+L+i}var ge=!1;function le(i,s){if(!i||ge)return"";ge=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(G){var d=G}Reflect.construct(i,[],s)}else{try{s.call()}catch(G){d=G}i.call(s.prototype)}else{try{throw Error()}catch(G){d=G}i()}}catch(G){if(G&&d&&typeof G.stack=="string"){for(var g=G.stack.split(`
`),v=d.stack.split(`
`),T=g.length-1,k=v.length-1;1<=T&&0<=k&&g[T]!==v[k];)k--;for(;1<=T&&0<=k;T--,k--)if(g[T]!==v[k]){if(T!==1||k!==1)do if(T--,k--,0>k||g[T]!==v[k]){var O=`
`+g[T].replace(" at new "," at ");return i.displayName&&O.includes("<anonymous>")&&(O=O.replace("<anonymous>",i.displayName)),O}while(1<=T&&0<=k);break}}}finally{ge=!1,Error.prepareStackTrace=l}return(i=i?i.displayName||i.name:"")?Y(i):""}function ce(i){switch(i.tag){case 5:return Y(i.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return i=le(i.type,!1),i;case 11:return i=le(i.type.render,!1),i;case 1:return i=le(i.type,!0),i;default:return""}}function ve(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case R:return"Fragment";case se:return"Portal";case b:return"Profiler";case P:return"StrictMode";case N:return"Suspense";case ke:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case F:return(i.displayName||"Context")+".Consumer";case V:return(i._context.displayName||"Context")+".Provider";case B:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case qe:return s=i.displayName||null,s!==null?s:ve(i.type)||"Memo";case Re:s=i._payload,i=i._init;try{return ve(i(s))}catch{}}return null}function Ne(i){var s=i.type;switch(i.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=s.render,i=i.displayName||i.name||"",s.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ve(s);case 8:return s===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Be(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function He(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function it(i){var s=He(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),d=""+i[s];if(!i.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,v=l.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return g.call(this)},set:function(T){d=""+T,v.call(this,T)}}),Object.defineProperty(i,s,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(T){d=""+T},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Dt(i){i._valueTracker||(i._valueTracker=it(i))}function rs(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var l=s.getValue(),d="";return i&&(d=He(i)?i.checked?"true":"false":i.value),i=d,i!==l?(s.setValue(i),!0):!1}function ai(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function is(i,s){var l=s.checked;return X({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??i._wrapperState.initialChecked})}function oo(i,s){var l=s.defaultValue==null?"":s.defaultValue,d=s.checked!=null?s.checked:s.defaultChecked;l=Be(s.value!=null?s.value:l),i._wrapperState={initialChecked:d,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Aa(i,s){s=s.checked,s!=null&&M(i,"checked",s,!1)}function ka(i,s){Aa(i,s);var l=Be(s.value),d=s.type;if(l!=null)d==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+l):i.value!==""+l&&(i.value=""+l);else if(d==="submit"||d==="reset"){i.removeAttribute("value");return}s.hasOwnProperty("value")?ao(i,s.type,l):s.hasOwnProperty("defaultValue")&&ao(i,s.type,Be(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(i.defaultChecked=!!s.defaultChecked)}function _u(i,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var d=s.type;if(!(d!=="submit"&&d!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+i._wrapperState.initialValue,l||s===i.value||(i.value=s),i.defaultValue=s}l=i.name,l!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,l!==""&&(i.name=l)}function ao(i,s,l){(s!=="number"||ai(i.ownerDocument)!==i)&&(l==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+l&&(i.defaultValue=""+l))}var Cr=Array.isArray;function Nr(i,s,l,d){if(i=i.options,s){s={};for(var g=0;g<l.length;g++)s["$"+l[g]]=!0;for(l=0;l<i.length;l++)g=s.hasOwnProperty("$"+i[l].value),i[l].selected!==g&&(i[l].selected=g),g&&d&&(i[l].defaultSelected=!0)}else{for(l=""+Be(l),s=null,g=0;g<i.length;g++){if(i[g].value===l){i[g].selected=!0,d&&(i[g].defaultSelected=!0);return}s!==null||i[g].disabled||(s=i[g])}s!==null&&(s.selected=!0)}}function Ca(i,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return X({},s,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function lo(i,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(t(92));if(Cr(l)){if(1<l.length)throw Error(t(93));l=l[0]}s=l}s==null&&(s=""),l=s}i._wrapperState={initialValue:Be(l)}}function uo(i,s){var l=Be(s.value),d=Be(s.defaultValue);l!=null&&(l=""+l,l!==i.value&&(i.value=l),s.defaultValue==null&&i.defaultValue!==l&&(i.defaultValue=l)),d!=null&&(i.defaultValue=""+d)}function Na(i){var s=i.textContent;s===i._wrapperState.initialValue&&s!==""&&s!==null&&(i.value=s)}function xt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Et(i,s){return i==null||i==="http://www.w3.org/1999/xhtml"?xt(s):i==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Rr,Ra=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,d,g){MSApp.execUnsafeLocalFunction(function(){return i(s,l,d,g)})}:i}(function(i,s){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=s;else{for(Rr=Rr||document.createElement("div"),Rr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Rr.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;s.firstChild;)i.appendChild(s.firstChild)}});function li(i,s){if(s){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=s;return}}i.textContent=s}var ss={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},os=["Webkit","ms","Moz","O"];Object.keys(ss).forEach(function(i){os.forEach(function(s){s=s+i.charAt(0).toUpperCase()+i.substring(1),ss[s]=ss[i]})});function ja(i,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||ss.hasOwnProperty(i)&&ss[i]?(""+s).trim():s+"px"}function Da(i,s){i=i.style;for(var l in s)if(s.hasOwnProperty(l)){var d=l.indexOf("--")===0,g=ja(l,s[l],d);l==="float"&&(l="cssFloat"),d?i.setProperty(l,g):i[l]=g}}var Va=X({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function La(i,s){if(s){if(Va[i]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Oa(i,s){if(i.indexOf("-")===-1)return typeof s.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var as=null;function co(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ho=null,Tn=null,or=null;function fo(i){if(i=al(i)){if(typeof ho!="function")throw Error(t(280));var s=i.stateNode;s&&(s=Yu(s),ho(i.stateNode,i.type,s))}}function ar(i){Tn?or?or.push(i):or=[i]:Tn=i}function Ma(){if(Tn){var i=Tn,s=or;if(or=Tn=null,fo(i),s)for(i=0;i<s.length;i++)fo(s[i])}}function ls(i,s){return i(s)}function Fa(){}var jr=!1;function Ua(i,s,l){if(jr)return i(s,l);jr=!0;try{return ls(i,s,l)}finally{jr=!1,(Tn!==null||or!==null)&&(Fa(),Ma())}}function ht(i,s){var l=i.stateNode;if(l===null)return null;var d=Yu(l);if(d===null)return null;l=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(t(231,s,typeof l));return l}var po=!1;if(h)try{var Mn={};Object.defineProperty(Mn,"passive",{get:function(){po=!0}}),window.addEventListener("test",Mn,Mn),window.removeEventListener("test",Mn,Mn)}catch{po=!1}function us(i,s,l,d,g,v,T,k,O){var G=Array.prototype.slice.call(arguments,3);try{s.apply(l,G)}catch(ee){this.onError(ee)}}var cs=!1,mo=null,Fn=!1,Ba=null,ed={onError:function(i){cs=!0,mo=i}};function go(i,s,l,d,g,v,T,k,O){cs=!1,mo=null,us.apply(ed,arguments)}function xu(i,s,l,d,g,v,T,k,O){if(go.apply(this,arguments),cs){if(cs){var G=mo;cs=!1,mo=null}else throw Error(t(198));Fn||(Fn=!0,Ba=G)}}function Un(i){var s=i,l=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(l=s.return),i=s.return;while(i)}return s.tag===3?l:null}function hs(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function Bn(i){if(Un(i)!==i)throw Error(t(188))}function Eu(i){var s=i.alternate;if(!s){if(s=Un(i),s===null)throw Error(t(188));return s!==i?null:i}for(var l=i,d=s;;){var g=l.return;if(g===null)break;var v=g.alternate;if(v===null){if(d=g.return,d!==null){l=d;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===l)return Bn(g),i;if(v===d)return Bn(g),s;v=v.sibling}throw Error(t(188))}if(l.return!==d.return)l=g,d=v;else{for(var T=!1,k=g.child;k;){if(k===l){T=!0,l=g,d=v;break}if(k===d){T=!0,d=g,l=v;break}k=k.sibling}if(!T){for(k=v.child;k;){if(k===l){T=!0,l=v,d=g;break}if(k===d){T=!0,d=v,l=g;break}k=k.sibling}if(!T)throw Error(t(189))}}if(l.alternate!==d)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?i:s}function za(i){return i=Eu(i),i!==null?yo(i):null}function yo(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var s=yo(i);if(s!==null)return s;i=i.sibling}return null}var vo=e.unstable_scheduleCallback,$a=e.unstable_cancelCallback,Tu=e.unstable_shouldYield,td=e.unstable_requestPaint,Xe=e.unstable_now,Iu=e.unstable_getCurrentPriorityLevel,ds=e.unstable_ImmediatePriority,ui=e.unstable_UserBlockingPriority,In=e.unstable_NormalPriority,Wa=e.unstable_LowPriority,Su=e.unstable_IdlePriority,fs=null,pn=null;function Pu(i){if(pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(fs,i,void 0,(i.current.flags&128)===128)}catch{}}var Jt=Math.clz32?Math.clz32:Au,qa=Math.log,bu=Math.LN2;function Au(i){return i>>>=0,i===0?32:31-(qa(i)/bu|0)|0}var wo=64,_o=4194304;function ci(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function ps(i,s){var l=i.pendingLanes;if(l===0)return 0;var d=0,g=i.suspendedLanes,v=i.pingedLanes,T=l&268435455;if(T!==0){var k=T&~g;k!==0?d=ci(k):(v&=T,v!==0&&(d=ci(v)))}else T=l&~g,T!==0?d=ci(T):v!==0&&(d=ci(v));if(d===0)return 0;if(s!==0&&s!==d&&(s&g)===0&&(g=d&-d,v=s&-s,g>=v||g===16&&(v&4194240)!==0))return s;if((d&4)!==0&&(d|=l&16),s=i.entangledLanes,s!==0)for(i=i.entanglements,s&=d;0<s;)l=31-Jt(s),g=1<<l,d|=i[l],s&=~g;return d}function nd(i,s){switch(i){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dr(i,s){for(var l=i.suspendedLanes,d=i.pingedLanes,g=i.expirationTimes,v=i.pendingLanes;0<v;){var T=31-Jt(v),k=1<<T,O=g[T];O===-1?((k&l)===0||(k&d)!==0)&&(g[T]=nd(k,s)):O<=s&&(i.expiredLanes|=k),v&=~k}}function mn(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function ms(){var i=wo;return wo<<=1,(wo&4194240)===0&&(wo=64),i}function hi(i){for(var s=[],l=0;31>l;l++)s.push(i);return s}function di(i,s,l){i.pendingLanes|=s,s!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,s=31-Jt(s),i[s]=l}function Ye(i,s){var l=i.pendingLanes&~s;i.pendingLanes=s,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=s,i.mutableReadLanes&=s,i.entangledLanes&=s,s=i.entanglements;var d=i.eventTimes;for(i=i.expirationTimes;0<l;){var g=31-Jt(l),v=1<<g;s[g]=0,d[g]=-1,i[g]=-1,l&=~v}}function fi(i,s){var l=i.entangledLanes|=s;for(i=i.entanglements;l;){var d=31-Jt(l),g=1<<d;g&s|i[d]&s&&(i[d]|=s),l&=~g}}var Le=0;function pi(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var ku,xo,Cu,Nu,Ru,Ha=!1,lr=[],Vt=null,zn=null,$n=null,mi=new Map,Sn=new Map,ur=[],rd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ju(i,s){switch(i){case"focusin":case"focusout":Vt=null;break;case"dragenter":case"dragleave":zn=null;break;case"mouseover":case"mouseout":$n=null;break;case"pointerover":case"pointerout":mi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sn.delete(s.pointerId)}}function rn(i,s,l,d,g,v){return i===null||i.nativeEvent!==v?(i={blockedOn:s,domEventName:l,eventSystemFlags:d,nativeEvent:v,targetContainers:[g]},s!==null&&(s=al(s),s!==null&&xo(s)),i):(i.eventSystemFlags|=d,s=i.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),i)}function id(i,s,l,d,g){switch(s){case"focusin":return Vt=rn(Vt,i,s,l,d,g),!0;case"dragenter":return zn=rn(zn,i,s,l,d,g),!0;case"mouseover":return $n=rn($n,i,s,l,d,g),!0;case"pointerover":var v=g.pointerId;return mi.set(v,rn(mi.get(v)||null,i,s,l,d,g)),!0;case"gotpointercapture":return v=g.pointerId,Sn.set(v,rn(Sn.get(v)||null,i,s,l,d,g)),!0}return!1}function Du(i){var s=_s(i.target);if(s!==null){var l=Un(s);if(l!==null){if(s=l.tag,s===13){if(s=hs(l),s!==null){i.blockedOn=s,Ru(i.priority,function(){Cu(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Vr(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var l=Eo(i.domEventName,i.eventSystemFlags,s[0],i.nativeEvent);if(l===null){l=i.nativeEvent;var d=new l.constructor(l.type,l);as=d,l.target.dispatchEvent(d),as=null}else return s=al(l),s!==null&&xo(s),i.blockedOn=l,!1;s.shift()}return!0}function gs(i,s,l){Vr(i)&&l.delete(s)}function Vu(){Ha=!1,Vt!==null&&Vr(Vt)&&(Vt=null),zn!==null&&Vr(zn)&&(zn=null),$n!==null&&Vr($n)&&($n=null),mi.forEach(gs),Sn.forEach(gs)}function Wn(i,s){i.blockedOn===s&&(i.blockedOn=null,Ha||(Ha=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Vu)))}function qn(i){function s(g){return Wn(g,i)}if(0<lr.length){Wn(lr[0],i);for(var l=1;l<lr.length;l++){var d=lr[l];d.blockedOn===i&&(d.blockedOn=null)}}for(Vt!==null&&Wn(Vt,i),zn!==null&&Wn(zn,i),$n!==null&&Wn($n,i),mi.forEach(s),Sn.forEach(s),l=0;l<ur.length;l++)d=ur[l],d.blockedOn===i&&(d.blockedOn=null);for(;0<ur.length&&(l=ur[0],l.blockedOn===null);)Du(l),l.blockedOn===null&&ur.shift()}var Lr=Q.ReactCurrentBatchConfig,gi=!0;function nt(i,s,l,d){var g=Le,v=Lr.transition;Lr.transition=null;try{Le=1,Ga(i,s,l,d)}finally{Le=g,Lr.transition=v}}function sd(i,s,l,d){var g=Le,v=Lr.transition;Lr.transition=null;try{Le=4,Ga(i,s,l,d)}finally{Le=g,Lr.transition=v}}function Ga(i,s,l,d){if(gi){var g=Eo(i,s,l,d);if(g===null)gd(i,s,d,ys,l),ju(i,d);else if(id(g,i,s,l,d))d.stopPropagation();else if(ju(i,d),s&4&&-1<rd.indexOf(i)){for(;g!==null;){var v=al(g);if(v!==null&&ku(v),v=Eo(i,s,l,d),v===null&&gd(i,s,d,ys,l),v===g)break;g=v}g!==null&&d.stopPropagation()}else gd(i,s,d,null,l)}}var ys=null;function Eo(i,s,l,d){if(ys=null,i=co(d),i=_s(i),i!==null)if(s=Un(i),s===null)i=null;else if(l=s.tag,l===13){if(i=hs(s),i!==null)return i;i=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null);return ys=i,null}function Ka(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Iu()){case ds:return 1;case ui:return 4;case In:case Wa:return 16;case Su:return 536870912;default:return 16}default:return 16}}var gn=null,To=null,sn=null;function Qa(){if(sn)return sn;var i,s=To,l=s.length,d,g="value"in gn?gn.value:gn.textContent,v=g.length;for(i=0;i<l&&s[i]===g[i];i++);var T=l-i;for(d=1;d<=T&&s[l-d]===g[v-d];d++);return sn=g.slice(i,1<d?1-d:void 0)}function Io(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function cr(){return!0}function Ya(){return!1}function Lt(i){function s(l,d,g,v,T){this._reactName=l,this._targetInst=g,this.type=d,this.nativeEvent=v,this.target=T,this.currentTarget=null;for(var k in i)i.hasOwnProperty(k)&&(l=i[k],this[k]=l?l(v):v[k]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?cr:Ya,this.isPropagationStopped=Ya,this}return X(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=cr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=cr)},persist:function(){},isPersistent:cr}),s}var Hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},So=Lt(Hn),hr=X({},Hn,{view:0,detail:0}),od=Lt(hr),Po,Or,yi,vs=X({},hr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==yi&&(yi&&i.type==="mousemove"?(Po=i.screenX-yi.screenX,Or=i.screenY-yi.screenY):Or=Po=0,yi=i),Po)},movementY:function(i){return"movementY"in i?i.movementY:Or}}),bo=Lt(vs),Xa=X({},vs,{dataTransfer:0}),Lu=Lt(Xa),Ao=X({},hr,{relatedTarget:0}),ko=Lt(Ao),Ou=X({},Hn,{animationName:0,elapsedTime:0,pseudoElement:0}),Mr=Lt(Ou),Mu=X({},Hn,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Fu=Lt(Mu),Uu=X({},Hn,{data:0}),Ja=Lt(Uu),Co={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zu(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=Bu[i])?!!s[i]:!1}function dr(){return zu}var c=X({},hr,{key:function(i){if(i.key){var s=Co[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=Io(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Zt[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dr,charCode:function(i){return i.type==="keypress"?Io(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Io(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),y=Lt(c),x=X({},vs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I=Lt(x),$=X({},hr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dr}),K=Lt($),ue=X({},Hn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ge=Lt(ue),Tt=X({},vs,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Fe=Lt(Tt),kt=[9,13,27,32],gt=h&&"CompositionEvent"in window,Pn=null;h&&"documentMode"in document&&(Pn=document.documentMode);var yn=h&&"TextEvent"in window&&!Pn,ws=h&&(!gt||Pn&&8<Pn&&11>=Pn),No=" ",Tg=!1;function Ig(i,s){switch(i){case"keyup":return kt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sg(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ro=!1;function WI(i,s){switch(i){case"compositionend":return Sg(s);case"keypress":return s.which!==32?null:(Tg=!0,No);case"textInput":return i=s.data,i===No&&Tg?null:i;default:return null}}function qI(i,s){if(Ro)return i==="compositionend"||!gt&&Ig(i,s)?(i=Qa(),sn=To=gn=null,Ro=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ws&&s.locale!=="ko"?null:s.data;default:return null}}var HI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pg(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!HI[i.type]:s==="textarea"}function bg(i,s,l,d){ar(d),s=Gu(s,"onChange"),0<s.length&&(l=new So("onChange","change",null,l,d),i.push({event:l,listeners:s}))}var Za=null,el=null;function GI(i){qg(i,0)}function $u(i){var s=Oo(i);if(rs(s))return i}function KI(i,s){if(i==="change")return s}var Ag=!1;if(h){var ad;if(h){var ld="oninput"in document;if(!ld){var kg=document.createElement("div");kg.setAttribute("oninput","return;"),ld=typeof kg.oninput=="function"}ad=ld}else ad=!1;Ag=ad&&(!document.documentMode||9<document.documentMode)}function Cg(){Za&&(Za.detachEvent("onpropertychange",Ng),el=Za=null)}function Ng(i){if(i.propertyName==="value"&&$u(el)){var s=[];bg(s,el,i,co(i)),Ua(GI,s)}}function QI(i,s,l){i==="focusin"?(Cg(),Za=s,el=l,Za.attachEvent("onpropertychange",Ng)):i==="focusout"&&Cg()}function YI(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return $u(el)}function XI(i,s){if(i==="click")return $u(s)}function JI(i,s){if(i==="input"||i==="change")return $u(s)}function ZI(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Gn=typeof Object.is=="function"?Object.is:ZI;function tl(i,s){if(Gn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var l=Object.keys(i),d=Object.keys(s);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var g=l[d];if(!f.call(s,g)||!Gn(i[g],s[g]))return!1}return!0}function Rg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function jg(i,s){var l=Rg(i);i=0;for(var d;l;){if(l.nodeType===3){if(d=i+l.textContent.length,i<=s&&d>=s)return{node:l,offset:s-i};i=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Rg(l)}}function Dg(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?Dg(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function Vg(){for(var i=window,s=ai();s instanceof i.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)i=s.contentWindow;else break;s=ai(i.document)}return s}function ud(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}function eS(i){var s=Vg(),l=i.focusedElem,d=i.selectionRange;if(s!==l&&l&&l.ownerDocument&&Dg(l.ownerDocument.documentElement,l)){if(d!==null&&ud(l)){if(s=d.start,i=d.end,i===void 0&&(i=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(i,l.value.length);else if(i=(s=l.ownerDocument||document)&&s.defaultView||window,i.getSelection){i=i.getSelection();var g=l.textContent.length,v=Math.min(d.start,g);d=d.end===void 0?v:Math.min(d.end,g),!i.extend&&v>d&&(g=d,d=v,v=g),g=jg(l,v);var T=jg(l,d);g&&T&&(i.rangeCount!==1||i.anchorNode!==g.node||i.anchorOffset!==g.offset||i.focusNode!==T.node||i.focusOffset!==T.offset)&&(s=s.createRange(),s.setStart(g.node,g.offset),i.removeAllRanges(),v>d?(i.addRange(s),i.extend(T.node,T.offset)):(s.setEnd(T.node,T.offset),i.addRange(s)))}}for(s=[],i=l;i=i.parentNode;)i.nodeType===1&&s.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)i=s[l],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var tS=h&&"documentMode"in document&&11>=document.documentMode,jo=null,cd=null,nl=null,hd=!1;function Lg(i,s,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;hd||jo==null||jo!==ai(d)||(d=jo,"selectionStart"in d&&ud(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),nl&&tl(nl,d)||(nl=d,d=Gu(cd,"onSelect"),0<d.length&&(s=new So("onSelect","select",null,s,l),i.push({event:s,listeners:d}),s.target=jo)))}function Wu(i,s){var l={};return l[i.toLowerCase()]=s.toLowerCase(),l["Webkit"+i]="webkit"+s,l["Moz"+i]="moz"+s,l}var Do={animationend:Wu("Animation","AnimationEnd"),animationiteration:Wu("Animation","AnimationIteration"),animationstart:Wu("Animation","AnimationStart"),transitionend:Wu("Transition","TransitionEnd")},dd={},Og={};h&&(Og=document.createElement("div").style,"AnimationEvent"in window||(delete Do.animationend.animation,delete Do.animationiteration.animation,delete Do.animationstart.animation),"TransitionEvent"in window||delete Do.transitionend.transition);function qu(i){if(dd[i])return dd[i];if(!Do[i])return i;var s=Do[i],l;for(l in s)if(s.hasOwnProperty(l)&&l in Og)return dd[i]=s[l];return i}var Mg=qu("animationend"),Fg=qu("animationiteration"),Ug=qu("animationstart"),Bg=qu("transitionend"),zg=new Map,$g="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vi(i,s){zg.set(i,s),a(s,[i])}for(var fd=0;fd<$g.length;fd++){var pd=$g[fd],nS=pd.toLowerCase(),rS=pd[0].toUpperCase()+pd.slice(1);vi(nS,"on"+rS)}vi(Mg,"onAnimationEnd"),vi(Fg,"onAnimationIteration"),vi(Ug,"onAnimationStart"),vi("dblclick","onDoubleClick"),vi("focusin","onFocus"),vi("focusout","onBlur"),vi(Bg,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iS=new Set("cancel close invalid load scroll toggle".split(" ").concat(rl));function Wg(i,s,l){var d=i.type||"unknown-event";i.currentTarget=l,xu(d,s,void 0,i),i.currentTarget=null}function qg(i,s){s=(s&4)!==0;for(var l=0;l<i.length;l++){var d=i[l],g=d.event;d=d.listeners;e:{var v=void 0;if(s)for(var T=d.length-1;0<=T;T--){var k=d[T],O=k.instance,G=k.currentTarget;if(k=k.listener,O!==v&&g.isPropagationStopped())break e;Wg(g,k,G),v=O}else for(T=0;T<d.length;T++){if(k=d[T],O=k.instance,G=k.currentTarget,k=k.listener,O!==v&&g.isPropagationStopped())break e;Wg(g,k,G),v=O}}}if(Fn)throw i=Ba,Fn=!1,Ba=null,i}function et(i,s){var l=s[Ed];l===void 0&&(l=s[Ed]=new Set);var d=i+"__bubble";l.has(d)||(Hg(s,i,2,!1),l.add(d))}function md(i,s,l){var d=0;s&&(d|=4),Hg(l,i,d,s)}var Hu="_reactListening"+Math.random().toString(36).slice(2);function il(i){if(!i[Hu]){i[Hu]=!0,r.forEach(function(l){l!=="selectionchange"&&(iS.has(l)||md(l,!1,i),md(l,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[Hu]||(s[Hu]=!0,md("selectionchange",!1,s))}}function Hg(i,s,l,d){switch(Ka(s)){case 1:var g=nt;break;case 4:g=sd;break;default:g=Ga}l=g.bind(null,s,l,i),g=void 0,!po||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),d?g!==void 0?i.addEventListener(s,l,{capture:!0,passive:g}):i.addEventListener(s,l,!0):g!==void 0?i.addEventListener(s,l,{passive:g}):i.addEventListener(s,l,!1)}function gd(i,s,l,d,g){var v=d;if((s&1)===0&&(s&2)===0&&d!==null)e:for(;;){if(d===null)return;var T=d.tag;if(T===3||T===4){var k=d.stateNode.containerInfo;if(k===g||k.nodeType===8&&k.parentNode===g)break;if(T===4)for(T=d.return;T!==null;){var O=T.tag;if((O===3||O===4)&&(O=T.stateNode.containerInfo,O===g||O.nodeType===8&&O.parentNode===g))return;T=T.return}for(;k!==null;){if(T=_s(k),T===null)return;if(O=T.tag,O===5||O===6){d=v=T;continue e}k=k.parentNode}}d=d.return}Ua(function(){var G=v,ee=co(l),re=[];e:{var J=zg.get(i);if(J!==void 0){var he=So,fe=i;switch(i){case"keypress":if(Io(l)===0)break e;case"keydown":case"keyup":he=y;break;case"focusin":fe="focus",he=ko;break;case"focusout":fe="blur",he=ko;break;case"beforeblur":case"afterblur":he=ko;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=bo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=Lu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=K;break;case Mg:case Fg:case Ug:he=Mr;break;case Bg:he=Ge;break;case"scroll":he=od;break;case"wheel":he=Fe;break;case"copy":case"cut":case"paste":he=Fu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=I}var pe=(s&4)!==0,dt=!pe&&i==="scroll",W=pe?J!==null?J+"Capture":null:J;pe=[];for(var U=G,q;U!==null;){q=U;var oe=q.stateNode;if(q.tag===5&&oe!==null&&(q=oe,W!==null&&(oe=ht(U,W),oe!=null&&pe.push(sl(U,oe,q)))),dt)break;U=U.return}0<pe.length&&(J=new he(J,fe,null,l,ee),re.push({event:J,listeners:pe}))}}if((s&7)===0){e:{if(J=i==="mouseover"||i==="pointerover",he=i==="mouseout"||i==="pointerout",J&&l!==as&&(fe=l.relatedTarget||l.fromElement)&&(_s(fe)||fe[Fr]))break e;if((he||J)&&(J=ee.window===ee?ee:(J=ee.ownerDocument)?J.defaultView||J.parentWindow:window,he?(fe=l.relatedTarget||l.toElement,he=G,fe=fe?_s(fe):null,fe!==null&&(dt=Un(fe),fe!==dt||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(he=null,fe=G),he!==fe)){if(pe=bo,oe="onMouseLeave",W="onMouseEnter",U="mouse",(i==="pointerout"||i==="pointerover")&&(pe=I,oe="onPointerLeave",W="onPointerEnter",U="pointer"),dt=he==null?J:Oo(he),q=fe==null?J:Oo(fe),J=new pe(oe,U+"leave",he,l,ee),J.target=dt,J.relatedTarget=q,oe=null,_s(ee)===G&&(pe=new pe(W,U+"enter",fe,l,ee),pe.target=q,pe.relatedTarget=dt,oe=pe),dt=oe,he&&fe)t:{for(pe=he,W=fe,U=0,q=pe;q;q=Vo(q))U++;for(q=0,oe=W;oe;oe=Vo(oe))q++;for(;0<U-q;)pe=Vo(pe),U--;for(;0<q-U;)W=Vo(W),q--;for(;U--;){if(pe===W||W!==null&&pe===W.alternate)break t;pe=Vo(pe),W=Vo(W)}pe=null}else pe=null;he!==null&&Gg(re,J,he,pe,!1),fe!==null&&dt!==null&&Gg(re,dt,fe,pe,!0)}}e:{if(J=G?Oo(G):window,he=J.nodeName&&J.nodeName.toLowerCase(),he==="select"||he==="input"&&J.type==="file")var ye=KI;else if(Pg(J))if(Ag)ye=JI;else{ye=YI;var we=QI}else(he=J.nodeName)&&he.toLowerCase()==="input"&&(J.type==="checkbox"||J.type==="radio")&&(ye=XI);if(ye&&(ye=ye(i,G))){bg(re,ye,l,ee);break e}we&&we(i,J,G),i==="focusout"&&(we=J._wrapperState)&&we.controlled&&J.type==="number"&&ao(J,"number",J.value)}switch(we=G?Oo(G):window,i){case"focusin":(Pg(we)||we.contentEditable==="true")&&(jo=we,cd=G,nl=null);break;case"focusout":nl=cd=jo=null;break;case"mousedown":hd=!0;break;case"contextmenu":case"mouseup":case"dragend":hd=!1,Lg(re,l,ee);break;case"selectionchange":if(tS)break;case"keydown":case"keyup":Lg(re,l,ee)}var _e;if(gt)e:{switch(i){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else Ro?Ig(i,l)&&(Se="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Se="onCompositionStart");Se&&(ws&&l.locale!=="ko"&&(Ro||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&Ro&&(_e=Qa()):(gn=ee,To="value"in gn?gn.value:gn.textContent,Ro=!0)),we=Gu(G,Se),0<we.length&&(Se=new Ja(Se,i,null,l,ee),re.push({event:Se,listeners:we}),_e?Se.data=_e:(_e=Sg(l),_e!==null&&(Se.data=_e)))),(_e=yn?WI(i,l):qI(i,l))&&(G=Gu(G,"onBeforeInput"),0<G.length&&(ee=new Ja("onBeforeInput","beforeinput",null,l,ee),re.push({event:ee,listeners:G}),ee.data=_e))}qg(re,s)})}function sl(i,s,l){return{instance:i,listener:s,currentTarget:l}}function Gu(i,s){for(var l=s+"Capture",d=[];i!==null;){var g=i,v=g.stateNode;g.tag===5&&v!==null&&(g=v,v=ht(i,l),v!=null&&d.unshift(sl(i,v,g)),v=ht(i,s),v!=null&&d.push(sl(i,v,g))),i=i.return}return d}function Vo(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Gg(i,s,l,d,g){for(var v=s._reactName,T=[];l!==null&&l!==d;){var k=l,O=k.alternate,G=k.stateNode;if(O!==null&&O===d)break;k.tag===5&&G!==null&&(k=G,g?(O=ht(l,v),O!=null&&T.unshift(sl(l,O,k))):g||(O=ht(l,v),O!=null&&T.push(sl(l,O,k)))),l=l.return}T.length!==0&&i.push({event:s,listeners:T})}var sS=/\r\n?/g,oS=/\u0000|\uFFFD/g;function Kg(i){return(typeof i=="string"?i:""+i).replace(sS,`
`).replace(oS,"")}function Ku(i,s,l){if(s=Kg(s),Kg(i)!==s&&l)throw Error(t(425))}function Qu(){}var yd=null,vd=null;function wd(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var _d=typeof setTimeout=="function"?setTimeout:void 0,aS=typeof clearTimeout=="function"?clearTimeout:void 0,Qg=typeof Promise=="function"?Promise:void 0,lS=typeof queueMicrotask=="function"?queueMicrotask:typeof Qg<"u"?function(i){return Qg.resolve(null).then(i).catch(uS)}:_d;function uS(i){setTimeout(function(){throw i})}function xd(i,s){var l=s,d=0;do{var g=l.nextSibling;if(i.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"){if(d===0){i.removeChild(g),qn(s);return}d--}else l!=="$"&&l!=="$?"&&l!=="$!"||d++;l=g}while(l);qn(s)}function wi(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return i}function Yg(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return i;s--}else l==="/$"&&s++}i=i.previousSibling}return null}var Lo=Math.random().toString(36).slice(2),fr="__reactFiber$"+Lo,ol="__reactProps$"+Lo,Fr="__reactContainer$"+Lo,Ed="__reactEvents$"+Lo,cS="__reactListeners$"+Lo,hS="__reactHandles$"+Lo;function _s(i){var s=i[fr];if(s)return s;for(var l=i.parentNode;l;){if(s=l[Fr]||l[fr]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(i=Yg(i);i!==null;){if(l=i[fr])return l;i=Yg(i)}return s}i=l,l=i.parentNode}return null}function al(i){return i=i[fr]||i[Fr],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Oo(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Yu(i){return i[ol]||null}var Td=[],Mo=-1;function _i(i){return{current:i}}function tt(i){0>Mo||(i.current=Td[Mo],Td[Mo]=null,Mo--)}function Je(i,s){Mo++,Td[Mo]=i.current,i.current=s}var xi={},$t=_i(xi),on=_i(!1),xs=xi;function Fo(i,s){var l=i.type.contextTypes;if(!l)return xi;var d=i.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===s)return d.__reactInternalMemoizedMaskedChildContext;var g={},v;for(v in l)g[v]=s[v];return d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=s,i.__reactInternalMemoizedMaskedChildContext=g),g}function an(i){return i=i.childContextTypes,i!=null}function Xu(){tt(on),tt($t)}function Xg(i,s,l){if($t.current!==xi)throw Error(t(168));Je($t,s),Je(on,l)}function Jg(i,s,l){var d=i.stateNode;if(s=s.childContextTypes,typeof d.getChildContext!="function")return l;d=d.getChildContext();for(var g in d)if(!(g in s))throw Error(t(108,Ne(i)||"Unknown",g));return X({},l,d)}function Ju(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||xi,xs=$t.current,Je($t,i),Je(on,on.current),!0}function Zg(i,s,l){var d=i.stateNode;if(!d)throw Error(t(169));l?(i=Jg(i,s,xs),d.__reactInternalMemoizedMergedChildContext=i,tt(on),tt($t),Je($t,i)):tt(on),Je(on,l)}var Ur=null,Zu=!1,Id=!1;function ey(i){Ur===null?Ur=[i]:Ur.push(i)}function dS(i){Zu=!0,ey(i)}function Ei(){if(!Id&&Ur!==null){Id=!0;var i=0,s=Le;try{var l=Ur;for(Le=1;i<l.length;i++){var d=l[i];do d=d(!0);while(d!==null)}Ur=null,Zu=!1}catch(g){throw Ur!==null&&(Ur=Ur.slice(i+1)),vo(ds,Ei),g}finally{Le=s,Id=!1}}return null}var Uo=[],Bo=0,ec=null,tc=0,bn=[],An=0,Es=null,Br=1,zr="";function Ts(i,s){Uo[Bo++]=tc,Uo[Bo++]=ec,ec=i,tc=s}function ty(i,s,l){bn[An++]=Br,bn[An++]=zr,bn[An++]=Es,Es=i;var d=Br;i=zr;var g=32-Jt(d)-1;d&=~(1<<g),l+=1;var v=32-Jt(s)+g;if(30<v){var T=g-g%5;v=(d&(1<<T)-1).toString(32),d>>=T,g-=T,Br=1<<32-Jt(s)+g|l<<g|d,zr=v+i}else Br=1<<v|l<<g|d,zr=i}function Sd(i){i.return!==null&&(Ts(i,1),ty(i,1,0))}function Pd(i){for(;i===ec;)ec=Uo[--Bo],Uo[Bo]=null,tc=Uo[--Bo],Uo[Bo]=null;for(;i===Es;)Es=bn[--An],bn[An]=null,zr=bn[--An],bn[An]=null,Br=bn[--An],bn[An]=null}var vn=null,wn=null,rt=!1,Kn=null;function ny(i,s){var l=Rn(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=i,s=i.deletions,s===null?(i.deletions=[l],i.flags|=16):s.push(l)}function ry(i,s){switch(i.tag){case 5:var l=i.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(i.stateNode=s,vn=i,wn=wi(s.firstChild),!0):!1;case 6:return s=i.pendingProps===""||s.nodeType!==3?null:s,s!==null?(i.stateNode=s,vn=i,wn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=Es!==null?{id:Br,overflow:zr}:null,i.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=Rn(18,null,null,0),l.stateNode=s,l.return=i,i.child=l,vn=i,wn=null,!0):!1;default:return!1}}function bd(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Ad(i){if(rt){var s=wn;if(s){var l=s;if(!ry(i,s)){if(bd(i))throw Error(t(418));s=wi(l.nextSibling);var d=vn;s&&ry(i,s)?ny(d,l):(i.flags=i.flags&-4097|2,rt=!1,vn=i)}}else{if(bd(i))throw Error(t(418));i.flags=i.flags&-4097|2,rt=!1,vn=i}}}function iy(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;vn=i}function nc(i){if(i!==vn)return!1;if(!rt)return iy(i),rt=!0,!1;var s;if((s=i.tag!==3)&&!(s=i.tag!==5)&&(s=i.type,s=s!=="head"&&s!=="body"&&!wd(i.type,i.memoizedProps)),s&&(s=wn)){if(bd(i))throw sy(),Error(t(418));for(;s;)ny(i,s),s=wi(s.nextSibling)}if(iy(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"){if(s===0){wn=wi(i.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}i=i.nextSibling}wn=null}}else wn=vn?wi(i.stateNode.nextSibling):null;return!0}function sy(){for(var i=wn;i;)i=wi(i.nextSibling)}function zo(){wn=vn=null,rt=!1}function kd(i){Kn===null?Kn=[i]:Kn.push(i)}var fS=Q.ReactCurrentBatchConfig;function ll(i,s,l){if(i=l.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var d=l.stateNode}if(!d)throw Error(t(147,i));var g=d,v=""+i;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===v?s.ref:(s=function(T){var k=g.refs;T===null?delete k[v]:k[v]=T},s._stringRef=v,s)}if(typeof i!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,i))}return i}function rc(i,s){throw i=Object.prototype.toString.call(s),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i))}function oy(i){var s=i._init;return s(i._payload)}function ay(i){function s(W,U){if(i){var q=W.deletions;q===null?(W.deletions=[U],W.flags|=16):q.push(U)}}function l(W,U){if(!i)return null;for(;U!==null;)s(W,U),U=U.sibling;return null}function d(W,U){for(W=new Map;U!==null;)U.key!==null?W.set(U.key,U):W.set(U.index,U),U=U.sibling;return W}function g(W,U){return W=Ci(W,U),W.index=0,W.sibling=null,W}function v(W,U,q){return W.index=q,i?(q=W.alternate,q!==null?(q=q.index,q<U?(W.flags|=2,U):q):(W.flags|=2,U)):(W.flags|=1048576,U)}function T(W){return i&&W.alternate===null&&(W.flags|=2),W}function k(W,U,q,oe){return U===null||U.tag!==6?(U=xf(q,W.mode,oe),U.return=W,U):(U=g(U,q),U.return=W,U)}function O(W,U,q,oe){var ye=q.type;return ye===R?ee(W,U,q.props.children,oe,q.key):U!==null&&(U.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Re&&oy(ye)===U.type)?(oe=g(U,q.props),oe.ref=ll(W,U,q),oe.return=W,oe):(oe=bc(q.type,q.key,q.props,null,W.mode,oe),oe.ref=ll(W,U,q),oe.return=W,oe)}function G(W,U,q,oe){return U===null||U.tag!==4||U.stateNode.containerInfo!==q.containerInfo||U.stateNode.implementation!==q.implementation?(U=Ef(q,W.mode,oe),U.return=W,U):(U=g(U,q.children||[]),U.return=W,U)}function ee(W,U,q,oe,ye){return U===null||U.tag!==7?(U=Ns(q,W.mode,oe,ye),U.return=W,U):(U=g(U,q),U.return=W,U)}function re(W,U,q){if(typeof U=="string"&&U!==""||typeof U=="number")return U=xf(""+U,W.mode,q),U.return=W,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case te:return q=bc(U.type,U.key,U.props,null,W.mode,q),q.ref=ll(W,null,U),q.return=W,q;case se:return U=Ef(U,W.mode,q),U.return=W,U;case Re:var oe=U._init;return re(W,oe(U._payload),q)}if(Cr(U)||Z(U))return U=Ns(U,W.mode,q,null),U.return=W,U;rc(W,U)}return null}function J(W,U,q,oe){var ye=U!==null?U.key:null;if(typeof q=="string"&&q!==""||typeof q=="number")return ye!==null?null:k(W,U,""+q,oe);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case te:return q.key===ye?O(W,U,q,oe):null;case se:return q.key===ye?G(W,U,q,oe):null;case Re:return ye=q._init,J(W,U,ye(q._payload),oe)}if(Cr(q)||Z(q))return ye!==null?null:ee(W,U,q,oe,null);rc(W,q)}return null}function he(W,U,q,oe,ye){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return W=W.get(q)||null,k(U,W,""+oe,ye);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case te:return W=W.get(oe.key===null?q:oe.key)||null,O(U,W,oe,ye);case se:return W=W.get(oe.key===null?q:oe.key)||null,G(U,W,oe,ye);case Re:var we=oe._init;return he(W,U,q,we(oe._payload),ye)}if(Cr(oe)||Z(oe))return W=W.get(q)||null,ee(U,W,oe,ye,null);rc(U,oe)}return null}function fe(W,U,q,oe){for(var ye=null,we=null,_e=U,Se=U=0,Rt=null;_e!==null&&Se<q.length;Se++){_e.index>Se?(Rt=_e,_e=null):Rt=_e.sibling;var $e=J(W,_e,q[Se],oe);if($e===null){_e===null&&(_e=Rt);break}i&&_e&&$e.alternate===null&&s(W,_e),U=v($e,U,Se),we===null?ye=$e:we.sibling=$e,we=$e,_e=Rt}if(Se===q.length)return l(W,_e),rt&&Ts(W,Se),ye;if(_e===null){for(;Se<q.length;Se++)_e=re(W,q[Se],oe),_e!==null&&(U=v(_e,U,Se),we===null?ye=_e:we.sibling=_e,we=_e);return rt&&Ts(W,Se),ye}for(_e=d(W,_e);Se<q.length;Se++)Rt=he(_e,W,Se,q[Se],oe),Rt!==null&&(i&&Rt.alternate!==null&&_e.delete(Rt.key===null?Se:Rt.key),U=v(Rt,U,Se),we===null?ye=Rt:we.sibling=Rt,we=Rt);return i&&_e.forEach(function(Ni){return s(W,Ni)}),rt&&Ts(W,Se),ye}function pe(W,U,q,oe){var ye=Z(q);if(typeof ye!="function")throw Error(t(150));if(q=ye.call(q),q==null)throw Error(t(151));for(var we=ye=null,_e=U,Se=U=0,Rt=null,$e=q.next();_e!==null&&!$e.done;Se++,$e=q.next()){_e.index>Se?(Rt=_e,_e=null):Rt=_e.sibling;var Ni=J(W,_e,$e.value,oe);if(Ni===null){_e===null&&(_e=Rt);break}i&&_e&&Ni.alternate===null&&s(W,_e),U=v(Ni,U,Se),we===null?ye=Ni:we.sibling=Ni,we=Ni,_e=Rt}if($e.done)return l(W,_e),rt&&Ts(W,Se),ye;if(_e===null){for(;!$e.done;Se++,$e=q.next())$e=re(W,$e.value,oe),$e!==null&&(U=v($e,U,Se),we===null?ye=$e:we.sibling=$e,we=$e);return rt&&Ts(W,Se),ye}for(_e=d(W,_e);!$e.done;Se++,$e=q.next())$e=he(_e,W,Se,$e.value,oe),$e!==null&&(i&&$e.alternate!==null&&_e.delete($e.key===null?Se:$e.key),U=v($e,U,Se),we===null?ye=$e:we.sibling=$e,we=$e);return i&&_e.forEach(function(HS){return s(W,HS)}),rt&&Ts(W,Se),ye}function dt(W,U,q,oe){if(typeof q=="object"&&q!==null&&q.type===R&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case te:e:{for(var ye=q.key,we=U;we!==null;){if(we.key===ye){if(ye=q.type,ye===R){if(we.tag===7){l(W,we.sibling),U=g(we,q.props.children),U.return=W,W=U;break e}}else if(we.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Re&&oy(ye)===we.type){l(W,we.sibling),U=g(we,q.props),U.ref=ll(W,we,q),U.return=W,W=U;break e}l(W,we);break}else s(W,we);we=we.sibling}q.type===R?(U=Ns(q.props.children,W.mode,oe,q.key),U.return=W,W=U):(oe=bc(q.type,q.key,q.props,null,W.mode,oe),oe.ref=ll(W,U,q),oe.return=W,W=oe)}return T(W);case se:e:{for(we=q.key;U!==null;){if(U.key===we)if(U.tag===4&&U.stateNode.containerInfo===q.containerInfo&&U.stateNode.implementation===q.implementation){l(W,U.sibling),U=g(U,q.children||[]),U.return=W,W=U;break e}else{l(W,U);break}else s(W,U);U=U.sibling}U=Ef(q,W.mode,oe),U.return=W,W=U}return T(W);case Re:return we=q._init,dt(W,U,we(q._payload),oe)}if(Cr(q))return fe(W,U,q,oe);if(Z(q))return pe(W,U,q,oe);rc(W,q)}return typeof q=="string"&&q!==""||typeof q=="number"?(q=""+q,U!==null&&U.tag===6?(l(W,U.sibling),U=g(U,q),U.return=W,W=U):(l(W,U),U=xf(q,W.mode,oe),U.return=W,W=U),T(W)):l(W,U)}return dt}var $o=ay(!0),ly=ay(!1),ic=_i(null),sc=null,Wo=null,Cd=null;function Nd(){Cd=Wo=sc=null}function Rd(i){var s=ic.current;tt(ic),i._currentValue=s}function jd(i,s,l){for(;i!==null;){var d=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),i===l)break;i=i.return}}function qo(i,s){sc=i,Cd=Wo=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&s)!==0&&(ln=!0),i.firstContext=null)}function kn(i){var s=i._currentValue;if(Cd!==i)if(i={context:i,memoizedValue:s,next:null},Wo===null){if(sc===null)throw Error(t(308));Wo=i,sc.dependencies={lanes:0,firstContext:i}}else Wo=Wo.next=i;return s}var Is=null;function Dd(i){Is===null?Is=[i]:Is.push(i)}function uy(i,s,l,d){var g=s.interleaved;return g===null?(l.next=l,Dd(s)):(l.next=g.next,g.next=l),s.interleaved=l,$r(i,d)}function $r(i,s){i.lanes|=s;var l=i.alternate;for(l!==null&&(l.lanes|=s),l=i,i=i.return;i!==null;)i.childLanes|=s,l=i.alternate,l!==null&&(l.childLanes|=s),l=i,i=i.return;return l.tag===3?l.stateNode:null}var Ti=!1;function Vd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cy(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Wr(i,s){return{eventTime:i,lane:s,tag:0,payload:null,callback:null,next:null}}function Ii(i,s,l){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(ze&2)!==0){var g=d.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),d.pending=s,$r(i,l)}return g=d.interleaved,g===null?(s.next=s,Dd(d)):(s.next=g.next,g.next=s),d.interleaved=s,$r(i,l)}function oc(i,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var d=s.lanes;d&=i.pendingLanes,l|=d,s.lanes=l,fi(i,l)}}function hy(i,s){var l=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var g=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var T={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};v===null?g=v=T:v=v.next=T,l=l.next}while(l!==null);v===null?g=v=s:v=v.next=s}else g=v=s;l={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:d.shared,effects:d.effects},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=s:i.next=s,l.lastBaseUpdate=s}function ac(i,s,l,d){var g=i.updateQueue;Ti=!1;var v=g.firstBaseUpdate,T=g.lastBaseUpdate,k=g.shared.pending;if(k!==null){g.shared.pending=null;var O=k,G=O.next;O.next=null,T===null?v=G:T.next=G,T=O;var ee=i.alternate;ee!==null&&(ee=ee.updateQueue,k=ee.lastBaseUpdate,k!==T&&(k===null?ee.firstBaseUpdate=G:k.next=G,ee.lastBaseUpdate=O))}if(v!==null){var re=g.baseState;T=0,ee=G=O=null,k=v;do{var J=k.lane,he=k.eventTime;if((d&J)===J){ee!==null&&(ee=ee.next={eventTime:he,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var fe=i,pe=k;switch(J=s,he=l,pe.tag){case 1:if(fe=pe.payload,typeof fe=="function"){re=fe.call(he,re,J);break e}re=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=pe.payload,J=typeof fe=="function"?fe.call(he,re,J):fe,J==null)break e;re=X({},re,J);break e;case 2:Ti=!0}}k.callback!==null&&k.lane!==0&&(i.flags|=64,J=g.effects,J===null?g.effects=[k]:J.push(k))}else he={eventTime:he,lane:J,tag:k.tag,payload:k.payload,callback:k.callback,next:null},ee===null?(G=ee=he,O=re):ee=ee.next=he,T|=J;if(k=k.next,k===null){if(k=g.shared.pending,k===null)break;J=k,k=J.next,J.next=null,g.lastBaseUpdate=J,g.shared.pending=null}}while(!0);if(ee===null&&(O=re),g.baseState=O,g.firstBaseUpdate=G,g.lastBaseUpdate=ee,s=g.shared.interleaved,s!==null){g=s;do T|=g.lane,g=g.next;while(g!==s)}else v===null&&(g.shared.lanes=0);bs|=T,i.lanes=T,i.memoizedState=re}}function dy(i,s,l){if(i=s.effects,s.effects=null,i!==null)for(s=0;s<i.length;s++){var d=i[s],g=d.callback;if(g!==null){if(d.callback=null,d=l,typeof g!="function")throw Error(t(191,g));g.call(d)}}}var ul={},pr=_i(ul),cl=_i(ul),hl=_i(ul);function Ss(i){if(i===ul)throw Error(t(174));return i}function Ld(i,s){switch(Je(hl,s),Je(cl,i),Je(pr,ul),i=s.nodeType,i){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Et(null,"");break;default:i=i===8?s.parentNode:s,s=i.namespaceURI||null,i=i.tagName,s=Et(s,i)}tt(pr),Je(pr,s)}function Ho(){tt(pr),tt(cl),tt(hl)}function fy(i){Ss(hl.current);var s=Ss(pr.current),l=Et(s,i.type);s!==l&&(Je(cl,i),Je(pr,l))}function Od(i){cl.current===i&&(tt(pr),tt(cl))}var st=_i(0);function lc(i){for(var s=i;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Md=[];function Fd(){for(var i=0;i<Md.length;i++)Md[i]._workInProgressVersionPrimary=null;Md.length=0}var uc=Q.ReactCurrentDispatcher,Ud=Q.ReactCurrentBatchConfig,Ps=0,ot=null,It=null,Ct=null,cc=!1,dl=!1,fl=0,pS=0;function Wt(){throw Error(t(321))}function Bd(i,s){if(s===null)return!1;for(var l=0;l<s.length&&l<i.length;l++)if(!Gn(i[l],s[l]))return!1;return!0}function zd(i,s,l,d,g,v){if(Ps=v,ot=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,uc.current=i===null||i.memoizedState===null?vS:wS,i=l(d,g),dl){v=0;do{if(dl=!1,fl=0,25<=v)throw Error(t(301));v+=1,Ct=It=null,s.updateQueue=null,uc.current=_S,i=l(d,g)}while(dl)}if(uc.current=fc,s=It!==null&&It.next!==null,Ps=0,Ct=It=ot=null,cc=!1,s)throw Error(t(300));return i}function $d(){var i=fl!==0;return fl=0,i}function mr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?ot.memoizedState=Ct=i:Ct=Ct.next=i,Ct}function Cn(){if(It===null){var i=ot.alternate;i=i!==null?i.memoizedState:null}else i=It.next;var s=Ct===null?ot.memoizedState:Ct.next;if(s!==null)Ct=s,It=i;else{if(i===null)throw Error(t(310));It=i,i={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},Ct===null?ot.memoizedState=Ct=i:Ct=Ct.next=i}return Ct}function pl(i,s){return typeof s=="function"?s(i):s}function Wd(i){var s=Cn(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var d=It,g=d.baseQueue,v=l.pending;if(v!==null){if(g!==null){var T=g.next;g.next=v.next,v.next=T}d.baseQueue=g=v,l.pending=null}if(g!==null){v=g.next,d=d.baseState;var k=T=null,O=null,G=v;do{var ee=G.lane;if((Ps&ee)===ee)O!==null&&(O=O.next={lane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),d=G.hasEagerState?G.eagerState:i(d,G.action);else{var re={lane:ee,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null};O===null?(k=O=re,T=d):O=O.next=re,ot.lanes|=ee,bs|=ee}G=G.next}while(G!==null&&G!==v);O===null?T=d:O.next=k,Gn(d,s.memoizedState)||(ln=!0),s.memoizedState=d,s.baseState=T,s.baseQueue=O,l.lastRenderedState=d}if(i=l.interleaved,i!==null){g=i;do v=g.lane,ot.lanes|=v,bs|=v,g=g.next;while(g!==i)}else g===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function qd(i){var s=Cn(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var d=l.dispatch,g=l.pending,v=s.memoizedState;if(g!==null){l.pending=null;var T=g=g.next;do v=i(v,T.action),T=T.next;while(T!==g);Gn(v,s.memoizedState)||(ln=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),l.lastRenderedState=v}return[v,d]}function py(){}function my(i,s){var l=ot,d=Cn(),g=s(),v=!Gn(d.memoizedState,g);if(v&&(d.memoizedState=g,ln=!0),d=d.queue,Hd(vy.bind(null,l,d,i),[i]),d.getSnapshot!==s||v||Ct!==null&&Ct.memoizedState.tag&1){if(l.flags|=2048,ml(9,yy.bind(null,l,d,g,s),void 0,null),Nt===null)throw Error(t(349));(Ps&30)!==0||gy(l,s,g)}return g}function gy(i,s,l){i.flags|=16384,i={getSnapshot:s,value:l},s=ot.updateQueue,s===null?(s={lastEffect:null,stores:null},ot.updateQueue=s,s.stores=[i]):(l=s.stores,l===null?s.stores=[i]:l.push(i))}function yy(i,s,l,d){s.value=l,s.getSnapshot=d,wy(s)&&_y(i)}function vy(i,s,l){return l(function(){wy(s)&&_y(i)})}function wy(i){var s=i.getSnapshot;i=i.value;try{var l=s();return!Gn(i,l)}catch{return!0}}function _y(i){var s=$r(i,1);s!==null&&Jn(s,i,1,-1)}function xy(i){var s=mr();return typeof i=="function"&&(i=i()),s.memoizedState=s.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pl,lastRenderedState:i},s.queue=i,i=i.dispatch=yS.bind(null,ot,i),[s.memoizedState,i]}function ml(i,s,l,d){return i={tag:i,create:s,destroy:l,deps:d,next:null},s=ot.updateQueue,s===null?(s={lastEffect:null,stores:null},ot.updateQueue=s,s.lastEffect=i.next=i):(l=s.lastEffect,l===null?s.lastEffect=i.next=i:(d=l.next,l.next=i,i.next=d,s.lastEffect=i)),i}function Ey(){return Cn().memoizedState}function hc(i,s,l,d){var g=mr();ot.flags|=i,g.memoizedState=ml(1|s,l,void 0,d===void 0?null:d)}function dc(i,s,l,d){var g=Cn();d=d===void 0?null:d;var v=void 0;if(It!==null){var T=It.memoizedState;if(v=T.destroy,d!==null&&Bd(d,T.deps)){g.memoizedState=ml(s,l,v,d);return}}ot.flags|=i,g.memoizedState=ml(1|s,l,v,d)}function Ty(i,s){return hc(8390656,8,i,s)}function Hd(i,s){return dc(2048,8,i,s)}function Iy(i,s){return dc(4,2,i,s)}function Sy(i,s){return dc(4,4,i,s)}function Py(i,s){if(typeof s=="function")return i=i(),s(i),function(){s(null)};if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function by(i,s,l){return l=l!=null?l.concat([i]):null,dc(4,4,Py.bind(null,s,i),l)}function Gd(){}function Ay(i,s){var l=Cn();s=s===void 0?null:s;var d=l.memoizedState;return d!==null&&s!==null&&Bd(s,d[1])?d[0]:(l.memoizedState=[i,s],i)}function ky(i,s){var l=Cn();s=s===void 0?null:s;var d=l.memoizedState;return d!==null&&s!==null&&Bd(s,d[1])?d[0]:(i=i(),l.memoizedState=[i,s],i)}function Cy(i,s,l){return(Ps&21)===0?(i.baseState&&(i.baseState=!1,ln=!0),i.memoizedState=l):(Gn(l,s)||(l=ms(),ot.lanes|=l,bs|=l,i.baseState=!0),s)}function mS(i,s){var l=Le;Le=l!==0&&4>l?l:4,i(!0);var d=Ud.transition;Ud.transition={};try{i(!1),s()}finally{Le=l,Ud.transition=d}}function Ny(){return Cn().memoizedState}function gS(i,s,l){var d=Ai(i);if(l={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null},Ry(i))jy(s,l);else if(l=uy(i,s,l,d),l!==null){var g=tn();Jn(l,i,d,g),Dy(l,s,d)}}function yS(i,s,l){var d=Ai(i),g={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null};if(Ry(i))jy(s,g);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var T=s.lastRenderedState,k=v(T,l);if(g.hasEagerState=!0,g.eagerState=k,Gn(k,T)){var O=s.interleaved;O===null?(g.next=g,Dd(s)):(g.next=O.next,O.next=g),s.interleaved=g;return}}catch{}finally{}l=uy(i,s,g,d),l!==null&&(g=tn(),Jn(l,i,d,g),Dy(l,s,d))}}function Ry(i){var s=i.alternate;return i===ot||s!==null&&s===ot}function jy(i,s){dl=cc=!0;var l=i.pending;l===null?s.next=s:(s.next=l.next,l.next=s),i.pending=s}function Dy(i,s,l){if((l&4194240)!==0){var d=s.lanes;d&=i.pendingLanes,l|=d,s.lanes=l,fi(i,l)}}var fc={readContext:kn,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useInsertionEffect:Wt,useLayoutEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useMutableSource:Wt,useSyncExternalStore:Wt,useId:Wt,unstable_isNewReconciler:!1},vS={readContext:kn,useCallback:function(i,s){return mr().memoizedState=[i,s===void 0?null:s],i},useContext:kn,useEffect:Ty,useImperativeHandle:function(i,s,l){return l=l!=null?l.concat([i]):null,hc(4194308,4,Py.bind(null,s,i),l)},useLayoutEffect:function(i,s){return hc(4194308,4,i,s)},useInsertionEffect:function(i,s){return hc(4,2,i,s)},useMemo:function(i,s){var l=mr();return s=s===void 0?null:s,i=i(),l.memoizedState=[i,s],i},useReducer:function(i,s,l){var d=mr();return s=l!==void 0?l(s):s,d.memoizedState=d.baseState=s,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:s},d.queue=i,i=i.dispatch=gS.bind(null,ot,i),[d.memoizedState,i]},useRef:function(i){var s=mr();return i={current:i},s.memoizedState=i},useState:xy,useDebugValue:Gd,useDeferredValue:function(i){return mr().memoizedState=i},useTransition:function(){var i=xy(!1),s=i[0];return i=mS.bind(null,i[1]),mr().memoizedState=i,[s,i]},useMutableSource:function(){},useSyncExternalStore:function(i,s,l){var d=ot,g=mr();if(rt){if(l===void 0)throw Error(t(407));l=l()}else{if(l=s(),Nt===null)throw Error(t(349));(Ps&30)!==0||gy(d,s,l)}g.memoizedState=l;var v={value:l,getSnapshot:s};return g.queue=v,Ty(vy.bind(null,d,v,i),[i]),d.flags|=2048,ml(9,yy.bind(null,d,v,l,s),void 0,null),l},useId:function(){var i=mr(),s=Nt.identifierPrefix;if(rt){var l=zr,d=Br;l=(d&~(1<<32-Jt(d)-1)).toString(32)+l,s=":"+s+"R"+l,l=fl++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=pS++,s=":"+s+"r"+l.toString(32)+":";return i.memoizedState=s},unstable_isNewReconciler:!1},wS={readContext:kn,useCallback:Ay,useContext:kn,useEffect:Hd,useImperativeHandle:by,useInsertionEffect:Iy,useLayoutEffect:Sy,useMemo:ky,useReducer:Wd,useRef:Ey,useState:function(){return Wd(pl)},useDebugValue:Gd,useDeferredValue:function(i){var s=Cn();return Cy(s,It.memoizedState,i)},useTransition:function(){var i=Wd(pl)[0],s=Cn().memoizedState;return[i,s]},useMutableSource:py,useSyncExternalStore:my,useId:Ny,unstable_isNewReconciler:!1},_S={readContext:kn,useCallback:Ay,useContext:kn,useEffect:Hd,useImperativeHandle:by,useInsertionEffect:Iy,useLayoutEffect:Sy,useMemo:ky,useReducer:qd,useRef:Ey,useState:function(){return qd(pl)},useDebugValue:Gd,useDeferredValue:function(i){var s=Cn();return It===null?s.memoizedState=i:Cy(s,It.memoizedState,i)},useTransition:function(){var i=qd(pl)[0],s=Cn().memoizedState;return[i,s]},useMutableSource:py,useSyncExternalStore:my,useId:Ny,unstable_isNewReconciler:!1};function Qn(i,s){if(i&&i.defaultProps){s=X({},s),i=i.defaultProps;for(var l in i)s[l]===void 0&&(s[l]=i[l]);return s}return s}function Kd(i,s,l,d){s=i.memoizedState,l=l(d,s),l=l==null?s:X({},s,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var pc={isMounted:function(i){return(i=i._reactInternals)?Un(i)===i:!1},enqueueSetState:function(i,s,l){i=i._reactInternals;var d=tn(),g=Ai(i),v=Wr(d,g);v.payload=s,l!=null&&(v.callback=l),s=Ii(i,v,g),s!==null&&(Jn(s,i,g,d),oc(s,i,g))},enqueueReplaceState:function(i,s,l){i=i._reactInternals;var d=tn(),g=Ai(i),v=Wr(d,g);v.tag=1,v.payload=s,l!=null&&(v.callback=l),s=Ii(i,v,g),s!==null&&(Jn(s,i,g,d),oc(s,i,g))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var l=tn(),d=Ai(i),g=Wr(l,d);g.tag=2,s!=null&&(g.callback=s),s=Ii(i,g,d),s!==null&&(Jn(s,i,d,l),oc(s,i,d))}};function Vy(i,s,l,d,g,v,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,v,T):s.prototype&&s.prototype.isPureReactComponent?!tl(l,d)||!tl(g,v):!0}function Ly(i,s,l){var d=!1,g=xi,v=s.contextType;return typeof v=="object"&&v!==null?v=kn(v):(g=an(s)?xs:$t.current,d=s.contextTypes,v=(d=d!=null)?Fo(i,g):xi),s=new s(l,v),i.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=pc,i.stateNode=s,s._reactInternals=i,d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=g,i.__reactInternalMemoizedMaskedChildContext=v),s}function Oy(i,s,l,d){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,d),s.state!==i&&pc.enqueueReplaceState(s,s.state,null)}function Qd(i,s,l,d){var g=i.stateNode;g.props=l,g.state=i.memoizedState,g.refs={},Vd(i);var v=s.contextType;typeof v=="object"&&v!==null?g.context=kn(v):(v=an(s)?xs:$t.current,g.context=Fo(i,v)),g.state=i.memoizedState,v=s.getDerivedStateFromProps,typeof v=="function"&&(Kd(i,s,v,l),g.state=i.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(s=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),s!==g.state&&pc.enqueueReplaceState(g,g.state,null),ac(i,l,g,d),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308)}function Go(i,s){try{var l="",d=s;do l+=ce(d),d=d.return;while(d);var g=l}catch(v){g=`
Error generating stack: `+v.message+`
`+v.stack}return{value:i,source:s,stack:g,digest:null}}function Yd(i,s,l){return{value:i,source:null,stack:l??null,digest:s??null}}function Xd(i,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var xS=typeof WeakMap=="function"?WeakMap:Map;function My(i,s,l){l=Wr(-1,l),l.tag=3,l.payload={element:null};var d=s.value;return l.callback=function(){xc||(xc=!0,ff=d),Xd(i,s)},l}function Fy(i,s,l){l=Wr(-1,l),l.tag=3;var d=i.type.getDerivedStateFromError;if(typeof d=="function"){var g=s.value;l.payload=function(){return d(g)},l.callback=function(){Xd(i,s)}}var v=i.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(l.callback=function(){Xd(i,s),typeof d!="function"&&(Pi===null?Pi=new Set([this]):Pi.add(this));var T=s.stack;this.componentDidCatch(s.value,{componentStack:T!==null?T:""})}),l}function Uy(i,s,l){var d=i.pingCache;if(d===null){d=i.pingCache=new xS;var g=new Set;d.set(s,g)}else g=d.get(s),g===void 0&&(g=new Set,d.set(s,g));g.has(l)||(g.add(l),i=VS.bind(null,i,s,l),s.then(i,i))}function By(i){do{var s;if((s=i.tag===13)&&(s=i.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return i;i=i.return}while(i!==null);return null}function zy(i,s,l,d,g){return(i.mode&1)===0?(i===s?i.flags|=65536:(i.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=Wr(-1,1),s.tag=2,Ii(l,s,1))),l.lanes|=1),i):(i.flags|=65536,i.lanes=g,i)}var ES=Q.ReactCurrentOwner,ln=!1;function en(i,s,l,d){s.child=i===null?ly(s,null,l,d):$o(s,i.child,l,d)}function $y(i,s,l,d,g){l=l.render;var v=s.ref;return qo(s,g),d=zd(i,s,l,d,v,g),l=$d(),i!==null&&!ln?(s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~g,qr(i,s,g)):(rt&&l&&Sd(s),s.flags|=1,en(i,s,d,g),s.child)}function Wy(i,s,l,d,g){if(i===null){var v=l.type;return typeof v=="function"&&!_f(v)&&v.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=v,qy(i,s,v,d,g)):(i=bc(l.type,null,d,s,s.mode,g),i.ref=s.ref,i.return=s,s.child=i)}if(v=i.child,(i.lanes&g)===0){var T=v.memoizedProps;if(l=l.compare,l=l!==null?l:tl,l(T,d)&&i.ref===s.ref)return qr(i,s,g)}return s.flags|=1,i=Ci(v,d),i.ref=s.ref,i.return=s,s.child=i}function qy(i,s,l,d,g){if(i!==null){var v=i.memoizedProps;if(tl(v,d)&&i.ref===s.ref)if(ln=!1,s.pendingProps=d=v,(i.lanes&g)!==0)(i.flags&131072)!==0&&(ln=!0);else return s.lanes=i.lanes,qr(i,s,g)}return Jd(i,s,l,d,g)}function Hy(i,s,l){var d=s.pendingProps,g=d.children,v=i!==null?i.memoizedState:null;if(d.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je(Qo,_n),_n|=l;else{if((l&1073741824)===0)return i=v!==null?v.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:i,cachePool:null,transitions:null},s.updateQueue=null,Je(Qo,_n),_n|=i,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=v!==null?v.baseLanes:l,Je(Qo,_n),_n|=d}else v!==null?(d=v.baseLanes|l,s.memoizedState=null):d=l,Je(Qo,_n),_n|=d;return en(i,s,g,l),s.child}function Gy(i,s){var l=s.ref;(i===null&&l!==null||i!==null&&i.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function Jd(i,s,l,d,g){var v=an(l)?xs:$t.current;return v=Fo(s,v),qo(s,g),l=zd(i,s,l,d,v,g),d=$d(),i!==null&&!ln?(s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~g,qr(i,s,g)):(rt&&d&&Sd(s),s.flags|=1,en(i,s,l,g),s.child)}function Ky(i,s,l,d,g){if(an(l)){var v=!0;Ju(s)}else v=!1;if(qo(s,g),s.stateNode===null)gc(i,s),Ly(s,l,d),Qd(s,l,d,g),d=!0;else if(i===null){var T=s.stateNode,k=s.memoizedProps;T.props=k;var O=T.context,G=l.contextType;typeof G=="object"&&G!==null?G=kn(G):(G=an(l)?xs:$t.current,G=Fo(s,G));var ee=l.getDerivedStateFromProps,re=typeof ee=="function"||typeof T.getSnapshotBeforeUpdate=="function";re||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(k!==d||O!==G)&&Oy(s,T,d,G),Ti=!1;var J=s.memoizedState;T.state=J,ac(s,d,T,g),O=s.memoizedState,k!==d||J!==O||on.current||Ti?(typeof ee=="function"&&(Kd(s,l,ee,d),O=s.memoizedState),(k=Ti||Vy(s,l,k,d,J,O,G))?(re||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(s.flags|=4194308)):(typeof T.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=O),T.props=d,T.state=O,T.context=G,d=k):(typeof T.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{T=s.stateNode,cy(i,s),k=s.memoizedProps,G=s.type===s.elementType?k:Qn(s.type,k),T.props=G,re=s.pendingProps,J=T.context,O=l.contextType,typeof O=="object"&&O!==null?O=kn(O):(O=an(l)?xs:$t.current,O=Fo(s,O));var he=l.getDerivedStateFromProps;(ee=typeof he=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(k!==re||J!==O)&&Oy(s,T,d,O),Ti=!1,J=s.memoizedState,T.state=J,ac(s,d,T,g);var fe=s.memoizedState;k!==re||J!==fe||on.current||Ti?(typeof he=="function"&&(Kd(s,l,he,d),fe=s.memoizedState),(G=Ti||Vy(s,l,G,d,J,fe,O)||!1)?(ee||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(d,fe,O),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(d,fe,O)),typeof T.componentDidUpdate=="function"&&(s.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof T.componentDidUpdate!="function"||k===i.memoizedProps&&J===i.memoizedState||(s.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||k===i.memoizedProps&&J===i.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=fe),T.props=d,T.state=fe,T.context=O,d=G):(typeof T.componentDidUpdate!="function"||k===i.memoizedProps&&J===i.memoizedState||(s.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||k===i.memoizedProps&&J===i.memoizedState||(s.flags|=1024),d=!1)}return Zd(i,s,l,d,v,g)}function Zd(i,s,l,d,g,v){Gy(i,s);var T=(s.flags&128)!==0;if(!d&&!T)return g&&Zg(s,l,!1),qr(i,s,v);d=s.stateNode,ES.current=s;var k=T&&typeof l.getDerivedStateFromError!="function"?null:d.render();return s.flags|=1,i!==null&&T?(s.child=$o(s,i.child,null,v),s.child=$o(s,null,k,v)):en(i,s,k,v),s.memoizedState=d.state,g&&Zg(s,l,!0),s.child}function Qy(i){var s=i.stateNode;s.pendingContext?Xg(i,s.pendingContext,s.pendingContext!==s.context):s.context&&Xg(i,s.context,!1),Ld(i,s.containerInfo)}function Yy(i,s,l,d,g){return zo(),kd(g),s.flags|=256,en(i,s,l,d),s.child}var ef={dehydrated:null,treeContext:null,retryLane:0};function tf(i){return{baseLanes:i,cachePool:null,transitions:null}}function Xy(i,s,l){var d=s.pendingProps,g=st.current,v=!1,T=(s.flags&128)!==0,k;if((k=T)||(k=i!==null&&i.memoizedState===null?!1:(g&2)!==0),k?(v=!0,s.flags&=-129):(i===null||i.memoizedState!==null)&&(g|=1),Je(st,g&1),i===null)return Ad(s),i=s.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((s.mode&1)===0?s.lanes=1:i.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(T=d.children,i=d.fallback,v?(d=s.mode,v=s.child,T={mode:"hidden",children:T},(d&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=T):v=Ac(T,d,0,null),i=Ns(i,d,l,null),v.return=s,i.return=s,v.sibling=i,s.child=v,s.child.memoizedState=tf(l),s.memoizedState=ef,i):nf(s,T));if(g=i.memoizedState,g!==null&&(k=g.dehydrated,k!==null))return TS(i,s,T,d,k,g,l);if(v){v=d.fallback,T=s.mode,g=i.child,k=g.sibling;var O={mode:"hidden",children:d.children};return(T&1)===0&&s.child!==g?(d=s.child,d.childLanes=0,d.pendingProps=O,s.deletions=null):(d=Ci(g,O),d.subtreeFlags=g.subtreeFlags&14680064),k!==null?v=Ci(k,v):(v=Ns(v,T,l,null),v.flags|=2),v.return=s,d.return=s,d.sibling=v,s.child=d,d=v,v=s.child,T=i.child.memoizedState,T=T===null?tf(l):{baseLanes:T.baseLanes|l,cachePool:null,transitions:T.transitions},v.memoizedState=T,v.childLanes=i.childLanes&~l,s.memoizedState=ef,d}return v=i.child,i=v.sibling,d=Ci(v,{mode:"visible",children:d.children}),(s.mode&1)===0&&(d.lanes=l),d.return=s,d.sibling=null,i!==null&&(l=s.deletions,l===null?(s.deletions=[i],s.flags|=16):l.push(i)),s.child=d,s.memoizedState=null,d}function nf(i,s){return s=Ac({mode:"visible",children:s},i.mode,0,null),s.return=i,i.child=s}function mc(i,s,l,d){return d!==null&&kd(d),$o(s,i.child,null,l),i=nf(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function TS(i,s,l,d,g,v,T){if(l)return s.flags&256?(s.flags&=-257,d=Yd(Error(t(422))),mc(i,s,T,d)):s.memoizedState!==null?(s.child=i.child,s.flags|=128,null):(v=d.fallback,g=s.mode,d=Ac({mode:"visible",children:d.children},g,0,null),v=Ns(v,g,T,null),v.flags|=2,d.return=s,v.return=s,d.sibling=v,s.child=d,(s.mode&1)!==0&&$o(s,i.child,null,T),s.child.memoizedState=tf(T),s.memoizedState=ef,v);if((s.mode&1)===0)return mc(i,s,T,null);if(g.data==="$!"){if(d=g.nextSibling&&g.nextSibling.dataset,d)var k=d.dgst;return d=k,v=Error(t(419)),d=Yd(v,d,void 0),mc(i,s,T,d)}if(k=(T&i.childLanes)!==0,ln||k){if(d=Nt,d!==null){switch(T&-T){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(d.suspendedLanes|T))!==0?0:g,g!==0&&g!==v.retryLane&&(v.retryLane=g,$r(i,g),Jn(d,i,g,-1))}return wf(),d=Yd(Error(t(421))),mc(i,s,T,d)}return g.data==="$?"?(s.flags|=128,s.child=i.child,s=LS.bind(null,i),g._reactRetry=s,null):(i=v.treeContext,wn=wi(g.nextSibling),vn=s,rt=!0,Kn=null,i!==null&&(bn[An++]=Br,bn[An++]=zr,bn[An++]=Es,Br=i.id,zr=i.overflow,Es=s),s=nf(s,d.children),s.flags|=4096,s)}function Jy(i,s,l){i.lanes|=s;var d=i.alternate;d!==null&&(d.lanes|=s),jd(i.return,s,l)}function rf(i,s,l,d,g){var v=i.memoizedState;v===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:g}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=d,v.tail=l,v.tailMode=g)}function Zy(i,s,l){var d=s.pendingProps,g=d.revealOrder,v=d.tail;if(en(i,s,d.children,l),d=st.current,(d&2)!==0)d=d&1|2,s.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Jy(i,l,s);else if(i.tag===19)Jy(i,l,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}d&=1}if(Je(st,d),(s.mode&1)===0)s.memoizedState=null;else switch(g){case"forwards":for(l=s.child,g=null;l!==null;)i=l.alternate,i!==null&&lc(i)===null&&(g=l),l=l.sibling;l=g,l===null?(g=s.child,s.child=null):(g=l.sibling,l.sibling=null),rf(s,!1,g,l,v);break;case"backwards":for(l=null,g=s.child,s.child=null;g!==null;){if(i=g.alternate,i!==null&&lc(i)===null){s.child=g;break}i=g.sibling,g.sibling=l,l=g,g=i}rf(s,!0,l,null,v);break;case"together":rf(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function gc(i,s){(s.mode&1)===0&&i!==null&&(i.alternate=null,s.alternate=null,s.flags|=2)}function qr(i,s,l){if(i!==null&&(s.dependencies=i.dependencies),bs|=s.lanes,(l&s.childLanes)===0)return null;if(i!==null&&s.child!==i.child)throw Error(t(153));if(s.child!==null){for(i=s.child,l=Ci(i,i.pendingProps),s.child=l,l.return=s;i.sibling!==null;)i=i.sibling,l=l.sibling=Ci(i,i.pendingProps),l.return=s;l.sibling=null}return s.child}function IS(i,s,l){switch(s.tag){case 3:Qy(s),zo();break;case 5:fy(s);break;case 1:an(s.type)&&Ju(s);break;case 4:Ld(s,s.stateNode.containerInfo);break;case 10:var d=s.type._context,g=s.memoizedProps.value;Je(ic,d._currentValue),d._currentValue=g;break;case 13:if(d=s.memoizedState,d!==null)return d.dehydrated!==null?(Je(st,st.current&1),s.flags|=128,null):(l&s.child.childLanes)!==0?Xy(i,s,l):(Je(st,st.current&1),i=qr(i,s,l),i!==null?i.sibling:null);Je(st,st.current&1);break;case 19:if(d=(l&s.childLanes)!==0,(i.flags&128)!==0){if(d)return Zy(i,s,l);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Je(st,st.current),d)break;return null;case 22:case 23:return s.lanes=0,Hy(i,s,l)}return qr(i,s,l)}var ev,sf,tv,nv;ev=function(i,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)i.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},sf=function(){},tv=function(i,s,l,d){var g=i.memoizedProps;if(g!==d){i=s.stateNode,Ss(pr.current);var v=null;switch(l){case"input":g=is(i,g),d=is(i,d),v=[];break;case"select":g=X({},g,{value:void 0}),d=X({},d,{value:void 0}),v=[];break;case"textarea":g=Ca(i,g),d=Ca(i,d),v=[];break;default:typeof g.onClick!="function"&&typeof d.onClick=="function"&&(i.onclick=Qu)}La(l,d);var T;l=null;for(G in g)if(!d.hasOwnProperty(G)&&g.hasOwnProperty(G)&&g[G]!=null)if(G==="style"){var k=g[G];for(T in k)k.hasOwnProperty(T)&&(l||(l={}),l[T]="")}else G!=="dangerouslySetInnerHTML"&&G!=="children"&&G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&G!=="autoFocus"&&(o.hasOwnProperty(G)?v||(v=[]):(v=v||[]).push(G,null));for(G in d){var O=d[G];if(k=g?.[G],d.hasOwnProperty(G)&&O!==k&&(O!=null||k!=null))if(G==="style")if(k){for(T in k)!k.hasOwnProperty(T)||O&&O.hasOwnProperty(T)||(l||(l={}),l[T]="");for(T in O)O.hasOwnProperty(T)&&k[T]!==O[T]&&(l||(l={}),l[T]=O[T])}else l||(v||(v=[]),v.push(G,l)),l=O;else G==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,k=k?k.__html:void 0,O!=null&&k!==O&&(v=v||[]).push(G,O)):G==="children"?typeof O!="string"&&typeof O!="number"||(v=v||[]).push(G,""+O):G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&(o.hasOwnProperty(G)?(O!=null&&G==="onScroll"&&et("scroll",i),v||k===O||(v=[])):(v=v||[]).push(G,O))}l&&(v=v||[]).push("style",l);var G=v;(s.updateQueue=G)&&(s.flags|=4)}},nv=function(i,s,l,d){l!==d&&(s.flags|=4)};function gl(i,s){if(!rt)switch(i.tailMode){case"hidden":s=i.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function qt(i){var s=i.alternate!==null&&i.alternate.child===i.child,l=0,d=0;if(s)for(var g=i.child;g!==null;)l|=g.lanes|g.childLanes,d|=g.subtreeFlags&14680064,d|=g.flags&14680064,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)l|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=d,i.childLanes=l,s}function SS(i,s,l){var d=s.pendingProps;switch(Pd(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(s),null;case 1:return an(s.type)&&Xu(),qt(s),null;case 3:return d=s.stateNode,Ho(),tt(on),tt($t),Fd(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(i===null||i.child===null)&&(nc(s)?s.flags|=4:i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Kn!==null&&(gf(Kn),Kn=null))),sf(i,s),qt(s),null;case 5:Od(s);var g=Ss(hl.current);if(l=s.type,i!==null&&s.stateNode!=null)tv(i,s,l,d,g),i.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!d){if(s.stateNode===null)throw Error(t(166));return qt(s),null}if(i=Ss(pr.current),nc(s)){d=s.stateNode,l=s.type;var v=s.memoizedProps;switch(d[fr]=s,d[ol]=v,i=(s.mode&1)!==0,l){case"dialog":et("cancel",d),et("close",d);break;case"iframe":case"object":case"embed":et("load",d);break;case"video":case"audio":for(g=0;g<rl.length;g++)et(rl[g],d);break;case"source":et("error",d);break;case"img":case"image":case"link":et("error",d),et("load",d);break;case"details":et("toggle",d);break;case"input":oo(d,v),et("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!v.multiple},et("invalid",d);break;case"textarea":lo(d,v),et("invalid",d)}La(l,v),g=null;for(var T in v)if(v.hasOwnProperty(T)){var k=v[T];T==="children"?typeof k=="string"?d.textContent!==k&&(v.suppressHydrationWarning!==!0&&Ku(d.textContent,k,i),g=["children",k]):typeof k=="number"&&d.textContent!==""+k&&(v.suppressHydrationWarning!==!0&&Ku(d.textContent,k,i),g=["children",""+k]):o.hasOwnProperty(T)&&k!=null&&T==="onScroll"&&et("scroll",d)}switch(l){case"input":Dt(d),_u(d,v,!0);break;case"textarea":Dt(d),Na(d);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(d.onclick=Qu)}d=g,s.updateQueue=d,d!==null&&(s.flags|=4)}else{T=g.nodeType===9?g:g.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=xt(l)),i==="http://www.w3.org/1999/xhtml"?l==="script"?(i=T.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof d.is=="string"?i=T.createElement(l,{is:d.is}):(i=T.createElement(l),l==="select"&&(T=i,d.multiple?T.multiple=!0:d.size&&(T.size=d.size))):i=T.createElementNS(i,l),i[fr]=s,i[ol]=d,ev(i,s,!1,!1),s.stateNode=i;e:{switch(T=Oa(l,d),l){case"dialog":et("cancel",i),et("close",i),g=d;break;case"iframe":case"object":case"embed":et("load",i),g=d;break;case"video":case"audio":for(g=0;g<rl.length;g++)et(rl[g],i);g=d;break;case"source":et("error",i),g=d;break;case"img":case"image":case"link":et("error",i),et("load",i),g=d;break;case"details":et("toggle",i),g=d;break;case"input":oo(i,d),g=is(i,d),et("invalid",i);break;case"option":g=d;break;case"select":i._wrapperState={wasMultiple:!!d.multiple},g=X({},d,{value:void 0}),et("invalid",i);break;case"textarea":lo(i,d),g=Ca(i,d),et("invalid",i);break;default:g=d}La(l,g),k=g;for(v in k)if(k.hasOwnProperty(v)){var O=k[v];v==="style"?Da(i,O):v==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,O!=null&&Ra(i,O)):v==="children"?typeof O=="string"?(l!=="textarea"||O!=="")&&li(i,O):typeof O=="number"&&li(i,""+O):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(o.hasOwnProperty(v)?O!=null&&v==="onScroll"&&et("scroll",i):O!=null&&M(i,v,O,T))}switch(l){case"input":Dt(i),_u(i,d,!1);break;case"textarea":Dt(i),Na(i);break;case"option":d.value!=null&&i.setAttribute("value",""+Be(d.value));break;case"select":i.multiple=!!d.multiple,v=d.value,v!=null?Nr(i,!!d.multiple,v,!1):d.defaultValue!=null&&Nr(i,!!d.multiple,d.defaultValue,!0);break;default:typeof g.onClick=="function"&&(i.onclick=Qu)}switch(l){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return qt(s),null;case 6:if(i&&s.stateNode!=null)nv(i,s,i.memoizedProps,d);else{if(typeof d!="string"&&s.stateNode===null)throw Error(t(166));if(l=Ss(hl.current),Ss(pr.current),nc(s)){if(d=s.stateNode,l=s.memoizedProps,d[fr]=s,(v=d.nodeValue!==l)&&(i=vn,i!==null))switch(i.tag){case 3:Ku(d.nodeValue,l,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Ku(d.nodeValue,l,(i.mode&1)!==0)}v&&(s.flags|=4)}else d=(l.nodeType===9?l:l.ownerDocument).createTextNode(d),d[fr]=s,s.stateNode=d}return qt(s),null;case 13:if(tt(st),d=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(rt&&wn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)sy(),zo(),s.flags|=98560,v=!1;else if(v=nc(s),d!==null&&d.dehydrated!==null){if(i===null){if(!v)throw Error(t(318));if(v=s.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[fr]=s}else zo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;qt(s),v=!1}else Kn!==null&&(gf(Kn),Kn=null),v=!0;if(!v)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=l,s):(d=d!==null,d!==(i!==null&&i.memoizedState!==null)&&d&&(s.child.flags|=8192,(s.mode&1)!==0&&(i===null||(st.current&1)!==0?St===0&&(St=3):wf())),s.updateQueue!==null&&(s.flags|=4),qt(s),null);case 4:return Ho(),sf(i,s),i===null&&il(s.stateNode.containerInfo),qt(s),null;case 10:return Rd(s.type._context),qt(s),null;case 17:return an(s.type)&&Xu(),qt(s),null;case 19:if(tt(st),v=s.memoizedState,v===null)return qt(s),null;if(d=(s.flags&128)!==0,T=v.rendering,T===null)if(d)gl(v,!1);else{if(St!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(T=lc(i),T!==null){for(s.flags|=128,gl(v,!1),d=T.updateQueue,d!==null&&(s.updateQueue=d,s.flags|=4),s.subtreeFlags=0,d=l,l=s.child;l!==null;)v=l,i=d,v.flags&=14680066,T=v.alternate,T===null?(v.childLanes=0,v.lanes=i,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=T.childLanes,v.lanes=T.lanes,v.child=T.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=T.memoizedProps,v.memoizedState=T.memoizedState,v.updateQueue=T.updateQueue,v.type=T.type,i=T.dependencies,v.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),l=l.sibling;return Je(st,st.current&1|2),s.child}i=i.sibling}v.tail!==null&&Xe()>Yo&&(s.flags|=128,d=!0,gl(v,!1),s.lanes=4194304)}else{if(!d)if(i=lc(T),i!==null){if(s.flags|=128,d=!0,l=i.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),gl(v,!0),v.tail===null&&v.tailMode==="hidden"&&!T.alternate&&!rt)return qt(s),null}else 2*Xe()-v.renderingStartTime>Yo&&l!==1073741824&&(s.flags|=128,d=!0,gl(v,!1),s.lanes=4194304);v.isBackwards?(T.sibling=s.child,s.child=T):(l=v.last,l!==null?l.sibling=T:s.child=T,v.last=T)}return v.tail!==null?(s=v.tail,v.rendering=s,v.tail=s.sibling,v.renderingStartTime=Xe(),s.sibling=null,l=st.current,Je(st,d?l&1|2:l&1),s):(qt(s),null);case 22:case 23:return vf(),d=s.memoizedState!==null,i!==null&&i.memoizedState!==null!==d&&(s.flags|=8192),d&&(s.mode&1)!==0?(_n&1073741824)!==0&&(qt(s),s.subtreeFlags&6&&(s.flags|=8192)):qt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function PS(i,s){switch(Pd(s),s.tag){case 1:return an(s.type)&&Xu(),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Ho(),tt(on),tt($t),Fd(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 5:return Od(s),null;case 13:if(tt(st),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(t(340));zo()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return tt(st),null;case 4:return Ho(),null;case 10:return Rd(s.type._context),null;case 22:case 23:return vf(),null;case 24:return null;default:return null}}var yc=!1,Ht=!1,bS=typeof WeakSet=="function"?WeakSet:Set,de=null;function Ko(i,s){var l=i.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(d){ut(i,s,d)}else l.current=null}function of(i,s,l){try{l()}catch(d){ut(i,s,d)}}var rv=!1;function AS(i,s){if(yd=gi,i=Vg(),ud(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var g=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var T=0,k=-1,O=-1,G=0,ee=0,re=i,J=null;t:for(;;){for(var he;re!==l||g!==0&&re.nodeType!==3||(k=T+g),re!==v||d!==0&&re.nodeType!==3||(O=T+d),re.nodeType===3&&(T+=re.nodeValue.length),(he=re.firstChild)!==null;)J=re,re=he;for(;;){if(re===i)break t;if(J===l&&++G===g&&(k=T),J===v&&++ee===d&&(O=T),(he=re.nextSibling)!==null)break;re=J,J=re.parentNode}re=he}l=k===-1||O===-1?null:{start:k,end:O}}else l=null}l=l||{start:0,end:0}}else l=null;for(vd={focusedElem:i,selectionRange:l},gi=!1,de=s;de!==null;)if(s=de,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,de=i;else for(;de!==null;){s=de;try{var fe=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var pe=fe.memoizedProps,dt=fe.memoizedState,W=s.stateNode,U=W.getSnapshotBeforeUpdate(s.elementType===s.type?pe:Qn(s.type,pe),dt);W.__reactInternalSnapshotBeforeUpdate=U}break;case 3:var q=s.stateNode.containerInfo;q.nodeType===1?q.textContent="":q.nodeType===9&&q.documentElement&&q.removeChild(q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(oe){ut(s,s.return,oe)}if(i=s.sibling,i!==null){i.return=s.return,de=i;break}de=s.return}return fe=rv,rv=!1,fe}function yl(i,s,l){var d=s.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var g=d=d.next;do{if((g.tag&i)===i){var v=g.destroy;g.destroy=void 0,v!==void 0&&of(s,l,v)}g=g.next}while(g!==d)}}function vc(i,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&i)===i){var d=l.create;l.destroy=d()}l=l.next}while(l!==s)}}function af(i){var s=i.ref;if(s!==null){var l=i.stateNode;switch(i.tag){case 5:i=l;break;default:i=l}typeof s=="function"?s(i):s.current=i}}function iv(i){var s=i.alternate;s!==null&&(i.alternate=null,iv(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&(delete s[fr],delete s[ol],delete s[Ed],delete s[cS],delete s[hS])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function sv(i){return i.tag===5||i.tag===3||i.tag===4}function ov(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||sv(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function lf(i,s,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(i,s):l.insertBefore(i,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(i,l)):(s=l,s.appendChild(i)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Qu));else if(d!==4&&(i=i.child,i!==null))for(lf(i,s,l),i=i.sibling;i!==null;)lf(i,s,l),i=i.sibling}function uf(i,s,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,s?l.insertBefore(i,s):l.appendChild(i);else if(d!==4&&(i=i.child,i!==null))for(uf(i,s,l),i=i.sibling;i!==null;)uf(i,s,l),i=i.sibling}var Ot=null,Yn=!1;function Si(i,s,l){for(l=l.child;l!==null;)av(i,s,l),l=l.sibling}function av(i,s,l){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(fs,l)}catch{}switch(l.tag){case 5:Ht||Ko(l,s);case 6:var d=Ot,g=Yn;Ot=null,Si(i,s,l),Ot=d,Yn=g,Ot!==null&&(Yn?(i=Ot,l=l.stateNode,i.nodeType===8?i.parentNode.removeChild(l):i.removeChild(l)):Ot.removeChild(l.stateNode));break;case 18:Ot!==null&&(Yn?(i=Ot,l=l.stateNode,i.nodeType===8?xd(i.parentNode,l):i.nodeType===1&&xd(i,l),qn(i)):xd(Ot,l.stateNode));break;case 4:d=Ot,g=Yn,Ot=l.stateNode.containerInfo,Yn=!0,Si(i,s,l),Ot=d,Yn=g;break;case 0:case 11:case 14:case 15:if(!Ht&&(d=l.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){g=d=d.next;do{var v=g,T=v.destroy;v=v.tag,T!==void 0&&((v&2)!==0||(v&4)!==0)&&of(l,s,T),g=g.next}while(g!==d)}Si(i,s,l);break;case 1:if(!Ht&&(Ko(l,s),d=l.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=l.memoizedProps,d.state=l.memoizedState,d.componentWillUnmount()}catch(k){ut(l,s,k)}Si(i,s,l);break;case 21:Si(i,s,l);break;case 22:l.mode&1?(Ht=(d=Ht)||l.memoizedState!==null,Si(i,s,l),Ht=d):Si(i,s,l);break;default:Si(i,s,l)}}function lv(i){var s=i.updateQueue;if(s!==null){i.updateQueue=null;var l=i.stateNode;l===null&&(l=i.stateNode=new bS),s.forEach(function(d){var g=OS.bind(null,i,d);l.has(d)||(l.add(d),d.then(g,g))})}}function Xn(i,s){var l=s.deletions;if(l!==null)for(var d=0;d<l.length;d++){var g=l[d];try{var v=i,T=s,k=T;e:for(;k!==null;){switch(k.tag){case 5:Ot=k.stateNode,Yn=!1;break e;case 3:Ot=k.stateNode.containerInfo,Yn=!0;break e;case 4:Ot=k.stateNode.containerInfo,Yn=!0;break e}k=k.return}if(Ot===null)throw Error(t(160));av(v,T,g),Ot=null,Yn=!1;var O=g.alternate;O!==null&&(O.return=null),g.return=null}catch(G){ut(g,s,G)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)uv(s,i),s=s.sibling}function uv(i,s){var l=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Xn(s,i),gr(i),d&4){try{yl(3,i,i.return),vc(3,i)}catch(pe){ut(i,i.return,pe)}try{yl(5,i,i.return)}catch(pe){ut(i,i.return,pe)}}break;case 1:Xn(s,i),gr(i),d&512&&l!==null&&Ko(l,l.return);break;case 5:if(Xn(s,i),gr(i),d&512&&l!==null&&Ko(l,l.return),i.flags&32){var g=i.stateNode;try{li(g,"")}catch(pe){ut(i,i.return,pe)}}if(d&4&&(g=i.stateNode,g!=null)){var v=i.memoizedProps,T=l!==null?l.memoizedProps:v,k=i.type,O=i.updateQueue;if(i.updateQueue=null,O!==null)try{k==="input"&&v.type==="radio"&&v.name!=null&&Aa(g,v),Oa(k,T);var G=Oa(k,v);for(T=0;T<O.length;T+=2){var ee=O[T],re=O[T+1];ee==="style"?Da(g,re):ee==="dangerouslySetInnerHTML"?Ra(g,re):ee==="children"?li(g,re):M(g,ee,re,G)}switch(k){case"input":ka(g,v);break;case"textarea":uo(g,v);break;case"select":var J=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!v.multiple;var he=v.value;he!=null?Nr(g,!!v.multiple,he,!1):J!==!!v.multiple&&(v.defaultValue!=null?Nr(g,!!v.multiple,v.defaultValue,!0):Nr(g,!!v.multiple,v.multiple?[]:"",!1))}g[ol]=v}catch(pe){ut(i,i.return,pe)}}break;case 6:if(Xn(s,i),gr(i),d&4){if(i.stateNode===null)throw Error(t(162));g=i.stateNode,v=i.memoizedProps;try{g.nodeValue=v}catch(pe){ut(i,i.return,pe)}}break;case 3:if(Xn(s,i),gr(i),d&4&&l!==null&&l.memoizedState.isDehydrated)try{qn(s.containerInfo)}catch(pe){ut(i,i.return,pe)}break;case 4:Xn(s,i),gr(i);break;case 13:Xn(s,i),gr(i),g=i.child,g.flags&8192&&(v=g.memoizedState!==null,g.stateNode.isHidden=v,!v||g.alternate!==null&&g.alternate.memoizedState!==null||(df=Xe())),d&4&&lv(i);break;case 22:if(ee=l!==null&&l.memoizedState!==null,i.mode&1?(Ht=(G=Ht)||ee,Xn(s,i),Ht=G):Xn(s,i),gr(i),d&8192){if(G=i.memoizedState!==null,(i.stateNode.isHidden=G)&&!ee&&(i.mode&1)!==0)for(de=i,ee=i.child;ee!==null;){for(re=de=ee;de!==null;){switch(J=de,he=J.child,J.tag){case 0:case 11:case 14:case 15:yl(4,J,J.return);break;case 1:Ko(J,J.return);var fe=J.stateNode;if(typeof fe.componentWillUnmount=="function"){d=J,l=J.return;try{s=d,fe.props=s.memoizedProps,fe.state=s.memoizedState,fe.componentWillUnmount()}catch(pe){ut(d,l,pe)}}break;case 5:Ko(J,J.return);break;case 22:if(J.memoizedState!==null){dv(re);continue}}he!==null?(he.return=J,de=he):dv(re)}ee=ee.sibling}e:for(ee=null,re=i;;){if(re.tag===5){if(ee===null){ee=re;try{g=re.stateNode,G?(v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(k=re.stateNode,O=re.memoizedProps.style,T=O!=null&&O.hasOwnProperty("display")?O.display:null,k.style.display=ja("display",T))}catch(pe){ut(i,i.return,pe)}}}else if(re.tag===6){if(ee===null)try{re.stateNode.nodeValue=G?"":re.memoizedProps}catch(pe){ut(i,i.return,pe)}}else if((re.tag!==22&&re.tag!==23||re.memoizedState===null||re===i)&&re.child!==null){re.child.return=re,re=re.child;continue}if(re===i)break e;for(;re.sibling===null;){if(re.return===null||re.return===i)break e;ee===re&&(ee=null),re=re.return}ee===re&&(ee=null),re.sibling.return=re.return,re=re.sibling}}break;case 19:Xn(s,i),gr(i),d&4&&lv(i);break;case 21:break;default:Xn(s,i),gr(i)}}function gr(i){var s=i.flags;if(s&2){try{e:{for(var l=i.return;l!==null;){if(sv(l)){var d=l;break e}l=l.return}throw Error(t(160))}switch(d.tag){case 5:var g=d.stateNode;d.flags&32&&(li(g,""),d.flags&=-33);var v=ov(i);uf(i,v,g);break;case 3:case 4:var T=d.stateNode.containerInfo,k=ov(i);lf(i,k,T);break;default:throw Error(t(161))}}catch(O){ut(i,i.return,O)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function kS(i,s,l){de=i,cv(i)}function cv(i,s,l){for(var d=(i.mode&1)!==0;de!==null;){var g=de,v=g.child;if(g.tag===22&&d){var T=g.memoizedState!==null||yc;if(!T){var k=g.alternate,O=k!==null&&k.memoizedState!==null||Ht;k=yc;var G=Ht;if(yc=T,(Ht=O)&&!G)for(de=g;de!==null;)T=de,O=T.child,T.tag===22&&T.memoizedState!==null?fv(g):O!==null?(O.return=T,de=O):fv(g);for(;v!==null;)de=v,cv(v),v=v.sibling;de=g,yc=k,Ht=G}hv(i)}else(g.subtreeFlags&8772)!==0&&v!==null?(v.return=g,de=v):hv(i)}}function hv(i){for(;de!==null;){var s=de;if((s.flags&8772)!==0){var l=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Ht||vc(5,s);break;case 1:var d=s.stateNode;if(s.flags&4&&!Ht)if(l===null)d.componentDidMount();else{var g=s.elementType===s.type?l.memoizedProps:Qn(s.type,l.memoizedProps);d.componentDidUpdate(g,l.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var v=s.updateQueue;v!==null&&dy(s,v,d);break;case 3:var T=s.updateQueue;if(T!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}dy(s,T,l)}break;case 5:var k=s.stateNode;if(l===null&&s.flags&4){l=k;var O=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":O.autoFocus&&l.focus();break;case"img":O.src&&(l.src=O.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var G=s.alternate;if(G!==null){var ee=G.memoizedState;if(ee!==null){var re=ee.dehydrated;re!==null&&qn(re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ht||s.flags&512&&af(s)}catch(J){ut(s,s.return,J)}}if(s===i){de=null;break}if(l=s.sibling,l!==null){l.return=s.return,de=l;break}de=s.return}}function dv(i){for(;de!==null;){var s=de;if(s===i){de=null;break}var l=s.sibling;if(l!==null){l.return=s.return,de=l;break}de=s.return}}function fv(i){for(;de!==null;){var s=de;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{vc(4,s)}catch(O){ut(s,l,O)}break;case 1:var d=s.stateNode;if(typeof d.componentDidMount=="function"){var g=s.return;try{d.componentDidMount()}catch(O){ut(s,g,O)}}var v=s.return;try{af(s)}catch(O){ut(s,v,O)}break;case 5:var T=s.return;try{af(s)}catch(O){ut(s,T,O)}}}catch(O){ut(s,s.return,O)}if(s===i){de=null;break}var k=s.sibling;if(k!==null){k.return=s.return,de=k;break}de=s.return}}var CS=Math.ceil,wc=Q.ReactCurrentDispatcher,cf=Q.ReactCurrentOwner,Nn=Q.ReactCurrentBatchConfig,ze=0,Nt=null,yt=null,Mt=0,_n=0,Qo=_i(0),St=0,vl=null,bs=0,_c=0,hf=0,wl=null,un=null,df=0,Yo=1/0,Hr=null,xc=!1,ff=null,Pi=null,Ec=!1,bi=null,Tc=0,_l=0,pf=null,Ic=-1,Sc=0;function tn(){return(ze&6)!==0?Xe():Ic!==-1?Ic:Ic=Xe()}function Ai(i){return(i.mode&1)===0?1:(ze&2)!==0&&Mt!==0?Mt&-Mt:fS.transition!==null?(Sc===0&&(Sc=ms()),Sc):(i=Le,i!==0||(i=window.event,i=i===void 0?16:Ka(i.type)),i)}function Jn(i,s,l,d){if(50<_l)throw _l=0,pf=null,Error(t(185));di(i,l,d),((ze&2)===0||i!==Nt)&&(i===Nt&&((ze&2)===0&&(_c|=l),St===4&&ki(i,Mt)),cn(i,d),l===1&&ze===0&&(s.mode&1)===0&&(Yo=Xe()+500,Zu&&Ei()))}function cn(i,s){var l=i.callbackNode;Dr(i,s);var d=ps(i,i===Nt?Mt:0);if(d===0)l!==null&&$a(l),i.callbackNode=null,i.callbackPriority=0;else if(s=d&-d,i.callbackPriority!==s){if(l!=null&&$a(l),s===1)i.tag===0?dS(mv.bind(null,i)):ey(mv.bind(null,i)),lS(function(){(ze&6)===0&&Ei()}),l=null;else{switch(pi(d)){case 1:l=ds;break;case 4:l=ui;break;case 16:l=In;break;case 536870912:l=Su;break;default:l=In}l=Tv(l,pv.bind(null,i))}i.callbackPriority=s,i.callbackNode=l}}function pv(i,s){if(Ic=-1,Sc=0,(ze&6)!==0)throw Error(t(327));var l=i.callbackNode;if(Xo()&&i.callbackNode!==l)return null;var d=ps(i,i===Nt?Mt:0);if(d===0)return null;if((d&30)!==0||(d&i.expiredLanes)!==0||s)s=Pc(i,d);else{s=d;var g=ze;ze|=2;var v=yv();(Nt!==i||Mt!==s)&&(Hr=null,Yo=Xe()+500,ks(i,s));do try{jS();break}catch(k){gv(i,k)}while(!0);Nd(),wc.current=v,ze=g,yt!==null?s=0:(Nt=null,Mt=0,s=St)}if(s!==0){if(s===2&&(g=mn(i),g!==0&&(d=g,s=mf(i,g))),s===1)throw l=vl,ks(i,0),ki(i,d),cn(i,Xe()),l;if(s===6)ki(i,d);else{if(g=i.current.alternate,(d&30)===0&&!NS(g)&&(s=Pc(i,d),s===2&&(v=mn(i),v!==0&&(d=v,s=mf(i,v))),s===1))throw l=vl,ks(i,0),ki(i,d),cn(i,Xe()),l;switch(i.finishedWork=g,i.finishedLanes=d,s){case 0:case 1:throw Error(t(345));case 2:Cs(i,un,Hr);break;case 3:if(ki(i,d),(d&130023424)===d&&(s=df+500-Xe(),10<s)){if(ps(i,0)!==0)break;if(g=i.suspendedLanes,(g&d)!==d){tn(),i.pingedLanes|=i.suspendedLanes&g;break}i.timeoutHandle=_d(Cs.bind(null,i,un,Hr),s);break}Cs(i,un,Hr);break;case 4:if(ki(i,d),(d&4194240)===d)break;for(s=i.eventTimes,g=-1;0<d;){var T=31-Jt(d);v=1<<T,T=s[T],T>g&&(g=T),d&=~v}if(d=g,d=Xe()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*CS(d/1960))-d,10<d){i.timeoutHandle=_d(Cs.bind(null,i,un,Hr),d);break}Cs(i,un,Hr);break;case 5:Cs(i,un,Hr);break;default:throw Error(t(329))}}}return cn(i,Xe()),i.callbackNode===l?pv.bind(null,i):null}function mf(i,s){var l=wl;return i.current.memoizedState.isDehydrated&&(ks(i,s).flags|=256),i=Pc(i,s),i!==2&&(s=un,un=l,s!==null&&gf(s)),i}function gf(i){un===null?un=i:un.push.apply(un,i)}function NS(i){for(var s=i;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var d=0;d<l.length;d++){var g=l[d],v=g.getSnapshot;g=g.value;try{if(!Gn(v(),g))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ki(i,s){for(s&=~hf,s&=~_c,i.suspendedLanes|=s,i.pingedLanes&=~s,i=i.expirationTimes;0<s;){var l=31-Jt(s),d=1<<l;i[l]=-1,s&=~d}}function mv(i){if((ze&6)!==0)throw Error(t(327));Xo();var s=ps(i,0);if((s&1)===0)return cn(i,Xe()),null;var l=Pc(i,s);if(i.tag!==0&&l===2){var d=mn(i);d!==0&&(s=d,l=mf(i,d))}if(l===1)throw l=vl,ks(i,0),ki(i,s),cn(i,Xe()),l;if(l===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=s,Cs(i,un,Hr),cn(i,Xe()),null}function yf(i,s){var l=ze;ze|=1;try{return i(s)}finally{ze=l,ze===0&&(Yo=Xe()+500,Zu&&Ei())}}function As(i){bi!==null&&bi.tag===0&&(ze&6)===0&&Xo();var s=ze;ze|=1;var l=Nn.transition,d=Le;try{if(Nn.transition=null,Le=1,i)return i()}finally{Le=d,Nn.transition=l,ze=s,(ze&6)===0&&Ei()}}function vf(){_n=Qo.current,tt(Qo)}function ks(i,s){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;if(l!==-1&&(i.timeoutHandle=-1,aS(l)),yt!==null)for(l=yt.return;l!==null;){var d=l;switch(Pd(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&Xu();break;case 3:Ho(),tt(on),tt($t),Fd();break;case 5:Od(d);break;case 4:Ho();break;case 13:tt(st);break;case 19:tt(st);break;case 10:Rd(d.type._context);break;case 22:case 23:vf()}l=l.return}if(Nt=i,yt=i=Ci(i.current,null),Mt=_n=s,St=0,vl=null,hf=_c=bs=0,un=wl=null,Is!==null){for(s=0;s<Is.length;s++)if(l=Is[s],d=l.interleaved,d!==null){l.interleaved=null;var g=d.next,v=l.pending;if(v!==null){var T=v.next;v.next=g,d.next=T}l.pending=d}Is=null}return i}function gv(i,s){do{var l=yt;try{if(Nd(),uc.current=fc,cc){for(var d=ot.memoizedState;d!==null;){var g=d.queue;g!==null&&(g.pending=null),d=d.next}cc=!1}if(Ps=0,Ct=It=ot=null,dl=!1,fl=0,cf.current=null,l===null||l.return===null){St=1,vl=s,yt=null;break}e:{var v=i,T=l.return,k=l,O=s;if(s=Mt,k.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){var G=O,ee=k,re=ee.tag;if((ee.mode&1)===0&&(re===0||re===11||re===15)){var J=ee.alternate;J?(ee.updateQueue=J.updateQueue,ee.memoizedState=J.memoizedState,ee.lanes=J.lanes):(ee.updateQueue=null,ee.memoizedState=null)}var he=By(T);if(he!==null){he.flags&=-257,zy(he,T,k,v,s),he.mode&1&&Uy(v,G,s),s=he,O=G;var fe=s.updateQueue;if(fe===null){var pe=new Set;pe.add(O),s.updateQueue=pe}else fe.add(O);break e}else{if((s&1)===0){Uy(v,G,s),wf();break e}O=Error(t(426))}}else if(rt&&k.mode&1){var dt=By(T);if(dt!==null){(dt.flags&65536)===0&&(dt.flags|=256),zy(dt,T,k,v,s),kd(Go(O,k));break e}}v=O=Go(O,k),St!==4&&(St=2),wl===null?wl=[v]:wl.push(v),v=T;do{switch(v.tag){case 3:v.flags|=65536,s&=-s,v.lanes|=s;var W=My(v,O,s);hy(v,W);break e;case 1:k=O;var U=v.type,q=v.stateNode;if((v.flags&128)===0&&(typeof U.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(Pi===null||!Pi.has(q)))){v.flags|=65536,s&=-s,v.lanes|=s;var oe=Fy(v,k,s);hy(v,oe);break e}}v=v.return}while(v!==null)}wv(l)}catch(ye){s=ye,yt===l&&l!==null&&(yt=l=l.return);continue}break}while(!0)}function yv(){var i=wc.current;return wc.current=fc,i===null?fc:i}function wf(){(St===0||St===3||St===2)&&(St=4),Nt===null||(bs&268435455)===0&&(_c&268435455)===0||ki(Nt,Mt)}function Pc(i,s){var l=ze;ze|=2;var d=yv();(Nt!==i||Mt!==s)&&(Hr=null,ks(i,s));do try{RS();break}catch(g){gv(i,g)}while(!0);if(Nd(),ze=l,wc.current=d,yt!==null)throw Error(t(261));return Nt=null,Mt=0,St}function RS(){for(;yt!==null;)vv(yt)}function jS(){for(;yt!==null&&!Tu();)vv(yt)}function vv(i){var s=Ev(i.alternate,i,_n);i.memoizedProps=i.pendingProps,s===null?wv(i):yt=s,cf.current=null}function wv(i){var s=i;do{var l=s.alternate;if(i=s.return,(s.flags&32768)===0){if(l=SS(l,s,_n),l!==null){yt=l;return}}else{if(l=PS(l,s),l!==null){l.flags&=32767,yt=l;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{St=6,yt=null;return}}if(s=s.sibling,s!==null){yt=s;return}yt=s=i}while(s!==null);St===0&&(St=5)}function Cs(i,s,l){var d=Le,g=Nn.transition;try{Nn.transition=null,Le=1,DS(i,s,l,d)}finally{Nn.transition=g,Le=d}return null}function DS(i,s,l,d){do Xo();while(bi!==null);if((ze&6)!==0)throw Error(t(327));l=i.finishedWork;var g=i.finishedLanes;if(l===null)return null;if(i.finishedWork=null,i.finishedLanes=0,l===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var v=l.lanes|l.childLanes;if(Ye(i,v),i===Nt&&(yt=Nt=null,Mt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Ec||(Ec=!0,Tv(In,function(){return Xo(),null})),v=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||v){v=Nn.transition,Nn.transition=null;var T=Le;Le=1;var k=ze;ze|=4,cf.current=null,AS(i,l),uv(l,i),eS(vd),gi=!!yd,vd=yd=null,i.current=l,kS(l),td(),ze=k,Le=T,Nn.transition=v}else i.current=l;if(Ec&&(Ec=!1,bi=i,Tc=g),v=i.pendingLanes,v===0&&(Pi=null),Pu(l.stateNode),cn(i,Xe()),s!==null)for(d=i.onRecoverableError,l=0;l<s.length;l++)g=s[l],d(g.value,{componentStack:g.stack,digest:g.digest});if(xc)throw xc=!1,i=ff,ff=null,i;return(Tc&1)!==0&&i.tag!==0&&Xo(),v=i.pendingLanes,(v&1)!==0?i===pf?_l++:(_l=0,pf=i):_l=0,Ei(),null}function Xo(){if(bi!==null){var i=pi(Tc),s=Nn.transition,l=Le;try{if(Nn.transition=null,Le=16>i?16:i,bi===null)var d=!1;else{if(i=bi,bi=null,Tc=0,(ze&6)!==0)throw Error(t(331));var g=ze;for(ze|=4,de=i.current;de!==null;){var v=de,T=v.child;if((de.flags&16)!==0){var k=v.deletions;if(k!==null){for(var O=0;O<k.length;O++){var G=k[O];for(de=G;de!==null;){var ee=de;switch(ee.tag){case 0:case 11:case 15:yl(8,ee,v)}var re=ee.child;if(re!==null)re.return=ee,de=re;else for(;de!==null;){ee=de;var J=ee.sibling,he=ee.return;if(iv(ee),ee===G){de=null;break}if(J!==null){J.return=he,de=J;break}de=he}}}var fe=v.alternate;if(fe!==null){var pe=fe.child;if(pe!==null){fe.child=null;do{var dt=pe.sibling;pe.sibling=null,pe=dt}while(pe!==null)}}de=v}}if((v.subtreeFlags&2064)!==0&&T!==null)T.return=v,de=T;else e:for(;de!==null;){if(v=de,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:yl(9,v,v.return)}var W=v.sibling;if(W!==null){W.return=v.return,de=W;break e}de=v.return}}var U=i.current;for(de=U;de!==null;){T=de;var q=T.child;if((T.subtreeFlags&2064)!==0&&q!==null)q.return=T,de=q;else e:for(T=U;de!==null;){if(k=de,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:vc(9,k)}}catch(ye){ut(k,k.return,ye)}if(k===T){de=null;break e}var oe=k.sibling;if(oe!==null){oe.return=k.return,de=oe;break e}de=k.return}}if(ze=g,Ei(),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(fs,i)}catch{}d=!0}return d}finally{Le=l,Nn.transition=s}}return!1}function _v(i,s,l){s=Go(l,s),s=My(i,s,1),i=Ii(i,s,1),s=tn(),i!==null&&(di(i,1,s),cn(i,s))}function ut(i,s,l){if(i.tag===3)_v(i,i,l);else for(;s!==null;){if(s.tag===3){_v(s,i,l);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Pi===null||!Pi.has(d))){i=Go(l,i),i=Fy(s,i,1),s=Ii(s,i,1),i=tn(),s!==null&&(di(s,1,i),cn(s,i));break}}s=s.return}}function VS(i,s,l){var d=i.pingCache;d!==null&&d.delete(s),s=tn(),i.pingedLanes|=i.suspendedLanes&l,Nt===i&&(Mt&l)===l&&(St===4||St===3&&(Mt&130023424)===Mt&&500>Xe()-df?ks(i,0):hf|=l),cn(i,s)}function xv(i,s){s===0&&((i.mode&1)===0?s=1:(s=_o,_o<<=1,(_o&130023424)===0&&(_o=4194304)));var l=tn();i=$r(i,s),i!==null&&(di(i,s,l),cn(i,l))}function LS(i){var s=i.memoizedState,l=0;s!==null&&(l=s.retryLane),xv(i,l)}function OS(i,s){var l=0;switch(i.tag){case 13:var d=i.stateNode,g=i.memoizedState;g!==null&&(l=g.retryLane);break;case 19:d=i.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(s),xv(i,l)}var Ev;Ev=function(i,s,l){if(i!==null)if(i.memoizedProps!==s.pendingProps||on.current)ln=!0;else{if((i.lanes&l)===0&&(s.flags&128)===0)return ln=!1,IS(i,s,l);ln=(i.flags&131072)!==0}else ln=!1,rt&&(s.flags&1048576)!==0&&ty(s,tc,s.index);switch(s.lanes=0,s.tag){case 2:var d=s.type;gc(i,s),i=s.pendingProps;var g=Fo(s,$t.current);qo(s,l),g=zd(null,s,d,i,g,l);var v=$d();return s.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,an(d)?(v=!0,Ju(s)):v=!1,s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Vd(s),g.updater=pc,s.stateNode=g,g._reactInternals=s,Qd(s,d,i,l),s=Zd(null,s,d,!0,v,l)):(s.tag=0,rt&&v&&Sd(s),en(null,s,g,l),s=s.child),s;case 16:d=s.elementType;e:{switch(gc(i,s),i=s.pendingProps,g=d._init,d=g(d._payload),s.type=d,g=s.tag=FS(d),i=Qn(d,i),g){case 0:s=Jd(null,s,d,i,l);break e;case 1:s=Ky(null,s,d,i,l);break e;case 11:s=$y(null,s,d,i,l);break e;case 14:s=Wy(null,s,d,Qn(d.type,i),l);break e}throw Error(t(306,d,""))}return s;case 0:return d=s.type,g=s.pendingProps,g=s.elementType===d?g:Qn(d,g),Jd(i,s,d,g,l);case 1:return d=s.type,g=s.pendingProps,g=s.elementType===d?g:Qn(d,g),Ky(i,s,d,g,l);case 3:e:{if(Qy(s),i===null)throw Error(t(387));d=s.pendingProps,v=s.memoizedState,g=v.element,cy(i,s),ac(s,d,null,l);var T=s.memoizedState;if(d=T.element,v.isDehydrated)if(v={element:d,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},s.updateQueue.baseState=v,s.memoizedState=v,s.flags&256){g=Go(Error(t(423)),s),s=Yy(i,s,d,l,g);break e}else if(d!==g){g=Go(Error(t(424)),s),s=Yy(i,s,d,l,g);break e}else for(wn=wi(s.stateNode.containerInfo.firstChild),vn=s,rt=!0,Kn=null,l=ly(s,null,d,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(zo(),d===g){s=qr(i,s,l);break e}en(i,s,d,l)}s=s.child}return s;case 5:return fy(s),i===null&&Ad(s),d=s.type,g=s.pendingProps,v=i!==null?i.memoizedProps:null,T=g.children,wd(d,g)?T=null:v!==null&&wd(d,v)&&(s.flags|=32),Gy(i,s),en(i,s,T,l),s.child;case 6:return i===null&&Ad(s),null;case 13:return Xy(i,s,l);case 4:return Ld(s,s.stateNode.containerInfo),d=s.pendingProps,i===null?s.child=$o(s,null,d,l):en(i,s,d,l),s.child;case 11:return d=s.type,g=s.pendingProps,g=s.elementType===d?g:Qn(d,g),$y(i,s,d,g,l);case 7:return en(i,s,s.pendingProps,l),s.child;case 8:return en(i,s,s.pendingProps.children,l),s.child;case 12:return en(i,s,s.pendingProps.children,l),s.child;case 10:e:{if(d=s.type._context,g=s.pendingProps,v=s.memoizedProps,T=g.value,Je(ic,d._currentValue),d._currentValue=T,v!==null)if(Gn(v.value,T)){if(v.children===g.children&&!on.current){s=qr(i,s,l);break e}}else for(v=s.child,v!==null&&(v.return=s);v!==null;){var k=v.dependencies;if(k!==null){T=v.child;for(var O=k.firstContext;O!==null;){if(O.context===d){if(v.tag===1){O=Wr(-1,l&-l),O.tag=2;var G=v.updateQueue;if(G!==null){G=G.shared;var ee=G.pending;ee===null?O.next=O:(O.next=ee.next,ee.next=O),G.pending=O}}v.lanes|=l,O=v.alternate,O!==null&&(O.lanes|=l),jd(v.return,l,s),k.lanes|=l;break}O=O.next}}else if(v.tag===10)T=v.type===s.type?null:v.child;else if(v.tag===18){if(T=v.return,T===null)throw Error(t(341));T.lanes|=l,k=T.alternate,k!==null&&(k.lanes|=l),jd(T,l,s),T=v.sibling}else T=v.child;if(T!==null)T.return=v;else for(T=v;T!==null;){if(T===s){T=null;break}if(v=T.sibling,v!==null){v.return=T.return,T=v;break}T=T.return}v=T}en(i,s,g.children,l),s=s.child}return s;case 9:return g=s.type,d=s.pendingProps.children,qo(s,l),g=kn(g),d=d(g),s.flags|=1,en(i,s,d,l),s.child;case 14:return d=s.type,g=Qn(d,s.pendingProps),g=Qn(d.type,g),Wy(i,s,d,g,l);case 15:return qy(i,s,s.type,s.pendingProps,l);case 17:return d=s.type,g=s.pendingProps,g=s.elementType===d?g:Qn(d,g),gc(i,s),s.tag=1,an(d)?(i=!0,Ju(s)):i=!1,qo(s,l),Ly(s,d,g),Qd(s,d,g,l),Zd(null,s,d,!0,i,l);case 19:return Zy(i,s,l);case 22:return Hy(i,s,l)}throw Error(t(156,s.tag))};function Tv(i,s){return vo(i,s)}function MS(i,s,l,d){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(i,s,l,d){return new MS(i,s,l,d)}function _f(i){return i=i.prototype,!(!i||!i.isReactComponent)}function FS(i){if(typeof i=="function")return _f(i)?1:0;if(i!=null){if(i=i.$$typeof,i===B)return 11;if(i===qe)return 14}return 2}function Ci(i,s){var l=i.alternate;return l===null?(l=Rn(i.tag,s,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=s,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&14680064,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,s=i.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l}function bc(i,s,l,d,g,v){var T=2;if(d=i,typeof i=="function")_f(i)&&(T=1);else if(typeof i=="string")T=5;else e:switch(i){case R:return Ns(l.children,g,v,s);case P:T=8,g|=8;break;case b:return i=Rn(12,l,s,g|2),i.elementType=b,i.lanes=v,i;case N:return i=Rn(13,l,s,g),i.elementType=N,i.lanes=v,i;case ke:return i=Rn(19,l,s,g),i.elementType=ke,i.lanes=v,i;case Ce:return Ac(l,g,v,s);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case V:T=10;break e;case F:T=9;break e;case B:T=11;break e;case qe:T=14;break e;case Re:T=16,d=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return s=Rn(T,l,s,g),s.elementType=i,s.type=d,s.lanes=v,s}function Ns(i,s,l,d){return i=Rn(7,i,d,s),i.lanes=l,i}function Ac(i,s,l,d){return i=Rn(22,i,d,s),i.elementType=Ce,i.lanes=l,i.stateNode={isHidden:!1},i}function xf(i,s,l){return i=Rn(6,i,null,s),i.lanes=l,i}function Ef(i,s,l){return s=Rn(4,i.children!==null?i.children:[],i.key,s),s.lanes=l,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}function US(i,s,l,d,g){this.tag=s,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hi(0),this.expirationTimes=hi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hi(0),this.identifierPrefix=d,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Tf(i,s,l,d,g,v,T,k,O){return i=new US(i,s,l,k,O),s===1?(s=1,v===!0&&(s|=8)):s=0,v=Rn(3,null,null,s),i.current=v,v.stateNode=i,v.memoizedState={element:d,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vd(v),i}function BS(i,s,l){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:se,key:d==null?null:""+d,children:i,containerInfo:s,implementation:l}}function Iv(i){if(!i)return xi;i=i._reactInternals;e:{if(Un(i)!==i||i.tag!==1)throw Error(t(170));var s=i;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(an(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(i.tag===1){var l=i.type;if(an(l))return Jg(i,l,s)}return s}function Sv(i,s,l,d,g,v,T,k,O){return i=Tf(l,d,!0,i,g,v,T,k,O),i.context=Iv(null),l=i.current,d=tn(),g=Ai(l),v=Wr(d,g),v.callback=s??null,Ii(l,v,g),i.current.lanes=g,di(i,g,d),cn(i,d),i}function kc(i,s,l,d){var g=s.current,v=tn(),T=Ai(g);return l=Iv(l),s.context===null?s.context=l:s.pendingContext=l,s=Wr(v,T),s.payload={element:i},d=d===void 0?null:d,d!==null&&(s.callback=d),i=Ii(g,s,T),i!==null&&(Jn(i,g,T,v),oc(i,g,T)),T}function Cc(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Pv(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<s?l:s}}function If(i,s){Pv(i,s),(i=i.alternate)&&Pv(i,s)}function zS(){return null}var bv=typeof reportError=="function"?reportError:function(i){console.error(i)};function Sf(i){this._internalRoot=i}Nc.prototype.render=Sf.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(t(409));kc(i,s,null,null)},Nc.prototype.unmount=Sf.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;As(function(){kc(null,i,null,null)}),s[Fr]=null}};function Nc(i){this._internalRoot=i}Nc.prototype.unstable_scheduleHydration=function(i){if(i){var s=Nu();i={blockedOn:null,target:i,priority:s};for(var l=0;l<ur.length&&s!==0&&s<ur[l].priority;l++);ur.splice(l,0,i),l===0&&Du(i)}};function Pf(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Rc(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Av(){}function $S(i,s,l,d,g){if(g){if(typeof d=="function"){var v=d;d=function(){var G=Cc(T);v.call(G)}}var T=Sv(s,d,i,0,null,!1,!1,"",Av);return i._reactRootContainer=T,i[Fr]=T.current,il(i.nodeType===8?i.parentNode:i),As(),T}for(;g=i.lastChild;)i.removeChild(g);if(typeof d=="function"){var k=d;d=function(){var G=Cc(O);k.call(G)}}var O=Tf(i,0,!1,null,null,!1,!1,"",Av);return i._reactRootContainer=O,i[Fr]=O.current,il(i.nodeType===8?i.parentNode:i),As(function(){kc(s,O,l,d)}),O}function jc(i,s,l,d,g){var v=l._reactRootContainer;if(v){var T=v;if(typeof g=="function"){var k=g;g=function(){var O=Cc(T);k.call(O)}}kc(s,T,i,g)}else T=$S(l,s,i,g,d);return Cc(T)}ku=function(i){switch(i.tag){case 3:var s=i.stateNode;if(s.current.memoizedState.isDehydrated){var l=ci(s.pendingLanes);l!==0&&(fi(s,l|1),cn(s,Xe()),(ze&6)===0&&(Yo=Xe()+500,Ei()))}break;case 13:As(function(){var d=$r(i,1);if(d!==null){var g=tn();Jn(d,i,1,g)}}),If(i,1)}},xo=function(i){if(i.tag===13){var s=$r(i,134217728);if(s!==null){var l=tn();Jn(s,i,134217728,l)}If(i,134217728)}},Cu=function(i){if(i.tag===13){var s=Ai(i),l=$r(i,s);if(l!==null){var d=tn();Jn(l,i,s,d)}If(i,s)}},Nu=function(){return Le},Ru=function(i,s){var l=Le;try{return Le=i,s()}finally{Le=l}},ho=function(i,s,l){switch(s){case"input":if(ka(i,l),s=l.name,l.type==="radio"&&s!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var d=l[s];if(d!==i&&d.form===i.form){var g=Yu(d);if(!g)throw Error(t(90));rs(d),ka(d,g)}}}break;case"textarea":uo(i,l);break;case"select":s=l.value,s!=null&&Nr(i,!!l.multiple,s,!1)}},ls=yf,Fa=As;var WS={usingClientEntryPoint:!1,Events:[al,Oo,Yu,ar,Ma,yf]},xl={findFiberByHostInstance:_s,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qS={bundleType:xl.bundleType,version:xl.version,rendererPackageName:xl.rendererPackageName,rendererConfig:xl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Q.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=za(i),i===null?null:i.stateNode},findFiberByHostInstance:xl.findFiberByHostInstance||zS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dc.isDisabled&&Dc.supportsFiber)try{fs=Dc.inject(qS),pn=Dc}catch{}}return hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WS,hn.createPortal=function(i,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pf(s))throw Error(t(200));return BS(i,s,null,l)},hn.createRoot=function(i,s){if(!Pf(i))throw Error(t(299));var l=!1,d="",g=bv;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onRecoverableError!==void 0&&(g=s.onRecoverableError)),s=Tf(i,1,!1,null,null,l,!1,d,g),i[Fr]=s.current,il(i.nodeType===8?i.parentNode:i),new Sf(s)},hn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=za(s),i=i===null?null:i.stateNode,i},hn.flushSync=function(i){return As(i)},hn.hydrate=function(i,s,l){if(!Rc(s))throw Error(t(200));return jc(null,i,s,!0,l)},hn.hydrateRoot=function(i,s,l){if(!Pf(i))throw Error(t(405));var d=l!=null&&l.hydratedSources||null,g=!1,v="",T=bv;if(l!=null&&(l.unstable_strictMode===!0&&(g=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onRecoverableError!==void 0&&(T=l.onRecoverableError)),s=Sv(s,null,i,1,l??null,g,!1,v,T),i[Fr]=s.current,il(i),d)for(i=0;i<d.length;i++)l=d[i],g=l._getVersion,g=g(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,g]:s.mutableSourceEagerHydrationData.push(l,g);return new Nc(s)},hn.render=function(i,s,l){if(!Rc(s))throw Error(t(200));return jc(null,i,s,!1,l)},hn.unmountComponentAtNode=function(i){if(!Rc(i))throw Error(t(40));return i._reactRootContainer?(As(function(){jc(null,null,i,!1,function(){i._reactRootContainer=null,i[Fr]=null})}),!0):!1},hn.unstable_batchedUpdates=yf,hn.unstable_renderSubtreeIntoContainer=function(i,s,l,d){if(!Rc(l))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return jc(i,s,l,!1,d)},hn.version="18.3.1-next-f1338f8080-20240426",hn}var Lv;function E_(){if(Lv)return kf.exports;Lv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),kf.exports=t1(),kf.exports}var Ov;function n1(){if(Ov)return Vc;Ov=1;var n=E_();return Vc.createRoot=n.createRoot,Vc.hydrateRoot=n.hydrateRoot,Vc}var r1=n1();E_();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zl(){return zl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},zl.apply(this,arguments)}var Ui;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Ui||(Ui={}));const Mv="popstate";function i1(n){n===void 0&&(n={});function e(r,o){let{pathname:a,search:u,hash:h}=r.location;return ap("",{pathname:a,search:u,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(r,o){return typeof o=="string"?o:th(o)}return o1(e,t,null,n)}function mt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function T_(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function s1(){return Math.random().toString(36).substr(2,8)}function Fv(n,e){return{usr:n.state,key:n.key,idx:e}}function ap(n,e,t,r){return t===void 0&&(t=null),zl({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?xa(e):e,{state:t,key:e&&e.key||r||s1()})}function th(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function xa(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function o1(n,e,t,r){r===void 0&&(r={});let{window:o=document.defaultView,v5Compat:a=!1}=r,u=o.history,h=Ui.Pop,f=null,m=w();m==null&&(m=0,u.replaceState(zl({},u.state,{idx:m}),""));function w(){return(u.state||{idx:null}).idx}function _(){h=Ui.Pop;let A=w(),z=A==null?null:A-m;m=A,f&&f({action:h,location:C.location,delta:z})}function E(A,z){h=Ui.Push;let H=ap(C.location,A,z);m=w()+1;let M=Fv(H,m),Q=C.createHref(H);try{u.pushState(M,"",Q)}catch(te){if(te instanceof DOMException&&te.name==="DataCloneError")throw te;o.location.assign(Q)}a&&f&&f({action:h,location:C.location,delta:1})}function S(A,z){h=Ui.Replace;let H=ap(C.location,A,z);m=w();let M=Fv(H,m),Q=C.createHref(H);u.replaceState(M,"",Q),a&&f&&f({action:h,location:C.location,delta:0})}function D(A){let z=o.location.origin!=="null"?o.location.origin:o.location.href,H=typeof A=="string"?A:th(A);return H=H.replace(/ $/,"%20"),mt(z,"No window.location.(origin|href) available to create URL for href: "+H),new URL(H,z)}let C={get action(){return h},get location(){return n(o,u)},listen(A){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(Mv,_),f=A,()=>{o.removeEventListener(Mv,_),f=null}},createHref(A){return e(o,A)},createURL:D,encodeLocation(A){let z=D(A);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:E,replace:S,go(A){return u.go(A)}};return C}var Uv;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Uv||(Uv={}));function a1(n,e,t){return t===void 0&&(t="/"),l1(n,e,t)}function l1(n,e,t,r){let o=typeof e=="string"?xa(e):e,a=tm(o.pathname||"/",t);if(a==null)return null;let u=I_(n);u1(u);let h=null;for(let f=0;h==null&&f<u.length;++f){let m=x1(a);h=v1(u[f],m)}return h}function I_(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let o=(a,u,h)=>{let f={relativePath:h===void 0?a.path||"":h,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};f.relativePath.startsWith("/")&&(mt(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let m=zi([r,f.relativePath]),w=t.concat(f);a.children&&a.children.length>0&&(mt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),I_(a.children,e,w,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:g1(m,a.index),routesMeta:w})};return n.forEach((a,u)=>{var h;if(a.path===""||!((h=a.path)!=null&&h.includes("?")))o(a,u);else for(let f of S_(a.path))o(a,u,f)}),e}function S_(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,o=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return o?[a,""]:[a];let u=S_(r.join("/")),h=[];return h.push(...u.map(f=>f===""?a:[a,f].join("/"))),o&&h.push(...u),h.map(f=>n.startsWith("/")&&f===""?"/":f)}function u1(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:y1(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const c1=/^:[\w-]+$/,h1=3,d1=2,f1=1,p1=10,m1=-2,Bv=n=>n==="*";function g1(n,e){let t=n.split("/"),r=t.length;return t.some(Bv)&&(r+=m1),e&&(r+=d1),t.filter(o=>!Bv(o)).reduce((o,a)=>o+(c1.test(a)?h1:a===""?f1:p1),r)}function y1(n,e){return n.length===e.length&&n.slice(0,-1).every((r,o)=>r===e[o])?n[n.length-1]-e[e.length-1]:0}function v1(n,e,t){let{routesMeta:r}=n,o={},a="/",u=[];for(let h=0;h<r.length;++h){let f=r[h],m=h===r.length-1,w=a==="/"?e:e.slice(a.length)||"/",_=w1({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},w),E=f.route;if(!_)return null;Object.assign(o,_.params),u.push({params:o,pathname:zi([a,_.pathname]),pathnameBase:S1(zi([a,_.pathnameBase])),route:E}),_.pathnameBase!=="/"&&(a=zi([a,_.pathnameBase]))}return u}function w1(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=_1(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let a=o[0],u=a.replace(/(.)\/+$/,"$1"),h=o.slice(1);return{params:r.reduce((m,w,_)=>{let{paramName:E,isOptional:S}=w;if(E==="*"){let C=h[_]||"";u=a.slice(0,a.length-C.length).replace(/(.)\/+$/,"$1")}const D=h[_];return S&&!D?m[E]=void 0:m[E]=(D||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:u,pattern:n}}function _1(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),T_(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,f)=>(r.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function x1(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return T_(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function tm(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function E1(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:o=""}=typeof n=="string"?xa(n):n;return{pathname:t?t.startsWith("/")?t:T1(t,e):e,search:P1(r),hash:b1(o)}}function T1(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Rf(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function I1(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function nm(n,e){let t=I1(n);return e?t.map((r,o)=>o===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function rm(n,e,t,r){r===void 0&&(r=!1);let o;typeof n=="string"?o=xa(n):(o=zl({},n),mt(!o.pathname||!o.pathname.includes("?"),Rf("?","pathname","search",o)),mt(!o.pathname||!o.pathname.includes("#"),Rf("#","pathname","hash",o)),mt(!o.search||!o.search.includes("#"),Rf("#","search","hash",o)));let a=n===""||o.pathname==="",u=a?"/":o.pathname,h;if(u==null)h=t;else{let _=e.length-1;if(!r&&u.startsWith("..")){let E=u.split("/");for(;E[0]==="..";)E.shift(),_-=1;o.pathname=E.join("/")}h=_>=0?e[_]:"/"}let f=E1(o,h),m=u&&u!=="/"&&u.endsWith("/"),w=(a||u===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(m||w)&&(f.pathname+="/"),f}const zi=n=>n.join("/").replace(/\/\/+/g,"/"),S1=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),P1=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,b1=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function A1(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const P_=["post","put","patch","delete"];new Set(P_);const k1=["get",...P_];new Set(k1);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $l(){return $l=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},$l.apply(this,arguments)}const im=j.createContext(null),C1=j.createContext(null),es=j.createContext(null),Ah=j.createContext(null),si=j.createContext({outlet:null,matches:[],isDataRoute:!1}),b_=j.createContext(null);function N1(n,e){let{relative:t}=e===void 0?{}:e;Ea()||mt(!1);let{basename:r,navigator:o}=j.useContext(es),{hash:a,pathname:u,search:h}=C_(n,{relative:t}),f=u;return r!=="/"&&(f=u==="/"?r:zi([r,u])),o.createHref({pathname:f,search:h,hash:a})}function Ea(){return j.useContext(Ah)!=null}function Js(){return Ea()||mt(!1),j.useContext(Ah).location}function A_(n){j.useContext(es).static||j.useLayoutEffect(n)}function Ar(){let{isDataRoute:n}=j.useContext(si);return n?W1():R1()}function R1(){Ea()||mt(!1);let n=j.useContext(im),{basename:e,future:t,navigator:r}=j.useContext(es),{matches:o}=j.useContext(si),{pathname:a}=Js(),u=JSON.stringify(nm(o,t.v7_relativeSplatPath)),h=j.useRef(!1);return A_(()=>{h.current=!0}),j.useCallback(function(m,w){if(w===void 0&&(w={}),!h.current)return;if(typeof m=="number"){r.go(m);return}let _=rm(m,JSON.parse(u),a,w.relative==="path");n==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:zi([e,_.pathname])),(w.replace?r.replace:r.push)(_,w.state,w)},[e,r,u,a,n])}function k_(){let{matches:n}=j.useContext(si),e=n[n.length-1];return e?e.params:{}}function C_(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=j.useContext(es),{matches:o}=j.useContext(si),{pathname:a}=Js(),u=JSON.stringify(nm(o,r.v7_relativeSplatPath));return j.useMemo(()=>rm(n,JSON.parse(u),a,t==="path"),[n,u,a,t])}function j1(n,e){return D1(n,e)}function D1(n,e,t,r){Ea()||mt(!1);let{navigator:o}=j.useContext(es),{matches:a}=j.useContext(si),u=a[a.length-1],h=u?u.params:{};u&&u.pathname;let f=u?u.pathnameBase:"/";u&&u.route;let m=Js(),w;if(e){var _;let A=typeof e=="string"?xa(e):e;f==="/"||(_=A.pathname)!=null&&_.startsWith(f)||mt(!1),w=A}else w=m;let E=w.pathname||"/",S=E;if(f!=="/"){let A=f.replace(/^\//,"").split("/");S="/"+E.replace(/^\//,"").split("/").slice(A.length).join("/")}let D=a1(n,{pathname:S}),C=F1(D&&D.map(A=>Object.assign({},A,{params:Object.assign({},h,A.params),pathname:zi([f,o.encodeLocation?o.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?f:zi([f,o.encodeLocation?o.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),a,t,r);return e&&C?j.createElement(Ah.Provider,{value:{location:$l({pathname:"/",search:"",hash:"",state:null,key:"default"},w),navigationType:Ui.Pop}},C):C}function V1(){let n=$1(),e=A1(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),t?j.createElement("pre",{style:o},t):null,null)}const L1=j.createElement(V1,null);class O1 extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?j.createElement(si.Provider,{value:this.props.routeContext},j.createElement(b_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function M1(n){let{routeContext:e,match:t,children:r}=n,o=j.useContext(im);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),j.createElement(si.Provider,{value:e},r)}function F1(n,e,t,r){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let u=n,h=(o=t)==null?void 0:o.errors;if(h!=null){let w=u.findIndex(_=>_.route.id&&h?.[_.route.id]!==void 0);w>=0||mt(!1),u=u.slice(0,Math.min(u.length,w+1))}let f=!1,m=-1;if(t&&r&&r.v7_partialHydration)for(let w=0;w<u.length;w++){let _=u[w];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(m=w),_.route.id){let{loaderData:E,errors:S}=t,D=_.route.loader&&E[_.route.id]===void 0&&(!S||S[_.route.id]===void 0);if(_.route.lazy||D){f=!0,m>=0?u=u.slice(0,m+1):u=[u[0]];break}}}return u.reduceRight((w,_,E)=>{let S,D=!1,C=null,A=null;t&&(S=h&&_.route.id?h[_.route.id]:void 0,C=_.route.errorElement||L1,f&&(m<0&&E===0?(q1("route-fallback"),D=!0,A=null):m===E&&(D=!0,A=_.route.hydrateFallbackElement||null)));let z=e.concat(u.slice(0,E+1)),H=()=>{let M;return S?M=C:D?M=A:_.route.Component?M=j.createElement(_.route.Component,null):_.route.element?M=_.route.element:M=w,j.createElement(M1,{match:_,routeContext:{outlet:w,matches:z,isDataRoute:t!=null},children:M})};return t&&(_.route.ErrorBoundary||_.route.errorElement||E===0)?j.createElement(O1,{location:t.location,revalidation:t.revalidation,component:C,error:S,children:H(),routeContext:{outlet:null,matches:z,isDataRoute:!0}}):H()},null)}var N_=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(N_||{}),R_=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(R_||{});function U1(n){let e=j.useContext(im);return e||mt(!1),e}function B1(n){let e=j.useContext(C1);return e||mt(!1),e}function z1(n){let e=j.useContext(si);return e||mt(!1),e}function j_(n){let e=z1(),t=e.matches[e.matches.length-1];return t.route.id||mt(!1),t.route.id}function $1(){var n;let e=j.useContext(b_),t=B1(),r=j_();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function W1(){let{router:n}=U1(N_.UseNavigateStable),e=j_(R_.UseNavigateStable),t=j.useRef(!1);return A_(()=>{t.current=!0}),j.useCallback(function(o,a){a===void 0&&(a={}),t.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,$l({fromRouteId:e},a)))},[n,e])}const zv={};function q1(n,e,t){zv[n]||(zv[n]=!0)}function H1(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function D_(n){let{to:e,replace:t,state:r,relative:o}=n;Ea()||mt(!1);let{future:a,static:u}=j.useContext(es),{matches:h}=j.useContext(si),{pathname:f}=Js(),m=Ar(),w=rm(e,nm(h,a.v7_relativeSplatPath),f,o==="path"),_=JSON.stringify(w);return j.useEffect(()=>m(JSON.parse(_),{replace:t,state:r,relative:o}),[m,_,o,t,r]),null}function yr(n){mt(!1)}function G1(n){let{basename:e="/",children:t=null,location:r,navigationType:o=Ui.Pop,navigator:a,static:u=!1,future:h}=n;Ea()&&mt(!1);let f=e.replace(/^\/*/,"/"),m=j.useMemo(()=>({basename:f,navigator:a,static:u,future:$l({v7_relativeSplatPath:!1},h)}),[f,h,a,u]);typeof r=="string"&&(r=xa(r));let{pathname:w="/",search:_="",hash:E="",state:S=null,key:D="default"}=r,C=j.useMemo(()=>{let A=tm(w,f);return A==null?null:{location:{pathname:A,search:_,hash:E,state:S,key:D},navigationType:o}},[f,w,_,E,S,D,o]);return C==null?null:j.createElement(es.Provider,{value:m},j.createElement(Ah.Provider,{children:t,value:C}))}function K1(n){let{children:e,location:t}=n;return j1(lp(e),t)}new Promise(()=>{});function lp(n,e){e===void 0&&(e=[]);let t=[];return j.Children.forEach(n,(r,o)=>{if(!j.isValidElement(r))return;let a=[...e,o];if(r.type===j.Fragment){t.push.apply(t,lp(r.props.children,a));return}r.type!==yr&&mt(!1),!r.props.index||!r.props.children||mt(!1);let u={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=lp(r.props.children,a)),t.push(u)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function up(){return up=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},up.apply(this,arguments)}function Q1(n,e){if(n==null)return{};var t={},r=Object.keys(n),o,a;for(a=0;a<r.length;a++)o=r[a],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function Y1(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function X1(n,e){return n.button===0&&(!e||e==="_self")&&!Y1(n)}function cp(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(o=>[t,o]):[[t,r]])},[]))}function J1(n,e){let t=cp(n);return e&&e.forEach((r,o)=>{t.has(o)||e.getAll(o).forEach(a=>{t.append(o,a)})}),t}const Z1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],eP="6";try{window.__reactRouterVersion=eP}catch{}const tP="startTransition",$v=JS[tP];function nP(n){let{basename:e,children:t,future:r,window:o}=n,a=j.useRef();a.current==null&&(a.current=i1({window:o,v5Compat:!0}));let u=a.current,[h,f]=j.useState({action:u.action,location:u.location}),{v7_startTransition:m}=r||{},w=j.useCallback(_=>{m&&$v?$v(()=>f(_)):f(_)},[f,m]);return j.useLayoutEffect(()=>u.listen(w),[u,w]),j.useEffect(()=>H1(r),[r]),j.createElement(G1,{basename:e,children:t,location:h.location,navigationType:h.action,navigator:u,future:r})}const rP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",iP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qe=j.forwardRef(function(e,t){let{onClick:r,relative:o,reloadDocument:a,replace:u,state:h,target:f,to:m,preventScrollReset:w,viewTransition:_}=e,E=Q1(e,Z1),{basename:S}=j.useContext(es),D,C=!1;if(typeof m=="string"&&iP.test(m)&&(D=m,rP))try{let M=new URL(window.location.href),Q=m.startsWith("//")?new URL(M.protocol+m):new URL(m),te=tm(Q.pathname,S);Q.origin===M.origin&&te!=null?m=te+Q.search+Q.hash:C=!0}catch{}let A=N1(m,{relative:o}),z=sP(m,{replace:u,state:h,target:f,preventScrollReset:w,relative:o,viewTransition:_});function H(M){r&&r(M),M.defaultPrevented||z(M)}return j.createElement("a",up({},E,{href:D||A,onClick:C||a?r:H,ref:t,target:f}))});var Wv;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Wv||(Wv={}));var qv;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(qv||(qv={}));function sP(n,e){let{target:t,replace:r,state:o,preventScrollReset:a,relative:u,viewTransition:h}=e===void 0?{}:e,f=Ar(),m=Js(),w=C_(n,{relative:u});return j.useCallback(_=>{if(X1(_,t)){_.preventDefault();let E=r!==void 0?r:th(m)===th(w);f(n,{replace:E,state:o,preventScrollReset:a,relative:u,viewTransition:h})}},[m,f,w,r,o,t,n,a,u,h])}function oP(n){let e=j.useRef(cp(n)),t=j.useRef(!1),r=Js(),o=j.useMemo(()=>J1(r.search,t.current?null:e.current),[r.search]),a=Ar(),u=j.useCallback((h,f)=>{const m=cp(typeof h=="function"?h(o):h);t.current=!0,a("?"+m,f)},[a,o]);return[o,u]}var Hv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let o=n.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},aP=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const o=n[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[r++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],u=n[t++],h=n[t++],f=((o&7)<<18|(a&63)<<12|(u&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],u=n[t++];e[r++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},L_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<n.length;o+=3){const a=n[o],u=o+1<n.length,h=u?n[o+1]:0,f=o+2<n.length,m=f?n[o+2]:0,w=a>>2,_=(a&3)<<4|h>>4;let E=(h&15)<<2|m>>6,S=m&63;f||(S=64,u||(E=64)),r.push(t[w],t[_],t[E],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(V_(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):aP(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],h=o<n.length?t[n.charAt(o)]:0;++o;const m=o<n.length?t[n.charAt(o)]:64;++o;const _=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||h==null||m==null||_==null)throw new lP;const E=a<<2|h>>4;if(r.push(E),m!==64){const S=h<<4&240|m>>2;if(r.push(S),_!==64){const D=m<<6&192|_;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class lP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uP=function(n){const e=V_(n);return L_.encodeByteArray(e,!0)},nh=function(n){return uP(n).replace(/\./g,"")},O_=function(n){try{return L_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP=()=>cP().__FIREBASE_DEFAULTS__,dP=()=>{if(typeof process>"u"||typeof Hv>"u")return;const n=Hv.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},fP=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&O_(n[1]);return e&&JSON.parse(e)},kh=()=>{try{return hP()||dP()||fP()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},M_=n=>{var e,t;return(t=(e=kh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},pP=n=>{const e=M_(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},F_=()=>{var n;return(n=kh())===null||n===void 0?void 0:n.config},U_=n=>{var e;return(e=kh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gP(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[nh(JSON.stringify(t)),nh(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xt())}function vP(){var n;const e=(n=kh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function B_(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function _P(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function xP(){const n=Xt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function EP(){return!vP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function z_(){try{return typeof indexedDB=="object"}catch{return!1}}function $_(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}function TP(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP="FirebaseError";class sr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=IP,Object.setPrototypeOf(this,sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zs.prototype.create)}}class Zs{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?SP(a,r):"Error",h=`${this.serviceName}: ${u} (${o}).`;return new sr(o,h,r)}}function SP(n,e){return n.replace(PP,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const PP=/\{\$([^}]+)}/g;function bP(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Wl(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const a=n[o],u=e[o];if(Gv(a)&&Gv(u)){if(!Wl(a,u))return!1}else if(a!==u)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function Gv(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Pl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,a]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function bl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function AP(n,e){const t=new kP(n,e);return t.subscribe.bind(t)}class kP{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");CP(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=jf),o.error===void 0&&(o.error=jf),o.complete===void 0&&(o.complete=jf);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CP(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function jf(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP=1e3,RP=2,jP=14400*1e3,DP=.5;function Kv(n,e=NP,t=RP){const r=e*Math.pow(t,n),o=Math.round(DP*r*(Math.random()-.5)*2);return Math.min(jP,r+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(n){return n&&n._delegate?n._delegate:n}class rr{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new mP;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(OP(e))try{this.getOrInitializeService({instanceIdentifier:js})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});r.resolve(a)}catch{}}}}clearInstance(e=js){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=js){return this.instances.has(e)}getOptions(e=js){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);r===h&&u.resolve(o)}return o}onInit(e,t){var r;const o=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(o,a);const u=this.instances.get(o);return u&&e(u,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:LP(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=js){return this.component?this.component.multipleInstances?e:js:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function LP(n){return n===js?void 0:n}function OP(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new VP(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Oe||(Oe={}));const FP={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},UP=Oe.INFO,BP={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},zP=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),o=BP[e];if(o)console[o](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ch{constructor(e){this.name=e,this._logLevel=UP,this._logHandler=zP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?FP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const $P=(n,e)=>e.some(t=>n instanceof t);let Qv,Yv;function WP(){return Qv||(Qv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qP(){return Yv||(Yv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const W_=new WeakMap,hp=new WeakMap,q_=new WeakMap,Df=new WeakMap,sm=new WeakMap;function HP(n){const e=new Promise((t,r)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t($i(n.result)),o()},u=()=>{r(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&W_.set(t,n)}).catch(()=>{}),sm.set(e,n),e}function GP(n){if(hp.has(n))return;const e=new Promise((t,r)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});hp.set(n,e)}let dp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return hp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||q_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return $i(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function KP(n){dp=n(dp)}function QP(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Vf(this),e,...t);return q_.set(r,e.sort?e.sort():[e]),$i(r)}:qP().includes(n)?function(...e){return n.apply(Vf(this),e),$i(W_.get(this))}:function(...e){return $i(n.apply(Vf(this),e))}}function YP(n){return typeof n=="function"?QP(n):(n instanceof IDBTransaction&&GP(n),$P(n,WP())?new Proxy(n,dp):n)}function $i(n){if(n instanceof IDBRequest)return HP(n);if(Df.has(n))return Df.get(n);const e=YP(n);return e!==n&&(Df.set(n,e),sm.set(e,n)),e}const Vf=n=>sm.get(n);function H_(n,e,{blocked:t,upgrade:r,blocking:o,terminated:a}={}){const u=indexedDB.open(n,e),h=$i(u);return r&&u.addEventListener("upgradeneeded",f=>{r($i(u.result),f.oldVersion,f.newVersion,$i(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),h.then(f=>{a&&f.addEventListener("close",()=>a()),o&&f.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const XP=["get","getKey","getAll","getAllKeys","count"],JP=["put","add","delete","clear"],Lf=new Map;function Xv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Lf.get(e))return Lf.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=JP.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||XP.includes(t)))return;const a=async function(u,...h){const f=this.transaction(u,o?"readwrite":"readonly");let m=f.store;return r&&(m=m.index(h.shift())),(await Promise.all([m[t](...h),o&&f.done]))[0]};return Lf.set(e,a),a}KP(n=>({...n,get:(e,t,r)=>Xv(e,t)||n.get(e,t,r),has:(e,t)=>!!Xv(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(eb(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function eb(n){const e=n.getComponent();return e?.type==="VERSION"}const fp="@firebase/app",Jv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei=new Ch("@firebase/app"),tb="@firebase/app-compat",nb="@firebase/analytics-compat",rb="@firebase/analytics",ib="@firebase/app-check-compat",sb="@firebase/app-check",ob="@firebase/auth",ab="@firebase/auth-compat",lb="@firebase/database",ub="@firebase/data-connect",cb="@firebase/database-compat",hb="@firebase/functions",db="@firebase/functions-compat",fb="@firebase/installations",pb="@firebase/installations-compat",mb="@firebase/messaging",gb="@firebase/messaging-compat",yb="@firebase/performance",vb="@firebase/performance-compat",wb="@firebase/remote-config",_b="@firebase/remote-config-compat",xb="@firebase/storage",Eb="@firebase/storage-compat",Tb="@firebase/firestore",Ib="@firebase/vertexai-preview",Sb="@firebase/firestore-compat",Pb="firebase",bb="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp="[DEFAULT]",Ab={[fp]:"fire-core",[tb]:"fire-core-compat",[rb]:"fire-analytics",[nb]:"fire-analytics-compat",[sb]:"fire-app-check",[ib]:"fire-app-check-compat",[ob]:"fire-auth",[ab]:"fire-auth-compat",[lb]:"fire-rtdb",[ub]:"fire-data-connect",[cb]:"fire-rtdb-compat",[hb]:"fire-fn",[db]:"fire-fn-compat",[fb]:"fire-iid",[pb]:"fire-iid-compat",[mb]:"fire-fcm",[gb]:"fire-fcm-compat",[yb]:"fire-perf",[vb]:"fire-perf-compat",[wb]:"fire-rc",[_b]:"fire-rc-compat",[xb]:"fire-gcs",[Eb]:"fire-gcs-compat",[Tb]:"fire-fst",[Sb]:"fire-fst-compat",[Ib]:"fire-vertex","fire-js":"fire-js",[Pb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rh=new Map,kb=new Map,mp=new Map;function Zv(n,e){try{n.container.addComponent(e)}catch(t){ei.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Sr(n){const e=n.name;if(mp.has(e))return ei.debug(`There were multiple attempts to register component ${e}.`),!1;mp.set(e,n);for(const t of rh.values())Zv(t,n);for(const t of kb.values())Zv(t,n);return!0}function eo(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Zn(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wi=new Zs("app","Firebase",Cb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new rr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta=bb;function G_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:pp,automaticDataCollectionEnabled:!1},e),o=r.name;if(typeof o!="string"||!o)throw Wi.create("bad-app-name",{appName:String(o)});if(t||(t=F_()),!t)throw Wi.create("no-options");const a=rh.get(o);if(a){if(Wl(t,a.options)&&Wl(r,a.config))return a;throw Wi.create("duplicate-app",{appName:o})}const u=new MP(o);for(const f of mp.values())u.addComponent(f);const h=new Nb(t,r,u);return rh.set(o,h),h}function om(n=pp){const e=rh.get(n);if(!e&&n===pp&&F_())return G_();if(!e)throw Wi.create("no-app",{appName:n});return e}function Ln(n,e,t){var r;let o=(r=Ab[n])!==null&&r!==void 0?r:n;t&&(o+=`-${t}`);const a=o.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const h=[`Unable to register library "${o}" with version "${e}":`];a&&h.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ei.warn(h.join(" "));return}Sr(new rr(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb="firebase-heartbeat-database",jb=1,ql="firebase-heartbeat-store";let Of=null;function K_(){return Of||(Of=H_(Rb,jb,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ql)}catch(t){console.warn(t)}}}}).catch(n=>{throw Wi.create("idb-open",{originalErrorMessage:n.message})})),Of}async function Db(n){try{const t=(await K_()).transaction(ql),r=await t.objectStore(ql).get(Q_(n));return await t.done,r}catch(e){if(e instanceof sr)ei.warn(e.message);else{const t=Wi.create("idb-get",{originalErrorMessage:e?.message});ei.warn(t.message)}}}async function e0(n,e){try{const r=(await K_()).transaction(ql,"readwrite");await r.objectStore(ql).put(e,Q_(n)),await r.done}catch(t){if(t instanceof sr)ei.warn(t.message);else{const r=Wi.create("idb-set",{originalErrorMessage:t?.message});ei.warn(r.message)}}}function Q_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb=1024,Lb=720*60*60*1e3;class Ob{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Fb(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=t0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(u=>{const h=new Date(u.date).valueOf();return Date.now()-h<=Lb}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ei.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=t0(),{heartbeatsToSend:r,unsentEntries:o}=Mb(this._heartbeatsCache.heartbeats),a=nh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return ei.warn(t),""}}}function t0(){return new Date().toISOString().substring(0,10)}function Mb(n,e=Vb){const t=[];let r=n.slice();for(const o of n){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),n0(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),n0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Fb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return z_()?$_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Db(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return e0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return e0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function n0(n){return nh(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(n){Sr(new rr("platform-logger",e=>new ZP(e),"PRIVATE")),Sr(new rr("heartbeat",e=>new Ob(e),"PRIVATE")),Ln(fp,Jv,n),Ln(fp,Jv,"esm2017"),Ln("fire-js","")}Ub("");function am(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]]);return t}function Y_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Bb=Y_,X_=new Zs("auth","Firebase",Y_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih=new Ch("@firebase/auth");function zb(n,...e){ih.logLevel<=Oe.WARN&&ih.warn(`Auth (${Ta}): ${n}`,...e)}function qc(n,...e){ih.logLevel<=Oe.ERROR&&ih.error(`Auth (${Ta}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(n,...e){throw lm(n,...e)}function wr(n,...e){return lm(n,...e)}function J_(n,e,t){const r=Object.assign(Object.assign({},Bb()),{[e]:t});return new Zs("auth","Firebase",r).create(e,{appName:n.name})}function _r(n){return J_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lm(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return X_.create(n,...e)}function Ie(n,e,...t){if(!n)throw lm(e,...t)}function Gr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw qc(e),new Error(e)}function ti(n,e){n||Gr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function $b(){return r0()==="http:"||r0()==="https:"}function r0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($b()||B_()||"connection"in navigator)?navigator.onLine:!0}function qb(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,t){this.shortDelay=e,this.longDelay=t,ti(t>e,"Short delay should be less than long delay!"),this.isMobile=yP()||_P()}get(){return Wb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function um(n,e){ti(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb=new ou(3e4,6e4);function ts(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function kr(n,e,t,r,o={}){return ex(n,o,async()=>{let a={},u={};r&&(e==="GET"?u=r:a={body:JSON.stringify(r)});const h=su(Object.assign({key:n.config.apiKey},u)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:f},a);return wP()||(m.referrerPolicy="no-referrer"),Z_.fetch()(tx(n,n.config.apiHost,t,h),m)})}async function ex(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},Hb),e);try{const o=new Qb(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw Lc(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const h=a.ok?u.errorMessage:u.error.message,[f,m]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lc(n,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw Lc(n,"email-already-in-use",u);if(f==="USER_DISABLED")throw Lc(n,"user-disabled",u);const w=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw J_(n,w,m);ir(n,w)}}catch(o){if(o instanceof sr)throw o;ir(n,"network-request-failed",{message:String(o)})}}async function au(n,e,t,r,o={}){const a=await kr(n,e,t,r,o);return"mfaPendingCredential"in a&&ir(n,"multi-factor-auth-required",{_serverResponse:a}),a}function tx(n,e,t,r){const o=`${e}${t}?${r}`;return n.config.emulator?um(n.config,o):`${n.config.apiScheme}://${o}`}function Kb(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Qb{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(wr(this.auth,"network-request-failed")),Gb.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Lc(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=wr(n,e,r);return o.customData._tokenResponse=t,o}function i0(n){return n!==void 0&&n.enterprise!==void 0}class Yb{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Kb(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function Xb(n,e){return kr(n,"GET","/v2/recaptchaConfig",ts(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jb(n,e){return kr(n,"POST","/v1/accounts:delete",e)}async function nx(n,e){return kr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Zb(n,e=!1){const t=At(n),r=await t.getIdToken(e),o=cm(r);Ie(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a?.sign_in_provider;return{claims:o,token:r,authTime:Rl(Mf(o.auth_time)),issuedAtTime:Rl(Mf(o.iat)),expirationTime:Rl(Mf(o.exp)),signInProvider:u||null,signInSecondFactor:a?.sign_in_second_factor||null}}function Mf(n){return Number(n)*1e3}function cm(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return qc("JWT malformed, contained fewer than 3 sections"),null;try{const o=O_(t);return o?JSON.parse(o):(qc("Failed to decode base64 JWT payload"),null)}catch(o){return qc("Caught error parsing JWT payload as JSON",o?.toString()),null}}function s0(n){const e=cm(n);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ws(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof sr&&eA(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function eA({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Rl(this.lastLoginAt),this.creationTime=Rl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sh(n){var e;const t=n.auth,r=await n.getIdToken(),o=await Ws(n,nx(t,{idToken:r}));Ie(o?.users.length,t,"internal-error");const a=o.users[0];n._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?rx(a.providerUserInfo):[],h=rA(n.providerData,u),f=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!h?.length,w=f?m:!1,_={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new yp(a.createdAt,a.lastLoginAt),isAnonymous:w};Object.assign(n,_)}async function nA(n){const e=At(n);await sh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function rA(n,e){return[...n.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function rx(n){return n.map(e=>{var{providerId:t}=e,r=am(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iA(n,e){const t=await ex(n,{},async()=>{const r=su({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,u=tx(n,o,"/v1/token",`key=${a}`),h=await n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",Z_.fetch()(u,{method:"POST",headers:h,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function sA(n,e){return kr(n,"POST","/v2/accounts:revokeToken",ts(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):s0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=s0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:a}=await iA(e,t);this.updateTokensAndExpiration(r,o,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:a}=t,u=new aa;return r&&(Ie(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),o&&(Ie(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(Ie(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new aa,this.toJSON())}_performRefresh(){return Gr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(n,e){Ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Kr{constructor(e){var{uid:t,auth:r,stsTokenManager:o}=e,a=am(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new yp(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Ws(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Zb(this,e)}reload(){return nA(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Kr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await sh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zn(this.auth.app))return Promise.reject(_r(this.auth));const e=await this.getIdToken();return await Ws(this,Jb(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,o,a,u,h,f,m,w;const _=(r=t.displayName)!==null&&r!==void 0?r:void 0,E=(o=t.email)!==null&&o!==void 0?o:void 0,S=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,D=(u=t.photoURL)!==null&&u!==void 0?u:void 0,C=(h=t.tenantId)!==null&&h!==void 0?h:void 0,A=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,z=(m=t.createdAt)!==null&&m!==void 0?m:void 0,H=(w=t.lastLoginAt)!==null&&w!==void 0?w:void 0,{uid:M,emailVerified:Q,isAnonymous:te,providerData:se,stsTokenManager:R}=t;Ie(M&&R,e,"internal-error");const P=aa.fromJSON(this.name,R);Ie(typeof M=="string",e,"internal-error"),Ri(_,e.name),Ri(E,e.name),Ie(typeof Q=="boolean",e,"internal-error"),Ie(typeof te=="boolean",e,"internal-error"),Ri(S,e.name),Ri(D,e.name),Ri(C,e.name),Ri(A,e.name),Ri(z,e.name),Ri(H,e.name);const b=new Kr({uid:M,auth:e,email:E,emailVerified:Q,displayName:_,isAnonymous:te,photoURL:D,phoneNumber:S,tenantId:C,stsTokenManager:P,createdAt:z,lastLoginAt:H});return se&&Array.isArray(se)&&(b.providerData=se.map(V=>Object.assign({},V))),A&&(b._redirectEventId=A),b}static async _fromIdTokenResponse(e,t,r=!1){const o=new aa;o.updateFromServerResponse(t);const a=new Kr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await sh(a),a}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];Ie(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?rx(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!a?.length,h=new aa;h.updateFromIdToken(r);const f=new Kr({uid:o.localId,auth:e,stsTokenManager:h,isAnonymous:u}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new yp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!a?.length};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0=new Map;function Qr(n){ti(n instanceof Function,"Expected a class definition");let e=o0.get(n);return e?(ti(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,o0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ix.type="NONE";const a0=ix;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hc(n,e,t){return`firebase:${n}:${e}:${t}`}class la{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:a}=this.auth;this.fullUserKey=Hc(this.userKey,o.apiKey,a),this.fullPersistenceKey=Hc("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Kr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new la(Qr(a0),e,r);const o=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=o[0]||Qr(a0);const u=Hc(r,e.config.apiKey,e.name);let h=null;for(const m of t)try{const w=await m._get(u);if(w){const _=Kr._fromJSON(e,w);m!==a&&(h=_),a=m;break}}catch{}const f=o.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new la(a,e,r):(a=f[0],h&&await a._set(u,h.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(u)}catch{}})),new la(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cx(e))return"Blackberry";if(hx(e))return"Webos";if(ox(e))return"Safari";if((e.includes("chrome/")||ax(e))&&!e.includes("edge/"))return"Chrome";if(ux(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function sx(n=Xt()){return/firefox\//i.test(n)}function ox(n=Xt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ax(n=Xt()){return/crios\//i.test(n)}function lx(n=Xt()){return/iemobile/i.test(n)}function ux(n=Xt()){return/android/i.test(n)}function cx(n=Xt()){return/blackberry/i.test(n)}function hx(n=Xt()){return/webos/i.test(n)}function hm(n=Xt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function oA(n=Xt()){var e;return hm(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function aA(){return xP()&&document.documentMode===10}function dx(n=Xt()){return hm(n)||ux(n)||hx(n)||cx(n)||/windows phone/i.test(n)||lx(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(n,e=[]){let t;switch(n){case"Browser":t=l0(Xt());break;case"Worker":t=`${l0(Xt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ta}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((u,h)=>{try{const f=e(a);u(f)}catch(f){h(f)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uA(n,e={}){return kr(n,"GET","/v2/passwordPolicy",ts(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA=6;class hA{constructor(e){var t,r,o,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:cA,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,o,a,u,h;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(o=f.containsLowercaseLetter)!==null&&o!==void 0?o:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(h=f.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),f}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new u0(this),this.idTokenSubscription=new u0(this),this.beforeStateQueue=new lA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=X_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Qr(t)),this._initializationPromise=this.queue(async()=>{var r,o;if(!this._deleted&&(this.persistenceManager=await la.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await nx(this,{idToken:e}),r=await Kr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Zn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let o=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=o?._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===h)&&f?.user&&(o=f.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(u){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await sh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=qb()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zn(this.app))return Promise.reject(_r(this));const t=e?At(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zn(this.app)?Promise.reject(_r(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zn(this.app)?Promise.reject(_r(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await uA(this),t=new hA(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Zs("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await sA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Qr(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await la.create(this,[Qr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(h,this,"internal-error"),h.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,o);return()=>{u=!0,f()}}else{const f=e.addObserver(t);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&zb(`Error while retrieving App Check token: ${t.error}`),t?.token}}function to(n){return At(n)}class u0{constructor(e){this.auth=e,this.observer=null,this.addObserver=AP(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fA(n){Nh=n}function px(n){return Nh.loadJS(n)}function pA(){return Nh.recaptchaEnterpriseScript}function mA(){return Nh.gapiScript}function gA(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const yA="recaptcha-enterprise",vA="NO_RECAPTCHA";class wA{constructor(e){this.type=yA,this.auth=to(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,h)=>{Xb(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new Yb(f);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,u(m.siteKey)}}).catch(f=>{h(f)})})}function o(a,u,h){const f=window.grecaptcha;i0(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(m=>{u(m)}).catch(()=>{u(vA)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,u)=>{r(this.auth).then(h=>{if(!t&&i0(window.grecaptcha))o(h,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let f=pA();f.length!==0&&(f+=h),px(f).then(()=>{o(h,a,u)}).catch(m=>{u(m)})}}).catch(h=>{u(h)})})}}async function c0(n,e,t,r=!1){const o=new wA(n);let a;try{a=await o.verify(t)}catch{a=await o.verify(t,!0)}const u=Object.assign({},e);return r?Object.assign(u,{captchaResp:a}):Object.assign(u,{captchaResponse:a}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function vp(n,e,t,r){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await c0(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await c0(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(n,e){const t=eo(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(Wl(a,e??{}))return o;ir(o,"already-initialized")}return t.initialize({options:e})}function xA(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Qr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function EA(n,e,t){const r=to(n);Ie(r._canInitEmulator,r,"emulator-config-failed"),Ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,a=mx(e),{host:u,port:h}=TA(e),f=h===null?"":`:${h}`;r.config.emulator={url:`${a}//${u}${f}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})}),IA()}function mx(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function TA(n){const e=mx(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const a=o[1];return{host:a,port:h0(r.substr(a.length+1))}}else{const[a,u]=r.split(":");return{host:a,port:h0(u)}}}function h0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function IA(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Gr("not implemented")}_getIdTokenResponse(e){return Gr("not implemented")}_linkToIdToken(e,t){return Gr("not implemented")}_getReauthenticationResolver(e){return Gr("not implemented")}}async function SA(n,e){return kr(n,"POST","/v1/accounts:update",e)}async function PA(n,e){return kr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bA(n,e){return au(n,"POST","/v1/accounts:signInWithPassword",ts(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AA(n,e){return au(n,"POST","/v1/accounts:signInWithEmailLink",ts(n,e))}async function kA(n,e){return au(n,"POST","/v1/accounts:signInWithEmailLink",ts(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl extends dm{constructor(e,t,r,o=null){super("password",r),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Hl(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Hl(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vp(e,t,"signInWithPassword",bA);case"emailLink":return AA(e,{email:this._email,oobCode:this._password});default:ir(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vp(e,r,"signUpPassword",PA);case"emailLink":return kA(e,{idToken:t,email:this._email,oobCode:this._password});default:ir(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ua(n,e){return au(n,"POST","/v1/accounts:signInWithIdp",ts(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA="http://localhost";class qs extends dm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new qs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ir("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o}=t,a=am(t,["providerId","signInMethod"]);if(!r||!o)return null;const u=new qs(r,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return ua(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ua(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ua(e,t)}buildRequest(){const e={requestUri:CA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=su(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function RA(n){const e=Pl(bl(n)).link,t=e?Pl(bl(e)).deep_link_id:null,r=Pl(bl(n)).deep_link_id;return(r?Pl(bl(r)).link:null)||r||t||e||n}class fm{constructor(e){var t,r,o,a,u,h;const f=Pl(bl(e)),m=(t=f.apiKey)!==null&&t!==void 0?t:null,w=(r=f.oobCode)!==null&&r!==void 0?r:null,_=NA((o=f.mode)!==null&&o!==void 0?o:null);Ie(m&&w&&_,"argument-error"),this.apiKey=m,this.operation=_,this.code=w,this.continueUrl=(a=f.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(u=f.languageCode)!==null&&u!==void 0?u:null,this.tenantId=(h=f.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const t=RA(e);try{return new fm(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(){this.providerId=Gi.PROVIDER_ID}static credential(e,t){return Hl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=fm.parseLink(t);return Ie(r,"argument-error"),Hl._fromEmailAndCode(e,r.code,r.tenantId)}}Gi.PROVIDER_ID="password";Gi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Gi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu extends gx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends lu{constructor(){super("facebook.com")}static credential(e){return qs._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vi.credentialFromTaggedObject(e)}static credentialFromError(e){return Vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vi.credential(e.oauthAccessToken)}catch{return null}}}Vi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends lu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return qs._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Li.credentialFromTaggedObject(e)}static credentialFromError(e){return Li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Li.credential(t,r)}catch{return null}}}Li.GOOGLE_SIGN_IN_METHOD="google.com";Li.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi extends lu{constructor(){super("github.com")}static credential(e){return qs._fromParams({providerId:Oi.PROVIDER_ID,signInMethod:Oi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Oi.credentialFromTaggedObject(e)}static credentialFromError(e){return Oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Oi.credential(e.oauthAccessToken)}catch{return null}}}Oi.GITHUB_SIGN_IN_METHOD="github.com";Oi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends lu{constructor(){super("twitter.com")}static credential(e,t){return qs._fromParams({providerId:Mi.PROVIDER_ID,signInMethod:Mi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Mi.credentialFromTaggedObject(e)}static credentialFromError(e){return Mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Mi.credential(t,r)}catch{return null}}}Mi.TWITTER_SIGN_IN_METHOD="twitter.com";Mi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jA(n,e){return au(n,"POST","/v1/accounts:signUp",ts(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const a=await Kr._fromIdTokenResponse(e,r,o),u=d0(r);return new Hs({user:a,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=d0(r);return new Hs({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function d0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh extends sr{constructor(e,t,r,o){var a;super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,oh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new oh(e,t,r,o)}}function yx(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?oh._fromErrorAndOperation(n,a,e,r):a})}async function DA(n,e,t=!1){const r=await Ws(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Hs._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vx(n,e,t=!1){const{auth:r}=n;if(Zn(r.app))return Promise.reject(_r(r));const o="reauthenticate";try{const a=await Ws(n,yx(r,o,e,n),t);Ie(a.idToken,r,"internal-error");const u=cm(a.idToken);Ie(u,r,"internal-error");const{sub:h}=u;return Ie(n.uid===h,r,"user-mismatch"),Hs._forOperation(n,o,a)}catch(a){throw a?.code==="auth/user-not-found"&&ir(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wx(n,e,t=!1){if(Zn(n.app))return Promise.reject(_r(n));const r="signIn",o=await yx(n,r,e),a=await Hs._fromIdTokenResponse(n,r,o);return t||await n._updateCurrentUser(a.user),a}async function VA(n,e){return wx(to(n),e)}async function f0(n,e){return vx(At(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _x(n){const e=to(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function LA(n,e,t){if(Zn(n.app))return Promise.reject(_r(n));const r=to(n),u=await vp(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",jA).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&_x(n),f}),h=await Hs._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(h.user),h}function OA(n,e,t){return Zn(n.app)?Promise.reject(_r(n)):VA(At(n),Gi.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&_x(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MA(n,e){return kr(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wp(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=At(n),a={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await Ws(r,MA(r.auth,a));r.displayName=u.displayName||null,r.photoURL=u.photoUrl||null;const h=r.providerData.find(({providerId:f})=>f==="password");h&&(h.displayName=r.displayName,h.photoURL=r.photoURL),await r._updateTokensIfNecessary(u)}function FA(n,e){const t=At(n);return Zn(t.auth.app)?Promise.reject(_r(t.auth)):xx(t,e,null)}function UA(n,e){return xx(At(n),null,e)}async function xx(n,e,t){const{auth:r}=n,a={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(a.email=e),t&&(a.password=t);const u=await Ws(n,SA(r,a));await n._updateTokensIfNecessary(u,!0)}function BA(n,e,t,r){return At(n).onIdTokenChanged(e,t,r)}function zA(n,e,t){return At(n).beforeAuthStateChanged(e,t)}function $A(n,e,t,r){return At(n).onAuthStateChanged(e,t,r)}function WA(n){return At(n).signOut()}const ah="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ah,"1"),this.storage.removeItem(ah),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=1e3,HA=10;class Tx extends Ex{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,h,f)=>{this.notifyListeners(u,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},a=this.storage.getItem(r);aA()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,HA):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},qA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Tx.type="LOCAL";const GA=Tx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix extends Ex{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ix.type="SESSION";const Sx=Ix;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new Rh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:a}=t.data,u=this.handlersMap[o];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const h=Array.from(u).map(async m=>m(t.origin,a)),f=await KA(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Rh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((h,f)=>{const m=pm("",20);o.port1.start();const w=setTimeout(()=>{f(new Error("unsupported_event"))},r);u={messageChannel:o,onMessage(_){const E=_;if(E.data.eventId===m)switch(E.data.status){case"ack":clearTimeout(w),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(E.data.response);break;default:clearTimeout(w),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(){return window}function YA(n){xr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(){return typeof xr().WorkerGlobalScope<"u"&&typeof xr().importScripts=="function"}async function XA(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JA(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function ZA(){return Px()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx="firebaseLocalStorageDb",ek=1,lh="firebaseLocalStorage",Ax="fbase_key";class uu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function jh(n,e){return n.transaction([lh],e?"readwrite":"readonly").objectStore(lh)}function tk(){const n=indexedDB.deleteDatabase(bx);return new uu(n).toPromise()}function _p(){const n=indexedDB.open(bx,ek);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(lh,{keyPath:Ax})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(lh)?e(r):(r.close(),await tk(),e(await _p()))})})}async function p0(n,e,t){const r=jh(n,!0).put({[Ax]:e,value:t});return new uu(r).toPromise()}async function nk(n,e){const t=jh(n,!1).get(e),r=await new uu(t).toPromise();return r===void 0?null:r.value}function m0(n,e){const t=jh(n,!0).delete(e);return new uu(t).toPromise()}const rk=800,ik=3;class kx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _p(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>ik)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Px()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rh._getInstance(ZA()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await XA(),!this.activeServiceWorker)return;this.sender=new QA(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||JA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _p();return await p0(e,ah,"1"),await m0(e,ah),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>p0(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>nk(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>m0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=jh(o,!1).getAll();return new uu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}kx.type="LOCAL";const sk=kx;new ou(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(n,e){return e?Qr(e):(Ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm extends dm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ua(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ua(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ua(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ak(n){return wx(n.auth,new mm(n),n.bypassAuthState)}function lk(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),vx(t,new mm(n),n.bypassAuthState)}async function uk(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),DA(t,new mm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e,t,r,o,a=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:a,error:u,type:h}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ak;case"linkViaPopup":case"linkViaRedirect":return uk;case"reauthViaPopup":case"reauthViaRedirect":return lk;default:ir(this.auth,"internal-error")}}resolve(e){ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck=new ou(2e3,1e4);class ta extends Cx{constructor(e,t,r,o,a){super(e,t,o,a),this.provider=r,this.authWindow=null,this.pollId=null,ta.currentPopupAction&&ta.currentPopupAction.cancel(),ta.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){ti(this.filter.length===1,"Popup operations only handle one event");const e=pm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(wr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(wr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ta.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(wr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ck.get())};e()}}ta.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk="pendingRedirect",Gc=new Map;class dk extends Cx{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Gc.get(this.auth._key());if(!e){try{const r=await fk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Gc.set(this.auth._key(),e)}return this.bypassAuthState||Gc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function fk(n,e){const t=gk(e),r=mk(n);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function pk(n,e){Gc.set(n._key(),e)}function mk(n){return Qr(n._redirectPersistence)}function gk(n){return Hc(hk,n.config.apiKey,n.name)}async function yk(n,e,t=!1){if(Zn(n.app))return Promise.reject(_r(n));const r=to(n),o=ok(r,e),u=await new dk(r,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=600*1e3;class wk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_k(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Nx(e)){const o=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(wr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vk&&this.cachedEventUids.clear(),this.cachedEventUids.has(g0(e))}saveEventToCache(e){this.cachedEventUids.add(g0(e)),this.lastProcessedEventTime=Date.now()}}function g0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Nx({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function _k(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Nx(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xk(n,e={}){return kr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Tk=/^https?/;async function Ik(n){if(n.config.emulator)return;const{authorizedDomains:e}=await xk(n);for(const t of e)try{if(Sk(t))return}catch{}ir(n,"unauthorized-domain")}function Sk(n){const e=gp(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!Tk.test(t))return!1;if(Ek.test(n))return r===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk=new ou(3e4,6e4);function y0(){const n=xr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function bk(n){return new Promise((e,t)=>{var r,o,a;function u(){y0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{y0(),t(wr(n,"network-request-failed"))},timeout:Pk.get()})}if(!((o=(r=xr().gapi)===null||r===void 0?void 0:r.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((a=xr().gapi)===null||a===void 0)&&a.load)u();else{const h=gA("iframefcb");return xr()[h]=()=>{gapi.load?u():t(wr(n,"network-request-failed"))},px(`${mA()}?onload=${h}`).catch(f=>t(f))}}).catch(e=>{throw Kc=null,e})}let Kc=null;function Ak(n){return Kc=Kc||bk(n),Kc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=new ou(5e3,15e3),Ck="__/auth/iframe",Nk="emulator/auth/iframe",Rk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Dk(n){const e=n.config;Ie(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?um(e,Nk):`https://${n.config.authDomain}/${Ck}`,r={apiKey:e.apiKey,appName:n.name,v:Ta},o=jk.get(n.config.apiHost);o&&(r.eid=o);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${su(r).slice(1)}`}async function Vk(n){const e=await Ak(n),t=xr().gapi;return Ie(t,n,"internal-error"),e.open({where:document.body,url:Dk(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Rk,dontclear:!0},r=>new Promise(async(o,a)=>{await r.restyle({setHideOnLeave:!1});const u=wr(n,"network-request-failed"),h=xr().setTimeout(()=>{a(u)},kk.get());function f(){xr().clearTimeout(h),o(r)}r.ping(f).then(f,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ok=500,Mk=600,Fk="_blank",Uk="http://localhost";class v0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Bk(n,e,t,r=Ok,o=Mk){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const f=Object.assign(Object.assign({},Lk),{width:r.toString(),height:o.toString(),top:a,left:u}),m=Xt().toLowerCase();t&&(h=ax(m)?Fk:t),sx(m)&&(e=e||Uk,f.scrollbars="yes");const w=Object.entries(f).reduce((E,[S,D])=>`${E}${S}=${D},`,"");if(oA(m)&&h!=="_self")return zk(e||"",h),new v0(null);const _=window.open(e||"",h,w);Ie(_,n,"popup-blocked");try{_.focus()}catch{}return new v0(_)}function zk(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k="__/auth/handler",Wk="emulator/auth/handler",qk=encodeURIComponent("fac");async function w0(n,e,t,r,o,a){Ie(n.config.authDomain,n,"auth-domain-config-required"),Ie(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ta,eventId:o};if(e instanceof gx){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",bP(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,_]of Object.entries({}))u[w]=_}if(e instanceof lu){const w=e.getScopes().filter(_=>_!=="");w.length>0&&(u.scopes=w.join(","))}n.tenantId&&(u.tid=n.tenantId);const h=u;for(const w of Object.keys(h))h[w]===void 0&&delete h[w];const f=await n._getAppCheckToken(),m=f?`#${qk}=${encodeURIComponent(f)}`:"";return`${Hk(n)}?${su(h).slice(1)}${m}`}function Hk({config:n}){return n.emulator?um(n,Wk):`https://${n.authDomain}/${$k}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff="webStorageSupport";class Gk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Sx,this._completeRedirectFn=yk,this._overrideRedirectResult=pk}async _openPopup(e,t,r,o){var a;ti((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await w0(e,t,r,gp(),o);return Bk(e,u,pm())}async _openRedirect(e,t,r,o){await this._originValidation(e);const a=await w0(e,t,r,gp(),o);return YA(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(ti(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Vk(e),r=new wk(e);return t.register("authEvent",o=>(Ie(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ff,{type:Ff},o=>{var a;const u=(a=o?.[0])===null||a===void 0?void 0:a[Ff];u!==void 0&&t(!!u),ir(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ik(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return dx()||ox()||hm()}}const Kk=Gk;var _0="@firebase/auth",x0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Xk(n){Sr(new rr("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=r.options;Ie(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fx(n)},m=new dA(r,o,a,f);return xA(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Sr(new rr("auth-internal",e=>{const t=to(e.getProvider("auth").getImmediate());return(r=>new Qk(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ln(_0,x0,Yk(n)),Ln(_0,x0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk=300,Zk=U_("authIdTokenMaxAge")||Jk;let E0=null;const eC=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Zk)return;const o=t?.token;E0!==o&&(E0=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function tC(n=om()){const e=eo(n,"auth");if(e.isInitialized())return e.getImmediate();const t=_A(n,{popupRedirectResolver:Kk,persistence:[sk,GA,Sx]}),r=U_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const u=eC(a.toString());zA(t,u,()=>u(t.currentUser)),BA(t,h=>u(h))}}const o=M_("auth");return o&&EA(t,`http://${o}`),t}function nC(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}fA({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=o=>{const a=wr("internal-error");a.customData=o,t(a)},r.type="text/javascript",r.charset="UTF-8",nC().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Xk("Browser");var T0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bs,Rx;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,P){function b(){}b.prototype=P.prototype,R.D=P.prototype,R.prototype=new b,R.prototype.constructor=R,R.C=function(V,F,B){for(var N=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)N[ke-2]=arguments[ke];return P.prototype[F].apply(V,N)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,P,b){b||(b=0);var V=Array(16);if(typeof P=="string")for(var F=0;16>F;++F)V[F]=P.charCodeAt(b++)|P.charCodeAt(b++)<<8|P.charCodeAt(b++)<<16|P.charCodeAt(b++)<<24;else for(F=0;16>F;++F)V[F]=P[b++]|P[b++]<<8|P[b++]<<16|P[b++]<<24;P=R.g[0],b=R.g[1],F=R.g[2];var B=R.g[3],N=P+(B^b&(F^B))+V[0]+3614090360&4294967295;P=b+(N<<7&4294967295|N>>>25),N=B+(F^P&(b^F))+V[1]+3905402710&4294967295,B=P+(N<<12&4294967295|N>>>20),N=F+(b^B&(P^b))+V[2]+606105819&4294967295,F=B+(N<<17&4294967295|N>>>15),N=b+(P^F&(B^P))+V[3]+3250441966&4294967295,b=F+(N<<22&4294967295|N>>>10),N=P+(B^b&(F^B))+V[4]+4118548399&4294967295,P=b+(N<<7&4294967295|N>>>25),N=B+(F^P&(b^F))+V[5]+1200080426&4294967295,B=P+(N<<12&4294967295|N>>>20),N=F+(b^B&(P^b))+V[6]+2821735955&4294967295,F=B+(N<<17&4294967295|N>>>15),N=b+(P^F&(B^P))+V[7]+4249261313&4294967295,b=F+(N<<22&4294967295|N>>>10),N=P+(B^b&(F^B))+V[8]+1770035416&4294967295,P=b+(N<<7&4294967295|N>>>25),N=B+(F^P&(b^F))+V[9]+2336552879&4294967295,B=P+(N<<12&4294967295|N>>>20),N=F+(b^B&(P^b))+V[10]+4294925233&4294967295,F=B+(N<<17&4294967295|N>>>15),N=b+(P^F&(B^P))+V[11]+2304563134&4294967295,b=F+(N<<22&4294967295|N>>>10),N=P+(B^b&(F^B))+V[12]+1804603682&4294967295,P=b+(N<<7&4294967295|N>>>25),N=B+(F^P&(b^F))+V[13]+4254626195&4294967295,B=P+(N<<12&4294967295|N>>>20),N=F+(b^B&(P^b))+V[14]+2792965006&4294967295,F=B+(N<<17&4294967295|N>>>15),N=b+(P^F&(B^P))+V[15]+1236535329&4294967295,b=F+(N<<22&4294967295|N>>>10),N=P+(F^B&(b^F))+V[1]+4129170786&4294967295,P=b+(N<<5&4294967295|N>>>27),N=B+(b^F&(P^b))+V[6]+3225465664&4294967295,B=P+(N<<9&4294967295|N>>>23),N=F+(P^b&(B^P))+V[11]+643717713&4294967295,F=B+(N<<14&4294967295|N>>>18),N=b+(B^P&(F^B))+V[0]+3921069994&4294967295,b=F+(N<<20&4294967295|N>>>12),N=P+(F^B&(b^F))+V[5]+3593408605&4294967295,P=b+(N<<5&4294967295|N>>>27),N=B+(b^F&(P^b))+V[10]+38016083&4294967295,B=P+(N<<9&4294967295|N>>>23),N=F+(P^b&(B^P))+V[15]+3634488961&4294967295,F=B+(N<<14&4294967295|N>>>18),N=b+(B^P&(F^B))+V[4]+3889429448&4294967295,b=F+(N<<20&4294967295|N>>>12),N=P+(F^B&(b^F))+V[9]+568446438&4294967295,P=b+(N<<5&4294967295|N>>>27),N=B+(b^F&(P^b))+V[14]+3275163606&4294967295,B=P+(N<<9&4294967295|N>>>23),N=F+(P^b&(B^P))+V[3]+4107603335&4294967295,F=B+(N<<14&4294967295|N>>>18),N=b+(B^P&(F^B))+V[8]+1163531501&4294967295,b=F+(N<<20&4294967295|N>>>12),N=P+(F^B&(b^F))+V[13]+2850285829&4294967295,P=b+(N<<5&4294967295|N>>>27),N=B+(b^F&(P^b))+V[2]+4243563512&4294967295,B=P+(N<<9&4294967295|N>>>23),N=F+(P^b&(B^P))+V[7]+1735328473&4294967295,F=B+(N<<14&4294967295|N>>>18),N=b+(B^P&(F^B))+V[12]+2368359562&4294967295,b=F+(N<<20&4294967295|N>>>12),N=P+(b^F^B)+V[5]+4294588738&4294967295,P=b+(N<<4&4294967295|N>>>28),N=B+(P^b^F)+V[8]+2272392833&4294967295,B=P+(N<<11&4294967295|N>>>21),N=F+(B^P^b)+V[11]+1839030562&4294967295,F=B+(N<<16&4294967295|N>>>16),N=b+(F^B^P)+V[14]+4259657740&4294967295,b=F+(N<<23&4294967295|N>>>9),N=P+(b^F^B)+V[1]+2763975236&4294967295,P=b+(N<<4&4294967295|N>>>28),N=B+(P^b^F)+V[4]+1272893353&4294967295,B=P+(N<<11&4294967295|N>>>21),N=F+(B^P^b)+V[7]+4139469664&4294967295,F=B+(N<<16&4294967295|N>>>16),N=b+(F^B^P)+V[10]+3200236656&4294967295,b=F+(N<<23&4294967295|N>>>9),N=P+(b^F^B)+V[13]+681279174&4294967295,P=b+(N<<4&4294967295|N>>>28),N=B+(P^b^F)+V[0]+3936430074&4294967295,B=P+(N<<11&4294967295|N>>>21),N=F+(B^P^b)+V[3]+3572445317&4294967295,F=B+(N<<16&4294967295|N>>>16),N=b+(F^B^P)+V[6]+76029189&4294967295,b=F+(N<<23&4294967295|N>>>9),N=P+(b^F^B)+V[9]+3654602809&4294967295,P=b+(N<<4&4294967295|N>>>28),N=B+(P^b^F)+V[12]+3873151461&4294967295,B=P+(N<<11&4294967295|N>>>21),N=F+(B^P^b)+V[15]+530742520&4294967295,F=B+(N<<16&4294967295|N>>>16),N=b+(F^B^P)+V[2]+3299628645&4294967295,b=F+(N<<23&4294967295|N>>>9),N=P+(F^(b|~B))+V[0]+4096336452&4294967295,P=b+(N<<6&4294967295|N>>>26),N=B+(b^(P|~F))+V[7]+1126891415&4294967295,B=P+(N<<10&4294967295|N>>>22),N=F+(P^(B|~b))+V[14]+2878612391&4294967295,F=B+(N<<15&4294967295|N>>>17),N=b+(B^(F|~P))+V[5]+4237533241&4294967295,b=F+(N<<21&4294967295|N>>>11),N=P+(F^(b|~B))+V[12]+1700485571&4294967295,P=b+(N<<6&4294967295|N>>>26),N=B+(b^(P|~F))+V[3]+2399980690&4294967295,B=P+(N<<10&4294967295|N>>>22),N=F+(P^(B|~b))+V[10]+4293915773&4294967295,F=B+(N<<15&4294967295|N>>>17),N=b+(B^(F|~P))+V[1]+2240044497&4294967295,b=F+(N<<21&4294967295|N>>>11),N=P+(F^(b|~B))+V[8]+1873313359&4294967295,P=b+(N<<6&4294967295|N>>>26),N=B+(b^(P|~F))+V[15]+4264355552&4294967295,B=P+(N<<10&4294967295|N>>>22),N=F+(P^(B|~b))+V[6]+2734768916&4294967295,F=B+(N<<15&4294967295|N>>>17),N=b+(B^(F|~P))+V[13]+1309151649&4294967295,b=F+(N<<21&4294967295|N>>>11),N=P+(F^(b|~B))+V[4]+4149444226&4294967295,P=b+(N<<6&4294967295|N>>>26),N=B+(b^(P|~F))+V[11]+3174756917&4294967295,B=P+(N<<10&4294967295|N>>>22),N=F+(P^(B|~b))+V[2]+718787259&4294967295,F=B+(N<<15&4294967295|N>>>17),N=b+(B^(F|~P))+V[9]+3951481745&4294967295,R.g[0]=R.g[0]+P&4294967295,R.g[1]=R.g[1]+(F+(N<<21&4294967295|N>>>11))&4294967295,R.g[2]=R.g[2]+F&4294967295,R.g[3]=R.g[3]+B&4294967295}r.prototype.u=function(R,P){P===void 0&&(P=R.length);for(var b=P-this.blockSize,V=this.B,F=this.h,B=0;B<P;){if(F==0)for(;B<=b;)o(this,R,B),B+=this.blockSize;if(typeof R=="string"){for(;B<P;)if(V[F++]=R.charCodeAt(B++),F==this.blockSize){o(this,V),F=0;break}}else for(;B<P;)if(V[F++]=R[B++],F==this.blockSize){o(this,V),F=0;break}}this.h=F,this.o+=P},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var P=1;P<R.length-8;++P)R[P]=0;var b=8*this.o;for(P=R.length-8;P<R.length;++P)R[P]=b&255,b/=256;for(this.u(R),R=Array(16),P=b=0;4>P;++P)for(var V=0;32>V;V+=8)R[b++]=this.g[P]>>>V&255;return R};function a(R,P){var b=h;return Object.prototype.hasOwnProperty.call(b,R)?b[R]:b[R]=P(R)}function u(R,P){this.h=P;for(var b=[],V=!0,F=R.length-1;0<=F;F--){var B=R[F]|0;V&&B==P||(b[F]=B,V=!1)}this.g=b}var h={};function f(R){return-128<=R&&128>R?a(R,function(P){return new u([P|0],0>P?-1:0)}):new u([R|0],0>R?-1:0)}function m(R){if(isNaN(R)||!isFinite(R))return _;if(0>R)return A(m(-R));for(var P=[],b=1,V=0;R>=b;V++)P[V]=R/b|0,b*=4294967296;return new u(P,0)}function w(R,P){if(R.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(R.charAt(0)=="-")return A(w(R.substring(1),P));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=m(Math.pow(P,8)),V=_,F=0;F<R.length;F+=8){var B=Math.min(8,R.length-F),N=parseInt(R.substring(F,F+B),P);8>B?(B=m(Math.pow(P,B)),V=V.j(B).add(m(N))):(V=V.j(b),V=V.add(m(N)))}return V}var _=f(0),E=f(1),S=f(16777216);n=u.prototype,n.m=function(){if(C(this))return-A(this).m();for(var R=0,P=1,b=0;b<this.g.length;b++){var V=this.i(b);R+=(0<=V?V:4294967296+V)*P,P*=4294967296}return R},n.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(D(this))return"0";if(C(this))return"-"+A(this).toString(R);for(var P=m(Math.pow(R,6)),b=this,V="";;){var F=Q(b,P).g;b=z(b,F.j(P));var B=((0<b.g.length?b.g[0]:b.h)>>>0).toString(R);if(b=F,D(b))return B+V;for(;6>B.length;)B="0"+B;V=B+V}},n.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function D(R){if(R.h!=0)return!1;for(var P=0;P<R.g.length;P++)if(R.g[P]!=0)return!1;return!0}function C(R){return R.h==-1}n.l=function(R){return R=z(this,R),C(R)?-1:D(R)?0:1};function A(R){for(var P=R.g.length,b=[],V=0;V<P;V++)b[V]=~R.g[V];return new u(b,~R.h).add(E)}n.abs=function(){return C(this)?A(this):this},n.add=function(R){for(var P=Math.max(this.g.length,R.g.length),b=[],V=0,F=0;F<=P;F++){var B=V+(this.i(F)&65535)+(R.i(F)&65535),N=(B>>>16)+(this.i(F)>>>16)+(R.i(F)>>>16);V=N>>>16,B&=65535,N&=65535,b[F]=N<<16|B}return new u(b,b[b.length-1]&-2147483648?-1:0)};function z(R,P){return R.add(A(P))}n.j=function(R){if(D(this)||D(R))return _;if(C(this))return C(R)?A(this).j(A(R)):A(A(this).j(R));if(C(R))return A(this.j(A(R)));if(0>this.l(S)&&0>R.l(S))return m(this.m()*R.m());for(var P=this.g.length+R.g.length,b=[],V=0;V<2*P;V++)b[V]=0;for(V=0;V<this.g.length;V++)for(var F=0;F<R.g.length;F++){var B=this.i(V)>>>16,N=this.i(V)&65535,ke=R.i(F)>>>16,qe=R.i(F)&65535;b[2*V+2*F]+=N*qe,H(b,2*V+2*F),b[2*V+2*F+1]+=B*qe,H(b,2*V+2*F+1),b[2*V+2*F+1]+=N*ke,H(b,2*V+2*F+1),b[2*V+2*F+2]+=B*ke,H(b,2*V+2*F+2)}for(V=0;V<P;V++)b[V]=b[2*V+1]<<16|b[2*V];for(V=P;V<2*P;V++)b[V]=0;return new u(b,0)};function H(R,P){for(;(R[P]&65535)!=R[P];)R[P+1]+=R[P]>>>16,R[P]&=65535,P++}function M(R,P){this.g=R,this.h=P}function Q(R,P){if(D(P))throw Error("division by zero");if(D(R))return new M(_,_);if(C(R))return P=Q(A(R),P),new M(A(P.g),A(P.h));if(C(P))return P=Q(R,A(P)),new M(A(P.g),P.h);if(30<R.g.length){if(C(R)||C(P))throw Error("slowDivide_ only works with positive integers.");for(var b=E,V=P;0>=V.l(R);)b=te(b),V=te(V);var F=se(b,1),B=se(V,1);for(V=se(V,2),b=se(b,2);!D(V);){var N=B.add(V);0>=N.l(R)&&(F=F.add(b),B=N),V=se(V,1),b=se(b,1)}return P=z(R,F.j(P)),new M(F,P)}for(F=_;0<=R.l(P);){for(b=Math.max(1,Math.floor(R.m()/P.m())),V=Math.ceil(Math.log(b)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),B=m(b),N=B.j(P);C(N)||0<N.l(R);)b-=V,B=m(b),N=B.j(P);D(B)&&(B=E),F=F.add(B),R=z(R,N)}return new M(F,R)}n.A=function(R){return Q(this,R).h},n.and=function(R){for(var P=Math.max(this.g.length,R.g.length),b=[],V=0;V<P;V++)b[V]=this.i(V)&R.i(V);return new u(b,this.h&R.h)},n.or=function(R){for(var P=Math.max(this.g.length,R.g.length),b=[],V=0;V<P;V++)b[V]=this.i(V)|R.i(V);return new u(b,this.h|R.h)},n.xor=function(R){for(var P=Math.max(this.g.length,R.g.length),b=[],V=0;V<P;V++)b[V]=this.i(V)^R.i(V);return new u(b,this.h^R.h)};function te(R){for(var P=R.g.length+1,b=[],V=0;V<P;V++)b[V]=R.i(V)<<1|R.i(V-1)>>>31;return new u(b,R.h)}function se(R,P){var b=P>>5;P%=32;for(var V=R.g.length-b,F=[],B=0;B<V;B++)F[B]=0<P?R.i(B+b)>>>P|R.i(B+b+1)<<32-P:R.i(B+b);return new u(F,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Rx=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=w,Bs=u}).apply(typeof T0<"u"?T0:typeof self<"u"?self:typeof window<"u"?window:{});var Oc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jx,Al,Dx,Qc,xp,Vx,Lx,Ox;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,y,x){return c==Array.prototype||c==Object.prototype||(c[y]=x.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Oc=="object"&&Oc];for(var y=0;y<c.length;++y){var x=c[y];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var r=t(this);function o(c,y){if(y)e:{var x=r;c=c.split(".");for(var I=0;I<c.length-1;I++){var $=c[I];if(!($ in x))break e;x=x[$]}c=c[c.length-1],I=x[c],y=y(I),y!=I&&y!=null&&e(x,c,{configurable:!0,writable:!0,value:y})}}function a(c,y){c instanceof String&&(c+="");var x=0,I=!1,$={next:function(){if(!I&&x<c.length){var K=x++;return{value:y(K,c[K]),done:!1}}return I=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}o("Array.prototype.values",function(c){return c||function(){return a(this,function(y,x){return x})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function f(c){var y=typeof c;return y=y!="object"?y:c?Array.isArray(c)?"array":y:"null",y=="array"||y=="object"&&typeof c.length=="number"}function m(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function w(c,y,x){return c.call.apply(c.bind,arguments)}function _(c,y,x){if(!c)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,I),c.apply(y,$)}}return function(){return c.apply(y,arguments)}}function E(c,y,x){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:_,E.apply(null,arguments)}function S(c,y){var x=Array.prototype.slice.call(arguments,1);return function(){var I=x.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function D(c,y){function x(){}x.prototype=y.prototype,c.aa=y.prototype,c.prototype=new x,c.prototype.constructor=c,c.Qb=function(I,$,K){for(var ue=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)ue[Ge-2]=arguments[Ge];return y.prototype[$].apply(I,ue)}}function C(c){const y=c.length;if(0<y){const x=Array(y);for(let I=0;I<y;I++)x[I]=c[I];return x}return[]}function A(c,y){for(let x=1;x<arguments.length;x++){const I=arguments[x];if(f(I)){const $=c.length||0,K=I.length||0;c.length=$+K;for(let ue=0;ue<K;ue++)c[$+ue]=I[ue]}else c.push(I)}}class z{constructor(y,x){this.i=y,this.j=x,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function H(c){return/^[\s\xa0]*$/.test(c)}function M(){var c=h.navigator;return c&&(c=c.userAgent)?c:""}function Q(c){return Q[" "](c),c}Q[" "]=function(){};var te=M().indexOf("Gecko")!=-1&&!(M().toLowerCase().indexOf("webkit")!=-1&&M().indexOf("Edge")==-1)&&!(M().indexOf("Trident")!=-1||M().indexOf("MSIE")!=-1)&&M().indexOf("Edge")==-1;function se(c,y,x){for(const I in c)y.call(x,c[I],I,c)}function R(c,y){for(const x in c)y.call(void 0,c[x],x,c)}function P(c){const y={};for(const x in c)y[x]=c[x];return y}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(c,y){let x,I;for(let $=1;$<arguments.length;$++){I=arguments[$];for(x in I)c[x]=I[x];for(let K=0;K<b.length;K++)x=b[K],Object.prototype.hasOwnProperty.call(I,x)&&(c[x]=I[x])}}function F(c){var y=1;c=c.split(":");const x=[];for(;0<y&&c.length;)x.push(c.shift()),y--;return c.length&&x.push(c.join(":")),x}function B(c){h.setTimeout(()=>{throw c},0)}function N(){var c=Z;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class ke{constructor(){this.h=this.g=null}add(y,x){const I=qe.get();I.set(y,x),this.h?this.h.next=I:this.g=I,this.h=I}}var qe=new z(()=>new Re,c=>c.reset());class Re{constructor(){this.next=this.g=this.h=null}set(y,x){this.h=y,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let Ce,ae=!1,Z=new ke,X=()=>{const c=h.Promise.resolve(void 0);Ce=()=>{c.then(L)}};var L=()=>{for(var c;c=N();){try{c.h.call(c.g)}catch(x){B(x)}var y=qe;y.j(c),100>y.h&&(y.h++,c.next=y.g,y.g=c)}ae=!1};function Y(){this.s=this.s,this.C=this.C}Y.prototype.s=!1,Y.prototype.ma=function(){this.s||(this.s=!0,this.N())},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ge(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}ge.prototype.h=function(){this.defaultPrevented=!0};var le=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const x=()=>{};h.addEventListener("test",x,y),h.removeEventListener("test",x,y)}catch{}return c}();function ce(c,y){if(ge.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var x=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget){if(te){e:{try{Q(y.nodeName);var $=!0;break e}catch{}$=!1}$||(y=null)}}else x=="mouseover"?y=c.fromElement:x=="mouseout"&&(y=c.toElement);this.relatedTarget=y,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:ve[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ce.aa.h.call(this)}}D(ce,ge);var ve={2:"touch",3:"pen",4:"mouse"};ce.prototype.h=function(){ce.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ne="closure_listenable_"+(1e6*Math.random()|0),Be=0;function He(c,y,x,I,$){this.listener=c,this.proxy=null,this.src=y,this.type=x,this.capture=!!I,this.ha=$,this.key=++Be,this.da=this.fa=!1}function it(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Dt(c){this.src=c,this.g={},this.h=0}Dt.prototype.add=function(c,y,x,I,$){var K=c.toString();c=this.g[K],c||(c=this.g[K]=[],this.h++);var ue=ai(c,y,I,$);return-1<ue?(y=c[ue],x||(y.fa=!1)):(y=new He(y,this.src,K,!!I,$),y.fa=x,c.push(y)),y};function rs(c,y){var x=y.type;if(x in c.g){var I=c.g[x],$=Array.prototype.indexOf.call(I,y,void 0),K;(K=0<=$)&&Array.prototype.splice.call(I,$,1),K&&(it(y),c.g[x].length==0&&(delete c.g[x],c.h--))}}function ai(c,y,x,I){for(var $=0;$<c.length;++$){var K=c[$];if(!K.da&&K.listener==y&&K.capture==!!x&&K.ha==I)return $}return-1}var is="closure_lm_"+(1e6*Math.random()|0),oo={};function Aa(c,y,x,I,$){if(Array.isArray(y)){for(var K=0;K<y.length;K++)Aa(c,y[K],x,I,$);return null}return x=Na(x),c&&c[Ne]?c.K(y,x,m(I)?!!I.capture:!1,$):ka(c,y,x,!1,I,$)}function ka(c,y,x,I,$,K){if(!y)throw Error("Invalid event type");var ue=m($)?!!$.capture:!!$,Ge=lo(c);if(Ge||(c[is]=Ge=new Dt(c)),x=Ge.add(y,x,I,ue,K),x.proxy)return x;if(I=_u(),x.proxy=I,I.src=c,I.listener=x,c.addEventListener)le||($=ue),$===void 0&&($=!1),c.addEventListener(y.toString(),I,$);else if(c.attachEvent)c.attachEvent(Nr(y.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return x}function _u(){function c(x){return y.call(c.src,c.listener,x)}const y=Ca;return c}function ao(c,y,x,I,$){if(Array.isArray(y))for(var K=0;K<y.length;K++)ao(c,y[K],x,I,$);else I=m(I)?!!I.capture:!!I,x=Na(x),c&&c[Ne]?(c=c.i,y=String(y).toString(),y in c.g&&(K=c.g[y],x=ai(K,x,I,$),-1<x&&(it(K[x]),Array.prototype.splice.call(K,x,1),K.length==0&&(delete c.g[y],c.h--)))):c&&(c=lo(c))&&(y=c.g[y.toString()],c=-1,y&&(c=ai(y,x,I,$)),(x=-1<c?y[c]:null)&&Cr(x))}function Cr(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[Ne])rs(y.i,c);else{var x=c.type,I=c.proxy;y.removeEventListener?y.removeEventListener(x,I,c.capture):y.detachEvent?y.detachEvent(Nr(x),I):y.addListener&&y.removeListener&&y.removeListener(I),(x=lo(y))?(rs(x,c),x.h==0&&(x.src=null,y[is]=null)):it(c)}}}function Nr(c){return c in oo?oo[c]:oo[c]="on"+c}function Ca(c,y){if(c.da)c=!0;else{y=new ce(y,this);var x=c.listener,I=c.ha||c.src;c.fa&&Cr(c),c=x.call(I,y)}return c}function lo(c){return c=c[is],c instanceof Dt?c:null}var uo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Na(c){return typeof c=="function"?c:(c[uo]||(c[uo]=function(y){return c.handleEvent(y)}),c[uo])}function xt(){Y.call(this),this.i=new Dt(this),this.M=this,this.F=null}D(xt,Y),xt.prototype[Ne]=!0,xt.prototype.removeEventListener=function(c,y,x,I){ao(this,c,y,x,I)};function Et(c,y){var x,I=c.F;if(I)for(x=[];I;I=I.F)x.push(I);if(c=c.M,I=y.type||y,typeof y=="string")y=new ge(y,c);else if(y instanceof ge)y.target=y.target||c;else{var $=y;y=new ge(I,c),V(y,$)}if($=!0,x)for(var K=x.length-1;0<=K;K--){var ue=y.g=x[K];$=Rr(ue,I,!0,y)&&$}if(ue=y.g=c,$=Rr(ue,I,!0,y)&&$,$=Rr(ue,I,!1,y)&&$,x)for(K=0;K<x.length;K++)ue=y.g=x[K],$=Rr(ue,I,!1,y)&&$}xt.prototype.N=function(){if(xt.aa.N.call(this),this.i){var c=this.i,y;for(y in c.g){for(var x=c.g[y],I=0;I<x.length;I++)it(x[I]);delete c.g[y],c.h--}}this.F=null},xt.prototype.K=function(c,y,x,I){return this.i.add(String(c),y,!1,x,I)},xt.prototype.L=function(c,y,x,I){return this.i.add(String(c),y,!0,x,I)};function Rr(c,y,x,I){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();for(var $=!0,K=0;K<y.length;++K){var ue=y[K];if(ue&&!ue.da&&ue.capture==x){var Ge=ue.listener,Tt=ue.ha||ue.src;ue.fa&&rs(c.i,ue),$=Ge.call(Tt,I)!==!1&&$}}return $&&!I.defaultPrevented}function Ra(c,y,x){if(typeof c=="function")x&&(c=E(c,x));else if(c&&typeof c.handleEvent=="function")c=E(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:h.setTimeout(c,y||0)}function li(c){c.g=Ra(()=>{c.g=null,c.i&&(c.i=!1,li(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class ss extends Y{constructor(y,x){super(),this.m=y,this.l=x,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:li(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function os(c){Y.call(this),this.h=c,this.g={}}D(os,Y);var ja=[];function Da(c){se(c.g,function(y,x){this.g.hasOwnProperty(x)&&Cr(y)},c),c.g={}}os.prototype.N=function(){os.aa.N.call(this),Da(this)},os.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Va=h.JSON.stringify,La=h.JSON.parse,Oa=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function as(){}as.prototype.h=null;function co(c){return c.h||(c.h=c.i())}function ho(){}var Tn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function or(){ge.call(this,"d")}D(or,ge);function fo(){ge.call(this,"c")}D(fo,ge);var ar={},Ma=null;function ls(){return Ma=Ma||new xt}ar.La="serverreachability";function Fa(c){ge.call(this,ar.La,c)}D(Fa,ge);function jr(c){const y=ls();Et(y,new Fa(y))}ar.STAT_EVENT="statevent";function Ua(c,y){ge.call(this,ar.STAT_EVENT,c),this.stat=y}D(Ua,ge);function ht(c){const y=ls();Et(y,new Ua(y,c))}ar.Ma="timingevent";function po(c,y){ge.call(this,ar.Ma,c),this.size=y}D(po,ge);function Mn(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},y)}function us(){this.g=!0}us.prototype.xa=function(){this.g=!1};function cs(c,y,x,I,$,K){c.info(function(){if(c.g)if(K)for(var ue="",Ge=K.split("&"),Tt=0;Tt<Ge.length;Tt++){var Fe=Ge[Tt].split("=");if(1<Fe.length){var kt=Fe[0];Fe=Fe[1];var gt=kt.split("_");ue=2<=gt.length&&gt[1]=="type"?ue+(kt+"="+Fe+"&"):ue+(kt+"=redacted&")}}else ue=null;else ue=K;return"XMLHTTP REQ ("+I+") [attempt "+$+"]: "+y+`
`+x+`
`+ue})}function mo(c,y,x,I,$,K,ue){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+$+"]: "+y+`
`+x+`
`+K+" "+ue})}function Fn(c,y,x,I){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+ed(c,x)+(I?" "+I:"")})}function Ba(c,y){c.info(function(){return"TIMEOUT: "+y})}us.prototype.info=function(){};function ed(c,y){if(!c.g)return y;if(!y)return null;try{var x=JSON.parse(y);if(x){for(c=0;c<x.length;c++)if(Array.isArray(x[c])){var I=x[c];if(!(2>I.length)){var $=I[1];if(Array.isArray($)&&!(1>$.length)){var K=$[0];if(K!="noop"&&K!="stop"&&K!="close")for(var ue=1;ue<$.length;ue++)$[ue]=""}}}}return Va(x)}catch{return y}}var go={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Un;function hs(){}D(hs,as),hs.prototype.g=function(){return new XMLHttpRequest},hs.prototype.i=function(){return{}},Un=new hs;function Bn(c,y,x,I){this.j=c,this.i=y,this.l=x,this.R=I||1,this.U=new os(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Eu}function Eu(){this.i=null,this.g="",this.h=!1}var za={},yo={};function vo(c,y,x){c.L=1,c.v=fi(mn(y)),c.m=x,c.P=!0,$a(c,null)}function $a(c,y){c.F=Date.now(),Xe(c),c.A=mn(c.v);var x=c.A,I=c.R;Array.isArray(I)||(I=[String(I)]),mi(x.i,"t",I),c.C=0,x=c.j.J,c.h=new Eu,c.g=Uu(c.j,x?y:null,!c.m),0<c.O&&(c.M=new ss(E(c.Y,c,c.g),c.O)),y=c.U,x=c.g,I=c.ca;var $="readystatechange";Array.isArray($)||($&&(ja[0]=$.toString()),$=ja);for(var K=0;K<$.length;K++){var ue=Aa(x,$[K],I||y.handleEvent,!1,y.h||y);if(!ue)break;y.g[ue.key]=ue}y=c.H?P(c.H):{},c.m?(c.u||(c.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,y)):(c.u="GET",c.g.ea(c.A,c.u,null,y)),jr(),cs(c.i,c.u,c.A,c.l,c.R,c.m)}Bn.prototype.ca=function(c){c=c.target;const y=this.M;y&&sn(c)==3?y.j():this.Y(c)},Bn.prototype.Y=function(c){try{if(c==this.g)e:{const gt=sn(this.g);var y=this.g.Ba();const Pn=this.g.Z();if(!(3>gt)&&(gt!=3||this.g&&(this.h.h||this.g.oa()||Qa(this.g)))){this.J||gt!=4||y==7||(y==8||0>=Pn?jr(3):jr(2)),ds(this);var x=this.g.Z();this.X=x;t:if(Tu(this)){var I=Qa(this.g);c="";var $=I.length,K=sn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){In(this),ui(this);var ue="";break t}this.h.i=new h.TextDecoder}for(y=0;y<$;y++)this.h.h=!0,c+=this.h.i.decode(I[y],{stream:!(K&&y==$-1)});I.length=0,this.h.g+=c,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=x==200,mo(this.i,this.u,this.A,this.l,this.R,gt,x),this.o){if(this.T&&!this.K){t:{if(this.g){var Ge,Tt=this.g;if((Ge=Tt.g?Tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(Ge)){var Fe=Ge;break t}}Fe=null}if(x=Fe)Fn(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wa(this,x);else{this.o=!1,this.s=3,ht(12),In(this),ui(this);break e}}if(this.P){x=!0;let yn;for(;!this.J&&this.C<ue.length;)if(yn=td(this,ue),yn==yo){gt==4&&(this.s=4,ht(14),x=!1),Fn(this.i,this.l,null,"[Incomplete Response]");break}else if(yn==za){this.s=4,ht(15),Fn(this.i,this.l,ue,"[Invalid Chunk]"),x=!1;break}else Fn(this.i,this.l,yn,null),Wa(this,yn);if(Tu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gt!=4||ue.length!=0||this.h.h||(this.s=1,ht(16),x=!1),this.o=this.o&&x,!x)Fn(this.i,this.l,ue,"[Invalid Chunked Response]"),In(this),ui(this);else if(0<ue.length&&!this.W){this.W=!0;var kt=this.j;kt.g==this&&kt.ba&&!kt.M&&(kt.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),Xa(kt),kt.M=!0,ht(11))}}else Fn(this.i,this.l,ue,null),Wa(this,ue);gt==4&&In(this),this.o&&!this.J&&(gt==4?ko(this.j,this):(this.o=!1,Xe(this)))}else Io(this.g),x==400&&0<ue.indexOf("Unknown SID")?(this.s=3,ht(12)):(this.s=0,ht(13)),In(this),ui(this)}}}catch{}finally{}};function Tu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function td(c,y){var x=c.C,I=y.indexOf(`
`,x);return I==-1?yo:(x=Number(y.substring(x,I)),isNaN(x)?za:(I+=1,I+x>y.length?yo:(y=y.slice(I,I+x),c.C=I+x,y)))}Bn.prototype.cancel=function(){this.J=!0,In(this)};function Xe(c){c.S=Date.now()+c.I,Iu(c,c.I)}function Iu(c,y){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Mn(E(c.ba,c),y)}function ds(c){c.B&&(h.clearTimeout(c.B),c.B=null)}Bn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Ba(this.i,this.A),this.L!=2&&(jr(),ht(17)),In(this),this.s=2,ui(this)):Iu(this,this.S-c)};function ui(c){c.j.G==0||c.J||ko(c.j,c)}function In(c){ds(c);var y=c.M;y&&typeof y.ma=="function"&&y.ma(),c.M=null,Da(c.U),c.g&&(y=c.g,c.g=null,y.abort(),y.ma())}function Wa(c,y){try{var x=c.j;if(x.G!=0&&(x.g==c||Jt(x.h,c))){if(!c.K&&Jt(x.h,c)&&x.G==3){try{var I=x.Da.g.parse(y)}catch{I=null}if(Array.isArray(I)&&I.length==3){var $=I;if($[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<c.F)Ao(x),Hn(x);else break e;bo(x),ht(18)}}else x.za=$[1],0<x.za-x.T&&37500>$[2]&&x.F&&x.v==0&&!x.C&&(x.C=Mn(E(x.Za,x),6e3));if(1>=Pu(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else Mr(x,11)}else if((c.K||x.g==c)&&Ao(x),!H(y))for($=x.Da.g.parse(y),y=0;y<$.length;y++){let Fe=$[y];if(x.T=Fe[0],Fe=Fe[1],x.G==2)if(Fe[0]=="c"){x.K=Fe[1],x.ia=Fe[2];const kt=Fe[3];kt!=null&&(x.la=kt,x.j.info("VER="+x.la));const gt=Fe[4];gt!=null&&(x.Aa=gt,x.j.info("SVER="+x.Aa));const Pn=Fe[5];Pn!=null&&typeof Pn=="number"&&0<Pn&&(I=1.5*Pn,x.L=I,x.j.info("backChannelRequestTimeoutMs_="+I)),I=x;const yn=c.g;if(yn){const ws=yn.g?yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ws){var K=I.h;K.g||ws.indexOf("spdy")==-1&&ws.indexOf("quic")==-1&&ws.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(qa(K,K.h),K.h=null))}if(I.D){const No=yn.g?yn.g.getResponseHeader("X-HTTP-Session-Id"):null;No&&(I.ya=No,Ye(I.I,I.D,No))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-c.F,x.j.info("Handshake RTT: "+x.R+"ms")),I=x;var ue=c;if(I.qa=Fu(I,I.J?I.ia:null,I.W),ue.K){bu(I.h,ue);var Ge=ue,Tt=I.L;Tt&&(Ge.I=Tt),Ge.B&&(ds(Ge),Xe(Ge)),I.g=ue}else vs(I);0<x.i.length&&hr(x)}else Fe[0]!="stop"&&Fe[0]!="close"||Mr(x,7);else x.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?Mr(x,7):Lt(x):Fe[0]!="noop"&&x.l&&x.l.ta(Fe),x.v=0)}}jr(4)}catch{}}var Su=class{constructor(c,y){this.g=c,this.map=y}};function fs(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function pn(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Pu(c){return c.h?1:c.g?c.g.size:0}function Jt(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function qa(c,y){c.g?c.g.add(y):c.h=y}function bu(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}fs.prototype.cancel=function(){if(this.i=Au(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Au(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const x of c.g.values())y=y.concat(x.D);return y}return C(c.i)}function wo(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var y=[],x=c.length,I=0;I<x;I++)y.push(c[I]);return y}y=[],x=0;for(I in c)y[x++]=c[I];return y}function _o(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var y=[];c=c.length;for(var x=0;x<c;x++)y.push(x);return y}y=[],x=0;for(const I in c)y[x++]=I;return y}}}function ci(c,y){if(c.forEach&&typeof c.forEach=="function")c.forEach(y,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,y,void 0);else for(var x=_o(c),I=wo(c),$=I.length,K=0;K<$;K++)y.call(void 0,I[K],x&&x[K],c)}var ps=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nd(c,y){if(c){c=c.split("&");for(var x=0;x<c.length;x++){var I=c[x].indexOf("="),$=null;if(0<=I){var K=c[x].substring(0,I);$=c[x].substring(I+1)}else K=c[x];y(K,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Dr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Dr){this.h=c.h,ms(this,c.j),this.o=c.o,this.g=c.g,hi(this,c.s),this.l=c.l;var y=c.i,x=new lr;x.i=y.i,y.g&&(x.g=new Map(y.g),x.h=y.h),di(this,x),this.m=c.m}else c&&(y=String(c).match(ps))?(this.h=!1,ms(this,y[1]||"",!0),this.o=Le(y[2]||""),this.g=Le(y[3]||"",!0),hi(this,y[4]),this.l=Le(y[5]||"",!0),di(this,y[6]||"",!0),this.m=Le(y[7]||"")):(this.h=!1,this.i=new lr(null,this.h))}Dr.prototype.toString=function(){var c=[],y=this.j;y&&c.push(pi(y,xo,!0),":");var x=this.g;return(x||y=="file")&&(c.push("//"),(y=this.o)&&c.push(pi(y,xo,!0),"@"),c.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&c.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&c.push("/"),c.push(pi(x,x.charAt(0)=="/"?Nu:Cu,!0))),(x=this.i.toString())&&c.push("?",x),(x=this.m)&&c.push("#",pi(x,Ha)),c.join("")};function mn(c){return new Dr(c)}function ms(c,y,x){c.j=x?Le(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function hi(c,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);c.s=y}else c.s=null}function di(c,y,x){y instanceof lr?(c.i=y,ur(c.i,c.h)):(x||(y=pi(y,Ru)),c.i=new lr(y,c.h))}function Ye(c,y,x){c.i.set(y,x)}function fi(c){return Ye(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Le(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function pi(c,y,x){return typeof c=="string"?(c=encodeURI(c).replace(y,ku),x&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function ku(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var xo=/[#\/\?@]/g,Cu=/[#\?:]/g,Nu=/[#\?]/g,Ru=/[#\?@]/g,Ha=/#/g;function lr(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function Vt(c){c.g||(c.g=new Map,c.h=0,c.i&&nd(c.i,function(y,x){c.add(decodeURIComponent(y.replace(/\+/g," ")),x)}))}n=lr.prototype,n.add=function(c,y){Vt(this),this.i=null,c=Sn(this,c);var x=this.g.get(c);return x||this.g.set(c,x=[]),x.push(y),this.h+=1,this};function zn(c,y){Vt(c),y=Sn(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function $n(c,y){return Vt(c),y=Sn(c,y),c.g.has(y)}n.forEach=function(c,y){Vt(this),this.g.forEach(function(x,I){x.forEach(function($){c.call(y,$,I,this)},this)},this)},n.na=function(){Vt(this);const c=Array.from(this.g.values()),y=Array.from(this.g.keys()),x=[];for(let I=0;I<y.length;I++){const $=c[I];for(let K=0;K<$.length;K++)x.push(y[I])}return x},n.V=function(c){Vt(this);let y=[];if(typeof c=="string")$n(this,c)&&(y=y.concat(this.g.get(Sn(this,c))));else{c=Array.from(this.g.values());for(let x=0;x<c.length;x++)y=y.concat(c[x])}return y},n.set=function(c,y){return Vt(this),this.i=null,c=Sn(this,c),$n(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},n.get=function(c,y){return c?(c=this.V(c),0<c.length?String(c[0]):y):y};function mi(c,y,x){zn(c,y),0<x.length&&(c.i=null,c.g.set(Sn(c,y),C(x)),c.h+=x.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(var x=0;x<y.length;x++){var I=y[x];const K=encodeURIComponent(String(I)),ue=this.V(I);for(I=0;I<ue.length;I++){var $=K;ue[I]!==""&&($+="="+encodeURIComponent(String(ue[I]))),c.push($)}}return this.i=c.join("&")};function Sn(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function ur(c,y){y&&!c.j&&(Vt(c),c.i=null,c.g.forEach(function(x,I){var $=I.toLowerCase();I!=$&&(zn(this,I),mi(this,$,x))},c)),c.j=y}function rd(c,y){const x=new us;if(h.Image){const I=new Image;I.onload=S(rn,x,"TestLoadImage: loaded",!0,y,I),I.onerror=S(rn,x,"TestLoadImage: error",!1,y,I),I.onabort=S(rn,x,"TestLoadImage: abort",!1,y,I),I.ontimeout=S(rn,x,"TestLoadImage: timeout",!1,y,I),h.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else y(!1)}function ju(c,y){const x=new us,I=new AbortController,$=setTimeout(()=>{I.abort(),rn(x,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:I.signal}).then(K=>{clearTimeout($),K.ok?rn(x,"TestPingServer: ok",!0,y):rn(x,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout($),rn(x,"TestPingServer: error",!1,y)})}function rn(c,y,x,I,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),I(x)}catch{}}function id(){this.g=new Oa}function Du(c,y,x){const I=x||"";try{ci(c,function($,K){let ue=$;m($)&&(ue=Va($)),y.push(I+K+"="+encodeURIComponent(ue))})}catch($){throw y.push(I+"type="+encodeURIComponent("_badmap")),$}}function Vr(c){this.l=c.Ub||null,this.j=c.eb||!1}D(Vr,as),Vr.prototype.g=function(){return new gs(this.l,this.j)},Vr.prototype.i=function(c){return function(){return c}}({});function gs(c,y){xt.call(this),this.D=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(gs,xt),n=gs.prototype,n.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=y,this.readyState=1,qn(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(y.body=c),(this.D||h).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wn(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,qn(this)),this.g&&(this.readyState=3,qn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Vu(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Vu(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?Wn(this):qn(this),this.readyState==3&&Vu(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Wn(this))},n.Qa=function(c){this.g&&(this.response=c,Wn(this))},n.ga=function(){this.g&&Wn(this)};function Wn(c){c.readyState=4,c.l=null,c.j=null,c.v=null,qn(c)}n.setRequestHeader=function(c,y){this.u.append(c,y)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var x=y.next();!x.done;)x=x.value,c.push(x[0]+": "+x[1]),x=y.next();return c.join(`\r
`)};function qn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(gs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Lr(c){let y="";return se(c,function(x,I){y+=I,y+=":",y+=x,y+=`\r
`}),y}function gi(c,y,x){e:{for(I in x){var I=!1;break e}I=!0}I||(x=Lr(x),typeof c=="string"?x!=null&&encodeURIComponent(String(x)):Ye(c,y,x))}function nt(c){xt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(nt,xt);var sd=/^https?$/i,Ga=["POST","PUT"];n=nt.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,y,x,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Un.g(),this.v=this.o?co(this.o):co(Un),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(K){ys(this,K);return}if(c=x||"",x=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var $ in I)x.set($,I[$]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const K of I.keys())x.set(K,I.get(K));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(x.keys()).find(K=>K.toLowerCase()=="content-type"),$=h.FormData&&c instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Ga,y,void 0))||I||$||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ue]of x)this.g.setRequestHeader(K,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{To(this),this.u=!0,this.g.send(c),this.u=!1}catch(K){ys(this,K)}};function ys(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.m=5,Eo(c),gn(c)}function Eo(c){c.A||(c.A=!0,Et(c,"complete"),Et(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Et(this,"complete"),Et(this,"abort"),gn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gn(this,!0)),nt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ka(this):this.bb())},n.bb=function(){Ka(this)};function Ka(c){if(c.h&&typeof u<"u"&&(!c.v[1]||sn(c)!=4||c.Z()!=2)){if(c.u&&sn(c)==4)Ra(c.Ea,0,c);else if(Et(c,"readystatechange"),sn(c)==4){c.h=!1;try{const ue=c.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var x;if(!(x=y)){var I;if(I=ue===0){var $=String(c.D).match(ps)[1]||null;!$&&h.self&&h.self.location&&($=h.self.location.protocol.slice(0,-1)),I=!sd.test($?$.toLowerCase():"")}x=I}if(x)Et(c,"complete"),Et(c,"success");else{c.m=6;try{var K=2<sn(c)?c.g.statusText:""}catch{K=""}c.l=K+" ["+c.Z()+"]",Eo(c)}}finally{gn(c)}}}}function gn(c,y){if(c.g){To(c);const x=c.g,I=c.v[0]?()=>{}:null;c.g=null,c.v=null,y||Et(c,"ready");try{x.onreadystatechange=I}catch{}}}function To(c){c.I&&(h.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function sn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<sn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),La(y)}};function Qa(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Io(c){const y={};c=(c.g&&2<=sn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(H(c[I]))continue;var x=F(c[I]);const $=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const K=y[$]||[];y[$]=K,K.push(x)}R(y,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function cr(c,y,x){return x&&x.internalChannelParams&&x.internalChannelParams[c]||y}function Ya(c){this.Aa=0,this.i=[],this.j=new us,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=cr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=cr("baseRetryDelayMs",5e3,c),this.cb=cr("retryDelaySeedMs",1e4,c),this.Wa=cr("forwardChannelMaxRetries",2,c),this.wa=cr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new fs(c&&c.concurrentRequestLimit),this.Da=new id,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ya.prototype,n.la=8,n.G=1,n.connect=function(c,y,x,I){ht(0),this.W=c,this.H=y||{},x&&I!==void 0&&(this.H.OSID=x,this.H.OAID=I),this.F=this.X,this.I=Fu(this,null,this.W),hr(this)};function Lt(c){if(So(c),c.G==3){var y=c.U++,x=mn(c.I);if(Ye(x,"SID",c.K),Ye(x,"RID",y),Ye(x,"TYPE","terminate"),Or(c,x),y=new Bn(c,c.j,y),y.L=2,y.v=fi(mn(x)),x=!1,h.navigator&&h.navigator.sendBeacon)try{x=h.navigator.sendBeacon(y.v.toString(),"")}catch{}!x&&h.Image&&(new Image().src=y.v,x=!0),x||(y.g=Uu(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Xe(y)}Mu(c)}function Hn(c){c.g&&(Xa(c),c.g.cancel(),c.g=null)}function So(c){Hn(c),c.u&&(h.clearTimeout(c.u),c.u=null),Ao(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&h.clearTimeout(c.s),c.s=null)}function hr(c){if(!pn(c.h)&&!c.s){c.s=!0;var y=c.Ga;Ce||X(),ae||(Ce(),ae=!0),Z.add(y,c),c.B=0}}function od(c,y){return Pu(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=y.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Mn(E(c.Ga,c,y),Ou(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const $=new Bn(this,this.j,c);let K=this.o;if(this.S&&(K?(K=P(K),V(K,this.S)):K=this.S),this.m!==null||this.O||($.H=K,K=null),this.P)e:{for(var y=0,x=0;x<this.i.length;x++){t:{var I=this.i[x];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(y+=I,4096<y){y=x;break e}if(y===4096||x===this.i.length-1){y=x+1;break e}}y=1e3}else y=1e3;y=yi(this,$,y),x=mn(this.I),Ye(x,"RID",c),Ye(x,"CVER",22),this.D&&Ye(x,"X-HTTP-Session-Id",this.D),Or(this,x),K&&(this.O?y="headers="+encodeURIComponent(String(Lr(K)))+"&"+y:this.m&&gi(x,this.m,K)),qa(this.h,$),this.Ua&&Ye(x,"TYPE","init"),this.P?(Ye(x,"$req",y),Ye(x,"SID","null"),$.T=!0,vo($,x,null)):vo($,x,y),this.G=2}}else this.G==3&&(c?Po(this,c):this.i.length==0||pn(this.h)||Po(this))};function Po(c,y){var x;y?x=y.l:x=c.U++;const I=mn(c.I);Ye(I,"SID",c.K),Ye(I,"RID",x),Ye(I,"AID",c.T),Or(c,I),c.m&&c.o&&gi(I,c.m,c.o),x=new Bn(c,c.j,x,c.B+1),c.m===null&&(x.H=c.o),y&&(c.i=y.D.concat(c.i)),y=yi(c,x,1e3),x.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),qa(c.h,x),vo(x,I,y)}function Or(c,y){c.H&&se(c.H,function(x,I){Ye(y,I,x)}),c.l&&ci({},function(x,I){Ye(y,I,x)})}function yi(c,y,x){x=Math.min(c.i.length,x);var I=c.l?E(c.l.Na,c.l,c):null;e:{var $=c.i;let K=-1;for(;;){const ue=["count="+x];K==-1?0<x?(K=$[0].g,ue.push("ofs="+K)):K=0:ue.push("ofs="+K);let Ge=!0;for(let Tt=0;Tt<x;Tt++){let Fe=$[Tt].g;const kt=$[Tt].map;if(Fe-=K,0>Fe)K=Math.max(0,$[Tt].g-100),Ge=!1;else try{Du(kt,ue,"req"+Fe+"_")}catch{I&&I(kt)}}if(Ge){I=ue.join("&");break e}}}return c=c.i.splice(0,x),y.D=c,I}function vs(c){if(!c.g&&!c.u){c.Y=1;var y=c.Fa;Ce||X(),ae||(Ce(),ae=!0),Z.add(y,c),c.v=0}}function bo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Mn(E(c.Fa,c),Ou(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,Lu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Mn(E(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ht(10),Hn(this),Lu(this))};function Xa(c){c.A!=null&&(h.clearTimeout(c.A),c.A=null)}function Lu(c){c.g=new Bn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var y=mn(c.qa);Ye(y,"RID","rpc"),Ye(y,"SID",c.K),Ye(y,"AID",c.T),Ye(y,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ye(y,"TO",c.ja),Ye(y,"TYPE","xmlhttp"),Or(c,y),c.m&&c.o&&gi(y,c.m,c.o),c.L&&(c.g.I=c.L);var x=c.g;c=c.ia,x.L=1,x.v=fi(mn(y)),x.m=null,x.P=!0,$a(x,c)}n.Za=function(){this.C!=null&&(this.C=null,Hn(this),bo(this),ht(19))};function Ao(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function ko(c,y){var x=null;if(c.g==y){Ao(c),Xa(c),c.g=null;var I=2}else if(Jt(c.h,y))x=y.D,bu(c.h,y),I=1;else return;if(c.G!=0){if(y.o)if(I==1){x=y.m?y.m.length:0,y=Date.now()-y.F;var $=c.B;I=ls(),Et(I,new po(I,x)),hr(c)}else vs(c);else if($=y.s,$==3||$==0&&0<y.X||!(I==1&&od(c,y)||I==2&&bo(c)))switch(x&&0<x.length&&(y=c.h,y.i=y.i.concat(x)),$){case 1:Mr(c,5);break;case 4:Mr(c,10);break;case 3:Mr(c,6);break;default:Mr(c,2)}}}function Ou(c,y){let x=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(x*=2),x*y}function Mr(c,y){if(c.j.info("Error code "+y),y==2){var x=E(c.fb,c),I=c.Xa;const $=!I;I=new Dr(I||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||ms(I,"https"),fi(I),$?rd(I.toString(),x):ju(I.toString(),x)}else ht(2);c.G=0,c.l&&c.l.sa(y),Mu(c),So(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function Mu(c){if(c.G=0,c.ka=[],c.l){const y=Au(c.h);(y.length!=0||c.i.length!=0)&&(A(c.ka,y),A(c.ka,c.i),c.h.i.length=0,C(c.i),c.i.length=0),c.l.ra()}}function Fu(c,y,x){var I=x instanceof Dr?mn(x):new Dr(x);if(I.g!="")y&&(I.g=y+"."+I.g),hi(I,I.s);else{var $=h.location;I=$.protocol,y=y?y+"."+$.hostname:$.hostname,$=+$.port;var K=new Dr(null);I&&ms(K,I),y&&(K.g=y),$&&hi(K,$),x&&(K.l=x),I=K}return x=c.D,y=c.ya,x&&y&&Ye(I,x,y),Ye(I,"VER",c.la),Or(c,I),I}function Uu(c,y,x){if(y&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Ca&&!c.pa?new nt(new Vr({eb:x})):new nt(c.pa),y.Ha(c.J),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ja(){}n=Ja.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Co(){}Co.prototype.g=function(c,y){return new Zt(c,y)};function Zt(c,y){xt.call(this),this.g=new Ya(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(c?c["X-WebChannel-Client-Profile"]=y.va:c={"X-WebChannel-Client-Profile":y.va}),this.g.S=c,(c=y&&y.Sb)&&!H(c)&&(this.g.m=c),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!H(y)&&(this.g.D=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new dr(this)}D(Zt,xt),Zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Zt.prototype.close=function(){Lt(this.g)},Zt.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var x={};x.__data__=c,c=x}else this.u&&(x={},x.__data__=Va(c),c=x);y.i.push(new Su(y.Ya++,c)),y.G==3&&hr(y)},Zt.prototype.N=function(){this.g.l=null,delete this.j,Lt(this.g),delete this.g,Zt.aa.N.call(this)};function Bu(c){or.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const x in y){c=x;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}D(Bu,or);function zu(){fo.call(this),this.status=1}D(zu,fo);function dr(c){this.g=c}D(dr,Ja),dr.prototype.ua=function(){Et(this.g,"a")},dr.prototype.ta=function(c){Et(this.g,new Bu(c))},dr.prototype.sa=function(c){Et(this.g,new zu)},dr.prototype.ra=function(){Et(this.g,"b")},Co.prototype.createWebChannel=Co.prototype.g,Zt.prototype.send=Zt.prototype.o,Zt.prototype.open=Zt.prototype.m,Zt.prototype.close=Zt.prototype.close,Ox=function(){return new Co},Lx=function(){return ls()},Vx=ar,xp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},go.NO_ERROR=0,go.TIMEOUT=8,go.HTTP_ERROR=6,Qc=go,xu.COMPLETE="complete",Dx=xu,ho.EventType=Tn,Tn.OPEN="a",Tn.CLOSE="b",Tn.ERROR="c",Tn.MESSAGE="d",xt.prototype.listen=xt.prototype.K,Al=ho,nt.prototype.listenOnce=nt.prototype.L,nt.prototype.getLastError=nt.prototype.Ka,nt.prototype.getLastErrorCode=nt.prototype.Ba,nt.prototype.getStatus=nt.prototype.Z,nt.prototype.getResponseJson=nt.prototype.Oa,nt.prototype.getResponseText=nt.prototype.oa,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Ha,jx=nt}).apply(typeof Oc<"u"?Oc:typeof self<"u"?self:typeof window<"u"?window:{});const I0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Qt.UNAUTHENTICATED=new Qt(null),Qt.GOOGLE_CREDENTIALS=new Qt("google-credentials-uid"),Qt.FIRST_PARTY=new Qt("first-party-uid"),Qt.MOCK_USER=new Qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ia="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs=new Ch("@firebase/firestore");function Tl(){return Gs.logLevel}function me(n,...e){if(Gs.logLevel<=Oe.DEBUG){const t=e.map(gm);Gs.debug(`Firestore (${Ia}): ${n}`,...t)}}function ni(n,...e){if(Gs.logLevel<=Oe.ERROR){const t=e.map(gm);Gs.error(`Firestore (${Ia}): ${n}`,...t)}}function da(n,...e){if(Gs.logLevel<=Oe.WARN){const t=e.map(gm);Gs.warn(`Firestore (${Ia}): ${n}`,...t)}}function gm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(n="Unexpected state"){const e=`FIRESTORE (${Ia}) INTERNAL ASSERTION FAILED: `+n;throw ni(e),new Error(e)}function Ke(n,e){n||Pe()}function Ae(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends sr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Qt.UNAUTHENTICATED))}shutdown(){}}class iC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class sC{constructor(e){this.t=e,this.currentUser=Qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ke(this.o===void 0);let r=this.i;const o=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let a=new qi;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new qi,e.enqueueRetryable(()=>o(this.currentUser))};const u=()=>{const f=a;e.enqueueRetryable(async()=>{await f.promise,await o(this.currentUser)})},h=f=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(f=>h(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new qi)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ke(typeof r.accessToken=="string"),new Mx(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string"),new Qt(e)}}class oC{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Qt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class aC{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new oC(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class lC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uC{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ke(this.o===void 0);const r=a=>{a.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.R;return this.R=a.token,me("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const o=a=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>o(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?o(a):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ke(typeof t.token=="string"),this.R=t.token,new lC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=cC(40);for(let a=0;a<o.length;++a)r.length<20&&o[a]<t&&(r+=e.charAt(o[a]%e.length))}return r}}function We(n,e){return n<e?-1:n>e?1:0}function fa(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return bt.fromMillis(Date.now())}static fromDate(e){return bt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new bt(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.timestamp=e}static fromTimestamp(e){return new be(e)}static min(){return new be(new bt(0,0))}static max(){return new be(new bt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,t,r){t===void 0?t=0:t>e.length&&Pe(),r===void 0?r=e.length-t:r>e.length-t&&Pe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Gl.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Gl?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const a=e.get(o),u=t.get(o);if(a<u)return-1;if(a>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ct extends Gl{construct(e,t,r){return new ct(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new ct(t)}static emptyPath(){return new ct([])}}const hC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ut extends Gl{construct(e,t,r){return new Ut(e,t,r)}static isValidIdentifier(e){return hC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ut.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ut(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const a=()=>{if(r.length===0)throw new xe(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;o<e.length;){const h=e[o];if(h==="\\"){if(o+1===e.length)throw new xe(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[o+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new xe(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,o+=2}else h==="`"?(u=!u,o++):h!=="."||u?(r+=h,o++):(a(),o++)}if(a(),u)throw new xe(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ut(t)}static emptyPath(){return new Ut([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(ct.fromString(e))}static fromName(e){return new Ee(ct.fromString(e).popFirst(5))}static empty(){return new Ee(ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ct.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new ct(e.slice()))}}function dC(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=be.fromTimestamp(r===1e9?new bt(t+1,0):new bt(t,r));return new Ki(o,Ee.empty(),e)}function fC(n){return new Ki(n.readTime,n.key,-1)}class Ki{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ki(be.min(),Ee.empty(),-1)}static max(){return new Ki(be.max(),Ee.empty(),-1)}}function pC(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(n.documentKey,e.documentKey),t!==0?t:We(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cu(n){if(n.code!==ie.FAILED_PRECONDITION||n.message!==mC)throw n;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne((r,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.reject(t)}static resolve(e){return new ne((t,r)=>{t(e)})}static reject(e){return new ne((t,r)=>{r(e)})}static waitFor(e){return new ne((t,r)=>{let o=0,a=0,u=!1;e.forEach(h=>{++o,h.next(()=>{++a,u&&a===o&&t()},f=>r(f))}),u=!0,a===o&&t()})}static or(e){let t=ne.resolve(!1);for(const r of e)t=t.next(o=>o?ne.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,a)=>{r.push(t.call(this,o,a))}),this.waitFor(r)}static mapArray(e,t){return new ne((r,o)=>{const a=e.length,u=new Array(a);let h=0;for(let f=0;f<a;f++){const m=f;t(e[m]).next(w=>{u[m]=w,++h,h===a&&r(u)},w=>o(w))}})}static doWhile(e,t){return new ne((r,o)=>{const a=()=>{e()===!0?t().next(()=>{a()},o):r()};a()})}}function yC(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function hu(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ym.oe=-1;function Dh(n){return n==null}function uh(n){return n===0&&1/n==-1/0}function vC(n){return typeof n=="number"&&Number.isInteger(n)&&!uh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Sa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Ux(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,t){this.comparator=e,this.root=t||Ft.EMPTY}insert(e,t){return new lt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ft.BLACK,null,null))}remove(e){return new lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ft.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mc(this.root,e,this.comparator,!0)}}class Mc{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ft{constructor(e,t,r,o,a){this.key=e,this.value=t,this.color=r??Ft.RED,this.left=o??Ft.EMPTY,this.right=a??Ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,a){return new Ft(e??this.key,t??this.value,r??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const a=r(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,r),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ft.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Pe();const e=this.left.check();if(e!==this.right.check())throw Pe();return e+(this.isRed()?0:1)}}Ft.EMPTY=null,Ft.RED=!0,Ft.BLACK=!1;Ft.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe()}get value(){throw Pe()}get color(){throw Pe()}get left(){throw Pe()}get right(){throw Pe()}copy(e,t,r,o,a){return this}insert(e,t,r){return new Ft(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.comparator=e,this.data=new lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new P0(this.data.getIterator())}getIteratorFrom(e){return new P0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=r.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Bt(this.comparator);return t.data=e,t}}class P0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e){this.fields=e,e.sort(Ut.comparator)}static empty(){return new er([])}unionWith(e){let t=new Bt(Ut.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new er(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return fa(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Bx("Invalid base64 string: "+a):a}}(e);return new zt(t)}static fromUint8Array(e){const t=function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a}(e);return new zt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zt.EMPTY_BYTE_STRING=new zt("");const wC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qi(n){if(Ke(!!n),typeof n=="string"){let e=0;const t=wC.exec(n);if(Ke(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ft(n.seconds),nanos:ft(n.nanos)}}function ft(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ks(n){return typeof n=="string"?zt.fromBase64String(n):zt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function wm(n){const e=n.mapValue.fields.__previous_value__;return vm(e)?wm(e):e}function Kl(n){const e=Qi(n.mapValue.fields.__local_write_time__.timestampValue);return new bt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,t,r,o,a,u,h,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=m}}class Ql{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ql("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ql&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fc={mapValue:{}};function Qs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?vm(n)?4:EC(n)?9007199254740991:xC(n)?10:11:Pe()}function Pr(n,e){if(n===e)return!0;const t=Qs(n);if(t!==Qs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Kl(n).isEqual(Kl(e));case 3:return function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=Qi(o.timestampValue),h=Qi(a.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(o,a){return Ks(o.bytesValue).isEqual(Ks(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(o,a){return ft(o.geoPointValue.latitude)===ft(a.geoPointValue.latitude)&&ft(o.geoPointValue.longitude)===ft(a.geoPointValue.longitude)}(n,e);case 2:return function(o,a){if("integerValue"in o&&"integerValue"in a)return ft(o.integerValue)===ft(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=ft(o.doubleValue),h=ft(a.doubleValue);return u===h?uh(u)===uh(h):isNaN(u)&&isNaN(h)}return!1}(n,e);case 9:return fa(n.arrayValue.values||[],e.arrayValue.values||[],Pr);case 10:case 11:return function(o,a){const u=o.mapValue.fields||{},h=a.mapValue.fields||{};if(S0(u)!==S0(h))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(h[f]===void 0||!Pr(u[f],h[f])))return!1;return!0}(n,e);default:return Pe()}}function Yl(n,e){return(n.values||[]).find(t=>Pr(t,e))!==void 0}function pa(n,e){if(n===e)return 0;const t=Qs(n),r=Qs(e);if(t!==r)return We(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return We(n.booleanValue,e.booleanValue);case 2:return function(a,u){const h=ft(a.integerValue||a.doubleValue),f=ft(u.integerValue||u.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1}(n,e);case 3:return b0(n.timestampValue,e.timestampValue);case 4:return b0(Kl(n),Kl(e));case 5:return We(n.stringValue,e.stringValue);case 6:return function(a,u){const h=Ks(a),f=Ks(u);return h.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(a,u){const h=a.split("/"),f=u.split("/");for(let m=0;m<h.length&&m<f.length;m++){const w=We(h[m],f[m]);if(w!==0)return w}return We(h.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,u){const h=We(ft(a.latitude),ft(u.latitude));return h!==0?h:We(ft(a.longitude),ft(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return A0(n.arrayValue,e.arrayValue);case 10:return function(a,u){var h,f,m,w;const _=a.fields||{},E=u.fields||{},S=(h=_.value)===null||h===void 0?void 0:h.arrayValue,D=(f=E.value)===null||f===void 0?void 0:f.arrayValue,C=We(((m=S?.values)===null||m===void 0?void 0:m.length)||0,((w=D?.values)===null||w===void 0?void 0:w.length)||0);return C!==0?C:A0(S,D)}(n.mapValue,e.mapValue);case 11:return function(a,u){if(a===Fc.mapValue&&u===Fc.mapValue)return 0;if(a===Fc.mapValue)return 1;if(u===Fc.mapValue)return-1;const h=a.fields||{},f=Object.keys(h),m=u.fields||{},w=Object.keys(m);f.sort(),w.sort();for(let _=0;_<f.length&&_<w.length;++_){const E=We(f[_],w[_]);if(E!==0)return E;const S=pa(h[f[_]],m[w[_]]);if(S!==0)return S}return We(f.length,w.length)}(n.mapValue,e.mapValue);default:throw Pe()}}function b0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return We(n,e);const t=Qi(n),r=Qi(e),o=We(t.seconds,r.seconds);return o!==0?o:We(t.nanos,r.nanos)}function A0(n,e){const t=n.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const a=pa(t[o],r[o]);if(a)return a}return We(t.length,r.length)}function ma(n){return Ep(n)}function Ep(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Qi(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ks(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ee.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",o=!0;for(const a of t.values||[])o?o=!1:r+=",",r+=Ep(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of r)a?a=!1:o+=",",o+=`${u}:${Ep(t.fields[u])}`;return o+"}"}(n.mapValue):Pe()}function Tp(n){return!!n&&"integerValue"in n}function _m(n){return!!n&&"arrayValue"in n}function k0(n){return!!n&&"nullValue"in n}function C0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Yc(n){return!!n&&"mapValue"in n}function xC(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function jl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Sa(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=jl(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=jl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function EC(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.value=e}static empty(){return new Vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Yc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=jl(t)}setAll(e){let t=Ut.emptyPath(),r={},o=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const f=this.getFieldsMap(t);this.applyChanges(f,r,o),r={},o=[],t=h.popLast()}u?r[h.lastSegment()]=jl(u):o.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,o)}delete(e){const t=this.field(e.popLast());Yc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Pr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Yc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Sa(t,(o,a)=>e[o]=a);for(const o of r)delete e[o]}clone(){return new Vn(jl(this.value))}}function zx(n){const e=[];return Sa(n.fields,(t,r)=>{const o=new Ut([t]);if(Yc(r)){const a=zx(r.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)}),new er(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e,t,r,o,a,u,h){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=a,this.data=u,this.documentState=h}static newInvalidDocument(e){return new Yt(e,0,be.min(),be.min(),be.min(),Vn.empty(),0)}static newFoundDocument(e,t,r,o){return new Yt(e,1,t,be.min(),r,o,0)}static newNoDocument(e,t){return new Yt(e,2,t,be.min(),be.min(),Vn.empty(),0)}static newUnknownDocument(e,t){return new Yt(e,3,t,be.min(),be.min(),Vn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,t){this.position=e,this.inclusive=t}}function N0(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const a=e[o],u=n.position[o];if(a.field.isKeyField()?r=Ee.comparator(Ee.fromName(u.referenceValue),t.key):r=pa(u,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function R0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Pr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,t="asc"){this.field=e,this.dir=t}}function TC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $x=class{};class Pt extends $x{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new SC(e,t,r):t==="array-contains"?new AC(e,r):t==="in"?new kC(e,r):t==="not-in"?new CC(e,r):t==="array-contains-any"?new NC(e,r):new Pt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new PC(e,r):new bC(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(pa(t,this.value)):t!==null&&Qs(this.value)===Qs(t)&&this.matchesComparison(pa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class br extends $x{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new br(e,t)}matches(e){return Wx(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Wx(n){return n.op==="and"}function qx(n){return IC(n)&&Wx(n)}function IC(n){for(const e of n.filters)if(e instanceof br)return!1;return!0}function Ip(n){if(n instanceof Pt)return n.field.canonicalString()+n.op.toString()+ma(n.value);if(qx(n))return n.filters.map(e=>Ip(e)).join(",");{const e=n.filters.map(t=>Ip(t)).join(",");return`${n.op}(${e})`}}function Hx(n,e){return n instanceof Pt?function(r,o){return o instanceof Pt&&r.op===o.op&&r.field.isEqual(o.field)&&Pr(r.value,o.value)}(n,e):n instanceof br?function(r,o){return o instanceof br&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((a,u,h)=>a&&Hx(u,o.filters[h]),!0):!1}(n,e):void Pe()}function Gx(n){return n instanceof Pt?function(t){return`${t.field.canonicalString()} ${t.op} ${ma(t.value)}`}(n):n instanceof br?function(t){return t.op.toString()+" {"+t.getFilters().map(Gx).join(" ,")+"}"}(n):"Filter"}class SC extends Pt{constructor(e,t,r){super(e,t,r),this.key=Ee.fromName(r.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class PC extends Pt{constructor(e,t){super(e,"in",t),this.keys=Kx("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class bC extends Pt{constructor(e,t){super(e,"not-in",t),this.keys=Kx("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Kx(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Ee.fromName(r.referenceValue))}class AC extends Pt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return _m(t)&&Yl(t.arrayValue,this.value)}}class kC extends Pt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Yl(this.value.arrayValue,t)}}class CC extends Pt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Yl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Yl(this.value.arrayValue,t)}}class NC extends Pt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!_m(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Yl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,t=null,r=[],o=[],a=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=a,this.startAt=u,this.endAt=h,this.ue=null}}function j0(n,e=null,t=[],r=[],o=null,a=null,u=null){return new RC(n,e,t,r,o,a,u)}function xm(n){const e=Ae(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Ip(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Dh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ma(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ma(r)).join(",")),e.ue=t}return e.ue}function Em(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!TC(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Hx(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!R0(n.startAt,e.startAt)&&R0(n.endAt,e.endAt)}function Sp(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,t=null,r=[],o=[],a=null,u="F",h=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=a,this.limitType=u,this.startAt=h,this.endAt=f,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function jC(n,e,t,r,o,a,u,h){return new Vh(n,e,t,r,o,a,u,h)}function Tm(n){return new Vh(n)}function D0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function DC(n){return n.collectionGroup!==null}function Dl(n){const e=Ae(n);if(e.ce===null){e.ce=[];const t=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new Bt(Ut.comparator);return u.filters.forEach(f=>{f.getFlattenedFilters().forEach(m=>{m.isInequality()&&(h=h.add(m.field))})}),h})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.ce.push(new hh(a,r))}),t.has(Ut.keyField().canonicalString())||e.ce.push(new hh(Ut.keyField(),r))}return e.ce}function Er(n){const e=Ae(n);return e.le||(e.le=VC(e,Dl(n))),e.le}function VC(n,e){if(n.limitType==="F")return j0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(o=>{const a=o.dir==="desc"?"asc":"desc";return new hh(o.field,a)});const t=n.endAt?new ch(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ch(n.startAt.position,n.startAt.inclusive):null;return j0(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Pp(n,e,t){return new Vh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Lh(n,e){return Em(Er(n),Er(e))&&n.limitType===e.limitType}function Qx(n){return`${xm(Er(n))}|lt:${n.limitType}`}function Jo(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(o=>Gx(o)).join(", ")}]`),Dh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(o=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(o)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(o=>ma(o)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(o=>ma(o)).join(",")),`Target(${r})`}(Er(n))}; limitType=${n.limitType})`}function Oh(n,e){return e.isFoundDocument()&&function(r,o){const a=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Ee.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,o){for(const a of Dl(r))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0}(n,e)&&function(r,o){for(const a of r.filters)if(!a.matches(o))return!1;return!0}(n,e)&&function(r,o){return!(r.startAt&&!function(u,h,f){const m=N0(u,h,f);return u.inclusive?m<=0:m<0}(r.startAt,Dl(r),o)||r.endAt&&!function(u,h,f){const m=N0(u,h,f);return u.inclusive?m>=0:m>0}(r.endAt,Dl(r),o))}(n,e)}function LC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Yx(n){return(e,t)=>{let r=!1;for(const o of Dl(n)){const a=OC(o,e,t);if(a!==0)return a;r=r||o.field.isKeyField()}return 0}}function OC(n,e,t){const r=n.field.isKeyField()?Ee.comparator(e.key,t.key):function(a,u,h){const f=u.data.field(a),m=h.data.field(a);return f!==null&&m!==null?pa(f,m):Pe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Pe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,a]of r)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Sa(this.inner,(t,r)=>{for(const[o,a]of r)e(o,a)})}isEmpty(){return Ux(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=new lt(Ee.comparator);function ri(){return MC}const Xx=new lt(Ee.comparator);function kl(...n){let e=Xx;for(const t of n)e=e.insert(t.key,t);return e}function Jx(n){let e=Xx;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ms(){return Vl()}function Zx(){return Vl()}function Vl(){return new Pa(n=>n.toString(),(n,e)=>n.isEqual(e))}const FC=new lt(Ee.comparator),UC=new Bt(Ee.comparator);function Ve(...n){let e=UC;for(const t of n)e=e.add(t);return e}const BC=new Bt(We);function zC(){return BC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uh(e)?"-0":e}}function eE(n){return{integerValue:""+n}}function $C(n,e){return vC(e)?eE(e):Im(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(){this._=void 0}}function WC(n,e,t){return n instanceof dh?function(o,a){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&vm(a)&&(a=wm(a)),a&&(u.fields.__previous_value__=a),{mapValue:u}}(t,e):n instanceof Xl?nE(n,e):n instanceof Jl?rE(n,e):function(o,a){const u=tE(o,a),h=V0(u)+V0(o.Pe);return Tp(u)&&Tp(o.Pe)?eE(h):Im(o.serializer,h)}(n,e)}function qC(n,e,t){return n instanceof Xl?nE(n,e):n instanceof Jl?rE(n,e):t}function tE(n,e){return n instanceof fh?function(r){return Tp(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class dh extends Mh{}class Xl extends Mh{constructor(e){super(),this.elements=e}}function nE(n,e){const t=iE(e);for(const r of n.elements)t.some(o=>Pr(o,r))||t.push(r);return{arrayValue:{values:t}}}class Jl extends Mh{constructor(e){super(),this.elements=e}}function rE(n,e){let t=iE(e);for(const r of n.elements)t=t.filter(o=>!Pr(o,r));return{arrayValue:{values:t}}}class fh extends Mh{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function V0(n){return ft(n.integerValue||n.doubleValue)}function iE(n){return _m(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function HC(n,e){return n.field.isEqual(e.field)&&function(r,o){return r instanceof Xl&&o instanceof Xl||r instanceof Jl&&o instanceof Jl?fa(r.elements,o.elements,Pr):r instanceof fh&&o instanceof fh?Pr(r.Pe,o.Pe):r instanceof dh&&o instanceof dh}(n.transform,e.transform)}class GC{constructor(e,t){this.version=e,this.transformResults=t}}class Xr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Xr}static exists(e){return new Xr(void 0,e)}static updateTime(e){return new Xr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Fh{}function sE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new aE(n.key,Xr.none()):new du(n.key,n.data,Xr.none());{const t=n.data,r=Vn.empty();let o=new Bt(Ut.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?r.delete(a):r.set(a,u),o=o.add(a)}return new no(n.key,r,new er(o.toArray()),Xr.none())}}function KC(n,e,t){n instanceof du?function(o,a,u){const h=o.value.clone(),f=O0(o.fieldTransforms,a,u.transformResults);h.setAll(f),a.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,e,t):n instanceof no?function(o,a,u){if(!Xc(o.precondition,a))return void a.convertToUnknownDocument(u.version);const h=O0(o.fieldTransforms,a,u.transformResults),f=a.data;f.setAll(oE(o)),f.setAll(h),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function Ll(n,e,t,r){return n instanceof du?function(a,u,h,f){if(!Xc(a.precondition,u))return h;const m=a.value.clone(),w=M0(a.fieldTransforms,f,u);return m.setAll(w),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof no?function(a,u,h,f){if(!Xc(a.precondition,u))return h;const m=M0(a.fieldTransforms,f,u),w=u.data;return w.setAll(oE(a)),w.setAll(m),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(_=>_.field))}(n,e,t,r):function(a,u,h){return Xc(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h}(n,e,t)}function QC(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),a=tE(r.transform,o||null);a!=null&&(t===null&&(t=Vn.empty()),t.set(r.field,a))}return t||null}function L0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&fa(r,o,(a,u)=>HC(a,u))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class du extends Fh{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class no extends Fh{constructor(e,t,r,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function oE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function O0(n,e,t){const r=new Map;Ke(n.length===t.length);for(let o=0;o<t.length;o++){const a=n[o],u=a.transform,h=e.data.field(a.field);r.set(a.field,qC(u,h,t[o]))}return r}function M0(n,e,t){const r=new Map;for(const o of n){const a=o.transform,u=t.data.field(o.field);r.set(o.field,WC(a,u,e))}return r}class aE extends Fh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YC extends Fh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&KC(a,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ll(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ll(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Zx();return this.mutations.forEach(o=>{const a=e.get(o.key),u=a.overlayedDocument;let h=this.applyToLocalView(u,a.mutatedFields);h=t.has(o.key)?null:h;const f=sE(u,h);f!==null&&r.set(o.key,f),u.isValidDocument()||u.convertToNoDocument(be.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ve())}isEqual(e){return this.batchId===e.batchId&&fa(this.mutations,e.mutations,(t,r)=>L0(t,r))&&fa(this.baseMutations,e.baseMutations,(t,r)=>L0(t,r))}}class Sm{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Ke(e.mutations.length===r.length);let o=function(){return FC}();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,r[u].version);return new Sm(e,t,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vt,Ue;function eN(n){switch(n){default:return Pe();case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0}}function lE(n){if(n===void 0)return ni("GRPC error has no .code"),ie.UNKNOWN;switch(n){case vt.OK:return ie.OK;case vt.CANCELLED:return ie.CANCELLED;case vt.UNKNOWN:return ie.UNKNOWN;case vt.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case vt.INTERNAL:return ie.INTERNAL;case vt.UNAVAILABLE:return ie.UNAVAILABLE;case vt.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case vt.NOT_FOUND:return ie.NOT_FOUND;case vt.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case vt.ABORTED:return ie.ABORTED;case vt.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case vt.DATA_LOSS:return ie.DATA_LOSS;default:return Pe()}}(Ue=vt||(vt={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN=new Bs([4294967295,4294967295],0);function F0(n){const e=tN().encode(n),t=new Rx;return t.update(e),new Uint8Array(t.digest())}function U0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Bs([t,r],0),new Bs([o,a],0)]}class Pm{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Cl(`Invalid padding: ${t}`);if(r<0)throw new Cl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Cl(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Cl(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Bs.fromNumber(this.Ie)}Ee(e,t,r){let o=e.add(t.multiply(Bs.fromNumber(r)));return o.compare(nN)===1&&(o=new Bs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=F0(e),[r,o]=U0(t);for(let a=0;a<this.hashCount;a++){const u=this.Ee(r,o,a);if(!this.de(u))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new Pm(a,o,t);return r.forEach(h=>u.insert(h)),u}insert(e){if(this.Ie===0)return;const t=F0(e),[r,o]=U0(t);for(let a=0;a<this.hashCount;a++){const u=this.Ee(r,o,a);this.Ae(u)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Cl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,t,r,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,fu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Uh(be.min(),o,new lt(We),ri(),Ve())}}class fu{constructor(e,t,r,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new fu(r,t,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,t,r,o){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=o}}class uE{constructor(e,t){this.targetId=e,this.me=t}}class cE{constructor(e,t,r=zt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class B0{constructor(){this.fe=0,this.ge=$0(),this.pe=zt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ve(),t=Ve(),r=Ve();return this.ge.forEach((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Pe()}}),new fu(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=$0()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ke(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class rN{constructor(e){this.Le=e,this.Be=new Map,this.ke=ri(),this.qe=z0(),this.Qe=new lt(We)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Pe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,o)=>{this.ze(o)&&t(o)})}He(e){const t=e.targetId,r=e.me.count,o=this.Je(t);if(o){const a=o.target;if(Sp(a))if(r===0){const u=new Ee(a.path);this.Ue(t,u,Yt.newNoDocument(u,be.min()))}else Ke(r===1);else{const u=this.Ye(t);if(u!==r){const h=this.Ze(e),f=h?this.Xe(h,e,u):1;if(f!==0){this.je(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,m)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:a=0}=t;let u,h;try{u=Ks(r).toUint8Array()}catch(f){if(f instanceof Bx)return da("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new Pm(u,o,a)}catch(f){return da(f instanceof Cl?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.Ie===0?null:h}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let o=0;return r.forEach(a=>{const u=this.Le.tt(),h=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.Ue(t,a,null),o++)}),o}rt(e){const t=new Map;this.Be.forEach((a,u)=>{const h=this.Je(u);if(h){if(a.current&&Sp(h.target)){const f=new Ee(h.target.path);this.ke.get(f)!==null||this.it(u,f)||this.Ue(u,f,Yt.newNoDocument(f,e))}a.be&&(t.set(u,a.ve()),a.Ce())}});let r=Ve();this.qe.forEach((a,u)=>{let h=!0;u.forEachWhile(f=>{const m=this.Je(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(a))}),this.ke.forEach((a,u)=>u.setReadTime(e));const o=new Uh(e,t,this.Qe,this.ke,r);return this.ke=ri(),this.qe=z0(),this.Qe=new lt(We),o}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,t)?o.Fe(t,1):o.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new B0,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Bt(We),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new B0),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function z0(){return new lt(Ee.comparator)}function $0(){return new lt(Ee.comparator)}const iN={asc:"ASCENDING",desc:"DESCENDING"},sN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oN={and:"AND",or:"OR"};class aN{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function bp(n,e){return n.useProto3Json||Dh(e)?e:{value:e}}function ph(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function lN(n,e){return ph(n,e.toTimestamp())}function Tr(n){return Ke(!!n),be.fromTimestamp(function(t){const r=Qi(t);return new bt(r.seconds,r.nanos)}(n))}function bm(n,e){return Ap(n,e).canonicalString()}function Ap(n,e){const t=function(o){return new ct(["projects",o.projectId,"databases",o.database])}(n).child("documents");return e===void 0?t:t.child(e)}function dE(n){const e=ct.fromString(n);return Ke(yE(e)),e}function kp(n,e){return bm(n.databaseId,e.path)}function Uf(n,e){const t=dE(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ee(pE(t))}function fE(n,e){return bm(n.databaseId,e)}function uN(n){const e=dE(n);return e.length===4?ct.emptyPath():pE(e)}function Cp(n){return new ct(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function pE(n){return Ke(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function W0(n,e,t){return{name:kp(n,e),fields:t.value.mapValue.fields}}function cN(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Pe()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=function(m,w){return m.useProto3Json?(Ke(w===void 0||typeof w=="string"),zt.fromBase64String(w||"")):(Ke(w===void 0||w instanceof Buffer||w instanceof Uint8Array),zt.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(m){const w=m.code===void 0?ie.UNKNOWN:lE(m.code);return new xe(w,m.message||"")}(u);t=new cE(r,o,a,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Uf(n,r.document.name),a=Tr(r.document.updateTime),u=r.document.createTime?Tr(r.document.createTime):be.min(),h=new Vn({mapValue:{fields:r.document.fields}}),f=Yt.newFoundDocument(o,a,u,h),m=r.targetIds||[],w=r.removedTargetIds||[];t=new Jc(m,w,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Uf(n,r.document),a=r.readTime?Tr(r.readTime):be.min(),u=Yt.newNoDocument(o,a),h=r.removedTargetIds||[];t=new Jc([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Uf(n,r.document),a=r.removedTargetIds||[];t=new Jc([],a,o,null)}else{if(!("filter"in e))return Pe();{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:a}=r,u=new ZC(o,a),h=r.targetId;t=new uE(h,u)}}return t}function hN(n,e){let t;if(e instanceof du)t={update:W0(n,e.key,e.value)};else if(e instanceof aE)t={delete:kp(n,e.key)};else if(e instanceof no)t={update:W0(n,e.key,e.data),updateMask:_N(e.fieldMask)};else{if(!(e instanceof YC))return Pe();t={verify:kp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,u){const h=u.transform;if(h instanceof dh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Xl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Jl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof fh)return{fieldPath:u.field.canonicalString(),increment:h.Pe};throw Pe()}(0,r))),e.precondition.isNone||(t.currentDocument=function(o,a){return a.updateTime!==void 0?{updateTime:lN(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Pe()}(n,e.precondition)),t}function dN(n,e){return n&&n.length>0?(Ke(e!==void 0),n.map(t=>function(o,a){let u=o.updateTime?Tr(o.updateTime):Tr(a);return u.isEqual(be.min())&&(u=Tr(a)),new GC(u,o.transformResults||[])}(t,e))):[]}function fN(n,e){return{documents:[fE(n,e.path)]}}function pN(n,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=fE(n,o);const a=function(m){if(m.length!==0)return gE(br.create(m,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const u=function(m){if(m.length!==0)return m.map(w=>function(E){return{field:Zo(E.field),direction:yN(E.dir)}}(w))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=bp(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{_t:t,parent:o}}function mN(n){let e=uN(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Ke(r===1);const w=t.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let a=[];t.where&&(a=function(_){const E=mE(_);return E instanceof br&&qx(E)?E.getFilters():[E]}(t.where));let u=[];t.orderBy&&(u=function(_){return _.map(E=>function(D){return new hh(ea(D.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(E))}(t.orderBy));let h=null;t.limit&&(h=function(_){let E;return E=typeof _=="object"?_.value:_,Dh(E)?null:E}(t.limit));let f=null;t.startAt&&(f=function(_){const E=!!_.before,S=_.values||[];return new ch(S,E)}(t.startAt));let m=null;return t.endAt&&(m=function(_){const E=!_.before,S=_.values||[];return new ch(S,E)}(t.endAt)),jC(e,o,u,a,h,"F",f,m)}function gN(n,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function mE(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ea(t.unaryFilter.field);return Pt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=ea(t.unaryFilter.field);return Pt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ea(t.unaryFilter.field);return Pt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ea(t.unaryFilter.field);return Pt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Pe()}}(n):n.fieldFilter!==void 0?function(t){return Pt.create(ea(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Pe()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return br.create(t.compositeFilter.filters.map(r=>mE(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Pe()}}(t.compositeFilter.op))}(n):Pe()}function yN(n){return iN[n]}function vN(n){return sN[n]}function wN(n){return oN[n]}function Zo(n){return{fieldPath:n.canonicalString()}}function ea(n){return Ut.fromServerFormat(n.fieldPath)}function gE(n){return n instanceof Pt?function(t){if(t.op==="=="){if(C0(t.value))return{unaryFilter:{field:Zo(t.field),op:"IS_NAN"}};if(k0(t.value))return{unaryFilter:{field:Zo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(C0(t.value))return{unaryFilter:{field:Zo(t.field),op:"IS_NOT_NAN"}};if(k0(t.value))return{unaryFilter:{field:Zo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zo(t.field),op:vN(t.op),value:t.value}}}(n):n instanceof br?function(t){const r=t.getFilters().map(o=>gE(o));return r.length===1?r[0]:{compositeFilter:{op:wN(t.op),filters:r}}}(n):Pe()}function _N(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function yE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,t,r,o,a=be.min(),u=be.min(),h=zt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new Bi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e){this.ct=e}}function EN(n){const e=mN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Pp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(){this.un=new IN}addToCollectionParentIndex(e,t){return this.un.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(Ki.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(Ki.min())}updateCollectionGroup(e,t,r){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class IN{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Bt(ct.comparator),a=!o.has(r);return this.index[t]=o.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Bt(ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ga(0)}static kn(){return new ga(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(){this.changes=new Pa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Yt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ne.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(r!==null&&Ll(r.mutation,o,er.empty(),bt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ve()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ve()){const o=Ms();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(a=>{let u=kl();return a.forEach((h,f)=>{u=u.insert(h,f.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=Ms();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ve()))}populateOverlays(e,t,r){const o=[];return r.forEach(a=>{t.has(a)||o.push(a)}),this.documentOverlayCache.getOverlays(e,o).next(a=>{a.forEach((u,h)=>{t.set(u,h)})})}computeViews(e,t,r,o){let a=ri();const u=Vl(),h=function(){return Vl()}();return t.forEach((f,m)=>{const w=r.get(m.key);o.has(m.key)&&(w===void 0||w.mutation instanceof no)?a=a.insert(m.key,m):w!==void 0?(u.set(m.key,w.mutation.getFieldMask()),Ll(w.mutation,m,w.mutation.getFieldMask(),bt.now())):u.set(m.key,er.empty())}),this.recalculateAndSaveOverlays(e,a).next(f=>(f.forEach((m,w)=>u.set(m,w)),t.forEach((m,w)=>{var _;return h.set(m,new PN(w,(_=u.get(m))!==null&&_!==void 0?_:null))}),h))}recalculateAndSaveOverlays(e,t){const r=Vl();let o=new lt((u,h)=>u-h),a=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const h of u)h.keys().forEach(f=>{const m=t.get(f);if(m===null)return;let w=r.get(f)||er.empty();w=h.applyToLocalView(m,w),r.set(f,w);const _=(o.get(h.batchId)||Ve()).add(f);o=o.insert(h.batchId,_)})}).next(()=>{const u=[],h=o.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),m=f.key,w=f.value,_=Zx();w.forEach(E=>{if(!a.has(E)){const S=sE(t.get(E),r.get(E));S!==null&&_.set(E,S),a=a.add(E)}}),u.push(this.documentOverlayCache.saveOverlays(e,m,_))}return ne.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,o){return function(u){return Ee.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):DC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-a.size):ne.resolve(Ms());let h=-1,f=a;return u.next(m=>ne.forEach(m,(w,_)=>(h<_.largestBatchId&&(h=_.largestBatchId),a.get(w)?ne.resolve():this.remoteDocumentCache.getEntry(e,w).next(E=>{f=f.insert(w,E)}))).next(()=>this.populateOverlays(e,m,a)).next(()=>this.computeViews(e,f,m,Ve())).next(w=>({batchId:h,changes:Jx(w)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next(r=>{let o=kl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const a=t.collectionGroup;let u=kl();return this.indexManager.getCollectionParents(e,a).next(h=>ne.forEach(h,f=>{const m=function(_,E){return new Vh(E,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,o).next(w=>{w.forEach((_,E)=>{u=u.insert(_,E)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,o))).next(u=>{a.forEach((f,m)=>{const w=m.getKey();u.get(w)===null&&(u=u.insert(w,Yt.newInvalidDocument(w)))});let h=kl();return u.forEach((f,m)=>{const w=a.get(f);w!==void 0&&Ll(w.mutation,m,er.empty(),bt.now()),Oh(t,m)&&(h=h.insert(f,m))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return ne.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:Tr(o.createTime)}}(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(o){return{name:o.name,query:EN(o.bundledQuery),readTime:Tr(o.readTime)}}(t)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(){this.overlays=new lt(Ee.comparator),this.Ir=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ms();return ne.forEach(t,o=>this.getOverlay(e,o).next(a=>{a!==null&&r.set(o,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,a)=>{this.ht(e,t,a)}),ne.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Ir.get(r);return o!==void 0&&(o.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(r)),ne.resolve()}getOverlaysForCollection(e,t,r){const o=Ms(),a=t.length+1,u=new Ee(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const f=h.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>r&&o.set(f.getKey(),f)}return ne.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let a=new lt((m,w)=>m-w);const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let w=a.get(m.largestBatchId);w===null&&(w=Ms(),a=a.insert(m.largestBatchId,w)),w.set(m.getKey(),m)}}const h=Ms(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((m,w)=>h.set(m,w)),!(h.size()>=o)););return ne.resolve(h)}ht(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const u=this.Ir.get(o.largestBatchId).delete(r.key);this.Ir.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new JC(t,r));let a=this.Ir.get(t);a===void 0&&(a=Ve(),this.Ir.set(t,a)),this.Ir.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(){this.sessionToken=zt.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(){this.Tr=new Bt(jt.Er),this.dr=new Bt(jt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new jt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new jt(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new Ee(new ct([])),r=new jt(t,e),o=new jt(t,e+1),a=[];return this.dr.forEachInRange([r,o],u=>{this.Vr(u),a.push(u.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Ee(new ct([])),r=new jt(t,e),o=new jt(t,e+1);let a=Ve();return this.dr.forEachInRange([r,o],u=>{a=a.add(u.key)}),a}containsKey(e){const t=new jt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class jt{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Ee.comparator(e.key,t.key)||We(e.wr,t.wr)}static Ar(e,t){return We(e.wr,t.wr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Bt(jt.Er)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new XC(a,t,r,o);this.mutationQueue.push(u);for(const h of o)this.br=this.br.add(new jt(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ne.resolve(u)}lookupMutationBatch(e,t){return ne.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.vr(r),a=o<0?0:o;return ne.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new jt(t,0),o=new jt(t,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,o],u=>{const h=this.Dr(u.wr);a.push(h)}),ne.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Bt(We);return t.forEach(o=>{const a=new jt(o,0),u=new jt(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,u],h=>{r=r.add(h.wr)})}),ne.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let a=r;Ee.isDocumentKey(a)||(a=a.child(""));const u=new jt(new Ee(a),0);let h=new Bt(We);return this.br.forEachWhile(f=>{const m=f.key.path;return!!r.isPrefixOf(m)&&(m.length===o&&(h=h.add(f.wr)),!0)},u),ne.resolve(this.Cr(h))}Cr(e){const t=[];return e.forEach(r=>{const o=this.Dr(r);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Ke(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return ne.forEach(t.mutations,o=>{const a=new jt(o.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new jt(t,0),o=this.br.firstAfterOrEqual(r);return ne.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e){this.Mr=e,this.docs=function(){return new lt(Ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),a=o?o.size:0,u=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ne.resolve(r?r.document.mutableCopy():Yt.newInvalidDocument(t))}getEntries(e,t){let r=ri();return t.forEach(o=>{const a=this.docs.get(o);r=r.insert(o,a?a.document.mutableCopy():Yt.newInvalidDocument(o))}),ne.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let a=ri();const u=t.path,h=new Ee(u.child("")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:m,value:{document:w}}=f.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||pC(fC(w),r)<=0||(o.has(w.key)||Oh(t,w))&&(a=a.insert(w.key,w.mutableCopy()))}return ne.resolve(a)}getAllFromCollectionGroup(e,t,r,o){Pe()}Or(e,t){return ne.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new jN(this)}getSize(e){return ne.resolve(this.size)}}class jN extends SN{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.cr.addEntry(e,o)):this.cr.removeEntry(r)}),ne.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e){this.persistence=e,this.Nr=new Pa(t=>xm(t),Em),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Am,this.targetCount=0,this.kr=ga.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,o)=>t(o)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),ne.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new ga(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.Kn(t),ne.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,r){let o=0;const a=[];return this.Nr.forEach((u,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.Nr.delete(u),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),o++)}),ne.waitFor(a).next(()=>o)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return ne.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),ne.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach(u=>{a.push(o.markPotentiallyOrphaned(e,u))}),ne.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return ne.resolve(r)}containsKey(e,t){return ne.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e,t){this.qr={},this.overlays={},this.Qr=new ym(0),this.Kr=!1,this.Kr=!0,this.$r=new CN,this.referenceDelegate=e(this),this.Ur=new DN(this),this.indexManager=new TN,this.remoteDocumentCache=function(o){return new RN(o)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new xN(t),this.Gr=new AN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new kN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new NN(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){me("MemoryPersistence","Starting transaction:",e);const o=new LN(this.Qr.next());return this.referenceDelegate.zr(),r(o).next(a=>this.referenceDelegate.jr(o).next(()=>a)).toPromise().then(a=>(o.raiseOnCommittedEvent(),a))}Hr(e,t){return ne.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class LN extends gC{constructor(e){super(),this.currentSequenceNumber=e}}class km{constructor(e){this.persistence=e,this.Jr=new Am,this.Yr=null}static Zr(e){return new km(e)}get Xr(){if(this.Yr)return this.Yr;throw Pe()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),ne.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(o=>this.Xr.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(a=>this.Xr.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.Xr,r=>{const o=Ee.fromPath(r);return this.ei(e,o).next(a=>{a||t.removeEntry(o,be.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return ne.or([()=>ne.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=o}static Wi(e,t){let r=Ve(),o=Ve();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new Cm(e,t.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return EP()?8:yC(Xt())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,o){const a={result:null};return this.Yi(e,t).next(u=>{a.result=u}).next(()=>{if(!a.result)return this.Zi(e,t,o,r).next(u=>{a.result=u})}).next(()=>{if(a.result)return;const u=new ON;return this.Xi(e,t,u).next(h=>{if(a.result=h,this.zi)return this.es(e,t,u,h.size)})}).next(()=>a.result)}es(e,t,r,o){return r.documentReadCount<this.ji?(Tl()<=Oe.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",Jo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ne.resolve()):(Tl()<=Oe.DEBUG&&me("QueryEngine","Query:",Jo(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.Hi*o?(Tl()<=Oe.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",Jo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Er(t))):ne.resolve())}Yi(e,t){if(D0(t))return ne.resolve(null);let r=Er(t);return this.indexManager.getIndexType(e,r).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=Pp(t,null,"F"),r=Er(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const u=Ve(...a);return this.Ji.getDocuments(e,u).next(h=>this.indexManager.getMinOffset(e,r).next(f=>{const m=this.ts(t,h);return this.ns(t,m,u,f.readTime)?this.Yi(e,Pp(t,null,"F")):this.rs(e,m,t,f)}))})))}Zi(e,t,r,o){return D0(t)||o.isEqual(be.min())?ne.resolve(null):this.Ji.getDocuments(e,r).next(a=>{const u=this.ts(t,a);return this.ns(t,u,r,o)?ne.resolve(null):(Tl()<=Oe.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Jo(t)),this.rs(e,u,t,dC(o,-1)).next(h=>h))})}ts(e,t){let r=new Bt(Yx(e));return t.forEach((o,a)=>{Oh(e,a)&&(r=r.add(a))}),r}ns(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}Xi(e,t,r){return Tl()<=Oe.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",Jo(t)),this.Ji.getDocumentsMatchingQuery(e,t,Ki.min(),r)}rs(e,t,r,o){return this.Ji.getDocumentsMatchingQuery(e,r,o).next(a=>(t.forEach(u=>{a=a.insert(u.key,u)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,t,r,o){this.persistence=e,this.ss=t,this.serializer=o,this.os=new lt(We),this._s=new Pa(a=>xm(a),Em),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bN(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function UN(n,e,t,r){return new FN(n,e,t,r)}async function vE(n,e){const t=Ae(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(a=>(o=a,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const u=[],h=[];let f=Ve();for(const m of o){u.push(m.batchId);for(const w of m.mutations)f=f.add(w.key)}for(const m of a){h.push(m.batchId);for(const w of m.mutations)f=f.add(w.key)}return t.localDocuments.getDocuments(r,f).next(m=>({hs:m,removedBatchIds:u,addedBatchIds:h}))})})}function BN(n,e){const t=Ae(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),a=t.cs.newChangeBuffer({trackRemovals:!0});return function(h,f,m,w){const _=m.batch,E=_.keys();let S=ne.resolve();return E.forEach(D=>{S=S.next(()=>w.getEntry(f,D)).next(C=>{const A=m.docVersions.get(D);Ke(A!==null),C.version.compareTo(A)<0&&(_.applyToRemoteDocument(C,m),C.isValidDocument()&&(C.setReadTime(m.commitVersion),w.addEntry(C)))})}),S.next(()=>h.mutationQueue.removeMutationBatch(f,_))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let f=Ve();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(f=f.add(h.batch.mutations[m].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function wE(n){const e=Ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function zN(n,e){const t=Ae(n),r=e.snapshotVersion;let o=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=t.cs.newChangeBuffer({trackRemovals:!0});o=t.os;const h=[];e.targetChanges.forEach((w,_)=>{const E=o.get(_);if(!E)return;h.push(t.Ur.removeMatchingKeys(a,w.removedDocuments,_).next(()=>t.Ur.addMatchingKeys(a,w.addedDocuments,_)));let S=E.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(_)!==null?S=S.withResumeToken(zt.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):w.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(w.resumeToken,r)),o=o.insert(_,S),function(C,A,z){return C.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0}(E,S,w)&&h.push(t.Ur.updateTargetData(a,S))});let f=ri(),m=Ve();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,w))}),h.push($N(a,u,e.documentUpdates).next(w=>{f=w.Ps,m=w.Is})),!r.isEqual(be.min())){const w=t.Ur.getLastRemoteSnapshotVersion(a).next(_=>t.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(w)}return ne.waitFor(h).next(()=>u.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,f,m)).next(()=>f)}).then(a=>(t.os=o,a))}function $N(n,e,t){let r=Ve(),o=Ve();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let u=ri();return t.forEach((h,f)=>{const m=a.get(h);f.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(h)),f.isNoDocument()&&f.version.isEqual(be.min())?(e.removeEntry(h,f.readTime),u=u.insert(h,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),u=u.insert(h,f)):me("LocalStore","Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",f.version)}),{Ps:u,Is:o}})}function WN(n,e){const t=Ae(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function qN(n,e){const t=Ae(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Ur.getTargetData(r,e).next(a=>a?(o=a,ne.resolve(o)):t.Ur.allocateTargetId(r).next(u=>(o=new Bi(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.os.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}async function Np(n,e,t){const r=Ae(n),o=r.os.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,u=>r.persistence.referenceDelegate.removeTarget(u,o))}catch(u){if(!hu(u))throw u;me("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.os=r.os.remove(e),r._s.delete(o.target)}function q0(n,e,t){const r=Ae(n);let o=be.min(),a=Ve();return r.persistence.runTransaction("Execute query","readwrite",u=>function(f,m,w){const _=Ae(f),E=_._s.get(w);return E!==void 0?ne.resolve(_.os.get(E)):_.Ur.getTargetData(m,w)}(r,u,Er(e)).next(h=>{if(h)return o=h.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(u,h.targetId).next(f=>{a=f})}).next(()=>r.ss.getDocumentsMatchingQuery(u,e,t?o:be.min(),t?a:Ve())).next(h=>(HN(r,LC(e),h),{documents:h,Ts:a})))}function HN(n,e,t){let r=n.us.get(e)||be.min();t.forEach((o,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.us.set(e,r)}class H0{constructor(){this.activeTargetIds=zC()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class GN{constructor(){this.so=new H0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new H0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){me("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){me("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uc=null;function Bf(){return Uc===null?Uc=function(){return 268435456+Math.round(2147483648*Math.random())}():Uc++,"0x"+Uc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gt="WebChannelConnection";class XN extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${o}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${a}`}get Fo(){return!1}Mo(t,r,o,a,u){const h=Bf(),f=this.xo(t,r.toUriEncodedString());me("RestConnection",`Sending RPC '${t}' ${h}:`,f,o);const m={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(m,a,u),this.No(t,f,m,o).then(w=>(me("RestConnection",`Received RPC '${t}' ${h}: `,w),w),w=>{throw da("RestConnection",`RPC '${t}' ${h} failed with error: `,w,"url: ",f,"request:",o),w})}Lo(t,r,o,a,u,h){return this.Mo(t,r,o,a,u)}Oo(t,r,o){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ia}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,u)=>t[u]=a),o&&o.headers.forEach((a,u)=>t[u]=a)}xo(t,r){const o=QN[t];return`${this.Do}/v1/${r}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,o){const a=Bf();return new Promise((u,h)=>{const f=new jx;f.setWithCredentials(!0),f.listenOnce(Dx.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Qc.NO_ERROR:const w=f.getResponseJson();me(Gt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(w)),u(w);break;case Qc.TIMEOUT:me(Gt,`RPC '${e}' ${a} timed out`),h(new xe(ie.DEADLINE_EXCEEDED,"Request time out"));break;case Qc.HTTP_ERROR:const _=f.getStatus();if(me(Gt,`RPC '${e}' ${a} failed with status:`,_,"response text:",f.getResponseText()),_>0){let E=f.getResponseJson();Array.isArray(E)&&(E=E[0]);const S=E?.error;if(S&&S.status&&S.message){const D=function(A){const z=A.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(z)>=0?z:ie.UNKNOWN}(S.status);h(new xe(D,S.message))}else h(new xe(ie.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new xe(ie.UNAVAILABLE,"Connection failed."));break;default:Pe()}}finally{me(Gt,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(o);me(Gt,`RPC '${e}' ${a} sending request:`,o),f.send(t,"POST",m,r,15)})}Bo(e,t,r){const o=Bf(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=Ox(),h=Lx(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Oo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const w=a.join("");me(Gt,`Creating RPC '${e}' stream ${o}: ${w}`,f);const _=u.createWebChannel(w,f);let E=!1,S=!1;const D=new YN({Io:A=>{S?me(Gt,`Not sending because RPC '${e}' stream ${o} is closed:`,A):(E||(me(Gt,`Opening RPC '${e}' stream ${o} transport.`),_.open(),E=!0),me(Gt,`RPC '${e}' stream ${o} sending:`,A),_.send(A))},To:()=>_.close()}),C=(A,z,H)=>{A.listen(z,M=>{try{H(M)}catch(Q){setTimeout(()=>{throw Q},0)}})};return C(_,Al.EventType.OPEN,()=>{S||(me(Gt,`RPC '${e}' stream ${o} transport opened.`),D.yo())}),C(_,Al.EventType.CLOSE,()=>{S||(S=!0,me(Gt,`RPC '${e}' stream ${o} transport closed`),D.So())}),C(_,Al.EventType.ERROR,A=>{S||(S=!0,da(Gt,`RPC '${e}' stream ${o} transport errored:`,A),D.So(new xe(ie.UNAVAILABLE,"The operation could not be completed")))}),C(_,Al.EventType.MESSAGE,A=>{var z;if(!S){const H=A.data[0];Ke(!!H);const M=H,Q=M.error||((z=M[0])===null||z===void 0?void 0:z.error);if(Q){me(Gt,`RPC '${e}' stream ${o} received error:`,Q);const te=Q.status;let se=function(b){const V=vt[b];if(V!==void 0)return lE(V)}(te),R=Q.message;se===void 0&&(se=ie.INTERNAL,R="Unknown error status: "+te+" with message "+Q.message),S=!0,D.So(new xe(se,R)),_.close()}else me(Gt,`RPC '${e}' stream ${o} received:`,H),D.bo(H)}}),C(h,Vx.STAT_EVENT,A=>{A.stat===xp.PROXY?me(Gt,`RPC '${e}' stream ${o} detected buffering proxy`):A.stat===xp.NOPROXY&&me(Gt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}}function zf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bh(n){return new aN(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e,t,r=1e3,o=1.5,a=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=o,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),o=Math.max(0,t-r);o>0&&me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(e,t,r,o,a,u,h,f){this.ui=e,this.Ho=r,this.Jo=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new _E(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(ni(t.toString()),ni("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Yo===t&&this.P_(r,o)},r=>{e(()=>{const o=new xe(ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(o)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(o=>{r(()=>this.I_(o))}),this.stream.onMessage(o=>{r(()=>++this.e_==1?this.E_(o):this.onNext(o))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return me("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(me("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class JN extends xE{constructor(e,t,r,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,u),this.serializer=a}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=cN(this.serializer,e),r=function(a){if(!("targetChange"in a))return be.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?be.min():u.readTime?Tr(u.readTime):be.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=Cp(this.serializer),t.addTarget=function(a,u){let h;const f=u.target;if(h=Sp(f)?{documents:fN(a,f)}:{query:pN(a,f)._t},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=hE(a,u.resumeToken);const m=bp(a,u.expectedCount);m!==null&&(h.expectedCount=m)}else if(u.snapshotVersion.compareTo(be.min())>0){h.readTime=ph(a,u.snapshotVersion.toTimestamp());const m=bp(a,u.expectedCount);m!==null&&(h.expectedCount=m)}return h}(this.serializer,e);const r=gN(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=Cp(this.serializer),t.removeTarget=e,this.a_(t)}}class ZN extends xE{constructor(e,t,r,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,u),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Ke(!!e.streamToken),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ke(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=dN(e.writeResults,e.commitTime),r=Tr(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=Cp(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>hN(this.serializer,r))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new xe(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Mo(e,Ap(t,r),o,a,u)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new xe(ie.UNKNOWN,a.toString())})}Lo(e,t,r,o,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.Lo(e,Ap(t,r),o,u,h,a)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new xe(ie.UNKNOWN,u.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class tR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ni(t),this.D_=!1):me("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e,t,r,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(u=>{r.enqueueAndForget(async()=>{ro(this)&&(me("RemoteStore","Restarting streams for network reachability change."),await async function(f){const m=Ae(f);m.L_.add(4),await pu(m),m.q_.set("Unknown"),m.L_.delete(4),await zh(m)}(this))})}),this.q_=new tR(r,o)}}async function zh(n){if(ro(n))for(const e of n.B_)await e(!0)}async function pu(n){for(const e of n.B_)await e(!1)}function EE(n,e){const t=Ae(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Dm(t)?jm(t):ba(t).r_()&&Rm(t,e))}function Nm(n,e){const t=Ae(n),r=ba(t);t.N_.delete(e),r.r_()&&TE(t,e),t.N_.size===0&&(r.r_()?r.o_():ro(t)&&t.q_.set("Unknown"))}function Rm(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ba(n).A_(e)}function TE(n,e){n.Q_.xe(e),ba(n).R_(e)}function jm(n){n.Q_=new rN({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),ba(n).start(),n.q_.v_()}function Dm(n){return ro(n)&&!ba(n).n_()&&n.N_.size>0}function ro(n){return Ae(n).L_.size===0}function IE(n){n.Q_=void 0}async function rR(n){n.q_.set("Online")}async function iR(n){n.N_.forEach((e,t)=>{Rm(n,e)})}async function sR(n,e){IE(n),Dm(n)?(n.q_.M_(e),jm(n)):n.q_.set("Unknown")}async function oR(n,e,t){if(n.q_.set("Online"),e instanceof cE&&e.state===2&&e.cause)try{await async function(o,a){const u=a.cause;for(const h of a.targetIds)o.N_.has(h)&&(await o.remoteSyncer.rejectListen(h,u),o.N_.delete(h),o.Q_.removeTarget(h))}(n,e)}catch(r){me("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await mh(n,r)}else if(e instanceof Jc?n.Q_.Ke(e):e instanceof uE?n.Q_.He(e):n.Q_.We(e),!t.isEqual(be.min()))try{const r=await wE(n.localStore);t.compareTo(r)>=0&&await function(a,u){const h=a.Q_.rt(u);return h.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const w=a.N_.get(m);w&&a.N_.set(m,w.withResumeToken(f.resumeToken,u))}}),h.targetMismatches.forEach((f,m)=>{const w=a.N_.get(f);if(!w)return;a.N_.set(f,w.withResumeToken(zt.EMPTY_BYTE_STRING,w.snapshotVersion)),TE(a,f);const _=new Bi(w.target,f,m,w.sequenceNumber);Rm(a,_)}),a.remoteSyncer.applyRemoteEvent(h)}(n,t)}catch(r){me("RemoteStore","Failed to raise snapshot:",r),await mh(n,r)}}async function mh(n,e,t){if(!hu(e))throw e;n.L_.add(1),await pu(n),n.q_.set("Offline"),t||(t=()=>wE(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{me("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await zh(n)})}function SE(n,e){return e().catch(t=>mh(n,t,e))}async function $h(n){const e=Ae(n),t=Yi(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;aR(e);)try{const o=await WN(e.localStore,r);if(o===null){e.O_.length===0&&t.o_();break}r=o.batchId,lR(e,o)}catch(o){await mh(e,o)}PE(e)&&bE(e)}function aR(n){return ro(n)&&n.O_.length<10}function lR(n,e){n.O_.push(e);const t=Yi(n);t.r_()&&t.V_&&t.m_(e.mutations)}function PE(n){return ro(n)&&!Yi(n).n_()&&n.O_.length>0}function bE(n){Yi(n).start()}async function uR(n){Yi(n).p_()}async function cR(n){const e=Yi(n);for(const t of n.O_)e.m_(t.mutations)}async function hR(n,e,t){const r=n.O_.shift(),o=Sm.from(r,e,t);await SE(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),await $h(n)}async function dR(n,e){e&&Yi(n).V_&&await async function(r,o){if(function(u){return eN(u)&&u!==ie.ABORTED}(o.code)){const a=r.O_.shift();Yi(r).s_(),await SE(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,o)),await $h(r)}}(n,e),PE(n)&&bE(n)}async function K0(n,e){const t=Ae(n);t.asyncQueue.verifyOperationInProgress(),me("RemoteStore","RemoteStore received new credentials");const r=ro(t);t.L_.add(3),await pu(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await zh(t)}async function fR(n,e){const t=Ae(n);e?(t.L_.delete(2),await zh(t)):e||(t.L_.add(2),await pu(t),t.q_.set("Unknown"))}function ba(n){return n.K_||(n.K_=function(t,r,o){const a=Ae(t);return a.w_(),new JN(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(n.datastore,n.asyncQueue,{Eo:rR.bind(null,n),Ro:iR.bind(null,n),mo:sR.bind(null,n),d_:oR.bind(null,n)}),n.B_.push(async e=>{e?(n.K_.s_(),Dm(n)?jm(n):n.q_.set("Unknown")):(await n.K_.stop(),IE(n))})),n.K_}function Yi(n){return n.U_||(n.U_=function(t,r,o){const a=Ae(t);return a.w_(),new ZN(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:uR.bind(null,n),mo:dR.bind(null,n),f_:cR.bind(null,n),g_:hR.bind(null,n)}),n.B_.push(async e=>{e?(n.U_.s_(),await $h(n)):(await n.U_.stop(),n.O_.length>0&&(me("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))})),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,t,r,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=a,this.deferred=new qi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,a){const u=Date.now()+r,h=new Vm(e,t,u,o,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Lm(n,e){if(ni("AsyncQueue",`${e}: ${n}`),hu(n))return new xe(ie.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ee.comparator(t.key,r.key):(t,r)=>Ee.comparator(t.key,r.key),this.keyedMap=kl(),this.sortedSet=new lt(this.comparator)}static emptySet(e){return new ca(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ca)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=r.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new ca;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(){this.W_=new lt(Ee.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Pe():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class ya{constructor(e,t,r,o,a,u,h,f,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,o,a){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new ya(e,t,ca.emptySet(t),u,r,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class mR{constructor(){this.queries=Y0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const o=Ae(t),a=o.queries;o.queries=Y0(),a.forEach((u,h)=>{for(const f of h.j_)f.onError(r)})})(this,new xe(ie.ABORTED,"Firestore shutting down"))}}function Y0(){return new Pa(n=>Qx(n),Lh)}async function gR(n,e){const t=Ae(n);let r=3;const o=e.query;let a=t.queries.get(o);a?!a.H_()&&e.J_()&&(r=2):(a=new pR,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await t.onListen(o,!0);break;case 1:a.z_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const h=Lm(u,`Initialization of query '${Jo(e.query)}' failed`);return void e.onError(h)}t.queries.set(o,a),a.j_.push(e),e.Z_(t.onlineState),a.z_&&e.X_(a.z_)&&Om(t)}async function yR(n,e){const t=Ae(n),r=e.query;let o=3;const a=t.queries.get(r);if(a){const u=a.j_.indexOf(e);u>=0&&(a.j_.splice(u,1),a.j_.length===0?o=e.J_()?0:1:!a.H_()&&e.J_()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function vR(n,e){const t=Ae(n);let r=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const h of u.j_)h.X_(o)&&(r=!0);u.z_=o}}r&&Om(t)}function wR(n,e,t){const r=Ae(n),o=r.queries.get(e);if(o)for(const a of o.j_)a.onError(t);r.queries.delete(e)}function Om(n){n.Y_.forEach(e=>{e.next()})}var Rp,X0;(X0=Rp||(Rp={})).ea="default",X0.Cache="cache";class _R{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new ya(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=ya.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Rp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e){this.key=e}}class kE{constructor(e){this.key=e}}class xR{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ve(),this.mutatedKeys=Ve(),this.Aa=Yx(e),this.Ra=new ca(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new Q0,o=t?t.Ra:this.Ra;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,h=!1;const f=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((w,_)=>{const E=o.get(w),S=Oh(this.query,_)?_:null,D=!!E&&this.mutatedKeys.has(E.key),C=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let A=!1;E&&S?E.data.isEqual(S.data)?D!==C&&(r.track({type:3,doc:S}),A=!0):this.ga(E,S)||(r.track({type:2,doc:S}),A=!0,(f&&this.Aa(S,f)>0||m&&this.Aa(S,m)<0)&&(h=!0)):!E&&S?(r.track({type:0,doc:S}),A=!0):E&&!S&&(r.track({type:1,doc:E}),A=!0,(f||m)&&(h=!0)),A&&(S?(u=u.add(S),a=C?a.add(w):a.delete(w)):(u=u.delete(w),a=a.delete(w)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const w=this.query.limitType==="F"?u.last():u.first();u=u.delete(w.key),a=a.delete(w.key),r.track({type:1,doc:w})}return{Ra:u,fa:r,ns:h,mutatedKeys:a}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const u=e.fa.G_();u.sort((w,_)=>function(S,D){const C=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe()}};return C(S)-C(D)}(w.type,_.type)||this.Aa(w.doc,_.doc)),this.pa(r),o=o!=null&&o;const h=t&&!o?this.ya():[],f=this.da.size===0&&this.current&&!o?1:0,m=f!==this.Ea;return this.Ea=f,u.length!==0||m?{snapshot:new ya(this.query,e.Ra,a,u,e.mutatedKeys,f===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:h}:{wa:h}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Q0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ve(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new kE(r))}),this.da.forEach(r=>{e.has(r)||t.push(new AE(r))}),t}ba(e){this.Ta=e.Ts,this.da=Ve();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return ya.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class ER{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class TR{constructor(e){this.key=e,this.va=!1}}class IR{constructor(e,t,r,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Ca={},this.Fa=new Pa(h=>Qx(h),Lh),this.Ma=new Map,this.xa=new Set,this.Oa=new lt(Ee.comparator),this.Na=new Map,this.La=new Am,this.Ba={},this.ka=new Map,this.qa=ga.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function SR(n,e,t=!0){const r=VE(n);let o;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.Da()):o=await CE(r,e,t,!0),o}async function PR(n,e){const t=VE(n);await CE(t,e,!0,!1)}async function CE(n,e,t,r){const o=await qN(n.localStore,Er(e)),a=o.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let h;return r&&(h=await bR(n,e,a,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&EE(n.remoteStore,o),h}async function bR(n,e,t,r,o){n.Ka=(_,E,S)=>async function(C,A,z,H){let M=A.view.ma(z);M.ns&&(M=await q0(C.localStore,A.query,!1).then(({documents:R})=>A.view.ma(R,M)));const Q=H&&H.targetChanges.get(A.targetId),te=H&&H.targetMismatches.get(A.targetId)!=null,se=A.view.applyChanges(M,C.isPrimaryClient,Q,te);return Z0(C,A.targetId,se.wa),se.snapshot}(n,_,E,S);const a=await q0(n.localStore,e,!0),u=new xR(e,a.Ts),h=u.ma(a.documents),f=fu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",o),m=u.applyChanges(h,n.isPrimaryClient,f);Z0(n,t,m.wa);const w=new ER(e,t,u);return n.Fa.set(e,w),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),m.snapshot}async function AR(n,e,t){const r=Ae(n),o=r.Fa.get(e),a=r.Ma.get(o.targetId);if(a.length>1)return r.Ma.set(o.targetId,a.filter(u=>!Lh(u,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Np(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),t&&Nm(r.remoteStore,o.targetId),jp(r,o.targetId)}).catch(cu)):(jp(r,o.targetId),await Np(r.localStore,o.targetId,!0))}async function kR(n,e){const t=Ae(n),r=t.Fa.get(e),o=t.Ma.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Nm(t.remoteStore,r.targetId))}async function CR(n,e,t){const r=OR(n);try{const o=await function(u,h){const f=Ae(u),m=bt.now(),w=h.reduce((S,D)=>S.add(D.key),Ve());let _,E;return f.persistence.runTransaction("Locally write mutations","readwrite",S=>{let D=ri(),C=Ve();return f.cs.getEntries(S,w).next(A=>{D=A,D.forEach((z,H)=>{H.isValidDocument()||(C=C.add(z))})}).next(()=>f.localDocuments.getOverlayedDocuments(S,D)).next(A=>{_=A;const z=[];for(const H of h){const M=QC(H,_.get(H.key).overlayedDocument);M!=null&&z.push(new no(H.key,M,zx(M.value.mapValue),Xr.exists(!0)))}return f.mutationQueue.addMutationBatch(S,m,z,h)}).next(A=>{E=A;const z=A.applyToLocalDocumentSet(_,C);return f.documentOverlayCache.saveOverlays(S,A.batchId,z)})}).then(()=>({batchId:E.batchId,changes:Jx(_)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,h,f){let m=u.Ba[u.currentUser.toKey()];m||(m=new lt(We)),m=m.insert(h,f),u.Ba[u.currentUser.toKey()]=m}(r,o.batchId,t),await mu(r,o.changes),await $h(r.remoteStore)}catch(o){const a=Lm(o,"Failed to persist write");t.reject(a)}}async function NE(n,e){const t=Ae(n);try{const r=await zN(t.localStore,e);e.targetChanges.forEach((o,a)=>{const u=t.Na.get(a);u&&(Ke(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?u.va=!0:o.modifiedDocuments.size>0?Ke(u.va):o.removedDocuments.size>0&&(Ke(u.va),u.va=!1))}),await mu(t,r,e)}catch(r){await cu(r)}}function J0(n,e,t){const r=Ae(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.Fa.forEach((a,u)=>{const h=u.view.Z_(e);h.snapshot&&o.push(h.snapshot)}),function(u,h){const f=Ae(u);f.onlineState=h;let m=!1;f.queries.forEach((w,_)=>{for(const E of _.j_)E.Z_(h)&&(m=!0)}),m&&Om(f)}(r.eventManager,e),o.length&&r.Ca.d_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function NR(n,e,t){const r=Ae(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Na.get(e),a=o&&o.key;if(a){let u=new lt(Ee.comparator);u=u.insert(a,Yt.newNoDocument(a,be.min()));const h=Ve().add(a),f=new Uh(be.min(),new Map,new lt(We),u,h);await NE(r,f),r.Oa=r.Oa.remove(a),r.Na.delete(e),Mm(r)}else await Np(r.localStore,e,!1).then(()=>jp(r,e,t)).catch(cu)}async function RR(n,e){const t=Ae(n),r=e.batch.batchId;try{const o=await BN(t.localStore,e);jE(t,r,null),RE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await mu(t,o)}catch(o){await cu(o)}}async function jR(n,e,t){const r=Ae(n);try{const o=await function(u,h){const f=Ae(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let w;return f.mutationQueue.lookupMutationBatch(m,h).next(_=>(Ke(_!==null),w=_.keys(),f.mutationQueue.removeMutationBatch(m,_))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,w,h)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,w)).next(()=>f.localDocuments.getDocuments(m,w))})}(r.localStore,e);jE(r,e,t),RE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await mu(r,o)}catch(o){await cu(o)}}function RE(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function jE(n,e,t){const r=Ae(n);let o=r.Ba[r.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),r.Ba[r.currentUser.toKey()]=o}}function jp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||DE(n,r)})}function DE(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(Nm(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Mm(n))}function Z0(n,e,t){for(const r of t)r instanceof AE?(n.La.addReference(r.key,e),DR(n,r)):r instanceof kE?(me("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||DE(n,r.key)):Pe()}function DR(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(me("SyncEngine","New document in limbo: "+t),n.xa.add(r),Mm(n))}function Mm(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Ee(ct.fromString(e)),r=n.qa.next();n.Na.set(r,new TR(t)),n.Oa=n.Oa.insert(t,r),EE(n.remoteStore,new Bi(Er(Tm(t.path)),r,"TargetPurposeLimboResolution",ym.oe))}}async function mu(n,e,t){const r=Ae(n),o=[],a=[],u=[];r.Fa.isEmpty()||(r.Fa.forEach((h,f)=>{u.push(r.Ka(f,e,t).then(m=>{var w;if((m||t)&&r.isPrimaryClient){const _=m?!m.fromCache:(w=t?.targetChanges.get(f.targetId))===null||w===void 0?void 0:w.current;r.sharedClientState.updateQueryState(f.targetId,_?"current":"not-current")}if(m){o.push(m);const _=Cm.Wi(f.targetId,m);a.push(_)}}))}),await Promise.all(u),r.Ca.d_(o),await async function(f,m){const w=Ae(f);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>ne.forEach(m,E=>ne.forEach(E.$i,S=>w.persistence.referenceDelegate.addReference(_,E.targetId,S)).next(()=>ne.forEach(E.Ui,S=>w.persistence.referenceDelegate.removeReference(_,E.targetId,S)))))}catch(_){if(!hu(_))throw _;me("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of m){const E=_.targetId;if(!_.fromCache){const S=w.os.get(E),D=S.snapshotVersion,C=S.withLastLimboFreeSnapshotVersion(D);w.os=w.os.insert(E,C)}}}(r.localStore,a))}async function VR(n,e){const t=Ae(n);if(!t.currentUser.isEqual(e)){me("SyncEngine","User change. New user:",e.toKey());const r=await vE(t.localStore,e);t.currentUser=e,function(a,u){a.ka.forEach(h=>{h.forEach(f=>{f.reject(new xe(ie.CANCELLED,u))})}),a.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await mu(t,r.hs)}}function LR(n,e){const t=Ae(n),r=t.Na.get(e);if(r&&r.va)return Ve().add(r.key);{let o=Ve();const a=t.Ma.get(e);if(!a)return o;for(const u of a){const h=t.Fa.get(u);o=o.unionWith(h.view.Va)}return o}}function VE(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=NE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=LR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NR.bind(null,e),e.Ca.d_=vR.bind(null,e.eventManager),e.Ca.$a=wR.bind(null,e.eventManager),e}function OR(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jR.bind(null,e),e}class gh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return UN(this.persistence,new MN,e.initialUser,this.serializer)}Ga(e){return new VN(km.Zr,this.serializer)}Wa(e){return new GN}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gh.provider={build:()=>new gh};class Dp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>J0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=VR.bind(null,this.syncEngine),await fR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new mR}()}createDatastore(e){const t=Bh(e.databaseInfo.databaseId),r=function(a){return new XN(a)}(e.databaseInfo);return function(a,u,h,f){return new eR(a,u,h,f)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,o,a,u,h){return new nR(r,o,a,u,h)}(this.localStore,this.datastore,e.asyncQueue,t=>J0(this.syncEngine,t,0),function(){return G0.D()?new G0:new KN}())}createSyncEngine(e,t){return function(o,a,u,h,f,m,w){const _=new IR(o,a,u,h,f,m);return w&&(_.Qa=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const a=Ae(o);me("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await pu(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Dp.provider={build:()=>new Dp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ni("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e,t,r,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Qt.UNAUTHENTICATED,this.clientId=Fx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async u=>{me("FirestoreClient","Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(r,u=>(me("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Lm(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function $f(n,e){n.asyncQueue.verifyOperationInProgress(),me("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async o=>{r.isEqual(o)||(await vE(e.localStore,o),r=o)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function ew(n,e){n.asyncQueue.verifyOperationInProgress();const t=await UR(n);me("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>K0(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,o)=>K0(e.remoteStore,o)),n._onlineComponents=e}async function UR(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){me("FirestoreClient","Using user provided OfflineComponentProvider");try{await $f(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===ie.FAILED_PRECONDITION||o.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;da("Error using user provided cache. Falling back to memory cache: "+t),await $f(n,new gh)}}else me("FirestoreClient","Using default OfflineComponentProvider"),await $f(n,new gh);return n._offlineComponents}async function LE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(me("FirestoreClient","Using user provided OnlineComponentProvider"),await ew(n,n._uninitializedComponentsProvider._online)):(me("FirestoreClient","Using default OnlineComponentProvider"),await ew(n,new Dp))),n._onlineComponents}function BR(n){return LE(n).then(e=>e.syncEngine)}async function zR(n){const e=await LE(n),t=e.eventManager;return t.onListen=SR.bind(null,e.syncEngine),t.onUnlisten=AR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=PR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=kR.bind(null,e.syncEngine),t}function $R(n,e,t={}){const r=new qi;return n.asyncQueue.enqueueAndForget(async()=>function(a,u,h,f,m){const w=new MR({next:E=>{w.Za(),u.enqueueAndForget(()=>yR(a,_));const S=E.docs.has(h);!S&&E.fromCache?m.reject(new xe(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&E.fromCache&&f&&f.source==="server"?m.reject(new xe(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(E)},error:E=>m.reject(E)}),_=new _R(Tm(h.path),w,{includeMetadataChanges:!0,_a:!0});return gR(a,_)}(await zR(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(n,e,t){if(!t)throw new xe(ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function qR(n,e,t,r){if(e===!0&&r===!0)throw new xe(ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function nw(n){if(!Ee.isDocumentKey(n))throw new xe(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Fm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Pe()}function Zl(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Fm(n);throw new xe(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new xe(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new xe(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new xe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new xe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new xe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Um{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new rC;switch(r.type){case"firstParty":return new aC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new xe(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=tw.get(t);r&&(me("ComponentProvider","Removing Datastore"),tw.delete(t),r.terminate())}(this),Promise.resolve()}}function HR(n,e,t,r={}){var o;const a=(n=Zl(n,Um))._getSettings(),u=`${e}:${t}`;if(a.host!=="firestore.googleapis.com"&&a.host!==u&&da("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:u,ssl:!1})),r.mockUserToken){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Qt.MOCK_USER;else{h=gP(r.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new xe(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Qt(m)}n._authCredentials=new iC(new Mx(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Bm(this.firestore,e,this._query)}}class On{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new eu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new On(this.firestore,e,this._key)}}class eu extends Bm{constructor(e,t,r){super(e,t,Tm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new On(this.firestore,null,new Ee(e))}withConverter(e){return new eu(this.firestore,e,this._path)}}function iw(n,e,...t){if(n=At(n),arguments.length===1&&(e=Fx.newId()),WR("doc","path",e),n instanceof Um){const r=ct.fromString(e,...t);return nw(r),new On(n,null,new Ee(r))}{if(!(n instanceof On||n instanceof eu))throw new xe(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ct.fromString(e,...t));return nw(r),new On(n.firestore,n instanceof eu?n.converter:null,new Ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new _E(this,"async_queue_retry"),this.Vu=()=>{const r=zf();r&&me("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=zf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=zf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new qi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!hu(e))throw e;me("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const o=function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),h}(r);throw ni("INTERNAL UNHANDLED ERROR: ",o),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const o=Vm.createAndSchedule(this,e,t,r,a=>this.yu(a));return this.Tu.push(o),o}fu(){this.Eu&&Pe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class zm extends Um{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new sw,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new sw(e),this._firestoreClient=void 0,await e}}}function GR(n,e){const t=typeof n=="object"?n:om(),r=typeof n=="string"?n:"(default)",o=eo(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const a=pP("firestore");a&&HR(o,...a)}return o}function ME(n){if(n._terminated)throw new xe(ie.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||KR(n),n._firestoreClient}function KR(n){var e,t,r;const o=n._freezeSettings(),a=function(h,f,m,w){return new _C(h,f,m,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,OE(w.experimentalLongPollingOptions),w.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new FR(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(h){const f=h?._online.build();return{_offline:h?._offline.build(f),_online:f}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this._byteString=e}static fromBase64String(e){try{return new va(zt.fromBase64String(e))}catch(t){throw new xe(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new va(zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new xe(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,o){if(r.length!==o.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==o[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=/^__.*__$/;class YR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new no(e,this.data,this.fieldMask,t,this.fieldTransforms):new du(e,this.data,t,this.fieldTransforms)}}function UE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe()}}class Hm{constructor(e,t,r,o,a,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Hm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:r,xu:!1});return o.Ou(e),o}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:r,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return yh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(UE(this.Cu)&&QR.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class XR{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Bh(e)}Qu(e,t,r,o=!1){return new Hm({Cu:e,methodName:t,qu:r,path:Ut.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function JR(n){const e=n._freezeSettings(),t=Bh(n._databaseId);return new XR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ZR(n,e,t,r,o,a={}){const u=n.Qu(a.merge||a.mergeFields?2:0,e,t,o);WE("Data must be an object, but it was:",u,r);const h=zE(r,u);let f,m;if(a.merge)f=new er(u.fieldMask),m=u.fieldTransforms;else if(a.mergeFields){const w=[];for(const _ of a.mergeFields){const E=e2(e,_,t);if(!u.contains(E))throw new xe(ie.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);n2(w,E)||w.push(E)}f=new er(w),m=u.fieldTransforms.filter(_=>f.covers(_.field))}else f=null,m=u.fieldTransforms;return new YR(new Vn(h),f,m)}function BE(n,e){if($E(n=At(n)))return WE("Unsupported field value:",e,n),zE(n,e);if(n instanceof FE)return function(r,o){if(!UE(o.Cu))throw o.Bu(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(o);a&&o.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,o){const a=[];let u=0;for(const h of r){let f=BE(h,o.Lu(u));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),u++}return{arrayValue:{values:a}}}(n,e)}return function(r,o){if((r=At(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $C(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=bt.fromDate(r);return{timestampValue:ph(o.serializer,a)}}if(r instanceof bt){const a=new bt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ph(o.serializer,a)}}if(r instanceof Wm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof va)return{bytesValue:hE(o.serializer,r._byteString)};if(r instanceof On){const a=o.databaseId,u=r.firestore._databaseId;if(!u.isEqual(a))throw o.Bu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:bm(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof qm)return function(u,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:u.toArray().map(f=>{if(typeof f!="number")throw h.Bu("VectorValues must only contain numeric values.");return Im(h.serializer,f)})}}}}}}(r,o);throw o.Bu(`Unsupported field value: ${Fm(r)}`)}(n,e)}function zE(n,e){const t={};return Ux(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Sa(n,(r,o)=>{const a=BE(o,e.Mu(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function $E(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof bt||n instanceof Wm||n instanceof va||n instanceof On||n instanceof FE||n instanceof qm)}function WE(n,e,t){if(!$E(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const r=Fm(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function e2(n,e,t){if((e=At(e))instanceof $m)return e._internalPath;if(typeof e=="string")return qE(n,e);throw yh("Field path arguments must be of type string or ",n,!1,void 0,t)}const t2=new RegExp("[~\\*/\\[\\]]");function qE(n,e,t){if(e.search(t2)>=0)throw yh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new $m(...e.split("."))._internalPath}catch{throw yh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function yh(n,e,t,r,o){const a=r&&!r.isEmpty(),u=o!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${r}`),u&&(f+=` in document ${o}`),f+=")"),new xe(ie.INVALID_ARGUMENT,h+n+f)}function n2(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e,t,r,o,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new On(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new r2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(GE("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class r2 extends HE{data(){return super.data()}}function GE(n,e){return typeof e=="string"?qE(n,e):e instanceof $m?e._internalPath:e._delegate._internalPath}class i2{convertValue(e,t="none"){switch(Qs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ks(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Sa(e,(o,a)=>{r[o]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,o;const a=(o=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(u=>ft(u.doubleValue));return new qm(a)}convertGeoPoint(e){return new Wm(ft(e.latitude),ft(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=wm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Kl(e));default:return null}}convertTimestamp(e){const t=Qi(e);return new bt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ct.fromString(e);Ke(yE(r));const o=new Ql(r.get(1),r.get(3)),a=new Ee(r.popFirst(5));return o.isEqual(t)||ni(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class KE extends HE{constructor(e,t,r,o,a,u){super(e,t,r,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new a2(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(GE("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class a2 extends KE{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(n){n=Zl(n,On);const e=Zl(n.firestore,zm);return $R(ME(e),n._key).then(t=>d2(e,n,t))}class u2 extends i2{constructor(e){super(),this.firestore=e}convertBytes(e){return new va(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new On(this.firestore,null,t)}}function c2(n,e,t){n=Zl(n,On);const r=Zl(n.firestore,zm),o=s2(n.converter,e);return h2(r,[ZR(JR(r),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,Xr.none())])}function h2(n,e){return function(r,o){const a=new qi;return r.asyncQueue.enqueueAndForget(async()=>CR(await BR(r),o,a)),a.promise}(ME(n),e)}function d2(n,e,t){const r=t.docs.get(e._key),o=new u2(n);return new KE(n,o,e._key,r,new o2(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Ia=o})(Ta),Sr(new rr("firestore",(r,{instanceIdentifier:o,options:a})=>{const u=r.getProvider("app").getImmediate(),h=new zm(new sC(r.getProvider("auth-internal")),new uC(r.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new xe(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ql(m.options.projectId,w)}(u,o),u);return a=Object.assign({useFetchStreams:t},a),h._setSettings(a),h},"PUBLIC").setMultipleInstances(!0)),Ln(I0,"4.7.3",e),Ln(I0,"4.7.3","esm2017")})();var f2="firebase",p2="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ln(f2,p2,"app");const QE="@firebase/installations",Gm="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE=1e4,XE=`w:${Gm}`,JE="FIS_v2",m2="https://firebaseinstallations.googleapis.com/v1",g2=3600*1e3,y2="installations",v2="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ys=new Zs(y2,v2,w2);function ZE(n){return n instanceof sr&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT({projectId:n}){return`${m2}/projects/${n}/installations`}function tT(n){return{token:n.token,requestStatus:2,expiresIn:x2(n.expiresIn),creationTime:Date.now()}}async function nT(n,e){const r=(await e.json()).error;return Ys.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function rT({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function _2(n,{refreshToken:e}){const t=rT(n);return t.append("Authorization",E2(e)),t}async function iT(n){const e=await n();return e.status>=500&&e.status<600?n():e}function x2(n){return Number(n.replace("s","000"))}function E2(n){return`${JE} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T2({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=eT(n),o=rT(n),a=e.getImmediate({optional:!0});if(a){const m=await a.getHeartbeatsHeader();m&&o.append("x-firebase-client",m)}const u={fid:t,authVersion:JE,appId:n.appId,sdkVersion:XE},h={method:"POST",headers:o,body:JSON.stringify(u)},f=await iT(()=>fetch(r,h));if(f.ok){const m=await f.json();return{fid:m.fid||t,registrationStatus:2,refreshToken:m.refreshToken,authToken:tT(m.authToken)}}else throw await nT("Create Installation",f)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2=/^[cdef][\w-]{21}$/,Vp="";function P2(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=b2(n);return S2.test(t)?t:Vp}catch{return Vp}}function b2(n){return I2(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT=new Map;function aT(n,e){const t=Wh(n);lT(t,e),A2(t,e)}function lT(n,e){const t=oT.get(n);if(t)for(const r of t)r(e)}function A2(n,e){const t=k2();t&&t.postMessage({key:n,fid:e}),C2()}let Fs=null;function k2(){return!Fs&&"BroadcastChannel"in self&&(Fs=new BroadcastChannel("[Firebase] FID Change"),Fs.onmessage=n=>{lT(n.data.key,n.data.fid)}),Fs}function C2(){oT.size===0&&Fs&&(Fs.close(),Fs=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2="firebase-installations-database",R2=1,Xs="firebase-installations-store";let Wf=null;function Km(){return Wf||(Wf=H_(N2,R2,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Xs)}}})),Wf}async function vh(n,e){const t=Wh(n),o=(await Km()).transaction(Xs,"readwrite"),a=o.objectStore(Xs),u=await a.get(t);return await a.put(e,t),await o.done,(!u||u.fid!==e.fid)&&aT(n,e.fid),e}async function uT(n){const e=Wh(n),r=(await Km()).transaction(Xs,"readwrite");await r.objectStore(Xs).delete(e),await r.done}async function qh(n,e){const t=Wh(n),o=(await Km()).transaction(Xs,"readwrite"),a=o.objectStore(Xs),u=await a.get(t),h=e(u);return h===void 0?await a.delete(t):await a.put(h,t),await o.done,h&&(!u||u.fid!==h.fid)&&aT(n,h.fid),h}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qm(n){let e;const t=await qh(n.appConfig,r=>{const o=j2(r),a=D2(n,o);return e=a.registrationPromise,a.installationEntry});return t.fid===Vp?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function j2(n){const e=n||{fid:P2(),registrationStatus:0};return cT(e)}function D2(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(Ys.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=V2(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:L2(n)}:{installationEntry:e}}async function V2(n,e){try{const t=await T2(n,e);return vh(n.appConfig,t)}catch(t){throw ZE(t)&&t.customData.serverCode===409?await uT(n.appConfig):await vh(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function L2(n){let e=await ow(n.appConfig);for(;e.registrationStatus===1;)await sT(100),e=await ow(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await Qm(n);return r||t}return e}function ow(n){return qh(n,e=>{if(!e)throw Ys.create("installation-not-found");return cT(e)})}function cT(n){return O2(n)?{fid:n.fid,registrationStatus:0}:n}function O2(n){return n.registrationStatus===1&&n.registrationTime+YE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M2({appConfig:n,heartbeatServiceProvider:e},t){const r=F2(n,t),o=_2(n,t),a=e.getImmediate({optional:!0});if(a){const m=await a.getHeartbeatsHeader();m&&o.append("x-firebase-client",m)}const u={installation:{sdkVersion:XE,appId:n.appId}},h={method:"POST",headers:o,body:JSON.stringify(u)},f=await iT(()=>fetch(r,h));if(f.ok){const m=await f.json();return tT(m)}else throw await nT("Generate Auth Token",f)}function F2(n,{fid:e}){return`${eT(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ym(n,e=!1){let t;const r=await qh(n.appConfig,a=>{if(!hT(a))throw Ys.create("not-registered");const u=a.authToken;if(!e&&z2(u))return a;if(u.requestStatus===1)return t=U2(n,e),a;{if(!navigator.onLine)throw Ys.create("app-offline");const h=W2(a);return t=B2(n,h),h}});return t?await t:r.authToken}async function U2(n,e){let t=await aw(n.appConfig);for(;t.authToken.requestStatus===1;)await sT(100),t=await aw(n.appConfig);const r=t.authToken;return r.requestStatus===0?Ym(n,e):r}function aw(n){return qh(n,e=>{if(!hT(e))throw Ys.create("not-registered");const t=e.authToken;return q2(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function B2(n,e){try{const t=await M2(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await vh(n.appConfig,r),t}catch(t){if(ZE(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await uT(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await vh(n.appConfig,r)}throw t}}function hT(n){return n!==void 0&&n.registrationStatus===2}function z2(n){return n.requestStatus===2&&!$2(n)}function $2(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+g2}function W2(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function q2(n){return n.requestStatus===1&&n.requestTime+YE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H2(n){const e=n,{installationEntry:t,registrationPromise:r}=await Qm(e);return r?r.catch(console.error):Ym(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G2(n,e=!1){const t=n;return await K2(t),(await Ym(t,e)).token}async function K2(n){const{registrationPromise:e}=await Qm(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(n){if(!n||!n.options)throw qf("App Configuration");if(!n.name)throw qf("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw qf(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function qf(n){return Ys.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT="installations",Y2="installations-internal",X2=n=>{const e=n.getProvider("app").getImmediate(),t=Q2(e),r=eo(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},J2=n=>{const e=n.getProvider("app").getImmediate(),t=eo(e,dT).getImmediate();return{getId:()=>H2(t),getToken:o=>G2(t,o)}};function Z2(){Sr(new rr(dT,X2,"PUBLIC")),Sr(new rr(Y2,J2,"PRIVATE"))}Z2();Ln(QE,Gm);Ln(QE,Gm,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh="analytics",ej="firebase_id",tj="origin",nj=60*1e3,rj="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Xm="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn=new Ch("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ij={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},xn=new Zs("analytics","Analytics",ij);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sj(n){if(!n.startsWith(Xm)){const e=xn.create("invalid-gtag-resource",{gtagURL:n});return dn.warn(e.message),""}return n}function fT(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function oj(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function aj(n,e){const t=oj("firebase-js-sdk-policy",{createScriptURL:sj}),r=document.createElement("script"),o=`${Xm}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(o):o,r.async=!0,document.head.appendChild(r)}function lj(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function uj(n,e,t,r,o,a){const u=r[o];try{if(u)await e[u];else{const f=(await fT(t)).find(m=>m.measurementId===o);f&&await e[f.appId]}}catch(h){dn.error(h)}n("config",o,a)}async function cj(n,e,t,r,o){try{let a=[];if(o&&o.send_to){let u=o.send_to;Array.isArray(u)||(u=[u]);const h=await fT(t);for(const f of u){const m=h.find(_=>_.measurementId===f),w=m&&e[m.appId];if(w)a.push(w);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),n("event",r,o||{})}catch(a){dn.error(a)}}function hj(n,e,t,r){async function o(a,...u){try{if(a==="event"){const[h,f]=u;await cj(n,e,t,h,f)}else if(a==="config"){const[h,f]=u;await uj(n,e,t,r,h,f)}else if(a==="consent"){const[h,f]=u;n("consent",h,f)}else if(a==="get"){const[h,f,m]=u;n("get",h,f,m)}else if(a==="set"){const[h]=u;n("set",h)}else n(a,...u)}catch(h){dn.error(h)}}return o}function dj(n,e,t,r,o){let a=function(...u){window[r].push(arguments)};return window[o]&&typeof window[o]=="function"&&(a=window[o]),window[o]=hj(a,n,e,t),{gtagCore:a,wrappedGtag:window[o]}}function fj(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Xm)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pj=30,mj=1e3;class gj{constructor(e={},t=mj){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const pT=new gj;function yj(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function vj(n){var e;const{appId:t,apiKey:r}=n,o={method:"GET",headers:yj(r)},a=rj.replace("{app-id}",t),u=await fetch(a,o);if(u.status!==200&&u.status!==304){let h="";try{const f=await u.json();!((e=f.error)===null||e===void 0)&&e.message&&(h=f.error.message)}catch{}throw xn.create("config-fetch-failed",{httpStatus:u.status,responseMessage:h})}return u.json()}async function wj(n,e=pT,t){const{appId:r,apiKey:o,measurementId:a}=n.options;if(!r)throw xn.create("no-app-id");if(!o){if(a)return{measurementId:a,appId:r};throw xn.create("no-api-key")}const u=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},h=new Ej;return setTimeout(async()=>{h.abort()},nj),mT({appId:r,apiKey:o,measurementId:a},u,h,e)}async function mT(n,{throttleEndTimeMillis:e,backoffCount:t},r,o=pT){var a;const{appId:u,measurementId:h}=n;try{await _j(r,e)}catch(f){if(h)return dn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:u,measurementId:h};throw f}try{const f=await vj(n);return o.deleteThrottleMetadata(u),f}catch(f){const m=f;if(!xj(m)){if(o.deleteThrottleMetadata(u),h)return dn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:u,measurementId:h};throw f}const w=Number((a=m?.customData)===null||a===void 0?void 0:a.httpStatus)===503?Kv(t,o.intervalMillis,pj):Kv(t,o.intervalMillis),_={throttleEndTimeMillis:Date.now()+w,backoffCount:t+1};return o.setThrottleMetadata(u,_),dn.debug(`Calling attemptFetch again in ${w} millis`),mT(n,_,r,o)}}function _j(n,e){return new Promise((t,r)=>{const o=Math.max(e-Date.now(),0),a=setTimeout(t,o);n.addEventListener(()=>{clearTimeout(a),r(xn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function xj(n){if(!(n instanceof sr)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class Ej{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Tj(n,e,t,r,o){if(o&&o.global){n("event",t,r);return}else{const a=await e,u=Object.assign(Object.assign({},r),{send_to:a});n("event",t,u)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ij(){if(z_())try{await $_()}catch(n){return dn.warn(xn.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return dn.warn(xn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Sj(n,e,t,r,o,a,u){var h;const f=wj(n);f.then(S=>{t[S.measurementId]=S.appId,n.options.measurementId&&S.measurementId!==n.options.measurementId&&dn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${S.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(S=>dn.error(S)),e.push(f);const m=Ij().then(S=>{if(S)return r.getId()}),[w,_]=await Promise.all([f,m]);fj(a)||aj(a,w.measurementId),o("js",new Date);const E=(h=u?.config)!==null&&h!==void 0?h:{};return E[tj]="firebase",E.update=!0,_!=null&&(E[ej]=_),o("config",w.measurementId,E),w.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(e){this.app=e}_delete(){return delete Ol[this.app.options.appId],Promise.resolve()}}let Ol={},lw=[];const uw={};let Hf="dataLayer",bj="gtag",cw,gT,hw=!1;function Aj(){const n=[];if(B_()&&n.push("This is a browser extension environment."),TP()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,o)=>`(${o+1}) ${r}`).join(" "),t=xn.create("invalid-analytics-context",{errorInfo:e});dn.warn(t.message)}}function kj(n,e,t){Aj();const r=n.options.appId;if(!r)throw xn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)dn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw xn.create("no-api-key");if(Ol[r]!=null)throw xn.create("already-exists",{id:r});if(!hw){lj(Hf);const{wrappedGtag:a,gtagCore:u}=dj(Ol,lw,uw,Hf,bj);gT=a,cw=u,hw=!0}return Ol[r]=Sj(n,lw,uw,e,cw,Hf,t),new Pj(n)}function Cj(n=om()){n=At(n);const e=eo(n,wh);return e.isInitialized()?e.getImmediate():Nj(n)}function Nj(n,e={}){const t=eo(n,wh);if(t.isInitialized()){const o=t.getImmediate();if(Wl(e,t.getOptions()))return o;throw xn.create("already-initialized")}return t.initialize({options:e})}function Rj(n,e,t,r){n=At(n),Tj(gT,Ol[n.app.options.appId],e,t,r).catch(o=>dn.error(o))}const dw="@firebase/analytics",fw="0.10.8";function jj(){Sr(new rr(wh,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return kj(r,o,t)},"PUBLIC")),Sr(new rr("analytics-internal",n,"PRIVATE")),Ln(dw,fw),Ln(dw,fw,"esm2017");function n(e){try{const t=e.getProvider(wh).getImmediate();return{logEvent:(r,o,a)=>Rj(t,r,o,a)}}catch(t){throw xn.create("interop-component-reg-failed",{reason:t})}}}jj();const Dj={apiKey:"AIzaSyDSplfIeCdHaXnAgH1WnmaY78uINeUHHeA",authDomain:"glyphmart.firebaseapp.com",projectId:"glyphmart",storageBucket:"glyphmart.firebasestorage.app",messagingSenderId:"582834377960",appId:"1:582834377960:web:2f844d65c9c0f92f93255d",measurementId:"G-1RC8D5PY66"},Jm=G_(Dj),na=tC(Jm),pw=GR(Jm);Cj(Jm);const yT=j.createContext(),oi=()=>{const n=j.useContext(yT);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},Vj=({children:n})=>{const[e,t]=j.useState(null),[r,o]=j.useState(!0),[a,u]=j.useState(null),h=async(E,S,D,C)=>{const z=(await LA(na,E,S)).user;return await wp(z,{displayName:C}),await c2(iw(pw,"users",z.uid),{uid:z.uid,email:E,username:D,displayName:C,createdAt:new Date,glyphsCount:0,bio:"",website:"",location:""}),z},f=(E,S)=>OA(na,E,S),m=()=>WA(na),w=async E=>{try{const S=await l2(iw(pw,"users",E));S.exists()&&u(S.data())}catch(S){console.error("Error fetching user profile:",S)}};j.useEffect(()=>$A(na,S=>{t(S),S?w(S.uid):u(null),o(!1)}),[]);const _={currentUser:e,userProfile:a,signup:h,signin:f,logout:m,fetchUserProfile:w};return p.jsx(yT.Provider,{value:_,children:!r&&n})};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Lj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Me=(n,e)=>{const t=j.forwardRef(({color:r="currentColor",size:o=24,strokeWidth:a=2,absoluteStrokeWidth:u,className:h="",children:f,...m},w)=>j.createElement("svg",{ref:w,...Lj,width:o,height:o,stroke:r,strokeWidth:u?Number(a)*24/Number(o):a,className:["lucide",`lucide-${Oj(n)}`,h].join(" "),...m},[...e.map(([_,E])=>j.createElement(_,E)),...Array.isArray(f)?f:[f]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lp=Me("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=Me("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=Me("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=Me("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zm=Me("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=Me("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=Me("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=Me("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xi=Me("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=Me("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=Me("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=Me("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vT=Me("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qj=Me("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wT=Me("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj=Me("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=Me("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Op=Me("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=Me("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=Me("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=Me("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eg=Me("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=Me("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=Me("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=Me("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gw=Me("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=Me("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mp=Me("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=Me("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=Me("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=Me("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fp=Me("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=Me("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _T=Me("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=Me("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),xT=j.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),Hh=j.createContext({}),Gh=j.createContext(null),Kh=typeof document<"u",tg=Kh?j.useLayoutEffect:j.useEffect,ET=j.createContext({strict:!1}),ng=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Zj="framerAppearId",TT="data-"+ng(Zj);function eD(n,e,t,r){const{visualElement:o}=j.useContext(Hh),a=j.useContext(ET),u=j.useContext(Gh),h=j.useContext(xT).reducedMotion,f=j.useRef();r=r||a.renderer,!f.current&&r&&(f.current=r(n,{visualState:e,parent:o,props:t,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:h}));const m=f.current;j.useInsertionEffect(()=>{m&&m.update(t,u)});const w=j.useRef(!!(t[TT]&&!window.HandoffComplete));return tg(()=>{m&&(m.render(),w.current&&m.animationState&&m.animationState.animateChanges())}),j.useEffect(()=>{m&&(m.updateFeatures(),!w.current&&m.animationState&&m.animationState.animateChanges(),w.current&&(w.current=!1,window.HandoffComplete=!0))}),m}function ra(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function tD(n,e,t){return j.useCallback(r=>{r&&n.mount&&n.mount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):ra(t)&&(t.current=r))},[e])}function tu(n){return typeof n=="string"||Array.isArray(n)}function Qh(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const rg=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ig=["initial",...rg];function Yh(n){return Qh(n.animate)||ig.some(e=>tu(n[e]))}function IT(n){return!!(Yh(n)||n.variants)}function nD(n,e){if(Yh(n)){const{initial:t,animate:r}=n;return{initial:t===!1||tu(t)?t:void 0,animate:tu(r)?r:void 0}}return n.inherit!==!1?e:{}}function rD(n){const{initial:e,animate:t}=nD(n,j.useContext(Hh));return j.useMemo(()=>({initial:e,animate:t}),[vw(e),vw(t)])}function vw(n){return Array.isArray(n)?n.join(" "):n}const ww={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},nu={};for(const n in ww)nu[n]={isEnabled:e=>ww[n].some(t=>!!e[t])};function iD(n){for(const e in n)nu[e]={...nu[e],...n[e]}}const sg=j.createContext({}),ST=j.createContext({}),sD=Symbol.for("motionComponentSymbol");function oD({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:o}){n&&iD(n);function a(h,f){let m;const w={...j.useContext(xT),...h,layoutId:aD(h)},{isStatic:_}=w,E=rD(h),S=r(h,_);if(!_&&Kh){E.visualElement=eD(o,S,w,e);const D=j.useContext(ST),C=j.useContext(ET).strict;E.visualElement&&(m=E.visualElement.loadFeatures(w,C,n,D))}return j.createElement(Hh.Provider,{value:E},m&&E.visualElement?j.createElement(m,{visualElement:E.visualElement,...w}):null,t(o,h,tD(S,E.visualElement,f),S,_,E.visualElement))}const u=j.forwardRef(a);return u[sD]=o,u}function aD({layoutId:n}){const e=j.useContext(sg).id;return e&&n!==void 0?e+"-"+n:n}function lD(n){function e(r,o={}){return oD(n(r,o))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(r,o)=>(t.has(o)||t.set(o,e(o)),t.get(o))})}const uD=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function og(n){return typeof n!="string"||n.includes("-")?!1:!!(uD.indexOf(n)>-1||/[A-Z]/.test(n))}const _h={};function cD(n){Object.assign(_h,n)}const gu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],io=new Set(gu);function PT(n,{layout:e,layoutId:t}){return io.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!_h[n]||n==="opacity")}const fn=n=>!!(n&&n.getVelocity),hD={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},dD=gu.length;function fD(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},r,o){let a="";for(let u=0;u<dD;u++){const h=gu[u];if(n[h]!==void 0){const f=hD[h]||h;a+=`${f}(${n[h]}) `}}return e&&!n.z&&(a+="translateZ(0)"),a=a.trim(),o?a=o(n,r?"":a):t&&r&&(a="none"),a}const bT=n=>e=>typeof e=="string"&&e.startsWith(n),AT=bT("--"),Up=bT("var(--"),pD=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,mD=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Ji=(n,e,t)=>Math.min(Math.max(t,n),e),so={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Ml={...so,transform:n=>Ji(0,1,n)},Bc={...so,default:1},Fl=n=>Math.round(n*1e5)/1e5,Xh=/(-)?([\d]*\.?[\d])+/g,kT=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,gD=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function yu(n){return typeof n=="string"}const vu=n=>({test:e=>yu(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),ji=vu("deg"),Ir=vu("%"),Te=vu("px"),yD=vu("vh"),vD=vu("vw"),_w={...Ir,parse:n=>Ir.parse(n)/100,transform:n=>Ir.transform(n*100)},xw={...so,transform:Math.round},CT={borderWidth:Te,borderTopWidth:Te,borderRightWidth:Te,borderBottomWidth:Te,borderLeftWidth:Te,borderRadius:Te,radius:Te,borderTopLeftRadius:Te,borderTopRightRadius:Te,borderBottomRightRadius:Te,borderBottomLeftRadius:Te,width:Te,maxWidth:Te,height:Te,maxHeight:Te,size:Te,top:Te,right:Te,bottom:Te,left:Te,padding:Te,paddingTop:Te,paddingRight:Te,paddingBottom:Te,paddingLeft:Te,margin:Te,marginTop:Te,marginRight:Te,marginBottom:Te,marginLeft:Te,rotate:ji,rotateX:ji,rotateY:ji,rotateZ:ji,scale:Bc,scaleX:Bc,scaleY:Bc,scaleZ:Bc,skew:ji,skewX:ji,skewY:ji,distance:Te,translateX:Te,translateY:Te,translateZ:Te,x:Te,y:Te,z:Te,perspective:Te,transformPerspective:Te,opacity:Ml,originX:_w,originY:_w,originZ:Te,zIndex:xw,fillOpacity:Ml,strokeOpacity:Ml,numOctaves:xw};function ag(n,e,t,r){const{style:o,vars:a,transform:u,transformOrigin:h}=n;let f=!1,m=!1,w=!0;for(const _ in e){const E=e[_];if(AT(_)){a[_]=E;continue}const S=CT[_],D=mD(E,S);if(io.has(_)){if(f=!0,u[_]=D,!w)continue;E!==(S.default||0)&&(w=!1)}else _.startsWith("origin")?(m=!0,h[_]=D):o[_]=D}if(e.transform||(f||r?o.transform=fD(n.transform,t,w,r):o.transform&&(o.transform="none")),m){const{originX:_="50%",originY:E="50%",originZ:S=0}=h;o.transformOrigin=`${_} ${E} ${S}`}}const lg=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function NT(n,e,t){for(const r in e)!fn(e[r])&&!PT(r,t)&&(n[r]=e[r])}function wD({transformTemplate:n},e,t){return j.useMemo(()=>{const r=lg();return ag(r,e,{enableHardwareAcceleration:!t},n),Object.assign({},r.vars,r.style)},[e])}function _D(n,e,t){const r=n.style||{},o={};return NT(o,r,n),Object.assign(o,wD(n,e,t)),n.transformValues?n.transformValues(o):o}function xD(n,e,t){const r={},o=_D(n,e,t);return n.drag&&n.dragListener!==!1&&(r.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(r.tabIndex=0),r.style=o,r}const ED=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function xh(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||ED.has(n)}let RT=n=>!xh(n);function TD(n){n&&(RT=e=>e.startsWith("on")?!xh(e):n(e))}try{TD(require("@emotion/is-prop-valid").default)}catch{}function ID(n,e,t){const r={};for(const o in n)o==="values"&&typeof n.values=="object"||(RT(o)||t===!0&&xh(o)||!e&&!xh(o)||n.draggable&&o.startsWith("onDrag"))&&(r[o]=n[o]);return r}function Ew(n,e,t){return typeof n=="string"?n:Te.transform(e+t*n)}function SD(n,e,t){const r=Ew(e,n.x,n.width),o=Ew(t,n.y,n.height);return`${r} ${o}`}const PD={offset:"stroke-dashoffset",array:"stroke-dasharray"},bD={offset:"strokeDashoffset",array:"strokeDasharray"};function AD(n,e,t=1,r=0,o=!0){n.pathLength=1;const a=o?PD:bD;n[a.offset]=Te.transform(-r);const u=Te.transform(e),h=Te.transform(t);n[a.array]=`${u} ${h}`}function ug(n,{attrX:e,attrY:t,attrScale:r,originX:o,originY:a,pathLength:u,pathSpacing:h=1,pathOffset:f=0,...m},w,_,E){if(ag(n,m,w,E),_){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:S,style:D,dimensions:C}=n;S.transform&&(C&&(D.transform=S.transform),delete S.transform),C&&(o!==void 0||a!==void 0||D.transform)&&(D.transformOrigin=SD(C,o!==void 0?o:.5,a!==void 0?a:.5)),e!==void 0&&(S.x=e),t!==void 0&&(S.y=t),r!==void 0&&(S.scale=r),u!==void 0&&AD(S,u,h,f,!1)}const jT=()=>({...lg(),attrs:{}}),cg=n=>typeof n=="string"&&n.toLowerCase()==="svg";function kD(n,e,t,r){const o=j.useMemo(()=>{const a=jT();return ug(a,e,{enableHardwareAcceleration:!1},cg(r),n.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(n.style){const a={};NT(a,n.style,n),o.style={...a,...o.style}}return o}function CD(n=!1){return(t,r,o,{latestValues:a},u)=>{const f=(og(t)?kD:xD)(r,a,u,t),w={...ID(r,typeof t=="string",n),...f,ref:o},{children:_}=r,E=j.useMemo(()=>fn(_)?_.get():_,[_]);return j.createElement(t,{...w,children:E})}}function DT(n,{style:e,vars:t},r,o){Object.assign(n.style,e,o&&o.getProjectionStyles(r));for(const a in t)n.style.setProperty(a,t[a])}const VT=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function LT(n,e,t,r){DT(n,e,void 0,r);for(const o in e.attrs)n.setAttribute(VT.has(o)?o:ng(o),e.attrs[o])}function hg(n,e){const{style:t}=n,r={};for(const o in t)(fn(t[o])||e.style&&fn(e.style[o])||PT(o,n))&&(r[o]=t[o]);return r}function OT(n,e){const t=hg(n,e);for(const r in n)if(fn(n[r])||fn(e[r])){const o=gu.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;t[o]=n[r]}return t}function dg(n,e,t,r={},o={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,o)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,o)),e}function MT(n){const e=j.useRef(null);return e.current===null&&(e.current=n()),e.current}const Eh=n=>Array.isArray(n),ND=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),RD=n=>Eh(n)?n[n.length-1]||0:n;function Zc(n){const e=fn(n)?n.get():n;return ND(e)?e.toValue():e}function jD({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},r,o,a){const u={latestValues:DD(r,o,a,n),renderState:e()};return t&&(u.mount=h=>t(r,h,u)),u}const FT=n=>(e,t)=>{const r=j.useContext(Hh),o=j.useContext(Gh),a=()=>jD(n,e,r,o);return t?a():MT(a)};function DD(n,e,t,r){const o={},a=r(n,{});for(const E in a)o[E]=Zc(a[E]);let{initial:u,animate:h}=n;const f=Yh(n),m=IT(n);e&&m&&!f&&n.inherit!==!1&&(u===void 0&&(u=e.initial),h===void 0&&(h=e.animate));let w=t?t.initial===!1:!1;w=w||u===!1;const _=w?h:u;return _&&typeof _!="boolean"&&!Qh(_)&&(Array.isArray(_)?_:[_]).forEach(S=>{const D=dg(n,S);if(!D)return;const{transitionEnd:C,transition:A,...z}=D;for(const H in z){let M=z[H];if(Array.isArray(M)){const Q=w?M.length-1:0;M=M[Q]}M!==null&&(o[H]=M)}for(const H in C)o[H]=C[H]}),o}const pt=n=>n;class Tw{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function VD(n){let e=new Tw,t=new Tw,r=0,o=!1,a=!1;const u=new WeakSet,h={schedule:(f,m=!1,w=!1)=>{const _=w&&o,E=_?e:t;return m&&u.add(f),E.add(f)&&_&&o&&(r=e.order.length),f},cancel:f=>{t.remove(f),u.delete(f)},process:f=>{if(o){a=!0;return}if(o=!0,[e,t]=[t,e],t.clear(),r=e.order.length,r)for(let m=0;m<r;m++){const w=e.order[m];w(f),u.has(w)&&(h.schedule(w),n())}o=!1,a&&(a=!1,h.process(f))}};return h}const zc=["prepare","read","update","preRender","render","postRender"],LD=40;function OD(n,e){let t=!1,r=!0;const o={delta:0,timestamp:0,isProcessing:!1},a=zc.reduce((_,E)=>(_[E]=VD(()=>t=!0),_),{}),u=_=>a[_].process(o),h=()=>{const _=performance.now();t=!1,o.delta=r?1e3/60:Math.max(Math.min(_-o.timestamp,LD),1),o.timestamp=_,o.isProcessing=!0,zc.forEach(u),o.isProcessing=!1,t&&e&&(r=!1,n(h))},f=()=>{t=!0,r=!0,o.isProcessing||n(h)};return{schedule:zc.reduce((_,E)=>{const S=a[E];return _[E]=(D,C=!1,A=!1)=>(t||f(),S.schedule(D,C,A)),_},{}),cancel:_=>zc.forEach(E=>a[E].cancel(_)),state:o,steps:a}}const{schedule:Ze,cancel:ii,state:Kt,steps:Gf}=OD(typeof requestAnimationFrame<"u"?requestAnimationFrame:pt,!0),MD={useVisualState:FT({scrapeMotionValuesFromProps:OT,createRenderState:jT,onMount:(n,e,{renderState:t,latestValues:r})=>{Ze.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),Ze.render(()=>{ug(t,r,{enableHardwareAcceleration:!1},cg(e.tagName),n.transformTemplate),LT(e,t)})}})},FD={useVisualState:FT({scrapeMotionValuesFromProps:hg,createRenderState:lg})};function UD(n,{forwardMotionProps:e=!1},t,r){return{...og(n)?MD:FD,preloadedFeatures:t,useRender:CD(e),createVisualElement:r,Component:n}}function Yr(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const UT=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function Jh(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const BD=n=>e=>UT(e)&&n(e,Jh(e));function Jr(n,e,t,r){return Yr(n,e,BD(t),r)}const zD=(n,e)=>t=>e(n(t)),Hi=(...n)=>n.reduce(zD);function BT(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const Iw=BT("dragHorizontal"),Sw=BT("dragVertical");function zT(n){let e=!1;if(n==="y")e=Sw();else if(n==="x")e=Iw();else{const t=Iw(),r=Sw();t&&r?e=()=>{t(),r()}:(t&&t(),r&&r())}return e}function $T(){const n=zT(!0);return n?(n(),!1):!0}class ns{constructor(e){this.isMounted=!1,this.node=e}update(){}}function Pw(n,e){const t="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),o=(a,u)=>{if(a.pointerType==="touch"||$T())return;const h=n.getProps();n.animationState&&h.whileHover&&n.animationState.setActive("whileHover",e),h[r]&&Ze.update(()=>h[r](a,u))};return Jr(n.current,t,o,{passive:!n.getProps()[r]})}class $D extends ns{mount(){this.unmount=Hi(Pw(this.node,!0),Pw(this.node,!1))}unmount(){}}class WD extends ns{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Hi(Yr(this.node.current,"focus",()=>this.onFocus()),Yr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const WT=(n,e)=>e?n===e?!0:WT(n,e.parentElement):!1;function Kf(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,Jh(t))}class qD extends ns{constructor(){super(...arguments),this.removeStartListeners=pt,this.removeEndListeners=pt,this.removeAccessibleListeners=pt,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),a=Jr(window,"pointerup",(h,f)=>{if(!this.checkPressEnd())return;const{onTap:m,onTapCancel:w,globalTapTarget:_}=this.node.getProps();Ze.update(()=>{!_&&!WT(this.node.current,h.target)?w&&w(h,f):m&&m(h,f)})},{passive:!(r.onTap||r.onPointerUp)}),u=Jr(window,"pointercancel",(h,f)=>this.cancelPress(h,f),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Hi(a,u),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=a=>{if(a.key!=="Enter"||this.isPressing)return;const u=h=>{h.key!=="Enter"||!this.checkPressEnd()||Kf("up",(f,m)=>{const{onTap:w}=this.node.getProps();w&&Ze.update(()=>w(f,m))})};this.removeEndListeners(),this.removeEndListeners=Yr(this.node.current,"keyup",u),Kf("down",(h,f)=>{this.startPress(h,f)})},t=Yr(this.node.current,"keydown",e),r=()=>{this.isPressing&&Kf("cancel",(a,u)=>this.cancelPress(a,u))},o=Yr(this.node.current,"blur",r);this.removeAccessibleListeners=Hi(t,o)}}startPress(e,t){this.isPressing=!0;const{onTapStart:r,whileTap:o}=this.node.getProps();o&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Ze.update(()=>r(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!$T()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Ze.update(()=>r(e,t))}mount(){const e=this.node.getProps(),t=Jr(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Yr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Hi(t,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Bp=new WeakMap,Qf=new WeakMap,HD=n=>{const e=Bp.get(n.target);e&&e(n)},GD=n=>{n.forEach(HD)};function KD({root:n,...e}){const t=n||document;Qf.has(t)||Qf.set(t,{});const r=Qf.get(t),o=JSON.stringify(e);return r[o]||(r[o]=new IntersectionObserver(GD,{root:n,...e})),r[o]}function QD(n,e,t){const r=KD(e);return Bp.set(n,t),r.observe(n),()=>{Bp.delete(n),r.unobserve(n)}}const YD={some:0,all:1};class XD extends ns{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:o="some",once:a}=e,u={root:t?t.current:void 0,rootMargin:r,threshold:typeof o=="number"?o:YD[o]},h=f=>{const{isIntersecting:m}=f;if(this.isInView===m||(this.isInView=m,a&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:w,onViewportLeave:_}=this.node.getProps(),E=m?w:_;E&&E(f)};return QD(this.node.current,u,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(JD(e,t))&&this.startObserver()}unmount(){}}function JD({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const ZD={inView:{Feature:XD},tap:{Feature:qD},focus:{Feature:WD},hover:{Feature:$D}};function qT(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function eV(n){const e={};return n.values.forEach((t,r)=>e[r]=t.get()),e}function tV(n){const e={};return n.values.forEach((t,r)=>e[r]=t.getVelocity()),e}function Zh(n,e,t){const r=n.getProps();return dg(r,e,t!==void 0?t:r.custom,eV(n),tV(n))}let fg=pt;const $s=n=>n*1e3,Zr=n=>n/1e3,nV={current:!1},HT=n=>Array.isArray(n)&&typeof n[0]=="number";function GT(n){return!!(!n||typeof n=="string"&&KT[n]||HT(n)||Array.isArray(n)&&n.every(GT))}const Nl=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,KT={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Nl([0,.65,.55,1]),circOut:Nl([.55,0,1,.45]),backIn:Nl([.31,.01,.66,-.59]),backOut:Nl([.33,1.53,.69,.99])};function QT(n){if(n)return HT(n)?Nl(n):Array.isArray(n)?n.map(QT):KT[n]}function rV(n,e,t,{delay:r=0,duration:o,repeat:a=0,repeatType:u="loop",ease:h,times:f}={}){const m={[e]:t};f&&(m.offset=f);const w=QT(h);return Array.isArray(w)&&(m.easing=w),n.animate(m,{delay:r,duration:o,easing:Array.isArray(w)?"linear":w,fill:"both",iterations:a+1,direction:u==="reverse"?"alternate":"normal"})}function iV(n,{repeat:e,repeatType:t="loop"}){const r=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[r]}const YT=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,sV=1e-7,oV=12;function aV(n,e,t,r,o){let a,u,h=0;do u=e+(t-e)/2,a=YT(u,r,o)-n,a>0?t=u:e=u;while(Math.abs(a)>sV&&++h<oV);return u}function wu(n,e,t,r){if(n===e&&t===r)return pt;const o=a=>aV(a,0,1,n,t);return a=>a===0||a===1?a:YT(o(a),e,r)}const lV=wu(.42,0,1,1),uV=wu(0,0,.58,1),XT=wu(.42,0,.58,1),cV=n=>Array.isArray(n)&&typeof n[0]!="number",JT=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,ZT=n=>e=>1-n(1-e),pg=n=>1-Math.sin(Math.acos(n)),eI=ZT(pg),hV=JT(pg),tI=wu(.33,1.53,.69,.99),mg=ZT(tI),dV=JT(mg),fV=n=>(n*=2)<1?.5*mg(n):.5*(2-Math.pow(2,-10*(n-1))),pV={linear:pt,easeIn:lV,easeInOut:XT,easeOut:uV,circIn:pg,circInOut:hV,circOut:eI,backIn:mg,backInOut:dV,backOut:tI,anticipate:fV},bw=n=>{if(Array.isArray(n)){fg(n.length===4);const[e,t,r,o]=n;return wu(e,t,r,o)}else if(typeof n=="string")return pV[n];return n},gg=(n,e)=>t=>!!(yu(t)&&gD.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),nI=(n,e,t)=>r=>{if(!yu(r))return r;const[o,a,u,h]=r.match(Xh);return{[n]:parseFloat(o),[e]:parseFloat(a),[t]:parseFloat(u),alpha:h!==void 0?parseFloat(h):1}},mV=n=>Ji(0,255,n),Yf={...so,transform:n=>Math.round(mV(n))},Us={test:gg("rgb","red"),parse:nI("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+Yf.transform(n)+", "+Yf.transform(e)+", "+Yf.transform(t)+", "+Fl(Ml.transform(r))+")"};function gV(n){let e="",t="",r="",o="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),o=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),o=n.substring(4,5),e+=e,t+=t,r+=r,o+=o),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:o?parseInt(o,16)/255:1}}const zp={test:gg("#"),parse:gV,transform:Us.transform},ia={test:gg("hsl","hue"),parse:nI("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Ir.transform(Fl(e))+", "+Ir.transform(Fl(t))+", "+Fl(Ml.transform(r))+")"},nn={test:n=>Us.test(n)||zp.test(n)||ia.test(n),parse:n=>Us.test(n)?Us.parse(n):ia.test(n)?ia.parse(n):zp.parse(n),transform:n=>yu(n)?n:n.hasOwnProperty("red")?Us.transform(n):ia.transform(n)},at=(n,e,t)=>-t*n+t*e+n;function Xf(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function yV({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let o=0,a=0,u=0;if(!e)o=a=u=t;else{const h=t<.5?t*(1+e):t+e-t*e,f=2*t-h;o=Xf(f,h,n+1/3),a=Xf(f,h,n),u=Xf(f,h,n-1/3)}return{red:Math.round(o*255),green:Math.round(a*255),blue:Math.round(u*255),alpha:r}}const Jf=(n,e,t)=>{const r=n*n;return Math.sqrt(Math.max(0,t*(e*e-r)+r))},vV=[zp,Us,ia],wV=n=>vV.find(e=>e.test(n));function Aw(n){const e=wV(n);let t=e.parse(n);return e===ia&&(t=yV(t)),t}const rI=(n,e)=>{const t=Aw(n),r=Aw(e),o={...t};return a=>(o.red=Jf(t.red,r.red,a),o.green=Jf(t.green,r.green,a),o.blue=Jf(t.blue,r.blue,a),o.alpha=at(t.alpha,r.alpha,a),Us.transform(o))};function _V(n){var e,t;return isNaN(n)&&yu(n)&&(((e=n.match(Xh))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(kT))===null||t===void 0?void 0:t.length)||0)>0}const iI={regex:pD,countKey:"Vars",token:"${v}",parse:pt},sI={regex:kT,countKey:"Colors",token:"${c}",parse:nn.parse},oI={regex:Xh,countKey:"Numbers",token:"${n}",parse:so.parse};function Zf(n,{regex:e,countKey:t,token:r,parse:o}){const a=n.tokenised.match(e);a&&(n["num"+t]=a.length,n.tokenised=n.tokenised.replace(e,r),n.values.push(...a.map(o)))}function Th(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&Zf(t,iI),Zf(t,sI),Zf(t,oI),t}function aI(n){return Th(n).values}function lI(n){const{values:e,numColors:t,numVars:r,tokenised:o}=Th(n),a=e.length;return u=>{let h=o;for(let f=0;f<a;f++)f<r?h=h.replace(iI.token,u[f]):f<r+t?h=h.replace(sI.token,nn.transform(u[f])):h=h.replace(oI.token,Fl(u[f]));return h}}const xV=n=>typeof n=="number"?0:n;function EV(n){const e=aI(n);return lI(n)(e.map(xV))}const Zi={test:_V,parse:aI,createTransformer:lI,getAnimatableNone:EV},uI=(n,e)=>t=>`${t>0?e:n}`;function cI(n,e){return typeof n=="number"?t=>at(n,e,t):nn.test(n)?rI(n,e):n.startsWith("var(")?uI(n,e):dI(n,e)}const hI=(n,e)=>{const t=[...n],r=t.length,o=n.map((a,u)=>cI(a,e[u]));return a=>{for(let u=0;u<r;u++)t[u]=o[u](a);return t}},TV=(n,e)=>{const t={...n,...e},r={};for(const o in t)n[o]!==void 0&&e[o]!==void 0&&(r[o]=cI(n[o],e[o]));return o=>{for(const a in r)t[a]=r[a](o);return t}},dI=(n,e)=>{const t=Zi.createTransformer(e),r=Th(n),o=Th(e);return r.numVars===o.numVars&&r.numColors===o.numColors&&r.numNumbers>=o.numNumbers?Hi(hI(r.values,o.values),t):uI(n,e)},ru=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},kw=(n,e)=>t=>at(n,e,t);function IV(n){return typeof n=="number"?kw:typeof n=="string"?nn.test(n)?rI:dI:Array.isArray(n)?hI:typeof n=="object"?TV:kw}function SV(n,e,t){const r=[],o=t||IV(n[0]),a=n.length-1;for(let u=0;u<a;u++){let h=o(n[u],n[u+1]);if(e){const f=Array.isArray(e)?e[u]||pt:e;h=Hi(f,h)}r.push(h)}return r}function fI(n,e,{clamp:t=!0,ease:r,mixer:o}={}){const a=n.length;if(fg(a===e.length),a===1)return()=>e[0];n[0]>n[a-1]&&(n=[...n].reverse(),e=[...e].reverse());const u=SV(e,r,o),h=u.length,f=m=>{let w=0;if(h>1)for(;w<n.length-2&&!(m<n[w+1]);w++);const _=ru(n[w],n[w+1],m);return u[w](_)};return t?m=>f(Ji(n[0],n[a-1],m)):f}function PV(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const o=ru(0,e,r);n.push(at(t,1,o))}}function bV(n){const e=[0];return PV(e,n.length-1),e}function AV(n,e){return n.map(t=>t*e)}function kV(n,e){return n.map(()=>e||XT).splice(0,n.length-1)}function Ih({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const o=cV(r)?r.map(bw):bw(r),a={done:!1,value:e[0]},u=AV(t&&t.length===e.length?t:bV(e),n),h=fI(u,e,{ease:Array.isArray(o)?o:kV(e,o)});return{calculatedDuration:n,next:f=>(a.value=h(f),a.done=f>=n,a)}}function pI(n,e){return e?n*(1e3/e):0}const CV=5;function mI(n,e,t){const r=Math.max(e-CV,0);return pI(t-n(r),e-r)}const ep=.001,NV=.01,RV=10,jV=.05,DV=1;function VV({duration:n=800,bounce:e=.25,velocity:t=0,mass:r=1}){let o,a,u=1-e;u=Ji(jV,DV,u),n=Ji(NV,RV,Zr(n)),u<1?(o=m=>{const w=m*u,_=w*n,E=w-t,S=$p(m,u),D=Math.exp(-_);return ep-E/S*D},a=m=>{const _=m*u*n,E=_*t+t,S=Math.pow(u,2)*Math.pow(m,2)*n,D=Math.exp(-_),C=$p(Math.pow(m,2),u);return(-o(m)+ep>0?-1:1)*((E-S)*D)/C}):(o=m=>{const w=Math.exp(-m*n),_=(m-t)*n+1;return-ep+w*_},a=m=>{const w=Math.exp(-m*n),_=(t-m)*(n*n);return w*_});const h=5/n,f=OV(o,a,h);if(n=$s(n),isNaN(f))return{stiffness:100,damping:10,duration:n};{const m=Math.pow(f,2)*r;return{stiffness:m,damping:u*2*Math.sqrt(r*m),duration:n}}}const LV=12;function OV(n,e,t){let r=t;for(let o=1;o<LV;o++)r=r-n(r)/e(r);return r}function $p(n,e){return n*Math.sqrt(1-e*e)}const MV=["duration","bounce"],FV=["stiffness","damping","mass"];function Cw(n,e){return e.some(t=>n[t]!==void 0)}function UV(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!Cw(n,FV)&&Cw(n,MV)){const t=VV(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function gI({keyframes:n,restDelta:e,restSpeed:t,...r}){const o=n[0],a=n[n.length-1],u={done:!1,value:o},{stiffness:h,damping:f,mass:m,duration:w,velocity:_,isResolvedFromDuration:E}=UV({...r,velocity:-Zr(r.velocity||0)}),S=_||0,D=f/(2*Math.sqrt(h*m)),C=a-o,A=Zr(Math.sqrt(h/m)),z=Math.abs(C)<5;t||(t=z?.01:2),e||(e=z?.005:.5);let H;if(D<1){const M=$p(A,D);H=Q=>{const te=Math.exp(-D*A*Q);return a-te*((S+D*A*C)/M*Math.sin(M*Q)+C*Math.cos(M*Q))}}else if(D===1)H=M=>a-Math.exp(-A*M)*(C+(S+A*C)*M);else{const M=A*Math.sqrt(D*D-1);H=Q=>{const te=Math.exp(-D*A*Q),se=Math.min(M*Q,300);return a-te*((S+D*A*C)*Math.sinh(se)+M*C*Math.cosh(se))/M}}return{calculatedDuration:E&&w||null,next:M=>{const Q=H(M);if(E)u.done=M>=w;else{let te=S;M!==0&&(D<1?te=mI(H,M,Q):te=0);const se=Math.abs(te)<=t,R=Math.abs(a-Q)<=e;u.done=se&&R}return u.value=u.done?a:Q,u}}}function Nw({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:o=10,bounceStiffness:a=500,modifyTarget:u,min:h,max:f,restDelta:m=.5,restSpeed:w}){const _=n[0],E={done:!1,value:_},S=P=>h!==void 0&&P<h||f!==void 0&&P>f,D=P=>h===void 0?f:f===void 0||Math.abs(h-P)<Math.abs(f-P)?h:f;let C=t*e;const A=_+C,z=u===void 0?A:u(A);z!==A&&(C=z-_);const H=P=>-C*Math.exp(-P/r),M=P=>z+H(P),Q=P=>{const b=H(P),V=M(P);E.done=Math.abs(b)<=m,E.value=E.done?z:V};let te,se;const R=P=>{S(E.value)&&(te=P,se=gI({keyframes:[E.value,D(E.value)],velocity:mI(M,P,E.value),damping:o,stiffness:a,restDelta:m,restSpeed:w}))};return R(0),{calculatedDuration:null,next:P=>{let b=!1;return!se&&te===void 0&&(b=!0,Q(P),R(P)),te!==void 0&&P>te?se.next(P-te):(!b&&Q(P),E)}}}const BV=n=>{const e=({timestamp:t})=>n(t);return{start:()=>Ze.update(e,!0),stop:()=>ii(e),now:()=>Kt.isProcessing?Kt.timestamp:performance.now()}},Rw=2e4;function jw(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<Rw;)e+=t,r=n.next(e);return e>=Rw?1/0:e}const zV={decay:Nw,inertia:Nw,tween:Ih,keyframes:Ih,spring:gI};function Sh({autoplay:n=!0,delay:e=0,driver:t=BV,keyframes:r,type:o="keyframes",repeat:a=0,repeatDelay:u=0,repeatType:h="loop",onPlay:f,onStop:m,onComplete:w,onUpdate:_,...E}){let S=1,D=!1,C,A;const z=()=>{A=new Promise(L=>{C=L})};z();let H;const M=zV[o]||Ih;let Q;M!==Ih&&typeof r[0]!="number"&&(Q=fI([0,100],r,{clamp:!1}),r=[0,100]);const te=M({...E,keyframes:r});let se;h==="mirror"&&(se=M({...E,keyframes:[...r].reverse(),velocity:-(E.velocity||0)}));let R="idle",P=null,b=null,V=null;te.calculatedDuration===null&&a&&(te.calculatedDuration=jw(te));const{calculatedDuration:F}=te;let B=1/0,N=1/0;F!==null&&(B=F+u,N=B*(a+1)-u);let ke=0;const qe=L=>{if(b===null)return;S>0&&(b=Math.min(b,L)),S<0&&(b=Math.min(L-N/S,b)),P!==null?ke=P:ke=Math.round(L-b)*S;const Y=ke-e*(S>=0?1:-1),ge=S>=0?Y<0:Y>N;ke=Math.max(Y,0),R==="finished"&&P===null&&(ke=N);let le=ke,ce=te;if(a){const He=Math.min(ke,N)/B;let it=Math.floor(He),Dt=He%1;!Dt&&He>=1&&(Dt=1),Dt===1&&it--,it=Math.min(it,a+1),!!(it%2)&&(h==="reverse"?(Dt=1-Dt,u&&(Dt-=u/B)):h==="mirror"&&(ce=se)),le=Ji(0,1,Dt)*B}const ve=ge?{done:!1,value:r[0]}:ce.next(le);Q&&(ve.value=Q(ve.value));let{done:Ne}=ve;!ge&&F!==null&&(Ne=S>=0?ke>=N:ke<=0);const Be=P===null&&(R==="finished"||R==="running"&&Ne);return _&&_(ve.value),Be&&ae(),ve},Re=()=>{H&&H.stop(),H=void 0},Ce=()=>{R="idle",Re(),C(),z(),b=V=null},ae=()=>{R="finished",w&&w(),Re(),C()},Z=()=>{if(D)return;H||(H=t(qe));const L=H.now();f&&f(),P!==null?b=L-P:(!b||R==="finished")&&(b=L),R==="finished"&&z(),V=b,P=null,R="running",H.start()};n&&Z();const X={then(L,Y){return A.then(L,Y)},get time(){return Zr(ke)},set time(L){L=$s(L),ke=L,P!==null||!H||S===0?P=L:b=H.now()-L/S},get duration(){const L=te.calculatedDuration===null?jw(te):te.calculatedDuration;return Zr(L)},get speed(){return S},set speed(L){L===S||!H||(S=L,X.time=Zr(ke))},get state(){return R},play:Z,pause:()=>{R="paused",P=ke},stop:()=>{D=!0,R!=="idle"&&(R="idle",m&&m(),Ce())},cancel:()=>{V!==null&&qe(V),Ce()},complete:()=>{R="finished"},sample:L=>(b=0,qe(L))};return X}function $V(n){let e;return()=>(e===void 0&&(e=n()),e)}const WV=$V(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),qV=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),$c=10,HV=2e4,GV=(n,e)=>e.type==="spring"||n==="backgroundColor"||!GT(e.ease);function KV(n,e,{onUpdate:t,onComplete:r,...o}){if(!(WV()&&qV.has(e)&&!o.repeatDelay&&o.repeatType!=="mirror"&&o.damping!==0&&o.type!=="inertia"))return!1;let u=!1,h,f,m=!1;const w=()=>{f=new Promise(M=>{h=M})};w();let{keyframes:_,duration:E=300,ease:S,times:D}=o;if(GV(e,o)){const M=Sh({...o,repeat:0,delay:0});let Q={done:!1,value:_[0]};const te=[];let se=0;for(;!Q.done&&se<HV;)Q=M.sample(se),te.push(Q.value),se+=$c;D=void 0,_=te,E=se-$c,S="linear"}const C=rV(n.owner.current,e,_,{...o,duration:E,ease:S,times:D}),A=()=>{m=!1,C.cancel()},z=()=>{m=!0,Ze.update(A),h(),w()};return C.onfinish=()=>{m||(n.set(iV(_,o)),r&&r(),z())},{then(M,Q){return f.then(M,Q)},attachTimeline(M){return C.timeline=M,C.onfinish=null,pt},get time(){return Zr(C.currentTime||0)},set time(M){C.currentTime=$s(M)},get speed(){return C.playbackRate},set speed(M){C.playbackRate=M},get duration(){return Zr(E)},play:()=>{u||(C.play(),ii(A))},pause:()=>C.pause(),stop:()=>{if(u=!0,C.playState==="idle")return;const{currentTime:M}=C;if(M){const Q=Sh({...o,autoplay:!1});n.setWithVelocity(Q.sample(M-$c).value,Q.sample(M).value,$c)}z()},complete:()=>{m||C.finish()},cancel:z}}function QV({keyframes:n,delay:e,onUpdate:t,onComplete:r}){const o=()=>(t&&t(n[n.length-1]),r&&r(),{time:0,speed:1,duration:0,play:pt,pause:pt,stop:pt,then:a=>(a(),Promise.resolve()),cancel:pt,complete:pt});return e?Sh({keyframes:[0,1],duration:0,delay:e,onComplete:o}):o()}const YV={type:"spring",stiffness:500,damping:25,restSpeed:10},XV=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),JV={type:"keyframes",duration:.8},ZV={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},eL=(n,{keyframes:e})=>e.length>2?JV:io.has(n)?n.startsWith("scale")?XV(e[1]):YV:ZV,Wp=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Zi.test(e)||e==="0")&&!e.startsWith("url(")),tL=new Set(["brightness","contrast","saturate","opacity"]);function nL(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(Xh)||[];if(!r)return n;const o=t.replace(r,"");let a=tL.has(e)?1:0;return r!==t&&(a*=100),e+"("+a+o+")"}const rL=/([a-z-]*)\(.*?\)/g,qp={...Zi,getAnimatableNone:n=>{const e=n.match(rL);return e?e.map(nL).join(" "):n}},iL={...CT,color:nn,backgroundColor:nn,outlineColor:nn,fill:nn,stroke:nn,borderColor:nn,borderTopColor:nn,borderRightColor:nn,borderBottomColor:nn,borderLeftColor:nn,filter:qp,WebkitFilter:qp},yg=n=>iL[n];function yI(n,e){let t=yg(n);return t!==qp&&(t=Zi),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const vI=n=>/^0[^.\s]+$/.test(n);function sL(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||vI(n)}function oL(n,e,t,r){const o=Wp(e,t);let a;Array.isArray(t)?a=[...t]:a=[null,t];const u=r.from!==void 0?r.from:n.get();let h;const f=[];for(let m=0;m<a.length;m++)a[m]===null&&(a[m]=m===0?u:a[m-1]),sL(a[m])&&f.push(m),typeof a[m]=="string"&&a[m]!=="none"&&a[m]!=="0"&&(h=a[m]);if(o&&f.length&&h)for(let m=0;m<f.length;m++){const w=f[m];a[w]=yI(e,h)}return a}function aL({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:o,repeat:a,repeatType:u,repeatDelay:h,from:f,elapsed:m,...w}){return!!Object.keys(w).length}function vg(n,e){return n[e]||n.default||n}const lL={skipAnimations:!1},wg=(n,e,t,r={})=>o=>{const a=vg(r,n)||{},u=a.delay||r.delay||0;let{elapsed:h=0}=r;h=h-$s(u);const f=oL(e,n,t,a),m=f[0],w=f[f.length-1],_=Wp(n,m),E=Wp(n,w);let S={keyframes:f,velocity:e.getVelocity(),ease:"easeOut",...a,delay:-h,onUpdate:D=>{e.set(D),a.onUpdate&&a.onUpdate(D)},onComplete:()=>{o(),a.onComplete&&a.onComplete()}};if(aL(a)||(S={...S,...eL(n,S)}),S.duration&&(S.duration=$s(S.duration)),S.repeatDelay&&(S.repeatDelay=$s(S.repeatDelay)),!_||!E||nV.current||a.type===!1||lL.skipAnimations)return QV(S);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const D=KV(e,n,S);if(D)return D}return Sh(S)};function Ph(n){return!!(fn(n)&&n.add)}const wI=n=>/^\-?\d*\.?\d+$/.test(n);function _g(n,e){n.indexOf(e)===-1&&n.push(e)}function xg(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class Eg{constructor(){this.subscriptions=[]}add(e){return _g(this.subscriptions,e),()=>xg(this.subscriptions,e)}notify(e,t,r){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](e,t,r);else for(let a=0;a<o;a++){const u=this.subscriptions[a];u&&u(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const uL=n=>!isNaN(parseFloat(n));class cL{constructor(e,t={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,o=!0)=>{this.prev=this.current,this.current=r;const{delta:a,timestamp:u}=Kt;this.lastUpdated!==u&&(this.timeDelta=a,this.lastUpdated=u,Ze.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),o&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Ze.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=uL(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Eg);const r=this.events[e].add(t);return e==="change"?()=>{r(),Ze.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?pI(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function wa(n,e){return new cL(n,e)}const _I=n=>e=>e.test(n),hL={test:n=>n==="auto",parse:n=>n},xI=[so,Te,Ir,ji,vD,yD,hL],Il=n=>xI.find(_I(n)),dL=[...xI,nn,Zi],fL=n=>dL.find(_I(n));function pL(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,wa(t))}function mL(n,e){const t=Zh(n,e);let{transitionEnd:r={},transition:o={},...a}=t?n.makeTargetAnimatable(t,!1):{};a={...a,...r};for(const u in a){const h=RD(a[u]);pL(n,u,h)}}function gL(n,e,t){var r,o;const a=Object.keys(e).filter(h=>!n.hasValue(h)),u=a.length;if(u)for(let h=0;h<u;h++){const f=a[h],m=e[f];let w=null;Array.isArray(m)&&(w=m[0]),w===null&&(w=(o=(r=t[f])!==null&&r!==void 0?r:n.readValue(f))!==null&&o!==void 0?o:e[f]),w!=null&&(typeof w=="string"&&(wI(w)||vI(w))?w=parseFloat(w):!fL(w)&&Zi.test(m)&&(w=yI(f,m)),n.addValue(f,wa(w,{owner:n})),t[f]===void 0&&(t[f]=w),w!==null&&n.setBaseTarget(f,w))}}function yL(n,e){return e?(e[n]||e.default||e).from:void 0}function vL(n,e,t){const r={};for(const o in n){const a=yL(o,e);if(a!==void 0)r[o]=a;else{const u=t.getValue(o);u&&(r[o]=u.get())}}return r}function wL({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function _L(n,e){const t=n.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}else return t!==e}function EI(n,e,{delay:t=0,transitionOverride:r,type:o}={}){let{transition:a=n.getDefaultTransition(),transitionEnd:u,...h}=n.makeTargetAnimatable(e);const f=n.getValue("willChange");r&&(a=r);const m=[],w=o&&n.animationState&&n.animationState.getState()[o];for(const _ in h){const E=n.getValue(_),S=h[_];if(!E||S===void 0||w&&wL(w,_))continue;const D={delay:t,elapsed:0,...vg(a||{},_)};if(window.HandoffAppearAnimations){const z=n.getProps()[TT];if(z){const H=window.HandoffAppearAnimations(z,_,E,Ze);H!==null&&(D.elapsed=H,D.isHandoff=!0)}}let C=!D.isHandoff&&!_L(E,S);if(D.type==="spring"&&(E.getVelocity()||D.velocity)&&(C=!1),E.animation&&(C=!1),C)continue;E.start(wg(_,E,S,n.shouldReduceMotion&&io.has(_)?{type:!1}:D));const A=E.animation;Ph(f)&&(f.add(_),A.then(()=>f.remove(_))),m.push(A)}return u&&Promise.all(m).then(()=>{u&&mL(n,u)}),m}function Hp(n,e,t={}){const r=Zh(n,e,t.custom);let{transition:o=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(o=t.transitionOverride);const a=r?()=>Promise.all(EI(n,r,t)):()=>Promise.resolve(),u=n.variantChildren&&n.variantChildren.size?(f=0)=>{const{delayChildren:m=0,staggerChildren:w,staggerDirection:_}=o;return xL(n,e,m+f,w,_,t)}:()=>Promise.resolve(),{when:h}=o;if(h){const[f,m]=h==="beforeChildren"?[a,u]:[u,a];return f().then(()=>m())}else return Promise.all([a(),u(t.delay)])}function xL(n,e,t=0,r=0,o=1,a){const u=[],h=(n.variantChildren.size-1)*r,f=o===1?(m=0)=>m*r:(m=0)=>h-m*r;return Array.from(n.variantChildren).sort(EL).forEach((m,w)=>{m.notify("AnimationStart",e),u.push(Hp(m,e,{...a,delay:t+f(w)}).then(()=>m.notify("AnimationComplete",e)))}),Promise.all(u)}function EL(n,e){return n.sortNodePosition(e)}function TL(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const o=e.map(a=>Hp(n,a,t));r=Promise.all(o)}else if(typeof e=="string")r=Hp(n,e,t);else{const o=typeof e=="function"?Zh(n,e,t.custom):e;r=Promise.all(EI(n,o,t))}return r.then(()=>n.notify("AnimationComplete",e))}const IL=[...rg].reverse(),SL=rg.length;function PL(n){return e=>Promise.all(e.map(({animation:t,options:r})=>TL(n,t,r)))}function bL(n){let e=PL(n);const t=kL();let r=!0;const o=(f,m)=>{const w=Zh(n,m);if(w){const{transition:_,transitionEnd:E,...S}=w;f={...f,...S,...E}}return f};function a(f){e=f(n)}function u(f,m){const w=n.getProps(),_=n.getVariantContext(!0)||{},E=[],S=new Set;let D={},C=1/0;for(let z=0;z<SL;z++){const H=IL[z],M=t[H],Q=w[H]!==void 0?w[H]:_[H],te=tu(Q),se=H===m?M.isActive:null;se===!1&&(C=z);let R=Q===_[H]&&Q!==w[H]&&te;if(R&&r&&n.manuallyAnimateOnMount&&(R=!1),M.protectedKeys={...D},!M.isActive&&se===null||!Q&&!M.prevProp||Qh(Q)||typeof Q=="boolean")continue;let b=AL(M.prevProp,Q)||H===m&&M.isActive&&!R&&te||z>C&&te,V=!1;const F=Array.isArray(Q)?Q:[Q];let B=F.reduce(o,{});se===!1&&(B={});const{prevResolvedValues:N={}}=M,ke={...N,...B},qe=Re=>{b=!0,S.has(Re)&&(V=!0,S.delete(Re)),M.needsAnimating[Re]=!0};for(const Re in ke){const Ce=B[Re],ae=N[Re];if(D.hasOwnProperty(Re))continue;let Z=!1;Eh(Ce)&&Eh(ae)?Z=!qT(Ce,ae):Z=Ce!==ae,Z?Ce!==void 0?qe(Re):S.add(Re):Ce!==void 0&&S.has(Re)?qe(Re):M.protectedKeys[Re]=!0}M.prevProp=Q,M.prevResolvedValues=B,M.isActive&&(D={...D,...B}),r&&n.blockInitialAnimation&&(b=!1),b&&(!R||V)&&E.push(...F.map(Re=>({animation:Re,options:{type:H,...f}})))}if(S.size){const z={};S.forEach(H=>{const M=n.getBaseTarget(H);M!==void 0&&(z[H]=M)}),E.push({animation:z})}let A=!!E.length;return r&&(w.initial===!1||w.initial===w.animate)&&!n.manuallyAnimateOnMount&&(A=!1),r=!1,A?e(E):Promise.resolve()}function h(f,m,w){var _;if(t[f].isActive===m)return Promise.resolve();(_=n.variantChildren)===null||_===void 0||_.forEach(S=>{var D;return(D=S.animationState)===null||D===void 0?void 0:D.setActive(f,m)}),t[f].isActive=m;const E=u(w,f);for(const S in t)t[S].protectedKeys={};return E}return{animateChanges:u,setActive:h,setAnimateFunction:a,getState:()=>t}}function AL(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!qT(e,n):!1}function Rs(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function kL(){return{animate:Rs(!0),whileInView:Rs(),whileHover:Rs(),whileTap:Rs(),whileDrag:Rs(),whileFocus:Rs(),exit:Rs()}}class CL extends ns{constructor(e){super(e),e.animationState||(e.animationState=bL(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Qh(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let NL=0;class RL extends ns{constructor(){super(...arguments),this.id=NL++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:r}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===o)return;const a=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});t&&!e&&a.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const jL={animation:{Feature:CL},exit:{Feature:RL}},Dw=(n,e)=>Math.abs(n-e);function DL(n,e){const t=Dw(n.x,e.x),r=Dw(n.y,e.y);return Math.sqrt(t**2+r**2)}class TI{constructor(e,t,{transformPagePoint:r,contextWindow:o,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=np(this.lastMoveEventInfo,this.history),E=this.startEvent!==null,S=DL(_.offset,{x:0,y:0})>=3;if(!E&&!S)return;const{point:D}=_,{timestamp:C}=Kt;this.history.push({...D,timestamp:C});const{onStart:A,onMove:z}=this.handlers;E||(A&&A(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),z&&z(this.lastMoveEvent,_)},this.handlePointerMove=(_,E)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=tp(E,this.transformPagePoint),Ze.update(this.updatePoint,!0)},this.handlePointerUp=(_,E)=>{this.end();const{onEnd:S,onSessionEnd:D,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=np(_.type==="pointercancel"?this.lastMoveEventInfo:tp(E,this.transformPagePoint),this.history);this.startEvent&&S&&S(_,A),D&&D(_,A)},!UT(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=r,this.contextWindow=o||window;const u=Jh(e),h=tp(u,this.transformPagePoint),{point:f}=h,{timestamp:m}=Kt;this.history=[{...f,timestamp:m}];const{onSessionStart:w}=t;w&&w(e,np(h,this.history)),this.removeListeners=Hi(Jr(this.contextWindow,"pointermove",this.handlePointerMove),Jr(this.contextWindow,"pointerup",this.handlePointerUp),Jr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ii(this.updatePoint)}}function tp(n,e){return e?{point:e(n.point)}:n}function Vw(n,e){return{x:n.x-e.x,y:n.y-e.y}}function np({point:n},e){return{point:n,delta:Vw(n,II(e)),offset:Vw(n,VL(e)),velocity:LL(e,.1)}}function VL(n){return n[0]}function II(n){return n[n.length-1]}function LL(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const o=II(n);for(;t>=0&&(r=n[t],!(o.timestamp-r.timestamp>$s(e)));)t--;if(!r)return{x:0,y:0};const a=Zr(o.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const u={x:(o.x-r.x)/a,y:(o.y-r.y)/a};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function En(n){return n.max-n.min}function Gp(n,e=0,t=.01){return Math.abs(n-e)<=t}function Lw(n,e,t,r=.5){n.origin=r,n.originPoint=at(e.min,e.max,n.origin),n.scale=En(t)/En(e),(Gp(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=at(t.min,t.max,n.origin)-n.originPoint,(Gp(n.translate)||isNaN(n.translate))&&(n.translate=0)}function Ul(n,e,t,r){Lw(n.x,e.x,t.x,r?r.originX:void 0),Lw(n.y,e.y,t.y,r?r.originY:void 0)}function Ow(n,e,t){n.min=t.min+e.min,n.max=n.min+En(e)}function OL(n,e,t){Ow(n.x,e.x,t.x),Ow(n.y,e.y,t.y)}function Mw(n,e,t){n.min=e.min-t.min,n.max=n.min+En(e)}function Bl(n,e,t){Mw(n.x,e.x,t.x),Mw(n.y,e.y,t.y)}function ML(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?at(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?at(t,n,r.max):Math.min(n,t)),n}function Fw(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function FL(n,{top:e,left:t,bottom:r,right:o}){return{x:Fw(n.x,t,o),y:Fw(n.y,e,r)}}function Uw(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function UL(n,e){return{x:Uw(n.x,e.x),y:Uw(n.y,e.y)}}function BL(n,e){let t=.5;const r=En(n),o=En(e);return o>r?t=ru(e.min,e.max-r,n.min):r>o&&(t=ru(n.min,n.max-o,e.min)),Ji(0,1,t)}function zL(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Kp=.35;function $L(n=Kp){return n===!1?n=0:n===!0&&(n=Kp),{x:Bw(n,"left","right"),y:Bw(n,"top","bottom")}}function Bw(n,e,t){return{min:zw(n,e),max:zw(n,t)}}function zw(n,e){return typeof n=="number"?n:n[e]||0}const $w=()=>({translate:0,scale:1,origin:0,originPoint:0}),sa=()=>({x:$w(),y:$w()}),Ww=()=>({min:0,max:0}),wt=()=>({x:Ww(),y:Ww()});function Dn(n){return[n("x"),n("y")]}function SI({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function WL({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function qL(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function rp(n){return n===void 0||n===1}function Qp({scale:n,scaleX:e,scaleY:t}){return!rp(n)||!rp(e)||!rp(t)}function Ds(n){return Qp(n)||PI(n)||n.z||n.rotate||n.rotateX||n.rotateY}function PI(n){return qw(n.x)||qw(n.y)}function qw(n){return n&&n!=="0%"}function bh(n,e,t){const r=n-t,o=e*r;return t+o}function Hw(n,e,t,r,o){return o!==void 0&&(n=bh(n,o,r)),bh(n,t,r)+e}function Yp(n,e=0,t=1,r,o){n.min=Hw(n.min,e,t,r,o),n.max=Hw(n.max,e,t,r,o)}function bI(n,{x:e,y:t}){Yp(n.x,e.translate,e.scale,e.originPoint),Yp(n.y,t.translate,t.scale,t.originPoint)}function HL(n,e,t,r=!1){const o=t.length;if(!o)return;e.x=e.y=1;let a,u;for(let h=0;h<o;h++){a=t[h],u=a.projectionDelta;const f=a.instance;f&&f.style&&f.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&oa(n,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,bI(n,u)),r&&Ds(a.latestValues)&&oa(n,a.latestValues))}e.x=Gw(e.x),e.y=Gw(e.y)}function Gw(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function Di(n,e){n.min=n.min+e,n.max=n.max+e}function Kw(n,e,[t,r,o]){const a=e[o]!==void 0?e[o]:.5,u=at(n.min,n.max,a);Yp(n,e[t],e[r],u,e.scale)}const GL=["x","scaleX","originX"],KL=["y","scaleY","originY"];function oa(n,e){Kw(n.x,e,GL),Kw(n.y,e,KL)}function AI(n,e){return SI(qL(n.getBoundingClientRect(),e))}function QL(n,e,t){const r=AI(n,t),{scroll:o}=e;return o&&(Di(r.x,o.offset.x),Di(r.y,o.offset.y)),r}const kI=({current:n})=>n?n.ownerDocument.defaultView:null,YL=new WeakMap;class XL{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=wt(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const o=w=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Jh(w,"page").point)},a=(w,_)=>{const{drag:E,dragPropagation:S,onDragStart:D}=this.getProps();if(E&&!S&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=zT(E),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Dn(A=>{let z=this.getAxisMotionValue(A).get()||0;if(Ir.test(z)){const{projection:H}=this.visualElement;if(H&&H.layout){const M=H.layout.layoutBox[A];M&&(z=En(M)*(parseFloat(z)/100))}}this.originPoint[A]=z}),D&&Ze.update(()=>D(w,_),!1,!0);const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},u=(w,_)=>{const{dragPropagation:E,dragDirectionLock:S,onDirectionLock:D,onDrag:C}=this.getProps();if(!E&&!this.openGlobalLock)return;const{offset:A}=_;if(S&&this.currentDirection===null){this.currentDirection=JL(A),this.currentDirection!==null&&D&&D(this.currentDirection);return}this.updateAxis("x",_.point,A),this.updateAxis("y",_.point,A),this.visualElement.render(),C&&C(w,_)},h=(w,_)=>this.stop(w,_),f=()=>Dn(w=>{var _;return this.getAnimationState(w)==="paused"&&((_=this.getAxisMotionValue(w).animation)===null||_===void 0?void 0:_.play())}),{dragSnapToOrigin:m}=this.getProps();this.panSession=new TI(e,{onSessionStart:o,onStart:a,onMove:u,onSessionEnd:h,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,contextWindow:kI(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:o}=t;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Ze.update(()=>a(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:o}=this.getProps();if(!r||!Wc(e,o,this.currentDirection))return;const a=this.getAxisMotionValue(e);let u=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(u=ML(u,this.constraints[e],this.elastic[e])),a.set(u)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;t&&ra(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&o?this.constraints=FL(o.layoutBox,t):this.constraints=!1,this.elastic=$L(r),a!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&Dn(u=>{this.getAxisMotionValue(u)&&(this.constraints[u]=zL(o.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!ra(e))return!1;const r=e.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const a=QL(r,o.root,this.visualElement.getTransformPagePoint());let u=UL(o.layout.layoutBox,a);if(t){const h=t(WL(u));this.hasMutatedConstraints=!!h,h&&(u=SI(h))}return u}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:o,dragTransition:a,dragSnapToOrigin:u,onDragTransitionEnd:h}=this.getProps(),f=this.constraints||{},m=Dn(w=>{if(!Wc(w,t,this.currentDirection))return;let _=f&&f[w]||{};u&&(_={min:0,max:0});const E=o?200:1e6,S=o?40:1e7,D={type:"inertia",velocity:r?e[w]:0,bounceStiffness:E,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...a,..._};return this.startAxisValueAnimation(w,D)});return Promise.all(m).then(h)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return r.start(wg(e,r,0,t))}stopAnimation(){Dn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Dn(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),o=r[t];return o||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Dn(t=>{const{drag:r}=this.getProps();if(!Wc(t,r,this.currentDirection))return;const{projection:o}=this.visualElement,a=this.getAxisMotionValue(t);if(o&&o.layout){const{min:u,max:h}=o.layout.layoutBox[t];a.set(e[t]-at(u,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!ra(t)||!r||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};Dn(u=>{const h=this.getAxisMotionValue(u);if(h){const f=h.get();o[u]=BL({min:f,max:f},this.constraints[u])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Dn(u=>{if(!Wc(u,e,null))return;const h=this.getAxisMotionValue(u),{min:f,max:m}=this.constraints[u];h.set(at(f,m,o[u]))})}addListeners(){if(!this.visualElement.current)return;YL.set(this.visualElement,this);const e=this.visualElement.current,t=Jr(e,"pointerdown",f=>{const{drag:m,dragListener:w=!0}=this.getProps();m&&w&&this.start(f)}),r=()=>{const{dragConstraints:f}=this.getProps();ra(f)&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,a=o.addEventListener("measure",r);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),r();const u=Yr(window,"resize",()=>this.scalePositionWithinConstraints()),h=o.addEventListener("didUpdate",({delta:f,hasLayoutChanged:m})=>{this.isDragging&&m&&(Dn(w=>{const _=this.getAxisMotionValue(w);_&&(this.originPoint[w]+=f[w].translate,_.set(_.get()+f[w].translate))}),this.visualElement.render())});return()=>{u(),t(),a(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:o=!1,dragConstraints:a=!1,dragElastic:u=Kp,dragMomentum:h=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:o,dragConstraints:a,dragElastic:u,dragMomentum:h}}}function Wc(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function JL(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class ZL extends ns{constructor(e){super(e),this.removeGroupControls=pt,this.removeListeners=pt,this.controls=new XL(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||pt}unmount(){this.removeGroupControls(),this.removeListeners()}}const Qw=n=>(e,t)=>{n&&Ze.update(()=>n(e,t))};class eO extends ns{constructor(){super(...arguments),this.removePointerDownListener=pt}onPointerDown(e){this.session=new TI(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:kI(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:o}=this.node.getProps();return{onSessionStart:Qw(e),onStart:Qw(t),onMove:r,onEnd:(a,u)=>{delete this.session,o&&Ze.update(()=>o(a,u))}}}mount(){this.removePointerDownListener=Jr(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function tO(){const n=j.useContext(Gh);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:r}=n,o=j.useId();return j.useEffect(()=>r(o),[]),!e&&t?[!1,()=>t&&t(o)]:[!0]}const eh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Yw(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Sl={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Te.test(n))n=parseFloat(n);else return n;const t=Yw(n,e.target.x),r=Yw(n,e.target.y);return`${t}% ${r}%`}},nO={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,o=Zi.parse(n);if(o.length>5)return r;const a=Zi.createTransformer(n),u=typeof o[0]!="number"?1:0,h=t.x.scale*e.x,f=t.y.scale*e.y;o[0+u]/=h,o[1+u]/=f;const m=at(h,f,.5);return typeof o[2+u]=="number"&&(o[2+u]/=m),typeof o[3+u]=="number"&&(o[3+u]/=m),a(o)}};class rO extends em.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:o}=this.props,{projection:a}=e;cD(iO),a&&(t.group&&t.group.add(a),r&&r.register&&o&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),eh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:o,isPresent:a}=this.props,u=r.projection;return u&&(u.isPresent=a,o||e.layoutDependency!==t||t===void 0?u.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?u.promote():u.relegate()||Ze.postRender(()=>{const h=u.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:o}=e;o&&(o.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(o),r&&r.deregister&&r.deregister(o))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function CI(n){const[e,t]=tO(),r=j.useContext(sg);return em.createElement(rO,{...n,layoutGroup:r,switchLayoutGroup:j.useContext(ST),isPresent:e,safeToRemove:t})}const iO={borderRadius:{...Sl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Sl,borderTopRightRadius:Sl,borderBottomLeftRadius:Sl,borderBottomRightRadius:Sl,boxShadow:nO},NI=["TopLeft","TopRight","BottomLeft","BottomRight"],sO=NI.length,Xw=n=>typeof n=="string"?parseFloat(n):n,Jw=n=>typeof n=="number"||Te.test(n);function oO(n,e,t,r,o,a){o?(n.opacity=at(0,t.opacity!==void 0?t.opacity:1,aO(r)),n.opacityExit=at(e.opacity!==void 0?e.opacity:1,0,lO(r))):a&&(n.opacity=at(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let u=0;u<sO;u++){const h=`border${NI[u]}Radius`;let f=Zw(e,h),m=Zw(t,h);if(f===void 0&&m===void 0)continue;f||(f=0),m||(m=0),f===0||m===0||Jw(f)===Jw(m)?(n[h]=Math.max(at(Xw(f),Xw(m),r),0),(Ir.test(m)||Ir.test(f))&&(n[h]+="%")):n[h]=m}(e.rotate||t.rotate)&&(n.rotate=at(e.rotate||0,t.rotate||0,r))}function Zw(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const aO=RI(0,.5,eI),lO=RI(.5,.95,pt);function RI(n,e,t){return r=>r<n?0:r>e?1:t(ru(n,e,r))}function e_(n,e){n.min=e.min,n.max=e.max}function jn(n,e){e_(n.x,e.x),e_(n.y,e.y)}function t_(n,e,t,r,o){return n-=e,n=bh(n,1/t,r),o!==void 0&&(n=bh(n,1/o,r)),n}function uO(n,e=0,t=1,r=.5,o,a=n,u=n){if(Ir.test(e)&&(e=parseFloat(e),e=at(u.min,u.max,e/100)-u.min),typeof e!="number")return;let h=at(a.min,a.max,r);n===a&&(h-=e),n.min=t_(n.min,e,t,h,o),n.max=t_(n.max,e,t,h,o)}function n_(n,e,[t,r,o],a,u){uO(n,e[t],e[r],e[o],e.scale,a,u)}const cO=["x","scaleX","originX"],hO=["y","scaleY","originY"];function r_(n,e,t,r){n_(n.x,e,cO,t?t.x:void 0,r?r.x:void 0),n_(n.y,e,hO,t?t.y:void 0,r?r.y:void 0)}function i_(n){return n.translate===0&&n.scale===1}function jI(n){return i_(n.x)&&i_(n.y)}function dO(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function DI(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function s_(n){return En(n.x)/En(n.y)}class fO{constructor(){this.members=[]}add(e){_g(this.members,e),e.scheduleRender()}remove(e){if(xg(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(o=>e===o);if(t===0)return!1;let r;for(let o=t;o>=0;o--){const a=this.members[o];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:o}=e.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function o_(n,e,t){let r="";const o=n.x.translate/e.x,a=n.y.translate/e.y;if((o||a)&&(r=`translate3d(${o}px, ${a}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:f,rotateX:m,rotateY:w}=t;f&&(r+=`rotate(${f}deg) `),m&&(r+=`rotateX(${m}deg) `),w&&(r+=`rotateY(${w}deg) `)}const u=n.x.scale*e.x,h=n.y.scale*e.y;return(u!==1||h!==1)&&(r+=`scale(${u}, ${h})`),r||"none"}const pO=(n,e)=>n.depth-e.depth;class mO{constructor(){this.children=[],this.isDirty=!1}add(e){_g(this.children,e),this.isDirty=!0}remove(e){xg(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(pO),this.isDirty=!1,this.children.forEach(e)}}function gO(n,e){const t=performance.now(),r=({timestamp:o})=>{const a=o-t;a>=e&&(ii(r),n(a-e))};return Ze.read(r,!0),()=>ii(r)}function yO(n){window.MotionDebug&&window.MotionDebug.record(n)}function vO(n){return n instanceof SVGElement&&n.tagName!=="svg"}function wO(n,e,t){const r=fn(n)?n:wa(n);return r.start(wg("",r,e,t)),r.animation}const a_=["","X","Y","Z"],_O={visibility:"hidden"},l_=1e3;let xO=0;const Vs={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function VI({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:o}){return class{constructor(u={},h=e?.()){this.id=xO++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Vs.totalNodes=Vs.resolvedTargetDeltas=Vs.recalculatedProjection=0,this.nodes.forEach(IO),this.nodes.forEach(kO),this.nodes.forEach(CO),this.nodes.forEach(SO),yO(Vs)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new mO)}addEventListener(u,h){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new Eg),this.eventHandlers.get(u).add(h)}notifyListeners(u,...h){const f=this.eventHandlers.get(u);f&&f.notify(...h)}hasListeners(u){return this.eventHandlers.has(u)}mount(u,h=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=vO(u),this.instance=u;const{layoutId:f,layout:m,visualElement:w}=this.options;if(w&&!w.current&&w.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),h&&(m||f)&&(this.isLayoutDirty=!0),n){let _;const E=()=>this.root.updateBlockedByResize=!1;n(u,()=>{this.root.updateBlockedByResize=!0,_&&_(),_=gO(E,250),eh.hasAnimatedSinceResize&&(eh.hasAnimatedSinceResize=!1,this.nodes.forEach(c_))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&w&&(f||m)&&this.addEventListener("didUpdate",({delta:_,hasLayoutChanged:E,hasRelativeTargetChanged:S,layout:D})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const C=this.options.transition||w.getDefaultTransition()||VO,{onLayoutAnimationStart:A,onLayoutAnimationComplete:z}=w.getProps(),H=!this.targetLayout||!DI(this.targetLayout,D)||S,M=!E&&S;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||M||E&&(H||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(_,M);const Q={...vg(C,"layout"),onPlay:A,onComplete:z};(w.shouldReduceMotion||this.options.layoutRoot)&&(Q.delay=0,Q.type=!1),this.startAnimation(Q)}else E||c_(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=D})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ii(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(NO),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let w=0;w<this.path.length;w++){const _=this.path[w];_.shouldResetTransform=!0,_.updateScroll("snapshot"),_.options.layoutRoot&&_.willUpdate(!1)}const{layoutId:h,layout:f}=this.options;if(h===void 0&&!f)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(u_);return}this.isUpdating||this.nodes.forEach(bO),this.isUpdating=!1,this.nodes.forEach(AO),this.nodes.forEach(EO),this.nodes.forEach(TO),this.clearAllSnapshots();const h=performance.now();Kt.delta=Ji(0,1e3/60,h-Kt.timestamp),Kt.timestamp=h,Kt.isProcessing=!0,Gf.update.process(Kt),Gf.preRender.process(Kt),Gf.render.process(Kt),Kt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(PO),this.sharedNodes.forEach(RO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ze.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ze.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=wt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let h=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(h=!1),h&&(this.scroll={animationId:this.root.animationId,phase:u,isRoot:r(this.instance),offset:t(this.instance)})}resetTransform(){if(!o)return;const u=this.isLayoutDirty||this.shouldResetTransform,h=this.projectionDelta&&!jI(this.projectionDelta),f=this.getTransformTemplate(),m=f?f(this.latestValues,""):void 0,w=m!==this.prevTransformTemplateValue;u&&(h||Ds(this.latestValues)||w)&&(o(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const h=this.measurePageBox();let f=this.removeElementScroll(h);return u&&(f=this.removeTransform(f)),LO(f),{animationId:this.root.animationId,measuredBox:h,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:u}=this.options;if(!u)return wt();const h=u.measureViewportBox(),{scroll:f}=this.root;return f&&(Di(h.x,f.offset.x),Di(h.y,f.offset.y)),h}removeElementScroll(u){const h=wt();jn(h,u);for(let f=0;f<this.path.length;f++){const m=this.path[f],{scroll:w,options:_}=m;if(m!==this.root&&w&&_.layoutScroll){if(w.isRoot){jn(h,u);const{scroll:E}=this.root;E&&(Di(h.x,-E.offset.x),Di(h.y,-E.offset.y))}Di(h.x,w.offset.x),Di(h.y,w.offset.y)}}return h}applyTransform(u,h=!1){const f=wt();jn(f,u);for(let m=0;m<this.path.length;m++){const w=this.path[m];!h&&w.options.layoutScroll&&w.scroll&&w!==w.root&&oa(f,{x:-w.scroll.offset.x,y:-w.scroll.offset.y}),Ds(w.latestValues)&&oa(f,w.latestValues)}return Ds(this.latestValues)&&oa(f,this.latestValues),f}removeTransform(u){const h=wt();jn(h,u);for(let f=0;f<this.path.length;f++){const m=this.path[f];if(!m.instance||!Ds(m.latestValues))continue;Qp(m.latestValues)&&m.updateSnapshot();const w=wt(),_=m.measurePageBox();jn(w,_),r_(h,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,w)}return Ds(this.latestValues)&&r_(h,this.latestValues),h}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Kt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var h;const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const m=!!this.resumingFrom||this!==f;if(!(u||m&&this.isSharedProjectionDirty||this.isProjectionDirty||!((h=this.parent)===null||h===void 0)&&h.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:_,layoutId:E}=this.options;if(!(!this.layout||!(_||E))){if(this.resolvedRelativeTargetAt=Kt.timestamp,!this.targetDelta&&!this.relativeTarget){const S=this.getClosestProjectingParent();S&&S.layout&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wt(),this.relativeTargetOrigin=wt(),Bl(this.relativeTargetOrigin,this.layout.layoutBox,S.layout.layoutBox),jn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=wt(),this.targetWithTransforms=wt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),OL(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):jn(this.target,this.layout.layoutBox),bI(this.target,this.targetDelta)):jn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const S=this.getClosestProjectingParent();S&&!!S.resumingFrom==!!this.resumingFrom&&!S.options.layoutScroll&&S.target&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wt(),this.relativeTargetOrigin=wt(),Bl(this.relativeTargetOrigin,this.target,S.target),jn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Vs.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Qp(this.parent.latestValues)||PI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var u;const h=this.getLead(),f=!!this.resumingFrom||this!==h;let m=!0;if((this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty)&&(m=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(m=!1),this.resolvedRelativeTargetAt===Kt.timestamp&&(m=!1),m)return;const{layout:w,layoutId:_}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(w||_))return;jn(this.layoutCorrected,this.layout.layoutBox);const E=this.treeScale.x,S=this.treeScale.y;HL(this.layoutCorrected,this.treeScale,this.path,f),h.layout&&!h.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(h.target=h.layout.layoutBox);const{target:D}=h;if(!D){this.projectionTransform&&(this.projectionDelta=sa(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=sa(),this.projectionDeltaWithTransform=sa());const C=this.projectionTransform;Ul(this.projectionDelta,this.layoutCorrected,D,this.latestValues),this.projectionTransform=o_(this.projectionDelta,this.treeScale),(this.projectionTransform!==C||this.treeScale.x!==E||this.treeScale.y!==S)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",D)),Vs.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),u){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(u,h=!1){const f=this.snapshot,m=f?f.latestValues:{},w={...this.latestValues},_=sa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const E=wt(),S=f?f.source:void 0,D=this.layout?this.layout.source:void 0,C=S!==D,A=this.getStack(),z=!A||A.members.length<=1,H=!!(C&&!z&&this.options.crossfade===!0&&!this.path.some(DO));this.animationProgress=0;let M;this.mixTargetDelta=Q=>{const te=Q/1e3;h_(_.x,u.x,te),h_(_.y,u.y,te),this.setTargetDelta(_),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Bl(E,this.layout.layoutBox,this.relativeParent.layout.layoutBox),jO(this.relativeTarget,this.relativeTargetOrigin,E,te),M&&dO(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=wt()),jn(M,this.relativeTarget)),C&&(this.animationValues=w,oO(w,m,this.latestValues,te,H,z)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=te},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ii(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ze.update(()=>{eh.hasAnimatedSinceResize=!0,this.currentAnimation=wO(0,l_,{...u,onUpdate:h=>{this.mixTargetDelta(h),u.onUpdate&&u.onUpdate(h)},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(l_),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:h,target:f,layout:m,latestValues:w}=u;if(!(!h||!f||!m)){if(this!==u&&this.layout&&m&&LI(this.options.animationType,this.layout.layoutBox,m.layoutBox)){f=this.target||wt();const _=En(this.layout.layoutBox.x);f.x.min=u.target.x.min,f.x.max=f.x.min+_;const E=En(this.layout.layoutBox.y);f.y.min=u.target.y.min,f.y.max=f.y.min+E}jn(h,f),oa(h,w),Ul(this.projectionDeltaWithTransform,this.layoutCorrected,h,w)}}registerSharedNode(u,h){this.sharedNodes.has(u)||this.sharedNodes.set(u,new fO),this.sharedNodes.get(u).add(h);const m=h.options.initialPromotionConfig;h.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(h):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var u;const{layoutId:h}=this.options;return h?((u=this.getStack())===null||u===void 0?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:h}=this.options;return h?(u=this.getStack())===null||u===void 0?void 0:u.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:h,preserveFollowOpacity:f}={}){const m=this.getStack();m&&m.promote(this,f),u&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetRotation(){const{visualElement:u}=this.options;if(!u)return;let h=!1;const{latestValues:f}=u;if((f.rotate||f.rotateX||f.rotateY||f.rotateZ)&&(h=!0),!h)return;const m={};for(let w=0;w<a_.length;w++){const _="rotate"+a_[w];f[_]&&(m[_]=f[_],u.setStaticValue(_,0))}u.render();for(const w in m)u.setStaticValue(w,m[w]);u.scheduleRender()}getProjectionStyles(u){var h,f;if(!this.instance||this.isSVG)return;if(!this.isVisible)return _O;const m={visibility:""},w=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,m.opacity="",m.pointerEvents=Zc(u?.pointerEvents)||"",m.transform=w?w(this.latestValues,""):"none",m;const _=this.getLead();if(!this.projectionDelta||!this.layout||!_.target){const C={};return this.options.layoutId&&(C.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,C.pointerEvents=Zc(u?.pointerEvents)||""),this.hasProjected&&!Ds(this.latestValues)&&(C.transform=w?w({},""):"none",this.hasProjected=!1),C}const E=_.animationValues||_.latestValues;this.applyTransformsToTarget(),m.transform=o_(this.projectionDeltaWithTransform,this.treeScale,E),w&&(m.transform=w(E,m.transform));const{x:S,y:D}=this.projectionDelta;m.transformOrigin=`${S.origin*100}% ${D.origin*100}% 0`,_.animationValues?m.opacity=_===this?(f=(h=E.opacity)!==null&&h!==void 0?h:this.latestValues.opacity)!==null&&f!==void 0?f:1:this.preserveOpacity?this.latestValues.opacity:E.opacityExit:m.opacity=_===this?E.opacity!==void 0?E.opacity:"":E.opacityExit!==void 0?E.opacityExit:0;for(const C in _h){if(E[C]===void 0)continue;const{correct:A,applyTo:z}=_h[C],H=m.transform==="none"?E[C]:A(E[C],_);if(z){const M=z.length;for(let Q=0;Q<M;Q++)m[z[Q]]=H}else m[C]=H}return this.options.layoutId&&(m.pointerEvents=_===this?Zc(u?.pointerEvents)||"":"none"),m}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var h;return(h=u.currentAnimation)===null||h===void 0?void 0:h.stop()}),this.root.nodes.forEach(u_),this.root.sharedNodes.clear()}}}function EO(n){n.updateLayout()}function TO(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:o}=n.layout,{animationType:a}=n.options,u=t.source!==n.layout.source;a==="size"?Dn(_=>{const E=u?t.measuredBox[_]:t.layoutBox[_],S=En(E);E.min=r[_].min,E.max=E.min+S}):LI(a,t.layoutBox,r)&&Dn(_=>{const E=u?t.measuredBox[_]:t.layoutBox[_],S=En(r[_]);E.max=E.min+S,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[_].max=n.relativeTarget[_].min+S)});const h=sa();Ul(h,r,t.layoutBox);const f=sa();u?Ul(f,n.applyTransform(o,!0),t.measuredBox):Ul(f,r,t.layoutBox);const m=!jI(h);let w=!1;if(!n.resumeFrom){const _=n.getClosestProjectingParent();if(_&&!_.resumeFrom){const{snapshot:E,layout:S}=_;if(E&&S){const D=wt();Bl(D,t.layoutBox,E.layoutBox);const C=wt();Bl(C,r,S.layoutBox),DI(D,C)||(w=!0),_.options.layoutRoot&&(n.relativeTarget=C,n.relativeTargetOrigin=D,n.relativeParent=_)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:f,layoutDelta:h,hasLayoutChanged:m,hasRelativeTargetChanged:w})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function IO(n){Vs.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function SO(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function PO(n){n.clearSnapshot()}function u_(n){n.clearMeasurements()}function bO(n){n.isLayoutDirty=!1}function AO(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function c_(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function kO(n){n.resolveTargetDelta()}function CO(n){n.calcProjection()}function NO(n){n.resetRotation()}function RO(n){n.removeLeadSnapshot()}function h_(n,e,t){n.translate=at(e.translate,0,t),n.scale=at(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function d_(n,e,t,r){n.min=at(e.min,t.min,r),n.max=at(e.max,t.max,r)}function jO(n,e,t,r){d_(n.x,e.x,t.x,r),d_(n.y,e.y,t.y,r)}function DO(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const VO={duration:.45,ease:[.4,0,.1,1]},f_=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),p_=f_("applewebkit/")&&!f_("chrome/")?Math.round:pt;function m_(n){n.min=p_(n.min),n.max=p_(n.max)}function LO(n){m_(n.x),m_(n.y)}function LI(n,e,t){return n==="position"||n==="preserve-aspect"&&!Gp(s_(e),s_(t),.2)}const OO=VI({attachResizeListener:(n,e)=>Yr(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ip={current:void 0},OI=VI({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!ip.current){const n=new OO({});n.mount(window),n.setOptions({layoutScroll:!0}),ip.current=n}return ip.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),MO={pan:{Feature:eO},drag:{Feature:ZL,ProjectionNode:OI,MeasureLayout:CI}},FO=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function UO(n){const e=FO.exec(n);if(!e)return[,];const[,t,r]=e;return[t,r]}function Xp(n,e,t=1){const[r,o]=UO(n);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const u=a.trim();return wI(u)?parseFloat(u):u}else return Up(o)?Xp(o,e,t+1):o}function BO(n,{...e},t){const r=n.current;if(!(r instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(o=>{const a=o.get();if(!Up(a))return;const u=Xp(a,r);u&&o.set(u)});for(const o in e){const a=e[o];if(!Up(a))continue;const u=Xp(a,r);u&&(e[o]=u,t||(t={}),t[o]===void 0&&(t[o]=a))}return{target:e,transitionEnd:t}}const zO=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),MI=n=>zO.has(n),$O=n=>Object.keys(n).some(MI),g_=n=>n===so||n===Te,y_=(n,e)=>parseFloat(n.split(", ")[e]),v_=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const o=r.match(/^matrix3d\((.+)\)$/);if(o)return y_(o[1],e);{const a=r.match(/^matrix\((.+)\)$/);return a?y_(a[1],n):0}},WO=new Set(["x","y","z"]),qO=gu.filter(n=>!WO.has(n));function HO(n){const e=[];return qO.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const _a={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:v_(4,13),y:v_(5,14)};_a.translateX=_a.x;_a.translateY=_a.y;const GO=(n,e,t)=>{const r=e.measureViewportBox(),o=e.current,a=getComputedStyle(o),{display:u}=a,h={};u==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(m=>{h[m]=_a[m](r,a)}),e.render();const f=e.measureViewportBox();return t.forEach(m=>{const w=e.getValue(m);w&&w.jump(h[m]),n[m]=_a[m](f,a)}),n},KO=(n,e,t={},r={})=>{e={...e},r={...r};const o=Object.keys(e).filter(MI);let a=[],u=!1;const h=[];if(o.forEach(f=>{const m=n.getValue(f);if(!n.hasValue(f))return;let w=t[f],_=Il(w);const E=e[f];let S;if(Eh(E)){const D=E.length,C=E[0]===null?1:0;w=E[C],_=Il(w);for(let A=C;A<D&&E[A]!==null;A++)S?fg(Il(E[A])===S):S=Il(E[A])}else S=Il(E);if(_!==S)if(g_(_)&&g_(S)){const D=m.get();typeof D=="string"&&m.set(parseFloat(D)),typeof E=="string"?e[f]=parseFloat(E):Array.isArray(E)&&S===Te&&(e[f]=E.map(parseFloat))}else _?.transform&&S?.transform&&(w===0||E===0)?w===0?m.set(S.transform(w)):e[f]=_.transform(E):(u||(a=HO(n),u=!0),h.push(f),r[f]=r[f]!==void 0?r[f]:e[f],m.jump(E))}),h.length){const f=h.indexOf("height")>=0?window.pageYOffset:null,m=GO(e,n,h);return a.length&&a.forEach(([w,_])=>{n.getValue(w).set(_)}),n.render(),Kh&&f!==null&&window.scrollTo({top:f}),{target:m,transitionEnd:r}}else return{target:e,transitionEnd:r}};function QO(n,e,t,r){return $O(e)?KO(n,e,t,r):{target:e,transitionEnd:r}}const YO=(n,e,t,r)=>{const o=BO(n,e,r);return e=o.target,r=o.transitionEnd,QO(n,e,t,r)},Jp={current:null},FI={current:!1};function XO(){if(FI.current=!0,!!Kh)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Jp.current=n.matches;n.addListener(e),e()}else Jp.current=!1}function JO(n,e,t){const{willChange:r}=e;for(const o in e){const a=e[o],u=t[o];if(fn(a))n.addValue(o,a),Ph(r)&&r.add(o);else if(fn(u))n.addValue(o,wa(a,{owner:n})),Ph(r)&&r.remove(o);else if(u!==a)if(n.hasValue(o)){const h=n.getValue(o);!h.hasAnimated&&h.set(a)}else{const h=n.getStaticValue(o);n.addValue(o,wa(h!==void 0?h:a,{owner:n}))}}for(const o in t)e[o]===void 0&&n.removeValue(o);return e}const w_=new WeakMap,UI=Object.keys(nu),ZO=UI.length,__=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],e4=ig.length;class t4{constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:o,visualState:a},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Ze.render(this.render,!1,!0);const{latestValues:h,renderState:f}=a;this.latestValues=h,this.baseTarget={...h},this.initialValues=t.initial?{...h}:{},this.renderState=f,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=o,this.options=u,this.isControllingVariants=Yh(t),this.isVariantNode=IT(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...w}=this.scrapeMotionValuesFromProps(t,{});for(const _ in w){const E=w[_];h[_]!==void 0&&fn(E)&&(E.set(h[_],!1),Ph(m)&&m.add(_))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,w_.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),FI.current||XO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Jp.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){w_.delete(this.current),this.projection&&this.projection.unmount(),ii(this.notifyUpdate),ii(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const r=io.has(e),o=t.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&Ze.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{o(),a()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},r,o,a){let u,h;for(let f=0;f<ZO;f++){const m=UI[f],{isEnabled:w,Feature:_,ProjectionNode:E,MeasureLayout:S}=nu[m];E&&(u=E),w(t)&&(!this.features[m]&&_&&(this.features[m]=new _(this)),S&&(h=S))}if((this.type==="html"||this.type==="svg")&&!this.projection&&u){this.projection=new u(this.latestValues,this.parent&&this.parent.projection);const{layoutId:f,layout:m,drag:w,dragConstraints:_,layoutScroll:E,layoutRoot:S}=t;this.projection.setOptions({layoutId:f,layout:m,alwaysMeasureLayout:!!w||_&&ra(_),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof m=="string"?m:"both",initialPromotionConfig:a,layoutScroll:E,layoutRoot:S})}return h}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):wt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<__.length;r++){const o=__[r];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const a=e["on"+o];a&&(this.propEventSubscriptions[o]=this.on(o,a))}this.prevMotionValues=JO(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const t={};for(let r=0;r<e4;r++){const o=ig[r],a=this.props[o];(tu(a)||a===!1)&&(t[o]=a)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=wa(t,{owner:this}),this.addValue(e,r)),r}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props,o=typeof r=="string"||typeof r=="object"?(t=dg(this.props,r))===null||t===void 0?void 0:t[e]:void 0;if(r&&o!==void 0)return o;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!fn(a)?a:this.initialValues[e]!==void 0&&o===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Eg),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class BI extends t4{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...r},{transformValues:o},a){let u=vL(r,e||{},this);if(o&&(t&&(t=o(t)),r&&(r=o(r)),u&&(u=o(u))),a){gL(this,r,u);const h=YO(this,r,u,t);t=h.transitionEnd,r=h.target}return{transition:e,transitionEnd:t,...r}}}function n4(n){return window.getComputedStyle(n)}class r4 extends BI{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(io.has(t)){const r=yg(t);return r&&r.default||0}else{const r=n4(e),o=(AT(t)?r.getPropertyValue(t):r[t])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:t}){return AI(e,t)}build(e,t,r,o){ag(e,t,r,o.transformTemplate)}scrapeMotionValuesFromProps(e,t){return hg(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;fn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,r,o){DT(e,t,r,o)}}class i4 extends BI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(io.has(t)){const r=yg(t);return r&&r.default||0}return t=VT.has(t)?t:ng(t),e.getAttribute(t)}measureInstanceViewportBox(){return wt()}scrapeMotionValuesFromProps(e,t){return OT(e,t)}build(e,t,r,o){ug(e,t,r,this.isSVGTag,o.transformTemplate)}renderInstance(e,t,r,o){LT(e,t,r,o)}mount(e){this.isSVGTag=cg(e.tagName),super.mount(e)}}const s4=(n,e)=>og(n)?new i4(e,{enableHardwareAcceleration:!1}):new r4(e,{enableHardwareAcceleration:!0}),o4={layout:{ProjectionNode:OI,MeasureLayout:CI}},a4={...jL,...ZD,...MO,...o4},De=lD((n,e)=>UD(n,e,a4,s4));function zI(){const n=j.useRef(!1);return tg(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function l4(){const n=zI(),[e,t]=j.useState(0),r=j.useCallback(()=>{n.current&&t(e+1)},[e]);return[j.useCallback(()=>Ze.postRender(r),[r]),e]}class u4 extends j.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function c4({children:n,isPresent:e}){const t=j.useId(),r=j.useRef(null),o=j.useRef({width:0,height:0,top:0,left:0});return j.useInsertionEffect(()=>{const{width:a,height:u,top:h,left:f}=o.current;if(e||!r.current||!a||!u)return;r.current.dataset.motionPopId=t;const m=document.createElement("style");return document.head.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${u}px !important;
            top: ${h}px !important;
            left: ${f}px !important;
          }
        `),()=>{document.head.removeChild(m)}},[e]),j.createElement(u4,{isPresent:e,childRef:r,sizeRef:o},j.cloneElement(n,{ref:r}))}const sp=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:o,presenceAffectsLayout:a,mode:u})=>{const h=MT(h4),f=j.useId(),m=j.useMemo(()=>({id:f,initial:e,isPresent:t,custom:o,onExitComplete:w=>{h.set(w,!0);for(const _ of h.values())if(!_)return;r&&r()},register:w=>(h.set(w,!1),()=>h.delete(w))}),a?void 0:[t]);return j.useMemo(()=>{h.forEach((w,_)=>h.set(_,!1))},[t]),j.useEffect(()=>{!t&&!h.size&&r&&r()},[t]),u==="popLayout"&&(n=j.createElement(c4,{isPresent:t},n)),j.createElement(Gh.Provider,{value:m},n)};function h4(){return new Map}function d4(n){return j.useEffect(()=>()=>n(),[])}const Ls=n=>n.key||"";function f4(n,e){n.forEach(t=>{const r=Ls(t);e.set(r,t)})}function p4(n){const e=[];return j.Children.forEach(n,t=>{j.isValidElement(t)&&e.push(t)}),e}const m4=({children:n,custom:e,initial:t=!0,onExitComplete:r,exitBeforeEnter:o,presenceAffectsLayout:a=!0,mode:u="sync"})=>{const h=j.useContext(sg).forceRender||l4()[0],f=zI(),m=p4(n);let w=m;const _=j.useRef(new Map).current,E=j.useRef(w),S=j.useRef(new Map).current,D=j.useRef(!0);if(tg(()=>{D.current=!1,f4(m,S),E.current=w}),d4(()=>{D.current=!0,S.clear(),_.clear()}),D.current)return j.createElement(j.Fragment,null,w.map(H=>j.createElement(sp,{key:Ls(H),isPresent:!0,initial:t?void 0:!1,presenceAffectsLayout:a,mode:u},H)));w=[...w];const C=E.current.map(Ls),A=m.map(Ls),z=C.length;for(let H=0;H<z;H++){const M=C[H];A.indexOf(M)===-1&&!_.has(M)&&_.set(M,void 0)}return u==="wait"&&_.size&&(w=[]),_.forEach((H,M)=>{if(A.indexOf(M)!==-1)return;const Q=S.get(M);if(!Q)return;const te=C.indexOf(M);let se=H;if(!se){const R=()=>{_.delete(M);const P=Array.from(S.keys()).filter(b=>!A.includes(b));if(P.forEach(b=>S.delete(b)),E.current=m.filter(b=>{const V=Ls(b);return V===M||P.includes(V)}),!_.size){if(f.current===!1)return;h(),r&&r()}};se=j.createElement(sp,{key:Ls(Q),isPresent:!1,onExitComplete:R,custom:e,presenceAffectsLayout:a,mode:u},Q),_.set(M,se)}w.splice(te,0,se)}),w=w.map(H=>{const M=H.key;return _.has(M)?H:j.createElement(sp,{key:Ls(H),isPresent:!0,presenceAffectsLayout:a,mode:u},H)}),j.createElement(j.Fragment,null,_.size?w:w.map(H=>j.cloneElement(H)))},g4=()=>{const[n,e]=j.useState(!1),[t,r]=j.useState(""),{currentUser:o,userProfile:a,logout:u}=oi(),h=Ar(),f=Js(),m=async()=>{try{await u(),h("/")}catch(_){console.error("Failed to log out:",_)}},w=_=>{_.preventDefault(),t.trim()&&h(`/search?q=${encodeURIComponent(t.trim())}`)};return p.jsxs("nav",{className:"bg-nothing-black border-b border-nothing-gray-800 sticky top-0 z-50",children:[p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[p.jsxs("div",{className:"flex justify-between items-center h-16",children:[p.jsx("div",{className:"flex-shrink-0",children:p.jsxs(Qe,{to:"/",className:"flex items-center space-x-2",children:[p.jsx("div",{className:"w-8 h-8 bg-nothing-red rounded-full flex items-center justify-center",children:p.jsx("div",{className:"w-4 h-4 bg-nothing-white rounded-full animate-glow"})}),p.jsx("span",{className:"text-xl font-bold text-nothing-white font-nothing",children:"GlyphMart"})]})}),f.pathname!=="/search"&&p.jsx("div",{className:"hidden md:block flex-1 max-w-lg mx-8",children:p.jsxs("form",{onSubmit:w,className:"relative",children:[p.jsx("input",{type:"text",value:t,onChange:_=>r(_.target.value),placeholder:"Search glyphs...",className:"w-full bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg py-2 pl-10 pr-4 text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200"}),p.jsx(Os,{className:"absolute left-3 top-2.5 h-5 w-5 text-nothing-gray-400"})]})}),p.jsx("div",{className:"hidden md:flex items-center space-x-4",children:o?p.jsxs(p.Fragment,{children:[p.jsxs(Qe,{to:"/upload",className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center space-x-2",children:[p.jsx(Yj,{className:"h-4 w-4"}),p.jsx("span",{children:"Upload Glyph"})]}),p.jsxs("div",{className:"relative group",children:[p.jsxs("button",{className:"flex items-center space-x-2 text-nothing-white hover:text-nothing-gray-300 transition-colors duration-200",children:[p.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden border border-nothing-gray-600",children:a?.profilePicture||o.photoURL?p.jsx("img",{src:a?.profilePicture||o.photoURL,alt:"Profile",className:"w-full h-full object-cover"}):p.jsx("div",{className:"w-full h-full bg-nothing-gray-700 flex items-center justify-center",children:p.jsx(zs,{className:"h-4 w-4"})})}),p.jsx("span",{className:"font-medium",children:a?.username||o.displayName})]}),p.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200",children:p.jsxs("div",{className:"py-1",children:[p.jsxs(Qe,{to:`/storefront/${a?.username||o.displayName}`,className:"block px-4 py-2 text-sm text-nothing-white hover:bg-nothing-gray-800 transition-colors duration-200 flex items-center space-x-2",children:[p.jsx(yw,{className:"h-4 w-4"}),p.jsx("span",{children:"My Storefront"})]}),p.jsxs(Qe,{to:"/liked",className:"block px-4 py-2 text-sm text-nothing-white hover:bg-nothing-gray-800 transition-colors duration-200 flex items-center space-x-2",children:[p.jsx(nr,{className:"h-4 w-4"}),p.jsx("span",{children:"Liked Posts"})]}),p.jsxs(Qe,{to:"/settings",className:"block px-4 py-2 text-sm text-nothing-white hover:bg-nothing-gray-800 transition-colors duration-200 flex items-center space-x-2",children:[p.jsx(Mp,{className:"h-4 w-4"}),p.jsx("span",{children:"Settings"})]}),p.jsxs("button",{onClick:m,className:"w-full text-left block px-4 py-2 text-sm text-nothing-white hover:bg-nothing-gray-800 transition-colors duration-200 flex items-center space-x-2",children:[p.jsx(mw,{className:"h-4 w-4"}),p.jsx("span",{children:"Logout"})]})]})})]})]}):p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsx(Qe,{to:"/login",className:"text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200",children:"Login"}),p.jsx(Qe,{to:"/signup",className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",children:"Sign Up"})]})}),p.jsx("div",{className:"md:hidden",children:p.jsx("button",{onClick:()=>e(!n),className:"text-nothing-white hover:text-nothing-gray-300 transition-colors duration-200",children:n?p.jsx(_T,{className:"h-6 w-6"}):p.jsx(Qj,{className:"h-6 w-6"})})})]}),p.jsx("div",{className:"md:hidden pb-4",children:p.jsxs("form",{onSubmit:w,className:"relative",children:[p.jsx("input",{type:"text",value:t,onChange:_=>r(_.target.value),placeholder:"Search glyphs...",className:"w-full bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg py-2 pl-10 pr-4 text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200"}),p.jsx(Os,{className:"absolute left-3 top-2.5 h-5 w-5 text-nothing-gray-400"})]})})]}),p.jsx(m4,{children:n&&p.jsx(De.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden bg-nothing-gray-900 border-t border-nothing-gray-800",children:p.jsx("div",{className:"px-4 py-4 space-y-4",children:o?p.jsxs(p.Fragment,{children:[p.jsx(Qe,{to:"/upload",className:"block bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 text-center",onClick:()=>e(!1),children:"Upload Glyph"}),p.jsxs(Qe,{to:`/storefront/${a?.username||o.displayName}`,className:"block text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200 flex items-center space-x-2",onClick:()=>e(!1),children:[p.jsx(yw,{className:"h-4 w-4"}),p.jsx("span",{children:"My Storefront"})]}),p.jsxs(Qe,{to:"/liked",className:"block text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200 flex items-center space-x-2",onClick:()=>e(!1),children:[p.jsx(nr,{className:"h-4 w-4"}),p.jsx("span",{children:"Liked Posts"})]}),p.jsxs(Qe,{to:"/settings",className:"block text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200 flex items-center space-x-2",onClick:()=>e(!1),children:[p.jsx(Mp,{className:"h-4 w-4"}),p.jsx("span",{children:"Settings"})]}),p.jsxs("button",{onClick:()=>{m(),e(!1)},className:"block w-full text-left text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200 flex items-center space-x-2",children:[p.jsx(mw,{className:"h-4 w-4"}),p.jsx("span",{children:"Logout"})]})]}):p.jsxs(p.Fragment,{children:[p.jsx(Qe,{to:"/login",className:"block text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200",onClick:()=>e(!1),children:"Login"}),p.jsx(Qe,{to:"/signup",className:"block bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 text-center",onClick:()=>e(!1),children:"Sign Up"})]})})})})]})},y4="";class v4{constructor(){this.baseURL=y4}async getAuthToken(){return na.currentUser?await na.currentUser.getIdToken():null}async request(e,t={}){const r=`${this.baseURL}/api${e}`,o=await this.getAuthToken(),a={"Content-Type":"application/json",...t.headers};o&&(a.Authorization=`Bearer ${o}`);const u={...t,headers:a};try{const h=await fetch(r,u);if(!h.ok){const f=await h.json().catch(()=>({}));throw new Error(f.error||`HTTP ${h.status}`)}return await h.json()}catch(h){throw console.error(`API request failed: ${e}`,h),h}}async getGlyphs(e={}){const t=new URLSearchParams;Object.entries(e).forEach(([a,u])=>{u!=null&&u!==""&&t.append(a,u.toString())});const r=`/get-glyphs${t.toString()?"?"+t.toString():""}`;return(await this.request(r)).glyphs}async getGlyph(e){return(await this.request(`/get-glyph/${e}`)).glyph}async uploadGlyph(e){return await this.request("/upload-glyph",{method:"POST",body:JSON.stringify(e)})}async updateGlyph(e,t){return await this.request(`/update-glyph/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteGlyph(e){return await this.request(`/delete-glyph/${e}`,{method:"DELETE"})}async uploadFile(e,t="images"){const r=new FormData;r.append("file",e),r.append("type",t);const o=await this.getAuthToken(),u=await fetch("/api/upload-file",{method:"POST",headers:{Authorization:o?`Bearer ${o}`:""},body:r});if(!u.ok){const h=await u.json();throw new Error(h.error||"Failed to upload file")}return await u.json()}async deleteFile(e,t){return await this.request("/delete-file",{method:"DELETE",body:JSON.stringify({filename:e,type:t})})}getFileUrl(e,t){return`/api/files/${e}/${t}`}async recordView(e){try{return(await this.request("/record-view",{method:"POST",body:JSON.stringify({glyphId:e})})).recorded}catch(t){return console.error("Failed to record view:",t),!1}}async recordDownload(e){try{return(await this.request("/record-download",{method:"POST",body:JSON.stringify({glyphId:e})})).recorded}catch(t){return console.error("Failed to record download:",t),!1}}async toggleLike(e){const t=await this.request("/toggle-like",{method:"POST",body:JSON.stringify({glyphId:e})});return{liked:t.liked,totalLikes:t.totalLikes}}async checkLikeStatus(e){return(await this.request(`/check-like-status?glyphId=${e}`)).liked}async getUserLikes(){return(await this.request("/get-user-likes")).glyphs}async getUser(e){return(await this.request(`/get-user/${e}`)).user}async getUserByUsername(e){return(await this.request(`/get-user-by-username/${e}`)).user}async updateUser(e){return await this.request("/update-user",{method:"POST",body:JSON.stringify(e)})}async deleteUserData(){return await this.request("/delete-user-data",{method:"DELETE"})}async healthCheck(){return await this.request("/health")}}const _t=new v4,$I=({glyph:n})=>{const e=Ar(),t=()=>{e(`/glyph/${n.id}`)},r=o=>{o.stopPropagation()};return p.jsx(De.div,{whileHover:{y:-5},className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg overflow-hidden hover:border-nothing-gray-700 transition-all duration-300",children:p.jsxs("div",{className:"cursor-pointer",onClick:t,children:[p.jsxs("div",{className:"aspect-square bg-nothing-gray-800 relative overflow-hidden",children:[n.images&&n.images.length>0?p.jsx("img",{src:n.images[0],alt:n.title,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"}):p.jsx("div",{className:"w-full h-full flex items-center justify-center",children:p.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center glyph-animation",children:p.jsx(vr,{className:"h-8 w-8 text-nothing-white"})})}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-nothing-black/80 via-transparent to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300",children:p.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:p.jsxs("div",{className:"flex items-center justify-between text-nothing-white text-sm",children:[p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Xi,{className:"h-4 w-4"}),p.jsx("span",{children:n.downloads||0})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(nr,{className:"h-4 w-4"}),p.jsx("span",{children:n.likes||0})]})]})})})]}),p.jsxs("div",{className:"p-4",children:[p.jsx("h3",{className:"text-nothing-white font-semibold text-lg mb-2 truncate",children:n.title}),p.jsx("p",{className:"text-nothing-gray-400 text-sm mb-3 line-clamp-2",children:n.description}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs(Qe,{to:`/storefront/${n.creatorUsername}`,className:"text-nothing-red hover:text-red-400 text-sm font-medium transition-colors duration-200",onClick:r,children:["@",n.creatorUsername]}),p.jsxs("div",{className:"flex items-center space-x-4 text-nothing-gray-500 text-sm",children:[p.jsxs("div",{className:"flex items-center space-x-1",children:[p.jsx(Xi,{className:"h-3 w-3"}),p.jsx("span",{children:n.downloads||0})]}),p.jsxs("div",{className:"flex items-center space-x-1",children:[p.jsx(tr,{className:"h-3 w-3"}),p.jsx("span",{children:n.views||0})]})]})]})]})]})})},w4=()=>{const[n,e]=j.useState([]),[t,r]=j.useState([]),[o,a]=j.useState(!0),[u,h]=j.useState("latest");return j.useEffect(()=>{(async()=>{try{const m=await _t.getGlyphs({sort:"latest",limit:12}),w=await _t.getGlyphs({sort:"popular",limit:12});e(m),r(w)}catch(m){console.error("Error fetching glyphs:",m)}finally{a(!1)}})()},[]),o?p.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-4 glyph-animation",children:p.jsx(vr,{className:"h-8 w-8 text-nothing-white"})}),p.jsx("p",{className:"text-nothing-gray-400",children:"Loading latest glyphs..."})]})}):p.jsxs("div",{className:"min-h-screen bg-nothing-black",children:[p.jsxs("section",{className:"relative py-20 px-4 sm:px-6 lg:px-8",children:[p.jsx("div",{className:"max-w-7xl mx-auto text-center",children:p.jsxs(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:[p.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-nothing-white mb-6 font-nothing",children:["Glyph",p.jsx("span",{className:"text-nothing-red",children:"Mart"})]}),p.jsx("p",{className:"text-xl md:text-2xl text-nothing-gray-300 mb-8 max-w-3xl mx-auto",children:"Discover, share, and download custom Nothing Phone(3) glyphs created by the community"}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[p.jsx(Qe,{to:"/browse",className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-8 py-3 rounded-lg font-semibold text-lg transition-colors duration-200",children:"Browse Glyphs"}),p.jsx(Qe,{to:"/upload",className:"border border-nothing-gray-700 hover:border-nothing-gray-600 text-nothing-white px-8 py-3 rounded-lg font-semibold text-lg transition-colors duration-200",children:"Upload Your Glyph"})]})]})}),p.jsx("div",{className:"absolute top-1/2 left-1/4 transform -translate-y-1/2 opacity-20",children:p.jsx("div",{className:"w-20 h-20 bg-nothing-red rounded-full flex items-center justify-center animate-float",children:p.jsx(vr,{className:"h-10 w-10 text-nothing-white"})})}),p.jsx("div",{className:"absolute top-1/3 right-1/4 transform -translate-y-1/2 opacity-10",children:p.jsx("div",{className:"w-16 h-16 bg-nothing-white rounded-full flex items-center justify-center animate-float",style:{animationDelay:"1s"},children:p.jsx(vr,{className:"h-8 w-8 text-nothing-black"})})})]}),p.jsx("section",{className:"px-4 sm:px-6 lg:px-8 mb-8",children:p.jsx("div",{className:"max-w-7xl mx-auto",children:p.jsxs("div",{className:"flex space-x-4 border-b border-nothing-gray-800",children:[p.jsxs("button",{onClick:()=>h("latest"),className:`flex items-center space-x-2 px-4 py-3 font-medium border-b-2 transition-colors duration-200 ${u==="latest"?"border-nothing-red text-nothing-red":"border-transparent text-nothing-gray-400 hover:text-nothing-white"}`,children:[p.jsx($j,{className:"h-4 w-4"}),p.jsx("span",{children:"Latest"})]}),p.jsxs("button",{onClick:()=>h("popular"),className:`flex items-center space-x-2 px-4 py-3 font-medium border-b-2 transition-colors duration-200 ${u==="popular"?"border-nothing-red text-nothing-red":"border-transparent text-nothing-gray-400 hover:text-nothing-white"}`,children:[p.jsx(Jj,{className:"h-4 w-4"}),p.jsx("span",{children:"Popular"})]})]})})}),p.jsx("section",{className:"px-4 sm:px-6 lg:px-8 pb-20",children:p.jsxs("div",{className:"max-w-7xl mx-auto",children:[p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:(u==="latest"?n:t).map((f,m)=>p.jsx(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:m*.1},children:p.jsx($I,{glyph:f})},f.id))}),(u==="latest"?n:t).length===0&&p.jsxs("div",{className:"text-center py-12",children:[p.jsx("div",{className:"w-16 h-16 bg-nothing-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:p.jsx(vr,{className:"h-8 w-8 text-nothing-gray-600"})}),p.jsx("p",{className:"text-nothing-gray-400 text-lg",children:"No glyphs found"}),p.jsx("p",{className:"text-nothing-gray-500 text-sm mt-2",children:"Be the first to share your custom Nothing Phone(3) glyph!"})]})]})})]})},_4=()=>{const[n,e]=j.useState({email:"",password:""}),[t,r]=j.useState(!1),[o,a]=j.useState(!1),[u,h]=j.useState(""),{signin:f}=oi(),m=Ar(),w=E=>{e({...n,[E.target.name]:E.target.value}),h("")},_=async E=>{E.preventDefault(),a(!0),h("");try{await f(n.email,n.password),m("/")}catch(S){switch(console.error("Login error:",S),S.code){case"auth/user-not-found":h("No account found with this email address.");break;case"auth/wrong-password":h("Incorrect password.");break;case"auth/invalid-email":h("Invalid email address.");break;case"auth/too-many-requests":h("Too many failed attempts. Please try again later.");break;default:h("Failed to sign in. Please try again.")}}finally{a(!1)}};return p.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"max-w-md w-full space-y-8",children:[p.jsxs(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center",children:[p.jsx("div",{className:"flex justify-center mb-6",children:p.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center glyph-animation",children:p.jsx(vr,{className:"h-8 w-8 text-nothing-white"})})}),p.jsx("h2",{className:"text-3xl font-bold text-nothing-white font-nothing",children:"Welcome back"}),p.jsx("p",{className:"mt-2 text-nothing-gray-400",children:"Sign in to your GlyphMart account"})]}),p.jsxs(De.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"mt-8 space-y-6",onSubmit:_,children:[p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:p.jsx(eg,{className:"h-5 w-5 text-nothing-gray-400"})}),p.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n.email,onChange:w,className:"appearance-none relative block w-full px-10 py-3 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Email address"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:p.jsx(Fi,{className:"h-5 w-5 text-nothing-gray-400"})}),p.jsx("input",{id:"password",name:"password",type:t?"text":"password",autoComplete:"current-password",required:!0,value:n.password,onChange:w,className:"appearance-none relative block w-full px-10 py-3 pr-10 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Password"}),p.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>r(!t),children:t?p.jsx(ha,{className:"h-5 w-5 text-nothing-gray-400 hover:text-nothing-gray-300"}):p.jsx(tr,{className:"h-5 w-5 text-nothing-gray-400 hover:text-nothing-gray-300"})})]})]})]}),u&&p.jsx(De.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-900/20 border border-red-700 text-red-400 px-4 py-3 rounded-lg text-sm",children:u}),p.jsx("div",{className:"flex items-center justify-between",children:p.jsx("div",{className:"text-sm",children:p.jsx(Qe,{to:"/forgot-password",className:"text-nothing-red hover:text-red-400 transition-colors duration-200",children:"Forgot your password?"})})}),p.jsx("div",{children:p.jsx("button",{type:"submit",disabled:o,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-nothing-white bg-nothing-red hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nothing-red disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:o?p.jsxs("div",{className:"flex items-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-nothing-white mr-2"}),"Signing in..."]}):"Sign in"})}),p.jsx("div",{className:"text-center",children:p.jsxs("p",{className:"text-nothing-gray-400",children:["Don't have an account?"," ",p.jsx(Qe,{to:"/signup",className:"text-nothing-red hover:text-red-400 font-medium transition-colors duration-200",children:"Sign up"})]})})]})]})})},x4=()=>{const[n,e]=j.useState({email:"",username:"",displayName:"",password:"",confirmPassword:""}),[t,r]=j.useState(!1),[o,a]=j.useState(!1),[u,h]=j.useState(!1),[f,m]=j.useState(""),{signup:w}=oi(),_=Ar(),E=C=>{e({...n,[C.target.name]:C.target.value}),m("")},S=()=>n.password!==n.confirmPassword?(m("Passwords do not match"),!1):n.password.length<6?(m("Password must be at least 6 characters long"),!1):n.username.length<3?(m("Username must be at least 3 characters long"),!1):/^[a-zA-Z0-9_]+$/.test(n.username)?!0:(m("Username can only contain letters, numbers, and underscores"),!1),D=async C=>{if(C.preventDefault(),h(!0),m(""),!S()){h(!1);return}try{await w(n.email,n.password,n.username,n.displayName),_("/")}catch(A){switch(console.error("Signup error:",A),A.code){case"auth/email-already-in-use":m("An account with this email already exists.");break;case"auth/invalid-email":m("Invalid email address.");break;case"auth/weak-password":m("Password is too weak.");break;default:m("Failed to create account. Please try again.")}}finally{h(!1)}};return p.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center px-4 sm:px-6 lg:px-8 py-12",children:p.jsxs("div",{className:"max-w-md w-full space-y-8",children:[p.jsxs(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center",children:[p.jsx("div",{className:"flex justify-center mb-6",children:p.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center glyph-animation",children:p.jsx(vr,{className:"h-8 w-8 text-nothing-white"})})}),p.jsx("h2",{className:"text-3xl font-bold text-nothing-white font-nothing",children:"Join GlyphMart"}),p.jsx("p",{className:"mt-2 text-nothing-gray-400",children:"Create your account and start sharing glyphs"})]}),p.jsxs(De.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"mt-8 space-y-6",onSubmit:D,children:[p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:p.jsx(eg,{className:"h-5 w-5 text-nothing-gray-400"})}),p.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n.email,onChange:E,className:"appearance-none relative block w-full px-10 py-3 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Email address"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"username",className:"sr-only",children:"Username"}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:p.jsx(Uj,{className:"h-5 w-5 text-nothing-gray-400"})}),p.jsx("input",{id:"username",name:"username",type:"text",autoComplete:"username",required:!0,value:n.username,onChange:E,className:"appearance-none relative block w-full px-10 py-3 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Username"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"displayName",className:"sr-only",children:"Display Name"}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:p.jsx(zs,{className:"h-5 w-5 text-nothing-gray-400"})}),p.jsx("input",{id:"displayName",name:"displayName",type:"text",autoComplete:"name",required:!0,value:n.displayName,onChange:E,className:"appearance-none relative block w-full px-10 py-3 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Display Name"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:p.jsx(Fi,{className:"h-5 w-5 text-nothing-gray-400"})}),p.jsx("input",{id:"password",name:"password",type:t?"text":"password",autoComplete:"new-password",required:!0,value:n.password,onChange:E,className:"appearance-none relative block w-full px-10 py-3 pr-10 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Password"}),p.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>r(!t),children:t?p.jsx(ha,{className:"h-5 w-5 text-nothing-gray-400 hover:text-nothing-gray-300"}):p.jsx(tr,{className:"h-5 w-5 text-nothing-gray-400 hover:text-nothing-gray-300"})})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"confirmPassword",className:"sr-only",children:"Confirm Password"}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:p.jsx(Fi,{className:"h-5 w-5 text-nothing-gray-400"})}),p.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:o?"text":"password",autoComplete:"new-password",required:!0,value:n.confirmPassword,onChange:E,className:"appearance-none relative block w-full px-10 py-3 pr-10 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Confirm Password"}),p.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>a(!o),children:o?p.jsx(ha,{className:"h-5 w-5 text-nothing-gray-400 hover:text-nothing-gray-300"}):p.jsx(tr,{className:"h-5 w-5 text-nothing-gray-400 hover:text-nothing-gray-300"})})]})]})]}),f&&p.jsx(De.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-900/20 border border-red-700 text-red-400 px-4 py-3 rounded-lg text-sm",children:f}),p.jsx("div",{children:p.jsx("button",{type:"submit",disabled:u,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-nothing-white bg-nothing-red hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nothing-red disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:u?p.jsxs("div",{className:"flex items-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-nothing-white mr-2"}),"Creating account..."]}):"Create Account"})}),p.jsx("div",{className:"text-center",children:p.jsxs("p",{className:"text-nothing-gray-400",children:["Already have an account?"," ",p.jsx(Qe,{to:"/login",className:"text-nothing-red hover:text-red-400 font-medium transition-colors duration-200",children:"Sign in"})]})})]})]})})},iu=({onFileUpload:n,acceptedTypes:e="images",multiple:t=!1,maxFiles:r=5})=>{const[o,a]=j.useState(!1),[u,h]=j.useState([]),[f,m]=j.useState(!1),w=j.useRef(null),_=()=>{switch(e){case"images":return"image/png,image/jpeg,image/jpg,image/gif,image/webp";case"apks":return".apk";case"profile":return"image/png,image/jpeg,image/jpg,image/gif,image/webp";default:return""}},E=M=>M.type?.startsWith("image/")?p.jsx(Op,{className:"w-8 h-8 text-blue-500"}):p.jsx(vT,{className:"w-8 h-8 text-gray-500"}),S=M=>{const Q=Array.from(M);if(!t&&Q.length>1){alert("Only one file is allowed");return}if(t&&u.length+Q.length>r){alert(`Maximum ${r} files allowed`);return}Q.forEach(D)},D=async M=>{if(M){a(!0);try{const Q=await _t.uploadFile(M,e),te={id:Date.now()+Math.random(),name:M.name,url:Q.url,thumbnail:Q.thumbnail,filename:Q.filename,type:Q.type,file:M};h(se=>[...se,te]),n(te)}catch(Q){console.error("Upload failed:",Q),alert("Upload failed: "+Q.message)}finally{a(!1)}}},C=async M=>{try{M.filename&&await _t.deleteFile(M.filename,M.type),h(Q=>Q.filter(te=>te.id!==M.id)),n(null,M)}catch(Q){console.error("Failed to delete file:",Q),alert("Failed to delete file: "+Q.message)}},A=M=>{M.preventDefault(),M.stopPropagation(),M.type==="dragenter"||M.type==="dragover"?m(!0):M.type==="dragleave"&&m(!1)},z=M=>{M.preventDefault(),M.stopPropagation(),m(!1),M.dataTransfer.files&&M.dataTransfer.files[0]&&S(M.dataTransfer.files)},H=()=>{w.current?.click()};return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:`border-2 border-dashed rounded-lg p-6 text-center transition-colors cursor-pointer
          ${f?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}
          ${o?"opacity-50 pointer-events-none":""}`,onDragEnter:A,onDragLeave:A,onDragOver:A,onDrop:z,onClick:H,children:[p.jsx("input",{ref:w,type:"file",multiple:t,accept:_(),onChange:M=>S(M.target.files),className:"hidden"}),p.jsx(Fp,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),p.jsx("p",{className:"text-lg font-medium text-gray-700 mb-2",children:o?"Uploading...":`Upload ${e==="apks"?"APK file":"images"}`}),p.jsx("p",{className:"text-sm text-gray-500",children:"Drag and drop files here, or click to select files"}),e==="images"&&p.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Supported: PNG, JPG, JPEG, GIF, WebP (max 50MB each)"}),e==="apks"&&p.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Supported: APK files (max 50MB)"})]}),u.length>0&&p.jsxs("div",{className:"space-y-2",children:[p.jsx("h4",{className:"font-medium text-gray-700",children:"Uploaded Files:"}),p.jsx("div",{className:"grid gap-2",children:u.map(M=>p.jsxs(De.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[p.jsxs("div",{className:"flex items-center space-x-3",children:[M.thumbnail?p.jsx("img",{src:M.thumbnail,alt:"Preview",className:"w-10 h-10 object-cover rounded"}):E(M.file),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-medium text-gray-700 truncate max-w-48",children:M.name}),p.jsxs("p",{className:"text-xs text-gray-500",children:[e==="images"?"Image":"APK","  Uploaded"]})]})]}),p.jsx("button",{onClick:()=>C(M),className:"p-1 text-red-500 hover:text-red-700 transition-colors",title:"Remove file",children:p.jsx(_T,{className:"w-4 h-4"})})]},M.id))})]})]})},E4=()=>{const{id:n}=k_(),[e,t]=j.useState(null),[r,o]=j.useState(!0),[a,u]=j.useState(!1),[h,f]=j.useState(!1),[m,w]=j.useState(!1),[_,E]=j.useState(!1),{currentUser:S,userProfile:D}=oi(),[C,A]=j.useState(!1),[z,H]=j.useState(null),[M,Q]=j.useState(!1),[te,se]=j.useState(""),[R,P]=j.useState(!1),[b,V]=j.useState(!1),[F,B]=j.useState(!1),[N,ke]=j.useState([]),qe=Ar();j.useEffect(()=>{n&&(async()=>{try{const ce=await _t.getGlyph(n);if(ce.createdAt&&(ce.createdAt=new Date(ce.createdAt)),t(ce),await _t.recordView(n),S){const ve=await _t.checkLikeStatus(n);f(ve)}else f(!1)}catch(ce){console.error("Error fetching glyph:",ce),ce.message.includes("not found")&&qe("/404")}finally{o(!1)}})()},[n,qe,S]);const Re=async()=>{if(!(!e.apkUrl&&!e.githubUrl)){if(e.apkUrl)E(!0);else if(e.githubUrl){window.open(e.githubUrl,"_blank");try{await _t.recordDownload(n)&&t(ce=>({...ce,downloads:(ce.downloads||0)+1}))}catch(le){console.error("Error updating download count:",le)}}}},Ce=async()=>{u(!0);try{const le=await _t.recordDownload(n),ce=document.createElement("a");ce.href=e.apkUrl,ce.download=`${e.title.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.apk`,document.body.appendChild(ce),ce.click(),document.body.removeChild(ce),le&&t(ve=>({...ve,downloads:(ve.downloads||0)+1}))}catch(le){console.error("Error downloading glyph:",le)}finally{u(!1),E(!1)}},ae=async()=>{if(!S||m){S||qe("/login");return}w(!0);try{const le=await _t.toggleLike(n);f(le.liked),t(ce=>({...ce,likes:le.totalLikes}))}catch(le){console.error("Error liking glyph:",le)}finally{w(!1)}},Z=async()=>{const le=window.location.href;if(navigator.share)try{await navigator.share({title:e.title,text:e.description,url:le})}catch(ce){console.error("Error sharing:",ce),X(le)}else X(le)},X=async le=>{try{await navigator.clipboard.writeText(le),alert("Link copied to clipboard!")}catch(ce){console.error("Error copying to clipboard:",ce)}};j.useEffect(()=>{C&&e&&H({title:e.title,description:e.description,apkUrl:e.apkUrl||"",githubUrl:e.githubUrl||"",instructions:e.instructions||"",images:e.images||[]})},[C,e]);const L=le=>{const{name:ce,value:ve}=le.target;H(Ne=>({...Ne,[ce]:ve})),se("")},Y=(le,ce)=>{le?(ke(ve=>[...ve,le]),H(ve=>({...ve,images:[...ve.images,le.url]}))):ce&&(ke(ve=>ve.filter(Ne=>Ne.id!==ce.id)),H(ve=>({...ve,images:ve.images.filter(Ne=>Ne!==ce.url)})))},ge=async le=>{le.preventDefault(),Q(!0),se("");try{await _t.updateGlyph(e.id,{title:z.title,description:z.description,apkUrl:z.apkUrl,githubUrl:z.githubUrl,instructions:z.instructions,images:z.images}),A(!1),t(ce=>({...ce,...z}))}catch(ce){se("Failed to update glyph: "+ce.message)}finally{Q(!1)}};return r?p.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-4 glyph-animation",children:p.jsx("div",{className:"w-8 h-8 bg-nothing-white rounded-full"})}),p.jsx("p",{className:"text-nothing-gray-400",children:"Loading glyph..."})]})}):e?e.deleted?p.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("h1",{className:"text-2xl font-bold text-red-500 mb-4",children:"Glyph Deleted"}),p.jsx("p",{className:"text-nothing-gray-400 mb-6",children:"This glyph has been deleted by its creator and is no longer available."}),p.jsx(Qe,{to:"/",className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-6 py-3 rounded-lg font-medium transition-colors duration-200",children:"Return to home"})]})}):p.jsxs("div",{className:"min-h-screen bg-nothing-black",children:[p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[p.jsxs("div",{className:"space-y-4",children:[p.jsx(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"aspect-square bg-nothing-gray-900 rounded-lg overflow-hidden",children:e.images&&e.images.length>0?p.jsx("img",{src:e.images[0],alt:e.title,className:"w-full h-full object-cover"}):p.jsx("div",{className:"w-full h-full flex items-center justify-center",children:p.jsx("div",{className:"w-24 h-24 bg-nothing-red rounded-full flex items-center justify-center glyph-animation",children:p.jsx("div",{className:"w-12 h-12 bg-nothing-white rounded-full"})})})}),D&&e.creatorUsername===D.username&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex space-x-3 mt-6",children:[p.jsx("button",{type:"button",onClick:()=>A(!0),className:"px-6 py-3 bg-nothing-gray-700 hover:bg-nothing-gray-800 text-nothing-white rounded-lg font-medium transition-colors duration-200",children:"Edit Glyph"}),p.jsx("button",{type:"button",onClick:()=>P(!0),className:"px-6 py-3 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200",children:"Delete Glyph"})]}),R&&p.jsx("div",{className:"fixed inset-0 bg-nothing-black/80 flex items-center justify-center z-50 p-4",children:p.jsxs(De.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6 max-w-md w-full",children:[p.jsxs("div",{className:"text-center mb-6",children:[p.jsx("h2",{className:"text-2xl font-bold text-nothing-white mb-4",children:"Delete Glyph?"}),p.jsx("p",{className:"text-nothing-gray-300 mb-4",children:"Are you sure you want to permanently delete this glyph and all its related data? This action cannot be undone."})]}),p.jsxs("div",{className:"flex space-x-3",children:[p.jsx("button",{onClick:async()=>{if(!b){V(!0);try{await _t.deleteGlyph(e.id)}catch(le){console.error("Error deleting glyph:",le)}finally{V(!1),P(!1),qe("/")}}},disabled:b,className:"flex-1 bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50",children:b?"Deleting...":"Yes, Delete"}),p.jsx("button",{onClick:()=>P(!1),disabled:b,className:"px-4 py-2 border border-nothing-gray-700 text-nothing-white hover:border-nothing-gray-600 rounded-lg font-medium transition-colors duration-200",children:"Cancel"})]})]})})]})]}),p.jsxs(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-3xl font-bold text-nothing-white mb-4 font-nothing",children:e.title}),p.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[p.jsxs(Qe,{to:`/storefront/${e.creatorUsername||e.creatorId}`,className:"flex items-center space-x-2 text-nothing-red hover:text-red-400 transition-colors duration-200",children:[p.jsx(zs,{className:"h-4 w-4"}),p.jsxs("span",{className:"font-medium",children:["@",e.creatorUsername||e.creatorId]})]}),p.jsxs("div",{className:"flex items-center space-x-1 text-nothing-gray-400",children:[p.jsx(Zm,{className:"h-4 w-4"}),p.jsx("span",{className:"text-sm",children:e.createdAt?.toDate?.()?.toLocaleDateString()||"Unknown date"})]})]}),p.jsx("div",{className:"text-nothing-gray-300 text-lg leading-relaxed mb-6",style:{position:"relative"},children:e.description?p.jsxs("div",{style:{position:"relative"},children:[p.jsx("span",{className:F?"":"glyph-fade-text glyph-line-clamp",style:F?{display:"block",maxHeight:"none",overflow:"visible"}:void 0,children:e.description}),p.jsx("button",{type:"button",onClick:()=>B(le=>!le),className:"ml-2 text-nothing-red hover:underline focus:outline-none relative z-10",style:{marginTop:"0.5em"},children:F?"Show Less":"Show More"})]}):null})]}),p.jsxs("div",{className:"flex items-center space-x-6 py-4 border-y border-nothing-gray-800",children:[p.jsxs("div",{className:"flex items-center space-x-2 text-nothing-gray-400",children:[p.jsx(Xi,{className:"h-5 w-5"}),p.jsx("span",{children:(()=>{const le=e.downloads||0;return`${le} ${le===1?"download":"downloads"}`})()})]}),p.jsxs("div",{className:"flex items-center space-x-2 text-nothing-gray-400",children:[p.jsx(tr,{className:"h-5 w-5"}),p.jsx("span",{children:(()=>{const le=e.views||0;return`${le} ${le===1?"view":"views"}`})()})]}),p.jsxs("div",{className:"flex items-center space-x-2 text-nothing-gray-400",children:[p.jsx(nr,{className:"h-5 w-5"}),p.jsx("span",{children:(()=>{const le=e.likes||0;return`${le} ${le===1?"like":"likes"}`})()})]})]}),p.jsxs("div",{className:"flex space-x-4",children:[(e.apkUrl||e.githubUrl)&&p.jsxs("button",{onClick:Re,className:"flex-1 bg-nothing-red hover:bg-red-700 text-nothing-white px-6 py-3 rounded-lg font-semibold flex items-center justify-center space-x-2 transition-colors duration-200",children:[p.jsx(Xi,{className:"h-5 w-5"}),p.jsx("span",{children:e.apkUrl?"Download APK":"View on GitHub"})]}),p.jsxs("button",{onClick:ae,disabled:m,className:`px-6 py-3 rounded-lg font-semibold flex items-center justify-center space-x-2 transition-colors duration-200 min-w-[120px] ${h?"bg-nothing-red text-nothing-white":"border border-nothing-gray-700 text-nothing-white hover:border-nothing-gray-600"} ${m?"opacity-50 cursor-not-allowed":""}`,children:[p.jsx(nr,{className:`h-5 w-5 ${h?"fill-current":""}`}),p.jsx("span",{children:m?"...":h?"Liked":"Like"})]}),p.jsx("button",{onClick:Z,className:"px-6 py-3 border border-nothing-gray-700 text-nothing-white hover:border-nothing-gray-600 rounded-lg font-semibold flex items-center justify-center space-x-2 transition-colors duration-200",children:p.jsx(Xj,{className:"h-5 w-5"})})]}),(e.githubUrl||e.instructions)&&p.jsxs("div",{className:"space-y-3",children:[p.jsx("h3",{className:"text-lg font-semibold text-nothing-white",children:e.githubUrl&&e.instructions?"Links & Instructions":e.githubUrl?"Repository":"Instructions"}),e.githubUrl&&p.jsxs("a",{href:e.githubUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 text-nothing-gray-300 hover:text-nothing-white transition-colors duration-200",children:[p.jsx(wT,{className:"h-5 w-5"}),p.jsx("span",{children:"View on GitHub"}),p.jsx(Wj,{className:"h-4 w-4"})]}),e.instructions&&p.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-4",children:[p.jsx("h4",{className:"text-nothing-white font-medium mb-2",children:"Installation Instructions"}),p.jsx("p",{className:"text-nothing-gray-300 text-sm whitespace-pre-wrap",children:e.instructions})]})]})]})]})}),_&&p.jsx("div",{className:"fixed inset-0 bg-nothing-black/80 flex items-center justify-center z-50 p-4",children:p.jsxs(De.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6 max-w-md w-full",children:[p.jsxs("div",{className:"flex items-start space-x-3 mb-4",children:[p.jsx(Mj,{className:"h-6 w-6 text-yellow-500 flex-shrink-0 mt-0.5"}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-nothing-white mb-2",children:"Download Disclaimer"}),p.jsx("p",{className:"text-nothing-gray-300 text-sm",children:"This APK is shared by the community. GlyphMart does not guarantee the safety or functionality of third-party files. Download and install at your own risk."})]})]}),p.jsxs("div",{className:"flex space-x-3",children:[p.jsx("button",{onClick:Ce,disabled:a,className:"flex-1 bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50",children:a?"Downloading...":"I Understand, Download"}),p.jsx("button",{onClick:()=>E(!1),className:"px-4 py-2 border border-nothing-gray-700 text-nothing-white hover:border-nothing-gray-600 rounded-lg font-medium transition-colors duration-200",children:"Cancel"})]})]})}),C&&z?p.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center p-4",children:p.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-8 max-w-lg w-full",children:[p.jsx("h2",{className:"text-2xl font-bold text-nothing-white mb-6",children:"Edit Glyph"}),p.jsxs("form",{onSubmit:ge,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Title"}),p.jsx("input",{type:"text",name:"title",value:z.title,onChange:L,className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Description"}),p.jsx("textarea",{name:"description",value:z.description,onChange:L,rows:4,className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"APK URL"}),p.jsx("input",{type:"url",name:"apkUrl",value:z.apkUrl,onChange:L,className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"GitHub URL"}),p.jsx("input",{type:"url",name:"githubUrl",value:z.githubUrl,onChange:L,className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Instructions"}),p.jsx("textarea",{name:"instructions",value:z.instructions,onChange:L,rows:2,className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Images"}),p.jsxs("div",{className:"space-y-4",children:[z.images&&z.images.length>0&&p.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:z.images.map((le,ce)=>p.jsx("div",{className:"relative",children:p.jsx("img",{src:le,alt:`Preview ${ce+1}`,className:"w-full h-24 object-cover rounded-lg"})},ce))}),p.jsx("div",{className:"bg-nothing-gray-800 rounded-lg p-4",children:p.jsx(iu,{onFileUpload:Y,acceptedTypes:"images",multiple:!0,maxFiles:5})}),p.jsx("div",{className:"text-center text-nothing-gray-400",children:p.jsx("span",{className:"px-3 py-1 bg-nothing-gray-800 rounded",children:"OR"})}),p.jsx("input",{type:"text",name:"images",value:z.images.join(", "),onChange:le=>H(ce=>({...ce,images:le.target.value.split(",").map(ve=>ve.trim())})),className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white",placeholder:"Or enter image URLs separated by commas"})]})]}),te&&p.jsx("div",{className:"bg-red-900/20 border border-red-700 text-red-400 px-4 py-2 rounded-lg mb-4",children:te}),p.jsxs("div",{className:"flex space-x-3 mt-6",children:[p.jsx("button",{type:"submit",disabled:M,className:"px-6 py-3 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50",children:M?"Saving...":"Save Changes"}),p.jsx("button",{type:"button",onClick:()=>A(!1),className:"px-6 py-3 bg-nothing-gray-700 hover:bg-nothing-gray-800 text-nothing-white rounded-lg font-medium transition-colors duration-200",children:"Cancel"})]})]})]})}):p.jsx(p.Fragment,{})]}):p.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("h1",{className:"text-2xl font-bold text-nothing-white mb-4",children:"Glyph not found"}),p.jsx(Qe,{to:"/",className:"text-nothing-red hover:text-red-400",children:"Return to home"})]})})},T4=()=>{const{username:n}=k_(),[e,t]=j.useState(null),[r,o]=j.useState([]),[a,u]=j.useState(!0),[h,f]=j.useState("latest"),[m,w]=j.useState(""),_=A=>{console.log(A),w(z=>z+`
`+A)};j.useEffect(()=>{n&&(async()=>{try{_("Fetching storefront for username: "+n);const z=await _t.getUserByUsername(n);_("Found user data: "+JSON.stringify({uid:z.uid,username:z.username,displayName:z.displayName})),t(z),_("Fetching glyphs for creatorId: "+z.uid);const H=await _t.getGlyphs({creator_id:z.uid,sort:"latest",limit:100});_("Found glyphs: "+H.length),H.length>0?_("First glyph: "+JSON.stringify({id:H[0].id,title:H[0].title,creatorId:H[0].creatorId})):_("No glyphs found for this user. Check if glyphs were created with the correct creatorId."),H.forEach(M=>{M.createdAt&&(M.createdAt=new Date(M.createdAt))}),o(H)}catch(z){_("Error fetching user data: "+z.message),console.error("Error fetching user data:",z)}finally{u(!1)}})()},[n]);const E=()=>{switch(h){case"popular":return[...r].sort((A,z)=>(z.downloads||0)-(A.downloads||0));case"liked":return[...r].sort((A,z)=>(z.likes||0)-(A.likes||0));default:return r}},S=({glyph:A})=>p.jsx(De.div,{whileHover:{y:-5},className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg overflow-hidden hover:border-nothing-gray-700 transition-all duration-300",children:p.jsxs(Qe,{to:`/glyph/${A.id}`,children:[p.jsxs("div",{className:"aspect-square bg-nothing-gray-800 relative overflow-hidden",children:[A.images&&A.images.length>0?p.jsx("img",{src:A.images[0],alt:A.title,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"}):p.jsx("div",{className:"w-full h-full flex items-center justify-center",children:p.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center glyph-animation",children:p.jsx(vr,{className:"h-8 w-8 text-nothing-white"})})}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-nothing-black/80 via-transparent to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300",children:p.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:p.jsxs("div",{className:"flex items-center justify-between text-nothing-white text-sm",children:[p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Xi,{className:"h-4 w-4"}),p.jsx("span",{children:A.downloads||0})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(nr,{className:"h-4 w-4"}),p.jsx("span",{children:A.likes||0})]})]})})})]}),p.jsxs("div",{className:"p-4",children:[p.jsx("h3",{className:"text-nothing-white font-semibold text-lg mb-2 truncate",children:A.title}),p.jsx("p",{className:"text-nothing-gray-400 text-sm mb-3 line-clamp-2",children:A.description}),p.jsxs("div",{className:"flex items-center justify-between text-nothing-gray-500 text-sm",children:[p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsxs("div",{className:"flex items-center space-x-1",children:[p.jsx(Xi,{className:"h-3 w-3"}),p.jsx("span",{children:A.downloads||0})]}),p.jsxs("div",{className:"flex items-center space-x-1",children:[p.jsx(tr,{className:"h-3 w-3"}),p.jsx("span",{children:A.views||0})]}),p.jsxs("div",{className:"flex items-center space-x-1",children:[p.jsx(nr,{className:"h-3 w-3"}),p.jsx("span",{children:A.likes||0})]})]}),p.jsx("span",{className:"text-xs",children:A.createdAt?.toDate?.()?.toLocaleDateString()||"Unknown"})]})]})]})});if(a)return p.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-4 glyph-animation",children:p.jsx(vr,{className:"h-8 w-8 text-nothing-white"})}),p.jsx("p",{className:"text-nothing-gray-400",children:"Loading storefront..."})]})});if(!e)return p.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("h1",{className:"text-2xl font-bold text-nothing-white mb-4",children:"User not found"}),p.jsxs("p",{className:"text-nothing-gray-400 mb-6",children:["The user @",n," does not exist."]}),p.jsx(Qe,{to:"/",className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-6 py-3 rounded-lg font-medium transition-colors duration-200",children:"Return to home"})]})});const D=r.reduce((A,z)=>A+(z.downloads||0),0),C=r.reduce((A,z)=>A+(z.likes||0),0);return p.jsxs("div",{className:"min-h-screen bg-nothing-black",children:[p.jsxs("div",{className:"bg-nothing-gray-900 border-b border-nothing-gray-800 relative overflow-hidden",children:[e.bannerImage&&p.jsxs("div",{className:"absolute inset-0 w-full h-full",children:[p.jsx("img",{src:e.bannerImage,alt:"Profile banner",className:"w-full h-full object-cover opacity-30"}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-nothing-gray-900 via-nothing-gray-900/80 to-nothing-gray-900/40"})]}),p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 relative z-10",children:p.jsxs(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center",children:[p.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden mx-auto mb-6 border-4 border-nothing-white shadow-lg",children:e.profilePicture?p.jsx("img",{src:e.profilePicture,alt:e.displayName||e.username,className:"w-full h-full object-cover"}):p.jsx("div",{className:"w-full h-full bg-nothing-red flex items-center justify-center",children:p.jsx("span",{className:"text-2xl font-bold text-nothing-white",children:e.displayName?.charAt(0).toUpperCase()||e.username?.charAt(0).toUpperCase()})})}),p.jsx("h1",{className:"text-3xl font-bold text-nothing-white mb-2 font-nothing",children:e.username}),p.jsxs("p",{className:"text-nothing-red text-lg mb-4",children:["@",e.username]}),e.bio&&p.jsx("p",{className:"text-nothing-gray-300 max-w-2xl mx-auto mb-6",children:e.bio}),p.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4 text-nothing-gray-400 text-sm mb-6",children:[e.location&&p.jsxs("div",{className:"flex items-center space-x-1",children:[p.jsx(Kj,{className:"h-4 w-4"}),p.jsx("span",{children:e.location})]}),e.website&&p.jsxs("a",{href:e.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 hover:text-nothing-white transition-colors duration-200",children:[p.jsx(Hj,{className:"h-4 w-4"}),p.jsx("span",{children:"Website"})]}),p.jsxs("div",{className:"flex items-center space-x-1",children:[p.jsx(Zm,{className:"h-4 w-4"}),p.jsxs("span",{children:["Joined ",e.createdAt?.toDate?.()?.toLocaleDateString()||"Unknown"]})]})]}),p.jsxs("div",{className:"flex items-center justify-center space-x-8",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-2xl font-bold text-nothing-white",children:r.length}),p.jsx("div",{className:"text-nothing-gray-400 text-sm",children:"Glyphs"})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-2xl font-bold text-nothing-white",children:D}),p.jsx("div",{className:"text-nothing-gray-400 text-sm",children:"Downloads"})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-2xl font-bold text-nothing-white",children:C}),p.jsx("div",{className:"text-nothing-gray-400 text-sm",children:"Likes"})]})]})]})})]}),p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[p.jsxs("div",{className:"flex space-x-4 border-b border-nothing-gray-800 mb-8",children:[p.jsx("button",{onClick:()=>f("latest"),className:`px-4 py-3 font-medium border-b-2 transition-colors duration-200 ${h==="latest"?"border-nothing-red text-nothing-red":"border-transparent text-nothing-gray-400 hover:text-nothing-white"}`,children:"Latest"}),p.jsx("button",{onClick:()=>f("popular"),className:`px-4 py-3 font-medium border-b-2 transition-colors duration-200 ${h==="popular"?"border-nothing-red text-nothing-red":"border-transparent text-nothing-gray-400 hover:text-nothing-white"}`,children:"Most Downloaded"}),p.jsx("button",{onClick:()=>f("liked"),className:`px-4 py-3 font-medium border-b-2 transition-colors duration-200 ${h==="liked"?"border-nothing-red text-nothing-red":"border-transparent text-nothing-gray-400 hover:text-nothing-white"}`,children:"Most Liked"})]}),r.length>0?p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:E().map((A,z)=>p.jsx(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:z*.1},children:p.jsx(S,{glyph:A})},A.id))}):p.jsxs("div",{className:"text-center py-12",children:[p.jsx("div",{className:"w-16 h-16 bg-nothing-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:p.jsx(vr,{className:"h-8 w-8 text-nothing-gray-600"})}),p.jsx("h3",{className:"text-nothing-white text-lg font-medium mb-2",children:"No glyphs yet"}),p.jsxs("p",{className:"text-nothing-gray-400",children:[e.username," hasn't shared any glyphs yet."]})]})]}),m&&p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:p.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg p-4",children:[p.jsx("h3",{className:"text-nothing-white font-bold mb-2",children:"Debug Info:"}),p.jsx("pre",{className:"text-nothing-gray-300 text-xs whitespace-pre-wrap overflow-auto",children:m})]})})]})},I4=()=>{const[n,e]=j.useState({title:"",description:"",images:[],apkUrl:"",githubUrl:"",instructions:""}),[t,r]=j.useState([]),[o,a]=j.useState(null),[u,h]=j.useState(!1),[f,m]=j.useState(""),[w,_]=j.useState(""),{currentUser:E,userProfile:S}=oi(),D=Ar(),C=async()=>{try{const te=await _t.getGlyphs(),se=te.filter(P=>P.creatorId===E.uid),R=`Total glyphs in database: ${te.length}
My glyphs: ${se.length}
My UID: ${E.uid}
My username: ${S?.username}
My displayName: ${E.displayName}

My glyphs:
`+se.map(P=>`- ${P.title} (ID: ${P.id})`).join(`
`);_(R),console.log("Debug info:",R)}catch(te){console.error("Error checking glyphs:",te),_("Error checking glyphs: "+te.message)}};if(!E)return D("/login"),null;const A=te=>{const{name:se,value:R}=te.target;e(P=>({...P,[se]:R})),m("")},z=(te,se)=>{te?(r(R=>[...R,te]),e(R=>({...R,images:[...R.images,te.url]}))):se&&(r(R=>R.filter(P=>P.id!==se.id)),e(R=>({...R,images:R.images.filter(P=>P!==se.url)})))},H=(te,se)=>{te?(a(te),e(R=>({...R,apkUrl:te.url}))):se&&(a(null),e(R=>({...R,apkUrl:""})))},M=()=>{if(!n.title.trim())return m("Title is required"),!1;if(!n.description.trim())return m("Description is required"),!1;if(!n.apkUrl.trim()&&!n.githubUrl.trim())return m("Either APK file or GitHub repository URL is required"),!1;const te=/^https?:\/\/.+/;return n.githubUrl.trim()&&!te.test(n.githubUrl)?(m("GitHub URL must be a valid HTTP/HTTPS URL"),!1):!0},Q=async te=>{if(te.preventDefault(),h(!0),m(""),!M()){h(!1);return}try{const se={title:n.title.trim(),description:n.description.trim(),images:n.images,apkUrl:n.apkUrl.trim()||null,githubUrl:n.githubUrl.trim()||null,instructions:n.instructions.trim()||null,creatorId:E.uid,creatorUsername:S?.username,downloads:0,views:0,likes:0,createdAt:new Date};console.log("Creating glyph with data:",se);const R=await _t.uploadGlyph(se);console.log("Glyph created with ID:",R.id),D(`/glyph/${R.id}`)}catch(se){console.error("Error creating glyph:",se),m("Failed to upload glyph. Please try again.")}finally{h(!1)}};return p.jsx("div",{className:"min-h-screen bg-nothing-black py-12",children:p.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[p.jsxs(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[p.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-6 glyph-animation",children:p.jsx(Fp,{className:"h-8 w-8 text-nothing-white"})}),p.jsx("h1",{className:"text-3xl font-bold text-nothing-white font-nothing mb-4",children:"Share Your Glyph"}),p.jsx("p",{className:"text-nothing-gray-400",children:"Upload your custom Nothing Phone(3) glyph and share it with the community"})]}),p.jsx(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-8",children:p.jsxs("form",{onSubmit:Q,className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-nothing-white mb-2",children:"Glyph Title *"}),p.jsx("input",{type:"text",id:"title",name:"title",value:n.title,onChange:A,placeholder:"e.g., Custom Boot Animation Glyph",className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-nothing-white mb-2",children:"Description *"}),p.jsx("textarea",{id:"description",name:"description",value:n.description,onChange:A,rows:4,placeholder:"Describe your glyph, what it does, and any special features...",className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200 resize-vertical",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-nothing-white mb-2",children:"Images (Optional)"}),p.jsx("p",{className:"text-sm text-nothing-gray-400 mb-4",children:"Upload images showcasing your glyph (screenshots, demos, etc.)"}),p.jsx("div",{className:"bg-nothing-gray-800 rounded-lg p-4",children:p.jsx(iu,{onFileUpload:z,acceptedTypes:"images",multiple:!0,maxFiles:5})})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-nothing-white mb-2",children:"APK File or Download URL"}),p.jsx("p",{className:"text-sm text-nothing-gray-400 mb-4",children:"Upload an APK file directly or provide a download URL"}),p.jsx("div",{className:"bg-nothing-gray-800 rounded-lg p-4 mb-4",children:p.jsx(iu,{onFileUpload:H,acceptedTypes:"apks",multiple:!1})}),p.jsx("div",{className:"text-center text-nothing-gray-400 mb-4",children:p.jsx("span",{className:"px-3 py-1 bg-nothing-gray-800 rounded",children:"OR"})}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:p.jsx(Gj,{className:"h-5 w-5 text-nothing-gray-400"})}),p.jsx("input",{type:"url",id:"apkUrl",name:"apkUrl",value:n.apkUrl,onChange:A,placeholder:"https://github.com/username/repo/releases/download/v1.0/glyph.apk",className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200",disabled:!!o})]}),p.jsx("p",{className:"text-sm text-nothing-gray-400 mt-2",children:o?"APK file uploaded":"Direct link to your APK file (GitHub Releases, Google Drive, etc.)"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"githubUrl",className:"block text-sm font-medium text-nothing-white mb-2",children:"GitHub Repository"}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:p.jsx(wT,{className:"h-5 w-5 text-nothing-gray-400"})}),p.jsx("input",{type:"url",id:"githubUrl",name:"githubUrl",value:n.githubUrl,onChange:A,placeholder:"https://github.com/username/repository",className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200"})]}),p.jsx("p",{className:"text-sm text-nothing-gray-400 mt-2",children:"Link to your GitHub repository with source code"})]}),p.jsx("div",{className:"bg-blue-900/20 border border-blue-700 text-blue-400 px-4 py-3 rounded-lg",children:p.jsxs("div",{className:"flex items-start space-x-3",children:[p.jsx("div",{className:"flex-shrink-0 mt-0.5",children:p.jsx("div",{className:"w-4 h-4 bg-blue-400 rounded-full flex items-center justify-center",children:p.jsx("span",{className:"text-blue-900 text-xs font-bold",children:"!"})})}),p.jsxs("div",{className:"text-sm",children:[p.jsx("p",{className:"font-medium mb-1",children:"Download Requirement"}),p.jsx("p",{children:"You must provide either an APK download URL or a GitHub repository link (or both). Users need a way to access your glyph."})]})]})}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"instructions",className:"block text-sm font-medium text-nothing-white mb-2",children:"Installation Instructions (Optional)"}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute top-3 left-3 pointer-events-none",children:p.jsx(vT,{className:"h-5 w-5 text-nothing-gray-400"})}),p.jsx("textarea",{id:"instructions",name:"instructions",value:n.instructions,onChange:A,rows:4,placeholder:`1. Download the APK file
2. Enable installation from unknown sources
3. Install the APK
4. Open Nothing Glyph Composer...`,className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200 resize-vertical"})]})]}),f&&p.jsxs(De.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-900/20 border border-red-700 text-red-400 px-4 py-3 rounded-lg flex items-start space-x-3",children:[p.jsx(Lp,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),p.jsx("span",{className:"text-sm",children:f})]}),p.jsx("div",{className:"bg-yellow-900/20 border border-yellow-700 text-yellow-400 px-4 py-3 rounded-lg",children:p.jsxs("div",{className:"flex items-start space-x-3",children:[p.jsx(Lp,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),p.jsxs("div",{className:"text-sm",children:[p.jsx("p",{className:"font-medium mb-1",children:"Important Disclaimer"}),p.jsx("p",{children:"By uploading your glyph, you confirm that you own the rights to share this content. GlyphMart is not responsible for the safety or functionality of user-generated content."})]})]})}),p.jsxs("div",{className:"flex justify-end space-x-4",children:[p.jsx("button",{type:"button",onClick:()=>D("/"),className:"px-6 py-3 border border-nothing-gray-700 text-nothing-white hover:border-nothing-gray-600 rounded-lg font-medium transition-colors duration-200",children:"Cancel"}),p.jsx("button",{type:"submit",disabled:u,className:"px-6 py-3 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:u?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-nothing-white"}),p.jsx("span",{children:"Uploading..."})]}):p.jsxs(p.Fragment,{children:[p.jsx(Fp,{className:"h-4 w-4"}),p.jsx("span",{children:"Share Glyph"})]})})]})]})}),p.jsxs(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-nothing-gray-900 rounded-lg p-6 border border-nothing-gray-800 mt-6",children:[p.jsx("h2",{className:"text-nothing-white text-lg font-bold mb-4",children:"Debug: Check My Glyphs"}),p.jsx("button",{type:"button",onClick:C,className:"px-4 py-2 bg-nothing-gray-800 hover:bg-nothing-gray-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 mb-4",children:"Check Database"}),w&&p.jsx("div",{className:"bg-nothing-gray-800 rounded-lg p-4",children:p.jsx("pre",{className:"text-nothing-gray-300 text-xs whitespace-pre-wrap overflow-auto",children:w})})]})]})})},S4=()=>{const[n,e]=oP(),[t,r]=j.useState(n.get("q")||""),[o,a]=j.useState([]),[u,h]=j.useState(!1),[f,m]=j.useState("latest"),[w,_]=j.useState("all");j.useEffect(()=>{const C=n.get("q");C&&(r(C),E(C))},[n]);const E=async(C,A=f,z=w)=>{if(C.trim()){h(!0);try{const H=await _t.getGlyphs({search:C,sort:A,limit:100});a(H)}catch(H){console.error("Error searching glyphs:",H),a([])}finally{h(!1)}}},S=C=>{C.preventDefault(),t.trim()&&(e({q:t.trim()}),E(t.trim()))},D=C=>{m(C),t.trim()&&E(t.trim(),C,w)};return p.jsx("div",{className:"min-h-screen bg-nothing-black",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[p.jsx("div",{className:"text-center mb-8",children:p.jsxs(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[p.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-6 glyph-animation",children:p.jsx(Os,{className:"h-8 w-8 text-nothing-white"})}),p.jsx("h1",{className:"text-3xl font-bold text-nothing-white font-nothing mb-4",children:"Search Glyphs"}),p.jsx("p",{className:"text-nothing-gray-400 max-w-2xl mx-auto",children:"Discover custom Nothing Phone(3) glyphs created by the community"})]})}),p.jsx(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"max-w-2xl mx-auto mb-8",children:p.jsxs("form",{onSubmit:S,className:"relative",children:[p.jsx("input",{type:"text",value:t,onChange:C=>r(C.target.value),placeholder:"Search for glyphs, creators, or keywords...",className:"w-full px-6 py-4 pl-14 pr-16 bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200 text-lg"}),p.jsx(Os,{className:"absolute left-4 top-4 h-6 w-6 text-nothing-gray-400"}),p.jsx("button",{type:"submit",className:"absolute right-2 top-2 bottom-2 px-4 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-md font-medium transition-colors duration-200",children:"Search"})]})}),(o.length>0||u)&&p.jsxs(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsx("span",{className:"text-nothing-gray-400 text-sm",children:u?"Searching...":`${o.length} results found`}),t&&p.jsxs("span",{className:"text-nothing-white text-sm",children:['for "',p.jsx("span",{className:"text-nothing-red",children:t}),'"']})]}),p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(qj,{className:"h-4 w-4 text-nothing-gray-400"}),p.jsx("span",{className:"text-nothing-gray-400 text-sm",children:"Sort by:"})]}),p.jsx("div",{className:"flex space-x-2",children:[{value:"latest",label:"Latest",icon:Fj},{value:"popular",label:"Popular",icon:Xi},{value:"liked",label:"Most Liked",icon:nr},{value:"viewed",label:"Most Viewed",icon:tr}].map(({value:C,label:A,icon:z})=>p.jsxs("button",{onClick:()=>D(C),className:`flex items-center space-x-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors duration-200 ${f===C?"bg-nothing-red text-nothing-white":"bg-nothing-gray-800 text-nothing-gray-300 hover:bg-nothing-gray-700"}`,children:[p.jsx(z,{className:"h-4 w-4"}),p.jsx("span",{className:"hidden sm:inline",children:A})]},C))})]})]}),u&&p.jsx("div",{className:"flex items-center justify-center py-12",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-4 glyph-animation",children:p.jsx(Os,{className:"h-8 w-8 text-nothing-white"})}),p.jsx("p",{className:"text-nothing-gray-400",children:"Searching glyphs..."})]})}),!u&&o.length>0&&p.jsx(De.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:o.map((C,A)=>p.jsx(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:A*.1},children:p.jsx($I,{glyph:C})},C.id))}),!u&&t&&o.length===0&&p.jsxs(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-12",children:[p.jsx("div",{className:"w-16 h-16 bg-nothing-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:p.jsx(Os,{className:"h-8 w-8 text-nothing-gray-600"})}),p.jsx("h3",{className:"text-nothing-white text-lg font-medium mb-2",children:"No results found"}),p.jsx("p",{className:"text-nothing-gray-400 mb-6",children:"Try searching with different keywords or browse all glyphs."}),p.jsx(Qe,{to:"/",className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-6 py-3 rounded-lg font-medium transition-colors duration-200",children:"Browse All Glyphs"})]}),!u&&!t&&p.jsxs(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-12",children:[p.jsx("div",{className:"w-16 h-16 bg-nothing-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:p.jsx(Os,{className:"h-8 w-8 text-nothing-gray-600"})}),p.jsx("h3",{className:"text-nothing-white text-lg font-medium mb-2",children:"Start searching"}),p.jsx("p",{className:"text-nothing-gray-400 mb-6",children:"Enter a search term to find glyphs, creators, or specific features."}),p.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:["boot animation","notification","charging","custom"].map(C=>p.jsx("button",{onClick:()=>{r(C),e({q:C}),E(C)},className:"px-3 py-1 bg-nothing-gray-800 hover:bg-nothing-gray-700 text-nothing-gray-300 rounded-full text-sm transition-colors duration-200",children:C},C))})]})]})})},P4=()=>{const[n,e]=j.useState([]),[t,r]=j.useState(!0),{currentUser:o}=oi();return j.useEffect(()=>{(async()=>{if(!o){r(!1);return}try{console.log("Fetching liked glyphs for user:",o.uid);const u=await _t.getUserLikes();console.log("Retrieved liked glyphs:",u),e(u)}catch(u){console.error("Error fetching liked glyphs:",u)}finally{r(!1)}})()},[o]),o?t?p.jsx("div",{className:"min-h-screen bg-nothing-black text-nothing-white flex items-center justify-center",children:p.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-nothing-red"})}):p.jsx("div",{className:"min-h-screen bg-nothing-black text-nothing-white",children:p.jsxs("div",{className:"container mx-auto px-4 py-8",children:[p.jsxs(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[p.jsxs("h1",{className:"text-4xl font-bold mb-2 flex items-center",children:[p.jsx(nr,{className:"h-8 w-8 mr-3 text-nothing-red fill-current"}),"Liked Posts"]}),p.jsxs("p",{className:"text-nothing-gray-400",children:[n.length," glyph",n.length!==1?"s":""," you've liked"]})]}),n.length>0?p.jsx(De.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:n.map((a,u)=>p.jsx(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:u*.1},className:"group",children:p.jsx(Qe,{to:`/glyph/${a.id}`,children:p.jsxs("div",{className:"bg-nothing-gray-900 rounded-lg overflow-hidden border border-nothing-gray-800 hover:border-nothing-gray-700 transition-all duration-300 hover:scale-105",children:[p.jsxs("div",{className:"aspect-square bg-nothing-gray-800 relative overflow-hidden",children:[a.images&&a.images.length>0?p.jsx("img",{src:a.images[0],alt:a.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}):p.jsx("div",{className:"w-full h-full flex items-center justify-center",children:p.jsx("div",{className:"text-nothing-gray-500 text-6xl",children:""})}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-nothing-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:p.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:p.jsxs("div",{className:"flex items-center justify-between text-nothing-white text-sm",children:[p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Xi,{className:"h-4 w-4"}),p.jsx("span",{children:a.downloads||0})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(tr,{className:"h-4 w-4"}),p.jsx("span",{children:a.views||0})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(nr,{className:"h-4 w-4 fill-current text-nothing-red"}),p.jsx("span",{children:a.likes||0})]})]})})})]}),p.jsxs("div",{className:"p-4",children:[p.jsx("h3",{className:"font-semibold text-nothing-white mb-2 line-clamp-2",children:a.title}),p.jsx("p",{className:"text-nothing-gray-400 text-sm mb-3 line-clamp-2",children:a.description}),p.jsxs("div",{className:"flex items-center justify-between text-xs text-nothing-gray-500",children:[p.jsxs("div",{className:"flex items-center space-x-1",children:[p.jsx(zs,{className:"h-3 w-3"}),p.jsx("span",{children:a.creatorUsername})]}),p.jsxs("div",{className:"flex items-center space-x-1",children:[p.jsx(Zm,{className:"h-3 w-3"}),p.jsx("span",{children:a.createdAt?.toDate?a.createdAt.toDate().toLocaleDateString():new Date(a.createdAt).toLocaleDateString()})]})]})]})]})})},a.id))}):p.jsxs(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"text-center py-16",children:[p.jsx(nr,{className:"h-16 w-16 mx-auto mb-4 text-nothing-gray-600"}),p.jsx("h2",{className:"text-2xl font-bold mb-2 text-nothing-gray-400",children:"No liked posts yet"}),p.jsx("p",{className:"text-nothing-gray-500 mb-6",children:"Start exploring glyphs and like the ones you love!"}),p.jsx(Qe,{to:"/",className:"bg-nothing-red text-nothing-white px-6 py-3 rounded-lg font-semibold hover:bg-red-600 transition-colors duration-200",children:"Explore Glyphs"})]})]})}):p.jsx("div",{className:"min-h-screen bg-nothing-black text-nothing-white flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Please log in to view your liked posts"}),p.jsx(Qe,{to:"/login",className:"bg-nothing-red text-nothing-white px-6 py-3 rounded-lg font-semibold hover:bg-red-600 transition-colors duration-200",children:"Log In"})]})})},b4=()=>{const{currentUser:n,userProfile:e,logout:t}=oi(),r=Ar(),[o,a]=j.useState({displayName:"",username:"",email:"",bio:"",profilePicture:"",bannerImage:""}),[u,h]=j.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[f,m]=j.useState(!1),[w,_]=j.useState(!1),[E,S]=j.useState(!1),[D,C]=j.useState(!1),[A,z]=j.useState(""),[H,M]=j.useState(""),[Q,te]=j.useState("profile"),[se,R]=j.useState(""),[P,b]=j.useState(!1),[V,F]=j.useState(null),[B,N]=j.useState(null);j.useEffect(()=>{n&&e&&a({displayName:n.displayName||"",username:e.username||"",email:n.email||"",bio:e.bio||"",profilePicture:e.profilePicture||n.photoURL||"",bannerImage:e.bannerImage||""})},[n,e]);const ke=async Z=>{Z.preventDefault(),C(!0),M(""),z("");try{o.displayName!==n.displayName&&await wp(n,{displayName:o.displayName}),o.profilePicture!==n.photoURL&&await wp(n,{photoURL:o.profilePicture}),o.email!==n.email&&await FA(n,o.email),await _t.updateUser({username:o.username,displayName:o.displayName,bio:o.bio,profilePicture:o.profilePicture,bannerImage:o.bannerImage,updatedAt:new Date}),z("Profile updated successfully!")}catch(X){console.error("Error updating profile:",X),X.code==="auth/requires-recent-login"?M("Please log out and log back in before updating your email."):M("Failed to update profile: "+X.message)}finally{C(!1)}},qe=(Z,X)=>{Z?(F(Z),a(L=>({...L,profilePicture:Z.url}))):X&&(F(null),a(L=>({...L,profilePicture:""})))},Re=(Z,X)=>{Z?(N(Z),a(L=>({...L,bannerImage:Z.url}))):X&&(N(null),a(L=>({...L,bannerImage:""})))},Ce=async Z=>{if(Z.preventDefault(),C(!0),M(""),z(""),u.newPassword!==u.confirmPassword){M("New passwords do not match"),C(!1);return}if(u.newPassword.length<6){M("Password must be at least 6 characters long"),C(!1);return}try{const X=Gi.credential(n.email,u.currentPassword);await f0(n,X),await UA(n,u.newPassword),z("Password updated successfully!"),h({currentPassword:"",newPassword:"",confirmPassword:""})}catch(X){console.error("Error updating password:",X),X.code==="auth/wrong-password"?M("Current password is incorrect"):M("Failed to update password: "+X.message)}finally{C(!1)}},ae=async()=>{M(""),z(""),b(!0);try{if(!se){M("Please enter your current password to confirm deletion."),b(!1);return}const Z=Gi.credential(n.email,se);await f0(n,Z),await _t.deleteUserData(),await n.delete(),z("Account and all glyphs deleted successfully."),t(),r("/")}catch(Z){M("Failed to delete account: "+(Z.message||Z.code))}finally{b(!1)}};return n?p.jsx("div",{className:"min-h-screen bg-nothing-black text-nothing-white",children:p.jsxs("div",{className:"container mx-auto px-4 py-8",children:[p.jsxs(De.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[p.jsxs("h1",{className:"text-4xl font-bold mb-2 flex items-center",children:[p.jsx(Mp,{className:"h-8 w-8 mr-3 text-nothing-red"}),"Settings"]}),p.jsx("p",{className:"text-nothing-gray-400",children:"Manage your account and preferences"})]}),A&&p.jsxs(De.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-green-900/20 border border-green-700 text-green-400 px-4 py-3 rounded-lg mb-6 flex items-center",children:[p.jsx(zj,{className:"h-5 w-5 mr-2"}),A]}),H&&p.jsxs(De.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-900/20 border border-red-700 text-red-400 px-4 py-3 rounded-lg mb-6 flex items-center",children:[p.jsx(Lp,{className:"h-5 w-5 mr-2"}),H]}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[p.jsx(De.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},className:"lg:col-span-1",children:p.jsx("div",{className:"bg-nothing-gray-900 rounded-lg p-6 border border-nothing-gray-800",children:p.jsxs("nav",{className:"space-y-2",children:[p.jsxs("button",{onClick:()=>te("profile"),className:`w-full text-left px-4 py-3 rounded-lg font-medium transition-colors duration-200 flex items-center space-x-3 ${Q==="profile"?"bg-nothing-red text-nothing-white":"text-nothing-gray-400 hover:text-nothing-white hover:bg-nothing-gray-800"}`,children:[p.jsx(zs,{className:"h-5 w-5"}),p.jsx("span",{children:"Profile"})]}),p.jsxs("button",{onClick:()=>te("security"),className:`w-full text-left px-4 py-3 rounded-lg font-medium transition-colors duration-200 flex items-center space-x-3 ${Q==="security"?"bg-nothing-red text-nothing-white":"text-nothing-gray-400 hover:text-nothing-white hover:bg-nothing-gray-800"}`,children:[p.jsx(Fi,{className:"h-5 w-5"}),p.jsx("span",{children:"Security"})]})]})})}),p.jsxs(De.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5},className:"lg:col-span-3",children:[Q==="profile"&&p.jsxs("div",{className:"bg-nothing-gray-900 rounded-lg p-6 border border-nothing-gray-800",children:[p.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Profile Information"}),p.jsxs("form",{onSubmit:ke,className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Banner Image"}),p.jsxs("div",{className:"space-y-4",children:[p.jsx("div",{className:"w-full h-32 bg-nothing-gray-800 rounded-lg border border-nothing-gray-700 overflow-hidden",children:o.bannerImage?p.jsx("img",{src:o.bannerImage,alt:"Banner preview",className:"w-full h-full object-cover"}):p.jsx("div",{className:"w-full h-full flex items-center justify-center",children:p.jsx(Op,{className:"h-8 w-8 text-nothing-gray-600"})})}),p.jsx("div",{className:"bg-nothing-gray-800 rounded-lg p-4",children:p.jsx(iu,{onFileUpload:Re,acceptedTypes:"profile",multiple:!1})}),p.jsx("div",{className:"text-center text-nothing-gray-400",children:p.jsx("span",{className:"px-3 py-1 bg-nothing-gray-800 rounded",children:"OR"})}),p.jsxs("div",{className:"relative",children:[p.jsx(Op,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),p.jsx("input",{type:"url",value:o.bannerImage,onChange:Z=>a(X=>({...X,bannerImage:Z.target.value})),className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"https://example.com/banner-image.jpg",disabled:!!B}),B&&p.jsx("p",{className:"text-sm text-nothing-gray-400 mt-2",children:"Banner image uploaded"})]})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Profile Picture"}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsx("div",{className:"w-20 h-20 bg-nothing-gray-800 rounded-full border border-nothing-gray-700 overflow-hidden flex-shrink-0",children:o.profilePicture?p.jsx("img",{src:o.profilePicture,alt:"Profile preview",className:"w-full h-full object-cover"}):p.jsx("div",{className:"w-full h-full flex items-center justify-center",children:p.jsx(zs,{className:"h-8 w-8 text-nothing-gray-600"})})}),p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:"text-sm text-nothing-gray-300",children:"Upload a new profile picture"}),p.jsx("p",{className:"text-xs text-nothing-gray-500",children:"Recommended: 400x400px or larger"})]})]}),p.jsx("div",{className:"bg-nothing-gray-800 rounded-lg p-4",children:p.jsx(iu,{onFileUpload:qe,acceptedTypes:"profile",multiple:!1})}),p.jsx("div",{className:"text-center text-nothing-gray-400",children:p.jsx("span",{className:"px-3 py-1 bg-nothing-gray-800 rounded",children:"OR"})}),p.jsxs("div",{className:"relative",children:[p.jsx(Bj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),p.jsx("input",{type:"url",value:o.profilePicture,onChange:Z=>a(X=>({...X,profilePicture:Z.target.value})),className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"https://example.com/profile-picture.jpg",disabled:!!V}),V&&p.jsx("p",{className:"text-sm text-nothing-gray-400 mt-2",children:"Profile picture uploaded"})]})]})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Display Name"}),p.jsxs("div",{className:"relative",children:[p.jsx(zs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),p.jsx("input",{type:"text",value:o.displayName,onChange:Z=>a(X=>({...X,displayName:Z.target.value})),className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"Your display name"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Username"}),p.jsx("input",{type:"text",value:o.username,onChange:Z=>a(X=>({...X,username:Z.target.value})),className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"Your username"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Email Address"}),p.jsxs("div",{className:"relative",children:[p.jsx(eg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),p.jsx("input",{type:"email",value:o.email,onChange:Z=>a(X=>({...X,email:Z.target.value})),className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"your@email.com"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Bio"}),p.jsx("textarea",{value:o.bio,onChange:Z=>a(X=>({...X,bio:Z.target.value})),rows:4,className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent resize-none",placeholder:"Tell us about yourself..."})]}),p.jsx("button",{type:"submit",disabled:D,className:"w-full md:w-auto px-6 py-3 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:D?p.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-nothing-white"}):p.jsxs(p.Fragment,{children:[p.jsx(gw,{className:"h-5 w-5"}),p.jsx("span",{children:"Save Changes"})]})})]})]}),Q==="security"&&p.jsxs("div",{className:"space-y-8",children:[p.jsxs("div",{className:"bg-nothing-gray-900 rounded-lg p-6 border border-nothing-gray-800",children:[p.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Change Password"}),p.jsxs("form",{onSubmit:Ce,className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Current Password"}),p.jsxs("div",{className:"relative",children:[p.jsx(Fi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),p.jsx("input",{type:f?"text":"password",value:u.currentPassword,onChange:Z=>h(X=>({...X,currentPassword:Z.target.value})),className:"w-full pl-10 pr-12 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"Enter current password"}),p.jsx("button",{type:"button",onClick:()=>m(!f),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-nothing-gray-500 hover:text-nothing-white",children:f?p.jsx(ha,{className:"h-5 w-5"}):p.jsx(tr,{className:"h-5 w-5"})})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"New Password"}),p.jsxs("div",{className:"relative",children:[p.jsx(Fi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),p.jsx("input",{type:w?"text":"password",value:u.newPassword,onChange:Z=>h(X=>({...X,newPassword:Z.target.value})),className:"w-full pl-10 pr-12 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"Enter new password"}),p.jsx("button",{type:"button",onClick:()=>_(!w),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-nothing-gray-500 hover:text-nothing-white",children:w?p.jsx(ha,{className:"h-5 w-5"}):p.jsx(tr,{className:"h-5 w-5"})})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Confirm New Password"}),p.jsxs("div",{className:"relative",children:[p.jsx(Fi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),p.jsx("input",{type:E?"text":"password",value:u.confirmPassword,onChange:Z=>h(X=>({...X,confirmPassword:Z.target.value})),className:"w-full pl-10 pr-12 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"Confirm new password"}),p.jsx("button",{type:"button",onClick:()=>S(!E),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-nothing-gray-500 hover:text-nothing-white",children:E?p.jsx(ha,{className:"h-5 w-5"}):p.jsx(tr,{className:"h-5 w-5"})})]})]}),p.jsx("button",{type:"submit",disabled:D,className:"w-full md:w-auto px-6 py-3 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:D?p.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-nothing-white"}):p.jsxs(p.Fragment,{children:[p.jsx(gw,{className:"h-5 w-5"}),p.jsx("span",{children:"Update Password"})]})})]})]}),p.jsxs("div",{className:"bg-red-900/10 border border-red-700/30 rounded-lg p-6",children:[p.jsx("h2",{className:"text-2xl font-bold mb-4 text-red-400",children:"Danger Zone"}),p.jsx("p",{className:"text-nothing-gray-400 mb-6",children:"Once you delete your account, there is no going back. This will permanently delete all your glyphs and data. Please be certain."}),p.jsxs("form",{onSubmit:Z=>{Z.preventDefault(),ae()},className:"space-y-4",children:[p.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Current Password"}),p.jsxs("div",{className:"relative mb-4",children:[p.jsx(Fi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),p.jsx("input",{type:"password",value:se,onChange:Z=>R(Z.target.value),className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"Enter your current password",required:!0})]}),p.jsx("button",{type:"submit",disabled:P,className:"px-6 py-3 bg-red-600 hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:P?"Deleting...":"Delete Account"})]})]})]})]})]})]})}):(r("/login"),null)},op=({children:n})=>{const{currentUser:e}=oi();return e?n:p.jsx(D_,{to:"/login"})},x_=({children:n})=>{const{currentUser:e}=oi();return e?p.jsx(D_,{to:"/"}):n};function A4(){return p.jsx(Vj,{children:p.jsx(nP,{children:p.jsxs("div",{className:"App",children:[p.jsx(g4,{}),p.jsxs(K1,{children:[p.jsx(yr,{path:"/",element:p.jsx(w4,{})}),p.jsx(yr,{path:"/login",element:p.jsx(x_,{children:p.jsx(_4,{})})}),p.jsx(yr,{path:"/signup",element:p.jsx(x_,{children:p.jsx(x4,{})})}),p.jsx(yr,{path:"/glyph/:id",element:p.jsx(E4,{})}),p.jsx(yr,{path:"/storefront/:username",element:p.jsx(T4,{})}),p.jsx(yr,{path:"/upload",element:p.jsx(op,{children:p.jsx(I4,{})})}),p.jsx(yr,{path:"/search",element:p.jsx(S4,{})}),p.jsx(yr,{path:"/liked",element:p.jsx(op,{children:p.jsx(P4,{})})}),p.jsx(yr,{path:"/settings",element:p.jsx(op,{children:p.jsx(b4,{})})})]})]})})})}r1.createRoot(document.getElementById("root")).render(p.jsx(j.StrictMode,{children:p.jsx(A4,{})}));
