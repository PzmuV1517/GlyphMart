function rb(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in n)){const a=Object.getOwnPropertyDescriptor(r,o);a&&Object.defineProperty(n,o,a.get?a:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function sb(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var jf={exports:{}},Sl={},Df={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V0;function ib(){if(V0)return Ve;V0=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),w=Symbol.iterator;function E(O){return O===null||typeof O!="object"?null:(O=w&&O[w]||O["@@iterator"],typeof O=="function"?O:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,D={};function N(O,J,fe){this.props=O,this.context=J,this.refs=D,this.updater=fe||S}N.prototype.isReactComponent={},N.prototype.setState=function(O,J){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,J,"setState")},N.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function B(){}B.prototype=N.prototype;function U(O,J,fe){this.props=O,this.context=J,this.refs=D,this.updater=fe||S}var j=U.prototype=new B;j.constructor=U,V(j,N.prototype),j.isPureReactComponent=!0;var K=Array.isArray,Z=Object.prototype.hasOwnProperty,ie={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function I(O,J,fe){var le,ue={},ve=null,De=null;if(J!=null)for(le in J.ref!==void 0&&(De=J.ref),J.key!==void 0&&(ve=""+J.key),J)Z.call(J,le)&&!R.hasOwnProperty(le)&&(ue[le]=J[le]);var Be=arguments.length-2;if(Be===1)ue.children=fe;else if(1<Be){for(var We=Array(Be),it=0;it<Be;it++)We[it]=arguments[it+2];ue.children=We}if(O&&O.defaultProps)for(le in Be=O.defaultProps,Be)ue[le]===void 0&&(ue[le]=Be[le]);return{$$typeof:n,type:O,key:ve,ref:De,props:ue,_owner:ie.current}}function P(O,J){return{$$typeof:n,type:O.type,key:J,ref:O.ref,props:O.props,_owner:O._owner}}function L(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function F(O){var J={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(fe){return J[fe]})}var $=/\/+/g;function A(O,J){return typeof O=="object"&&O!==null&&O.key!=null?F(""+O.key):J.toString(36)}function Ie(O,J,fe,le,ue){var ve=typeof O;(ve==="undefined"||ve==="boolean")&&(O=null);var De=!1;if(O===null)De=!0;else switch(ve){case"string":case"number":De=!0;break;case"object":switch(O.$$typeof){case n:case e:De=!0}}if(De)return De=O,ue=ue(De),O=le===""?"."+A(De,0):le,K(ue)?(fe="",O!=null&&(fe=O.replace($,"$&/")+"/"),Ie(ue,J,fe,"",function(it){return it})):ue!=null&&(L(ue)&&(ue=P(ue,fe+(!ue.key||De&&De.key===ue.key?"":(""+ue.key).replace($,"$&/")+"/")+O)),J.push(ue)),1;if(De=0,le=le===""?".":le+":",K(O))for(var Be=0;Be<O.length;Be++){ve=O[Be];var We=le+A(ve,Be);De+=Ie(ve,J,fe,We,ue)}else if(We=E(O),typeof We=="function")for(O=We.call(O),Be=0;!(ve=O.next()).done;)ve=ve.value,We=le+A(ve,Be++),De+=Ie(ve,J,fe,We,ue);else if(ve==="object")throw J=String(O),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return De}function $e(O,J,fe){if(O==null)return O;var le=[],ue=0;return Ie(O,le,"","",function(ve){return J.call(fe,ve,ue++)}),le}function je(O){if(O._status===-1){var J=O._result;J=J(),J.then(function(fe){(O._status===0||O._status===-1)&&(O._status=1,O._result=fe)},function(fe){(O._status===0||O._status===-1)&&(O._status=2,O._result=fe)}),O._status===-1&&(O._status=0,O._result=J)}if(O._status===1)return O._result.default;throw O._result}var Ce={current:null},oe={transition:null},q={ReactCurrentDispatcher:Ce,ReactCurrentBatchConfig:oe,ReactCurrentOwner:ie};function X(){throw Error("act(...) is not supported in production builds of React.")}return Ve.Children={map:$e,forEach:function(O,J,fe){$e(O,function(){J.apply(this,arguments)},fe)},count:function(O){var J=0;return $e(O,function(){J++}),J},toArray:function(O){return $e(O,function(J){return J})||[]},only:function(O){if(!L(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Ve.Component=N,Ve.Fragment=t,Ve.Profiler=o,Ve.PureComponent=U,Ve.StrictMode=r,Ve.Suspense=p,Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q,Ve.act=X,Ve.cloneElement=function(O,J,fe){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var le=V({},O.props),ue=O.key,ve=O.ref,De=O._owner;if(J!=null){if(J.ref!==void 0&&(ve=J.ref,De=ie.current),J.key!==void 0&&(ue=""+J.key),O.type&&O.type.defaultProps)var Be=O.type.defaultProps;for(We in J)Z.call(J,We)&&!R.hasOwnProperty(We)&&(le[We]=J[We]===void 0&&Be!==void 0?Be[We]:J[We])}var We=arguments.length-2;if(We===1)le.children=fe;else if(1<We){Be=Array(We);for(var it=0;it<We;it++)Be[it]=arguments[it+2];le.children=Be}return{$$typeof:n,type:O.type,key:ue,ref:ve,props:le,_owner:De}},Ve.createContext=function(O){return O={$$typeof:c,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:a,_context:O},O.Consumer=O},Ve.createElement=I,Ve.createFactory=function(O){var J=I.bind(null,O);return J.type=O,J},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(O){return{$$typeof:d,render:O}},Ve.isValidElement=L,Ve.lazy=function(O){return{$$typeof:x,_payload:{_status:-1,_result:O},_init:je}},Ve.memo=function(O,J){return{$$typeof:m,type:O,compare:J===void 0?null:J}},Ve.startTransition=function(O){var J=oe.transition;oe.transition={};try{O()}finally{oe.transition=J}},Ve.unstable_act=X,Ve.useCallback=function(O,J){return Ce.current.useCallback(O,J)},Ve.useContext=function(O){return Ce.current.useContext(O)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(O){return Ce.current.useDeferredValue(O)},Ve.useEffect=function(O,J){return Ce.current.useEffect(O,J)},Ve.useId=function(){return Ce.current.useId()},Ve.useImperativeHandle=function(O,J,fe){return Ce.current.useImperativeHandle(O,J,fe)},Ve.useInsertionEffect=function(O,J){return Ce.current.useInsertionEffect(O,J)},Ve.useLayoutEffect=function(O,J){return Ce.current.useLayoutEffect(O,J)},Ve.useMemo=function(O,J){return Ce.current.useMemo(O,J)},Ve.useReducer=function(O,J,fe){return Ce.current.useReducer(O,J,fe)},Ve.useRef=function(O){return Ce.current.useRef(O)},Ve.useState=function(O){return Ce.current.useState(O)},Ve.useSyncExternalStore=function(O,J,fe){return Ce.current.useSyncExternalStore(O,J,fe)},Ve.useTransition=function(){return Ce.current.useTransition()},Ve.version="18.3.1",Ve}var L0;function im(){return L0||(L0=1,Df.exports=ib()),Df.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O0;function ob(){if(O0)return Sl;O0=1;var n=im(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(d,p,m){var x,w={},E=null,S=null;m!==void 0&&(E=""+m),p.key!==void 0&&(E=""+p.key),p.ref!==void 0&&(S=p.ref);for(x in p)r.call(p,x)&&!a.hasOwnProperty(x)&&(w[x]=p[x]);if(d&&d.defaultProps)for(x in p=d.defaultProps,p)w[x]===void 0&&(w[x]=p[x]);return{$$typeof:e,type:d,key:E,ref:S,props:w,_owner:o.current}}return Sl.Fragment=t,Sl.jsx=c,Sl.jsxs=c,Sl}var M0;function ab(){return M0||(M0=1,jf.exports=ob()),jf.exports}var h=ab(),C=im();const jh=sb(C),lb=rb({__proto__:null,default:jh},[C]);var Ou={},Vf={exports:{}},hn={},Lf={exports:{}},Of={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U0;function cb(){return U0||(U0=1,function(n){function e(oe,q){var X=oe.length;oe.push(q);e:for(;0<X;){var O=X-1>>>1,J=oe[O];if(0<o(J,q))oe[O]=q,oe[X]=J,X=O;else break e}}function t(oe){return oe.length===0?null:oe[0]}function r(oe){if(oe.length===0)return null;var q=oe[0],X=oe.pop();if(X!==q){oe[0]=X;e:for(var O=0,J=oe.length,fe=J>>>1;O<fe;){var le=2*(O+1)-1,ue=oe[le],ve=le+1,De=oe[ve];if(0>o(ue,X))ve<J&&0>o(De,ue)?(oe[O]=De,oe[ve]=X,O=ve):(oe[O]=ue,oe[le]=X,O=le);else if(ve<J&&0>o(De,X))oe[O]=De,oe[ve]=X,O=ve;else break e}}return q}function o(oe,q){var X=oe.sortIndex-q.sortIndex;return X!==0?X:oe.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var p=[],m=[],x=1,w=null,E=3,S=!1,V=!1,D=!1,N=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(oe){for(var q=t(m);q!==null;){if(q.callback===null)r(m);else if(q.startTime<=oe)r(m),q.sortIndex=q.expirationTime,e(p,q);else break;q=t(m)}}function K(oe){if(D=!1,j(oe),!V)if(t(p)!==null)V=!0,je(Z);else{var q=t(m);q!==null&&Ce(K,q.startTime-oe)}}function Z(oe,q){V=!1,D&&(D=!1,B(I),I=-1),S=!0;var X=E;try{for(j(q),w=t(p);w!==null&&(!(w.expirationTime>q)||oe&&!F());){var O=w.callback;if(typeof O=="function"){w.callback=null,E=w.priorityLevel;var J=O(w.expirationTime<=q);q=n.unstable_now(),typeof J=="function"?w.callback=J:w===t(p)&&r(p),j(q)}else r(p);w=t(p)}if(w!==null)var fe=!0;else{var le=t(m);le!==null&&Ce(K,le.startTime-q),fe=!1}return fe}finally{w=null,E=X,S=!1}}var ie=!1,R=null,I=-1,P=5,L=-1;function F(){return!(n.unstable_now()-L<P)}function $(){if(R!==null){var oe=n.unstable_now();L=oe;var q=!0;try{q=R(!0,oe)}finally{q?A():(ie=!1,R=null)}}else ie=!1}var A;if(typeof U=="function")A=function(){U($)};else if(typeof MessageChannel<"u"){var Ie=new MessageChannel,$e=Ie.port2;Ie.port1.onmessage=$,A=function(){$e.postMessage(null)}}else A=function(){N($,0)};function je(oe){R=oe,ie||(ie=!0,A())}function Ce(oe,q){I=N(function(){oe(n.unstable_now())},q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(oe){oe.callback=null},n.unstable_continueExecution=function(){V||S||(V=!0,je(Z))},n.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<oe?Math.floor(1e3/oe):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(oe){switch(E){case 1:case 2:case 3:var q=3;break;default:q=E}var X=E;E=q;try{return oe()}finally{E=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(oe,q){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var X=E;E=oe;try{return q()}finally{E=X}},n.unstable_scheduleCallback=function(oe,q,X){var O=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?O+X:O):X=O,oe){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=X+J,oe={id:x++,callback:q,priorityLevel:oe,startTime:X,expirationTime:J,sortIndex:-1},X>O?(oe.sortIndex=X,e(m,oe),t(p)===null&&oe===t(m)&&(D?(B(I),I=-1):D=!0,Ce(K,X-O))):(oe.sortIndex=J,e(p,oe),V||S||(V=!0,je(Z))),oe},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(oe){var q=E;return function(){var X=E;E=q;try{return oe.apply(this,arguments)}finally{E=X}}}}(Of)),Of}var F0;function ub(){return F0||(F0=1,Lf.exports=cb()),Lf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B0;function hb(){if(B0)return hn;B0=1;var n=im(),e=ub();function t(s){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+s,l=1;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function a(s,i){c(s,i),c(s+"Capture",i)}function c(s,i){for(o[s]=i,s=0;s<i.length;s++)r.add(i[s])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},w={};function E(s){return p.call(w,s)?!0:p.call(x,s)?!1:m.test(s)?w[s]=!0:(x[s]=!0,!1)}function S(s,i,l,f){if(l!==null&&l.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return f?!1:l!==null?!l.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function V(s,i,l,f){if(i===null||typeof i>"u"||S(s,i,l,f))return!0;if(f)return!1;if(l!==null)switch(l.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function D(s,i,l,f,g,v,T){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=l,this.propertyName=s,this.type=i,this.sanitizeURL=v,this.removeEmptyString=T}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){N[s]=new D(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var i=s[0];N[i]=new D(i,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){N[s]=new D(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){N[s]=new D(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){N[s]=new D(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){N[s]=new D(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){N[s]=new D(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){N[s]=new D(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){N[s]=new D(s,5,!1,s.toLowerCase(),null,!1,!1)});var B=/[\-:]([a-z])/g;function U(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var i=s.replace(B,U);N[i]=new D(i,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var i=s.replace(B,U);N[i]=new D(i,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var i=s.replace(B,U);N[i]=new D(i,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){N[s]=new D(s,1,!1,s.toLowerCase(),null,!1,!1)}),N.xlinkHref=new D("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){N[s]=new D(s,1,!1,s.toLowerCase(),null,!0,!0)});function j(s,i,l,f){var g=N.hasOwnProperty(i)?N[i]:null;(g!==null?g.type!==0:f||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(V(i,l,g,f)&&(l=null),f||g===null?E(i)&&(l===null?s.removeAttribute(i):s.setAttribute(i,""+l)):g.mustUseProperty?s[g.propertyName]=l===null?g.type===3?!1:"":l:(i=g.attributeName,f=g.attributeNamespace,l===null?s.removeAttribute(i):(g=g.type,l=g===3||g===4&&l===!0?"":""+l,f?s.setAttributeNS(f,i,l):s.setAttribute(i,l))))}var K=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Z=Symbol.for("react.element"),ie=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),F=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),Ie=Symbol.for("react.suspense_list"),$e=Symbol.for("react.memo"),je=Symbol.for("react.lazy"),Ce=Symbol.for("react.offscreen"),oe=Symbol.iterator;function q(s){return s===null||typeof s!="object"?null:(s=oe&&s[oe]||s["@@iterator"],typeof s=="function"?s:null)}var X=Object.assign,O;function J(s){if(O===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);O=i&&i[1]||""}return`
`+O+s}var fe=!1;function le(s,i){if(!s||fe)return"";fe=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(Q){var f=Q}Reflect.construct(s,[],i)}else{try{i.call()}catch(Q){f=Q}s.call(i.prototype)}else{try{throw Error()}catch(Q){f=Q}s()}}catch(Q){if(Q&&f&&typeof Q.stack=="string"){for(var g=Q.stack.split(`
`),v=f.stack.split(`
`),T=g.length-1,k=v.length-1;1<=T&&0<=k&&g[T]!==v[k];)k--;for(;1<=T&&0<=k;T--,k--)if(g[T]!==v[k]){if(T!==1||k!==1)do if(T--,k--,0>k||g[T]!==v[k]){var M=`
`+g[T].replace(" at new "," at ");return s.displayName&&M.includes("<anonymous>")&&(M=M.replace("<anonymous>",s.displayName)),M}while(1<=T&&0<=k);break}}}finally{fe=!1,Error.prepareStackTrace=l}return(s=s?s.displayName||s.name:"")?J(s):""}function ue(s){switch(s.tag){case 5:return J(s.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return s=le(s.type,!1),s;case 11:return s=le(s.type.render,!1),s;case 1:return s=le(s.type,!0),s;default:return""}}function ve(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case R:return"Fragment";case ie:return"Portal";case P:return"Profiler";case I:return"StrictMode";case A:return"Suspense";case Ie:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case F:return(s.displayName||"Context")+".Consumer";case L:return(s._context.displayName||"Context")+".Provider";case $:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case $e:return i=s.displayName||null,i!==null?i:ve(s.type)||"Memo";case je:i=s._payload,s=s._init;try{return ve(s(i))}catch{}}return null}function De(s){var i=s.type;switch(s.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=i.render,s=s.displayName||s.name||"",i.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ve(i);case 8:return i===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Be(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function We(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function it(s){var i=We(s)?"checked":"value",l=Object.getOwnPropertyDescriptor(s.constructor.prototype,i),f=""+s[i];if(!s.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,v=l.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return g.call(this)},set:function(T){f=""+T,v.call(this,T)}}),Object.defineProperty(s,i,{enumerable:l.enumerable}),{getValue:function(){return f},setValue:function(T){f=""+T},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function Dt(s){s._valueTracker||(s._valueTracker=it(s))}function oi(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var l=i.getValue(),f="";return s&&(f=We(s)?s.checked?"true":"false":s.value),s=f,s!==l?(i.setValue(s),!0):!1}function us(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function ai(s,i){var l=i.checked;return X({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??s._wrapperState.initialChecked})}function ao(s,i){var l=i.defaultValue==null?"":i.defaultValue,f=i.checked!=null?i.checked:i.defaultChecked;l=Be(i.value!=null?i.value:l),s._wrapperState={initialChecked:f,initialValue:l,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Aa(s,i){i=i.checked,i!=null&&j(s,"checked",i,!1)}function Ca(s,i){Aa(s,i);var l=Be(i.value),f=i.type;if(l!=null)f==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+l):s.value!==""+l&&(s.value=""+l);else if(f==="submit"||f==="reset"){s.removeAttribute("value");return}i.hasOwnProperty("value")?lo(s,i.type,l):i.hasOwnProperty("defaultValue")&&lo(s,i.type,Be(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(s.defaultChecked=!!i.defaultChecked)}function Ec(s,i,l){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var f=i.type;if(!(f!=="submit"&&f!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+s._wrapperState.initialValue,l||i===s.value||(s.value=i),s.defaultValue=i}l=s.name,l!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,l!==""&&(s.name=l)}function lo(s,i,l){(i!=="number"||us(s.ownerDocument)!==s)&&(l==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+l&&(s.defaultValue=""+l))}var Rr=Array.isArray;function jr(s,i,l,f){if(s=s.options,i){i={};for(var g=0;g<l.length;g++)i["$"+l[g]]=!0;for(l=0;l<s.length;l++)g=i.hasOwnProperty("$"+s[l].value),s[l].selected!==g&&(s[l].selected=g),g&&f&&(s[l].defaultSelected=!0)}else{for(l=""+Be(l),i=null,g=0;g<s.length;g++){if(s[g].value===l){s[g].selected=!0,f&&(s[g].defaultSelected=!0);return}i!==null||s[g].disabled||(i=s[g])}i!==null&&(i.selected=!0)}}function Ra(s,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return X({},i,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function co(s,i){var l=i.value;if(l==null){if(l=i.children,i=i.defaultValue,l!=null){if(i!=null)throw Error(t(92));if(Rr(l)){if(1<l.length)throw Error(t(93));l=l[0]}i=l}i==null&&(i=""),l=i}s._wrapperState={initialValue:Be(l)}}function uo(s,i){var l=Be(i.value),f=Be(i.defaultValue);l!=null&&(l=""+l,l!==s.value&&(s.value=l),i.defaultValue==null&&s.defaultValue!==l&&(s.defaultValue=l)),f!=null&&(s.defaultValue=""+f)}function ja(s){var i=s.textContent;i===s._wrapperState.initialValue&&i!==""&&i!==null&&(s.value=i)}function _t(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Et(s,i){return s==null||s==="http://www.w3.org/1999/xhtml"?_t(i):s==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Dr,Da=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,l,f,g){MSApp.execUnsafeLocalFunction(function(){return s(i,l,f,g)})}:s}(function(s,i){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=i;else{for(Dr=Dr||document.createElement("div"),Dr.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Dr.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;i.firstChild;)s.appendChild(i.firstChild)}});function hs(s,i){if(i){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=i;return}}s.textContent=i}var li={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ci=["Webkit","ms","Moz","O"];Object.keys(li).forEach(function(s){ci.forEach(function(i){i=i+s.charAt(0).toUpperCase()+s.substring(1),li[i]=li[s]})});function Va(s,i,l){return i==null||typeof i=="boolean"||i===""?"":l||typeof i!="number"||i===0||li.hasOwnProperty(s)&&li[s]?(""+i).trim():i+"px"}function La(s,i){s=s.style;for(var l in i)if(i.hasOwnProperty(l)){var f=l.indexOf("--")===0,g=Va(l,i[l],f);l==="float"&&(l="cssFloat"),f?s.setProperty(l,g):s[l]=g}}var Oa=X({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ma(s,i){if(i){if(Oa[s]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Ua(s,i){if(s.indexOf("-")===-1)return typeof i.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ui=null;function ho(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var fo=null,Sn=null,ur=null;function po(s){if(s=cl(s)){if(typeof fo!="function")throw Error(t(280));var i=s.stateNode;i&&(i=Jc(i),fo(s.stateNode,s.type,i))}}function hr(s){Sn?ur?ur.push(s):ur=[s]:Sn=s}function Fa(){if(Sn){var s=Sn,i=ur;if(ur=Sn=null,po(s),i)for(s=0;s<i.length;s++)po(i[s])}}function hi(s,i){return s(i)}function Ba(){}var Vr=!1;function za(s,i,l){if(Vr)return s(i,l);Vr=!0;try{return hi(s,i,l)}finally{Vr=!1,(Sn!==null||ur!==null)&&(Ba(),Fa())}}function dt(s,i){var l=s.stateNode;if(l===null)return null;var f=Jc(l);if(f===null)return null;l=f[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(t(231,i,typeof l));return l}var mo=!1;if(d)try{var Bn={};Object.defineProperty(Bn,"passive",{get:function(){mo=!0}}),window.addEventListener("test",Bn,Bn),window.removeEventListener("test",Bn,Bn)}catch{mo=!1}function di(s,i,l,f,g,v,T,k,M){var Q=Array.prototype.slice.call(arguments,3);try{i.apply(l,Q)}catch(te){this.onError(te)}}var fi=!1,go=null,zn=!1,$a=null,od={onError:function(s){fi=!0,go=s}};function yo(s,i,l,f,g,v,T,k,M){fi=!1,go=null,di.apply(od,arguments)}function Tc(s,i,l,f,g,v,T,k,M){if(yo.apply(this,arguments),fi){if(fi){var Q=go;fi=!1,go=null}else throw Error(t(198));zn||(zn=!0,$a=Q)}}function $n(s){var i=s,l=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(l=i.return),s=i.return;while(s)}return i.tag===3?l:null}function pi(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function qn(s){if($n(s)!==s)throw Error(t(188))}function Sc(s){var i=s.alternate;if(!i){if(i=$n(s),i===null)throw Error(t(188));return i!==s?null:s}for(var l=s,f=i;;){var g=l.return;if(g===null)break;var v=g.alternate;if(v===null){if(f=g.return,f!==null){l=f;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===l)return qn(g),s;if(v===f)return qn(g),i;v=v.sibling}throw Error(t(188))}if(l.return!==f.return)l=g,f=v;else{for(var T=!1,k=g.child;k;){if(k===l){T=!0,l=g,f=v;break}if(k===f){T=!0,f=g,l=v;break}k=k.sibling}if(!T){for(k=v.child;k;){if(k===l){T=!0,l=v,f=g;break}if(k===f){T=!0,f=v,l=g;break}k=k.sibling}if(!T)throw Error(t(189))}}if(l.alternate!==f)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?s:i}function qa(s){return s=Sc(s),s!==null?vo(s):null}function vo(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var i=vo(s);if(i!==null)return i;s=s.sibling}return null}var xo=e.unstable_scheduleCallback,Ga=e.unstable_cancelCallback,bc=e.unstable_shouldYield,ad=e.unstable_requestPaint,Je=e.unstable_now,Ic=e.unstable_getCurrentPriorityLevel,mi=e.unstable_ImmediatePriority,ds=e.unstable_UserBlockingPriority,bn=e.unstable_NormalPriority,Ha=e.unstable_LowPriority,Pc=e.unstable_IdlePriority,gi=null,mn=null;function Nc(s){if(mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(gi,s,void 0,(s.current.flags&128)===128)}catch{}}var Jt=Math.clz32?Math.clz32:Ac,Wa=Math.log,kc=Math.LN2;function Ac(s){return s>>>=0,s===0?32:31-(Wa(s)/kc|0)|0}var wo=64,_o=4194304;function fs(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function yi(s,i){var l=s.pendingLanes;if(l===0)return 0;var f=0,g=s.suspendedLanes,v=s.pingedLanes,T=l&268435455;if(T!==0){var k=T&~g;k!==0?f=fs(k):(v&=T,v!==0&&(f=fs(v)))}else T=l&~g,T!==0?f=fs(T):v!==0&&(f=fs(v));if(f===0)return 0;if(i!==0&&i!==f&&(i&g)===0&&(g=f&-f,v=i&-i,g>=v||g===16&&(v&4194240)!==0))return i;if((f&4)!==0&&(f|=l&16),i=s.entangledLanes,i!==0)for(s=s.entanglements,i&=f;0<i;)l=31-Jt(i),g=1<<l,f|=s[l],i&=~g;return f}function ld(s,i){switch(s){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lr(s,i){for(var l=s.suspendedLanes,f=s.pingedLanes,g=s.expirationTimes,v=s.pendingLanes;0<v;){var T=31-Jt(v),k=1<<T,M=g[T];M===-1?((k&l)===0||(k&f)!==0)&&(g[T]=ld(k,i)):M<=i&&(s.expiredLanes|=k),v&=~k}}function gn(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function vi(){var s=wo;return wo<<=1,(wo&4194240)===0&&(wo=64),s}function ps(s){for(var i=[],l=0;31>l;l++)i.push(s);return i}function ms(s,i,l){s.pendingLanes|=i,i!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,i=31-Jt(i),s[i]=l}function Ye(s,i){var l=s.pendingLanes&~i;s.pendingLanes=i,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=i,s.mutableReadLanes&=i,s.entangledLanes&=i,i=s.entanglements;var f=s.eventTimes;for(s=s.expirationTimes;0<l;){var g=31-Jt(l),v=1<<g;i[g]=0,f[g]=-1,s[g]=-1,l&=~v}}function gs(s,i){var l=s.entangledLanes|=i;for(s=s.entanglements;l;){var f=31-Jt(l),g=1<<f;g&i|s[f]&i&&(s[f]|=i),l&=~g}}var Oe=0;function ys(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Cc,Eo,Rc,jc,Dc,Ka=!1,dr=[],Vt=null,Gn=null,Hn=null,vs=new Map,In=new Map,fr=[],cd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vc(s,i){switch(s){case"focusin":case"focusout":Vt=null;break;case"dragenter":case"dragleave":Gn=null;break;case"mouseover":case"mouseout":Hn=null;break;case"pointerover":case"pointerout":vs.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":In.delete(i.pointerId)}}function rn(s,i,l,f,g,v){return s===null||s.nativeEvent!==v?(s={blockedOn:i,domEventName:l,eventSystemFlags:f,nativeEvent:v,targetContainers:[g]},i!==null&&(i=cl(i),i!==null&&Eo(i)),s):(s.eventSystemFlags|=f,i=s.targetContainers,g!==null&&i.indexOf(g)===-1&&i.push(g),s)}function ud(s,i,l,f,g){switch(i){case"focusin":return Vt=rn(Vt,s,i,l,f,g),!0;case"dragenter":return Gn=rn(Gn,s,i,l,f,g),!0;case"mouseover":return Hn=rn(Hn,s,i,l,f,g),!0;case"pointerover":var v=g.pointerId;return vs.set(v,rn(vs.get(v)||null,s,i,l,f,g)),!0;case"gotpointercapture":return v=g.pointerId,In.set(v,rn(In.get(v)||null,s,i,l,f,g)),!0}return!1}function Lc(s){var i=Ti(s.target);if(i!==null){var l=$n(i);if(l!==null){if(i=l.tag,i===13){if(i=pi(l),i!==null){s.blockedOn=i,Dc(s.priority,function(){Rc(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Or(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var l=To(s.domEventName,s.eventSystemFlags,i[0],s.nativeEvent);if(l===null){l=s.nativeEvent;var f=new l.constructor(l.type,l);ui=f,l.target.dispatchEvent(f),ui=null}else return i=cl(l),i!==null&&Eo(i),s.blockedOn=l,!1;i.shift()}return!0}function xi(s,i,l){Or(s)&&l.delete(i)}function Oc(){Ka=!1,Vt!==null&&Or(Vt)&&(Vt=null),Gn!==null&&Or(Gn)&&(Gn=null),Hn!==null&&Or(Hn)&&(Hn=null),vs.forEach(xi),In.forEach(xi)}function Wn(s,i){s.blockedOn===i&&(s.blockedOn=null,Ka||(Ka=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Oc)))}function Kn(s){function i(g){return Wn(g,s)}if(0<dr.length){Wn(dr[0],s);for(var l=1;l<dr.length;l++){var f=dr[l];f.blockedOn===s&&(f.blockedOn=null)}}for(Vt!==null&&Wn(Vt,s),Gn!==null&&Wn(Gn,s),Hn!==null&&Wn(Hn,s),vs.forEach(i),In.forEach(i),l=0;l<fr.length;l++)f=fr[l],f.blockedOn===s&&(f.blockedOn=null);for(;0<fr.length&&(l=fr[0],l.blockedOn===null);)Lc(l),l.blockedOn===null&&fr.shift()}var Mr=K.ReactCurrentBatchConfig,xs=!0;function rt(s,i,l,f){var g=Oe,v=Mr.transition;Mr.transition=null;try{Oe=1,Qa(s,i,l,f)}finally{Oe=g,Mr.transition=v}}function hd(s,i,l,f){var g=Oe,v=Mr.transition;Mr.transition=null;try{Oe=4,Qa(s,i,l,f)}finally{Oe=g,Mr.transition=v}}function Qa(s,i,l,f){if(xs){var g=To(s,i,l,f);if(g===null)Ed(s,i,f,wi,l),Vc(s,f);else if(ud(g,s,i,l,f))f.stopPropagation();else if(Vc(s,f),i&4&&-1<cd.indexOf(s)){for(;g!==null;){var v=cl(g);if(v!==null&&Cc(v),v=To(s,i,l,f),v===null&&Ed(s,i,f,wi,l),v===g)break;g=v}g!==null&&f.stopPropagation()}else Ed(s,i,f,null,l)}}var wi=null;function To(s,i,l,f){if(wi=null,s=ho(f),s=Ti(s),s!==null)if(i=$n(s),i===null)s=null;else if(l=i.tag,l===13){if(s=pi(i),s!==null)return s;s=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null);return wi=s,null}function Ya(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ic()){case mi:return 1;case ds:return 4;case bn:case Ha:return 16;case Pc:return 536870912;default:return 16}default:return 16}}var yn=null,So=null,sn=null;function Xa(){if(sn)return sn;var s,i=So,l=i.length,f,g="value"in yn?yn.value:yn.textContent,v=g.length;for(s=0;s<l&&i[s]===g[s];s++);var T=l-s;for(f=1;f<=T&&i[l-f]===g[v-f];f++);return sn=g.slice(s,1<f?1-f:void 0)}function bo(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function pr(){return!0}function Ja(){return!1}function Lt(s){function i(l,f,g,v,T){this._reactName=l,this._targetInst=g,this.type=f,this.nativeEvent=v,this.target=T,this.currentTarget=null;for(var k in s)s.hasOwnProperty(k)&&(l=s[k],this[k]=l?l(v):v[k]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?pr:Ja,this.isPropagationStopped=Ja,this}return X(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=pr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=pr)},persist:function(){},isPersistent:pr}),i}var Qn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Io=Lt(Qn),mr=X({},Qn,{view:0,detail:0}),dd=Lt(mr),Po,Ur,ws,_i=X({},mr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ws&&(ws&&s.type==="mousemove"?(Po=s.screenX-ws.screenX,Ur=s.screenY-ws.screenY):Ur=Po=0,ws=s),Po)},movementY:function(s){return"movementY"in s?s.movementY:Ur}}),No=Lt(_i),Za=X({},_i,{dataTransfer:0}),Mc=Lt(Za),ko=X({},mr,{relatedTarget:0}),Ao=Lt(ko),Uc=X({},Qn,{animationName:0,elapsedTime:0,pseudoElement:0}),Fr=Lt(Uc),Fc=X({},Qn,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Bc=Lt(Fc),zc=X({},Qn,{data:0}),el=Lt(zc),Co={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$c={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qc(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=$c[s])?!!i[s]:!1}function gr(){return qc}var u=X({},mr,{key:function(s){if(s.key){var i=Co[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=bo(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Zt[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gr,charCode:function(s){return s.type==="keypress"?bo(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?bo(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),y=Lt(u),_=X({},_i,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),b=Lt(_),G=X({},mr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gr}),Y=Lt(G),ce=X({},Qn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ke=Lt(ce),Tt=X({},_i,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Ue=Lt(Tt),kt=[9,13,27,32],yt=d&&"CompositionEvent"in window,Pn=null;d&&"documentMode"in document&&(Pn=document.documentMode);var vn=d&&"TextEvent"in window&&!Pn,Ei=d&&(!yt||Pn&&8<Pn&&11>=Pn),Ro=" ",kg=!1;function Ag(s,i){switch(s){case"keyup":return kt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cg(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var jo=!1;function eS(s,i){switch(s){case"compositionend":return Cg(i);case"keypress":return i.which!==32?null:(kg=!0,Ro);case"textInput":return s=i.data,s===Ro&&kg?null:s;default:return null}}function tS(s,i){if(jo)return s==="compositionend"||!yt&&Ag(s,i)?(s=Xa(),sn=So=yn=null,jo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ei&&i.locale!=="ko"?null:i.data;default:return null}}var nS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rg(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!nS[s.type]:i==="textarea"}function jg(s,i,l,f){hr(f),i=Qc(i,"onChange"),0<i.length&&(l=new Io("onChange","change",null,l,f),s.push({event:l,listeners:i}))}var tl=null,nl=null;function rS(s){Xg(s,0)}function Gc(s){var i=Mo(s);if(oi(i))return s}function sS(s,i){if(s==="change")return i}var Dg=!1;if(d){var fd;if(d){var pd="oninput"in document;if(!pd){var Vg=document.createElement("div");Vg.setAttribute("oninput","return;"),pd=typeof Vg.oninput=="function"}fd=pd}else fd=!1;Dg=fd&&(!document.documentMode||9<document.documentMode)}function Lg(){tl&&(tl.detachEvent("onpropertychange",Og),nl=tl=null)}function Og(s){if(s.propertyName==="value"&&Gc(nl)){var i=[];jg(i,nl,s,ho(s)),za(rS,i)}}function iS(s,i,l){s==="focusin"?(Lg(),tl=i,nl=l,tl.attachEvent("onpropertychange",Og)):s==="focusout"&&Lg()}function oS(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Gc(nl)}function aS(s,i){if(s==="click")return Gc(i)}function lS(s,i){if(s==="input"||s==="change")return Gc(i)}function cS(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var Yn=typeof Object.is=="function"?Object.is:cS;function rl(s,i){if(Yn(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var l=Object.keys(s),f=Object.keys(i);if(l.length!==f.length)return!1;for(f=0;f<l.length;f++){var g=l[f];if(!p.call(i,g)||!Yn(s[g],i[g]))return!1}return!0}function Mg(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Ug(s,i){var l=Mg(s);s=0;for(var f;l;){if(l.nodeType===3){if(f=s+l.textContent.length,s<=i&&f>=i)return{node:l,offset:i-s};s=f}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Mg(l)}}function Fg(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?Fg(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function Bg(){for(var s=window,i=us();i instanceof s.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)s=i.contentWindow;else break;i=us(s.document)}return i}function md(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}function uS(s){var i=Bg(),l=s.focusedElem,f=s.selectionRange;if(i!==l&&l&&l.ownerDocument&&Fg(l.ownerDocument.documentElement,l)){if(f!==null&&md(l)){if(i=f.start,s=f.end,s===void 0&&(s=i),"selectionStart"in l)l.selectionStart=i,l.selectionEnd=Math.min(s,l.value.length);else if(s=(i=l.ownerDocument||document)&&i.defaultView||window,s.getSelection){s=s.getSelection();var g=l.textContent.length,v=Math.min(f.start,g);f=f.end===void 0?v:Math.min(f.end,g),!s.extend&&v>f&&(g=f,f=v,v=g),g=Ug(l,v);var T=Ug(l,f);g&&T&&(s.rangeCount!==1||s.anchorNode!==g.node||s.anchorOffset!==g.offset||s.focusNode!==T.node||s.focusOffset!==T.offset)&&(i=i.createRange(),i.setStart(g.node,g.offset),s.removeAllRanges(),v>f?(s.addRange(i),s.extend(T.node,T.offset)):(i.setEnd(T.node,T.offset),s.addRange(i)))}}for(i=[],s=l;s=s.parentNode;)s.nodeType===1&&i.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<i.length;l++)s=i[l],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var hS=d&&"documentMode"in document&&11>=document.documentMode,Do=null,gd=null,sl=null,yd=!1;function zg(s,i,l){var f=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;yd||Do==null||Do!==us(f)||(f=Do,"selectionStart"in f&&md(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),sl&&rl(sl,f)||(sl=f,f=Qc(gd,"onSelect"),0<f.length&&(i=new Io("onSelect","select",null,i,l),s.push({event:i,listeners:f}),i.target=Do)))}function Hc(s,i){var l={};return l[s.toLowerCase()]=i.toLowerCase(),l["Webkit"+s]="webkit"+i,l["Moz"+s]="moz"+i,l}var Vo={animationend:Hc("Animation","AnimationEnd"),animationiteration:Hc("Animation","AnimationIteration"),animationstart:Hc("Animation","AnimationStart"),transitionend:Hc("Transition","TransitionEnd")},vd={},$g={};d&&($g=document.createElement("div").style,"AnimationEvent"in window||(delete Vo.animationend.animation,delete Vo.animationiteration.animation,delete Vo.animationstart.animation),"TransitionEvent"in window||delete Vo.transitionend.transition);function Wc(s){if(vd[s])return vd[s];if(!Vo[s])return s;var i=Vo[s],l;for(l in i)if(i.hasOwnProperty(l)&&l in $g)return vd[s]=i[l];return s}var qg=Wc("animationend"),Gg=Wc("animationiteration"),Hg=Wc("animationstart"),Wg=Wc("transitionend"),Kg=new Map,Qg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _s(s,i){Kg.set(s,i),a(i,[s])}for(var xd=0;xd<Qg.length;xd++){var wd=Qg[xd],dS=wd.toLowerCase(),fS=wd[0].toUpperCase()+wd.slice(1);_s(dS,"on"+fS)}_s(qg,"onAnimationEnd"),_s(Gg,"onAnimationIteration"),_s(Hg,"onAnimationStart"),_s("dblclick","onDoubleClick"),_s("focusin","onFocus"),_s("focusout","onBlur"),_s(Wg,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pS=new Set("cancel close invalid load scroll toggle".split(" ").concat(il));function Yg(s,i,l){var f=s.type||"unknown-event";s.currentTarget=l,Tc(f,i,void 0,s),s.currentTarget=null}function Xg(s,i){i=(i&4)!==0;for(var l=0;l<s.length;l++){var f=s[l],g=f.event;f=f.listeners;e:{var v=void 0;if(i)for(var T=f.length-1;0<=T;T--){var k=f[T],M=k.instance,Q=k.currentTarget;if(k=k.listener,M!==v&&g.isPropagationStopped())break e;Yg(g,k,Q),v=M}else for(T=0;T<f.length;T++){if(k=f[T],M=k.instance,Q=k.currentTarget,k=k.listener,M!==v&&g.isPropagationStopped())break e;Yg(g,k,Q),v=M}}}if(zn)throw s=$a,zn=!1,$a=null,s}function tt(s,i){var l=i[Nd];l===void 0&&(l=i[Nd]=new Set);var f=s+"__bubble";l.has(f)||(Jg(i,s,2,!1),l.add(f))}function _d(s,i,l){var f=0;i&&(f|=4),Jg(l,s,f,i)}var Kc="_reactListening"+Math.random().toString(36).slice(2);function ol(s){if(!s[Kc]){s[Kc]=!0,r.forEach(function(l){l!=="selectionchange"&&(pS.has(l)||_d(l,!1,s),_d(l,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[Kc]||(i[Kc]=!0,_d("selectionchange",!1,i))}}function Jg(s,i,l,f){switch(Ya(i)){case 1:var g=rt;break;case 4:g=hd;break;default:g=Qa}l=g.bind(null,i,l,s),g=void 0,!mo||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(g=!0),f?g!==void 0?s.addEventListener(i,l,{capture:!0,passive:g}):s.addEventListener(i,l,!0):g!==void 0?s.addEventListener(i,l,{passive:g}):s.addEventListener(i,l,!1)}function Ed(s,i,l,f,g){var v=f;if((i&1)===0&&(i&2)===0&&f!==null)e:for(;;){if(f===null)return;var T=f.tag;if(T===3||T===4){var k=f.stateNode.containerInfo;if(k===g||k.nodeType===8&&k.parentNode===g)break;if(T===4)for(T=f.return;T!==null;){var M=T.tag;if((M===3||M===4)&&(M=T.stateNode.containerInfo,M===g||M.nodeType===8&&M.parentNode===g))return;T=T.return}for(;k!==null;){if(T=Ti(k),T===null)return;if(M=T.tag,M===5||M===6){f=v=T;continue e}k=k.parentNode}}f=f.return}za(function(){var Q=v,te=ho(l),re=[];e:{var ee=Kg.get(s);if(ee!==void 0){var he=Io,pe=s;switch(s){case"keypress":if(bo(l)===0)break e;case"keydown":case"keyup":he=y;break;case"focusin":pe="focus",he=Ao;break;case"focusout":pe="blur",he=Ao;break;case"beforeblur":case"afterblur":he=Ao;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=No;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=Mc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=Y;break;case qg:case Gg:case Hg:he=Fr;break;case Wg:he=Ke;break;case"scroll":he=dd;break;case"wheel":he=Ue;break;case"copy":case"cut":case"paste":he=Bc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=b}var me=(i&4)!==0,ft=!me&&s==="scroll",H=me?ee!==null?ee+"Capture":null:ee;me=[];for(var z=Q,W;z!==null;){W=z;var ae=W.stateNode;if(W.tag===5&&ae!==null&&(W=ae,H!==null&&(ae=dt(z,H),ae!=null&&me.push(al(z,ae,W)))),ft)break;z=z.return}0<me.length&&(ee=new he(ee,pe,null,l,te),re.push({event:ee,listeners:me}))}}if((i&7)===0){e:{if(ee=s==="mouseover"||s==="pointerover",he=s==="mouseout"||s==="pointerout",ee&&l!==ui&&(pe=l.relatedTarget||l.fromElement)&&(Ti(pe)||pe[Br]))break e;if((he||ee)&&(ee=te.window===te?te:(ee=te.ownerDocument)?ee.defaultView||ee.parentWindow:window,he?(pe=l.relatedTarget||l.toElement,he=Q,pe=pe?Ti(pe):null,pe!==null&&(ft=$n(pe),pe!==ft||pe.tag!==5&&pe.tag!==6)&&(pe=null)):(he=null,pe=Q),he!==pe)){if(me=No,ae="onMouseLeave",H="onMouseEnter",z="mouse",(s==="pointerout"||s==="pointerover")&&(me=b,ae="onPointerLeave",H="onPointerEnter",z="pointer"),ft=he==null?ee:Mo(he),W=pe==null?ee:Mo(pe),ee=new me(ae,z+"leave",he,l,te),ee.target=ft,ee.relatedTarget=W,ae=null,Ti(te)===Q&&(me=new me(H,z+"enter",pe,l,te),me.target=W,me.relatedTarget=ft,ae=me),ft=ae,he&&pe)t:{for(me=he,H=pe,z=0,W=me;W;W=Lo(W))z++;for(W=0,ae=H;ae;ae=Lo(ae))W++;for(;0<z-W;)me=Lo(me),z--;for(;0<W-z;)H=Lo(H),W--;for(;z--;){if(me===H||H!==null&&me===H.alternate)break t;me=Lo(me),H=Lo(H)}me=null}else me=null;he!==null&&Zg(re,ee,he,me,!1),pe!==null&&ft!==null&&Zg(re,ft,pe,me,!0)}}e:{if(ee=Q?Mo(Q):window,he=ee.nodeName&&ee.nodeName.toLowerCase(),he==="select"||he==="input"&&ee.type==="file")var ye=sS;else if(Rg(ee))if(Dg)ye=lS;else{ye=oS;var xe=iS}else(he=ee.nodeName)&&he.toLowerCase()==="input"&&(ee.type==="checkbox"||ee.type==="radio")&&(ye=aS);if(ye&&(ye=ye(s,Q))){jg(re,ye,l,te);break e}xe&&xe(s,ee,Q),s==="focusout"&&(xe=ee._wrapperState)&&xe.controlled&&ee.type==="number"&&lo(ee,"number",ee.value)}switch(xe=Q?Mo(Q):window,s){case"focusin":(Rg(xe)||xe.contentEditable==="true")&&(Do=xe,gd=Q,sl=null);break;case"focusout":sl=gd=Do=null;break;case"mousedown":yd=!0;break;case"contextmenu":case"mouseup":case"dragend":yd=!1,zg(re,l,te);break;case"selectionchange":if(hS)break;case"keydown":case"keyup":zg(re,l,te)}var we;if(yt)e:{switch(s){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else jo?Ag(s,l)&&(be="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(be="onCompositionStart");be&&(Ei&&l.locale!=="ko"&&(jo||be!=="onCompositionStart"?be==="onCompositionEnd"&&jo&&(we=Xa()):(yn=te,So="value"in yn?yn.value:yn.textContent,jo=!0)),xe=Qc(Q,be),0<xe.length&&(be=new el(be,s,null,l,te),re.push({event:be,listeners:xe}),we?be.data=we:(we=Cg(l),we!==null&&(be.data=we)))),(we=vn?eS(s,l):tS(s,l))&&(Q=Qc(Q,"onBeforeInput"),0<Q.length&&(te=new el("onBeforeInput","beforeinput",null,l,te),re.push({event:te,listeners:Q}),te.data=we))}Xg(re,i)})}function al(s,i,l){return{instance:s,listener:i,currentTarget:l}}function Qc(s,i){for(var l=i+"Capture",f=[];s!==null;){var g=s,v=g.stateNode;g.tag===5&&v!==null&&(g=v,v=dt(s,l),v!=null&&f.unshift(al(s,v,g)),v=dt(s,i),v!=null&&f.push(al(s,v,g))),s=s.return}return f}function Lo(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Zg(s,i,l,f,g){for(var v=i._reactName,T=[];l!==null&&l!==f;){var k=l,M=k.alternate,Q=k.stateNode;if(M!==null&&M===f)break;k.tag===5&&Q!==null&&(k=Q,g?(M=dt(l,v),M!=null&&T.unshift(al(l,M,k))):g||(M=dt(l,v),M!=null&&T.push(al(l,M,k)))),l=l.return}T.length!==0&&s.push({event:i,listeners:T})}var mS=/\r\n?/g,gS=/\u0000|\uFFFD/g;function ey(s){return(typeof s=="string"?s:""+s).replace(mS,`
`).replace(gS,"")}function Yc(s,i,l){if(i=ey(i),ey(s)!==i&&l)throw Error(t(425))}function Xc(){}var Td=null,Sd=null;function bd(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Id=typeof setTimeout=="function"?setTimeout:void 0,yS=typeof clearTimeout=="function"?clearTimeout:void 0,ty=typeof Promise=="function"?Promise:void 0,vS=typeof queueMicrotask=="function"?queueMicrotask:typeof ty<"u"?function(s){return ty.resolve(null).then(s).catch(xS)}:Id;function xS(s){setTimeout(function(){throw s})}function Pd(s,i){var l=i,f=0;do{var g=l.nextSibling;if(s.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"){if(f===0){s.removeChild(g),Kn(i);return}f--}else l!=="$"&&l!=="$?"&&l!=="$!"||f++;l=g}while(l);Kn(i)}function Es(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return s}function ny(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return s;i--}else l==="/$"&&i++}s=s.previousSibling}return null}var Oo=Math.random().toString(36).slice(2),yr="__reactFiber$"+Oo,ll="__reactProps$"+Oo,Br="__reactContainer$"+Oo,Nd="__reactEvents$"+Oo,wS="__reactListeners$"+Oo,_S="__reactHandles$"+Oo;function Ti(s){var i=s[yr];if(i)return i;for(var l=s.parentNode;l;){if(i=l[Br]||l[yr]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(s=ny(s);s!==null;){if(l=s[yr])return l;s=ny(s)}return i}s=l,l=s.parentNode}return null}function cl(s){return s=s[yr]||s[Br],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Mo(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function Jc(s){return s[ll]||null}var kd=[],Uo=-1;function Ts(s){return{current:s}}function nt(s){0>Uo||(s.current=kd[Uo],kd[Uo]=null,Uo--)}function Ze(s,i){Uo++,kd[Uo]=s.current,s.current=i}var Ss={},$t=Ts(Ss),on=Ts(!1),Si=Ss;function Fo(s,i){var l=s.type.contextTypes;if(!l)return Ss;var f=s.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===i)return f.__reactInternalMemoizedMaskedChildContext;var g={},v;for(v in l)g[v]=i[v];return f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=i,s.__reactInternalMemoizedMaskedChildContext=g),g}function an(s){return s=s.childContextTypes,s!=null}function Zc(){nt(on),nt($t)}function ry(s,i,l){if($t.current!==Ss)throw Error(t(168));Ze($t,i),Ze(on,l)}function sy(s,i,l){var f=s.stateNode;if(i=i.childContextTypes,typeof f.getChildContext!="function")return l;f=f.getChildContext();for(var g in f)if(!(g in i))throw Error(t(108,De(s)||"Unknown",g));return X({},l,f)}function eu(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Ss,Si=$t.current,Ze($t,s),Ze(on,on.current),!0}function iy(s,i,l){var f=s.stateNode;if(!f)throw Error(t(169));l?(s=sy(s,i,Si),f.__reactInternalMemoizedMergedChildContext=s,nt(on),nt($t),Ze($t,s)):nt(on),Ze(on,l)}var zr=null,tu=!1,Ad=!1;function oy(s){zr===null?zr=[s]:zr.push(s)}function ES(s){tu=!0,oy(s)}function bs(){if(!Ad&&zr!==null){Ad=!0;var s=0,i=Oe;try{var l=zr;for(Oe=1;s<l.length;s++){var f=l[s];do f=f(!0);while(f!==null)}zr=null,tu=!1}catch(g){throw zr!==null&&(zr=zr.slice(s+1)),xo(mi,bs),g}finally{Oe=i,Ad=!1}}return null}var Bo=[],zo=0,nu=null,ru=0,Nn=[],kn=0,bi=null,$r=1,qr="";function Ii(s,i){Bo[zo++]=ru,Bo[zo++]=nu,nu=s,ru=i}function ay(s,i,l){Nn[kn++]=$r,Nn[kn++]=qr,Nn[kn++]=bi,bi=s;var f=$r;s=qr;var g=32-Jt(f)-1;f&=~(1<<g),l+=1;var v=32-Jt(i)+g;if(30<v){var T=g-g%5;v=(f&(1<<T)-1).toString(32),f>>=T,g-=T,$r=1<<32-Jt(i)+g|l<<g|f,qr=v+s}else $r=1<<v|l<<g|f,qr=s}function Cd(s){s.return!==null&&(Ii(s,1),ay(s,1,0))}function Rd(s){for(;s===nu;)nu=Bo[--zo],Bo[zo]=null,ru=Bo[--zo],Bo[zo]=null;for(;s===bi;)bi=Nn[--kn],Nn[kn]=null,qr=Nn[--kn],Nn[kn]=null,$r=Nn[--kn],Nn[kn]=null}var xn=null,wn=null,st=!1,Xn=null;function ly(s,i){var l=jn(5,null,null,0);l.elementType="DELETED",l.stateNode=i,l.return=s,i=s.deletions,i===null?(s.deletions=[l],s.flags|=16):i.push(l)}function cy(s,i){switch(s.tag){case 5:var l=s.type;return i=i.nodeType!==1||l.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(s.stateNode=i,xn=s,wn=Es(i.firstChild),!0):!1;case 6:return i=s.pendingProps===""||i.nodeType!==3?null:i,i!==null?(s.stateNode=i,xn=s,wn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(l=bi!==null?{id:$r,overflow:qr}:null,s.memoizedState={dehydrated:i,treeContext:l,retryLane:1073741824},l=jn(18,null,null,0),l.stateNode=i,l.return=s,s.child=l,xn=s,wn=null,!0):!1;default:return!1}}function jd(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Dd(s){if(st){var i=wn;if(i){var l=i;if(!cy(s,i)){if(jd(s))throw Error(t(418));i=Es(l.nextSibling);var f=xn;i&&cy(s,i)?ly(f,l):(s.flags=s.flags&-4097|2,st=!1,xn=s)}}else{if(jd(s))throw Error(t(418));s.flags=s.flags&-4097|2,st=!1,xn=s}}}function uy(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;xn=s}function su(s){if(s!==xn)return!1;if(!st)return uy(s),st=!0,!1;var i;if((i=s.tag!==3)&&!(i=s.tag!==5)&&(i=s.type,i=i!=="head"&&i!=="body"&&!bd(s.type,s.memoizedProps)),i&&(i=wn)){if(jd(s))throw hy(),Error(t(418));for(;i;)ly(s,i),i=Es(i.nextSibling)}if(uy(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,i=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"){if(i===0){wn=Es(s.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++}s=s.nextSibling}wn=null}}else wn=xn?Es(s.stateNode.nextSibling):null;return!0}function hy(){for(var s=wn;s;)s=Es(s.nextSibling)}function $o(){wn=xn=null,st=!1}function Vd(s){Xn===null?Xn=[s]:Xn.push(s)}var TS=K.ReactCurrentBatchConfig;function ul(s,i,l){if(s=l.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var f=l.stateNode}if(!f)throw Error(t(147,s));var g=f,v=""+s;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===v?i.ref:(i=function(T){var k=g.refs;T===null?delete k[v]:k[v]=T},i._stringRef=v,i)}if(typeof s!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,s))}return s}function iu(s,i){throw s=Object.prototype.toString.call(i),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s))}function dy(s){var i=s._init;return i(s._payload)}function fy(s){function i(H,z){if(s){var W=H.deletions;W===null?(H.deletions=[z],H.flags|=16):W.push(z)}}function l(H,z){if(!s)return null;for(;z!==null;)i(H,z),z=z.sibling;return null}function f(H,z){for(H=new Map;z!==null;)z.key!==null?H.set(z.key,z):H.set(z.index,z),z=z.sibling;return H}function g(H,z){return H=js(H,z),H.index=0,H.sibling=null,H}function v(H,z,W){return H.index=W,s?(W=H.alternate,W!==null?(W=W.index,W<z?(H.flags|=2,z):W):(H.flags|=2,z)):(H.flags|=1048576,z)}function T(H){return s&&H.alternate===null&&(H.flags|=2),H}function k(H,z,W,ae){return z===null||z.tag!==6?(z=Pf(W,H.mode,ae),z.return=H,z):(z=g(z,W),z.return=H,z)}function M(H,z,W,ae){var ye=W.type;return ye===R?te(H,z,W.props.children,ae,W.key):z!==null&&(z.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===je&&dy(ye)===z.type)?(ae=g(z,W.props),ae.ref=ul(H,z,W),ae.return=H,ae):(ae=ku(W.type,W.key,W.props,null,H.mode,ae),ae.ref=ul(H,z,W),ae.return=H,ae)}function Q(H,z,W,ae){return z===null||z.tag!==4||z.stateNode.containerInfo!==W.containerInfo||z.stateNode.implementation!==W.implementation?(z=Nf(W,H.mode,ae),z.return=H,z):(z=g(z,W.children||[]),z.return=H,z)}function te(H,z,W,ae,ye){return z===null||z.tag!==7?(z=Di(W,H.mode,ae,ye),z.return=H,z):(z=g(z,W),z.return=H,z)}function re(H,z,W){if(typeof z=="string"&&z!==""||typeof z=="number")return z=Pf(""+z,H.mode,W),z.return=H,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case Z:return W=ku(z.type,z.key,z.props,null,H.mode,W),W.ref=ul(H,null,z),W.return=H,W;case ie:return z=Nf(z,H.mode,W),z.return=H,z;case je:var ae=z._init;return re(H,ae(z._payload),W)}if(Rr(z)||q(z))return z=Di(z,H.mode,W,null),z.return=H,z;iu(H,z)}return null}function ee(H,z,W,ae){var ye=z!==null?z.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return ye!==null?null:k(H,z,""+W,ae);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case Z:return W.key===ye?M(H,z,W,ae):null;case ie:return W.key===ye?Q(H,z,W,ae):null;case je:return ye=W._init,ee(H,z,ye(W._payload),ae)}if(Rr(W)||q(W))return ye!==null?null:te(H,z,W,ae,null);iu(H,W)}return null}function he(H,z,W,ae,ye){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return H=H.get(W)||null,k(z,H,""+ae,ye);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case Z:return H=H.get(ae.key===null?W:ae.key)||null,M(z,H,ae,ye);case ie:return H=H.get(ae.key===null?W:ae.key)||null,Q(z,H,ae,ye);case je:var xe=ae._init;return he(H,z,W,xe(ae._payload),ye)}if(Rr(ae)||q(ae))return H=H.get(W)||null,te(z,H,ae,ye,null);iu(z,ae)}return null}function pe(H,z,W,ae){for(var ye=null,xe=null,we=z,be=z=0,Rt=null;we!==null&&be<W.length;be++){we.index>be?(Rt=we,we=null):Rt=we.sibling;var qe=ee(H,we,W[be],ae);if(qe===null){we===null&&(we=Rt);break}s&&we&&qe.alternate===null&&i(H,we),z=v(qe,z,be),xe===null?ye=qe:xe.sibling=qe,xe=qe,we=Rt}if(be===W.length)return l(H,we),st&&Ii(H,be),ye;if(we===null){for(;be<W.length;be++)we=re(H,W[be],ae),we!==null&&(z=v(we,z,be),xe===null?ye=we:xe.sibling=we,xe=we);return st&&Ii(H,be),ye}for(we=f(H,we);be<W.length;be++)Rt=he(we,H,be,W[be],ae),Rt!==null&&(s&&Rt.alternate!==null&&we.delete(Rt.key===null?be:Rt.key),z=v(Rt,z,be),xe===null?ye=Rt:xe.sibling=Rt,xe=Rt);return s&&we.forEach(function(Ds){return i(H,Ds)}),st&&Ii(H,be),ye}function me(H,z,W,ae){var ye=q(W);if(typeof ye!="function")throw Error(t(150));if(W=ye.call(W),W==null)throw Error(t(151));for(var xe=ye=null,we=z,be=z=0,Rt=null,qe=W.next();we!==null&&!qe.done;be++,qe=W.next()){we.index>be?(Rt=we,we=null):Rt=we.sibling;var Ds=ee(H,we,qe.value,ae);if(Ds===null){we===null&&(we=Rt);break}s&&we&&Ds.alternate===null&&i(H,we),z=v(Ds,z,be),xe===null?ye=Ds:xe.sibling=Ds,xe=Ds,we=Rt}if(qe.done)return l(H,we),st&&Ii(H,be),ye;if(we===null){for(;!qe.done;be++,qe=W.next())qe=re(H,qe.value,ae),qe!==null&&(z=v(qe,z,be),xe===null?ye=qe:xe.sibling=qe,xe=qe);return st&&Ii(H,be),ye}for(we=f(H,we);!qe.done;be++,qe=W.next())qe=he(we,H,be,qe.value,ae),qe!==null&&(s&&qe.alternate!==null&&we.delete(qe.key===null?be:qe.key),z=v(qe,z,be),xe===null?ye=qe:xe.sibling=qe,xe=qe);return s&&we.forEach(function(nb){return i(H,nb)}),st&&Ii(H,be),ye}function ft(H,z,W,ae){if(typeof W=="object"&&W!==null&&W.type===R&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case Z:e:{for(var ye=W.key,xe=z;xe!==null;){if(xe.key===ye){if(ye=W.type,ye===R){if(xe.tag===7){l(H,xe.sibling),z=g(xe,W.props.children),z.return=H,H=z;break e}}else if(xe.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===je&&dy(ye)===xe.type){l(H,xe.sibling),z=g(xe,W.props),z.ref=ul(H,xe,W),z.return=H,H=z;break e}l(H,xe);break}else i(H,xe);xe=xe.sibling}W.type===R?(z=Di(W.props.children,H.mode,ae,W.key),z.return=H,H=z):(ae=ku(W.type,W.key,W.props,null,H.mode,ae),ae.ref=ul(H,z,W),ae.return=H,H=ae)}return T(H);case ie:e:{for(xe=W.key;z!==null;){if(z.key===xe)if(z.tag===4&&z.stateNode.containerInfo===W.containerInfo&&z.stateNode.implementation===W.implementation){l(H,z.sibling),z=g(z,W.children||[]),z.return=H,H=z;break e}else{l(H,z);break}else i(H,z);z=z.sibling}z=Nf(W,H.mode,ae),z.return=H,H=z}return T(H);case je:return xe=W._init,ft(H,z,xe(W._payload),ae)}if(Rr(W))return pe(H,z,W,ae);if(q(W))return me(H,z,W,ae);iu(H,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,z!==null&&z.tag===6?(l(H,z.sibling),z=g(z,W),z.return=H,H=z):(l(H,z),z=Pf(W,H.mode,ae),z.return=H,H=z),T(H)):l(H,z)}return ft}var qo=fy(!0),py=fy(!1),ou=Ts(null),au=null,Go=null,Ld=null;function Od(){Ld=Go=au=null}function Md(s){var i=ou.current;nt(ou),s._currentValue=i}function Ud(s,i,l){for(;s!==null;){var f=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,f!==null&&(f.childLanes|=i)):f!==null&&(f.childLanes&i)!==i&&(f.childLanes|=i),s===l)break;s=s.return}}function Ho(s,i){au=s,Ld=Go=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&i)!==0&&(ln=!0),s.firstContext=null)}function An(s){var i=s._currentValue;if(Ld!==s)if(s={context:s,memoizedValue:i,next:null},Go===null){if(au===null)throw Error(t(308));Go=s,au.dependencies={lanes:0,firstContext:s}}else Go=Go.next=s;return i}var Pi=null;function Fd(s){Pi===null?Pi=[s]:Pi.push(s)}function my(s,i,l,f){var g=i.interleaved;return g===null?(l.next=l,Fd(i)):(l.next=g.next,g.next=l),i.interleaved=l,Gr(s,f)}function Gr(s,i){s.lanes|=i;var l=s.alternate;for(l!==null&&(l.lanes|=i),l=s,s=s.return;s!==null;)s.childLanes|=i,l=s.alternate,l!==null&&(l.childLanes|=i),l=s,s=s.return;return l.tag===3?l.stateNode:null}var Is=!1;function Bd(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gy(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Hr(s,i){return{eventTime:s,lane:i,tag:0,payload:null,callback:null,next:null}}function Ps(s,i,l){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,(ze&2)!==0){var g=f.pending;return g===null?i.next=i:(i.next=g.next,g.next=i),f.pending=i,Gr(s,l)}return g=f.interleaved,g===null?(i.next=i,Fd(f)):(i.next=g.next,g.next=i),f.interleaved=i,Gr(s,l)}function lu(s,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194240)!==0)){var f=i.lanes;f&=s.pendingLanes,l|=f,i.lanes=l,gs(s,l)}}function yy(s,i){var l=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,l===f)){var g=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var T={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};v===null?g=v=T:v=v.next=T,l=l.next}while(l!==null);v===null?g=v=i:v=v.next=i}else g=v=i;l={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:f.shared,effects:f.effects},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=i:s.next=i,l.lastBaseUpdate=i}function cu(s,i,l,f){var g=s.updateQueue;Is=!1;var v=g.firstBaseUpdate,T=g.lastBaseUpdate,k=g.shared.pending;if(k!==null){g.shared.pending=null;var M=k,Q=M.next;M.next=null,T===null?v=Q:T.next=Q,T=M;var te=s.alternate;te!==null&&(te=te.updateQueue,k=te.lastBaseUpdate,k!==T&&(k===null?te.firstBaseUpdate=Q:k.next=Q,te.lastBaseUpdate=M))}if(v!==null){var re=g.baseState;T=0,te=Q=M=null,k=v;do{var ee=k.lane,he=k.eventTime;if((f&ee)===ee){te!==null&&(te=te.next={eventTime:he,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var pe=s,me=k;switch(ee=i,he=l,me.tag){case 1:if(pe=me.payload,typeof pe=="function"){re=pe.call(he,re,ee);break e}re=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=me.payload,ee=typeof pe=="function"?pe.call(he,re,ee):pe,ee==null)break e;re=X({},re,ee);break e;case 2:Is=!0}}k.callback!==null&&k.lane!==0&&(s.flags|=64,ee=g.effects,ee===null?g.effects=[k]:ee.push(k))}else he={eventTime:he,lane:ee,tag:k.tag,payload:k.payload,callback:k.callback,next:null},te===null?(Q=te=he,M=re):te=te.next=he,T|=ee;if(k=k.next,k===null){if(k=g.shared.pending,k===null)break;ee=k,k=ee.next,ee.next=null,g.lastBaseUpdate=ee,g.shared.pending=null}}while(!0);if(te===null&&(M=re),g.baseState=M,g.firstBaseUpdate=Q,g.lastBaseUpdate=te,i=g.shared.interleaved,i!==null){g=i;do T|=g.lane,g=g.next;while(g!==i)}else v===null&&(g.shared.lanes=0);Ai|=T,s.lanes=T,s.memoizedState=re}}function vy(s,i,l){if(s=i.effects,i.effects=null,s!==null)for(i=0;i<s.length;i++){var f=s[i],g=f.callback;if(g!==null){if(f.callback=null,f=l,typeof g!="function")throw Error(t(191,g));g.call(f)}}}var hl={},vr=Ts(hl),dl=Ts(hl),fl=Ts(hl);function Ni(s){if(s===hl)throw Error(t(174));return s}function zd(s,i){switch(Ze(fl,i),Ze(dl,s),Ze(vr,hl),s=i.nodeType,s){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Et(null,"");break;default:s=s===8?i.parentNode:i,i=s.namespaceURI||null,s=s.tagName,i=Et(i,s)}nt(vr),Ze(vr,i)}function Wo(){nt(vr),nt(dl),nt(fl)}function xy(s){Ni(fl.current);var i=Ni(vr.current),l=Et(i,s.type);i!==l&&(Ze(dl,s),Ze(vr,l))}function $d(s){dl.current===s&&(nt(vr),nt(dl))}var ot=Ts(0);function uu(s){for(var i=s;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var qd=[];function Gd(){for(var s=0;s<qd.length;s++)qd[s]._workInProgressVersionPrimary=null;qd.length=0}var hu=K.ReactCurrentDispatcher,Hd=K.ReactCurrentBatchConfig,ki=0,at=null,St=null,At=null,du=!1,pl=!1,ml=0,SS=0;function qt(){throw Error(t(321))}function Wd(s,i){if(i===null)return!1;for(var l=0;l<i.length&&l<s.length;l++)if(!Yn(s[l],i[l]))return!1;return!0}function Kd(s,i,l,f,g,v){if(ki=v,at=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,hu.current=s===null||s.memoizedState===null?NS:kS,s=l(f,g),pl){v=0;do{if(pl=!1,ml=0,25<=v)throw Error(t(301));v+=1,At=St=null,i.updateQueue=null,hu.current=AS,s=l(f,g)}while(pl)}if(hu.current=mu,i=St!==null&&St.next!==null,ki=0,At=St=at=null,du=!1,i)throw Error(t(300));return s}function Qd(){var s=ml!==0;return ml=0,s}function xr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?at.memoizedState=At=s:At=At.next=s,At}function Cn(){if(St===null){var s=at.alternate;s=s!==null?s.memoizedState:null}else s=St.next;var i=At===null?at.memoizedState:At.next;if(i!==null)At=i,St=s;else{if(s===null)throw Error(t(310));St=s,s={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},At===null?at.memoizedState=At=s:At=At.next=s}return At}function gl(s,i){return typeof i=="function"?i(s):i}function Yd(s){var i=Cn(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=s;var f=St,g=f.baseQueue,v=l.pending;if(v!==null){if(g!==null){var T=g.next;g.next=v.next,v.next=T}f.baseQueue=g=v,l.pending=null}if(g!==null){v=g.next,f=f.baseState;var k=T=null,M=null,Q=v;do{var te=Q.lane;if((ki&te)===te)M!==null&&(M=M.next={lane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),f=Q.hasEagerState?Q.eagerState:s(f,Q.action);else{var re={lane:te,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null};M===null?(k=M=re,T=f):M=M.next=re,at.lanes|=te,Ai|=te}Q=Q.next}while(Q!==null&&Q!==v);M===null?T=f:M.next=k,Yn(f,i.memoizedState)||(ln=!0),i.memoizedState=f,i.baseState=T,i.baseQueue=M,l.lastRenderedState=f}if(s=l.interleaved,s!==null){g=s;do v=g.lane,at.lanes|=v,Ai|=v,g=g.next;while(g!==s)}else g===null&&(l.lanes=0);return[i.memoizedState,l.dispatch]}function Xd(s){var i=Cn(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=s;var f=l.dispatch,g=l.pending,v=i.memoizedState;if(g!==null){l.pending=null;var T=g=g.next;do v=s(v,T.action),T=T.next;while(T!==g);Yn(v,i.memoizedState)||(ln=!0),i.memoizedState=v,i.baseQueue===null&&(i.baseState=v),l.lastRenderedState=v}return[v,f]}function wy(){}function _y(s,i){var l=at,f=Cn(),g=i(),v=!Yn(f.memoizedState,g);if(v&&(f.memoizedState=g,ln=!0),f=f.queue,Jd(Sy.bind(null,l,f,s),[s]),f.getSnapshot!==i||v||At!==null&&At.memoizedState.tag&1){if(l.flags|=2048,yl(9,Ty.bind(null,l,f,g,i),void 0,null),Ct===null)throw Error(t(349));(ki&30)!==0||Ey(l,i,g)}return g}function Ey(s,i,l){s.flags|=16384,s={getSnapshot:i,value:l},i=at.updateQueue,i===null?(i={lastEffect:null,stores:null},at.updateQueue=i,i.stores=[s]):(l=i.stores,l===null?i.stores=[s]:l.push(s))}function Ty(s,i,l,f){i.value=l,i.getSnapshot=f,by(i)&&Iy(s)}function Sy(s,i,l){return l(function(){by(i)&&Iy(s)})}function by(s){var i=s.getSnapshot;s=s.value;try{var l=i();return!Yn(s,l)}catch{return!0}}function Iy(s){var i=Gr(s,1);i!==null&&tr(i,s,1,-1)}function Py(s){var i=xr();return typeof s=="function"&&(s=s()),i.memoizedState=i.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gl,lastRenderedState:s},i.queue=s,s=s.dispatch=PS.bind(null,at,s),[i.memoizedState,s]}function yl(s,i,l,f){return s={tag:s,create:i,destroy:l,deps:f,next:null},i=at.updateQueue,i===null?(i={lastEffect:null,stores:null},at.updateQueue=i,i.lastEffect=s.next=s):(l=i.lastEffect,l===null?i.lastEffect=s.next=s:(f=l.next,l.next=s,s.next=f,i.lastEffect=s)),s}function Ny(){return Cn().memoizedState}function fu(s,i,l,f){var g=xr();at.flags|=s,g.memoizedState=yl(1|i,l,void 0,f===void 0?null:f)}function pu(s,i,l,f){var g=Cn();f=f===void 0?null:f;var v=void 0;if(St!==null){var T=St.memoizedState;if(v=T.destroy,f!==null&&Wd(f,T.deps)){g.memoizedState=yl(i,l,v,f);return}}at.flags|=s,g.memoizedState=yl(1|i,l,v,f)}function ky(s,i){return fu(8390656,8,s,i)}function Jd(s,i){return pu(2048,8,s,i)}function Ay(s,i){return pu(4,2,s,i)}function Cy(s,i){return pu(4,4,s,i)}function Ry(s,i){if(typeof i=="function")return s=s(),i(s),function(){i(null)};if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function jy(s,i,l){return l=l!=null?l.concat([s]):null,pu(4,4,Ry.bind(null,i,s),l)}function Zd(){}function Dy(s,i){var l=Cn();i=i===void 0?null:i;var f=l.memoizedState;return f!==null&&i!==null&&Wd(i,f[1])?f[0]:(l.memoizedState=[s,i],s)}function Vy(s,i){var l=Cn();i=i===void 0?null:i;var f=l.memoizedState;return f!==null&&i!==null&&Wd(i,f[1])?f[0]:(s=s(),l.memoizedState=[s,i],s)}function Ly(s,i,l){return(ki&21)===0?(s.baseState&&(s.baseState=!1,ln=!0),s.memoizedState=l):(Yn(l,i)||(l=vi(),at.lanes|=l,Ai|=l,s.baseState=!0),i)}function bS(s,i){var l=Oe;Oe=l!==0&&4>l?l:4,s(!0);var f=Hd.transition;Hd.transition={};try{s(!1),i()}finally{Oe=l,Hd.transition=f}}function Oy(){return Cn().memoizedState}function IS(s,i,l){var f=Cs(s);if(l={lane:f,action:l,hasEagerState:!1,eagerState:null,next:null},My(s))Uy(i,l);else if(l=my(s,i,l,f),l!==null){var g=tn();tr(l,s,f,g),Fy(l,i,f)}}function PS(s,i,l){var f=Cs(s),g={lane:f,action:l,hasEagerState:!1,eagerState:null,next:null};if(My(s))Uy(i,g);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=i.lastRenderedReducer,v!==null))try{var T=i.lastRenderedState,k=v(T,l);if(g.hasEagerState=!0,g.eagerState=k,Yn(k,T)){var M=i.interleaved;M===null?(g.next=g,Fd(i)):(g.next=M.next,M.next=g),i.interleaved=g;return}}catch{}finally{}l=my(s,i,g,f),l!==null&&(g=tn(),tr(l,s,f,g),Fy(l,i,f))}}function My(s){var i=s.alternate;return s===at||i!==null&&i===at}function Uy(s,i){pl=du=!0;var l=s.pending;l===null?i.next=i:(i.next=l.next,l.next=i),s.pending=i}function Fy(s,i,l){if((l&4194240)!==0){var f=i.lanes;f&=s.pendingLanes,l|=f,i.lanes=l,gs(s,l)}}var mu={readContext:An,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useInsertionEffect:qt,useLayoutEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useMutableSource:qt,useSyncExternalStore:qt,useId:qt,unstable_isNewReconciler:!1},NS={readContext:An,useCallback:function(s,i){return xr().memoizedState=[s,i===void 0?null:i],s},useContext:An,useEffect:ky,useImperativeHandle:function(s,i,l){return l=l!=null?l.concat([s]):null,fu(4194308,4,Ry.bind(null,i,s),l)},useLayoutEffect:function(s,i){return fu(4194308,4,s,i)},useInsertionEffect:function(s,i){return fu(4,2,s,i)},useMemo:function(s,i){var l=xr();return i=i===void 0?null:i,s=s(),l.memoizedState=[s,i],s},useReducer:function(s,i,l){var f=xr();return i=l!==void 0?l(i):i,f.memoizedState=f.baseState=i,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:i},f.queue=s,s=s.dispatch=IS.bind(null,at,s),[f.memoizedState,s]},useRef:function(s){var i=xr();return s={current:s},i.memoizedState=s},useState:Py,useDebugValue:Zd,useDeferredValue:function(s){return xr().memoizedState=s},useTransition:function(){var s=Py(!1),i=s[0];return s=bS.bind(null,s[1]),xr().memoizedState=s,[i,s]},useMutableSource:function(){},useSyncExternalStore:function(s,i,l){var f=at,g=xr();if(st){if(l===void 0)throw Error(t(407));l=l()}else{if(l=i(),Ct===null)throw Error(t(349));(ki&30)!==0||Ey(f,i,l)}g.memoizedState=l;var v={value:l,getSnapshot:i};return g.queue=v,ky(Sy.bind(null,f,v,s),[s]),f.flags|=2048,yl(9,Ty.bind(null,f,v,l,i),void 0,null),l},useId:function(){var s=xr(),i=Ct.identifierPrefix;if(st){var l=qr,f=$r;l=(f&~(1<<32-Jt(f)-1)).toString(32)+l,i=":"+i+"R"+l,l=ml++,0<l&&(i+="H"+l.toString(32)),i+=":"}else l=SS++,i=":"+i+"r"+l.toString(32)+":";return s.memoizedState=i},unstable_isNewReconciler:!1},kS={readContext:An,useCallback:Dy,useContext:An,useEffect:Jd,useImperativeHandle:jy,useInsertionEffect:Ay,useLayoutEffect:Cy,useMemo:Vy,useReducer:Yd,useRef:Ny,useState:function(){return Yd(gl)},useDebugValue:Zd,useDeferredValue:function(s){var i=Cn();return Ly(i,St.memoizedState,s)},useTransition:function(){var s=Yd(gl)[0],i=Cn().memoizedState;return[s,i]},useMutableSource:wy,useSyncExternalStore:_y,useId:Oy,unstable_isNewReconciler:!1},AS={readContext:An,useCallback:Dy,useContext:An,useEffect:Jd,useImperativeHandle:jy,useInsertionEffect:Ay,useLayoutEffect:Cy,useMemo:Vy,useReducer:Xd,useRef:Ny,useState:function(){return Xd(gl)},useDebugValue:Zd,useDeferredValue:function(s){var i=Cn();return St===null?i.memoizedState=s:Ly(i,St.memoizedState,s)},useTransition:function(){var s=Xd(gl)[0],i=Cn().memoizedState;return[s,i]},useMutableSource:wy,useSyncExternalStore:_y,useId:Oy,unstable_isNewReconciler:!1};function Jn(s,i){if(s&&s.defaultProps){i=X({},i),s=s.defaultProps;for(var l in s)i[l]===void 0&&(i[l]=s[l]);return i}return i}function ef(s,i,l,f){i=s.memoizedState,l=l(f,i),l=l==null?i:X({},i,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var gu={isMounted:function(s){return(s=s._reactInternals)?$n(s)===s:!1},enqueueSetState:function(s,i,l){s=s._reactInternals;var f=tn(),g=Cs(s),v=Hr(f,g);v.payload=i,l!=null&&(v.callback=l),i=Ps(s,v,g),i!==null&&(tr(i,s,g,f),lu(i,s,g))},enqueueReplaceState:function(s,i,l){s=s._reactInternals;var f=tn(),g=Cs(s),v=Hr(f,g);v.tag=1,v.payload=i,l!=null&&(v.callback=l),i=Ps(s,v,g),i!==null&&(tr(i,s,g,f),lu(i,s,g))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var l=tn(),f=Cs(s),g=Hr(l,f);g.tag=2,i!=null&&(g.callback=i),i=Ps(s,g,f),i!==null&&(tr(i,s,f,l),lu(i,s,f))}};function By(s,i,l,f,g,v,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,v,T):i.prototype&&i.prototype.isPureReactComponent?!rl(l,f)||!rl(g,v):!0}function zy(s,i,l){var f=!1,g=Ss,v=i.contextType;return typeof v=="object"&&v!==null?v=An(v):(g=an(i)?Si:$t.current,f=i.contextTypes,v=(f=f!=null)?Fo(s,g):Ss),i=new i(l,v),s.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=gu,s.stateNode=i,i._reactInternals=s,f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=g,s.__reactInternalMemoizedMaskedChildContext=v),i}function $y(s,i,l,f){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,f),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,f),i.state!==s&&gu.enqueueReplaceState(i,i.state,null)}function tf(s,i,l,f){var g=s.stateNode;g.props=l,g.state=s.memoizedState,g.refs={},Bd(s);var v=i.contextType;typeof v=="object"&&v!==null?g.context=An(v):(v=an(i)?Si:$t.current,g.context=Fo(s,v)),g.state=s.memoizedState,v=i.getDerivedStateFromProps,typeof v=="function"&&(ef(s,i,v,l),g.state=s.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(i=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),i!==g.state&&gu.enqueueReplaceState(g,g.state,null),cu(s,l,g,f),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308)}function Ko(s,i){try{var l="",f=i;do l+=ue(f),f=f.return;while(f);var g=l}catch(v){g=`
Error generating stack: `+v.message+`
`+v.stack}return{value:s,source:i,stack:g,digest:null}}function nf(s,i,l){return{value:s,source:null,stack:l??null,digest:i??null}}function rf(s,i){try{console.error(i.value)}catch(l){setTimeout(function(){throw l})}}var CS=typeof WeakMap=="function"?WeakMap:Map;function qy(s,i,l){l=Hr(-1,l),l.tag=3,l.payload={element:null};var f=i.value;return l.callback=function(){Tu||(Tu=!0,xf=f),rf(s,i)},l}function Gy(s,i,l){l=Hr(-1,l),l.tag=3;var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var g=i.value;l.payload=function(){return f(g)},l.callback=function(){rf(s,i)}}var v=s.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(l.callback=function(){rf(s,i),typeof f!="function"&&(ks===null?ks=new Set([this]):ks.add(this));var T=i.stack;this.componentDidCatch(i.value,{componentStack:T!==null?T:""})}),l}function Hy(s,i,l){var f=s.pingCache;if(f===null){f=s.pingCache=new CS;var g=new Set;f.set(i,g)}else g=f.get(i),g===void 0&&(g=new Set,f.set(i,g));g.has(l)||(g.add(l),s=GS.bind(null,s,i,l),i.then(s,s))}function Wy(s){do{var i;if((i=s.tag===13)&&(i=s.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return s;s=s.return}while(s!==null);return null}function Ky(s,i,l,f,g){return(s.mode&1)===0?(s===i?s.flags|=65536:(s.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(i=Hr(-1,1),i.tag=2,Ps(l,i,1))),l.lanes|=1),s):(s.flags|=65536,s.lanes=g,s)}var RS=K.ReactCurrentOwner,ln=!1;function en(s,i,l,f){i.child=s===null?py(i,null,l,f):qo(i,s.child,l,f)}function Qy(s,i,l,f,g){l=l.render;var v=i.ref;return Ho(i,g),f=Kd(s,i,l,f,v,g),l=Qd(),s!==null&&!ln?(i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~g,Wr(s,i,g)):(st&&l&&Cd(i),i.flags|=1,en(s,i,f,g),i.child)}function Yy(s,i,l,f,g){if(s===null){var v=l.type;return typeof v=="function"&&!If(v)&&v.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(i.tag=15,i.type=v,Xy(s,i,v,f,g)):(s=ku(l.type,null,f,i,i.mode,g),s.ref=i.ref,s.return=i,i.child=s)}if(v=s.child,(s.lanes&g)===0){var T=v.memoizedProps;if(l=l.compare,l=l!==null?l:rl,l(T,f)&&s.ref===i.ref)return Wr(s,i,g)}return i.flags|=1,s=js(v,f),s.ref=i.ref,s.return=i,i.child=s}function Xy(s,i,l,f,g){if(s!==null){var v=s.memoizedProps;if(rl(v,f)&&s.ref===i.ref)if(ln=!1,i.pendingProps=f=v,(s.lanes&g)!==0)(s.flags&131072)!==0&&(ln=!0);else return i.lanes=s.lanes,Wr(s,i,g)}return sf(s,i,l,f,g)}function Jy(s,i,l){var f=i.pendingProps,g=f.children,v=s!==null?s.memoizedState:null;if(f.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(Yo,_n),_n|=l;else{if((l&1073741824)===0)return s=v!==null?v.baseLanes|l:l,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:s,cachePool:null,transitions:null},i.updateQueue=null,Ze(Yo,_n),_n|=s,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=v!==null?v.baseLanes:l,Ze(Yo,_n),_n|=f}else v!==null?(f=v.baseLanes|l,i.memoizedState=null):f=l,Ze(Yo,_n),_n|=f;return en(s,i,g,l),i.child}function Zy(s,i){var l=i.ref;(s===null&&l!==null||s!==null&&s.ref!==l)&&(i.flags|=512,i.flags|=2097152)}function sf(s,i,l,f,g){var v=an(l)?Si:$t.current;return v=Fo(i,v),Ho(i,g),l=Kd(s,i,l,f,v,g),f=Qd(),s!==null&&!ln?(i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~g,Wr(s,i,g)):(st&&f&&Cd(i),i.flags|=1,en(s,i,l,g),i.child)}function e0(s,i,l,f,g){if(an(l)){var v=!0;eu(i)}else v=!1;if(Ho(i,g),i.stateNode===null)vu(s,i),zy(i,l,f),tf(i,l,f,g),f=!0;else if(s===null){var T=i.stateNode,k=i.memoizedProps;T.props=k;var M=T.context,Q=l.contextType;typeof Q=="object"&&Q!==null?Q=An(Q):(Q=an(l)?Si:$t.current,Q=Fo(i,Q));var te=l.getDerivedStateFromProps,re=typeof te=="function"||typeof T.getSnapshotBeforeUpdate=="function";re||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(k!==f||M!==Q)&&$y(i,T,f,Q),Is=!1;var ee=i.memoizedState;T.state=ee,cu(i,f,T,g),M=i.memoizedState,k!==f||ee!==M||on.current||Is?(typeof te=="function"&&(ef(i,l,te,f),M=i.memoizedState),(k=Is||By(i,l,k,f,ee,M,Q))?(re||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(i.flags|=4194308)):(typeof T.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=f,i.memoizedState=M),T.props=f,T.state=M,T.context=Q,f=k):(typeof T.componentDidMount=="function"&&(i.flags|=4194308),f=!1)}else{T=i.stateNode,gy(s,i),k=i.memoizedProps,Q=i.type===i.elementType?k:Jn(i.type,k),T.props=Q,re=i.pendingProps,ee=T.context,M=l.contextType,typeof M=="object"&&M!==null?M=An(M):(M=an(l)?Si:$t.current,M=Fo(i,M));var he=l.getDerivedStateFromProps;(te=typeof he=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(k!==re||ee!==M)&&$y(i,T,f,M),Is=!1,ee=i.memoizedState,T.state=ee,cu(i,f,T,g);var pe=i.memoizedState;k!==re||ee!==pe||on.current||Is?(typeof he=="function"&&(ef(i,l,he,f),pe=i.memoizedState),(Q=Is||By(i,l,Q,f,ee,pe,M)||!1)?(te||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(f,pe,M),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(f,pe,M)),typeof T.componentDidUpdate=="function"&&(i.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof T.componentDidUpdate!="function"||k===s.memoizedProps&&ee===s.memoizedState||(i.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||k===s.memoizedProps&&ee===s.memoizedState||(i.flags|=1024),i.memoizedProps=f,i.memoizedState=pe),T.props=f,T.state=pe,T.context=M,f=Q):(typeof T.componentDidUpdate!="function"||k===s.memoizedProps&&ee===s.memoizedState||(i.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||k===s.memoizedProps&&ee===s.memoizedState||(i.flags|=1024),f=!1)}return of(s,i,l,f,v,g)}function of(s,i,l,f,g,v){Zy(s,i);var T=(i.flags&128)!==0;if(!f&&!T)return g&&iy(i,l,!1),Wr(s,i,v);f=i.stateNode,RS.current=i;var k=T&&typeof l.getDerivedStateFromError!="function"?null:f.render();return i.flags|=1,s!==null&&T?(i.child=qo(i,s.child,null,v),i.child=qo(i,null,k,v)):en(s,i,k,v),i.memoizedState=f.state,g&&iy(i,l,!0),i.child}function t0(s){var i=s.stateNode;i.pendingContext?ry(s,i.pendingContext,i.pendingContext!==i.context):i.context&&ry(s,i.context,!1),zd(s,i.containerInfo)}function n0(s,i,l,f,g){return $o(),Vd(g),i.flags|=256,en(s,i,l,f),i.child}var af={dehydrated:null,treeContext:null,retryLane:0};function lf(s){return{baseLanes:s,cachePool:null,transitions:null}}function r0(s,i,l){var f=i.pendingProps,g=ot.current,v=!1,T=(i.flags&128)!==0,k;if((k=T)||(k=s!==null&&s.memoizedState===null?!1:(g&2)!==0),k?(v=!0,i.flags&=-129):(s===null||s.memoizedState!==null)&&(g|=1),Ze(ot,g&1),s===null)return Dd(i),s=i.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((i.mode&1)===0?i.lanes=1:s.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(T=f.children,s=f.fallback,v?(f=i.mode,v=i.child,T={mode:"hidden",children:T},(f&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=T):v=Au(T,f,0,null),s=Di(s,f,l,null),v.return=i,s.return=i,v.sibling=s,i.child=v,i.child.memoizedState=lf(l),i.memoizedState=af,s):cf(i,T));if(g=s.memoizedState,g!==null&&(k=g.dehydrated,k!==null))return jS(s,i,T,f,k,g,l);if(v){v=f.fallback,T=i.mode,g=s.child,k=g.sibling;var M={mode:"hidden",children:f.children};return(T&1)===0&&i.child!==g?(f=i.child,f.childLanes=0,f.pendingProps=M,i.deletions=null):(f=js(g,M),f.subtreeFlags=g.subtreeFlags&14680064),k!==null?v=js(k,v):(v=Di(v,T,l,null),v.flags|=2),v.return=i,f.return=i,f.sibling=v,i.child=f,f=v,v=i.child,T=s.child.memoizedState,T=T===null?lf(l):{baseLanes:T.baseLanes|l,cachePool:null,transitions:T.transitions},v.memoizedState=T,v.childLanes=s.childLanes&~l,i.memoizedState=af,f}return v=s.child,s=v.sibling,f=js(v,{mode:"visible",children:f.children}),(i.mode&1)===0&&(f.lanes=l),f.return=i,f.sibling=null,s!==null&&(l=i.deletions,l===null?(i.deletions=[s],i.flags|=16):l.push(s)),i.child=f,i.memoizedState=null,f}function cf(s,i){return i=Au({mode:"visible",children:i},s.mode,0,null),i.return=s,s.child=i}function yu(s,i,l,f){return f!==null&&Vd(f),qo(i,s.child,null,l),s=cf(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function jS(s,i,l,f,g,v,T){if(l)return i.flags&256?(i.flags&=-257,f=nf(Error(t(422))),yu(s,i,T,f)):i.memoizedState!==null?(i.child=s.child,i.flags|=128,null):(v=f.fallback,g=i.mode,f=Au({mode:"visible",children:f.children},g,0,null),v=Di(v,g,T,null),v.flags|=2,f.return=i,v.return=i,f.sibling=v,i.child=f,(i.mode&1)!==0&&qo(i,s.child,null,T),i.child.memoizedState=lf(T),i.memoizedState=af,v);if((i.mode&1)===0)return yu(s,i,T,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var k=f.dgst;return f=k,v=Error(t(419)),f=nf(v,f,void 0),yu(s,i,T,f)}if(k=(T&s.childLanes)!==0,ln||k){if(f=Ct,f!==null){switch(T&-T){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|T))!==0?0:g,g!==0&&g!==v.retryLane&&(v.retryLane=g,Gr(s,g),tr(f,s,g,-1))}return bf(),f=nf(Error(t(421))),yu(s,i,T,f)}return g.data==="$?"?(i.flags|=128,i.child=s.child,i=HS.bind(null,s),g._reactRetry=i,null):(s=v.treeContext,wn=Es(g.nextSibling),xn=i,st=!0,Xn=null,s!==null&&(Nn[kn++]=$r,Nn[kn++]=qr,Nn[kn++]=bi,$r=s.id,qr=s.overflow,bi=i),i=cf(i,f.children),i.flags|=4096,i)}function s0(s,i,l){s.lanes|=i;var f=s.alternate;f!==null&&(f.lanes|=i),Ud(s.return,i,l)}function uf(s,i,l,f,g){var v=s.memoizedState;v===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:f,tail:l,tailMode:g}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=f,v.tail=l,v.tailMode=g)}function i0(s,i,l){var f=i.pendingProps,g=f.revealOrder,v=f.tail;if(en(s,i,f.children,l),f=ot.current,(f&2)!==0)f=f&1|2,i.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&s0(s,l,i);else if(s.tag===19)s0(s,l,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}f&=1}if(Ze(ot,f),(i.mode&1)===0)i.memoizedState=null;else switch(g){case"forwards":for(l=i.child,g=null;l!==null;)s=l.alternate,s!==null&&uu(s)===null&&(g=l),l=l.sibling;l=g,l===null?(g=i.child,i.child=null):(g=l.sibling,l.sibling=null),uf(i,!1,g,l,v);break;case"backwards":for(l=null,g=i.child,i.child=null;g!==null;){if(s=g.alternate,s!==null&&uu(s)===null){i.child=g;break}s=g.sibling,g.sibling=l,l=g,g=s}uf(i,!0,l,null,v);break;case"together":uf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function vu(s,i){(i.mode&1)===0&&s!==null&&(s.alternate=null,i.alternate=null,i.flags|=2)}function Wr(s,i,l){if(s!==null&&(i.dependencies=s.dependencies),Ai|=i.lanes,(l&i.childLanes)===0)return null;if(s!==null&&i.child!==s.child)throw Error(t(153));if(i.child!==null){for(s=i.child,l=js(s,s.pendingProps),i.child=l,l.return=i;s.sibling!==null;)s=s.sibling,l=l.sibling=js(s,s.pendingProps),l.return=i;l.sibling=null}return i.child}function DS(s,i,l){switch(i.tag){case 3:t0(i),$o();break;case 5:xy(i);break;case 1:an(i.type)&&eu(i);break;case 4:zd(i,i.stateNode.containerInfo);break;case 10:var f=i.type._context,g=i.memoizedProps.value;Ze(ou,f._currentValue),f._currentValue=g;break;case 13:if(f=i.memoizedState,f!==null)return f.dehydrated!==null?(Ze(ot,ot.current&1),i.flags|=128,null):(l&i.child.childLanes)!==0?r0(s,i,l):(Ze(ot,ot.current&1),s=Wr(s,i,l),s!==null?s.sibling:null);Ze(ot,ot.current&1);break;case 19:if(f=(l&i.childLanes)!==0,(s.flags&128)!==0){if(f)return i0(s,i,l);i.flags|=128}if(g=i.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Ze(ot,ot.current),f)break;return null;case 22:case 23:return i.lanes=0,Jy(s,i,l)}return Wr(s,i,l)}var o0,hf,a0,l0;o0=function(s,i){for(var l=i.child;l!==null;){if(l.tag===5||l.tag===6)s.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},hf=function(){},a0=function(s,i,l,f){var g=s.memoizedProps;if(g!==f){s=i.stateNode,Ni(vr.current);var v=null;switch(l){case"input":g=ai(s,g),f=ai(s,f),v=[];break;case"select":g=X({},g,{value:void 0}),f=X({},f,{value:void 0}),v=[];break;case"textarea":g=Ra(s,g),f=Ra(s,f),v=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(s.onclick=Xc)}Ma(l,f);var T;l=null;for(Q in g)if(!f.hasOwnProperty(Q)&&g.hasOwnProperty(Q)&&g[Q]!=null)if(Q==="style"){var k=g[Q];for(T in k)k.hasOwnProperty(T)&&(l||(l={}),l[T]="")}else Q!=="dangerouslySetInnerHTML"&&Q!=="children"&&Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&Q!=="autoFocus"&&(o.hasOwnProperty(Q)?v||(v=[]):(v=v||[]).push(Q,null));for(Q in f){var M=f[Q];if(k=g?.[Q],f.hasOwnProperty(Q)&&M!==k&&(M!=null||k!=null))if(Q==="style")if(k){for(T in k)!k.hasOwnProperty(T)||M&&M.hasOwnProperty(T)||(l||(l={}),l[T]="");for(T in M)M.hasOwnProperty(T)&&k[T]!==M[T]&&(l||(l={}),l[T]=M[T])}else l||(v||(v=[]),v.push(Q,l)),l=M;else Q==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,k=k?k.__html:void 0,M!=null&&k!==M&&(v=v||[]).push(Q,M)):Q==="children"?typeof M!="string"&&typeof M!="number"||(v=v||[]).push(Q,""+M):Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&(o.hasOwnProperty(Q)?(M!=null&&Q==="onScroll"&&tt("scroll",s),v||k===M||(v=[])):(v=v||[]).push(Q,M))}l&&(v=v||[]).push("style",l);var Q=v;(i.updateQueue=Q)&&(i.flags|=4)}},l0=function(s,i,l,f){l!==f&&(i.flags|=4)};function vl(s,i){if(!st)switch(s.tailMode){case"hidden":i=s.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function Gt(s){var i=s.alternate!==null&&s.alternate.child===s.child,l=0,f=0;if(i)for(var g=s.child;g!==null;)l|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)l|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=f,s.childLanes=l,i}function VS(s,i,l){var f=i.pendingProps;switch(Rd(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(i),null;case 1:return an(i.type)&&Zc(),Gt(i),null;case 3:return f=i.stateNode,Wo(),nt(on),nt($t),Gd(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(su(i)?i.flags|=4:s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Xn!==null&&(Ef(Xn),Xn=null))),hf(s,i),Gt(i),null;case 5:$d(i);var g=Ni(fl.current);if(l=i.type,s!==null&&i.stateNode!=null)a0(s,i,l,f,g),s.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!f){if(i.stateNode===null)throw Error(t(166));return Gt(i),null}if(s=Ni(vr.current),su(i)){f=i.stateNode,l=i.type;var v=i.memoizedProps;switch(f[yr]=i,f[ll]=v,s=(i.mode&1)!==0,l){case"dialog":tt("cancel",f),tt("close",f);break;case"iframe":case"object":case"embed":tt("load",f);break;case"video":case"audio":for(g=0;g<il.length;g++)tt(il[g],f);break;case"source":tt("error",f);break;case"img":case"image":case"link":tt("error",f),tt("load",f);break;case"details":tt("toggle",f);break;case"input":ao(f,v),tt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!v.multiple},tt("invalid",f);break;case"textarea":co(f,v),tt("invalid",f)}Ma(l,v),g=null;for(var T in v)if(v.hasOwnProperty(T)){var k=v[T];T==="children"?typeof k=="string"?f.textContent!==k&&(v.suppressHydrationWarning!==!0&&Yc(f.textContent,k,s),g=["children",k]):typeof k=="number"&&f.textContent!==""+k&&(v.suppressHydrationWarning!==!0&&Yc(f.textContent,k,s),g=["children",""+k]):o.hasOwnProperty(T)&&k!=null&&T==="onScroll"&&tt("scroll",f)}switch(l){case"input":Dt(f),Ec(f,v,!0);break;case"textarea":Dt(f),ja(f);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(f.onclick=Xc)}f=g,i.updateQueue=f,f!==null&&(i.flags|=4)}else{T=g.nodeType===9?g:g.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=_t(l)),s==="http://www.w3.org/1999/xhtml"?l==="script"?(s=T.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof f.is=="string"?s=T.createElement(l,{is:f.is}):(s=T.createElement(l),l==="select"&&(T=s,f.multiple?T.multiple=!0:f.size&&(T.size=f.size))):s=T.createElementNS(s,l),s[yr]=i,s[ll]=f,o0(s,i,!1,!1),i.stateNode=s;e:{switch(T=Ua(l,f),l){case"dialog":tt("cancel",s),tt("close",s),g=f;break;case"iframe":case"object":case"embed":tt("load",s),g=f;break;case"video":case"audio":for(g=0;g<il.length;g++)tt(il[g],s);g=f;break;case"source":tt("error",s),g=f;break;case"img":case"image":case"link":tt("error",s),tt("load",s),g=f;break;case"details":tt("toggle",s),g=f;break;case"input":ao(s,f),g=ai(s,f),tt("invalid",s);break;case"option":g=f;break;case"select":s._wrapperState={wasMultiple:!!f.multiple},g=X({},f,{value:void 0}),tt("invalid",s);break;case"textarea":co(s,f),g=Ra(s,f),tt("invalid",s);break;default:g=f}Ma(l,g),k=g;for(v in k)if(k.hasOwnProperty(v)){var M=k[v];v==="style"?La(s,M):v==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,M!=null&&Da(s,M)):v==="children"?typeof M=="string"?(l!=="textarea"||M!=="")&&hs(s,M):typeof M=="number"&&hs(s,""+M):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(o.hasOwnProperty(v)?M!=null&&v==="onScroll"&&tt("scroll",s):M!=null&&j(s,v,M,T))}switch(l){case"input":Dt(s),Ec(s,f,!1);break;case"textarea":Dt(s),ja(s);break;case"option":f.value!=null&&s.setAttribute("value",""+Be(f.value));break;case"select":s.multiple=!!f.multiple,v=f.value,v!=null?jr(s,!!f.multiple,v,!1):f.defaultValue!=null&&jr(s,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(s.onclick=Xc)}switch(l){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Gt(i),null;case 6:if(s&&i.stateNode!=null)l0(s,i,s.memoizedProps,f);else{if(typeof f!="string"&&i.stateNode===null)throw Error(t(166));if(l=Ni(fl.current),Ni(vr.current),su(i)){if(f=i.stateNode,l=i.memoizedProps,f[yr]=i,(v=f.nodeValue!==l)&&(s=xn,s!==null))switch(s.tag){case 3:Yc(f.nodeValue,l,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Yc(f.nodeValue,l,(s.mode&1)!==0)}v&&(i.flags|=4)}else f=(l.nodeType===9?l:l.ownerDocument).createTextNode(f),f[yr]=i,i.stateNode=f}return Gt(i),null;case 13:if(nt(ot),f=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(st&&wn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)hy(),$o(),i.flags|=98560,v=!1;else if(v=su(i),f!==null&&f.dehydrated!==null){if(s===null){if(!v)throw Error(t(318));if(v=i.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[yr]=i}else $o(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Gt(i),v=!1}else Xn!==null&&(Ef(Xn),Xn=null),v=!0;if(!v)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=l,i):(f=f!==null,f!==(s!==null&&s.memoizedState!==null)&&f&&(i.child.flags|=8192,(i.mode&1)!==0&&(s===null||(ot.current&1)!==0?bt===0&&(bt=3):bf())),i.updateQueue!==null&&(i.flags|=4),Gt(i),null);case 4:return Wo(),hf(s,i),s===null&&ol(i.stateNode.containerInfo),Gt(i),null;case 10:return Md(i.type._context),Gt(i),null;case 17:return an(i.type)&&Zc(),Gt(i),null;case 19:if(nt(ot),v=i.memoizedState,v===null)return Gt(i),null;if(f=(i.flags&128)!==0,T=v.rendering,T===null)if(f)vl(v,!1);else{if(bt!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(T=uu(s),T!==null){for(i.flags|=128,vl(v,!1),f=T.updateQueue,f!==null&&(i.updateQueue=f,i.flags|=4),i.subtreeFlags=0,f=l,l=i.child;l!==null;)v=l,s=f,v.flags&=14680066,T=v.alternate,T===null?(v.childLanes=0,v.lanes=s,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=T.childLanes,v.lanes=T.lanes,v.child=T.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=T.memoizedProps,v.memoizedState=T.memoizedState,v.updateQueue=T.updateQueue,v.type=T.type,s=T.dependencies,v.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),l=l.sibling;return Ze(ot,ot.current&1|2),i.child}s=s.sibling}v.tail!==null&&Je()>Xo&&(i.flags|=128,f=!0,vl(v,!1),i.lanes=4194304)}else{if(!f)if(s=uu(T),s!==null){if(i.flags|=128,f=!0,l=s.updateQueue,l!==null&&(i.updateQueue=l,i.flags|=4),vl(v,!0),v.tail===null&&v.tailMode==="hidden"&&!T.alternate&&!st)return Gt(i),null}else 2*Je()-v.renderingStartTime>Xo&&l!==1073741824&&(i.flags|=128,f=!0,vl(v,!1),i.lanes=4194304);v.isBackwards?(T.sibling=i.child,i.child=T):(l=v.last,l!==null?l.sibling=T:i.child=T,v.last=T)}return v.tail!==null?(i=v.tail,v.rendering=i,v.tail=i.sibling,v.renderingStartTime=Je(),i.sibling=null,l=ot.current,Ze(ot,f?l&1|2:l&1),i):(Gt(i),null);case 22:case 23:return Sf(),f=i.memoizedState!==null,s!==null&&s.memoizedState!==null!==f&&(i.flags|=8192),f&&(i.mode&1)!==0?(_n&1073741824)!==0&&(Gt(i),i.subtreeFlags&6&&(i.flags|=8192)):Gt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function LS(s,i){switch(Rd(i),i.tag){case 1:return an(i.type)&&Zc(),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return Wo(),nt(on),nt($t),Gd(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 5:return $d(i),null;case 13:if(nt(ot),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(t(340));$o()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return nt(ot),null;case 4:return Wo(),null;case 10:return Md(i.type._context),null;case 22:case 23:return Sf(),null;case 24:return null;default:return null}}var xu=!1,Ht=!1,OS=typeof WeakSet=="function"?WeakSet:Set,de=null;function Qo(s,i){var l=s.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(f){ut(s,i,f)}else l.current=null}function df(s,i,l){try{l()}catch(f){ut(s,i,f)}}var c0=!1;function MS(s,i){if(Td=xs,s=Bg(),md(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var f=l.getSelection&&l.getSelection();if(f&&f.rangeCount!==0){l=f.anchorNode;var g=f.anchorOffset,v=f.focusNode;f=f.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var T=0,k=-1,M=-1,Q=0,te=0,re=s,ee=null;t:for(;;){for(var he;re!==l||g!==0&&re.nodeType!==3||(k=T+g),re!==v||f!==0&&re.nodeType!==3||(M=T+f),re.nodeType===3&&(T+=re.nodeValue.length),(he=re.firstChild)!==null;)ee=re,re=he;for(;;){if(re===s)break t;if(ee===l&&++Q===g&&(k=T),ee===v&&++te===f&&(M=T),(he=re.nextSibling)!==null)break;re=ee,ee=re.parentNode}re=he}l=k===-1||M===-1?null:{start:k,end:M}}else l=null}l=l||{start:0,end:0}}else l=null;for(Sd={focusedElem:s,selectionRange:l},xs=!1,de=i;de!==null;)if(i=de,s=i.child,(i.subtreeFlags&1028)!==0&&s!==null)s.return=i,de=s;else for(;de!==null;){i=de;try{var pe=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(pe!==null){var me=pe.memoizedProps,ft=pe.memoizedState,H=i.stateNode,z=H.getSnapshotBeforeUpdate(i.elementType===i.type?me:Jn(i.type,me),ft);H.__reactInternalSnapshotBeforeUpdate=z}break;case 3:var W=i.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ae){ut(i,i.return,ae)}if(s=i.sibling,s!==null){s.return=i.return,de=s;break}de=i.return}return pe=c0,c0=!1,pe}function xl(s,i,l){var f=i.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&s)===s){var v=g.destroy;g.destroy=void 0,v!==void 0&&df(i,l,v)}g=g.next}while(g!==f)}}function wu(s,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&s)===s){var f=l.create;l.destroy=f()}l=l.next}while(l!==i)}}function ff(s){var i=s.ref;if(i!==null){var l=s.stateNode;switch(s.tag){case 5:s=l;break;default:s=l}typeof i=="function"?i(s):i.current=s}}function u0(s){var i=s.alternate;i!==null&&(s.alternate=null,u0(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&(delete i[yr],delete i[ll],delete i[Nd],delete i[wS],delete i[_S])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function h0(s){return s.tag===5||s.tag===3||s.tag===4}function d0(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||h0(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function pf(s,i,l){var f=s.tag;if(f===5||f===6)s=s.stateNode,i?l.nodeType===8?l.parentNode.insertBefore(s,i):l.insertBefore(s,i):(l.nodeType===8?(i=l.parentNode,i.insertBefore(s,l)):(i=l,i.appendChild(s)),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=Xc));else if(f!==4&&(s=s.child,s!==null))for(pf(s,i,l),s=s.sibling;s!==null;)pf(s,i,l),s=s.sibling}function mf(s,i,l){var f=s.tag;if(f===5||f===6)s=s.stateNode,i?l.insertBefore(s,i):l.appendChild(s);else if(f!==4&&(s=s.child,s!==null))for(mf(s,i,l),s=s.sibling;s!==null;)mf(s,i,l),s=s.sibling}var Ot=null,Zn=!1;function Ns(s,i,l){for(l=l.child;l!==null;)f0(s,i,l),l=l.sibling}function f0(s,i,l){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(gi,l)}catch{}switch(l.tag){case 5:Ht||Qo(l,i);case 6:var f=Ot,g=Zn;Ot=null,Ns(s,i,l),Ot=f,Zn=g,Ot!==null&&(Zn?(s=Ot,l=l.stateNode,s.nodeType===8?s.parentNode.removeChild(l):s.removeChild(l)):Ot.removeChild(l.stateNode));break;case 18:Ot!==null&&(Zn?(s=Ot,l=l.stateNode,s.nodeType===8?Pd(s.parentNode,l):s.nodeType===1&&Pd(s,l),Kn(s)):Pd(Ot,l.stateNode));break;case 4:f=Ot,g=Zn,Ot=l.stateNode.containerInfo,Zn=!0,Ns(s,i,l),Ot=f,Zn=g;break;case 0:case 11:case 14:case 15:if(!Ht&&(f=l.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var v=g,T=v.destroy;v=v.tag,T!==void 0&&((v&2)!==0||(v&4)!==0)&&df(l,i,T),g=g.next}while(g!==f)}Ns(s,i,l);break;case 1:if(!Ht&&(Qo(l,i),f=l.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=l.memoizedProps,f.state=l.memoizedState,f.componentWillUnmount()}catch(k){ut(l,i,k)}Ns(s,i,l);break;case 21:Ns(s,i,l);break;case 22:l.mode&1?(Ht=(f=Ht)||l.memoizedState!==null,Ns(s,i,l),Ht=f):Ns(s,i,l);break;default:Ns(s,i,l)}}function p0(s){var i=s.updateQueue;if(i!==null){s.updateQueue=null;var l=s.stateNode;l===null&&(l=s.stateNode=new OS),i.forEach(function(f){var g=WS.bind(null,s,f);l.has(f)||(l.add(f),f.then(g,g))})}}function er(s,i){var l=i.deletions;if(l!==null)for(var f=0;f<l.length;f++){var g=l[f];try{var v=s,T=i,k=T;e:for(;k!==null;){switch(k.tag){case 5:Ot=k.stateNode,Zn=!1;break e;case 3:Ot=k.stateNode.containerInfo,Zn=!0;break e;case 4:Ot=k.stateNode.containerInfo,Zn=!0;break e}k=k.return}if(Ot===null)throw Error(t(160));f0(v,T,g),Ot=null,Zn=!1;var M=g.alternate;M!==null&&(M.return=null),g.return=null}catch(Q){ut(g,i,Q)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)m0(i,s),i=i.sibling}function m0(s,i){var l=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(er(i,s),wr(s),f&4){try{xl(3,s,s.return),wu(3,s)}catch(me){ut(s,s.return,me)}try{xl(5,s,s.return)}catch(me){ut(s,s.return,me)}}break;case 1:er(i,s),wr(s),f&512&&l!==null&&Qo(l,l.return);break;case 5:if(er(i,s),wr(s),f&512&&l!==null&&Qo(l,l.return),s.flags&32){var g=s.stateNode;try{hs(g,"")}catch(me){ut(s,s.return,me)}}if(f&4&&(g=s.stateNode,g!=null)){var v=s.memoizedProps,T=l!==null?l.memoizedProps:v,k=s.type,M=s.updateQueue;if(s.updateQueue=null,M!==null)try{k==="input"&&v.type==="radio"&&v.name!=null&&Aa(g,v),Ua(k,T);var Q=Ua(k,v);for(T=0;T<M.length;T+=2){var te=M[T],re=M[T+1];te==="style"?La(g,re):te==="dangerouslySetInnerHTML"?Da(g,re):te==="children"?hs(g,re):j(g,te,re,Q)}switch(k){case"input":Ca(g,v);break;case"textarea":uo(g,v);break;case"select":var ee=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!v.multiple;var he=v.value;he!=null?jr(g,!!v.multiple,he,!1):ee!==!!v.multiple&&(v.defaultValue!=null?jr(g,!!v.multiple,v.defaultValue,!0):jr(g,!!v.multiple,v.multiple?[]:"",!1))}g[ll]=v}catch(me){ut(s,s.return,me)}}break;case 6:if(er(i,s),wr(s),f&4){if(s.stateNode===null)throw Error(t(162));g=s.stateNode,v=s.memoizedProps;try{g.nodeValue=v}catch(me){ut(s,s.return,me)}}break;case 3:if(er(i,s),wr(s),f&4&&l!==null&&l.memoizedState.isDehydrated)try{Kn(i.containerInfo)}catch(me){ut(s,s.return,me)}break;case 4:er(i,s),wr(s);break;case 13:er(i,s),wr(s),g=s.child,g.flags&8192&&(v=g.memoizedState!==null,g.stateNode.isHidden=v,!v||g.alternate!==null&&g.alternate.memoizedState!==null||(vf=Je())),f&4&&p0(s);break;case 22:if(te=l!==null&&l.memoizedState!==null,s.mode&1?(Ht=(Q=Ht)||te,er(i,s),Ht=Q):er(i,s),wr(s),f&8192){if(Q=s.memoizedState!==null,(s.stateNode.isHidden=Q)&&!te&&(s.mode&1)!==0)for(de=s,te=s.child;te!==null;){for(re=de=te;de!==null;){switch(ee=de,he=ee.child,ee.tag){case 0:case 11:case 14:case 15:xl(4,ee,ee.return);break;case 1:Qo(ee,ee.return);var pe=ee.stateNode;if(typeof pe.componentWillUnmount=="function"){f=ee,l=ee.return;try{i=f,pe.props=i.memoizedProps,pe.state=i.memoizedState,pe.componentWillUnmount()}catch(me){ut(f,l,me)}}break;case 5:Qo(ee,ee.return);break;case 22:if(ee.memoizedState!==null){v0(re);continue}}he!==null?(he.return=ee,de=he):v0(re)}te=te.sibling}e:for(te=null,re=s;;){if(re.tag===5){if(te===null){te=re;try{g=re.stateNode,Q?(v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(k=re.stateNode,M=re.memoizedProps.style,T=M!=null&&M.hasOwnProperty("display")?M.display:null,k.style.display=Va("display",T))}catch(me){ut(s,s.return,me)}}}else if(re.tag===6){if(te===null)try{re.stateNode.nodeValue=Q?"":re.memoizedProps}catch(me){ut(s,s.return,me)}}else if((re.tag!==22&&re.tag!==23||re.memoizedState===null||re===s)&&re.child!==null){re.child.return=re,re=re.child;continue}if(re===s)break e;for(;re.sibling===null;){if(re.return===null||re.return===s)break e;te===re&&(te=null),re=re.return}te===re&&(te=null),re.sibling.return=re.return,re=re.sibling}}break;case 19:er(i,s),wr(s),f&4&&p0(s);break;case 21:break;default:er(i,s),wr(s)}}function wr(s){var i=s.flags;if(i&2){try{e:{for(var l=s.return;l!==null;){if(h0(l)){var f=l;break e}l=l.return}throw Error(t(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(hs(g,""),f.flags&=-33);var v=d0(s);mf(s,v,g);break;case 3:case 4:var T=f.stateNode.containerInfo,k=d0(s);pf(s,k,T);break;default:throw Error(t(161))}}catch(M){ut(s,s.return,M)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function US(s,i,l){de=s,g0(s)}function g0(s,i,l){for(var f=(s.mode&1)!==0;de!==null;){var g=de,v=g.child;if(g.tag===22&&f){var T=g.memoizedState!==null||xu;if(!T){var k=g.alternate,M=k!==null&&k.memoizedState!==null||Ht;k=xu;var Q=Ht;if(xu=T,(Ht=M)&&!Q)for(de=g;de!==null;)T=de,M=T.child,T.tag===22&&T.memoizedState!==null?x0(g):M!==null?(M.return=T,de=M):x0(g);for(;v!==null;)de=v,g0(v),v=v.sibling;de=g,xu=k,Ht=Q}y0(s)}else(g.subtreeFlags&8772)!==0&&v!==null?(v.return=g,de=v):y0(s)}}function y0(s){for(;de!==null;){var i=de;if((i.flags&8772)!==0){var l=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Ht||wu(5,i);break;case 1:var f=i.stateNode;if(i.flags&4&&!Ht)if(l===null)f.componentDidMount();else{var g=i.elementType===i.type?l.memoizedProps:Jn(i.type,l.memoizedProps);f.componentDidUpdate(g,l.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var v=i.updateQueue;v!==null&&vy(i,v,f);break;case 3:var T=i.updateQueue;if(T!==null){if(l=null,i.child!==null)switch(i.child.tag){case 5:l=i.child.stateNode;break;case 1:l=i.child.stateNode}vy(i,T,l)}break;case 5:var k=i.stateNode;if(l===null&&i.flags&4){l=k;var M=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":M.autoFocus&&l.focus();break;case"img":M.src&&(l.src=M.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var Q=i.alternate;if(Q!==null){var te=Q.memoizedState;if(te!==null){var re=te.dehydrated;re!==null&&Kn(re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ht||i.flags&512&&ff(i)}catch(ee){ut(i,i.return,ee)}}if(i===s){de=null;break}if(l=i.sibling,l!==null){l.return=i.return,de=l;break}de=i.return}}function v0(s){for(;de!==null;){var i=de;if(i===s){de=null;break}var l=i.sibling;if(l!==null){l.return=i.return,de=l;break}de=i.return}}function x0(s){for(;de!==null;){var i=de;try{switch(i.tag){case 0:case 11:case 15:var l=i.return;try{wu(4,i)}catch(M){ut(i,l,M)}break;case 1:var f=i.stateNode;if(typeof f.componentDidMount=="function"){var g=i.return;try{f.componentDidMount()}catch(M){ut(i,g,M)}}var v=i.return;try{ff(i)}catch(M){ut(i,v,M)}break;case 5:var T=i.return;try{ff(i)}catch(M){ut(i,T,M)}}}catch(M){ut(i,i.return,M)}if(i===s){de=null;break}var k=i.sibling;if(k!==null){k.return=i.return,de=k;break}de=i.return}}var FS=Math.ceil,_u=K.ReactCurrentDispatcher,gf=K.ReactCurrentOwner,Rn=K.ReactCurrentBatchConfig,ze=0,Ct=null,vt=null,Mt=0,_n=0,Yo=Ts(0),bt=0,wl=null,Ai=0,Eu=0,yf=0,_l=null,cn=null,vf=0,Xo=1/0,Kr=null,Tu=!1,xf=null,ks=null,Su=!1,As=null,bu=0,El=0,wf=null,Iu=-1,Pu=0;function tn(){return(ze&6)!==0?Je():Iu!==-1?Iu:Iu=Je()}function Cs(s){return(s.mode&1)===0?1:(ze&2)!==0&&Mt!==0?Mt&-Mt:TS.transition!==null?(Pu===0&&(Pu=vi()),Pu):(s=Oe,s!==0||(s=window.event,s=s===void 0?16:Ya(s.type)),s)}function tr(s,i,l,f){if(50<El)throw El=0,wf=null,Error(t(185));ms(s,l,f),((ze&2)===0||s!==Ct)&&(s===Ct&&((ze&2)===0&&(Eu|=l),bt===4&&Rs(s,Mt)),un(s,f),l===1&&ze===0&&(i.mode&1)===0&&(Xo=Je()+500,tu&&bs()))}function un(s,i){var l=s.callbackNode;Lr(s,i);var f=yi(s,s===Ct?Mt:0);if(f===0)l!==null&&Ga(l),s.callbackNode=null,s.callbackPriority=0;else if(i=f&-f,s.callbackPriority!==i){if(l!=null&&Ga(l),i===1)s.tag===0?ES(_0.bind(null,s)):oy(_0.bind(null,s)),vS(function(){(ze&6)===0&&bs()}),l=null;else{switch(ys(f)){case 1:l=mi;break;case 4:l=ds;break;case 16:l=bn;break;case 536870912:l=Pc;break;default:l=bn}l=k0(l,w0.bind(null,s))}s.callbackPriority=i,s.callbackNode=l}}function w0(s,i){if(Iu=-1,Pu=0,(ze&6)!==0)throw Error(t(327));var l=s.callbackNode;if(Jo()&&s.callbackNode!==l)return null;var f=yi(s,s===Ct?Mt:0);if(f===0)return null;if((f&30)!==0||(f&s.expiredLanes)!==0||i)i=Nu(s,f);else{i=f;var g=ze;ze|=2;var v=T0();(Ct!==s||Mt!==i)&&(Kr=null,Xo=Je()+500,Ri(s,i));do try{$S();break}catch(k){E0(s,k)}while(!0);Od(),_u.current=v,ze=g,vt!==null?i=0:(Ct=null,Mt=0,i=bt)}if(i!==0){if(i===2&&(g=gn(s),g!==0&&(f=g,i=_f(s,g))),i===1)throw l=wl,Ri(s,0),Rs(s,f),un(s,Je()),l;if(i===6)Rs(s,f);else{if(g=s.current.alternate,(f&30)===0&&!BS(g)&&(i=Nu(s,f),i===2&&(v=gn(s),v!==0&&(f=v,i=_f(s,v))),i===1))throw l=wl,Ri(s,0),Rs(s,f),un(s,Je()),l;switch(s.finishedWork=g,s.finishedLanes=f,i){case 0:case 1:throw Error(t(345));case 2:ji(s,cn,Kr);break;case 3:if(Rs(s,f),(f&130023424)===f&&(i=vf+500-Je(),10<i)){if(yi(s,0)!==0)break;if(g=s.suspendedLanes,(g&f)!==f){tn(),s.pingedLanes|=s.suspendedLanes&g;break}s.timeoutHandle=Id(ji.bind(null,s,cn,Kr),i);break}ji(s,cn,Kr);break;case 4:if(Rs(s,f),(f&4194240)===f)break;for(i=s.eventTimes,g=-1;0<f;){var T=31-Jt(f);v=1<<T,T=i[T],T>g&&(g=T),f&=~v}if(f=g,f=Je()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*FS(f/1960))-f,10<f){s.timeoutHandle=Id(ji.bind(null,s,cn,Kr),f);break}ji(s,cn,Kr);break;case 5:ji(s,cn,Kr);break;default:throw Error(t(329))}}}return un(s,Je()),s.callbackNode===l?w0.bind(null,s):null}function _f(s,i){var l=_l;return s.current.memoizedState.isDehydrated&&(Ri(s,i).flags|=256),s=Nu(s,i),s!==2&&(i=cn,cn=l,i!==null&&Ef(i)),s}function Ef(s){cn===null?cn=s:cn.push.apply(cn,s)}function BS(s){for(var i=s;;){if(i.flags&16384){var l=i.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var f=0;f<l.length;f++){var g=l[f],v=g.getSnapshot;g=g.value;try{if(!Yn(v(),g))return!1}catch{return!1}}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Rs(s,i){for(i&=~yf,i&=~Eu,s.suspendedLanes|=i,s.pingedLanes&=~i,s=s.expirationTimes;0<i;){var l=31-Jt(i),f=1<<l;s[l]=-1,i&=~f}}function _0(s){if((ze&6)!==0)throw Error(t(327));Jo();var i=yi(s,0);if((i&1)===0)return un(s,Je()),null;var l=Nu(s,i);if(s.tag!==0&&l===2){var f=gn(s);f!==0&&(i=f,l=_f(s,f))}if(l===1)throw l=wl,Ri(s,0),Rs(s,i),un(s,Je()),l;if(l===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=i,ji(s,cn,Kr),un(s,Je()),null}function Tf(s,i){var l=ze;ze|=1;try{return s(i)}finally{ze=l,ze===0&&(Xo=Je()+500,tu&&bs())}}function Ci(s){As!==null&&As.tag===0&&(ze&6)===0&&Jo();var i=ze;ze|=1;var l=Rn.transition,f=Oe;try{if(Rn.transition=null,Oe=1,s)return s()}finally{Oe=f,Rn.transition=l,ze=i,(ze&6)===0&&bs()}}function Sf(){_n=Yo.current,nt(Yo)}function Ri(s,i){s.finishedWork=null,s.finishedLanes=0;var l=s.timeoutHandle;if(l!==-1&&(s.timeoutHandle=-1,yS(l)),vt!==null)for(l=vt.return;l!==null;){var f=l;switch(Rd(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Zc();break;case 3:Wo(),nt(on),nt($t),Gd();break;case 5:$d(f);break;case 4:Wo();break;case 13:nt(ot);break;case 19:nt(ot);break;case 10:Md(f.type._context);break;case 22:case 23:Sf()}l=l.return}if(Ct=s,vt=s=js(s.current,null),Mt=_n=i,bt=0,wl=null,yf=Eu=Ai=0,cn=_l=null,Pi!==null){for(i=0;i<Pi.length;i++)if(l=Pi[i],f=l.interleaved,f!==null){l.interleaved=null;var g=f.next,v=l.pending;if(v!==null){var T=v.next;v.next=g,f.next=T}l.pending=f}Pi=null}return s}function E0(s,i){do{var l=vt;try{if(Od(),hu.current=mu,du){for(var f=at.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}du=!1}if(ki=0,At=St=at=null,pl=!1,ml=0,gf.current=null,l===null||l.return===null){bt=1,wl=i,vt=null;break}e:{var v=s,T=l.return,k=l,M=i;if(i=Mt,k.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){var Q=M,te=k,re=te.tag;if((te.mode&1)===0&&(re===0||re===11||re===15)){var ee=te.alternate;ee?(te.updateQueue=ee.updateQueue,te.memoizedState=ee.memoizedState,te.lanes=ee.lanes):(te.updateQueue=null,te.memoizedState=null)}var he=Wy(T);if(he!==null){he.flags&=-257,Ky(he,T,k,v,i),he.mode&1&&Hy(v,Q,i),i=he,M=Q;var pe=i.updateQueue;if(pe===null){var me=new Set;me.add(M),i.updateQueue=me}else pe.add(M);break e}else{if((i&1)===0){Hy(v,Q,i),bf();break e}M=Error(t(426))}}else if(st&&k.mode&1){var ft=Wy(T);if(ft!==null){(ft.flags&65536)===0&&(ft.flags|=256),Ky(ft,T,k,v,i),Vd(Ko(M,k));break e}}v=M=Ko(M,k),bt!==4&&(bt=2),_l===null?_l=[v]:_l.push(v),v=T;do{switch(v.tag){case 3:v.flags|=65536,i&=-i,v.lanes|=i;var H=qy(v,M,i);yy(v,H);break e;case 1:k=M;var z=v.type,W=v.stateNode;if((v.flags&128)===0&&(typeof z.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(ks===null||!ks.has(W)))){v.flags|=65536,i&=-i,v.lanes|=i;var ae=Gy(v,k,i);yy(v,ae);break e}}v=v.return}while(v!==null)}b0(l)}catch(ye){i=ye,vt===l&&l!==null&&(vt=l=l.return);continue}break}while(!0)}function T0(){var s=_u.current;return _u.current=mu,s===null?mu:s}function bf(){(bt===0||bt===3||bt===2)&&(bt=4),Ct===null||(Ai&268435455)===0&&(Eu&268435455)===0||Rs(Ct,Mt)}function Nu(s,i){var l=ze;ze|=2;var f=T0();(Ct!==s||Mt!==i)&&(Kr=null,Ri(s,i));do try{zS();break}catch(g){E0(s,g)}while(!0);if(Od(),ze=l,_u.current=f,vt!==null)throw Error(t(261));return Ct=null,Mt=0,bt}function zS(){for(;vt!==null;)S0(vt)}function $S(){for(;vt!==null&&!bc();)S0(vt)}function S0(s){var i=N0(s.alternate,s,_n);s.memoizedProps=s.pendingProps,i===null?b0(s):vt=i,gf.current=null}function b0(s){var i=s;do{var l=i.alternate;if(s=i.return,(i.flags&32768)===0){if(l=VS(l,i,_n),l!==null){vt=l;return}}else{if(l=LS(l,i),l!==null){l.flags&=32767,vt=l;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{bt=6,vt=null;return}}if(i=i.sibling,i!==null){vt=i;return}vt=i=s}while(i!==null);bt===0&&(bt=5)}function ji(s,i,l){var f=Oe,g=Rn.transition;try{Rn.transition=null,Oe=1,qS(s,i,l,f)}finally{Rn.transition=g,Oe=f}return null}function qS(s,i,l,f){do Jo();while(As!==null);if((ze&6)!==0)throw Error(t(327));l=s.finishedWork;var g=s.finishedLanes;if(l===null)return null;if(s.finishedWork=null,s.finishedLanes=0,l===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var v=l.lanes|l.childLanes;if(Ye(s,v),s===Ct&&(vt=Ct=null,Mt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Su||(Su=!0,k0(bn,function(){return Jo(),null})),v=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||v){v=Rn.transition,Rn.transition=null;var T=Oe;Oe=1;var k=ze;ze|=4,gf.current=null,MS(s,l),m0(l,s),uS(Sd),xs=!!Td,Sd=Td=null,s.current=l,US(l),ad(),ze=k,Oe=T,Rn.transition=v}else s.current=l;if(Su&&(Su=!1,As=s,bu=g),v=s.pendingLanes,v===0&&(ks=null),Nc(l.stateNode),un(s,Je()),i!==null)for(f=s.onRecoverableError,l=0;l<i.length;l++)g=i[l],f(g.value,{componentStack:g.stack,digest:g.digest});if(Tu)throw Tu=!1,s=xf,xf=null,s;return(bu&1)!==0&&s.tag!==0&&Jo(),v=s.pendingLanes,(v&1)!==0?s===wf?El++:(El=0,wf=s):El=0,bs(),null}function Jo(){if(As!==null){var s=ys(bu),i=Rn.transition,l=Oe;try{if(Rn.transition=null,Oe=16>s?16:s,As===null)var f=!1;else{if(s=As,As=null,bu=0,(ze&6)!==0)throw Error(t(331));var g=ze;for(ze|=4,de=s.current;de!==null;){var v=de,T=v.child;if((de.flags&16)!==0){var k=v.deletions;if(k!==null){for(var M=0;M<k.length;M++){var Q=k[M];for(de=Q;de!==null;){var te=de;switch(te.tag){case 0:case 11:case 15:xl(8,te,v)}var re=te.child;if(re!==null)re.return=te,de=re;else for(;de!==null;){te=de;var ee=te.sibling,he=te.return;if(u0(te),te===Q){de=null;break}if(ee!==null){ee.return=he,de=ee;break}de=he}}}var pe=v.alternate;if(pe!==null){var me=pe.child;if(me!==null){pe.child=null;do{var ft=me.sibling;me.sibling=null,me=ft}while(me!==null)}}de=v}}if((v.subtreeFlags&2064)!==0&&T!==null)T.return=v,de=T;else e:for(;de!==null;){if(v=de,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:xl(9,v,v.return)}var H=v.sibling;if(H!==null){H.return=v.return,de=H;break e}de=v.return}}var z=s.current;for(de=z;de!==null;){T=de;var W=T.child;if((T.subtreeFlags&2064)!==0&&W!==null)W.return=T,de=W;else e:for(T=z;de!==null;){if(k=de,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:wu(9,k)}}catch(ye){ut(k,k.return,ye)}if(k===T){de=null;break e}var ae=k.sibling;if(ae!==null){ae.return=k.return,de=ae;break e}de=k.return}}if(ze=g,bs(),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(gi,s)}catch{}f=!0}return f}finally{Oe=l,Rn.transition=i}}return!1}function I0(s,i,l){i=Ko(l,i),i=qy(s,i,1),s=Ps(s,i,1),i=tn(),s!==null&&(ms(s,1,i),un(s,i))}function ut(s,i,l){if(s.tag===3)I0(s,s,l);else for(;i!==null;){if(i.tag===3){I0(i,s,l);break}else if(i.tag===1){var f=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(ks===null||!ks.has(f))){s=Ko(l,s),s=Gy(i,s,1),i=Ps(i,s,1),s=tn(),i!==null&&(ms(i,1,s),un(i,s));break}}i=i.return}}function GS(s,i,l){var f=s.pingCache;f!==null&&f.delete(i),i=tn(),s.pingedLanes|=s.suspendedLanes&l,Ct===s&&(Mt&l)===l&&(bt===4||bt===3&&(Mt&130023424)===Mt&&500>Je()-vf?Ri(s,0):yf|=l),un(s,i)}function P0(s,i){i===0&&((s.mode&1)===0?i=1:(i=_o,_o<<=1,(_o&130023424)===0&&(_o=4194304)));var l=tn();s=Gr(s,i),s!==null&&(ms(s,i,l),un(s,l))}function HS(s){var i=s.memoizedState,l=0;i!==null&&(l=i.retryLane),P0(s,l)}function WS(s,i){var l=0;switch(s.tag){case 13:var f=s.stateNode,g=s.memoizedState;g!==null&&(l=g.retryLane);break;case 19:f=s.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(i),P0(s,l)}var N0;N0=function(s,i,l){if(s!==null)if(s.memoizedProps!==i.pendingProps||on.current)ln=!0;else{if((s.lanes&l)===0&&(i.flags&128)===0)return ln=!1,DS(s,i,l);ln=(s.flags&131072)!==0}else ln=!1,st&&(i.flags&1048576)!==0&&ay(i,ru,i.index);switch(i.lanes=0,i.tag){case 2:var f=i.type;vu(s,i),s=i.pendingProps;var g=Fo(i,$t.current);Ho(i,l),g=Kd(null,i,f,s,g,l);var v=Qd();return i.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,an(f)?(v=!0,eu(i)):v=!1,i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Bd(i),g.updater=gu,i.stateNode=g,g._reactInternals=i,tf(i,f,s,l),i=of(null,i,f,!0,v,l)):(i.tag=0,st&&v&&Cd(i),en(null,i,g,l),i=i.child),i;case 16:f=i.elementType;e:{switch(vu(s,i),s=i.pendingProps,g=f._init,f=g(f._payload),i.type=f,g=i.tag=QS(f),s=Jn(f,s),g){case 0:i=sf(null,i,f,s,l);break e;case 1:i=e0(null,i,f,s,l);break e;case 11:i=Qy(null,i,f,s,l);break e;case 14:i=Yy(null,i,f,Jn(f.type,s),l);break e}throw Error(t(306,f,""))}return i;case 0:return f=i.type,g=i.pendingProps,g=i.elementType===f?g:Jn(f,g),sf(s,i,f,g,l);case 1:return f=i.type,g=i.pendingProps,g=i.elementType===f?g:Jn(f,g),e0(s,i,f,g,l);case 3:e:{if(t0(i),s===null)throw Error(t(387));f=i.pendingProps,v=i.memoizedState,g=v.element,gy(s,i),cu(i,f,null,l);var T=i.memoizedState;if(f=T.element,v.isDehydrated)if(v={element:f,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},i.updateQueue.baseState=v,i.memoizedState=v,i.flags&256){g=Ko(Error(t(423)),i),i=n0(s,i,f,l,g);break e}else if(f!==g){g=Ko(Error(t(424)),i),i=n0(s,i,f,l,g);break e}else for(wn=Es(i.stateNode.containerInfo.firstChild),xn=i,st=!0,Xn=null,l=py(i,null,f,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if($o(),f===g){i=Wr(s,i,l);break e}en(s,i,f,l)}i=i.child}return i;case 5:return xy(i),s===null&&Dd(i),f=i.type,g=i.pendingProps,v=s!==null?s.memoizedProps:null,T=g.children,bd(f,g)?T=null:v!==null&&bd(f,v)&&(i.flags|=32),Zy(s,i),en(s,i,T,l),i.child;case 6:return s===null&&Dd(i),null;case 13:return r0(s,i,l);case 4:return zd(i,i.stateNode.containerInfo),f=i.pendingProps,s===null?i.child=qo(i,null,f,l):en(s,i,f,l),i.child;case 11:return f=i.type,g=i.pendingProps,g=i.elementType===f?g:Jn(f,g),Qy(s,i,f,g,l);case 7:return en(s,i,i.pendingProps,l),i.child;case 8:return en(s,i,i.pendingProps.children,l),i.child;case 12:return en(s,i,i.pendingProps.children,l),i.child;case 10:e:{if(f=i.type._context,g=i.pendingProps,v=i.memoizedProps,T=g.value,Ze(ou,f._currentValue),f._currentValue=T,v!==null)if(Yn(v.value,T)){if(v.children===g.children&&!on.current){i=Wr(s,i,l);break e}}else for(v=i.child,v!==null&&(v.return=i);v!==null;){var k=v.dependencies;if(k!==null){T=v.child;for(var M=k.firstContext;M!==null;){if(M.context===f){if(v.tag===1){M=Hr(-1,l&-l),M.tag=2;var Q=v.updateQueue;if(Q!==null){Q=Q.shared;var te=Q.pending;te===null?M.next=M:(M.next=te.next,te.next=M),Q.pending=M}}v.lanes|=l,M=v.alternate,M!==null&&(M.lanes|=l),Ud(v.return,l,i),k.lanes|=l;break}M=M.next}}else if(v.tag===10)T=v.type===i.type?null:v.child;else if(v.tag===18){if(T=v.return,T===null)throw Error(t(341));T.lanes|=l,k=T.alternate,k!==null&&(k.lanes|=l),Ud(T,l,i),T=v.sibling}else T=v.child;if(T!==null)T.return=v;else for(T=v;T!==null;){if(T===i){T=null;break}if(v=T.sibling,v!==null){v.return=T.return,T=v;break}T=T.return}v=T}en(s,i,g.children,l),i=i.child}return i;case 9:return g=i.type,f=i.pendingProps.children,Ho(i,l),g=An(g),f=f(g),i.flags|=1,en(s,i,f,l),i.child;case 14:return f=i.type,g=Jn(f,i.pendingProps),g=Jn(f.type,g),Yy(s,i,f,g,l);case 15:return Xy(s,i,i.type,i.pendingProps,l);case 17:return f=i.type,g=i.pendingProps,g=i.elementType===f?g:Jn(f,g),vu(s,i),i.tag=1,an(f)?(s=!0,eu(i)):s=!1,Ho(i,l),zy(i,f,g),tf(i,f,g,l),of(null,i,f,!0,s,l);case 19:return i0(s,i,l);case 22:return Jy(s,i,l)}throw Error(t(156,i.tag))};function k0(s,i){return xo(s,i)}function KS(s,i,l,f){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(s,i,l,f){return new KS(s,i,l,f)}function If(s){return s=s.prototype,!(!s||!s.isReactComponent)}function QS(s){if(typeof s=="function")return If(s)?1:0;if(s!=null){if(s=s.$$typeof,s===$)return 11;if(s===$e)return 14}return 2}function js(s,i){var l=s.alternate;return l===null?(l=jn(s.tag,i,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=i,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&14680064,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,i=s.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l}function ku(s,i,l,f,g,v){var T=2;if(f=s,typeof s=="function")If(s)&&(T=1);else if(typeof s=="string")T=5;else e:switch(s){case R:return Di(l.children,g,v,i);case I:T=8,g|=8;break;case P:return s=jn(12,l,i,g|2),s.elementType=P,s.lanes=v,s;case A:return s=jn(13,l,i,g),s.elementType=A,s.lanes=v,s;case Ie:return s=jn(19,l,i,g),s.elementType=Ie,s.lanes=v,s;case Ce:return Au(l,g,v,i);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case L:T=10;break e;case F:T=9;break e;case $:T=11;break e;case $e:T=14;break e;case je:T=16,f=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return i=jn(T,l,i,g),i.elementType=s,i.type=f,i.lanes=v,i}function Di(s,i,l,f){return s=jn(7,s,f,i),s.lanes=l,s}function Au(s,i,l,f){return s=jn(22,s,f,i),s.elementType=Ce,s.lanes=l,s.stateNode={isHidden:!1},s}function Pf(s,i,l){return s=jn(6,s,null,i),s.lanes=l,s}function Nf(s,i,l){return i=jn(4,s.children!==null?s.children:[],s.key,i),i.lanes=l,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}function YS(s,i,l,f,g){this.tag=i,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ps(0),this.expirationTimes=ps(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ps(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function kf(s,i,l,f,g,v,T,k,M){return s=new YS(s,i,l,k,M),i===1?(i=1,v===!0&&(i|=8)):i=0,v=jn(3,null,null,i),s.current=v,v.stateNode=s,v.memoizedState={element:f,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bd(v),s}function XS(s,i,l){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ie,key:f==null?null:""+f,children:s,containerInfo:i,implementation:l}}function A0(s){if(!s)return Ss;s=s._reactInternals;e:{if($n(s)!==s||s.tag!==1)throw Error(t(170));var i=s;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(an(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(s.tag===1){var l=s.type;if(an(l))return sy(s,l,i)}return i}function C0(s,i,l,f,g,v,T,k,M){return s=kf(l,f,!0,s,g,v,T,k,M),s.context=A0(null),l=s.current,f=tn(),g=Cs(l),v=Hr(f,g),v.callback=i??null,Ps(l,v,g),s.current.lanes=g,ms(s,g,f),un(s,f),s}function Cu(s,i,l,f){var g=i.current,v=tn(),T=Cs(g);return l=A0(l),i.context===null?i.context=l:i.pendingContext=l,i=Hr(v,T),i.payload={element:s},f=f===void 0?null:f,f!==null&&(i.callback=f),s=Ps(g,i,T),s!==null&&(tr(s,g,T,v),lu(s,g,T)),T}function Ru(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function R0(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<i?l:i}}function Af(s,i){R0(s,i),(s=s.alternate)&&R0(s,i)}function JS(){return null}var j0=typeof reportError=="function"?reportError:function(s){console.error(s)};function Cf(s){this._internalRoot=s}ju.prototype.render=Cf.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(t(409));Cu(s,i,null,null)},ju.prototype.unmount=Cf.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;Ci(function(){Cu(null,s,null,null)}),i[Br]=null}};function ju(s){this._internalRoot=s}ju.prototype.unstable_scheduleHydration=function(s){if(s){var i=jc();s={blockedOn:null,target:s,priority:i};for(var l=0;l<fr.length&&i!==0&&i<fr[l].priority;l++);fr.splice(l,0,s),l===0&&Lc(s)}};function Rf(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Du(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function D0(){}function ZS(s,i,l,f,g){if(g){if(typeof f=="function"){var v=f;f=function(){var Q=Ru(T);v.call(Q)}}var T=C0(i,f,s,0,null,!1,!1,"",D0);return s._reactRootContainer=T,s[Br]=T.current,ol(s.nodeType===8?s.parentNode:s),Ci(),T}for(;g=s.lastChild;)s.removeChild(g);if(typeof f=="function"){var k=f;f=function(){var Q=Ru(M);k.call(Q)}}var M=kf(s,0,!1,null,null,!1,!1,"",D0);return s._reactRootContainer=M,s[Br]=M.current,ol(s.nodeType===8?s.parentNode:s),Ci(function(){Cu(i,M,l,f)}),M}function Vu(s,i,l,f,g){var v=l._reactRootContainer;if(v){var T=v;if(typeof g=="function"){var k=g;g=function(){var M=Ru(T);k.call(M)}}Cu(i,T,s,g)}else T=ZS(l,i,s,g,f);return Ru(T)}Cc=function(s){switch(s.tag){case 3:var i=s.stateNode;if(i.current.memoizedState.isDehydrated){var l=fs(i.pendingLanes);l!==0&&(gs(i,l|1),un(i,Je()),(ze&6)===0&&(Xo=Je()+500,bs()))}break;case 13:Ci(function(){var f=Gr(s,1);if(f!==null){var g=tn();tr(f,s,1,g)}}),Af(s,1)}},Eo=function(s){if(s.tag===13){var i=Gr(s,134217728);if(i!==null){var l=tn();tr(i,s,134217728,l)}Af(s,134217728)}},Rc=function(s){if(s.tag===13){var i=Cs(s),l=Gr(s,i);if(l!==null){var f=tn();tr(l,s,i,f)}Af(s,i)}},jc=function(){return Oe},Dc=function(s,i){var l=Oe;try{return Oe=s,i()}finally{Oe=l}},fo=function(s,i,l){switch(i){case"input":if(Ca(s,l),i=l.name,l.type==="radio"&&i!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<l.length;i++){var f=l[i];if(f!==s&&f.form===s.form){var g=Jc(f);if(!g)throw Error(t(90));oi(f),Ca(f,g)}}}break;case"textarea":uo(s,l);break;case"select":i=l.value,i!=null&&jr(s,!!l.multiple,i,!1)}},hi=Tf,Ba=Ci;var eb={usingClientEntryPoint:!1,Events:[cl,Mo,Jc,hr,Fa,Tf]},Tl={findFiberByHostInstance:Ti,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tb={bundleType:Tl.bundleType,version:Tl.version,rendererPackageName:Tl.rendererPackageName,rendererConfig:Tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:K.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=qa(s),s===null?null:s.stateNode},findFiberByHostInstance:Tl.findFiberByHostInstance||JS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lu.isDisabled&&Lu.supportsFiber)try{gi=Lu.inject(tb),mn=Lu}catch{}}return hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eb,hn.createPortal=function(s,i){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rf(i))throw Error(t(200));return XS(s,i,null,l)},hn.createRoot=function(s,i){if(!Rf(s))throw Error(t(299));var l=!1,f="",g=j0;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onRecoverableError!==void 0&&(g=i.onRecoverableError)),i=kf(s,1,!1,null,null,l,!1,f,g),s[Br]=i.current,ol(s.nodeType===8?s.parentNode:s),new Cf(i)},hn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=qa(i),s=s===null?null:s.stateNode,s},hn.flushSync=function(s){return Ci(s)},hn.hydrate=function(s,i,l){if(!Du(i))throw Error(t(200));return Vu(null,s,i,!0,l)},hn.hydrateRoot=function(s,i,l){if(!Rf(s))throw Error(t(405));var f=l!=null&&l.hydratedSources||null,g=!1,v="",T=j0;if(l!=null&&(l.unstable_strictMode===!0&&(g=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onRecoverableError!==void 0&&(T=l.onRecoverableError)),i=C0(i,null,s,1,l??null,g,!1,v,T),s[Br]=i.current,ol(s),f)for(s=0;s<f.length;s++)l=f[s],g=l._getVersion,g=g(l._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[l,g]:i.mutableSourceEagerHydrationData.push(l,g);return new ju(i)},hn.render=function(s,i,l){if(!Du(i))throw Error(t(200));return Vu(null,s,i,!1,l)},hn.unmountComponentAtNode=function(s){if(!Du(s))throw Error(t(40));return s._reactRootContainer?(Ci(function(){Vu(null,null,s,!1,function(){s._reactRootContainer=null,s[Br]=null})}),!0):!1},hn.unstable_batchedUpdates=Tf,hn.unstable_renderSubtreeIntoContainer=function(s,i,l,f){if(!Du(l))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Vu(s,i,l,!1,f)},hn.version="18.3.1-next-f1338f8080-20240426",hn}var z0;function Aw(){if(z0)return Vf.exports;z0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Vf.exports=hb(),Vf.exports}var $0;function db(){if($0)return Ou;$0=1;var n=Aw();return Ou.createRoot=n.createRoot,Ou.hydrateRoot=n.hydrateRoot,Ou}var fb=db();Aw();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ql(){return ql=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ql.apply(this,arguments)}var $s;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})($s||($s={}));const q0="popstate";function pb(n){n===void 0&&(n={});function e(r,o){let{pathname:a,search:c,hash:d}=r.location;return dp("",{pathname:a,search:c,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(r,o){return typeof o=="string"?o:oh(o)}return gb(e,t,null,n)}function gt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Cw(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function mb(){return Math.random().toString(36).substr(2,8)}function G0(n,e){return{usr:n.state,key:n.key,idx:e}}function dp(n,e,t,r){return t===void 0&&(t=null),ql({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Ta(e):e,{state:t,key:e&&e.key||r||mb()})}function oh(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ta(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function gb(n,e,t,r){r===void 0&&(r={});let{window:o=document.defaultView,v5Compat:a=!1}=r,c=o.history,d=$s.Pop,p=null,m=x();m==null&&(m=0,c.replaceState(ql({},c.state,{idx:m}),""));function x(){return(c.state||{idx:null}).idx}function w(){d=$s.Pop;let N=x(),B=N==null?null:N-m;m=N,p&&p({action:d,location:D.location,delta:B})}function E(N,B){d=$s.Push;let U=dp(D.location,N,B);m=x()+1;let j=G0(U,m),K=D.createHref(U);try{c.pushState(j,"",K)}catch(Z){if(Z instanceof DOMException&&Z.name==="DataCloneError")throw Z;o.location.assign(K)}a&&p&&p({action:d,location:D.location,delta:1})}function S(N,B){d=$s.Replace;let U=dp(D.location,N,B);m=x();let j=G0(U,m),K=D.createHref(U);c.replaceState(j,"",K),a&&p&&p({action:d,location:D.location,delta:0})}function V(N){let B=o.location.origin!=="null"?o.location.origin:o.location.href,U=typeof N=="string"?N:oh(N);return U=U.replace(/ $/,"%20"),gt(B,"No window.location.(origin|href) available to create URL for href: "+U),new URL(U,B)}let D={get action(){return d},get location(){return n(o,c)},listen(N){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(q0,w),p=N,()=>{o.removeEventListener(q0,w),p=null}},createHref(N){return e(o,N)},createURL:V,encodeLocation(N){let B=V(N);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:E,replace:S,go(N){return c.go(N)}};return D}var H0;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(H0||(H0={}));function yb(n,e,t){return t===void 0&&(t="/"),vb(n,e,t)}function vb(n,e,t,r){let o=typeof e=="string"?Ta(e):e,a=om(o.pathname||"/",t);if(a==null)return null;let c=Rw(n);xb(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let m=Cb(a);d=Nb(c[p],m)}return d}function Rw(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let o=(a,c,d)=>{let p={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};p.relativePath.startsWith("/")&&(gt(p.relativePath.startsWith(r),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(r.length));let m=Gs([r,p.relativePath]),x=t.concat(p);a.children&&a.children.length>0&&(gt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),Rw(a.children,e,x,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:Ib(m,a.index),routesMeta:x})};return n.forEach((a,c)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))o(a,c);else for(let p of jw(a.path))o(a,c,p)}),e}function jw(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,o=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return o?[a,""]:[a];let c=jw(r.join("/")),d=[];return d.push(...c.map(p=>p===""?a:[a,p].join("/"))),o&&d.push(...c),d.map(p=>n.startsWith("/")&&p===""?"/":p)}function xb(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Pb(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const wb=/^:[\w-]+$/,_b=3,Eb=2,Tb=1,Sb=10,bb=-2,W0=n=>n==="*";function Ib(n,e){let t=n.split("/"),r=t.length;return t.some(W0)&&(r+=bb),e&&(r+=Eb),t.filter(o=>!W0(o)).reduce((o,a)=>o+(wb.test(a)?_b:a===""?Tb:Sb),r)}function Pb(n,e){return n.length===e.length&&n.slice(0,-1).every((r,o)=>r===e[o])?n[n.length-1]-e[e.length-1]:0}function Nb(n,e,t){let{routesMeta:r}=n,o={},a="/",c=[];for(let d=0;d<r.length;++d){let p=r[d],m=d===r.length-1,x=a==="/"?e:e.slice(a.length)||"/",w=kb({path:p.relativePath,caseSensitive:p.caseSensitive,end:m},x),E=p.route;if(!w)return null;Object.assign(o,w.params),c.push({params:o,pathname:Gs([a,w.pathname]),pathnameBase:Vb(Gs([a,w.pathnameBase])),route:E}),w.pathnameBase!=="/"&&(a=Gs([a,w.pathnameBase]))}return c}function kb(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=Ab(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let a=o[0],c=a.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:r.reduce((m,x,w)=>{let{paramName:E,isOptional:S}=x;if(E==="*"){let D=d[w]||"";c=a.slice(0,a.length-D.length).replace(/(.)\/+$/,"$1")}const V=d[w];return S&&!V?m[E]=void 0:m[E]=(V||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:c,pattern:n}}function Ab(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Cw(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(r.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function Cb(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Cw(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function om(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function Rb(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:o=""}=typeof n=="string"?Ta(n):n;return{pathname:t?t.startsWith("/")?t:jb(t,e):e,search:Lb(r),hash:Ob(o)}}function jb(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Mf(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Db(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function am(n,e){let t=Db(n);return e?t.map((r,o)=>o===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function lm(n,e,t,r){r===void 0&&(r=!1);let o;typeof n=="string"?o=Ta(n):(o=ql({},n),gt(!o.pathname||!o.pathname.includes("?"),Mf("?","pathname","search",o)),gt(!o.pathname||!o.pathname.includes("#"),Mf("#","pathname","hash",o)),gt(!o.search||!o.search.includes("#"),Mf("#","search","hash",o)));let a=n===""||o.pathname==="",c=a?"/":o.pathname,d;if(c==null)d=t;else{let w=e.length-1;if(!r&&c.startsWith("..")){let E=c.split("/");for(;E[0]==="..";)E.shift(),w-=1;o.pathname=E.join("/")}d=w>=0?e[w]:"/"}let p=Rb(o,d),m=c&&c!=="/"&&c.endsWith("/"),x=(a||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(m||x)&&(p.pathname+="/"),p}const Gs=n=>n.join("/").replace(/\/\/+/g,"/"),Vb=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Lb=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Ob=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Mb(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Dw=["post","put","patch","delete"];new Set(Dw);const Ub=["get",...Dw];new Set(Ub);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gl(){return Gl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Gl.apply(this,arguments)}const cm=C.createContext(null),Fb=C.createContext(null),ri=C.createContext(null),Dh=C.createContext(null),cs=C.createContext({outlet:null,matches:[],isDataRoute:!1}),Vw=C.createContext(null);function Bb(n,e){let{relative:t}=e===void 0?{}:e;Sa()||gt(!1);let{basename:r,navigator:o}=C.useContext(ri),{hash:a,pathname:c,search:d}=Mw(n,{relative:t}),p=c;return r!=="/"&&(p=c==="/"?r:Gs([r,c])),o.createHref({pathname:p,search:d,hash:a})}function Sa(){return C.useContext(Dh)!=null}function Zi(){return Sa()||gt(!1),C.useContext(Dh).location}function Lw(n){C.useContext(ri).static||C.useLayoutEffect(n)}function ar(){let{isDataRoute:n}=C.useContext(cs);return n?eI():zb()}function zb(){Sa()||gt(!1);let n=C.useContext(cm),{basename:e,future:t,navigator:r}=C.useContext(ri),{matches:o}=C.useContext(cs),{pathname:a}=Zi(),c=JSON.stringify(am(o,t.v7_relativeSplatPath)),d=C.useRef(!1);return Lw(()=>{d.current=!0}),C.useCallback(function(m,x){if(x===void 0&&(x={}),!d.current)return;if(typeof m=="number"){r.go(m);return}let w=lm(m,JSON.parse(c),a,x.relative==="path");n==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:Gs([e,w.pathname])),(x.replace?r.replace:r.push)(w,x.state,x)},[e,r,c,a,n])}function Ow(){let{matches:n}=C.useContext(cs),e=n[n.length-1];return e?e.params:{}}function Mw(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=C.useContext(ri),{matches:o}=C.useContext(cs),{pathname:a}=Zi(),c=JSON.stringify(am(o,r.v7_relativeSplatPath));return C.useMemo(()=>lm(n,JSON.parse(c),a,t==="path"),[n,c,a,t])}function $b(n,e){return qb(n,e)}function qb(n,e,t,r){Sa()||gt(!1);let{navigator:o}=C.useContext(ri),{matches:a}=C.useContext(cs),c=a[a.length-1],d=c?c.params:{};c&&c.pathname;let p=c?c.pathnameBase:"/";c&&c.route;let m=Zi(),x;if(e){var w;let N=typeof e=="string"?Ta(e):e;p==="/"||(w=N.pathname)!=null&&w.startsWith(p)||gt(!1),x=N}else x=m;let E=x.pathname||"/",S=E;if(p!=="/"){let N=p.replace(/^\//,"").split("/");S="/"+E.replace(/^\//,"").split("/").slice(N.length).join("/")}let V=yb(n,{pathname:S}),D=Qb(V&&V.map(N=>Object.assign({},N,{params:Object.assign({},d,N.params),pathname:Gs([p,o.encodeLocation?o.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?p:Gs([p,o.encodeLocation?o.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),a,t,r);return e&&D?C.createElement(Dh.Provider,{value:{location:Gl({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:$s.Pop}},D):D}function Gb(){let n=Zb(),e=Mb(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),t?C.createElement("pre",{style:o},t):null,null)}const Hb=C.createElement(Gb,null);class Wb extends C.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?C.createElement(cs.Provider,{value:this.props.routeContext},C.createElement(Vw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Kb(n){let{routeContext:e,match:t,children:r}=n,o=C.useContext(cm);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),C.createElement(cs.Provider,{value:e},r)}function Qb(n,e,t,r){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let c=n,d=(o=t)==null?void 0:o.errors;if(d!=null){let x=c.findIndex(w=>w.route.id&&d?.[w.route.id]!==void 0);x>=0||gt(!1),c=c.slice(0,Math.min(c.length,x+1))}let p=!1,m=-1;if(t&&r&&r.v7_partialHydration)for(let x=0;x<c.length;x++){let w=c[x];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(m=x),w.route.id){let{loaderData:E,errors:S}=t,V=w.route.loader&&E[w.route.id]===void 0&&(!S||S[w.route.id]===void 0);if(w.route.lazy||V){p=!0,m>=0?c=c.slice(0,m+1):c=[c[0]];break}}}return c.reduceRight((x,w,E)=>{let S,V=!1,D=null,N=null;t&&(S=d&&w.route.id?d[w.route.id]:void 0,D=w.route.errorElement||Hb,p&&(m<0&&E===0?(tI("route-fallback"),V=!0,N=null):m===E&&(V=!0,N=w.route.hydrateFallbackElement||null)));let B=e.concat(c.slice(0,E+1)),U=()=>{let j;return S?j=D:V?j=N:w.route.Component?j=C.createElement(w.route.Component,null):w.route.element?j=w.route.element:j=x,C.createElement(Kb,{match:w,routeContext:{outlet:x,matches:B,isDataRoute:t!=null},children:j})};return t&&(w.route.ErrorBoundary||w.route.errorElement||E===0)?C.createElement(Wb,{location:t.location,revalidation:t.revalidation,component:D,error:S,children:U(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):U()},null)}var Uw=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(Uw||{}),Fw=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Fw||{});function Yb(n){let e=C.useContext(cm);return e||gt(!1),e}function Xb(n){let e=C.useContext(Fb);return e||gt(!1),e}function Jb(n){let e=C.useContext(cs);return e||gt(!1),e}function Bw(n){let e=Jb(),t=e.matches[e.matches.length-1];return t.route.id||gt(!1),t.route.id}function Zb(){var n;let e=C.useContext(Vw),t=Xb(),r=Bw();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function eI(){let{router:n}=Yb(Uw.UseNavigateStable),e=Bw(Fw.UseNavigateStable),t=C.useRef(!1);return Lw(()=>{t.current=!0}),C.useCallback(function(o,a){a===void 0&&(a={}),t.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,Gl({fromRouteId:e},a)))},[n,e])}const K0={};function tI(n,e,t){K0[n]||(K0[n]=!0)}function nI(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function zw(n){let{to:e,replace:t,state:r,relative:o}=n;Sa()||gt(!1);let{future:a,static:c}=C.useContext(ri),{matches:d}=C.useContext(cs),{pathname:p}=Zi(),m=ar(),x=lm(e,am(d,a.v7_relativeSplatPath),p,o==="path"),w=JSON.stringify(x);return C.useEffect(()=>m(JSON.parse(w),{replace:t,state:r,relative:o}),[m,w,o,t,r]),null}function Vn(n){gt(!1)}function rI(n){let{basename:e="/",children:t=null,location:r,navigationType:o=$s.Pop,navigator:a,static:c=!1,future:d}=n;Sa()&&gt(!1);let p=e.replace(/^\/*/,"/"),m=C.useMemo(()=>({basename:p,navigator:a,static:c,future:Gl({v7_relativeSplatPath:!1},d)}),[p,d,a,c]);typeof r=="string"&&(r=Ta(r));let{pathname:x="/",search:w="",hash:E="",state:S=null,key:V="default"}=r,D=C.useMemo(()=>{let N=om(x,p);return N==null?null:{location:{pathname:N,search:w,hash:E,state:S,key:V},navigationType:o}},[p,x,w,E,S,V,o]);return D==null?null:C.createElement(ri.Provider,{value:m},C.createElement(Dh.Provider,{children:t,value:D}))}function sI(n){let{children:e,location:t}=n;return $b(fp(e),t)}new Promise(()=>{});function fp(n,e){e===void 0&&(e=[]);let t=[];return C.Children.forEach(n,(r,o)=>{if(!C.isValidElement(r))return;let a=[...e,o];if(r.type===C.Fragment){t.push.apply(t,fp(r.props.children,a));return}r.type!==Vn&&gt(!1),!r.props.index||!r.props.children||gt(!1);let c={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=fp(r.props.children,a)),t.push(c)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pp(){return pp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},pp.apply(this,arguments)}function iI(n,e){if(n==null)return{};var t={},r=Object.keys(n),o,a;for(a=0;a<r.length;a++)o=r[a],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function oI(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function aI(n,e){return n.button===0&&(!e||e==="_self")&&!oI(n)}function mp(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(o=>[t,o]):[[t,r]])},[]))}function lI(n,e){let t=mp(n);return e&&e.forEach((r,o)=>{t.has(o)||e.getAll(o).forEach(a=>{t.append(o,a)})}),t}const cI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],uI="6";try{window.__reactRouterVersion=uI}catch{}const hI="startTransition",Q0=lb[hI];function dI(n){let{basename:e,children:t,future:r,window:o}=n,a=C.useRef();a.current==null&&(a.current=pb({window:o,v5Compat:!0}));let c=a.current,[d,p]=C.useState({action:c.action,location:c.location}),{v7_startTransition:m}=r||{},x=C.useCallback(w=>{m&&Q0?Q0(()=>p(w)):p(w)},[p,m]);return C.useLayoutEffect(()=>c.listen(x),[c,x]),C.useEffect(()=>nI(r),[r]),C.createElement(rI,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:c,future:r})}const fI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ge=C.forwardRef(function(e,t){let{onClick:r,relative:o,reloadDocument:a,replace:c,state:d,target:p,to:m,preventScrollReset:x,viewTransition:w}=e,E=iI(e,cI),{basename:S}=C.useContext(ri),V,D=!1;if(typeof m=="string"&&pI.test(m)&&(V=m,fI))try{let j=new URL(window.location.href),K=m.startsWith("//")?new URL(j.protocol+m):new URL(m),Z=om(K.pathname,S);K.origin===j.origin&&Z!=null?m=Z+K.search+K.hash:D=!0}catch{}let N=Bb(m,{relative:o}),B=mI(m,{replace:c,state:d,target:p,preventScrollReset:x,relative:o,viewTransition:w});function U(j){r&&r(j),j.defaultPrevented||B(j)}return C.createElement("a",pp({},E,{href:V||N,onClick:D||a?r:U,ref:t,target:p}))});var Y0;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Y0||(Y0={}));var X0;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(X0||(X0={}));function mI(n,e){let{target:t,replace:r,state:o,preventScrollReset:a,relative:c,viewTransition:d}=e===void 0?{}:e,p=ar(),m=Zi(),x=Mw(n,{relative:c});return C.useCallback(w=>{if(aI(w,t)){w.preventDefault();let E=r!==void 0?r:oh(m)===oh(x);p(n,{replace:E,state:o,preventScrollReset:a,relative:c,viewTransition:d})}},[m,p,x,r,o,t,n,a,c,d])}function gI(n){let e=C.useRef(mp(n)),t=C.useRef(!1),r=Zi(),o=C.useMemo(()=>lI(r.search,t.current?null:e.current),[r.search]),a=ar(),c=C.useCallback((d,p)=>{const m=mp(typeof d=="function"?d(o):d);t.current=!0,a("?"+m,p)},[a,o]);return[o,c]}var J0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let o=n.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},yI=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const o=n[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[r++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],c=n[t++],d=n[t++],p=((o&7)<<18|(a&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const a=n[t++],c=n[t++];e[r++]=String.fromCharCode((o&15)<<12|(a&63)<<6|c&63)}}return e.join("")},qw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<n.length;o+=3){const a=n[o],c=o+1<n.length,d=c?n[o+1]:0,p=o+2<n.length,m=p?n[o+2]:0,x=a>>2,w=(a&3)<<4|d>>4;let E=(d&15)<<2|m>>6,S=m&63;p||(S=64,c||(E=64)),r.push(t[x],t[w],t[E],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray($w(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):yI(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const m=o<n.length?t[n.charAt(o)]:64;++o;const w=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||d==null||m==null||w==null)throw new vI;const E=a<<2|d>>4;if(r.push(E),m!==64){const S=d<<4&240|m>>2;if(r.push(S),w!==64){const V=m<<6&192|w;r.push(V)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class vI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xI=function(n){const e=$w(n);return qw.encodeByteArray(e,!0)},ah=function(n){return xI(n).replace(/\./g,"")},Gw=function(n){try{return qw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=()=>wI().__FIREBASE_DEFAULTS__,EI=()=>{if(typeof process>"u"||typeof J0>"u")return;const n=J0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},TI=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Gw(n[1]);return e&&JSON.parse(e)},Vh=()=>{try{return _I()||EI()||TI()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Hw=n=>{var e,t;return(t=(e=Vh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},SI=n=>{const e=Hw(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Ww=()=>{var n;return(n=Vh())===null||n===void 0?void 0:n.config},Kw=n=>{var e;return(e=Vh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ah(JSON.stringify(t)),ah(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function PI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xt())}function NI(){var n;const e=(n=Vh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Qw(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function AI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CI(){const n=Xt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function RI(){return!NI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Yw(){try{return typeof indexedDB=="object"}catch{return!1}}function Xw(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}function jI(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI="FirebaseError";class lr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=DI,Object.setPrototypeOf(this,lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,eo.prototype.create)}}class eo{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],c=a?VI(a,r):"Error",d=`${this.serviceName}: ${c} (${o}).`;return new lr(o,d,r)}}function VI(n,e){return n.replace(LI,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const LI=/\{\$([^}]+)}/g;function OI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Hl(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const a=n[o],c=e[o];if(Z0(a)&&Z0(c)){if(!Hl(a,c))return!1}else if(a!==c)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function Z0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ac(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Nl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,a]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function kl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function MI(n,e){const t=new UI(n,e);return t.subscribe.bind(t)}class UI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");FI(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=Uf),o.error===void 0&&(o.error=Uf),o.complete===void 0&&(o.complete=Uf);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function FI(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Uf(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI=1e3,zI=2,$I=14400*1e3,qI=.5;function ev(n,e=BI,t=zI){const r=e*Math.pow(t,n),o=Math.round(qI*r*(Math.random()-.5)*2);return Math.min($I,r+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(n){return n&&n._delegate?n._delegate:n}class ir{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new bI;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WI(e))try{this.getOrInitializeService({instanceIdentifier:Li})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});r.resolve(a)}catch{}}}}clearInstance(e=Li){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Li){return this.instances.has(e)}getOptions(e=Li){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&c.resolve(o)}return o}onInit(e,t){var r;const o=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(o,a);const c=this.instances.get(o);return c&&e(c,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:HI(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Li){return this.component?this.component.multipleInstances?e:Li:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function HI(n){return n===Li?void 0:n}function WI(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new GI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Me||(Me={}));const QI={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},YI=Me.INFO,XI={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},JI=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),o=XI[e];if(o)console[o](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Lh{constructor(e){this.name=e,this._logLevel=YI,this._logHandler=JI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}const ZI=(n,e)=>e.some(t=>n instanceof t);let tv,nv;function eP(){return tv||(tv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tP(){return nv||(nv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Jw=new WeakMap,gp=new WeakMap,Zw=new WeakMap,Ff=new WeakMap,um=new WeakMap;function nP(n){const e=new Promise((t,r)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{t(Hs(n.result)),o()},c=()=>{r(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Jw.set(t,n)}).catch(()=>{}),um.set(e,n),e}function rP(n){if(gp.has(n))return;const e=new Promise((t,r)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{t(),o()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});gp.set(n,e)}let yp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return gp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Zw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Hs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function sP(n){yp=n(yp)}function iP(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Bf(this),e,...t);return Zw.set(r,e.sort?e.sort():[e]),Hs(r)}:tP().includes(n)?function(...e){return n.apply(Bf(this),e),Hs(Jw.get(this))}:function(...e){return Hs(n.apply(Bf(this),e))}}function oP(n){return typeof n=="function"?iP(n):(n instanceof IDBTransaction&&rP(n),ZI(n,eP())?new Proxy(n,yp):n)}function Hs(n){if(n instanceof IDBRequest)return nP(n);if(Ff.has(n))return Ff.get(n);const e=oP(n);return e!==n&&(Ff.set(n,e),um.set(e,n)),e}const Bf=n=>um.get(n);function e_(n,e,{blocked:t,upgrade:r,blocking:o,terminated:a}={}){const c=indexedDB.open(n,e),d=Hs(c);return r&&c.addEventListener("upgradeneeded",p=>{r(Hs(c.result),p.oldVersion,p.newVersion,Hs(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{a&&p.addEventListener("close",()=>a()),o&&p.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const aP=["get","getKey","getAll","getAllKeys","count"],lP=["put","add","delete","clear"],zf=new Map;function rv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(zf.get(e))return zf.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=lP.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||aP.includes(t)))return;const a=async function(c,...d){const p=this.transaction(c,o?"readwrite":"readonly");let m=p.store;return r&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),o&&p.done]))[0]};return zf.set(e,a),a}sP(n=>({...n,get:(e,t,r)=>rv(e,t)||n.get(e,t,r),has:(e,t)=>!!rv(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(uP(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function uP(n){const e=n.getComponent();return e?.type==="VERSION"}const vp="@firebase/app",sv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs=new Lh("@firebase/app"),hP="@firebase/app-compat",dP="@firebase/analytics-compat",fP="@firebase/analytics",pP="@firebase/app-check-compat",mP="@firebase/app-check",gP="@firebase/auth",yP="@firebase/auth-compat",vP="@firebase/database",xP="@firebase/data-connect",wP="@firebase/database-compat",_P="@firebase/functions",EP="@firebase/functions-compat",TP="@firebase/installations",SP="@firebase/installations-compat",bP="@firebase/messaging",IP="@firebase/messaging-compat",PP="@firebase/performance",NP="@firebase/performance-compat",kP="@firebase/remote-config",AP="@firebase/remote-config-compat",CP="@firebase/storage",RP="@firebase/storage-compat",jP="@firebase/firestore",DP="@firebase/vertexai-preview",VP="@firebase/firestore-compat",LP="firebase",OP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp="[DEFAULT]",MP={[vp]:"fire-core",[hP]:"fire-core-compat",[fP]:"fire-analytics",[dP]:"fire-analytics-compat",[mP]:"fire-app-check",[pP]:"fire-app-check-compat",[gP]:"fire-auth",[yP]:"fire-auth-compat",[vP]:"fire-rtdb",[xP]:"fire-data-connect",[wP]:"fire-rtdb-compat",[_P]:"fire-fn",[EP]:"fire-fn-compat",[TP]:"fire-iid",[SP]:"fire-iid-compat",[bP]:"fire-fcm",[IP]:"fire-fcm-compat",[PP]:"fire-perf",[NP]:"fire-perf-compat",[kP]:"fire-rc",[AP]:"fire-rc-compat",[CP]:"fire-gcs",[RP]:"fire-gcs-compat",[jP]:"fire-fst",[VP]:"fire-fst-compat",[DP]:"fire-vertex","fire-js":"fire-js",[LP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh=new Map,UP=new Map,wp=new Map;function iv(n,e){try{n.container.addComponent(e)}catch(t){rs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Nr(n){const e=n.name;if(wp.has(e))return rs.debug(`There were multiple attempts to register component ${e}.`),!1;wp.set(e,n);for(const t of lh.values())iv(t,n);for(const t of UP.values())iv(t,n);return!0}function to(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function nr(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ws=new eo("app","Firebase",FP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ir("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ws.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba=OP;function t_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:xp,automaticDataCollectionEnabled:!1},e),o=r.name;if(typeof o!="string"||!o)throw Ws.create("bad-app-name",{appName:String(o)});if(t||(t=Ww()),!t)throw Ws.create("no-options");const a=lh.get(o);if(a){if(Hl(t,a.options)&&Hl(r,a.config))return a;throw Ws.create("duplicate-app",{appName:o})}const c=new KI(o);for(const p of wp.values())c.addComponent(p);const d=new BP(t,r,c);return lh.set(o,d),d}function hm(n=xp){const e=lh.get(n);if(!e&&n===xp&&Ww())return t_();if(!e)throw Ws.create("no-app",{appName:n});return e}function Mn(n,e,t){var r;let o=(r=MP[n])!==null&&r!==void 0?r:n;t&&(o+=`-${t}`);const a=o.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const d=[`Unable to register library "${o}" with version "${e}":`];a&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rs.warn(d.join(" "));return}Nr(new ir(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP="firebase-heartbeat-database",$P=1,Wl="firebase-heartbeat-store";let $f=null;function n_(){return $f||($f=e_(zP,$P,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Wl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ws.create("idb-open",{originalErrorMessage:n.message})})),$f}async function qP(n){try{const t=(await n_()).transaction(Wl),r=await t.objectStore(Wl).get(r_(n));return await t.done,r}catch(e){if(e instanceof lr)rs.warn(e.message);else{const t=Ws.create("idb-get",{originalErrorMessage:e?.message});rs.warn(t.message)}}}async function ov(n,e){try{const r=(await n_()).transaction(Wl,"readwrite");await r.objectStore(Wl).put(e,r_(n)),await r.done}catch(t){if(t instanceof lr)rs.warn(t.message);else{const r=Ws.create("idb-set",{originalErrorMessage:t?.message});rs.warn(r.message)}}}function r_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP=1024,HP=720*60*60*1e3;class WP{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new QP(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=av();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const d=new Date(c.date).valueOf();return Date.now()-d<=HP}),this._storage.overwrite(this._heartbeatsCache))}catch(r){rs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=av(),{heartbeatsToSend:r,unsentEntries:o}=KP(this._heartbeatsCache.heartbeats),a=ah(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return rs.warn(t),""}}}function av(){return new Date().toISOString().substring(0,10)}function KP(n,e=GP){const t=[];let r=n.slice();for(const o of n){const a=t.find(c=>c.agent===o.agent);if(a){if(a.dates.push(o.date),lv(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),lv(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class QP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Yw()?Xw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await qP(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return ov(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return ov(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function lv(n){return ah(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YP(n){Nr(new ir("platform-logger",e=>new cP(e),"PRIVATE")),Nr(new ir("heartbeat",e=>new WP(e),"PRIVATE")),Mn(vp,sv,n),Mn(vp,sv,"esm2017"),Mn("fire-js","")}YP("");function dm(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]]);return t}function s_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const XP=s_,i_=new eo("auth","Firebase",s_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch=new Lh("@firebase/auth");function JP(n,...e){ch.logLevel<=Me.WARN&&ch.warn(`Auth (${ba}): ${n}`,...e)}function Qu(n,...e){ch.logLevel<=Me.ERROR&&ch.error(`Auth (${ba}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(n,...e){throw fm(n,...e)}function Er(n,...e){return fm(n,...e)}function o_(n,e,t){const r=Object.assign(Object.assign({},XP()),{[e]:t});return new eo("auth","Firebase",r).create(e,{appName:n.name})}function Tr(n){return o_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fm(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return i_.create(n,...e)}function Se(n,e,...t){if(!n)throw fm(e,...t)}function Yr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Qu(e),new Error(e)}function ss(n,e){n||Yr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function ZP(){return cv()==="http:"||cv()==="https:"}function cv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ZP()||Qw()||"connection"in navigator)?navigator.onLine:!0}function tN(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,t){this.shortDelay=e,this.longDelay=t,ss(t>e,"Short delay should be less than long delay!"),this.isMobile=PI()||AI()}get(){return eN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(n,e){ss(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=new lc(3e4,6e4);function si(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Cr(n,e,t,r,o={}){return l_(n,o,async()=>{let a={},c={};r&&(e==="GET"?c=r:a={body:JSON.stringify(r)});const d=ac(Object.assign({key:n.config.apiKey},c)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:p},a);return kI()||(m.referrerPolicy="no-referrer"),a_.fetch()(c_(n,n.config.apiHost,t,d),m)})}async function l_(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},nN),e);try{const o=new iN(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw Mu(n,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const d=a.ok?c.errorMessage:c.error.message,[p,m]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Mu(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw Mu(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw Mu(n,"user-disabled",c);const x=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw o_(n,x,m);or(n,x)}}catch(o){if(o instanceof lr)throw o;or(n,"network-request-failed",{message:String(o)})}}async function cc(n,e,t,r,o={}){const a=await Cr(n,e,t,r,o);return"mfaPendingCredential"in a&&or(n,"multi-factor-auth-required",{_serverResponse:a}),a}function c_(n,e,t,r){const o=`${e}${t}?${r}`;return n.config.emulator?pm(n.config,o):`${n.config.apiScheme}://${o}`}function sN(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class iN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Er(this.auth,"network-request-failed")),rN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Mu(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=Er(n,e,r);return o.customData._tokenResponse=t,o}function uv(n){return n!==void 0&&n.enterprise!==void 0}class oN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return sN(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function aN(n,e){return Cr(n,"GET","/v2/recaptchaConfig",si(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lN(n,e){return Cr(n,"POST","/v1/accounts:delete",e)}async function u_(n,e){return Cr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function cN(n,e=!1){const t=Nt(n),r=await t.getIdToken(e),o=mm(r);Se(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,c=a?.sign_in_provider;return{claims:o,token:r,authTime:Dl(qf(o.auth_time)),issuedAtTime:Dl(qf(o.iat)),expirationTime:Dl(qf(o.exp)),signInProvider:c||null,signInSecondFactor:a?.sign_in_second_factor||null}}function qf(n){return Number(n)*1e3}function mm(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Qu("JWT malformed, contained fewer than 3 sections"),null;try{const o=Gw(t);return o?JSON.parse(o):(Qu("Failed to decode base64 JWT payload"),null)}catch(o){return Qu("Caught error parsing JWT payload as JSON",o?.toString()),null}}function hv(n){const e=mm(n);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gi(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof lr&&uN(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function uN({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dl(this.lastLoginAt),this.creationTime=Dl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uh(n){var e;const t=n.auth,r=await n.getIdToken(),o=await Gi(n,u_(t,{idToken:r}));Se(o?.users.length,t,"internal-error");const a=o.users[0];n._notifyReloadListener(a);const c=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?h_(a.providerUserInfo):[],d=fN(n.providerData,c),p=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!d?.length,x=p?m:!1,w={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new Ep(a.createdAt,a.lastLoginAt),isAnonymous:x};Object.assign(n,w)}async function dN(n){const e=Nt(n);await uh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function fN(n,e){return[...n.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function h_(n){return n.map(e=>{var{providerId:t}=e,r=dm(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pN(n,e){const t=await l_(n,{},async()=>{const r=ac({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,c=c_(n,o,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",a_.fetch()(c,{method:"POST",headers:d,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function mN(n,e){return Cr(n,"POST","/v2/accounts:revokeToken",si(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=hv(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:a}=await pN(e,t);this.updateTokensAndExpiration(r,o,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:a}=t,c=new ca;return r&&(Se(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),o&&(Se(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),a&&(Se(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ca,this.toJSON())}_performRefresh(){return Yr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vs(n,e){Se(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Xr{constructor(e){var{uid:t,auth:r,stsTokenManager:o}=e,a=dm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Ep(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Gi(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return cN(this,e)}reload(){return dN(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Xr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await uh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nr(this.auth.app))return Promise.reject(Tr(this.auth));const e=await this.getIdToken();return await Gi(this,lN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,o,a,c,d,p,m,x;const w=(r=t.displayName)!==null&&r!==void 0?r:void 0,E=(o=t.email)!==null&&o!==void 0?o:void 0,S=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,V=(c=t.photoURL)!==null&&c!==void 0?c:void 0,D=(d=t.tenantId)!==null&&d!==void 0?d:void 0,N=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,B=(m=t.createdAt)!==null&&m!==void 0?m:void 0,U=(x=t.lastLoginAt)!==null&&x!==void 0?x:void 0,{uid:j,emailVerified:K,isAnonymous:Z,providerData:ie,stsTokenManager:R}=t;Se(j&&R,e,"internal-error");const I=ca.fromJSON(this.name,R);Se(typeof j=="string",e,"internal-error"),Vs(w,e.name),Vs(E,e.name),Se(typeof K=="boolean",e,"internal-error"),Se(typeof Z=="boolean",e,"internal-error"),Vs(S,e.name),Vs(V,e.name),Vs(D,e.name),Vs(N,e.name),Vs(B,e.name),Vs(U,e.name);const P=new Xr({uid:j,auth:e,email:E,emailVerified:K,displayName:w,isAnonymous:Z,photoURL:V,phoneNumber:S,tenantId:D,stsTokenManager:I,createdAt:B,lastLoginAt:U});return ie&&Array.isArray(ie)&&(P.providerData=ie.map(L=>Object.assign({},L))),N&&(P._redirectEventId=N),P}static async _fromIdTokenResponse(e,t,r=!1){const o=new ca;o.updateFromServerResponse(t);const a=new Xr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await uh(a),a}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];Se(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?h_(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!a?.length,d=new ca;d.updateFromIdToken(r);const p=new Xr({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:c}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Ep(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!a?.length};return Object.assign(p,m),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv=new Map;function Jr(n){ss(n instanceof Function,"Expected a class definition");let e=dv.get(n);return e?(ss(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,dv.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}d_.type="NONE";const fv=d_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(n,e,t){return`firebase:${n}:${e}:${t}`}class ua{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:a}=this.auth;this.fullUserKey=Yu(this.userKey,o.apiKey,a),this.fullPersistenceKey=Yu("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Xr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ua(Jr(fv),e,r);const o=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=o[0]||Jr(fv);const c=Yu(r,e.config.apiKey,e.name);let d=null;for(const m of t)try{const x=await m._get(c);if(x){const w=Xr._fromJSON(e,x);m!==a&&(d=w),a=m;break}}catch{}const p=o.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new ua(a,e,r):(a=p[0],d&&await a._set(c,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(c)}catch{}})),new ua(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(g_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(f_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(v_(e))return"Blackberry";if(x_(e))return"Webos";if(p_(e))return"Safari";if((e.includes("chrome/")||m_(e))&&!e.includes("edge/"))return"Chrome";if(y_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function f_(n=Xt()){return/firefox\//i.test(n)}function p_(n=Xt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function m_(n=Xt()){return/crios\//i.test(n)}function g_(n=Xt()){return/iemobile/i.test(n)}function y_(n=Xt()){return/android/i.test(n)}function v_(n=Xt()){return/blackberry/i.test(n)}function x_(n=Xt()){return/webos/i.test(n)}function gm(n=Xt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function gN(n=Xt()){var e;return gm(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function yN(){return CI()&&document.documentMode===10}function w_(n=Xt()){return gm(n)||y_(n)||x_(n)||v_(n)||/windows phone/i.test(n)||g_(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(n,e=[]){let t;switch(n){case"Browser":t=pv(Xt());break;case"Worker":t=`${pv(Xt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ba}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((c,d)=>{try{const p=e(a);c(p)}catch(p){d(p)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xN(n,e={}){return Cr(n,"GET","/v2/passwordPolicy",si(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN=6;class _N{constructor(e){var t,r,o,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:wN,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,o,a,c,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(r=p.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(a=p.containsUppercaseLetter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mv(this),this.idTokenSubscription=new mv(this),this.beforeStateQueue=new vN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=i_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Jr(t)),this._initializationPromise=this.queue(async()=>{var r,o;if(!this._deleted&&(this.persistenceManager=await ua.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await u_(this,{idToken:e}),r=await Xr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(nr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let o=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&p?.user&&(o=p.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(c){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await uh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(nr(this.app))return Promise.reject(Tr(this));const t=e?Nt(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return nr(this.app)?Promise.reject(Tr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return nr(this.app)?Promise.reject(Tr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Jr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await xN(this),t=new _N(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new eo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await mN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Jr(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await ua.create(this,[Jr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(d,this,"internal-error"),d.then(()=>{c||a(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,r,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=__(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&JP(`Error while retrieving App Check token: ${t.error}`),t?.token}}function no(n){return Nt(n)}class mv{constructor(e){this.auth=e,this.observer=null,this.addObserver=MI(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TN(n){Oh=n}function E_(n){return Oh.loadJS(n)}function SN(){return Oh.recaptchaEnterpriseScript}function bN(){return Oh.gapiScript}function IN(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const PN="recaptcha-enterprise",NN="NO_RECAPTCHA";class kN{constructor(e){this.type=PN,this.auth=no(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,d)=>{aN(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new oN(p);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,c(m.siteKey)}}).catch(p=>{d(p)})})}function o(a,c,d){const p=window.grecaptcha;uv(p)?p.enterprise.ready(()=>{p.enterprise.execute(a,{action:e}).then(m=>{c(m)}).catch(()=>{c(NN)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,c)=>{r(this.auth).then(d=>{if(!t&&uv(window.grecaptcha))o(d,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=SN();p.length!==0&&(p+=d),E_(p).then(()=>{o(d,a,c)}).catch(m=>{c(m)})}}).catch(d=>{c(d)})})}}async function gv(n,e,t,r=!1){const o=new kN(n);let a;try{a=await o.verify(t)}catch{a=await o.verify(t,!0)}const c=Object.assign({},e);return r?Object.assign(c,{captchaResp:a}):Object.assign(c,{captchaResponse:a}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Tp(n,e,t,r){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await gv(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await gv(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(n,e){const t=to(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(Hl(a,e??{}))return o;or(o,"already-initialized")}return t.initialize({options:e})}function CN(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Jr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function RN(n,e,t){const r=no(n);Se(r._canInitEmulator,r,"emulator-config-failed"),Se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,a=T_(e),{host:c,port:d}=jN(e),p=d===null?"":`:${d}`;r.config.emulator={url:`${a}//${c}${p}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:c,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})}),DN()}function T_(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function jN(n){const e=T_(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const a=o[1];return{host:a,port:yv(r.substr(a.length+1))}}else{const[a,c]=r.split(":");return{host:a,port:yv(c)}}}function yv(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function DN(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Yr("not implemented")}_getIdTokenResponse(e){return Yr("not implemented")}_linkToIdToken(e,t){return Yr("not implemented")}_getReauthenticationResolver(e){return Yr("not implemented")}}async function VN(n,e){return Cr(n,"POST","/v1/accounts:update",e)}async function LN(n,e){return Cr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ON(n,e){return cc(n,"POST","/v1/accounts:signInWithPassword",si(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MN(n,e){return cc(n,"POST","/v1/accounts:signInWithEmailLink",si(n,e))}async function UN(n,e){return cc(n,"POST","/v1/accounts:signInWithEmailLink",si(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl extends ym{constructor(e,t,r,o=null){super("password",r),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Kl(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Kl(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Tp(e,t,"signInWithPassword",ON);case"emailLink":return MN(e,{email:this._email,oobCode:this._password});default:or(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Tp(e,r,"signUpPassword",LN);case"emailLink":return UN(e,{idToken:t,email:this._email,oobCode:this._password});default:or(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ha(n,e){return cc(n,"POST","/v1/accounts:signInWithIdp",si(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN="http://localhost";class Hi extends ym{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Hi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):or("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o}=t,a=dm(t,["providerId","signInMethod"]);if(!r||!o)return null;const c=new Hi(r,o);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return ha(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ha(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ha(e,t)}buildRequest(){const e={requestUri:FN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ac(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function zN(n){const e=Nl(kl(n)).link,t=e?Nl(kl(e)).deep_link_id:null,r=Nl(kl(n)).deep_link_id;return(r?Nl(kl(r)).link:null)||r||t||e||n}class vm{constructor(e){var t,r,o,a,c,d;const p=Nl(kl(e)),m=(t=p.apiKey)!==null&&t!==void 0?t:null,x=(r=p.oobCode)!==null&&r!==void 0?r:null,w=BN((o=p.mode)!==null&&o!==void 0?o:null);Se(m&&x&&w,"argument-error"),this.apiKey=m,this.operation=w,this.code=x,this.continueUrl=(a=p.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(c=p.languageCode)!==null&&c!==void 0?c:null,this.tenantId=(d=p.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=zN(e);try{return new vm(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(){this.providerId=Xs.PROVIDER_ID}static credential(e,t){return Kl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=vm.parseLink(t);return Se(r,"argument-error"),Kl._fromEmailAndCode(e,r.code,r.tenantId)}}Xs.PROVIDER_ID="password";Xs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc extends S_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms extends uc{constructor(){super("facebook.com")}static credential(e){return Hi._fromParams({providerId:Ms.PROVIDER_ID,signInMethod:Ms.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ms.credentialFromTaggedObject(e)}static credentialFromError(e){return Ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ms.credential(e.oauthAccessToken)}catch{return null}}}Ms.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ms.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us extends uc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Hi._fromParams({providerId:Us.PROVIDER_ID,signInMethod:Us.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Us.credentialFromTaggedObject(e)}static credentialFromError(e){return Us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Us.credential(t,r)}catch{return null}}}Us.GOOGLE_SIGN_IN_METHOD="google.com";Us.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends uc{constructor(){super("github.com")}static credential(e){return Hi._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fs.credential(e.oauthAccessToken)}catch{return null}}}Fs.GITHUB_SIGN_IN_METHOD="github.com";Fs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends uc{constructor(){super("twitter.com")}static credential(e,t){return Hi._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Bs.credential(t,r)}catch{return null}}}Bs.TWITTER_SIGN_IN_METHOD="twitter.com";Bs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $N(n,e){return cc(n,"POST","/v1/accounts:signUp",si(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const a=await Xr._fromIdTokenResponse(e,r,o),c=vv(r);return new Wi({user:a,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=vv(r);return new Wi({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function vv(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh extends lr{constructor(e,t,r,o){var a;super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,hh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new hh(e,t,r,o)}}function b_(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?hh._fromErrorAndOperation(n,a,e,r):a})}async function qN(n,e,t=!1){const r=await Gi(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Wi._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I_(n,e,t=!1){const{auth:r}=n;if(nr(r.app))return Promise.reject(Tr(r));const o="reauthenticate";try{const a=await Gi(n,b_(r,o,e,n),t);Se(a.idToken,r,"internal-error");const c=mm(a.idToken);Se(c,r,"internal-error");const{sub:d}=c;return Se(n.uid===d,r,"user-mismatch"),Wi._forOperation(n,o,a)}catch(a){throw a?.code==="auth/user-not-found"&&or(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P_(n,e,t=!1){if(nr(n.app))return Promise.reject(Tr(n));const r="signIn",o=await b_(n,r,e),a=await Wi._fromIdTokenResponse(n,r,o);return t||await n._updateCurrentUser(a.user),a}async function GN(n,e){return P_(no(n),e)}async function xv(n,e){return I_(Nt(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N_(n){const e=no(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function HN(n,e,t){if(nr(n.app))return Promise.reject(Tr(n));const r=no(n),c=await Tp(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",$N).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&N_(n),p}),d=await Wi._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(d.user),d}function WN(n,e,t){return nr(n.app)?Promise.reject(Tr(n)):GN(Nt(n),Xs.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&N_(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KN(n,e){return Cr(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sp(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Nt(n),a={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await Gi(r,KN(r.auth,a));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const d=r.providerData.find(({providerId:p})=>p==="password");d&&(d.displayName=r.displayName,d.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function QN(n,e){const t=Nt(n);return nr(t.auth.app)?Promise.reject(Tr(t.auth)):k_(t,e,null)}function YN(n,e){return k_(Nt(n),null,e)}async function k_(n,e,t){const{auth:r}=n,a={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(a.email=e),t&&(a.password=t);const c=await Gi(n,VN(r,a));await n._updateTokensIfNecessary(c,!0)}function XN(n,e,t,r){return Nt(n).onIdTokenChanged(e,t,r)}function JN(n,e,t){return Nt(n).beforeAuthStateChanged(e,t)}function ZN(n,e,t,r){return Nt(n).onAuthStateChanged(e,t,r)}function ek(n){return Nt(n).signOut()}const dh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(dh,"1"),this.storage.removeItem(dh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk=1e3,nk=10;class C_ extends A_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=w_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);yN()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,nk):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},tk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}C_.type="LOCAL";const rk=C_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_ extends A_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}R_.type="SESSION";const j_=R_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new Mh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:a}=t.data,c=this.handlersMap[o];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const d=Array.from(c).map(async m=>m(t.origin,a)),p=await sk(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Mh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,c;return new Promise((d,p)=>{const m=xm("",20);o.port1.start();const x=setTimeout(()=>{p(new Error("unsupported_event"))},r);c={messageChannel:o,onMessage(w){const E=w;if(E.data.eventId===m)switch(E.data.status){case"ack":clearTimeout(x),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(E.data.response);break;default:clearTimeout(x),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(){return window}function ok(n){Sr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(){return typeof Sr().WorkerGlobalScope<"u"&&typeof Sr().importScripts=="function"}async function ak(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function lk(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function ck(){return D_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_="firebaseLocalStorageDb",uk=1,fh="firebaseLocalStorage",L_="fbase_key";class hc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Uh(n,e){return n.transaction([fh],e?"readwrite":"readonly").objectStore(fh)}function hk(){const n=indexedDB.deleteDatabase(V_);return new hc(n).toPromise()}function bp(){const n=indexedDB.open(V_,uk);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(fh,{keyPath:L_})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(fh)?e(r):(r.close(),await hk(),e(await bp()))})})}async function wv(n,e,t){const r=Uh(n,!0).put({[L_]:e,value:t});return new hc(r).toPromise()}async function dk(n,e){const t=Uh(n,!1).get(e),r=await new hc(t).toPromise();return r===void 0?null:r.value}function _v(n,e){const t=Uh(n,!0).delete(e);return new hc(t).toPromise()}const fk=800,pk=3;class O_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await bp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>pk)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return D_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mh._getInstance(ck()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await ak(),!this.activeServiceWorker)return;this.sender=new ik(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||lk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await bp();return await wv(e,dh,"1"),await _v(e,dh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>wv(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>dk(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>_v(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=Uh(o,!1).getAll();return new hc(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),fk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}O_.type="LOCAL";const mk=O_;new lc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gk(n,e){return e?Jr(e):(Se(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm extends ym{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ha(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ha(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ha(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function yk(n){return P_(n.auth,new wm(n),n.bypassAuthState)}function vk(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),I_(t,new wm(n),n.bypassAuthState)}async function xk(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),qN(t,new wm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e,t,r,o,a=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:a,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yk;case"linkViaPopup":case"linkViaRedirect":return xk;case"reauthViaPopup":case"reauthViaRedirect":return vk;default:or(this.auth,"internal-error")}}resolve(e){ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk=new lc(2e3,1e4);class na extends M_{constructor(e,t,r,o,a){super(e,t,o,a),this.provider=r,this.authWindow=null,this.pollId=null,na.currentPopupAction&&na.currentPopupAction.cancel(),na.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){ss(this.filter.length===1,"Popup operations only handle one event");const e=xm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Er(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Er(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,na.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Er(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,wk.get())};e()}}na.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k="pendingRedirect",Xu=new Map;class Ek extends M_{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Xu.get(this.auth._key());if(!e){try{const r=await Tk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Xu.set(this.auth._key(),e)}return this.bypassAuthState||Xu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Tk(n,e){const t=Ik(e),r=bk(n);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function Sk(n,e){Xu.set(n._key(),e)}function bk(n){return Jr(n._redirectPersistence)}function Ik(n){return Yu(_k,n.config.apiKey,n.name)}async function Pk(n,e,t=!1){if(nr(n.app))return Promise.reject(Tr(n));const r=no(n),o=gk(r,e),c=await new Ek(r,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk=600*1e3;class kk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Ak(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!U_(e)){const o=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Er(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Nk&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ev(e))}saveEventToCache(e){this.cachedEventUids.add(Ev(e)),this.lastProcessedEventTime=Date.now()}}function Ev(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function U_({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Ak(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return U_(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ck(n,e={}){return Cr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jk=/^https?/;async function Dk(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Ck(n);for(const t of e)try{if(Vk(t))return}catch{}or(n,"unauthorized-domain")}function Vk(n){const e=_p(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!jk.test(t))return!1;if(Rk.test(n))return r===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk=new lc(3e4,6e4);function Tv(){const n=Sr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Ok(n){return new Promise((e,t)=>{var r,o,a;function c(){Tv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Tv(),t(Er(n,"network-request-failed"))},timeout:Lk.get()})}if(!((o=(r=Sr().gapi)===null||r===void 0?void 0:r.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((a=Sr().gapi)===null||a===void 0)&&a.load)c();else{const d=IN("iframefcb");return Sr()[d]=()=>{gapi.load?c():t(Er(n,"network-request-failed"))},E_(`${bN()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw Ju=null,e})}let Ju=null;function Mk(n){return Ju=Ju||Ok(n),Ju}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk=new lc(5e3,15e3),Fk="__/auth/iframe",Bk="emulator/auth/iframe",zk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$k=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qk(n){const e=n.config;Se(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?pm(e,Bk):`https://${n.config.authDomain}/${Fk}`,r={apiKey:e.apiKey,appName:n.name,v:ba},o=$k.get(n.config.apiHost);o&&(r.eid=o);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${ac(r).slice(1)}`}async function Gk(n){const e=await Mk(n),t=Sr().gapi;return Se(t,n,"internal-error"),e.open({where:document.body,url:qk(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zk,dontclear:!0},r=>new Promise(async(o,a)=>{await r.restyle({setHideOnLeave:!1});const c=Er(n,"network-request-failed"),d=Sr().setTimeout(()=>{a(c)},Uk.get());function p(){Sr().clearTimeout(d),o(r)}r.ping(p).then(p,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Wk=500,Kk=600,Qk="_blank",Yk="http://localhost";class Sv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Xk(n,e,t,r=Wk,o=Kk){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const p=Object.assign(Object.assign({},Hk),{width:r.toString(),height:o.toString(),top:a,left:c}),m=Xt().toLowerCase();t&&(d=m_(m)?Qk:t),f_(m)&&(e=e||Yk,p.scrollbars="yes");const x=Object.entries(p).reduce((E,[S,V])=>`${E}${S}=${V},`,"");if(gN(m)&&d!=="_self")return Jk(e||"",d),new Sv(null);const w=window.open(e||"",d,x);Se(w,n,"popup-blocked");try{w.focus()}catch{}return new Sv(w)}function Jk(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk="__/auth/handler",eA="emulator/auth/handler",tA=encodeURIComponent("fac");async function bv(n,e,t,r,o,a){Se(n.config.authDomain,n,"auth-domain-config-required"),Se(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ba,eventId:o};if(e instanceof S_){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",OI(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,w]of Object.entries({}))c[x]=w}if(e instanceof uc){const x=e.getScopes().filter(w=>w!=="");x.length>0&&(c.scopes=x.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const x of Object.keys(d))d[x]===void 0&&delete d[x];const p=await n._getAppCheckToken(),m=p?`#${tA}=${encodeURIComponent(p)}`:"";return`${nA(n)}?${ac(d).slice(1)}${m}`}function nA({config:n}){return n.emulator?pm(n,eA):`https://${n.authDomain}/${Zk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf="webStorageSupport";class rA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=j_,this._completeRedirectFn=Pk,this._overrideRedirectResult=Sk}async _openPopup(e,t,r,o){var a;ss((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=await bv(e,t,r,_p(),o);return Xk(e,c,xm())}async _openRedirect(e,t,r,o){await this._originValidation(e);const a=await bv(e,t,r,_p(),o);return ok(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(ss(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Gk(e),r=new kk(e);return t.register("authEvent",o=>(Se(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Gf,{type:Gf},o=>{var a;const c=(a=o?.[0])===null||a===void 0?void 0:a[Gf];c!==void 0&&t(!!c),or(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Dk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return w_()||p_()||gm()}}const sA=rA;var Iv="@firebase/auth",Pv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function aA(n){Nr(new ir("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;Se(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:__(n)},m=new EN(r,o,a,p);return CN(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Nr(new ir("auth-internal",e=>{const t=no(e.getProvider("auth").getImmediate());return(r=>new iA(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mn(Iv,Pv,oA(n)),Mn(Iv,Pv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA=300,cA=Kw("authIdTokenMaxAge")||lA;let Nv=null;const uA=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>cA)return;const o=t?.token;Nv!==o&&(Nv=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function hA(n=hm()){const e=to(n,"auth");if(e.isInitialized())return e.getImmediate();const t=AN(n,{popupRedirectResolver:sA,persistence:[mk,rk,j_]}),r=Kw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const c=uA(a.toString());JN(t,c,()=>c(t.currentUser)),XN(t,d=>c(d))}}const o=Hw("auth");return o&&RN(t,`http://${o}`),t}function dA(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}TN({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=o=>{const a=Er("internal-error");a.customData=o,t(a)},r.type="text/javascript",r.charset="UTF-8",dA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});aA("Browser");var kv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $i,F_;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,I){function P(){}P.prototype=I.prototype,R.D=I.prototype,R.prototype=new P,R.prototype.constructor=R,R.C=function(L,F,$){for(var A=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)A[Ie-2]=arguments[Ie];return I.prototype[F].apply(L,A)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,I,P){P||(P=0);var L=Array(16);if(typeof I=="string")for(var F=0;16>F;++F)L[F]=I.charCodeAt(P++)|I.charCodeAt(P++)<<8|I.charCodeAt(P++)<<16|I.charCodeAt(P++)<<24;else for(F=0;16>F;++F)L[F]=I[P++]|I[P++]<<8|I[P++]<<16|I[P++]<<24;I=R.g[0],P=R.g[1],F=R.g[2];var $=R.g[3],A=I+($^P&(F^$))+L[0]+3614090360&4294967295;I=P+(A<<7&4294967295|A>>>25),A=$+(F^I&(P^F))+L[1]+3905402710&4294967295,$=I+(A<<12&4294967295|A>>>20),A=F+(P^$&(I^P))+L[2]+606105819&4294967295,F=$+(A<<17&4294967295|A>>>15),A=P+(I^F&($^I))+L[3]+3250441966&4294967295,P=F+(A<<22&4294967295|A>>>10),A=I+($^P&(F^$))+L[4]+4118548399&4294967295,I=P+(A<<7&4294967295|A>>>25),A=$+(F^I&(P^F))+L[5]+1200080426&4294967295,$=I+(A<<12&4294967295|A>>>20),A=F+(P^$&(I^P))+L[6]+2821735955&4294967295,F=$+(A<<17&4294967295|A>>>15),A=P+(I^F&($^I))+L[7]+4249261313&4294967295,P=F+(A<<22&4294967295|A>>>10),A=I+($^P&(F^$))+L[8]+1770035416&4294967295,I=P+(A<<7&4294967295|A>>>25),A=$+(F^I&(P^F))+L[9]+2336552879&4294967295,$=I+(A<<12&4294967295|A>>>20),A=F+(P^$&(I^P))+L[10]+4294925233&4294967295,F=$+(A<<17&4294967295|A>>>15),A=P+(I^F&($^I))+L[11]+2304563134&4294967295,P=F+(A<<22&4294967295|A>>>10),A=I+($^P&(F^$))+L[12]+1804603682&4294967295,I=P+(A<<7&4294967295|A>>>25),A=$+(F^I&(P^F))+L[13]+4254626195&4294967295,$=I+(A<<12&4294967295|A>>>20),A=F+(P^$&(I^P))+L[14]+2792965006&4294967295,F=$+(A<<17&4294967295|A>>>15),A=P+(I^F&($^I))+L[15]+1236535329&4294967295,P=F+(A<<22&4294967295|A>>>10),A=I+(F^$&(P^F))+L[1]+4129170786&4294967295,I=P+(A<<5&4294967295|A>>>27),A=$+(P^F&(I^P))+L[6]+3225465664&4294967295,$=I+(A<<9&4294967295|A>>>23),A=F+(I^P&($^I))+L[11]+643717713&4294967295,F=$+(A<<14&4294967295|A>>>18),A=P+($^I&(F^$))+L[0]+3921069994&4294967295,P=F+(A<<20&4294967295|A>>>12),A=I+(F^$&(P^F))+L[5]+3593408605&4294967295,I=P+(A<<5&4294967295|A>>>27),A=$+(P^F&(I^P))+L[10]+38016083&4294967295,$=I+(A<<9&4294967295|A>>>23),A=F+(I^P&($^I))+L[15]+3634488961&4294967295,F=$+(A<<14&4294967295|A>>>18),A=P+($^I&(F^$))+L[4]+3889429448&4294967295,P=F+(A<<20&4294967295|A>>>12),A=I+(F^$&(P^F))+L[9]+568446438&4294967295,I=P+(A<<5&4294967295|A>>>27),A=$+(P^F&(I^P))+L[14]+3275163606&4294967295,$=I+(A<<9&4294967295|A>>>23),A=F+(I^P&($^I))+L[3]+4107603335&4294967295,F=$+(A<<14&4294967295|A>>>18),A=P+($^I&(F^$))+L[8]+1163531501&4294967295,P=F+(A<<20&4294967295|A>>>12),A=I+(F^$&(P^F))+L[13]+2850285829&4294967295,I=P+(A<<5&4294967295|A>>>27),A=$+(P^F&(I^P))+L[2]+4243563512&4294967295,$=I+(A<<9&4294967295|A>>>23),A=F+(I^P&($^I))+L[7]+1735328473&4294967295,F=$+(A<<14&4294967295|A>>>18),A=P+($^I&(F^$))+L[12]+2368359562&4294967295,P=F+(A<<20&4294967295|A>>>12),A=I+(P^F^$)+L[5]+4294588738&4294967295,I=P+(A<<4&4294967295|A>>>28),A=$+(I^P^F)+L[8]+2272392833&4294967295,$=I+(A<<11&4294967295|A>>>21),A=F+($^I^P)+L[11]+1839030562&4294967295,F=$+(A<<16&4294967295|A>>>16),A=P+(F^$^I)+L[14]+4259657740&4294967295,P=F+(A<<23&4294967295|A>>>9),A=I+(P^F^$)+L[1]+2763975236&4294967295,I=P+(A<<4&4294967295|A>>>28),A=$+(I^P^F)+L[4]+1272893353&4294967295,$=I+(A<<11&4294967295|A>>>21),A=F+($^I^P)+L[7]+4139469664&4294967295,F=$+(A<<16&4294967295|A>>>16),A=P+(F^$^I)+L[10]+3200236656&4294967295,P=F+(A<<23&4294967295|A>>>9),A=I+(P^F^$)+L[13]+681279174&4294967295,I=P+(A<<4&4294967295|A>>>28),A=$+(I^P^F)+L[0]+3936430074&4294967295,$=I+(A<<11&4294967295|A>>>21),A=F+($^I^P)+L[3]+3572445317&4294967295,F=$+(A<<16&4294967295|A>>>16),A=P+(F^$^I)+L[6]+76029189&4294967295,P=F+(A<<23&4294967295|A>>>9),A=I+(P^F^$)+L[9]+3654602809&4294967295,I=P+(A<<4&4294967295|A>>>28),A=$+(I^P^F)+L[12]+3873151461&4294967295,$=I+(A<<11&4294967295|A>>>21),A=F+($^I^P)+L[15]+530742520&4294967295,F=$+(A<<16&4294967295|A>>>16),A=P+(F^$^I)+L[2]+3299628645&4294967295,P=F+(A<<23&4294967295|A>>>9),A=I+(F^(P|~$))+L[0]+4096336452&4294967295,I=P+(A<<6&4294967295|A>>>26),A=$+(P^(I|~F))+L[7]+1126891415&4294967295,$=I+(A<<10&4294967295|A>>>22),A=F+(I^($|~P))+L[14]+2878612391&4294967295,F=$+(A<<15&4294967295|A>>>17),A=P+($^(F|~I))+L[5]+4237533241&4294967295,P=F+(A<<21&4294967295|A>>>11),A=I+(F^(P|~$))+L[12]+1700485571&4294967295,I=P+(A<<6&4294967295|A>>>26),A=$+(P^(I|~F))+L[3]+2399980690&4294967295,$=I+(A<<10&4294967295|A>>>22),A=F+(I^($|~P))+L[10]+4293915773&4294967295,F=$+(A<<15&4294967295|A>>>17),A=P+($^(F|~I))+L[1]+2240044497&4294967295,P=F+(A<<21&4294967295|A>>>11),A=I+(F^(P|~$))+L[8]+1873313359&4294967295,I=P+(A<<6&4294967295|A>>>26),A=$+(P^(I|~F))+L[15]+4264355552&4294967295,$=I+(A<<10&4294967295|A>>>22),A=F+(I^($|~P))+L[6]+2734768916&4294967295,F=$+(A<<15&4294967295|A>>>17),A=P+($^(F|~I))+L[13]+1309151649&4294967295,P=F+(A<<21&4294967295|A>>>11),A=I+(F^(P|~$))+L[4]+4149444226&4294967295,I=P+(A<<6&4294967295|A>>>26),A=$+(P^(I|~F))+L[11]+3174756917&4294967295,$=I+(A<<10&4294967295|A>>>22),A=F+(I^($|~P))+L[2]+718787259&4294967295,F=$+(A<<15&4294967295|A>>>17),A=P+($^(F|~I))+L[9]+3951481745&4294967295,R.g[0]=R.g[0]+I&4294967295,R.g[1]=R.g[1]+(F+(A<<21&4294967295|A>>>11))&4294967295,R.g[2]=R.g[2]+F&4294967295,R.g[3]=R.g[3]+$&4294967295}r.prototype.u=function(R,I){I===void 0&&(I=R.length);for(var P=I-this.blockSize,L=this.B,F=this.h,$=0;$<I;){if(F==0)for(;$<=P;)o(this,R,$),$+=this.blockSize;if(typeof R=="string"){for(;$<I;)if(L[F++]=R.charCodeAt($++),F==this.blockSize){o(this,L),F=0;break}}else for(;$<I;)if(L[F++]=R[$++],F==this.blockSize){o(this,L),F=0;break}}this.h=F,this.o+=I},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var I=1;I<R.length-8;++I)R[I]=0;var P=8*this.o;for(I=R.length-8;I<R.length;++I)R[I]=P&255,P/=256;for(this.u(R),R=Array(16),I=P=0;4>I;++I)for(var L=0;32>L;L+=8)R[P++]=this.g[I]>>>L&255;return R};function a(R,I){var P=d;return Object.prototype.hasOwnProperty.call(P,R)?P[R]:P[R]=I(R)}function c(R,I){this.h=I;for(var P=[],L=!0,F=R.length-1;0<=F;F--){var $=R[F]|0;L&&$==I||(P[F]=$,L=!1)}this.g=P}var d={};function p(R){return-128<=R&&128>R?a(R,function(I){return new c([I|0],0>I?-1:0)}):new c([R|0],0>R?-1:0)}function m(R){if(isNaN(R)||!isFinite(R))return w;if(0>R)return N(m(-R));for(var I=[],P=1,L=0;R>=P;L++)I[L]=R/P|0,P*=4294967296;return new c(I,0)}function x(R,I){if(R.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(R.charAt(0)=="-")return N(x(R.substring(1),I));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=m(Math.pow(I,8)),L=w,F=0;F<R.length;F+=8){var $=Math.min(8,R.length-F),A=parseInt(R.substring(F,F+$),I);8>$?($=m(Math.pow(I,$)),L=L.j($).add(m(A))):(L=L.j(P),L=L.add(m(A)))}return L}var w=p(0),E=p(1),S=p(16777216);n=c.prototype,n.m=function(){if(D(this))return-N(this).m();for(var R=0,I=1,P=0;P<this.g.length;P++){var L=this.i(P);R+=(0<=L?L:4294967296+L)*I,I*=4294967296}return R},n.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(V(this))return"0";if(D(this))return"-"+N(this).toString(R);for(var I=m(Math.pow(R,6)),P=this,L="";;){var F=K(P,I).g;P=B(P,F.j(I));var $=((0<P.g.length?P.g[0]:P.h)>>>0).toString(R);if(P=F,V(P))return $+L;for(;6>$.length;)$="0"+$;L=$+L}},n.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function V(R){if(R.h!=0)return!1;for(var I=0;I<R.g.length;I++)if(R.g[I]!=0)return!1;return!0}function D(R){return R.h==-1}n.l=function(R){return R=B(this,R),D(R)?-1:V(R)?0:1};function N(R){for(var I=R.g.length,P=[],L=0;L<I;L++)P[L]=~R.g[L];return new c(P,~R.h).add(E)}n.abs=function(){return D(this)?N(this):this},n.add=function(R){for(var I=Math.max(this.g.length,R.g.length),P=[],L=0,F=0;F<=I;F++){var $=L+(this.i(F)&65535)+(R.i(F)&65535),A=($>>>16)+(this.i(F)>>>16)+(R.i(F)>>>16);L=A>>>16,$&=65535,A&=65535,P[F]=A<<16|$}return new c(P,P[P.length-1]&-2147483648?-1:0)};function B(R,I){return R.add(N(I))}n.j=function(R){if(V(this)||V(R))return w;if(D(this))return D(R)?N(this).j(N(R)):N(N(this).j(R));if(D(R))return N(this.j(N(R)));if(0>this.l(S)&&0>R.l(S))return m(this.m()*R.m());for(var I=this.g.length+R.g.length,P=[],L=0;L<2*I;L++)P[L]=0;for(L=0;L<this.g.length;L++)for(var F=0;F<R.g.length;F++){var $=this.i(L)>>>16,A=this.i(L)&65535,Ie=R.i(F)>>>16,$e=R.i(F)&65535;P[2*L+2*F]+=A*$e,U(P,2*L+2*F),P[2*L+2*F+1]+=$*$e,U(P,2*L+2*F+1),P[2*L+2*F+1]+=A*Ie,U(P,2*L+2*F+1),P[2*L+2*F+2]+=$*Ie,U(P,2*L+2*F+2)}for(L=0;L<I;L++)P[L]=P[2*L+1]<<16|P[2*L];for(L=I;L<2*I;L++)P[L]=0;return new c(P,0)};function U(R,I){for(;(R[I]&65535)!=R[I];)R[I+1]+=R[I]>>>16,R[I]&=65535,I++}function j(R,I){this.g=R,this.h=I}function K(R,I){if(V(I))throw Error("division by zero");if(V(R))return new j(w,w);if(D(R))return I=K(N(R),I),new j(N(I.g),N(I.h));if(D(I))return I=K(R,N(I)),new j(N(I.g),I.h);if(30<R.g.length){if(D(R)||D(I))throw Error("slowDivide_ only works with positive integers.");for(var P=E,L=I;0>=L.l(R);)P=Z(P),L=Z(L);var F=ie(P,1),$=ie(L,1);for(L=ie(L,2),P=ie(P,2);!V(L);){var A=$.add(L);0>=A.l(R)&&(F=F.add(P),$=A),L=ie(L,1),P=ie(P,1)}return I=B(R,F.j(I)),new j(F,I)}for(F=w;0<=R.l(I);){for(P=Math.max(1,Math.floor(R.m()/I.m())),L=Math.ceil(Math.log(P)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),$=m(P),A=$.j(I);D(A)||0<A.l(R);)P-=L,$=m(P),A=$.j(I);V($)&&($=E),F=F.add($),R=B(R,A)}return new j(F,R)}n.A=function(R){return K(this,R).h},n.and=function(R){for(var I=Math.max(this.g.length,R.g.length),P=[],L=0;L<I;L++)P[L]=this.i(L)&R.i(L);return new c(P,this.h&R.h)},n.or=function(R){for(var I=Math.max(this.g.length,R.g.length),P=[],L=0;L<I;L++)P[L]=this.i(L)|R.i(L);return new c(P,this.h|R.h)},n.xor=function(R){for(var I=Math.max(this.g.length,R.g.length),P=[],L=0;L<I;L++)P[L]=this.i(L)^R.i(L);return new c(P,this.h^R.h)};function Z(R){for(var I=R.g.length+1,P=[],L=0;L<I;L++)P[L]=R.i(L)<<1|R.i(L-1)>>>31;return new c(P,R.h)}function ie(R,I){var P=I>>5;I%=32;for(var L=R.g.length-P,F=[],$=0;$<L;$++)F[$]=0<I?R.i($+P)>>>I|R.i($+P+1)<<32-I:R.i($+P);return new c(F,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,F_=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=x,$i=c}).apply(typeof kv<"u"?kv:typeof self<"u"?self:typeof window<"u"?window:{});var Uu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var B_,Al,z_,Zu,Ip,$_,q_,G_;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,y,_){return u==Array.prototype||u==Object.prototype||(u[y]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uu=="object"&&Uu];for(var y=0;y<u.length;++y){var _=u[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=t(this);function o(u,y){if(y)e:{var _=r;u=u.split(".");for(var b=0;b<u.length-1;b++){var G=u[b];if(!(G in _))break e;_=_[G]}u=u[u.length-1],b=_[u],y=y(b),y!=b&&y!=null&&e(_,u,{configurable:!0,writable:!0,value:y})}}function a(u,y){u instanceof String&&(u+="");var _=0,b=!1,G={next:function(){if(!b&&_<u.length){var Y=_++;return{value:y(Y,u[Y]),done:!1}}return b=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}o("Array.prototype.values",function(u){return u||function(){return a(this,function(y,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function p(u){var y=typeof u;return y=y!="object"?y:u?Array.isArray(u)?"array":y:"null",y=="array"||y=="object"&&typeof u.length=="number"}function m(u){var y=typeof u;return y=="object"&&u!=null||y=="function"}function x(u,y,_){return u.call.apply(u.bind,arguments)}function w(u,y,_){if(!u)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,b),u.apply(y,G)}}return function(){return u.apply(y,arguments)}}function E(u,y,_){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?x:w,E.apply(null,arguments)}function S(u,y){var _=Array.prototype.slice.call(arguments,1);return function(){var b=_.slice();return b.push.apply(b,arguments),u.apply(this,b)}}function V(u,y){function _(){}_.prototype=y.prototype,u.aa=y.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(b,G,Y){for(var ce=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)ce[Ke-2]=arguments[Ke];return y.prototype[G].apply(b,ce)}}function D(u){const y=u.length;if(0<y){const _=Array(y);for(let b=0;b<y;b++)_[b]=u[b];return _}return[]}function N(u,y){for(let _=1;_<arguments.length;_++){const b=arguments[_];if(p(b)){const G=u.length||0,Y=b.length||0;u.length=G+Y;for(let ce=0;ce<Y;ce++)u[G+ce]=b[ce]}else u.push(b)}}class B{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function U(u){return/^[\s\xa0]*$/.test(u)}function j(){var u=d.navigator;return u&&(u=u.userAgent)?u:""}function K(u){return K[" "](u),u}K[" "]=function(){};var Z=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function ie(u,y,_){for(const b in u)y.call(_,u[b],b,u)}function R(u,y){for(const _ in u)y.call(void 0,u[_],_,u)}function I(u){const y={};for(const _ in u)y[_]=u[_];return y}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(u,y){let _,b;for(let G=1;G<arguments.length;G++){b=arguments[G];for(_ in b)u[_]=b[_];for(let Y=0;Y<P.length;Y++)_=P[Y],Object.prototype.hasOwnProperty.call(b,_)&&(u[_]=b[_])}}function F(u){var y=1;u=u.split(":");const _=[];for(;0<y&&u.length;)_.push(u.shift()),y--;return u.length&&_.push(u.join(":")),_}function $(u){d.setTimeout(()=>{throw u},0)}function A(){var u=q;let y=null;return u.g&&(y=u.g,u.g=u.g.next,u.g||(u.h=null),y.next=null),y}class Ie{constructor(){this.h=this.g=null}add(y,_){const b=$e.get();b.set(y,_),this.h?this.h.next=b:this.g=b,this.h=b}}var $e=new B(()=>new je,u=>u.reset());class je{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Ce,oe=!1,q=new Ie,X=()=>{const u=d.Promise.resolve(void 0);Ce=()=>{u.then(O)}};var O=()=>{for(var u;u=A();){try{u.h.call(u.g)}catch(_){$(_)}var y=$e;y.j(u),100>y.h&&(y.h++,u.next=y.g,y.g=u)}oe=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(u,y){this.type=u,this.g=this.target=y,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var le=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,y=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};d.addEventListener("test",_,y),d.removeEventListener("test",_,y)}catch{}return u}();function ue(u,y){if(fe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,b=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=y,y=u.relatedTarget){if(Z){e:{try{K(y.nodeName);var G=!0;break e}catch{}G=!1}G||(y=null)}}else _=="mouseover"?y=u.fromElement:_=="mouseout"&&(y=u.toElement);this.relatedTarget=y,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ve[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ue.aa.h.call(this)}}V(ue,fe);var ve={2:"touch",3:"pen",4:"mouse"};ue.prototype.h=function(){ue.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var De="closure_listenable_"+(1e6*Math.random()|0),Be=0;function We(u,y,_,b,G){this.listener=u,this.proxy=null,this.src=y,this.type=_,this.capture=!!b,this.ha=G,this.key=++Be,this.da=this.fa=!1}function it(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Dt(u){this.src=u,this.g={},this.h=0}Dt.prototype.add=function(u,y,_,b,G){var Y=u.toString();u=this.g[Y],u||(u=this.g[Y]=[],this.h++);var ce=us(u,y,b,G);return-1<ce?(y=u[ce],_||(y.fa=!1)):(y=new We(y,this.src,Y,!!b,G),y.fa=_,u.push(y)),y};function oi(u,y){var _=y.type;if(_ in u.g){var b=u.g[_],G=Array.prototype.indexOf.call(b,y,void 0),Y;(Y=0<=G)&&Array.prototype.splice.call(b,G,1),Y&&(it(y),u.g[_].length==0&&(delete u.g[_],u.h--))}}function us(u,y,_,b){for(var G=0;G<u.length;++G){var Y=u[G];if(!Y.da&&Y.listener==y&&Y.capture==!!_&&Y.ha==b)return G}return-1}var ai="closure_lm_"+(1e6*Math.random()|0),ao={};function Aa(u,y,_,b,G){if(Array.isArray(y)){for(var Y=0;Y<y.length;Y++)Aa(u,y[Y],_,b,G);return null}return _=ja(_),u&&u[De]?u.K(y,_,m(b)?!!b.capture:!1,G):Ca(u,y,_,!1,b,G)}function Ca(u,y,_,b,G,Y){if(!y)throw Error("Invalid event type");var ce=m(G)?!!G.capture:!!G,Ke=co(u);if(Ke||(u[ai]=Ke=new Dt(u)),_=Ke.add(y,_,b,ce,Y),_.proxy)return _;if(b=Ec(),_.proxy=b,b.src=u,b.listener=_,u.addEventListener)le||(G=ce),G===void 0&&(G=!1),u.addEventListener(y.toString(),b,G);else if(u.attachEvent)u.attachEvent(jr(y.toString()),b);else if(u.addListener&&u.removeListener)u.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Ec(){function u(_){return y.call(u.src,u.listener,_)}const y=Ra;return u}function lo(u,y,_,b,G){if(Array.isArray(y))for(var Y=0;Y<y.length;Y++)lo(u,y[Y],_,b,G);else b=m(b)?!!b.capture:!!b,_=ja(_),u&&u[De]?(u=u.i,y=String(y).toString(),y in u.g&&(Y=u.g[y],_=us(Y,_,b,G),-1<_&&(it(Y[_]),Array.prototype.splice.call(Y,_,1),Y.length==0&&(delete u.g[y],u.h--)))):u&&(u=co(u))&&(y=u.g[y.toString()],u=-1,y&&(u=us(y,_,b,G)),(_=-1<u?y[u]:null)&&Rr(_))}function Rr(u){if(typeof u!="number"&&u&&!u.da){var y=u.src;if(y&&y[De])oi(y.i,u);else{var _=u.type,b=u.proxy;y.removeEventListener?y.removeEventListener(_,b,u.capture):y.detachEvent?y.detachEvent(jr(_),b):y.addListener&&y.removeListener&&y.removeListener(b),(_=co(y))?(oi(_,u),_.h==0&&(_.src=null,y[ai]=null)):it(u)}}}function jr(u){return u in ao?ao[u]:ao[u]="on"+u}function Ra(u,y){if(u.da)u=!0;else{y=new ue(y,this);var _=u.listener,b=u.ha||u.src;u.fa&&Rr(u),u=_.call(b,y)}return u}function co(u){return u=u[ai],u instanceof Dt?u:null}var uo="__closure_events_fn_"+(1e9*Math.random()>>>0);function ja(u){return typeof u=="function"?u:(u[uo]||(u[uo]=function(y){return u.handleEvent(y)}),u[uo])}function _t(){J.call(this),this.i=new Dt(this),this.M=this,this.F=null}V(_t,J),_t.prototype[De]=!0,_t.prototype.removeEventListener=function(u,y,_,b){lo(this,u,y,_,b)};function Et(u,y){var _,b=u.F;if(b)for(_=[];b;b=b.F)_.push(b);if(u=u.M,b=y.type||y,typeof y=="string")y=new fe(y,u);else if(y instanceof fe)y.target=y.target||u;else{var G=y;y=new fe(b,u),L(y,G)}if(G=!0,_)for(var Y=_.length-1;0<=Y;Y--){var ce=y.g=_[Y];G=Dr(ce,b,!0,y)&&G}if(ce=y.g=u,G=Dr(ce,b,!0,y)&&G,G=Dr(ce,b,!1,y)&&G,_)for(Y=0;Y<_.length;Y++)ce=y.g=_[Y],G=Dr(ce,b,!1,y)&&G}_t.prototype.N=function(){if(_t.aa.N.call(this),this.i){var u=this.i,y;for(y in u.g){for(var _=u.g[y],b=0;b<_.length;b++)it(_[b]);delete u.g[y],u.h--}}this.F=null},_t.prototype.K=function(u,y,_,b){return this.i.add(String(u),y,!1,_,b)},_t.prototype.L=function(u,y,_,b){return this.i.add(String(u),y,!0,_,b)};function Dr(u,y,_,b){if(y=u.i.g[String(y)],!y)return!0;y=y.concat();for(var G=!0,Y=0;Y<y.length;++Y){var ce=y[Y];if(ce&&!ce.da&&ce.capture==_){var Ke=ce.listener,Tt=ce.ha||ce.src;ce.fa&&oi(u.i,ce),G=Ke.call(Tt,b)!==!1&&G}}return G&&!b.defaultPrevented}function Da(u,y,_){if(typeof u=="function")_&&(u=E(u,_));else if(u&&typeof u.handleEvent=="function")u=E(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:d.setTimeout(u,y||0)}function hs(u){u.g=Da(()=>{u.g=null,u.i&&(u.i=!1,hs(u))},u.l);const y=u.h;u.h=null,u.m.apply(null,y)}class li extends J{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:hs(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ci(u){J.call(this),this.h=u,this.g={}}V(ci,J);var Va=[];function La(u){ie(u.g,function(y,_){this.g.hasOwnProperty(_)&&Rr(y)},u),u.g={}}ci.prototype.N=function(){ci.aa.N.call(this),La(this)},ci.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Oa=d.JSON.stringify,Ma=d.JSON.parse,Ua=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function ui(){}ui.prototype.h=null;function ho(u){return u.h||(u.h=u.i())}function fo(){}var Sn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ur(){fe.call(this,"d")}V(ur,fe);function po(){fe.call(this,"c")}V(po,fe);var hr={},Fa=null;function hi(){return Fa=Fa||new _t}hr.La="serverreachability";function Ba(u){fe.call(this,hr.La,u)}V(Ba,fe);function Vr(u){const y=hi();Et(y,new Ba(y))}hr.STAT_EVENT="statevent";function za(u,y){fe.call(this,hr.STAT_EVENT,u),this.stat=y}V(za,fe);function dt(u){const y=hi();Et(y,new za(y,u))}hr.Ma="timingevent";function mo(u,y){fe.call(this,hr.Ma,u),this.size=y}V(mo,fe);function Bn(u,y){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},y)}function di(){this.g=!0}di.prototype.xa=function(){this.g=!1};function fi(u,y,_,b,G,Y){u.info(function(){if(u.g)if(Y)for(var ce="",Ke=Y.split("&"),Tt=0;Tt<Ke.length;Tt++){var Ue=Ke[Tt].split("=");if(1<Ue.length){var kt=Ue[0];Ue=Ue[1];var yt=kt.split("_");ce=2<=yt.length&&yt[1]=="type"?ce+(kt+"="+Ue+"&"):ce+(kt+"=redacted&")}}else ce=null;else ce=Y;return"XMLHTTP REQ ("+b+") [attempt "+G+"]: "+y+`
`+_+`
`+ce})}function go(u,y,_,b,G,Y,ce){u.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+G+"]: "+y+`
`+_+`
`+Y+" "+ce})}function zn(u,y,_,b){u.info(function(){return"XMLHTTP TEXT ("+y+"): "+od(u,_)+(b?" "+b:"")})}function $a(u,y){u.info(function(){return"TIMEOUT: "+y})}di.prototype.info=function(){};function od(u,y){if(!u.g)return y;if(!y)return null;try{var _=JSON.parse(y);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var b=_[u];if(!(2>b.length)){var G=b[1];if(Array.isArray(G)&&!(1>G.length)){var Y=G[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var ce=1;ce<G.length;ce++)G[ce]=""}}}}return Oa(_)}catch{return y}}var yo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Tc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},$n;function pi(){}V(pi,ui),pi.prototype.g=function(){return new XMLHttpRequest},pi.prototype.i=function(){return{}},$n=new pi;function qn(u,y,_,b){this.j=u,this.i=y,this.l=_,this.R=b||1,this.U=new ci(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Sc}function Sc(){this.i=null,this.g="",this.h=!1}var qa={},vo={};function xo(u,y,_){u.L=1,u.v=gs(gn(y)),u.m=_,u.P=!0,Ga(u,null)}function Ga(u,y){u.F=Date.now(),Je(u),u.A=gn(u.v);var _=u.A,b=u.R;Array.isArray(b)||(b=[String(b)]),vs(_.i,"t",b),u.C=0,_=u.j.J,u.h=new Sc,u.g=zc(u.j,_?y:null,!u.m),0<u.O&&(u.M=new li(E(u.Y,u,u.g),u.O)),y=u.U,_=u.g,b=u.ca;var G="readystatechange";Array.isArray(G)||(G&&(Va[0]=G.toString()),G=Va);for(var Y=0;Y<G.length;Y++){var ce=Aa(_,G[Y],b||y.handleEvent,!1,y.h||y);if(!ce)break;y.g[ce.key]=ce}y=u.H?I(u.H):{},u.m?(u.u||(u.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,y)):(u.u="GET",u.g.ea(u.A,u.u,null,y)),Vr(),fi(u.i,u.u,u.A,u.l,u.R,u.m)}qn.prototype.ca=function(u){u=u.target;const y=this.M;y&&sn(u)==3?y.j():this.Y(u)},qn.prototype.Y=function(u){try{if(u==this.g)e:{const yt=sn(this.g);var y=this.g.Ba();const Pn=this.g.Z();if(!(3>yt)&&(yt!=3||this.g&&(this.h.h||this.g.oa()||Xa(this.g)))){this.J||yt!=4||y==7||(y==8||0>=Pn?Vr(3):Vr(2)),mi(this);var _=this.g.Z();this.X=_;t:if(bc(this)){var b=Xa(this.g);u="";var G=b.length,Y=sn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){bn(this),ds(this);var ce="";break t}this.h.i=new d.TextDecoder}for(y=0;y<G;y++)this.h.h=!0,u+=this.h.i.decode(b[y],{stream:!(Y&&y==G-1)});b.length=0,this.h.g+=u,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=_==200,go(this.i,this.u,this.A,this.l,this.R,yt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Ke,Tt=this.g;if((Ke=Tt.g?Tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(Ke)){var Ue=Ke;break t}}Ue=null}if(_=Ue)zn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ha(this,_);else{this.o=!1,this.s=3,dt(12),bn(this),ds(this);break e}}if(this.P){_=!0;let vn;for(;!this.J&&this.C<ce.length;)if(vn=ad(this,ce),vn==vo){yt==4&&(this.s=4,dt(14),_=!1),zn(this.i,this.l,null,"[Incomplete Response]");break}else if(vn==qa){this.s=4,dt(15),zn(this.i,this.l,ce,"[Invalid Chunk]"),_=!1;break}else zn(this.i,this.l,vn,null),Ha(this,vn);if(bc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yt!=4||ce.length!=0||this.h.h||(this.s=1,dt(16),_=!1),this.o=this.o&&_,!_)zn(this.i,this.l,ce,"[Invalid Chunked Response]"),bn(this),ds(this);else if(0<ce.length&&!this.W){this.W=!0;var kt=this.j;kt.g==this&&kt.ba&&!kt.M&&(kt.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),Za(kt),kt.M=!0,dt(11))}}else zn(this.i,this.l,ce,null),Ha(this,ce);yt==4&&bn(this),this.o&&!this.J&&(yt==4?Ao(this.j,this):(this.o=!1,Je(this)))}else bo(this.g),_==400&&0<ce.indexOf("Unknown SID")?(this.s=3,dt(12)):(this.s=0,dt(13)),bn(this),ds(this)}}}catch{}finally{}};function bc(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function ad(u,y){var _=u.C,b=y.indexOf(`
`,_);return b==-1?vo:(_=Number(y.substring(_,b)),isNaN(_)?qa:(b+=1,b+_>y.length?vo:(y=y.slice(b,b+_),u.C=b+_,y)))}qn.prototype.cancel=function(){this.J=!0,bn(this)};function Je(u){u.S=Date.now()+u.I,Ic(u,u.I)}function Ic(u,y){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Bn(E(u.ba,u),y)}function mi(u){u.B&&(d.clearTimeout(u.B),u.B=null)}qn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?($a(this.i,this.A),this.L!=2&&(Vr(),dt(17)),bn(this),this.s=2,ds(this)):Ic(this,this.S-u)};function ds(u){u.j.G==0||u.J||Ao(u.j,u)}function bn(u){mi(u);var y=u.M;y&&typeof y.ma=="function"&&y.ma(),u.M=null,La(u.U),u.g&&(y=u.g,u.g=null,y.abort(),y.ma())}function Ha(u,y){try{var _=u.j;if(_.G!=0&&(_.g==u||Jt(_.h,u))){if(!u.K&&Jt(_.h,u)&&_.G==3){try{var b=_.Da.g.parse(y)}catch{b=null}if(Array.isArray(b)&&b.length==3){var G=b;if(G[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)ko(_),Qn(_);else break e;No(_),dt(18)}}else _.za=G[1],0<_.za-_.T&&37500>G[2]&&_.F&&_.v==0&&!_.C&&(_.C=Bn(E(_.Za,_),6e3));if(1>=Nc(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Fr(_,11)}else if((u.K||_.g==u)&&ko(_),!U(y))for(G=_.Da.g.parse(y),y=0;y<G.length;y++){let Ue=G[y];if(_.T=Ue[0],Ue=Ue[1],_.G==2)if(Ue[0]=="c"){_.K=Ue[1],_.ia=Ue[2];const kt=Ue[3];kt!=null&&(_.la=kt,_.j.info("VER="+_.la));const yt=Ue[4];yt!=null&&(_.Aa=yt,_.j.info("SVER="+_.Aa));const Pn=Ue[5];Pn!=null&&typeof Pn=="number"&&0<Pn&&(b=1.5*Pn,_.L=b,_.j.info("backChannelRequestTimeoutMs_="+b)),b=_;const vn=u.g;if(vn){const Ei=vn.g?vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ei){var Y=b.h;Y.g||Ei.indexOf("spdy")==-1&&Ei.indexOf("quic")==-1&&Ei.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Wa(Y,Y.h),Y.h=null))}if(b.D){const Ro=vn.g?vn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ro&&(b.ya=Ro,Ye(b.I,b.D,Ro))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),b=_;var ce=u;if(b.qa=Bc(b,b.J?b.ia:null,b.W),ce.K){kc(b.h,ce);var Ke=ce,Tt=b.L;Tt&&(Ke.I=Tt),Ke.B&&(mi(Ke),Je(Ke)),b.g=ce}else _i(b);0<_.i.length&&mr(_)}else Ue[0]!="stop"&&Ue[0]!="close"||Fr(_,7);else _.G==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?Fr(_,7):Lt(_):Ue[0]!="noop"&&_.l&&_.l.ta(Ue),_.v=0)}}Vr(4)}catch{}}var Pc=class{constructor(u,y){this.g=u,this.map=y}};function gi(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Nc(u){return u.h?1:u.g?u.g.size:0}function Jt(u,y){return u.h?u.h==y:u.g?u.g.has(y):!1}function Wa(u,y){u.g?u.g.add(y):u.h=y}function kc(u,y){u.h&&u.h==y?u.h=null:u.g&&u.g.has(y)&&u.g.delete(y)}gi.prototype.cancel=function(){if(this.i=Ac(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ac(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let y=u.i;for(const _ of u.g.values())y=y.concat(_.D);return y}return D(u.i)}function wo(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var y=[],_=u.length,b=0;b<_;b++)y.push(u[b]);return y}y=[],_=0;for(b in u)y[_++]=u[b];return y}function _o(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var y=[];u=u.length;for(var _=0;_<u;_++)y.push(_);return y}y=[],_=0;for(const b in u)y[_++]=b;return y}}}function fs(u,y){if(u.forEach&&typeof u.forEach=="function")u.forEach(y,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,y,void 0);else for(var _=_o(u),b=wo(u),G=b.length,Y=0;Y<G;Y++)y.call(void 0,b[Y],_&&_[Y],u)}var yi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ld(u,y){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var b=u[_].indexOf("="),G=null;if(0<=b){var Y=u[_].substring(0,b);G=u[_].substring(b+1)}else Y=u[_];y(Y,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Lr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Lr){this.h=u.h,vi(this,u.j),this.o=u.o,this.g=u.g,ps(this,u.s),this.l=u.l;var y=u.i,_=new dr;_.i=y.i,y.g&&(_.g=new Map(y.g),_.h=y.h),ms(this,_),this.m=u.m}else u&&(y=String(u).match(yi))?(this.h=!1,vi(this,y[1]||"",!0),this.o=Oe(y[2]||""),this.g=Oe(y[3]||"",!0),ps(this,y[4]),this.l=Oe(y[5]||"",!0),ms(this,y[6]||"",!0),this.m=Oe(y[7]||"")):(this.h=!1,this.i=new dr(null,this.h))}Lr.prototype.toString=function(){var u=[],y=this.j;y&&u.push(ys(y,Eo,!0),":");var _=this.g;return(_||y=="file")&&(u.push("//"),(y=this.o)&&u.push(ys(y,Eo,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(ys(_,_.charAt(0)=="/"?jc:Rc,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",ys(_,Ka)),u.join("")};function gn(u){return new Lr(u)}function vi(u,y,_){u.j=_?Oe(y,!0):y,u.j&&(u.j=u.j.replace(/:$/,""))}function ps(u,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);u.s=y}else u.s=null}function ms(u,y,_){y instanceof dr?(u.i=y,fr(u.i,u.h)):(_||(y=ys(y,Dc)),u.i=new dr(y,u.h))}function Ye(u,y,_){u.i.set(y,_)}function gs(u){return Ye(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Oe(u,y){return u?y?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ys(u,y,_){return typeof u=="string"?(u=encodeURI(u).replace(y,Cc),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Cc(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Eo=/[#\/\?@]/g,Rc=/[#\?:]/g,jc=/[#\?]/g,Dc=/[#\?@]/g,Ka=/#/g;function dr(u,y){this.h=this.g=null,this.i=u||null,this.j=!!y}function Vt(u){u.g||(u.g=new Map,u.h=0,u.i&&ld(u.i,function(y,_){u.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}n=dr.prototype,n.add=function(u,y){Vt(this),this.i=null,u=In(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(y),this.h+=1,this};function Gn(u,y){Vt(u),y=In(u,y),u.g.has(y)&&(u.i=null,u.h-=u.g.get(y).length,u.g.delete(y))}function Hn(u,y){return Vt(u),y=In(u,y),u.g.has(y)}n.forEach=function(u,y){Vt(this),this.g.forEach(function(_,b){_.forEach(function(G){u.call(y,G,b,this)},this)},this)},n.na=function(){Vt(this);const u=Array.from(this.g.values()),y=Array.from(this.g.keys()),_=[];for(let b=0;b<y.length;b++){const G=u[b];for(let Y=0;Y<G.length;Y++)_.push(y[b])}return _},n.V=function(u){Vt(this);let y=[];if(typeof u=="string")Hn(this,u)&&(y=y.concat(this.g.get(In(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)y=y.concat(u[_])}return y},n.set=function(u,y){return Vt(this),this.i=null,u=In(this,u),Hn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[y]),this.h+=1,this},n.get=function(u,y){return u?(u=this.V(u),0<u.length?String(u[0]):y):y};function vs(u,y,_){Gn(u,y),0<_.length&&(u.i=null,u.g.set(In(u,y),D(_)),u.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],y=Array.from(this.g.keys());for(var _=0;_<y.length;_++){var b=y[_];const Y=encodeURIComponent(String(b)),ce=this.V(b);for(b=0;b<ce.length;b++){var G=Y;ce[b]!==""&&(G+="="+encodeURIComponent(String(ce[b]))),u.push(G)}}return this.i=u.join("&")};function In(u,y){return y=String(y),u.j&&(y=y.toLowerCase()),y}function fr(u,y){y&&!u.j&&(Vt(u),u.i=null,u.g.forEach(function(_,b){var G=b.toLowerCase();b!=G&&(Gn(this,b),vs(this,G,_))},u)),u.j=y}function cd(u,y){const _=new di;if(d.Image){const b=new Image;b.onload=S(rn,_,"TestLoadImage: loaded",!0,y,b),b.onerror=S(rn,_,"TestLoadImage: error",!1,y,b),b.onabort=S(rn,_,"TestLoadImage: abort",!1,y,b),b.ontimeout=S(rn,_,"TestLoadImage: timeout",!1,y,b),d.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=u}else y(!1)}function Vc(u,y){const _=new di,b=new AbortController,G=setTimeout(()=>{b.abort(),rn(_,"TestPingServer: timeout",!1,y)},1e4);fetch(u,{signal:b.signal}).then(Y=>{clearTimeout(G),Y.ok?rn(_,"TestPingServer: ok",!0,y):rn(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(G),rn(_,"TestPingServer: error",!1,y)})}function rn(u,y,_,b,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),b(_)}catch{}}function ud(){this.g=new Ua}function Lc(u,y,_){const b=_||"";try{fs(u,function(G,Y){let ce=G;m(G)&&(ce=Oa(G)),y.push(b+Y+"="+encodeURIComponent(ce))})}catch(G){throw y.push(b+"type="+encodeURIComponent("_badmap")),G}}function Or(u){this.l=u.Ub||null,this.j=u.eb||!1}V(Or,ui),Or.prototype.g=function(){return new xi(this.l,this.j)},Or.prototype.i=function(u){return function(){return u}}({});function xi(u,y){_t.call(this),this.D=u,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(xi,_t),n=xi.prototype,n.open=function(u,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=y,this.readyState=1,Kn(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(y.body=u),(this.D||d).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wn(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Kn(this)),this.g&&(this.readyState=3,Kn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Oc(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Oc(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var y=u.value?u.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!u.done}))&&(this.response=this.responseText+=y)}u.done?Wn(this):Kn(this),this.readyState==3&&Oc(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Wn(this))},n.Qa=function(u){this.g&&(this.response=u,Wn(this))},n.ga=function(){this.g&&Wn(this)};function Wn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Kn(u)}n.setRequestHeader=function(u,y){this.u.append(u,y)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=y.next();return u.join(`\r
`)};function Kn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(xi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Mr(u){let y="";return ie(u,function(_,b){y+=b,y+=":",y+=_,y+=`\r
`}),y}function xs(u,y,_){e:{for(b in _){var b=!1;break e}b=!0}b||(_=Mr(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):Ye(u,y,_))}function rt(u){_t.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(rt,_t);var hd=/^https?$/i,Qa=["POST","PUT"];n=rt.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,y,_,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);y=y?y.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$n.g(),this.v=this.o?ho(this.o):ho($n),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(y,String(u),!0),this.B=!1}catch(Y){wi(this,Y);return}if(u=_||"",_=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var G in b)_.set(G,b[G]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const Y of b.keys())_.set(Y,b.get(Y));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(_.keys()).find(Y=>Y.toLowerCase()=="content-type"),G=d.FormData&&u instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Qa,y,void 0))||b||G||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,ce]of _)this.g.setRequestHeader(Y,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{So(this),this.u=!0,this.g.send(u),this.u=!1}catch(Y){wi(this,Y)}};function wi(u,y){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=y,u.m=5,To(u),yn(u)}function To(u){u.A||(u.A=!0,Et(u,"complete"),Et(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Et(this,"complete"),Et(this,"abort"),yn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yn(this,!0)),rt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ya(this):this.bb())},n.bb=function(){Ya(this)};function Ya(u){if(u.h&&typeof c<"u"&&(!u.v[1]||sn(u)!=4||u.Z()!=2)){if(u.u&&sn(u)==4)Da(u.Ea,0,u);else if(Et(u,"readystatechange"),sn(u)==4){u.h=!1;try{const ce=u.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var b;if(b=ce===0){var G=String(u.D).match(yi)[1]||null;!G&&d.self&&d.self.location&&(G=d.self.location.protocol.slice(0,-1)),b=!hd.test(G?G.toLowerCase():"")}_=b}if(_)Et(u,"complete"),Et(u,"success");else{u.m=6;try{var Y=2<sn(u)?u.g.statusText:""}catch{Y=""}u.l=Y+" ["+u.Z()+"]",To(u)}}finally{yn(u)}}}}function yn(u,y){if(u.g){So(u);const _=u.g,b=u.v[0]?()=>{}:null;u.g=null,u.v=null,y||Et(u,"ready");try{_.onreadystatechange=b}catch{}}}function So(u){u.I&&(d.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function sn(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<sn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var y=this.g.responseText;return u&&y.indexOf(u)==0&&(y=y.substring(u.length)),Ma(y)}};function Xa(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function bo(u){const y={};u=(u.g&&2<=sn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<u.length;b++){if(U(u[b]))continue;var _=F(u[b]);const G=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const Y=y[G]||[];y[G]=Y,Y.push(_)}R(y,function(b){return b.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function pr(u,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||y}function Ja(u){this.Aa=0,this.i=[],this.j=new di,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=pr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=pr("baseRetryDelayMs",5e3,u),this.cb=pr("retryDelaySeedMs",1e4,u),this.Wa=pr("forwardChannelMaxRetries",2,u),this.wa=pr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new gi(u&&u.concurrentRequestLimit),this.Da=new ud,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ja.prototype,n.la=8,n.G=1,n.connect=function(u,y,_,b){dt(0),this.W=u,this.H=y||{},_&&b!==void 0&&(this.H.OSID=_,this.H.OAID=b),this.F=this.X,this.I=Bc(this,null,this.W),mr(this)};function Lt(u){if(Io(u),u.G==3){var y=u.U++,_=gn(u.I);if(Ye(_,"SID",u.K),Ye(_,"RID",y),Ye(_,"TYPE","terminate"),Ur(u,_),y=new qn(u,u.j,y),y.L=2,y.v=gs(gn(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(y.v.toString(),"")}catch{}!_&&d.Image&&(new Image().src=y.v,_=!0),_||(y.g=zc(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Je(y)}Fc(u)}function Qn(u){u.g&&(Za(u),u.g.cancel(),u.g=null)}function Io(u){Qn(u),u.u&&(d.clearTimeout(u.u),u.u=null),ko(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&d.clearTimeout(u.s),u.s=null)}function mr(u){if(!mn(u.h)&&!u.s){u.s=!0;var y=u.Ga;Ce||X(),oe||(Ce(),oe=!0),q.add(y,u),u.B=0}}function dd(u,y){return Nc(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=y.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Bn(E(u.Ga,u,y),Uc(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const G=new qn(this,this.j,u);let Y=this.o;if(this.S&&(Y?(Y=I(Y),L(Y,this.S)):Y=this.S),this.m!==null||this.O||(G.H=Y,Y=null),this.P)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var b=this.i[_];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(y+=b,4096<y){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=ws(this,G,y),_=gn(this.I),Ye(_,"RID",u),Ye(_,"CVER",22),this.D&&Ye(_,"X-HTTP-Session-Id",this.D),Ur(this,_),Y&&(this.O?y="headers="+encodeURIComponent(String(Mr(Y)))+"&"+y:this.m&&xs(_,this.m,Y)),Wa(this.h,G),this.Ua&&Ye(_,"TYPE","init"),this.P?(Ye(_,"$req",y),Ye(_,"SID","null"),G.T=!0,xo(G,_,null)):xo(G,_,y),this.G=2}}else this.G==3&&(u?Po(this,u):this.i.length==0||mn(this.h)||Po(this))};function Po(u,y){var _;y?_=y.l:_=u.U++;const b=gn(u.I);Ye(b,"SID",u.K),Ye(b,"RID",_),Ye(b,"AID",u.T),Ur(u,b),u.m&&u.o&&xs(b,u.m,u.o),_=new qn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),y&&(u.i=y.D.concat(u.i)),y=ws(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Wa(u.h,_),xo(_,b,y)}function Ur(u,y){u.H&&ie(u.H,function(_,b){Ye(y,b,_)}),u.l&&fs({},function(_,b){Ye(y,b,_)})}function ws(u,y,_){_=Math.min(u.i.length,_);var b=u.l?E(u.l.Na,u.l,u):null;e:{var G=u.i;let Y=-1;for(;;){const ce=["count="+_];Y==-1?0<_?(Y=G[0].g,ce.push("ofs="+Y)):Y=0:ce.push("ofs="+Y);let Ke=!0;for(let Tt=0;Tt<_;Tt++){let Ue=G[Tt].g;const kt=G[Tt].map;if(Ue-=Y,0>Ue)Y=Math.max(0,G[Tt].g-100),Ke=!1;else try{Lc(kt,ce,"req"+Ue+"_")}catch{b&&b(kt)}}if(Ke){b=ce.join("&");break e}}}return u=u.i.splice(0,_),y.D=u,b}function _i(u){if(!u.g&&!u.u){u.Y=1;var y=u.Fa;Ce||X(),oe||(Ce(),oe=!0),q.add(y,u),u.v=0}}function No(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Bn(E(u.Fa,u),Uc(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,Mc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Bn(E(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dt(10),Qn(this),Mc(this))};function Za(u){u.A!=null&&(d.clearTimeout(u.A),u.A=null)}function Mc(u){u.g=new qn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var y=gn(u.qa);Ye(y,"RID","rpc"),Ye(y,"SID",u.K),Ye(y,"AID",u.T),Ye(y,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ye(y,"TO",u.ja),Ye(y,"TYPE","xmlhttp"),Ur(u,y),u.m&&u.o&&xs(y,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=gs(gn(y)),_.m=null,_.P=!0,Ga(_,u)}n.Za=function(){this.C!=null&&(this.C=null,Qn(this),No(this),dt(19))};function ko(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function Ao(u,y){var _=null;if(u.g==y){ko(u),Za(u),u.g=null;var b=2}else if(Jt(u.h,y))_=y.D,kc(u.h,y),b=1;else return;if(u.G!=0){if(y.o)if(b==1){_=y.m?y.m.length:0,y=Date.now()-y.F;var G=u.B;b=hi(),Et(b,new mo(b,_)),mr(u)}else _i(u);else if(G=y.s,G==3||G==0&&0<y.X||!(b==1&&dd(u,y)||b==2&&No(u)))switch(_&&0<_.length&&(y=u.h,y.i=y.i.concat(_)),G){case 1:Fr(u,5);break;case 4:Fr(u,10);break;case 3:Fr(u,6);break;default:Fr(u,2)}}}function Uc(u,y){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*y}function Fr(u,y){if(u.j.info("Error code "+y),y==2){var _=E(u.fb,u),b=u.Xa;const G=!b;b=new Lr(b||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||vi(b,"https"),gs(b),G?cd(b.toString(),_):Vc(b.toString(),_)}else dt(2);u.G=0,u.l&&u.l.sa(y),Fc(u),Io(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function Fc(u){if(u.G=0,u.ka=[],u.l){const y=Ac(u.h);(y.length!=0||u.i.length!=0)&&(N(u.ka,y),N(u.ka,u.i),u.h.i.length=0,D(u.i),u.i.length=0),u.l.ra()}}function Bc(u,y,_){var b=_ instanceof Lr?gn(_):new Lr(_);if(b.g!="")y&&(b.g=y+"."+b.g),ps(b,b.s);else{var G=d.location;b=G.protocol,y=y?y+"."+G.hostname:G.hostname,G=+G.port;var Y=new Lr(null);b&&vi(Y,b),y&&(Y.g=y),G&&ps(Y,G),_&&(Y.l=_),b=Y}return _=u.D,y=u.ya,_&&y&&Ye(b,_,y),Ye(b,"VER",u.la),Ur(u,b),b}function zc(u,y,_){if(y&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=u.Ca&&!u.pa?new rt(new Or({eb:_})):new rt(u.pa),y.Ha(u.J),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function el(){}n=el.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Co(){}Co.prototype.g=function(u,y){return new Zt(u,y)};function Zt(u,y){_t.call(this),this.g=new Ja(y),this.l=u,this.h=y&&y.messageUrlParams||null,u=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(u?u["X-WebChannel-Content-Type"]=y.messageContentType:u={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(u?u["X-WebChannel-Client-Profile"]=y.va:u={"X-WebChannel-Client-Profile":y.va}),this.g.S=u,(u=y&&y.Sb)&&!U(u)&&(this.g.m=u),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!U(y)&&(this.g.D=y,u=this.h,u!==null&&y in u&&(u=this.h,y in u&&delete u[y])),this.j=new gr(this)}V(Zt,_t),Zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Zt.prototype.close=function(){Lt(this.g)},Zt.prototype.o=function(u){var y=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Oa(u),u=_);y.i.push(new Pc(y.Ya++,u)),y.G==3&&mr(y)},Zt.prototype.N=function(){this.g.l=null,delete this.j,Lt(this.g),delete this.g,Zt.aa.N.call(this)};function $c(u){ur.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var y=u.__sm__;if(y){e:{for(const _ in y){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,y=y!==null&&u in y?y[u]:void 0),this.data=y}else this.data=u}V($c,ur);function qc(){po.call(this),this.status=1}V(qc,po);function gr(u){this.g=u}V(gr,el),gr.prototype.ua=function(){Et(this.g,"a")},gr.prototype.ta=function(u){Et(this.g,new $c(u))},gr.prototype.sa=function(u){Et(this.g,new qc)},gr.prototype.ra=function(){Et(this.g,"b")},Co.prototype.createWebChannel=Co.prototype.g,Zt.prototype.send=Zt.prototype.o,Zt.prototype.open=Zt.prototype.m,Zt.prototype.close=Zt.prototype.close,G_=function(){return new Co},q_=function(){return hi()},$_=hr,Ip={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},yo.NO_ERROR=0,yo.TIMEOUT=8,yo.HTTP_ERROR=6,Zu=yo,Tc.COMPLETE="complete",z_=Tc,fo.EventType=Sn,Sn.OPEN="a",Sn.CLOSE="b",Sn.ERROR="c",Sn.MESSAGE="d",_t.prototype.listen=_t.prototype.K,Al=fo,rt.prototype.listenOnce=rt.prototype.L,rt.prototype.getLastError=rt.prototype.Ka,rt.prototype.getLastErrorCode=rt.prototype.Ba,rt.prototype.getStatus=rt.prototype.Z,rt.prototype.getResponseJson=rt.prototype.Oa,rt.prototype.getResponseText=rt.prototype.oa,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Ha,B_=rt}).apply(typeof Uu<"u"?Uu:typeof self<"u"?self:typeof window<"u"?window:{});const Av="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Qt.UNAUTHENTICATED=new Qt(null),Qt.GOOGLE_CREDENTIALS=new Qt("google-credentials-uid"),Qt.FIRST_PARTY=new Qt("first-party-uid"),Qt.MOCK_USER=new Qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ia="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki=new Lh("@firebase/firestore");function bl(){return Ki.logLevel}function ge(n,...e){if(Ki.logLevel<=Me.DEBUG){const t=e.map(_m);Ki.debug(`Firestore (${Ia}): ${n}`,...t)}}function is(n,...e){if(Ki.logLevel<=Me.ERROR){const t=e.map(_m);Ki.error(`Firestore (${Ia}): ${n}`,...t)}}function pa(n,...e){if(Ki.logLevel<=Me.WARN){const t=e.map(_m);Ki.warn(`Firestore (${Ia}): ${n}`,...t)}}function _m(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(n="Unexpected state"){const e=`FIRESTORE (${Ia}) INTERNAL ASSERTION FAILED: `+n;throw is(e),new Error(e)}function Qe(n,e){n||Ne()}function Ae(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends lr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Qt.UNAUTHENTICATED))}shutdown(){}}class pA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class mA{constructor(e){this.t=e,this.currentUser=Qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qe(this.o===void 0);let r=this.i;const o=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let a=new Ks;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ks,e.enqueueRetryable(()=>o(this.currentUser))};const c=()=>{const p=a;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},d=p=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(p=>d(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ks)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qe(typeof r.accessToken=="string"),new H_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string"),new Qt(e)}}class gA{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Qt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class yA{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new gA(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xA{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Qe(this.o===void 0);const r=a=>{a.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.R;return this.R=a.token,ge("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const o=a=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>o(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?o(a):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Qe(typeof t.token=="string"),this.R=t.token,new vA(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=wA(40);for(let a=0;a<o.length;++a)r.length<20&&o[a]<t&&(r+=e.charAt(o[a]%e.length))}return r}}function He(n,e){return n<e?-1:n>e?1:0}function ma(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new _e(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pt.fromMillis(Date.now())}static fromDate(e){return Pt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Pt(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ke(e)}static min(){return new ke(new Pt(0,0))}static max(){return new ke(new Pt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ne(),r===void 0?r=e.length-t:r>e.length-t&&Ne(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ql.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ql?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const a=e.get(o),c=t.get(o);if(a<c)return-1;if(a>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ht extends Ql{construct(e,t,r){return new ht(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new _e(se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new ht(t)}static emptyPath(){return new ht([])}}const _A=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ft extends Ql{construct(e,t,r){return new Ft(e,t,r)}static isValidIdentifier(e){return _A.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ft.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ft(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const a=()=>{if(r.length===0)throw new _e(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new _e(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new _e(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,o+=2}else d==="`"?(c=!c,o++):d!=="."||c?(r+=d,o++):(a(),o++)}if(a(),c)throw new _e(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ft(t)}static emptyPath(){return new Ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(ht.fromString(e))}static fromName(e){return new Ee(ht.fromString(e).popFirst(5))}static empty(){return new Ee(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new ht(e.slice()))}}function EA(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=ke.fromTimestamp(r===1e9?new Pt(t+1,0):new Pt(t,r));return new Js(o,Ee.empty(),e)}function TA(n){return new Js(n.readTime,n.key,-1)}class Js{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Js(ke.min(),Ee.empty(),-1)}static max(){return new Js(ke.max(),Ee.empty(),-1)}}function SA(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(n.documentKey,e.documentKey),t!==0?t:He(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class IA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dc(n){if(n.code!==se.FAILED_PRECONDITION||n.message!==bA)throw n;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne((r,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.reject(t)}static resolve(e){return new ne((t,r)=>{t(e)})}static reject(e){return new ne((t,r)=>{r(e)})}static waitFor(e){return new ne((t,r)=>{let o=0,a=0,c=!1;e.forEach(d=>{++o,d.next(()=>{++a,c&&a===o&&t()},p=>r(p))}),c=!0,a===o&&t()})}static or(e){let t=ne.resolve(!1);for(const r of e)t=t.next(o=>o?ne.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,a)=>{r.push(t.call(this,o,a))}),this.waitFor(r)}static mapArray(e,t){return new ne((r,o)=>{const a=e.length,c=new Array(a);let d=0;for(let p=0;p<a;p++){const m=p;t(e[m]).next(x=>{c[m]=x,++d,d===a&&r(c)},x=>o(x))}})}static doWhile(e,t){return new ne((r,o)=>{const a=()=>{e()===!0?t().next(()=>{a()},o):r()};a()})}}function PA(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function fc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Em.oe=-1;function Fh(n){return n==null}function ph(n){return n===0&&1/n==-1/0}function NA(n){return typeof n=="number"&&Number.isInteger(n)&&!ph(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Pa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function K_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,t){this.comparator=e,this.root=t||Ut.EMPTY}insert(e,t){return new ct(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ut.BLACK,null,null))}remove(e){return new ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ut.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fu(this.root,e,this.comparator,!0)}}class Fu{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ut{constructor(e,t,r,o,a){this.key=e,this.value=t,this.color=r??Ut.RED,this.left=o??Ut.EMPTY,this.right=a??Ut.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,a){return new Ut(e??this.key,t??this.value,r??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const a=r(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,r),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ut.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ut.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ne();const e=this.left.check();if(e!==this.right.check())throw Ne();return e+(this.isRed()?0:1)}}Ut.EMPTY=null,Ut.RED=!0,Ut.BLACK=!1;Ut.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne()}get value(){throw Ne()}get color(){throw Ne()}get left(){throw Ne()}get right(){throw Ne()}copy(e,t,r,o,a){return this}insert(e,t,r){return new Ut(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Rv(this.data.getIterator())}getIteratorFrom(e){return new Rv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=r.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Bt(this.comparator);return t.data=e,t}}class Rv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new rr([])}unionWith(e){let t=new Bt(Ft.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new rr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ma(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Q_("Invalid base64 string: "+a):a}}(e);return new zt(t)}static fromUint8Array(e){const t=function(o){let a="";for(let c=0;c<o.length;++c)a+=String.fromCharCode(o[c]);return a}(e);return new zt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zt.EMPTY_BYTE_STRING=new zt("");const kA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zs(n){if(Qe(!!n),typeof n=="string"){let e=0;const t=kA.exec(n);if(Qe(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pt(n.seconds),nanos:pt(n.nanos)}}function pt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Qi(n){return typeof n=="string"?zt.fromBase64String(n):zt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Sm(n){const e=n.mapValue.fields.__previous_value__;return Tm(e)?Sm(e):e}function Yl(n){const e=Zs(n.mapValue.fields.__local_write_time__.timestampValue);return new Pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e,t,r,o,a,c,d,p,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=m}}class Xl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Xl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Xl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bu={mapValue:{}};function Yi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Tm(n)?4:RA(n)?9007199254740991:CA(n)?10:11:Ne()}function kr(n,e){if(n===e)return!0;const t=Yi(n);if(t!==Yi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Yl(n).isEqual(Yl(e));case 3:return function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const c=Zs(o.timestampValue),d=Zs(a.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(o,a){return Qi(o.bytesValue).isEqual(Qi(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(o,a){return pt(o.geoPointValue.latitude)===pt(a.geoPointValue.latitude)&&pt(o.geoPointValue.longitude)===pt(a.geoPointValue.longitude)}(n,e);case 2:return function(o,a){if("integerValue"in o&&"integerValue"in a)return pt(o.integerValue)===pt(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const c=pt(o.doubleValue),d=pt(a.doubleValue);return c===d?ph(c)===ph(d):isNaN(c)&&isNaN(d)}return!1}(n,e);case 9:return ma(n.arrayValue.values||[],e.arrayValue.values||[],kr);case 10:case 11:return function(o,a){const c=o.mapValue.fields||{},d=a.mapValue.fields||{};if(Cv(c)!==Cv(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!kr(c[p],d[p])))return!1;return!0}(n,e);default:return Ne()}}function Jl(n,e){return(n.values||[]).find(t=>kr(t,e))!==void 0}function ga(n,e){if(n===e)return 0;const t=Yi(n),r=Yi(e);if(t!==r)return He(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return He(n.booleanValue,e.booleanValue);case 2:return function(a,c){const d=pt(a.integerValue||a.doubleValue),p=pt(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(n,e);case 3:return jv(n.timestampValue,e.timestampValue);case 4:return jv(Yl(n),Yl(e));case 5:return He(n.stringValue,e.stringValue);case 6:return function(a,c){const d=Qi(a),p=Qi(c);return d.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(a,c){const d=a.split("/"),p=c.split("/");for(let m=0;m<d.length&&m<p.length;m++){const x=He(d[m],p[m]);if(x!==0)return x}return He(d.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,c){const d=He(pt(a.latitude),pt(c.latitude));return d!==0?d:He(pt(a.longitude),pt(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Dv(n.arrayValue,e.arrayValue);case 10:return function(a,c){var d,p,m,x;const w=a.fields||{},E=c.fields||{},S=(d=w.value)===null||d===void 0?void 0:d.arrayValue,V=(p=E.value)===null||p===void 0?void 0:p.arrayValue,D=He(((m=S?.values)===null||m===void 0?void 0:m.length)||0,((x=V?.values)===null||x===void 0?void 0:x.length)||0);return D!==0?D:Dv(S,V)}(n.mapValue,e.mapValue);case 11:return function(a,c){if(a===Bu.mapValue&&c===Bu.mapValue)return 0;if(a===Bu.mapValue)return 1;if(c===Bu.mapValue)return-1;const d=a.fields||{},p=Object.keys(d),m=c.fields||{},x=Object.keys(m);p.sort(),x.sort();for(let w=0;w<p.length&&w<x.length;++w){const E=He(p[w],x[w]);if(E!==0)return E;const S=ga(d[p[w]],m[x[w]]);if(S!==0)return S}return He(p.length,x.length)}(n.mapValue,e.mapValue);default:throw Ne()}}function jv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return He(n,e);const t=Zs(n),r=Zs(e),o=He(t.seconds,r.seconds);return o!==0?o:He(t.nanos,r.nanos)}function Dv(n,e){const t=n.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const a=ga(t[o],r[o]);if(a)return a}return He(t.length,r.length)}function ya(n){return Pp(n)}function Pp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Zs(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Qi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ee.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",o=!0;for(const a of t.values||[])o?o=!1:r+=",",r+=Pp(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const c of r)a?a=!1:o+=",",o+=`${c}:${Pp(t.fields[c])}`;return o+"}"}(n.mapValue):Ne()}function Np(n){return!!n&&"integerValue"in n}function bm(n){return!!n&&"arrayValue"in n}function Vv(n){return!!n&&"nullValue"in n}function Lv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function eh(n){return!!n&&"mapValue"in n}function CA(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Vl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Pa(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Vl(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function RA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.value=e}static empty(){return new On({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!eh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vl(t)}setAll(e){let t=Ft.emptyPath(),r={},o=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,r,o),r={},o=[],t=d.popLast()}c?r[d.lastSegment()]=Vl(c):o.push(d.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,o)}delete(e){const t=this.field(e.popLast());eh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return kr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];eh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Pa(t,(o,a)=>e[o]=a);for(const o of r)delete e[o]}clone(){return new On(Vl(this.value))}}function Y_(n){const e=[];return Pa(n.fields,(t,r)=>{const o=new Ft([t]);if(eh(r)){const a=Y_(r.mapValue).fields;if(a.length===0)e.push(o);else for(const c of a)e.push(o.child(c))}else e.push(o)}),new rr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e,t,r,o,a,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=a,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Yt(e,0,ke.min(),ke.min(),ke.min(),On.empty(),0)}static newFoundDocument(e,t,r,o){return new Yt(e,1,t,ke.min(),r,o,0)}static newNoDocument(e,t){return new Yt(e,2,t,ke.min(),ke.min(),On.empty(),0)}static newUnknownDocument(e,t){return new Yt(e,3,t,ke.min(),ke.min(),On.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=On.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=On.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,t){this.position=e,this.inclusive=t}}function Ov(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const a=e[o],c=n.position[o];if(a.field.isKeyField()?r=Ee.comparator(Ee.fromName(c.referenceValue),t.key):r=ga(c,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Mv(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!kr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,t="asc"){this.field=e,this.dir=t}}function jA(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let X_=class{};class It extends X_{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new VA(e,t,r):t==="array-contains"?new MA(e,r):t==="in"?new UA(e,r):t==="not-in"?new FA(e,r):t==="array-contains-any"?new BA(e,r):new It(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new LA(e,r):new OA(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ga(t,this.value)):t!==null&&Yi(this.value)===Yi(t)&&this.matchesComparison(ga(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ar extends X_{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Ar(e,t)}matches(e){return J_(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function J_(n){return n.op==="and"}function Z_(n){return DA(n)&&J_(n)}function DA(n){for(const e of n.filters)if(e instanceof Ar)return!1;return!0}function kp(n){if(n instanceof It)return n.field.canonicalString()+n.op.toString()+ya(n.value);if(Z_(n))return n.filters.map(e=>kp(e)).join(",");{const e=n.filters.map(t=>kp(t)).join(",");return`${n.op}(${e})`}}function eE(n,e){return n instanceof It?function(r,o){return o instanceof It&&r.op===o.op&&r.field.isEqual(o.field)&&kr(r.value,o.value)}(n,e):n instanceof Ar?function(r,o){return o instanceof Ar&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((a,c,d)=>a&&eE(c,o.filters[d]),!0):!1}(n,e):void Ne()}function tE(n){return n instanceof It?function(t){return`${t.field.canonicalString()} ${t.op} ${ya(t.value)}`}(n):n instanceof Ar?function(t){return t.op.toString()+" {"+t.getFilters().map(tE).join(" ,")+"}"}(n):"Filter"}class VA extends It{constructor(e,t,r){super(e,t,r),this.key=Ee.fromName(r.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class LA extends It{constructor(e,t){super(e,"in",t),this.keys=nE("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class OA extends It{constructor(e,t){super(e,"not-in",t),this.keys=nE("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function nE(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Ee.fromName(r.referenceValue))}class MA extends It{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return bm(t)&&Jl(t.arrayValue,this.value)}}class UA extends It{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Jl(this.value.arrayValue,t)}}class FA extends It{constructor(e,t){super(e,"not-in",t)}matches(e){if(Jl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Jl(this.value.arrayValue,t)}}class BA extends It{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!bm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Jl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,t=null,r=[],o=[],a=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=a,this.startAt=c,this.endAt=d,this.ue=null}}function Uv(n,e=null,t=[],r=[],o=null,a=null,c=null){return new zA(n,e,t,r,o,a,c)}function Im(n){const e=Ae(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>kp(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Fh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ya(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ya(r)).join(",")),e.ue=t}return e.ue}function Pm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!jA(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!eE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Mv(n.startAt,e.startAt)&&Mv(n.endAt,e.endAt)}function Ap(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,t=null,r=[],o=[],a=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=a,this.limitType=c,this.startAt=d,this.endAt=p,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function $A(n,e,t,r,o,a,c,d){return new Bh(n,e,t,r,o,a,c,d)}function Nm(n){return new Bh(n)}function Fv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function qA(n){return n.collectionGroup!==null}function Ll(n){const e=Ae(n);if(e.ce===null){e.ce=[];const t=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Bt(Ft.comparator);return c.filters.forEach(p=>{p.getFlattenedFilters().forEach(m=>{m.isInequality()&&(d=d.add(m.field))})}),d})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.ce.push(new gh(a,r))}),t.has(Ft.keyField().canonicalString())||e.ce.push(new gh(Ft.keyField(),r))}return e.ce}function br(n){const e=Ae(n);return e.le||(e.le=GA(e,Ll(n))),e.le}function GA(n,e){if(n.limitType==="F")return Uv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(o=>{const a=o.dir==="desc"?"asc":"desc";return new gh(o.field,a)});const t=n.endAt?new mh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new mh(n.startAt.position,n.startAt.inclusive):null;return Uv(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Cp(n,e,t){return new Bh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function zh(n,e){return Pm(br(n),br(e))&&n.limitType===e.limitType}function rE(n){return`${Im(br(n))}|lt:${n.limitType}`}function Zo(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(o=>tE(o)).join(", ")}]`),Fh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(o=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(o)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(o=>ya(o)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(o=>ya(o)).join(",")),`Target(${r})`}(br(n))}; limitType=${n.limitType})`}function $h(n,e){return e.isFoundDocument()&&function(r,o){const a=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Ee.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,o){for(const a of Ll(r))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0}(n,e)&&function(r,o){for(const a of r.filters)if(!a.matches(o))return!1;return!0}(n,e)&&function(r,o){return!(r.startAt&&!function(c,d,p){const m=Ov(c,d,p);return c.inclusive?m<=0:m<0}(r.startAt,Ll(r),o)||r.endAt&&!function(c,d,p){const m=Ov(c,d,p);return c.inclusive?m>=0:m>0}(r.endAt,Ll(r),o))}(n,e)}function HA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function sE(n){return(e,t)=>{let r=!1;for(const o of Ll(n)){const a=WA(o,e,t);if(a!==0)return a;r=r||o.field.isKeyField()}return 0}}function WA(n,e,t){const r=n.field.isKeyField()?Ee.comparator(e.key,t.key):function(a,c,d){const p=c.data.field(a),m=d.data.field(a);return p!==null&&m!==null?ga(p,m):Ne()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ne()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,a]of r)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Pa(this.inner,(t,r)=>{for(const[o,a]of r)e(o,a)})}isEmpty(){return K_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=new ct(Ee.comparator);function os(){return KA}const iE=new ct(Ee.comparator);function Cl(...n){let e=iE;for(const t of n)e=e.insert(t.key,t);return e}function oE(n){let e=iE;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Fi(){return Ol()}function aE(){return Ol()}function Ol(){return new Na(n=>n.toString(),(n,e)=>n.isEqual(e))}const QA=new ct(Ee.comparator),YA=new Bt(Ee.comparator);function Le(...n){let e=YA;for(const t of n)e=e.add(t);return e}const XA=new Bt(He);function JA(){return XA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ph(e)?"-0":e}}function lE(n){return{integerValue:""+n}}function ZA(n,e){return NA(e)?lE(e):km(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(){this._=void 0}}function e2(n,e,t){return n instanceof yh?function(o,a){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&Tm(a)&&(a=Sm(a)),a&&(c.fields.__previous_value__=a),{mapValue:c}}(t,e):n instanceof Zl?uE(n,e):n instanceof ec?hE(n,e):function(o,a){const c=cE(o,a),d=Bv(c)+Bv(o.Pe);return Np(c)&&Np(o.Pe)?lE(d):km(o.serializer,d)}(n,e)}function t2(n,e,t){return n instanceof Zl?uE(n,e):n instanceof ec?hE(n,e):t}function cE(n,e){return n instanceof vh?function(r){return Np(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class yh extends qh{}class Zl extends qh{constructor(e){super(),this.elements=e}}function uE(n,e){const t=dE(e);for(const r of n.elements)t.some(o=>kr(o,r))||t.push(r);return{arrayValue:{values:t}}}class ec extends qh{constructor(e){super(),this.elements=e}}function hE(n,e){let t=dE(e);for(const r of n.elements)t=t.filter(o=>!kr(o,r));return{arrayValue:{values:t}}}class vh extends qh{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Bv(n){return pt(n.integerValue||n.doubleValue)}function dE(n){return bm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function n2(n,e){return n.field.isEqual(e.field)&&function(r,o){return r instanceof Zl&&o instanceof Zl||r instanceof ec&&o instanceof ec?ma(r.elements,o.elements,kr):r instanceof vh&&o instanceof vh?kr(r.Pe,o.Pe):r instanceof yh&&o instanceof yh}(n.transform,e.transform)}class r2{constructor(e,t){this.version=e,this.transformResults=t}}class es{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new es}static exists(e){return new es(void 0,e)}static updateTime(e){return new es(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function th(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Gh{}function fE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new mE(n.key,es.none()):new pc(n.key,n.data,es.none());{const t=n.data,r=On.empty();let o=new Bt(Ft.comparator);for(let a of e.fields)if(!o.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?r.delete(a):r.set(a,c),o=o.add(a)}return new ro(n.key,r,new rr(o.toArray()),es.none())}}function s2(n,e,t){n instanceof pc?function(o,a,c){const d=o.value.clone(),p=$v(o.fieldTransforms,a,c.transformResults);d.setAll(p),a.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(n,e,t):n instanceof ro?function(o,a,c){if(!th(o.precondition,a))return void a.convertToUnknownDocument(c.version);const d=$v(o.fieldTransforms,a,c.transformResults),p=a.data;p.setAll(pE(o)),p.setAll(d),a.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(n,e,t):function(o,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function Ml(n,e,t,r){return n instanceof pc?function(a,c,d,p){if(!th(a.precondition,c))return d;const m=a.value.clone(),x=qv(a.fieldTransforms,p,c);return m.setAll(x),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof ro?function(a,c,d,p){if(!th(a.precondition,c))return d;const m=qv(a.fieldTransforms,p,c),x=c.data;return x.setAll(pE(a)),x.setAll(m),c.convertToFoundDocument(c.version,x).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(w=>w.field))}(n,e,t,r):function(a,c,d){return th(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(n,e,t)}function i2(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),a=cE(r.transform,o||null);a!=null&&(t===null&&(t=On.empty()),t.set(r.field,a))}return t||null}function zv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&ma(r,o,(a,c)=>n2(a,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class pc extends Gh{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ro extends Gh{constructor(e,t,r,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function pE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function $v(n,e,t){const r=new Map;Qe(n.length===t.length);for(let o=0;o<t.length;o++){const a=n[o],c=a.transform,d=e.data.field(a.field);r.set(a.field,t2(c,d,t[o]))}return r}function qv(n,e,t){const r=new Map;for(const o of n){const a=o.transform,c=t.data.field(o.field);r.set(o.field,e2(a,c,e))}return r}class mE extends Gh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class o2 extends Gh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&s2(a,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ml(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ml(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=aE();return this.mutations.forEach(o=>{const a=e.get(o.key),c=a.overlayedDocument;let d=this.applyToLocalView(c,a.mutatedFields);d=t.has(o.key)?null:d;const p=fE(c,d);p!==null&&r.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(ke.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Le())}isEqual(e){return this.batchId===e.batchId&&ma(this.mutations,e.mutations,(t,r)=>zv(t,r))&&ma(this.baseMutations,e.baseMutations,(t,r)=>zv(t,r))}}class Am{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Qe(e.mutations.length===r.length);let o=function(){return QA}();const a=e.mutations;for(let c=0;c<a.length;c++)o=o.insert(a[c].key,r[c].version);return new Am(e,t,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt,Fe;function u2(n){switch(n){default:return Ne();case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0}}function gE(n){if(n===void 0)return is("GRPC error has no .code"),se.UNKNOWN;switch(n){case xt.OK:return se.OK;case xt.CANCELLED:return se.CANCELLED;case xt.UNKNOWN:return se.UNKNOWN;case xt.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case xt.INTERNAL:return se.INTERNAL;case xt.UNAVAILABLE:return se.UNAVAILABLE;case xt.UNAUTHENTICATED:return se.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case xt.NOT_FOUND:return se.NOT_FOUND;case xt.ALREADY_EXISTS:return se.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return se.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case xt.ABORTED:return se.ABORTED;case xt.OUT_OF_RANGE:return se.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return se.UNIMPLEMENTED;case xt.DATA_LOSS:return se.DATA_LOSS;default:return Ne()}}(Fe=xt||(xt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2=new $i([4294967295,4294967295],0);function Gv(n){const e=h2().encode(n),t=new F_;return t.update(e),new Uint8Array(t.digest())}function Hv(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new $i([t,r],0),new $i([o,a],0)]}class Cm{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Rl(`Invalid padding: ${t}`);if(r<0)throw new Rl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Rl(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Rl(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=$i.fromNumber(this.Ie)}Ee(e,t,r){let o=e.add(t.multiply($i.fromNumber(r)));return o.compare(d2)===1&&(o=new $i([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=Gv(e),[r,o]=Hv(t);for(let a=0;a<this.hashCount;a++){const c=this.Ee(r,o,a);if(!this.de(c))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new Cm(a,o,t);return r.forEach(d=>c.insert(d)),c}insert(e){if(this.Ie===0)return;const t=Gv(e),[r,o]=Hv(t);for(let a=0;a<this.hashCount;a++){const c=this.Ee(r,o,a);this.Ae(c)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Rl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,t,r,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,mc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Hh(ke.min(),o,new ct(He),os(),Le())}}class mc{constructor(e,t,r,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new mc(r,t,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,t,r,o){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=o}}class yE{constructor(e,t){this.targetId=e,this.me=t}}class vE{constructor(e,t,r=zt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Wv{constructor(){this.fe=0,this.ge=Qv(),this.pe=zt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Le(),t=Le(),r=Le();return this.ge.forEach((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Ne()}}),new mc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=Qv()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Qe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class f2{constructor(e){this.Le=e,this.Be=new Map,this.ke=os(),this.qe=Kv(),this.Qe=new ct(He)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Ne()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,o)=>{this.ze(o)&&t(o)})}He(e){const t=e.targetId,r=e.me.count,o=this.Je(t);if(o){const a=o.target;if(Ap(a))if(r===0){const c=new Ee(a.path);this.Ue(t,c,Yt.newNoDocument(c,ke.min()))}else Qe(r===1);else{const c=this.Ye(t);if(c!==r){const d=this.Ze(e),p=d?this.Xe(d,e,c):1;if(p!==0){this.je(t);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,m)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:a=0}=t;let c,d;try{c=Qi(r).toUint8Array()}catch(p){if(p instanceof Q_)return pa("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Cm(c,o,a)}catch(p){return pa(p instanceof Rl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.Ie===0?null:d}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let o=0;return r.forEach(a=>{const c=this.Le.tt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Ue(t,a,null),o++)}),o}rt(e){const t=new Map;this.Be.forEach((a,c)=>{const d=this.Je(c);if(d){if(a.current&&Ap(d.target)){const p=new Ee(d.target.path);this.ke.get(p)!==null||this.it(c,p)||this.Ue(c,p,Yt.newNoDocument(p,e))}a.be&&(t.set(c,a.ve()),a.Ce())}});let r=Le();this.qe.forEach((a,c)=>{let d=!0;c.forEachWhile(p=>{const m=this.Je(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(a))}),this.ke.forEach((a,c)=>c.setReadTime(e));const o=new Hh(e,t,this.Qe,this.ke,r);return this.ke=os(),this.qe=Kv(),this.Qe=new ct(He),o}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,t)?o.Fe(t,1):o.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Wv,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Bt(He),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Wv),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Kv(){return new ct(Ee.comparator)}function Qv(){return new ct(Ee.comparator)}const p2={asc:"ASCENDING",desc:"DESCENDING"},m2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},g2={and:"AND",or:"OR"};class y2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Rp(n,e){return n.useProto3Json||Fh(e)?e:{value:e}}function xh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function v2(n,e){return xh(n,e.toTimestamp())}function Ir(n){return Qe(!!n),ke.fromTimestamp(function(t){const r=Zs(t);return new Pt(r.seconds,r.nanos)}(n))}function Rm(n,e){return jp(n,e).canonicalString()}function jp(n,e){const t=function(o){return new ht(["projects",o.projectId,"databases",o.database])}(n).child("documents");return e===void 0?t:t.child(e)}function wE(n){const e=ht.fromString(n);return Qe(bE(e)),e}function Dp(n,e){return Rm(n.databaseId,e.path)}function Hf(n,e){const t=wE(e);if(t.get(1)!==n.databaseId.projectId)throw new _e(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new _e(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ee(EE(t))}function _E(n,e){return Rm(n.databaseId,e)}function x2(n){const e=wE(n);return e.length===4?ht.emptyPath():EE(e)}function Vp(n){return new ht(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function EE(n){return Qe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Yv(n,e,t){return{name:Dp(n,e),fields:t.value.mapValue.fields}}function w2(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=function(m,x){return m.useProto3Json?(Qe(x===void 0||typeof x=="string"),zt.fromBase64String(x||"")):(Qe(x===void 0||x instanceof Buffer||x instanceof Uint8Array),zt.fromUint8Array(x||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(m){const x=m.code===void 0?se.UNKNOWN:gE(m.code);return new _e(x,m.message||"")}(c);t=new vE(r,o,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Hf(n,r.document.name),a=Ir(r.document.updateTime),c=r.document.createTime?Ir(r.document.createTime):ke.min(),d=new On({mapValue:{fields:r.document.fields}}),p=Yt.newFoundDocument(o,a,c,d),m=r.targetIds||[],x=r.removedTargetIds||[];t=new nh(m,x,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Hf(n,r.document),a=r.readTime?Ir(r.readTime):ke.min(),c=Yt.newNoDocument(o,a),d=r.removedTargetIds||[];t=new nh([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Hf(n,r.document),a=r.removedTargetIds||[];t=new nh([],a,o,null)}else{if(!("filter"in e))return Ne();{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:a}=r,c=new c2(o,a),d=r.targetId;t=new yE(d,c)}}return t}function _2(n,e){let t;if(e instanceof pc)t={update:Yv(n,e.key,e.value)};else if(e instanceof mE)t={delete:Dp(n,e.key)};else if(e instanceof ro)t={update:Yv(n,e.key,e.data),updateMask:A2(e.fieldMask)};else{if(!(e instanceof o2))return Ne();t={verify:Dp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,c){const d=c.transform;if(d instanceof yh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Zl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof ec)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof vh)return{fieldPath:c.field.canonicalString(),increment:d.Pe};throw Ne()}(0,r))),e.precondition.isNone||(t.currentDocument=function(o,a){return a.updateTime!==void 0?{updateTime:v2(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ne()}(n,e.precondition)),t}function E2(n,e){return n&&n.length>0?(Qe(e!==void 0),n.map(t=>function(o,a){let c=o.updateTime?Ir(o.updateTime):Ir(a);return c.isEqual(ke.min())&&(c=Ir(a)),new r2(c,o.transformResults||[])}(t,e))):[]}function T2(n,e){return{documents:[_E(n,e.path)]}}function S2(n,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=_E(n,o);const a=function(m){if(m.length!==0)return SE(Ar.create(m,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const c=function(m){if(m.length!==0)return m.map(x=>function(E){return{field:ea(E.field),direction:P2(E.dir)}}(x))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Rp(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{_t:t,parent:o}}function b2(n){let e=x2(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Qe(r===1);const x=t.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let a=[];t.where&&(a=function(w){const E=TE(w);return E instanceof Ar&&Z_(E)?E.getFilters():[E]}(t.where));let c=[];t.orderBy&&(c=function(w){return w.map(E=>function(V){return new gh(ta(V.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(V.direction))}(E))}(t.orderBy));let d=null;t.limit&&(d=function(w){let E;return E=typeof w=="object"?w.value:w,Fh(E)?null:E}(t.limit));let p=null;t.startAt&&(p=function(w){const E=!!w.before,S=w.values||[];return new mh(S,E)}(t.startAt));let m=null;return t.endAt&&(m=function(w){const E=!w.before,S=w.values||[];return new mh(S,E)}(t.endAt)),$A(e,o,c,a,d,"F",p,m)}function I2(n,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function TE(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ta(t.unaryFilter.field);return It.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=ta(t.unaryFilter.field);return It.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ta(t.unaryFilter.field);return It.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=ta(t.unaryFilter.field);return It.create(c,"!=",{nullValue:"NULL_VALUE"});default:return Ne()}}(n):n.fieldFilter!==void 0?function(t){return It.create(ta(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ne()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ar.create(t.compositeFilter.filters.map(r=>TE(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ne()}}(t.compositeFilter.op))}(n):Ne()}function P2(n){return p2[n]}function N2(n){return m2[n]}function k2(n){return g2[n]}function ea(n){return{fieldPath:n.canonicalString()}}function ta(n){return Ft.fromServerFormat(n.fieldPath)}function SE(n){return n instanceof It?function(t){if(t.op==="=="){if(Lv(t.value))return{unaryFilter:{field:ea(t.field),op:"IS_NAN"}};if(Vv(t.value))return{unaryFilter:{field:ea(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Lv(t.value))return{unaryFilter:{field:ea(t.field),op:"IS_NOT_NAN"}};if(Vv(t.value))return{unaryFilter:{field:ea(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ea(t.field),op:N2(t.op),value:t.value}}}(n):n instanceof Ar?function(t){const r=t.getFilters().map(o=>SE(o));return r.length===1?r[0]:{compositeFilter:{op:k2(t.op),filters:r}}}(n):Ne()}function A2(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function bE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,t,r,o,a=ke.min(),c=ke.min(),d=zt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new qs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e){this.ct=e}}function R2(n){const e=b2({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Cp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(){this.un=new D2}addToCollectionParentIndex(e,t){return this.un.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(Js.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(Js.min())}updateCollectionGroup(e,t,r){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class D2{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Bt(ht.comparator),a=!o.has(r);return this.index[t]=o.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Bt(ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new va(0)}static kn(){return new va(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(){this.changes=new Na(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Yt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ne.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(r!==null&&Ml(r.mutation,o,rr.empty(),Pt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Le()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Le()){const o=Fi();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(a=>{let c=Cl();return a.forEach((d,p)=>{c=c.insert(d,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Fi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Le()))}populateOverlays(e,t,r){const o=[];return r.forEach(a=>{t.has(a)||o.push(a)}),this.documentOverlayCache.getOverlays(e,o).next(a=>{a.forEach((c,d)=>{t.set(c,d)})})}computeViews(e,t,r,o){let a=os();const c=Ol(),d=function(){return Ol()}();return t.forEach((p,m)=>{const x=r.get(m.key);o.has(m.key)&&(x===void 0||x.mutation instanceof ro)?a=a.insert(m.key,m):x!==void 0?(c.set(m.key,x.mutation.getFieldMask()),Ml(x.mutation,m,x.mutation.getFieldMask(),Pt.now())):c.set(m.key,rr.empty())}),this.recalculateAndSaveOverlays(e,a).next(p=>(p.forEach((m,x)=>c.set(m,x)),t.forEach((m,x)=>{var w;return d.set(m,new L2(x,(w=c.get(m))!==null&&w!==void 0?w:null))}),d))}recalculateAndSaveOverlays(e,t){const r=Ol();let o=new ct((c,d)=>c-d),a=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const d of c)d.keys().forEach(p=>{const m=t.get(p);if(m===null)return;let x=r.get(p)||rr.empty();x=d.applyToLocalView(m,x),r.set(p,x);const w=(o.get(d.batchId)||Le()).add(p);o=o.insert(d.batchId,w)})}).next(()=>{const c=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),m=p.key,x=p.value,w=aE();x.forEach(E=>{if(!a.has(E)){const S=fE(t.get(E),r.get(E));S!==null&&w.set(E,S),a=a.add(E)}}),c.push(this.documentOverlayCache.saveOverlays(e,m,w))}return ne.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,o){return function(c){return Ee.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):qA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(a=>{const c=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-a.size):ne.resolve(Fi());let d=-1,p=a;return c.next(m=>ne.forEach(m,(x,w)=>(d<w.largestBatchId&&(d=w.largestBatchId),a.get(x)?ne.resolve():this.remoteDocumentCache.getEntry(e,x).next(E=>{p=p.insert(x,E)}))).next(()=>this.populateOverlays(e,m,a)).next(()=>this.computeViews(e,p,m,Le())).next(x=>({batchId:d,changes:oE(x)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next(r=>{let o=Cl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const a=t.collectionGroup;let c=Cl();return this.indexManager.getCollectionParents(e,a).next(d=>ne.forEach(d,p=>{const m=function(w,E){return new Bh(E,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(t,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,o).next(x=>{x.forEach((w,E)=>{c=c.insert(w,E)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,o))).next(c=>{a.forEach((p,m)=>{const x=m.getKey();c.get(x)===null&&(c=c.insert(x,Yt.newInvalidDocument(x)))});let d=Cl();return c.forEach((p,m)=>{const x=a.get(p);x!==void 0&&Ml(x.mutation,m,rr.empty(),Pt.now()),$h(t,m)&&(d=d.insert(p,m))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return ne.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:Ir(o.createTime)}}(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(o){return{name:o.name,query:R2(o.bundledQuery),readTime:Ir(o.readTime)}}(t)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(){this.overlays=new ct(Ee.comparator),this.Ir=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Fi();return ne.forEach(t,o=>this.getOverlay(e,o).next(a=>{a!==null&&r.set(o,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,a)=>{this.ht(e,t,a)}),ne.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Ir.get(r);return o!==void 0&&(o.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(r)),ne.resolve()}getOverlaysForCollection(e,t,r){const o=Fi(),a=t.length+1,c=new Ee(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,m=p.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&p.largestBatchId>r&&o.set(p.getKey(),p)}return ne.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let a=new ct((m,x)=>m-x);const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let x=a.get(m.largestBatchId);x===null&&(x=Fi(),a=a.insert(m.largestBatchId,x)),x.set(m.getKey(),m)}}const d=Fi(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((m,x)=>d.set(m,x)),!(d.size()>=o)););return ne.resolve(d)}ht(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const c=this.Ir.get(o.largestBatchId).delete(r.key);this.Ir.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new l2(t,r));let a=this.Ir.get(t);a===void 0&&(a=Le(),this.Ir.set(t,a)),this.Ir.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(){this.sessionToken=zt.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(){this.Tr=new Bt(jt.Er),this.dr=new Bt(jt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new jt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new jt(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new Ee(new ht([])),r=new jt(t,e),o=new jt(t,e+1),a=[];return this.dr.forEachInRange([r,o],c=>{this.Vr(c),a.push(c.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Ee(new ht([])),r=new jt(t,e),o=new jt(t,e+1);let a=Le();return this.dr.forEachInRange([r,o],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new jt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class jt{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Ee.comparator(e.key,t.key)||He(e.wr,t.wr)}static Ar(e,t){return He(e.wr,t.wr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Bt(jt.Er)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new a2(a,t,r,o);this.mutationQueue.push(c);for(const d of o)this.br=this.br.add(new jt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ne.resolve(c)}lookupMutationBatch(e,t){return ne.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.vr(r),a=o<0?0:o;return ne.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new jt(t,0),o=new jt(t,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,o],c=>{const d=this.Dr(c.wr);a.push(d)}),ne.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Bt(He);return t.forEach(o=>{const a=new jt(o,0),c=new jt(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,c],d=>{r=r.add(d.wr)})}),ne.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let a=r;Ee.isDocumentKey(a)||(a=a.child(""));const c=new jt(new Ee(a),0);let d=new Bt(He);return this.br.forEachWhile(p=>{const m=p.key.path;return!!r.isPrefixOf(m)&&(m.length===o&&(d=d.add(p.wr)),!0)},c),ne.resolve(this.Cr(d))}Cr(e){const t=[];return e.forEach(r=>{const o=this.Dr(r);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Qe(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return ne.forEach(t.mutations,o=>{const a=new jt(o.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new jt(t,0),o=this.br.firstAfterOrEqual(r);return ne.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e){this.Mr=e,this.docs=function(){return new ct(Ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),a=o?o.size:0,c=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ne.resolve(r?r.document.mutableCopy():Yt.newInvalidDocument(t))}getEntries(e,t){let r=os();return t.forEach(o=>{const a=this.docs.get(o);r=r.insert(o,a?a.document.mutableCopy():Yt.newInvalidDocument(o))}),ne.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let a=os();const c=t.path,d=new Ee(c.child("")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:m,value:{document:x}}=p.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||SA(TA(x),r)<=0||(o.has(x.key)||$h(t,x))&&(a=a.insert(x.key,x.mutableCopy()))}return ne.resolve(a)}getAllFromCollectionGroup(e,t,r,o){Ne()}Or(e,t){return ne.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new $2(this)}getSize(e){return ne.resolve(this.size)}}class $2 extends V2{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.cr.addEntry(e,o)):this.cr.removeEntry(r)}),ne.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e){this.persistence=e,this.Nr=new Na(t=>Im(t),Pm),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.Lr=0,this.Br=new jm,this.targetCount=0,this.kr=va.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,o)=>t(o)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),ne.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new va(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.Kn(t),ne.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,r){let o=0;const a=[];return this.Nr.forEach((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.Nr.delete(c),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)}),ne.waitFor(a).next(()=>o)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return ne.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),ne.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach(c=>{a.push(o.markPotentiallyOrphaned(e,c))}),ne.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return ne.resolve(r)}containsKey(e,t){return ne.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Em(0),this.Kr=!1,this.Kr=!0,this.$r=new F2,this.referenceDelegate=e(this),this.Ur=new q2(this),this.indexManager=new j2,this.remoteDocumentCache=function(o){return new z2(o)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new C2(t),this.Gr=new M2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new U2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new B2(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){ge("MemoryPersistence","Starting transaction:",e);const o=new H2(this.Qr.next());return this.referenceDelegate.zr(),r(o).next(a=>this.referenceDelegate.jr(o).next(()=>a)).toPromise().then(a=>(o.raiseOnCommittedEvent(),a))}Hr(e,t){return ne.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class H2 extends IA{constructor(e){super(),this.currentSequenceNumber=e}}class Dm{constructor(e){this.persistence=e,this.Jr=new jm,this.Yr=null}static Zr(e){return new Dm(e)}get Xr(){if(this.Yr)return this.Yr;throw Ne()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),ne.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(o=>this.Xr.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(a=>this.Xr.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.Xr,r=>{const o=Ee.fromPath(r);return this.ei(e,o).next(a=>{a||t.removeEntry(o,ke.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return ne.or([()=>ne.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=o}static Wi(e,t){let r=Le(),o=Le();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new Vm(e,t.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return RI()?8:PA(Xt())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,o){const a={result:null};return this.Yi(e,t).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.Zi(e,t,o,r).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new W2;return this.Xi(e,t,c).next(d=>{if(a.result=d,this.zi)return this.es(e,t,c,d.size)})}).next(()=>a.result)}es(e,t,r,o){return r.documentReadCount<this.ji?(bl()<=Me.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",Zo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ne.resolve()):(bl()<=Me.DEBUG&&ge("QueryEngine","Query:",Zo(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.Hi*o?(bl()<=Me.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",Zo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,br(t))):ne.resolve())}Yi(e,t){if(Fv(t))return ne.resolve(null);let r=br(t);return this.indexManager.getIndexType(e,r).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=Cp(t,null,"F"),r=br(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=Le(...a);return this.Ji.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,r).next(p=>{const m=this.ts(t,d);return this.ns(t,m,c,p.readTime)?this.Yi(e,Cp(t,null,"F")):this.rs(e,m,t,p)}))})))}Zi(e,t,r,o){return Fv(t)||o.isEqual(ke.min())?ne.resolve(null):this.Ji.getDocuments(e,r).next(a=>{const c=this.ts(t,a);return this.ns(t,c,r,o)?ne.resolve(null):(bl()<=Me.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Zo(t)),this.rs(e,c,t,EA(o,-1)).next(d=>d))})}ts(e,t){let r=new Bt(sE(e));return t.forEach((o,a)=>{$h(e,a)&&(r=r.add(a))}),r}ns(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}Xi(e,t,r){return bl()<=Me.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",Zo(t)),this.Ji.getDocumentsMatchingQuery(e,t,Js.min(),r)}rs(e,t,r,o){return this.Ji.getDocumentsMatchingQuery(e,r,o).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e,t,r,o){this.persistence=e,this.ss=t,this.serializer=o,this.os=new ct(He),this._s=new Na(a=>Im(a),Pm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new O2(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function Y2(n,e,t,r){return new Q2(n,e,t,r)}async function IE(n,e){const t=Ae(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(a=>(o=a,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],d=[];let p=Le();for(const m of o){c.push(m.batchId);for(const x of m.mutations)p=p.add(x.key)}for(const m of a){d.push(m.batchId);for(const x of m.mutations)p=p.add(x.key)}return t.localDocuments.getDocuments(r,p).next(m=>({hs:m,removedBatchIds:c,addedBatchIds:d}))})})}function X2(n,e){const t=Ae(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),a=t.cs.newChangeBuffer({trackRemovals:!0});return function(d,p,m,x){const w=m.batch,E=w.keys();let S=ne.resolve();return E.forEach(V=>{S=S.next(()=>x.getEntry(p,V)).next(D=>{const N=m.docVersions.get(V);Qe(N!==null),D.version.compareTo(N)<0&&(w.applyToRemoteDocument(D,m),D.isValidDocument()&&(D.setReadTime(m.commitVersion),x.addEntry(D)))})}),S.next(()=>d.mutationQueue.removeMutationBatch(p,w))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let p=Le();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(p=p.add(d.batch.mutations[m].key));return p}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function PE(n){const e=Ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function J2(n,e){const t=Ae(n),r=e.snapshotVersion;let o=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.cs.newChangeBuffer({trackRemovals:!0});o=t.os;const d=[];e.targetChanges.forEach((x,w)=>{const E=o.get(w);if(!E)return;d.push(t.Ur.removeMatchingKeys(a,x.removedDocuments,w).next(()=>t.Ur.addMatchingKeys(a,x.addedDocuments,w)));let S=E.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?S=S.withResumeToken(zt.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):x.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(x.resumeToken,r)),o=o.insert(w,S),function(D,N,B){return D.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(E,S,x)&&d.push(t.Ur.updateTargetData(a,S))});let p=os(),m=Le();if(e.documentUpdates.forEach(x=>{e.resolvedLimboDocuments.has(x)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,x))}),d.push(Z2(a,c,e.documentUpdates).next(x=>{p=x.Ps,m=x.Is})),!r.isEqual(ke.min())){const x=t.Ur.getLastRemoteSnapshotVersion(a).next(w=>t.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r));d.push(x)}return ne.waitFor(d).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,p,m)).next(()=>p)}).then(a=>(t.os=o,a))}function Z2(n,e,t){let r=Le(),o=Le();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let c=os();return t.forEach((d,p)=>{const m=a.get(d);p.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(ke.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):ge("LocalStore","Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",p.version)}),{Ps:c,Is:o}})}function eC(n,e){const t=Ae(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function tC(n,e){const t=Ae(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Ur.getTargetData(r,e).next(a=>a?(o=a,ne.resolve(o)):t.Ur.allocateTargetId(r).next(c=>(o=new qs(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.os.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}async function Lp(n,e,t){const r=Ae(n),o=r.os.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,o))}catch(c){if(!fc(c))throw c;ge("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.os=r.os.remove(e),r._s.delete(o.target)}function Xv(n,e,t){const r=Ae(n);let o=ke.min(),a=Le();return r.persistence.runTransaction("Execute query","readwrite",c=>function(p,m,x){const w=Ae(p),E=w._s.get(x);return E!==void 0?ne.resolve(w.os.get(E)):w.Ur.getTargetData(m,x)}(r,c,br(e)).next(d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(c,d.targetId).next(p=>{a=p})}).next(()=>r.ss.getDocumentsMatchingQuery(c,e,t?o:ke.min(),t?a:Le())).next(d=>(nC(r,HA(e),d),{documents:d,Ts:a})))}function nC(n,e,t){let r=n.us.get(e)||ke.min();t.forEach((o,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.us.set(e,r)}class Jv{constructor(){this.activeTargetIds=JA()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rC{constructor(){this.so=new Jv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Jv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ge("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ge("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zu=null;function Wf(){return zu===null?zu=function(){return 268435456+Math.round(2147483648*Math.random())}():zu++,"0x"+zu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt="WebChannelConnection";class aC extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${o}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${a}`}get Fo(){return!1}Mo(t,r,o,a,c){const d=Wf(),p=this.xo(t,r.toUriEncodedString());ge("RestConnection",`Sending RPC '${t}' ${d}:`,p,o);const m={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(m,a,c),this.No(t,p,m,o).then(x=>(ge("RestConnection",`Received RPC '${t}' ${d}: `,x),x),x=>{throw pa("RestConnection",`RPC '${t}' ${d} failed with error: `,x,"url: ",p,"request:",o),x})}Lo(t,r,o,a,c,d){return this.Mo(t,r,o,a,c)}Oo(t,r,o){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ia}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,c)=>t[c]=a),o&&o.headers.forEach((a,c)=>t[c]=a)}xo(t,r){const o=iC[t];return`${this.Do}/v1/${r}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,o){const a=Wf();return new Promise((c,d)=>{const p=new B_;p.setWithCredentials(!0),p.listenOnce(z_.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Zu.NO_ERROR:const x=p.getResponseJson();ge(Wt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(x)),c(x);break;case Zu.TIMEOUT:ge(Wt,`RPC '${e}' ${a} timed out`),d(new _e(se.DEADLINE_EXCEEDED,"Request time out"));break;case Zu.HTTP_ERROR:const w=p.getStatus();if(ge(Wt,`RPC '${e}' ${a} failed with status:`,w,"response text:",p.getResponseText()),w>0){let E=p.getResponseJson();Array.isArray(E)&&(E=E[0]);const S=E?.error;if(S&&S.status&&S.message){const V=function(N){const B=N.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(B)>=0?B:se.UNKNOWN}(S.status);d(new _e(V,S.message))}else d(new _e(se.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new _e(se.UNAVAILABLE,"Connection failed."));break;default:Ne()}}finally{ge(Wt,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(o);ge(Wt,`RPC '${e}' ${a} sending request:`,o),p.send(t,"POST",m,r,15)})}Bo(e,t,r){const o=Wf(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=G_(),d=q_(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Oo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const x=a.join("");ge(Wt,`Creating RPC '${e}' stream ${o}: ${x}`,p);const w=c.createWebChannel(x,p);let E=!1,S=!1;const V=new oC({Io:N=>{S?ge(Wt,`Not sending because RPC '${e}' stream ${o} is closed:`,N):(E||(ge(Wt,`Opening RPC '${e}' stream ${o} transport.`),w.open(),E=!0),ge(Wt,`RPC '${e}' stream ${o} sending:`,N),w.send(N))},To:()=>w.close()}),D=(N,B,U)=>{N.listen(B,j=>{try{U(j)}catch(K){setTimeout(()=>{throw K},0)}})};return D(w,Al.EventType.OPEN,()=>{S||(ge(Wt,`RPC '${e}' stream ${o} transport opened.`),V.yo())}),D(w,Al.EventType.CLOSE,()=>{S||(S=!0,ge(Wt,`RPC '${e}' stream ${o} transport closed`),V.So())}),D(w,Al.EventType.ERROR,N=>{S||(S=!0,pa(Wt,`RPC '${e}' stream ${o} transport errored:`,N),V.So(new _e(se.UNAVAILABLE,"The operation could not be completed")))}),D(w,Al.EventType.MESSAGE,N=>{var B;if(!S){const U=N.data[0];Qe(!!U);const j=U,K=j.error||((B=j[0])===null||B===void 0?void 0:B.error);if(K){ge(Wt,`RPC '${e}' stream ${o} received error:`,K);const Z=K.status;let ie=function(P){const L=xt[P];if(L!==void 0)return gE(L)}(Z),R=K.message;ie===void 0&&(ie=se.INTERNAL,R="Unknown error status: "+Z+" with message "+K.message),S=!0,V.So(new _e(ie,R)),w.close()}else ge(Wt,`RPC '${e}' stream ${o} received:`,U),V.bo(U)}}),D(d,$_.STAT_EVENT,N=>{N.stat===Ip.PROXY?ge(Wt,`RPC '${e}' stream ${o} detected buffering proxy`):N.stat===Ip.NOPROXY&&ge(Wt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{V.wo()},0),V}}function Kf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(n){return new y2(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,t,r=1e3,o=1.5,a=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=o,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),o=Math.max(0,t-r);o>0&&ge("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e,t,r,o,a,c,d,p){this.ui=e,this.Ho=r,this.Jo=o,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new NE(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===se.RESOURCE_EXHAUSTED?(is(t.toString()),is("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Yo===t&&this.P_(r,o)},r=>{e(()=>{const o=new _e(se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(o)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(o=>{r(()=>this.I_(o))}),this.stream.onMessage(o=>{r(()=>++this.e_==1?this.E_(o):this.onNext(o))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ge("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(ge("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lC extends kE{constructor(e,t,r,o,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,c),this.serializer=a}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=w2(this.serializer,e),r=function(a){if(!("targetChange"in a))return ke.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?ke.min():c.readTime?Ir(c.readTime):ke.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=Vp(this.serializer),t.addTarget=function(a,c){let d;const p=c.target;if(d=Ap(p)?{documents:T2(a,p)}:{query:S2(a,p)._t},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=xE(a,c.resumeToken);const m=Rp(a,c.expectedCount);m!==null&&(d.expectedCount=m)}else if(c.snapshotVersion.compareTo(ke.min())>0){d.readTime=xh(a,c.snapshotVersion.toTimestamp());const m=Rp(a,c.expectedCount);m!==null&&(d.expectedCount=m)}return d}(this.serializer,e);const r=I2(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=Vp(this.serializer),t.removeTarget=e,this.a_(t)}}class cC extends kE{constructor(e,t,r,o,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,c),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Qe(!!e.streamToken),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Qe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=E2(e.writeResults,e.commitTime),r=Ir(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=Vp(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>_2(this.serializer,r))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new _e(se.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Mo(e,jp(t,r),o,a,c)).catch(a=>{throw a.name==="FirebaseError"?(a.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new _e(se.UNKNOWN,a.toString())})}Lo(e,t,r,o,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Lo(e,jp(t,r),o,c,d,a)).catch(c=>{throw c.name==="FirebaseError"?(c.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new _e(se.UNKNOWN,c.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class hC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(is(t),this.D_=!1):ge("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,t,r,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(c=>{r.enqueueAndForget(async()=>{so(this)&&(ge("RemoteStore","Restarting streams for network reachability change."),await async function(p){const m=Ae(p);m.L_.add(4),await gc(m),m.q_.set("Unknown"),m.L_.delete(4),await Kh(m)}(this))})}),this.q_=new hC(r,o)}}async function Kh(n){if(so(n))for(const e of n.B_)await e(!0)}async function gc(n){for(const e of n.B_)await e(!1)}function AE(n,e){const t=Ae(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Um(t)?Mm(t):ka(t).r_()&&Om(t,e))}function Lm(n,e){const t=Ae(n),r=ka(t);t.N_.delete(e),r.r_()&&CE(t,e),t.N_.size===0&&(r.r_()?r.o_():so(t)&&t.q_.set("Unknown"))}function Om(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ka(n).A_(e)}function CE(n,e){n.Q_.xe(e),ka(n).R_(e)}function Mm(n){n.Q_=new f2({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),ka(n).start(),n.q_.v_()}function Um(n){return so(n)&&!ka(n).n_()&&n.N_.size>0}function so(n){return Ae(n).L_.size===0}function RE(n){n.Q_=void 0}async function fC(n){n.q_.set("Online")}async function pC(n){n.N_.forEach((e,t)=>{Om(n,e)})}async function mC(n,e){RE(n),Um(n)?(n.q_.M_(e),Mm(n)):n.q_.set("Unknown")}async function gC(n,e,t){if(n.q_.set("Online"),e instanceof vE&&e.state===2&&e.cause)try{await async function(o,a){const c=a.cause;for(const d of a.targetIds)o.N_.has(d)&&(await o.remoteSyncer.rejectListen(d,c),o.N_.delete(d),o.Q_.removeTarget(d))}(n,e)}catch(r){ge("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await wh(n,r)}else if(e instanceof nh?n.Q_.Ke(e):e instanceof yE?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ke.min()))try{const r=await PE(n.localStore);t.compareTo(r)>=0&&await function(a,c){const d=a.Q_.rt(c);return d.targetChanges.forEach((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const x=a.N_.get(m);x&&a.N_.set(m,x.withResumeToken(p.resumeToken,c))}}),d.targetMismatches.forEach((p,m)=>{const x=a.N_.get(p);if(!x)return;a.N_.set(p,x.withResumeToken(zt.EMPTY_BYTE_STRING,x.snapshotVersion)),CE(a,p);const w=new qs(x.target,p,m,x.sequenceNumber);Om(a,w)}),a.remoteSyncer.applyRemoteEvent(d)}(n,t)}catch(r){ge("RemoteStore","Failed to raise snapshot:",r),await wh(n,r)}}async function wh(n,e,t){if(!fc(e))throw e;n.L_.add(1),await gc(n),n.q_.set("Offline"),t||(t=()=>PE(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ge("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await Kh(n)})}function jE(n,e){return e().catch(t=>wh(n,t,e))}async function Qh(n){const e=Ae(n),t=ei(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;yC(e);)try{const o=await eC(e.localStore,r);if(o===null){e.O_.length===0&&t.o_();break}r=o.batchId,vC(e,o)}catch(o){await wh(e,o)}DE(e)&&VE(e)}function yC(n){return so(n)&&n.O_.length<10}function vC(n,e){n.O_.push(e);const t=ei(n);t.r_()&&t.V_&&t.m_(e.mutations)}function DE(n){return so(n)&&!ei(n).n_()&&n.O_.length>0}function VE(n){ei(n).start()}async function xC(n){ei(n).p_()}async function wC(n){const e=ei(n);for(const t of n.O_)e.m_(t.mutations)}async function _C(n,e,t){const r=n.O_.shift(),o=Am.from(r,e,t);await jE(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),await Qh(n)}async function EC(n,e){e&&ei(n).V_&&await async function(r,o){if(function(c){return u2(c)&&c!==se.ABORTED}(o.code)){const a=r.O_.shift();ei(r).s_(),await jE(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,o)),await Qh(r)}}(n,e),DE(n)&&VE(n)}async function ex(n,e){const t=Ae(n);t.asyncQueue.verifyOperationInProgress(),ge("RemoteStore","RemoteStore received new credentials");const r=so(t);t.L_.add(3),await gc(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await Kh(t)}async function TC(n,e){const t=Ae(n);e?(t.L_.delete(2),await Kh(t)):e||(t.L_.add(2),await gc(t),t.q_.set("Unknown"))}function ka(n){return n.K_||(n.K_=function(t,r,o){const a=Ae(t);return a.w_(),new lC(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(n.datastore,n.asyncQueue,{Eo:fC.bind(null,n),Ro:pC.bind(null,n),mo:mC.bind(null,n),d_:gC.bind(null,n)}),n.B_.push(async e=>{e?(n.K_.s_(),Um(n)?Mm(n):n.q_.set("Unknown")):(await n.K_.stop(),RE(n))})),n.K_}function ei(n){return n.U_||(n.U_=function(t,r,o){const a=Ae(t);return a.w_(),new cC(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:xC.bind(null,n),mo:EC.bind(null,n),f_:wC.bind(null,n),g_:_C.bind(null,n)}),n.B_.push(async e=>{e?(n.U_.s_(),await Qh(n)):(await n.U_.stop(),n.O_.length>0&&(ge("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))})),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,t,r,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=a,this.deferred=new Ks,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,a){const c=Date.now()+r,d=new Fm(e,t,c,o,a);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bm(n,e){if(is("AsyncQueue",`${e}: ${n}`),fc(n))return new _e(se.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ee.comparator(t.key,r.key):(t,r)=>Ee.comparator(t.key,r.key),this.keyedMap=Cl(),this.sortedSet=new ct(this.comparator)}static emptySet(e){return new da(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof da)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=r.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new da;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(){this.W_=new ct(Ee.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Ne():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class xa{constructor(e,t,r,o,a,c,d,p,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,o,a){const c=[];return t.forEach(d=>{c.push({type:0,doc:d})}),new xa(e,t,da.emptySet(t),c,r,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class bC{constructor(){this.queries=nx(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const o=Ae(t),a=o.queries;o.queries=nx(),a.forEach((c,d)=>{for(const p of d.j_)p.onError(r)})})(this,new _e(se.ABORTED,"Firestore shutting down"))}}function nx(){return new Na(n=>rE(n),zh)}async function IC(n,e){const t=Ae(n);let r=3;const o=e.query;let a=t.queries.get(o);a?!a.H_()&&e.J_()&&(r=2):(a=new SC,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await t.onListen(o,!0);break;case 1:a.z_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const d=Bm(c,`Initialization of query '${Zo(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.j_.push(e),e.Z_(t.onlineState),a.z_&&e.X_(a.z_)&&zm(t)}async function PC(n,e){const t=Ae(n),r=e.query;let o=3;const a=t.queries.get(r);if(a){const c=a.j_.indexOf(e);c>=0&&(a.j_.splice(c,1),a.j_.length===0?o=e.J_()?0:1:!a.H_()&&e.J_()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function NC(n,e){const t=Ae(n);let r=!1;for(const o of e){const a=o.query,c=t.queries.get(a);if(c){for(const d of c.j_)d.X_(o)&&(r=!0);c.z_=o}}r&&zm(t)}function kC(n,e,t){const r=Ae(n),o=r.queries.get(e);if(o)for(const a of o.j_)a.onError(t);r.queries.delete(e)}function zm(n){n.Y_.forEach(e=>{e.next()})}var Op,rx;(rx=Op||(Op={})).ea="default",rx.Cache="cache";class AC{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new xa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=xa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Op.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e){this.key=e}}class OE{constructor(e){this.key=e}}class CC{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Le(),this.mutatedKeys=Le(),this.Aa=sE(e),this.Ra=new da(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new tx,o=t?t.Ra:this.Ra;let a=t?t.mutatedKeys:this.mutatedKeys,c=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((x,w)=>{const E=o.get(x),S=$h(this.query,w)?w:null,V=!!E&&this.mutatedKeys.has(E.key),D=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let N=!1;E&&S?E.data.isEqual(S.data)?V!==D&&(r.track({type:3,doc:S}),N=!0):this.ga(E,S)||(r.track({type:2,doc:S}),N=!0,(p&&this.Aa(S,p)>0||m&&this.Aa(S,m)<0)&&(d=!0)):!E&&S?(r.track({type:0,doc:S}),N=!0):E&&!S&&(r.track({type:1,doc:E}),N=!0,(p||m)&&(d=!0)),N&&(S?(c=c.add(S),a=D?a.add(x):a.delete(x)):(c=c.delete(x),a=a.delete(x)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const x=this.query.limitType==="F"?c.last():c.first();c=c.delete(x.key),a=a.delete(x.key),r.track({type:1,doc:x})}return{Ra:c,fa:r,ns:d,mutatedKeys:a}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const c=e.fa.G_();c.sort((x,w)=>function(S,V){const D=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne()}};return D(S)-D(V)}(x.type,w.type)||this.Aa(x.doc,w.doc)),this.pa(r),o=o!=null&&o;const d=t&&!o?this.ya():[],p=this.da.size===0&&this.current&&!o?1:0,m=p!==this.Ea;return this.Ea=p,c.length!==0||m?{snapshot:new xa(this.query,e.Ra,a,c,e.mutatedKeys,p===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:d}:{wa:d}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new tx,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Le(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new OE(r))}),this.da.forEach(r=>{e.has(r)||t.push(new LE(r))}),t}ba(e){this.Ta=e.Ts,this.da=Le();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return xa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class RC{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class jC{constructor(e){this.key=e,this.va=!1}}class DC{constructor(e,t,r,o,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Ca={},this.Fa=new Na(d=>rE(d),zh),this.Ma=new Map,this.xa=new Set,this.Oa=new ct(Ee.comparator),this.Na=new Map,this.La=new jm,this.Ba={},this.ka=new Map,this.qa=va.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function VC(n,e,t=!0){const r=$E(n);let o;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.Da()):o=await ME(r,e,t,!0),o}async function LC(n,e){const t=$E(n);await ME(t,e,!0,!1)}async function ME(n,e,t,r){const o=await tC(n.localStore,br(e)),a=o.targetId,c=n.sharedClientState.addLocalQueryTarget(a,t);let d;return r&&(d=await OC(n,e,a,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&AE(n.remoteStore,o),d}async function OC(n,e,t,r,o){n.Ka=(w,E,S)=>async function(D,N,B,U){let j=N.view.ma(B);j.ns&&(j=await Xv(D.localStore,N.query,!1).then(({documents:R})=>N.view.ma(R,j)));const K=U&&U.targetChanges.get(N.targetId),Z=U&&U.targetMismatches.get(N.targetId)!=null,ie=N.view.applyChanges(j,D.isPrimaryClient,K,Z);return ix(D,N.targetId,ie.wa),ie.snapshot}(n,w,E,S);const a=await Xv(n.localStore,e,!0),c=new CC(e,a.Ts),d=c.ma(a.documents),p=mc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",o),m=c.applyChanges(d,n.isPrimaryClient,p);ix(n,t,m.wa);const x=new RC(e,t,c);return n.Fa.set(e,x),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),m.snapshot}async function MC(n,e,t){const r=Ae(n),o=r.Fa.get(e),a=r.Ma.get(o.targetId);if(a.length>1)return r.Ma.set(o.targetId,a.filter(c=>!zh(c,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Lp(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),t&&Lm(r.remoteStore,o.targetId),Mp(r,o.targetId)}).catch(dc)):(Mp(r,o.targetId),await Lp(r.localStore,o.targetId,!0))}async function UC(n,e){const t=Ae(n),r=t.Fa.get(e),o=t.Ma.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Lm(t.remoteStore,r.targetId))}async function FC(n,e,t){const r=WC(n);try{const o=await function(c,d){const p=Ae(c),m=Pt.now(),x=d.reduce((S,V)=>S.add(V.key),Le());let w,E;return p.persistence.runTransaction("Locally write mutations","readwrite",S=>{let V=os(),D=Le();return p.cs.getEntries(S,x).next(N=>{V=N,V.forEach((B,U)=>{U.isValidDocument()||(D=D.add(B))})}).next(()=>p.localDocuments.getOverlayedDocuments(S,V)).next(N=>{w=N;const B=[];for(const U of d){const j=i2(U,w.get(U.key).overlayedDocument);j!=null&&B.push(new ro(U.key,j,Y_(j.value.mapValue),es.exists(!0)))}return p.mutationQueue.addMutationBatch(S,m,B,d)}).next(N=>{E=N;const B=N.applyToLocalDocumentSet(w,D);return p.documentOverlayCache.saveOverlays(S,N.batchId,B)})}).then(()=>({batchId:E.batchId,changes:oE(w)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(c,d,p){let m=c.Ba[c.currentUser.toKey()];m||(m=new ct(He)),m=m.insert(d,p),c.Ba[c.currentUser.toKey()]=m}(r,o.batchId,t),await yc(r,o.changes),await Qh(r.remoteStore)}catch(o){const a=Bm(o,"Failed to persist write");t.reject(a)}}async function UE(n,e){const t=Ae(n);try{const r=await J2(t.localStore,e);e.targetChanges.forEach((o,a)=>{const c=t.Na.get(a);c&&(Qe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?c.va=!0:o.modifiedDocuments.size>0?Qe(c.va):o.removedDocuments.size>0&&(Qe(c.va),c.va=!1))}),await yc(t,r,e)}catch(r){await dc(r)}}function sx(n,e,t){const r=Ae(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.Fa.forEach((a,c)=>{const d=c.view.Z_(e);d.snapshot&&o.push(d.snapshot)}),function(c,d){const p=Ae(c);p.onlineState=d;let m=!1;p.queries.forEach((x,w)=>{for(const E of w.j_)E.Z_(d)&&(m=!0)}),m&&zm(p)}(r.eventManager,e),o.length&&r.Ca.d_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function BC(n,e,t){const r=Ae(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Na.get(e),a=o&&o.key;if(a){let c=new ct(Ee.comparator);c=c.insert(a,Yt.newNoDocument(a,ke.min()));const d=Le().add(a),p=new Hh(ke.min(),new Map,new ct(He),c,d);await UE(r,p),r.Oa=r.Oa.remove(a),r.Na.delete(e),$m(r)}else await Lp(r.localStore,e,!1).then(()=>Mp(r,e,t)).catch(dc)}async function zC(n,e){const t=Ae(n),r=e.batch.batchId;try{const o=await X2(t.localStore,e);BE(t,r,null),FE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await yc(t,o)}catch(o){await dc(o)}}async function $C(n,e,t){const r=Ae(n);try{const o=await function(c,d){const p=Ae(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let x;return p.mutationQueue.lookupMutationBatch(m,d).next(w=>(Qe(w!==null),x=w.keys(),p.mutationQueue.removeMutationBatch(m,w))).next(()=>p.mutationQueue.performConsistencyCheck(m)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(m,x,d)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,x)).next(()=>p.localDocuments.getDocuments(m,x))})}(r.localStore,e);BE(r,e,t),FE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await yc(r,o)}catch(o){await dc(o)}}function FE(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function BE(n,e,t){const r=Ae(n);let o=r.Ba[r.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),r.Ba[r.currentUser.toKey()]=o}}function Mp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||zE(n,r)})}function zE(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(Lm(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),$m(n))}function ix(n,e,t){for(const r of t)r instanceof LE?(n.La.addReference(r.key,e),qC(n,r)):r instanceof OE?(ge("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||zE(n,r.key)):Ne()}function qC(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(ge("SyncEngine","New document in limbo: "+t),n.xa.add(r),$m(n))}function $m(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Ee(ht.fromString(e)),r=n.qa.next();n.Na.set(r,new jC(t)),n.Oa=n.Oa.insert(t,r),AE(n.remoteStore,new qs(br(Nm(t.path)),r,"TargetPurposeLimboResolution",Em.oe))}}async function yc(n,e,t){const r=Ae(n),o=[],a=[],c=[];r.Fa.isEmpty()||(r.Fa.forEach((d,p)=>{c.push(r.Ka(p,e,t).then(m=>{var x;if((m||t)&&r.isPrimaryClient){const w=m?!m.fromCache:(x=t?.targetChanges.get(p.targetId))===null||x===void 0?void 0:x.current;r.sharedClientState.updateQueryState(p.targetId,w?"current":"not-current")}if(m){o.push(m);const w=Vm.Wi(p.targetId,m);a.push(w)}}))}),await Promise.all(c),r.Ca.d_(o),await async function(p,m){const x=Ae(p);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>ne.forEach(m,E=>ne.forEach(E.$i,S=>x.persistence.referenceDelegate.addReference(w,E.targetId,S)).next(()=>ne.forEach(E.Ui,S=>x.persistence.referenceDelegate.removeReference(w,E.targetId,S)))))}catch(w){if(!fc(w))throw w;ge("LocalStore","Failed to update sequence numbers: "+w)}for(const w of m){const E=w.targetId;if(!w.fromCache){const S=x.os.get(E),V=S.snapshotVersion,D=S.withLastLimboFreeSnapshotVersion(V);x.os=x.os.insert(E,D)}}}(r.localStore,a))}async function GC(n,e){const t=Ae(n);if(!t.currentUser.isEqual(e)){ge("SyncEngine","User change. New user:",e.toKey());const r=await IE(t.localStore,e);t.currentUser=e,function(a,c){a.ka.forEach(d=>{d.forEach(p=>{p.reject(new _e(se.CANCELLED,c))})}),a.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await yc(t,r.hs)}}function HC(n,e){const t=Ae(n),r=t.Na.get(e);if(r&&r.va)return Le().add(r.key);{let o=Le();const a=t.Ma.get(e);if(!a)return o;for(const c of a){const d=t.Fa.get(c);o=o.unionWith(d.view.Va)}return o}}function $E(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=UE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=HC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BC.bind(null,e),e.Ca.d_=NC.bind(null,e.eventManager),e.Ca.$a=kC.bind(null,e.eventManager),e}function WC(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$C.bind(null,e),e}class _h{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return Y2(this.persistence,new K2,e.initialUser,this.serializer)}Ga(e){return new G2(Dm.Zr,this.serializer)}Wa(e){return new rC}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_h.provider={build:()=>new _h};class Up{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>sx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=GC.bind(null,this.syncEngine),await TC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new bC}()}createDatastore(e){const t=Wh(e.databaseInfo.databaseId),r=function(a){return new aC(a)}(e.databaseInfo);return function(a,c,d,p){return new uC(a,c,d,p)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,o,a,c,d){return new dC(r,o,a,c,d)}(this.localStore,this.datastore,e.asyncQueue,t=>sx(this.syncEngine,t,0),function(){return Zv.D()?new Zv:new sC}())}createSyncEngine(e,t){return function(o,a,c,d,p,m,x){const w=new DC(o,a,c,d,p,m);return x&&(w.Qa=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const a=Ae(o);ge("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await gc(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Up.provider={build:()=>new Up};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):is("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,t,r,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Qt.UNAUTHENTICATED,this.clientId=W_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async c=>{ge("FirestoreClient","Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(ge("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ks;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Bm(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Qf(n,e){n.asyncQueue.verifyOperationInProgress(),ge("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async o=>{r.isEqual(o)||(await IE(e.localStore,o),r=o)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function ox(n,e){n.asyncQueue.verifyOperationInProgress();const t=await YC(n);ge("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>ex(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,o)=>ex(e.remoteStore,o)),n._onlineComponents=e}async function YC(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ge("FirestoreClient","Using user provided OfflineComponentProvider");try{await Qf(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===se.FAILED_PRECONDITION||o.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;pa("Error using user provided cache. Falling back to memory cache: "+t),await Qf(n,new _h)}}else ge("FirestoreClient","Using default OfflineComponentProvider"),await Qf(n,new _h);return n._offlineComponents}async function qE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ge("FirestoreClient","Using user provided OnlineComponentProvider"),await ox(n,n._uninitializedComponentsProvider._online)):(ge("FirestoreClient","Using default OnlineComponentProvider"),await ox(n,new Up))),n._onlineComponents}function XC(n){return qE(n).then(e=>e.syncEngine)}async function JC(n){const e=await qE(n),t=e.eventManager;return t.onListen=VC.bind(null,e.syncEngine),t.onUnlisten=MC.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=LC.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=UC.bind(null,e.syncEngine),t}function ZC(n,e,t={}){const r=new Ks;return n.asyncQueue.enqueueAndForget(async()=>function(a,c,d,p,m){const x=new KC({next:E=>{x.Za(),c.enqueueAndForget(()=>PC(a,w));const S=E.docs.has(d);!S&&E.fromCache?m.reject(new _e(se.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&E.fromCache&&p&&p.source==="server"?m.reject(new _e(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(E)},error:E=>m.reject(E)}),w=new AC(Nm(d.path),x,{includeMetadataChanges:!0,_a:!0});return IC(a,w)}(await JC(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(n,e,t){if(!t)throw new _e(se.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function tR(n,e,t,r){if(e===!0&&r===!0)throw new _e(se.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function lx(n){if(!Ee.isDocumentKey(n))throw new _e(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function qm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ne()}function tc(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new _e(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=qm(n);throw new _e(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new _e(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new _e(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new _e(se.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new _e(se.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new _e(se.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gm{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cx({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cx(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new fA;switch(r.type){case"firstParty":return new yA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new _e(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=ax.get(t);r&&(ge("ComponentProvider","Removing Datastore"),ax.delete(t),r.terminate())}(this),Promise.resolve()}}function nR(n,e,t,r={}){var o;const a=(n=tc(n,Gm))._getSettings(),c=`${e}:${t}`;if(a.host!=="firestore.googleapis.com"&&a.host!==c&&pa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:c,ssl:!1})),r.mockUserToken){let d,p;if(typeof r.mockUserToken=="string")d=r.mockUserToken,p=Qt.MOCK_USER;else{d=II(r.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new _e(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Qt(m)}n._authCredentials=new pA(new H_(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Hm(this.firestore,e,this._query)}}class Un{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Un(this.firestore,e,this._key)}}class nc extends Hm{constructor(e,t,r){super(e,t,Nm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Un(this.firestore,null,new Ee(e))}withConverter(e){return new nc(this.firestore,e,this._path)}}function ux(n,e,...t){if(n=Nt(n),arguments.length===1&&(e=W_.newId()),eR("doc","path",e),n instanceof Gm){const r=ht.fromString(e,...t);return lx(r),new Un(n,null,new Ee(r))}{if(!(n instanceof Un||n instanceof nc))throw new _e(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ht.fromString(e,...t));return lx(r),new Un(n.firestore,n instanceof nc?n.converter:null,new Ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new NE(this,"async_queue_retry"),this.Vu=()=>{const r=Kf();r&&ge("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=Kf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Kf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Ks;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!fc(e))throw e;ge("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const o=function(c){let d=c.message||"";return c.stack&&(d=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),d}(r);throw is("INTERNAL UNHANDLED ERROR: ",o),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const o=Fm.createAndSchedule(this,e,t,r,a=>this.yu(a));return this.Tu.push(o),o}fu(){this.Eu&&Ne()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class Wm extends Gm{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new hx,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new hx(e),this._firestoreClient=void 0,await e}}}function rR(n,e){const t=typeof n=="object"?n:hm(),r=typeof n=="string"?n:"(default)",o=to(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const a=SI("firestore");a&&nR(o,...a)}return o}function HE(n){if(n._terminated)throw new _e(se.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||sR(n),n._firestoreClient}function sR(n){var e,t,r;const o=n._freezeSettings(),a=function(d,p,m,x){return new AA(d,p,m,x.host,x.ssl,x.experimentalForceLongPolling,x.experimentalAutoDetectLongPolling,GE(x.experimentalLongPollingOptions),x.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new QC(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(d){const p=d?._online.build();return{_offline:d?._offline.build(p),_online:p}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wa(zt.fromBase64String(e))}catch(t){throw new _e(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new wa(zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new _e(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,o){if(r.length!==o.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==o[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR=/^__.*__$/;class oR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ro(e,this.data,this.fieldMask,t,this.fieldTransforms):new pc(e,this.data,t,this.fieldTransforms)}}function KE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne()}}class Xm{constructor(e,t,r,o,a,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Xm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:r,xu:!1});return o.Ou(e),o}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:r,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Eh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(KE(this.Cu)&&iR.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class aR{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Wh(e)}Qu(e,t,r,o=!1){return new Xm({Cu:e,methodName:t,qu:r,path:Ft.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lR(n){const e=n._freezeSettings(),t=Wh(n._databaseId);return new aR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function cR(n,e,t,r,o,a={}){const c=n.Qu(a.merge||a.mergeFields?2:0,e,t,o);JE("Data must be an object, but it was:",c,r);const d=YE(r,c);let p,m;if(a.merge)p=new rr(c.fieldMask),m=c.fieldTransforms;else if(a.mergeFields){const x=[];for(const w of a.mergeFields){const E=uR(e,w,t);if(!c.contains(E))throw new _e(se.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);dR(x,E)||x.push(E)}p=new rr(x),m=c.fieldTransforms.filter(w=>p.covers(w.field))}else p=null,m=c.fieldTransforms;return new oR(new On(d),p,m)}function QE(n,e){if(XE(n=Nt(n)))return JE("Unsupported field value:",e,n),YE(n,e);if(n instanceof WE)return function(r,o){if(!KE(o.Cu))throw o.Bu(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(o);a&&o.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,o){const a=[];let c=0;for(const d of r){let p=QE(d,o.Lu(c));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),c++}return{arrayValue:{values:a}}}(n,e)}return function(r,o){if((r=Nt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ZA(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Pt.fromDate(r);return{timestampValue:xh(o.serializer,a)}}if(r instanceof Pt){const a=new Pt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:xh(o.serializer,a)}}if(r instanceof Qm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof wa)return{bytesValue:xE(o.serializer,r._byteString)};if(r instanceof Un){const a=o.databaseId,c=r.firestore._databaseId;if(!c.isEqual(a))throw o.Bu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Rm(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Ym)return function(c,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw d.Bu("VectorValues must only contain numeric values.");return km(d.serializer,p)})}}}}}}(r,o);throw o.Bu(`Unsupported field value: ${qm(r)}`)}(n,e)}function YE(n,e){const t={};return K_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pa(n,(r,o)=>{const a=QE(o,e.Mu(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function XE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Pt||n instanceof Qm||n instanceof wa||n instanceof Un||n instanceof WE||n instanceof Ym)}function JE(n,e,t){if(!XE(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const r=qm(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function uR(n,e,t){if((e=Nt(e))instanceof Km)return e._internalPath;if(typeof e=="string")return ZE(n,e);throw Eh("Field path arguments must be of type string or ",n,!1,void 0,t)}const hR=new RegExp("[~\\*/\\[\\]]");function ZE(n,e,t){if(e.search(hR)>=0)throw Eh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Km(...e.split("."))._internalPath}catch{throw Eh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Eh(n,e,t,r,o){const a=r&&!r.isEmpty(),c=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(a||c)&&(p+=" (found",a&&(p+=` in field ${r}`),c&&(p+=` in document ${o}`),p+=")"),new _e(se.INVALID_ARGUMENT,d+n+p)}function dR(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e,t,r,o,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Un(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new fR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(tT("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class fR extends eT{data(){return super.data()}}function tT(n,e){return typeof e=="string"?ZE(n,e):e instanceof Km?e._internalPath:e._delegate._internalPath}class pR{convertValue(e,t="none"){switch(Yi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Qi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Pa(e,(o,a)=>{r[o]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,o;const a=(o=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(c=>pt(c.doubleValue));return new Ym(a)}convertGeoPoint(e){return new Qm(pt(e.latitude),pt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Sm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Yl(e));default:return null}}convertTimestamp(e){const t=Zs(e);return new Pt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ht.fromString(e);Qe(bE(r));const o=new Xl(r.get(1),r.get(3)),a=new Ee(r.popFirst(5));return o.isEqual(t)||is(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class nT extends eT{constructor(e,t,r,o,a,c){super(e,t,r,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new yR(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(tT("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class yR extends nT{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(n){n=tc(n,Un);const e=tc(n.firestore,Wm);return ZC(HE(e),n._key).then(t=>ER(e,n,t))}class xR extends pR{constructor(e){super(),this.firestore=e}convertBytes(e){return new wa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Un(this.firestore,null,t)}}function wR(n,e,t){n=tc(n,Un);const r=tc(n.firestore,Wm),o=mR(n.converter,e);return _R(r,[cR(lR(r),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,es.none())])}function _R(n,e){return function(r,o){const a=new Ks;return r.asyncQueue.enqueueAndForget(async()=>FC(await XC(r),o,a)),a.promise}(HE(n),e)}function ER(n,e,t){const r=t.docs.get(e._key),o=new xR(n);return new nT(n,o,e._key,r,new gR(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Ia=o})(ba),Nr(new ir("firestore",(r,{instanceIdentifier:o,options:a})=>{const c=r.getProvider("app").getImmediate(),d=new Wm(new mA(r.getProvider("auth-internal")),new xA(r.getProvider("app-check-internal")),function(m,x){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new _e(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xl(m.options.projectId,x)}(c,o),c);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d},"PUBLIC").setMultipleInstances(!0)),Mn(Av,"4.7.3",e),Mn(Av,"4.7.3","esm2017")})();var TR="firebase",SR="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mn(TR,SR,"app");const rT="@firebase/installations",Jm="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT=1e4,iT=`w:${Jm}`,oT="FIS_v2",bR="https://firebaseinstallations.googleapis.com/v1",IR=3600*1e3,PR="installations",NR="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Xi=new eo(PR,NR,kR);function aT(n){return n instanceof lr&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT({projectId:n}){return`${bR}/projects/${n}/installations`}function cT(n){return{token:n.token,requestStatus:2,expiresIn:CR(n.expiresIn),creationTime:Date.now()}}async function uT(n,e){const r=(await e.json()).error;return Xi.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function hT({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function AR(n,{refreshToken:e}){const t=hT(n);return t.append("Authorization",RR(e)),t}async function dT(n){const e=await n();return e.status>=500&&e.status<600?n():e}function CR(n){return Number(n.replace("s","000"))}function RR(n){return`${oT} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jR({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=lT(n),o=hT(n),a=e.getImmediate({optional:!0});if(a){const m=await a.getHeartbeatsHeader();m&&o.append("x-firebase-client",m)}const c={fid:t,authVersion:oT,appId:n.appId,sdkVersion:iT},d={method:"POST",headers:o,body:JSON.stringify(c)},p=await dT(()=>fetch(r,d));if(p.ok){const m=await p.json();return{fid:m.fid||t,registrationStatus:2,refreshToken:m.refreshToken,authToken:cT(m.authToken)}}else throw await uT("Create Installation",p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR=/^[cdef][\w-]{21}$/,Fp="";function LR(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=OR(n);return VR.test(t)?t:Fp}catch{return Fp}}function OR(n){return DR(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT=new Map;function mT(n,e){const t=Yh(n);gT(t,e),MR(t,e)}function gT(n,e){const t=pT.get(n);if(t)for(const r of t)r(e)}function MR(n,e){const t=UR();t&&t.postMessage({key:n,fid:e}),FR()}let Bi=null;function UR(){return!Bi&&"BroadcastChannel"in self&&(Bi=new BroadcastChannel("[Firebase] FID Change"),Bi.onmessage=n=>{gT(n.data.key,n.data.fid)}),Bi}function FR(){pT.size===0&&Bi&&(Bi.close(),Bi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR="firebase-installations-database",zR=1,Ji="firebase-installations-store";let Yf=null;function Zm(){return Yf||(Yf=e_(BR,zR,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Ji)}}})),Yf}async function Th(n,e){const t=Yh(n),o=(await Zm()).transaction(Ji,"readwrite"),a=o.objectStore(Ji),c=await a.get(t);return await a.put(e,t),await o.done,(!c||c.fid!==e.fid)&&mT(n,e.fid),e}async function yT(n){const e=Yh(n),r=(await Zm()).transaction(Ji,"readwrite");await r.objectStore(Ji).delete(e),await r.done}async function Xh(n,e){const t=Yh(n),o=(await Zm()).transaction(Ji,"readwrite"),a=o.objectStore(Ji),c=await a.get(t),d=e(c);return d===void 0?await a.delete(t):await a.put(d,t),await o.done,d&&(!c||c.fid!==d.fid)&&mT(n,d.fid),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eg(n){let e;const t=await Xh(n.appConfig,r=>{const o=$R(r),a=qR(n,o);return e=a.registrationPromise,a.installationEntry});return t.fid===Fp?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function $R(n){const e=n||{fid:LR(),registrationStatus:0};return vT(e)}function qR(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(Xi.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=GR(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:HR(n)}:{installationEntry:e}}async function GR(n,e){try{const t=await jR(n,e);return Th(n.appConfig,t)}catch(t){throw aT(t)&&t.customData.serverCode===409?await yT(n.appConfig):await Th(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function HR(n){let e=await dx(n.appConfig);for(;e.registrationStatus===1;)await fT(100),e=await dx(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await eg(n);return r||t}return e}function dx(n){return Xh(n,e=>{if(!e)throw Xi.create("installation-not-found");return vT(e)})}function vT(n){return WR(n)?{fid:n.fid,registrationStatus:0}:n}function WR(n){return n.registrationStatus===1&&n.registrationTime+sT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KR({appConfig:n,heartbeatServiceProvider:e},t){const r=QR(n,t),o=AR(n,t),a=e.getImmediate({optional:!0});if(a){const m=await a.getHeartbeatsHeader();m&&o.append("x-firebase-client",m)}const c={installation:{sdkVersion:iT,appId:n.appId}},d={method:"POST",headers:o,body:JSON.stringify(c)},p=await dT(()=>fetch(r,d));if(p.ok){const m=await p.json();return cT(m)}else throw await uT("Generate Auth Token",p)}function QR(n,{fid:e}){return`${lT(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tg(n,e=!1){let t;const r=await Xh(n.appConfig,a=>{if(!xT(a))throw Xi.create("not-registered");const c=a.authToken;if(!e&&JR(c))return a;if(c.requestStatus===1)return t=YR(n,e),a;{if(!navigator.onLine)throw Xi.create("app-offline");const d=ej(a);return t=XR(n,d),d}});return t?await t:r.authToken}async function YR(n,e){let t=await fx(n.appConfig);for(;t.authToken.requestStatus===1;)await fT(100),t=await fx(n.appConfig);const r=t.authToken;return r.requestStatus===0?tg(n,e):r}function fx(n){return Xh(n,e=>{if(!xT(e))throw Xi.create("not-registered");const t=e.authToken;return tj(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function XR(n,e){try{const t=await KR(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await Th(n.appConfig,r),t}catch(t){if(aT(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await yT(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Th(n.appConfig,r)}throw t}}function xT(n){return n!==void 0&&n.registrationStatus===2}function JR(n){return n.requestStatus===2&&!ZR(n)}function ZR(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+IR}function ej(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function tj(n){return n.requestStatus===1&&n.requestTime+sT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nj(n){const e=n,{installationEntry:t,registrationPromise:r}=await eg(e);return r?r.catch(console.error):tg(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rj(n,e=!1){const t=n;return await sj(t),(await tg(t,e)).token}async function sj(n){const{registrationPromise:e}=await eg(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ij(n){if(!n||!n.options)throw Xf("App Configuration");if(!n.name)throw Xf("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Xf(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Xf(n){return Xi.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT="installations",oj="installations-internal",aj=n=>{const e=n.getProvider("app").getImmediate(),t=ij(e),r=to(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},lj=n=>{const e=n.getProvider("app").getImmediate(),t=to(e,wT).getImmediate();return{getId:()=>nj(t),getToken:o=>rj(t,o)}};function cj(){Nr(new ir(wT,aj,"PUBLIC")),Nr(new ir(oj,lj,"PRIVATE"))}cj();Mn(rT,Jm);Mn(rT,Jm,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh="analytics",uj="firebase_id",hj="origin",dj=60*1e3,fj="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ng="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn=new Lh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pj={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},En=new eo("analytics","Analytics",pj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mj(n){if(!n.startsWith(ng)){const e=En.create("invalid-gtag-resource",{gtagURL:n});return dn.warn(e.message),""}return n}function _T(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function gj(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function yj(n,e){const t=gj("firebase-js-sdk-policy",{createScriptURL:mj}),r=document.createElement("script"),o=`${ng}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(o):o,r.async=!0,document.head.appendChild(r)}function vj(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function xj(n,e,t,r,o,a){const c=r[o];try{if(c)await e[c];else{const p=(await _T(t)).find(m=>m.measurementId===o);p&&await e[p.appId]}}catch(d){dn.error(d)}n("config",o,a)}async function wj(n,e,t,r,o){try{let a=[];if(o&&o.send_to){let c=o.send_to;Array.isArray(c)||(c=[c]);const d=await _T(t);for(const p of c){const m=d.find(w=>w.measurementId===p),x=m&&e[m.appId];if(x)a.push(x);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),n("event",r,o||{})}catch(a){dn.error(a)}}function _j(n,e,t,r){async function o(a,...c){try{if(a==="event"){const[d,p]=c;await wj(n,e,t,d,p)}else if(a==="config"){const[d,p]=c;await xj(n,e,t,r,d,p)}else if(a==="consent"){const[d,p]=c;n("consent",d,p)}else if(a==="get"){const[d,p,m]=c;n("get",d,p,m)}else if(a==="set"){const[d]=c;n("set",d)}else n(a,...c)}catch(d){dn.error(d)}}return o}function Ej(n,e,t,r,o){let a=function(...c){window[r].push(arguments)};return window[o]&&typeof window[o]=="function"&&(a=window[o]),window[o]=_j(a,n,e,t),{gtagCore:a,wrappedGtag:window[o]}}function Tj(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(ng)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sj=30,bj=1e3;class Ij{constructor(e={},t=bj){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const ET=new Ij;function Pj(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function Nj(n){var e;const{appId:t,apiKey:r}=n,o={method:"GET",headers:Pj(r)},a=fj.replace("{app-id}",t),c=await fetch(a,o);if(c.status!==200&&c.status!==304){let d="";try{const p=await c.json();!((e=p.error)===null||e===void 0)&&e.message&&(d=p.error.message)}catch{}throw En.create("config-fetch-failed",{httpStatus:c.status,responseMessage:d})}return c.json()}async function kj(n,e=ET,t){const{appId:r,apiKey:o,measurementId:a}=n.options;if(!r)throw En.create("no-app-id");if(!o){if(a)return{measurementId:a,appId:r};throw En.create("no-api-key")}const c=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new Rj;return setTimeout(async()=>{d.abort()},dj),TT({appId:r,apiKey:o,measurementId:a},c,d,e)}async function TT(n,{throttleEndTimeMillis:e,backoffCount:t},r,o=ET){var a;const{appId:c,measurementId:d}=n;try{await Aj(r,e)}catch(p){if(d)return dn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:c,measurementId:d};throw p}try{const p=await Nj(n);return o.deleteThrottleMetadata(c),p}catch(p){const m=p;if(!Cj(m)){if(o.deleteThrottleMetadata(c),d)return dn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:c,measurementId:d};throw p}const x=Number((a=m?.customData)===null||a===void 0?void 0:a.httpStatus)===503?ev(t,o.intervalMillis,Sj):ev(t,o.intervalMillis),w={throttleEndTimeMillis:Date.now()+x,backoffCount:t+1};return o.setThrottleMetadata(c,w),dn.debug(`Calling attemptFetch again in ${x} millis`),TT(n,w,r,o)}}function Aj(n,e){return new Promise((t,r)=>{const o=Math.max(e-Date.now(),0),a=setTimeout(t,o);n.addEventListener(()=>{clearTimeout(a),r(En.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Cj(n){if(!(n instanceof lr)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class Rj{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function jj(n,e,t,r,o){if(o&&o.global){n("event",t,r);return}else{const a=await e,c=Object.assign(Object.assign({},r),{send_to:a});n("event",t,c)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dj(){if(Yw())try{await Xw()}catch(n){return dn.warn(En.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return dn.warn(En.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Vj(n,e,t,r,o,a,c){var d;const p=kj(n);p.then(S=>{t[S.measurementId]=S.appId,n.options.measurementId&&S.measurementId!==n.options.measurementId&&dn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${S.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(S=>dn.error(S)),e.push(p);const m=Dj().then(S=>{if(S)return r.getId()}),[x,w]=await Promise.all([p,m]);Tj(a)||yj(a,x.measurementId),o("js",new Date);const E=(d=c?.config)!==null&&d!==void 0?d:{};return E[hj]="firebase",E.update=!0,w!=null&&(E[uj]=w),o("config",x.measurementId,E),x.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e){this.app=e}_delete(){return delete Ul[this.app.options.appId],Promise.resolve()}}let Ul={},px=[];const mx={};let Jf="dataLayer",Oj="gtag",gx,ST,yx=!1;function Mj(){const n=[];if(Qw()&&n.push("This is a browser extension environment."),jI()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,o)=>`(${o+1}) ${r}`).join(" "),t=En.create("invalid-analytics-context",{errorInfo:e});dn.warn(t.message)}}function Uj(n,e,t){Mj();const r=n.options.appId;if(!r)throw En.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)dn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw En.create("no-api-key");if(Ul[r]!=null)throw En.create("already-exists",{id:r});if(!yx){vj(Jf);const{wrappedGtag:a,gtagCore:c}=Ej(Ul,px,mx,Jf,Oj);ST=a,gx=c,yx=!0}return Ul[r]=Vj(n,px,mx,e,gx,Jf,t),new Lj(n)}function Fj(n=hm()){n=Nt(n);const e=to(n,Sh);return e.isInitialized()?e.getImmediate():Bj(n)}function Bj(n,e={}){const t=to(n,Sh);if(t.isInitialized()){const o=t.getImmediate();if(Hl(e,t.getOptions()))return o;throw En.create("already-initialized")}return t.initialize({options:e})}function zj(n,e,t,r){n=Nt(n),jj(ST,Ul[n.app.options.appId],e,t,r).catch(o=>dn.error(o))}const vx="@firebase/analytics",xx="0.10.8";function $j(){Nr(new ir(Sh,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return Uj(r,o,t)},"PUBLIC")),Nr(new ir("analytics-internal",n,"PRIVATE")),Mn(vx,xx),Mn(vx,xx,"esm2017");function n(e){try{const t=e.getProvider(Sh).getImmediate();return{logEvent:(r,o,a)=>zj(t,r,o,a)}}catch(t){throw En.create("interop-component-reg-failed",{reason:t})}}}$j();const qj={apiKey:"AIzaSyDSplfIeCdHaXnAgH1WnmaY78uINeUHHeA",authDomain:"glyphmart.firebaseapp.com",projectId:"glyphmart",storageBucket:"glyphmart.firebasestorage.app",messagingSenderId:"582834377960",appId:"1:582834377960:web:2f844d65c9c0f92f93255d",measurementId:"G-1RC8D5PY66"},rg=t_(qj),ra=hA(rg),wx=rR(rg);Fj(rg);const bT=C.createContext(),cr=()=>{const n=C.useContext(bT);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},Gj=({children:n})=>{const[e,t]=C.useState(null),[r,o]=C.useState(!0),[a,c]=C.useState(null),d=async(E,S,V,D)=>{const B=(await HN(ra,E,S)).user;return await Sp(B,{displayName:D}),await wR(ux(wx,"users",B.uid),{uid:B.uid,email:E,username:V,displayName:D,createdAt:new Date,glyphsCount:0,bio:"",website:"",location:""}),B},p=(E,S)=>WN(ra,E,S),m=()=>ek(ra),x=async E=>{try{const S=await vR(ux(wx,"users",E));S.exists()&&c(S.data())}catch(S){console.error("Error fetching user profile:",S)}};C.useEffect(()=>ZN(ra,S=>{t(S),S?x(S.uid):c(null),o(!1)}),[]);const w={currentUser:e,userProfile:a,signup:d,signin:p,logout:m,fetchUserProfile:x};return h.jsx(bT.Provider,{value:w,children:!r&&n})};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Hj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Pe=(n,e)=>{const t=C.forwardRef(({color:r="currentColor",size:o=24,strokeWidth:a=2,absoluteStrokeWidth:c,className:d="",children:p,...m},x)=>C.createElement("svg",{ref:x,...Hj,width:o,height:o,stroke:r,strokeWidth:c?Number(a)*24/Number(o):a,className:["lucide",`lucide-${Wj(n)}`,d].join(" "),...m},[...e.map(([w,E])=>C.createElement(w,E)),...Array.isArray(p)?p:[p]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bp=Pe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=Pe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=Pe("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=Pe("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=Pe("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sg=Pe("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=Pe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=Pe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IT=Pe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=Pe("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=Pe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=Pe("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=Pe("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=Pe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rh=Pe("FileImage",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["circle",{cx:"10",cy:"13",r:"2",key:"6v46hv"}],["path",{d:"m20 17-1.09-1.09a2 2 0 0 0-2.82 0L10 22",key:"17vly1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PT=Pe("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eD=Pe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=Pe("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tD=Pe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=Pe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=Pe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nD=Pe("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=Pe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ex=Pe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ig=Pe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rD=Pe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=Pe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $p=Pe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=Pe("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=Pe("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kT=Pe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=Pe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=Pe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qp=Pe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=Pe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lD=Pe("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=Pe("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cD=Pe("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=Pe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AT=Pe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gp=Pe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=Pe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=Pe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bx=Pe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CT=Pe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=Pe("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),RT=C.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),Jh=C.createContext({}),Zh=C.createContext(null),ed=typeof document<"u",og=ed?C.useLayoutEffect:C.useEffect,jT=C.createContext({strict:!1}),ag=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),dD="framerAppearId",DT="data-"+ag(dD);function fD(n,e,t,r){const{visualElement:o}=C.useContext(Jh),a=C.useContext(jT),c=C.useContext(Zh),d=C.useContext(RT).reducedMotion,p=C.useRef();r=r||a.renderer,!p.current&&r&&(p.current=r(n,{visualState:e,parent:o,props:t,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const m=p.current;C.useInsertionEffect(()=>{m&&m.update(t,c)});const x=C.useRef(!!(t[DT]&&!window.HandoffComplete));return og(()=>{m&&(m.render(),x.current&&m.animationState&&m.animationState.animateChanges())}),C.useEffect(()=>{m&&(m.updateFeatures(),!x.current&&m.animationState&&m.animationState.animateChanges(),x.current&&(x.current=!1,window.HandoffComplete=!0))}),m}function ia(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function pD(n,e,t){return C.useCallback(r=>{r&&n.mount&&n.mount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):ia(t)&&(t.current=r))},[e])}function rc(n){return typeof n=="string"||Array.isArray(n)}function td(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const lg=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],cg=["initial",...lg];function nd(n){return td(n.animate)||cg.some(e=>rc(n[e]))}function VT(n){return!!(nd(n)||n.variants)}function mD(n,e){if(nd(n)){const{initial:t,animate:r}=n;return{initial:t===!1||rc(t)?t:void 0,animate:rc(r)?r:void 0}}return n.inherit!==!1?e:{}}function gD(n){const{initial:e,animate:t}=mD(n,C.useContext(Jh));return C.useMemo(()=>({initial:e,animate:t}),[Ix(e),Ix(t)])}function Ix(n){return Array.isArray(n)?n.join(" "):n}const Px={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},sc={};for(const n in Px)sc[n]={isEnabled:e=>Px[n].some(t=>!!e[t])};function yD(n){for(const e in n)sc[e]={...sc[e],...n[e]}}const ug=C.createContext({}),LT=C.createContext({}),vD=Symbol.for("motionComponentSymbol");function xD({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:o}){n&&yD(n);function a(d,p){let m;const x={...C.useContext(RT),...d,layoutId:wD(d)},{isStatic:w}=x,E=gD(d),S=r(d,w);if(!w&&ed){E.visualElement=fD(o,S,x,e);const V=C.useContext(LT),D=C.useContext(jT).strict;E.visualElement&&(m=E.visualElement.loadFeatures(x,D,n,V))}return C.createElement(Jh.Provider,{value:E},m&&E.visualElement?C.createElement(m,{visualElement:E.visualElement,...x}):null,t(o,d,pD(S,E.visualElement,p),S,w,E.visualElement))}const c=C.forwardRef(a);return c[vD]=o,c}function wD({layoutId:n}){const e=C.useContext(ug).id;return e&&n!==void 0?e+"-"+n:n}function _D(n){function e(r,o={}){return xD(n(r,o))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(r,o)=>(t.has(o)||t.set(o,e(o)),t.get(o))})}const ED=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function hg(n){return typeof n!="string"||n.includes("-")?!1:!!(ED.indexOf(n)>-1||/[A-Z]/.test(n))}const bh={};function TD(n){Object.assign(bh,n)}const vc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],io=new Set(vc);function OT(n,{layout:e,layoutId:t}){return io.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!bh[n]||n==="opacity")}const pn=n=>!!(n&&n.getVelocity),SD={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},bD=vc.length;function ID(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},r,o){let a="";for(let c=0;c<bD;c++){const d=vc[c];if(n[d]!==void 0){const p=SD[d]||d;a+=`${p}(${n[d]}) `}}return e&&!n.z&&(a+="translateZ(0)"),a=a.trim(),o?a=o(n,r?"":a):t&&r&&(a="none"),a}const MT=n=>e=>typeof e=="string"&&e.startsWith(n),UT=MT("--"),Hp=MT("var(--"),PD=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,ND=(n,e)=>e&&typeof n=="number"?e.transform(n):n,ti=(n,e,t)=>Math.min(Math.max(t,n),e),oo={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Fl={...oo,transform:n=>ti(0,1,n)},$u={...oo,default:1},Bl=n=>Math.round(n*1e5)/1e5,rd=/(-)?([\d]*\.?[\d])+/g,FT=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,kD=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function xc(n){return typeof n=="string"}const wc=n=>({test:e=>xc(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Ls=wc("deg"),Pr=wc("%"),Te=wc("px"),AD=wc("vh"),CD=wc("vw"),Nx={...Pr,parse:n=>Pr.parse(n)/100,transform:n=>Pr.transform(n*100)},kx={...oo,transform:Math.round},BT={borderWidth:Te,borderTopWidth:Te,borderRightWidth:Te,borderBottomWidth:Te,borderLeftWidth:Te,borderRadius:Te,radius:Te,borderTopLeftRadius:Te,borderTopRightRadius:Te,borderBottomRightRadius:Te,borderBottomLeftRadius:Te,width:Te,maxWidth:Te,height:Te,maxHeight:Te,size:Te,top:Te,right:Te,bottom:Te,left:Te,padding:Te,paddingTop:Te,paddingRight:Te,paddingBottom:Te,paddingLeft:Te,margin:Te,marginTop:Te,marginRight:Te,marginBottom:Te,marginLeft:Te,rotate:Ls,rotateX:Ls,rotateY:Ls,rotateZ:Ls,scale:$u,scaleX:$u,scaleY:$u,scaleZ:$u,skew:Ls,skewX:Ls,skewY:Ls,distance:Te,translateX:Te,translateY:Te,translateZ:Te,x:Te,y:Te,z:Te,perspective:Te,transformPerspective:Te,opacity:Fl,originX:Nx,originY:Nx,originZ:Te,zIndex:kx,fillOpacity:Fl,strokeOpacity:Fl,numOctaves:kx};function dg(n,e,t,r){const{style:o,vars:a,transform:c,transformOrigin:d}=n;let p=!1,m=!1,x=!0;for(const w in e){const E=e[w];if(UT(w)){a[w]=E;continue}const S=BT[w],V=ND(E,S);if(io.has(w)){if(p=!0,c[w]=V,!x)continue;E!==(S.default||0)&&(x=!1)}else w.startsWith("origin")?(m=!0,d[w]=V):o[w]=V}if(e.transform||(p||r?o.transform=ID(n.transform,t,x,r):o.transform&&(o.transform="none")),m){const{originX:w="50%",originY:E="50%",originZ:S=0}=d;o.transformOrigin=`${w} ${E} ${S}`}}const fg=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function zT(n,e,t){for(const r in e)!pn(e[r])&&!OT(r,t)&&(n[r]=e[r])}function RD({transformTemplate:n},e,t){return C.useMemo(()=>{const r=fg();return dg(r,e,{enableHardwareAcceleration:!t},n),Object.assign({},r.vars,r.style)},[e])}function jD(n,e,t){const r=n.style||{},o={};return zT(o,r,n),Object.assign(o,RD(n,e,t)),n.transformValues?n.transformValues(o):o}function DD(n,e,t){const r={},o=jD(n,e,t);return n.drag&&n.dragListener!==!1&&(r.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(r.tabIndex=0),r.style=o,r}const VD=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ih(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||VD.has(n)}let $T=n=>!Ih(n);function LD(n){n&&($T=e=>e.startsWith("on")?!Ih(e):n(e))}try{LD(require("@emotion/is-prop-valid").default)}catch{}function OD(n,e,t){const r={};for(const o in n)o==="values"&&typeof n.values=="object"||($T(o)||t===!0&&Ih(o)||!e&&!Ih(o)||n.draggable&&o.startsWith("onDrag"))&&(r[o]=n[o]);return r}function Ax(n,e,t){return typeof n=="string"?n:Te.transform(e+t*n)}function MD(n,e,t){const r=Ax(e,n.x,n.width),o=Ax(t,n.y,n.height);return`${r} ${o}`}const UD={offset:"stroke-dashoffset",array:"stroke-dasharray"},FD={offset:"strokeDashoffset",array:"strokeDasharray"};function BD(n,e,t=1,r=0,o=!0){n.pathLength=1;const a=o?UD:FD;n[a.offset]=Te.transform(-r);const c=Te.transform(e),d=Te.transform(t);n[a.array]=`${c} ${d}`}function pg(n,{attrX:e,attrY:t,attrScale:r,originX:o,originY:a,pathLength:c,pathSpacing:d=1,pathOffset:p=0,...m},x,w,E){if(dg(n,m,x,E),w){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:S,style:V,dimensions:D}=n;S.transform&&(D&&(V.transform=S.transform),delete S.transform),D&&(o!==void 0||a!==void 0||V.transform)&&(V.transformOrigin=MD(D,o!==void 0?o:.5,a!==void 0?a:.5)),e!==void 0&&(S.x=e),t!==void 0&&(S.y=t),r!==void 0&&(S.scale=r),c!==void 0&&BD(S,c,d,p,!1)}const qT=()=>({...fg(),attrs:{}}),mg=n=>typeof n=="string"&&n.toLowerCase()==="svg";function zD(n,e,t,r){const o=C.useMemo(()=>{const a=qT();return pg(a,e,{enableHardwareAcceleration:!1},mg(r),n.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(n.style){const a={};zT(a,n.style,n),o.style={...a,...o.style}}return o}function $D(n=!1){return(t,r,o,{latestValues:a},c)=>{const p=(hg(t)?zD:DD)(r,a,c,t),x={...OD(r,typeof t=="string",n),...p,ref:o},{children:w}=r,E=C.useMemo(()=>pn(w)?w.get():w,[w]);return C.createElement(t,{...x,children:E})}}function GT(n,{style:e,vars:t},r,o){Object.assign(n.style,e,o&&o.getProjectionStyles(r));for(const a in t)n.style.setProperty(a,t[a])}const HT=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function WT(n,e,t,r){GT(n,e,void 0,r);for(const o in e.attrs)n.setAttribute(HT.has(o)?o:ag(o),e.attrs[o])}function gg(n,e){const{style:t}=n,r={};for(const o in t)(pn(t[o])||e.style&&pn(e.style[o])||OT(o,n))&&(r[o]=t[o]);return r}function KT(n,e){const t=gg(n,e);for(const r in n)if(pn(n[r])||pn(e[r])){const o=vc.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;t[o]=n[r]}return t}function yg(n,e,t,r={},o={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,o)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,o)),e}function QT(n){const e=C.useRef(null);return e.current===null&&(e.current=n()),e.current}const Ph=n=>Array.isArray(n),qD=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),GD=n=>Ph(n)?n[n.length-1]||0:n;function sh(n){const e=pn(n)?n.get():n;return qD(e)?e.toValue():e}function HD({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},r,o,a){const c={latestValues:WD(r,o,a,n),renderState:e()};return t&&(c.mount=d=>t(r,d,c)),c}const YT=n=>(e,t)=>{const r=C.useContext(Jh),o=C.useContext(Zh),a=()=>HD(n,e,r,o);return t?a():QT(a)};function WD(n,e,t,r){const o={},a=r(n,{});for(const E in a)o[E]=sh(a[E]);let{initial:c,animate:d}=n;const p=nd(n),m=VT(n);e&&m&&!p&&n.inherit!==!1&&(c===void 0&&(c=e.initial),d===void 0&&(d=e.animate));let x=t?t.initial===!1:!1;x=x||c===!1;const w=x?d:c;return w&&typeof w!="boolean"&&!td(w)&&(Array.isArray(w)?w:[w]).forEach(S=>{const V=yg(n,S);if(!V)return;const{transitionEnd:D,transition:N,...B}=V;for(const U in B){let j=B[U];if(Array.isArray(j)){const K=x?j.length-1:0;j=j[K]}j!==null&&(o[U]=j)}for(const U in D)o[U]=D[U]}),o}const mt=n=>n;class Cx{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function KD(n){let e=new Cx,t=new Cx,r=0,o=!1,a=!1;const c=new WeakSet,d={schedule:(p,m=!1,x=!1)=>{const w=x&&o,E=w?e:t;return m&&c.add(p),E.add(p)&&w&&o&&(r=e.order.length),p},cancel:p=>{t.remove(p),c.delete(p)},process:p=>{if(o){a=!0;return}if(o=!0,[e,t]=[t,e],t.clear(),r=e.order.length,r)for(let m=0;m<r;m++){const x=e.order[m];x(p),c.has(x)&&(d.schedule(x),n())}o=!1,a&&(a=!1,d.process(p))}};return d}const qu=["prepare","read","update","preRender","render","postRender"],QD=40;function YD(n,e){let t=!1,r=!0;const o={delta:0,timestamp:0,isProcessing:!1},a=qu.reduce((w,E)=>(w[E]=KD(()=>t=!0),w),{}),c=w=>a[w].process(o),d=()=>{const w=performance.now();t=!1,o.delta=r?1e3/60:Math.max(Math.min(w-o.timestamp,QD),1),o.timestamp=w,o.isProcessing=!0,qu.forEach(c),o.isProcessing=!1,t&&e&&(r=!1,n(d))},p=()=>{t=!0,r=!0,o.isProcessing||n(d)};return{schedule:qu.reduce((w,E)=>{const S=a[E];return w[E]=(V,D=!1,N=!1)=>(t||p(),S.schedule(V,D,N)),w},{}),cancel:w=>qu.forEach(E=>a[E].cancel(w)),state:o,steps:a}}const{schedule:et,cancel:ls,state:Kt,steps:Zf}=YD(typeof requestAnimationFrame<"u"?requestAnimationFrame:mt,!0),XD={useVisualState:YT({scrapeMotionValuesFromProps:KT,createRenderState:qT,onMount:(n,e,{renderState:t,latestValues:r})=>{et.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),et.render(()=>{pg(t,r,{enableHardwareAcceleration:!1},mg(e.tagName),n.transformTemplate),WT(e,t)})}})},JD={useVisualState:YT({scrapeMotionValuesFromProps:gg,createRenderState:fg})};function ZD(n,{forwardMotionProps:e=!1},t,r){return{...hg(n)?XD:JD,preloadedFeatures:t,useRender:$D(e),createVisualElement:r,Component:n}}function Zr(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const XT=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function sd(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const e4=n=>e=>XT(e)&&n(e,sd(e));function ts(n,e,t,r){return Zr(n,e,e4(t),r)}const t4=(n,e)=>t=>e(n(t)),Ys=(...n)=>n.reduce(t4);function JT(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const Rx=JT("dragHorizontal"),jx=JT("dragVertical");function ZT(n){let e=!1;if(n==="y")e=jx();else if(n==="x")e=Rx();else{const t=Rx(),r=jx();t&&r?e=()=>{t(),r()}:(t&&t(),r&&r())}return e}function e1(){const n=ZT(!0);return n?(n(),!1):!0}class ii{constructor(e){this.isMounted=!1,this.node=e}update(){}}function Dx(n,e){const t="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),o=(a,c)=>{if(a.pointerType==="touch"||e1())return;const d=n.getProps();n.animationState&&d.whileHover&&n.animationState.setActive("whileHover",e),d[r]&&et.update(()=>d[r](a,c))};return ts(n.current,t,o,{passive:!n.getProps()[r]})}class n4 extends ii{mount(){this.unmount=Ys(Dx(this.node,!0),Dx(this.node,!1))}unmount(){}}class r4 extends ii{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ys(Zr(this.node.current,"focus",()=>this.onFocus()),Zr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const t1=(n,e)=>e?n===e?!0:t1(n,e.parentElement):!1;function ep(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,sd(t))}class s4 extends ii{constructor(){super(...arguments),this.removeStartListeners=mt,this.removeEndListeners=mt,this.removeAccessibleListeners=mt,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),a=ts(window,"pointerup",(d,p)=>{if(!this.checkPressEnd())return;const{onTap:m,onTapCancel:x,globalTapTarget:w}=this.node.getProps();et.update(()=>{!w&&!t1(this.node.current,d.target)?x&&x(d,p):m&&m(d,p)})},{passive:!(r.onTap||r.onPointerUp)}),c=ts(window,"pointercancel",(d,p)=>this.cancelPress(d,p),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Ys(a,c),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=a=>{if(a.key!=="Enter"||this.isPressing)return;const c=d=>{d.key!=="Enter"||!this.checkPressEnd()||ep("up",(p,m)=>{const{onTap:x}=this.node.getProps();x&&et.update(()=>x(p,m))})};this.removeEndListeners(),this.removeEndListeners=Zr(this.node.current,"keyup",c),ep("down",(d,p)=>{this.startPress(d,p)})},t=Zr(this.node.current,"keydown",e),r=()=>{this.isPressing&&ep("cancel",(a,c)=>this.cancelPress(a,c))},o=Zr(this.node.current,"blur",r);this.removeAccessibleListeners=Ys(t,o)}}startPress(e,t){this.isPressing=!0;const{onTapStart:r,whileTap:o}=this.node.getProps();o&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&et.update(()=>r(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!e1()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&et.update(()=>r(e,t))}mount(){const e=this.node.getProps(),t=ts(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Zr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Ys(t,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Wp=new WeakMap,tp=new WeakMap,i4=n=>{const e=Wp.get(n.target);e&&e(n)},o4=n=>{n.forEach(i4)};function a4({root:n,...e}){const t=n||document;tp.has(t)||tp.set(t,{});const r=tp.get(t),o=JSON.stringify(e);return r[o]||(r[o]=new IntersectionObserver(o4,{root:n,...e})),r[o]}function l4(n,e,t){const r=a4(e);return Wp.set(n,t),r.observe(n),()=>{Wp.delete(n),r.unobserve(n)}}const c4={some:0,all:1};class u4 extends ii{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:o="some",once:a}=e,c={root:t?t.current:void 0,rootMargin:r,threshold:typeof o=="number"?o:c4[o]},d=p=>{const{isIntersecting:m}=p;if(this.isInView===m||(this.isInView=m,a&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:x,onViewportLeave:w}=this.node.getProps(),E=m?x:w;E&&E(p)};return l4(this.node.current,c,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(h4(e,t))&&this.startObserver()}unmount(){}}function h4({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const d4={inView:{Feature:u4},tap:{Feature:s4},focus:{Feature:r4},hover:{Feature:n4}};function n1(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function f4(n){const e={};return n.values.forEach((t,r)=>e[r]=t.get()),e}function p4(n){const e={};return n.values.forEach((t,r)=>e[r]=t.getVelocity()),e}function id(n,e,t){const r=n.getProps();return yg(r,e,t!==void 0?t:r.custom,f4(n),p4(n))}let vg=mt;const qi=n=>n*1e3,ns=n=>n/1e3,m4={current:!1},r1=n=>Array.isArray(n)&&typeof n[0]=="number";function s1(n){return!!(!n||typeof n=="string"&&i1[n]||r1(n)||Array.isArray(n)&&n.every(s1))}const jl=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,i1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:jl([0,.65,.55,1]),circOut:jl([.55,0,1,.45]),backIn:jl([.31,.01,.66,-.59]),backOut:jl([.33,1.53,.69,.99])};function o1(n){if(n)return r1(n)?jl(n):Array.isArray(n)?n.map(o1):i1[n]}function g4(n,e,t,{delay:r=0,duration:o,repeat:a=0,repeatType:c="loop",ease:d,times:p}={}){const m={[e]:t};p&&(m.offset=p);const x=o1(d);return Array.isArray(x)&&(m.easing=x),n.animate(m,{delay:r,duration:o,easing:Array.isArray(x)?"linear":x,fill:"both",iterations:a+1,direction:c==="reverse"?"alternate":"normal"})}function y4(n,{repeat:e,repeatType:t="loop"}){const r=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[r]}const a1=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,v4=1e-7,x4=12;function w4(n,e,t,r,o){let a,c,d=0;do c=e+(t-e)/2,a=a1(c,r,o)-n,a>0?t=c:e=c;while(Math.abs(a)>v4&&++d<x4);return c}function _c(n,e,t,r){if(n===e&&t===r)return mt;const o=a=>w4(a,0,1,n,t);return a=>a===0||a===1?a:a1(o(a),e,r)}const _4=_c(.42,0,1,1),E4=_c(0,0,.58,1),l1=_c(.42,0,.58,1),T4=n=>Array.isArray(n)&&typeof n[0]!="number",c1=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,u1=n=>e=>1-n(1-e),xg=n=>1-Math.sin(Math.acos(n)),h1=u1(xg),S4=c1(xg),d1=_c(.33,1.53,.69,.99),wg=u1(d1),b4=c1(wg),I4=n=>(n*=2)<1?.5*wg(n):.5*(2-Math.pow(2,-10*(n-1))),P4={linear:mt,easeIn:_4,easeInOut:l1,easeOut:E4,circIn:xg,circInOut:S4,circOut:h1,backIn:wg,backInOut:b4,backOut:d1,anticipate:I4},Vx=n=>{if(Array.isArray(n)){vg(n.length===4);const[e,t,r,o]=n;return _c(e,t,r,o)}else if(typeof n=="string")return P4[n];return n},_g=(n,e)=>t=>!!(xc(t)&&kD.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),f1=(n,e,t)=>r=>{if(!xc(r))return r;const[o,a,c,d]=r.match(rd);return{[n]:parseFloat(o),[e]:parseFloat(a),[t]:parseFloat(c),alpha:d!==void 0?parseFloat(d):1}},N4=n=>ti(0,255,n),np={...oo,transform:n=>Math.round(N4(n))},zi={test:_g("rgb","red"),parse:f1("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+np.transform(n)+", "+np.transform(e)+", "+np.transform(t)+", "+Bl(Fl.transform(r))+")"};function k4(n){let e="",t="",r="",o="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),o=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),o=n.substring(4,5),e+=e,t+=t,r+=r,o+=o),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:o?parseInt(o,16)/255:1}}const Kp={test:_g("#"),parse:k4,transform:zi.transform},oa={test:_g("hsl","hue"),parse:f1("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Pr.transform(Bl(e))+", "+Pr.transform(Bl(t))+", "+Bl(Fl.transform(r))+")"},nn={test:n=>zi.test(n)||Kp.test(n)||oa.test(n),parse:n=>zi.test(n)?zi.parse(n):oa.test(n)?oa.parse(n):Kp.parse(n),transform:n=>xc(n)?n:n.hasOwnProperty("red")?zi.transform(n):oa.transform(n)},lt=(n,e,t)=>-t*n+t*e+n;function rp(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function A4({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let o=0,a=0,c=0;if(!e)o=a=c=t;else{const d=t<.5?t*(1+e):t+e-t*e,p=2*t-d;o=rp(p,d,n+1/3),a=rp(p,d,n),c=rp(p,d,n-1/3)}return{red:Math.round(o*255),green:Math.round(a*255),blue:Math.round(c*255),alpha:r}}const sp=(n,e,t)=>{const r=n*n;return Math.sqrt(Math.max(0,t*(e*e-r)+r))},C4=[Kp,zi,oa],R4=n=>C4.find(e=>e.test(n));function Lx(n){const e=R4(n);let t=e.parse(n);return e===oa&&(t=A4(t)),t}const p1=(n,e)=>{const t=Lx(n),r=Lx(e),o={...t};return a=>(o.red=sp(t.red,r.red,a),o.green=sp(t.green,r.green,a),o.blue=sp(t.blue,r.blue,a),o.alpha=lt(t.alpha,r.alpha,a),zi.transform(o))};function j4(n){var e,t;return isNaN(n)&&xc(n)&&(((e=n.match(rd))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(FT))===null||t===void 0?void 0:t.length)||0)>0}const m1={regex:PD,countKey:"Vars",token:"${v}",parse:mt},g1={regex:FT,countKey:"Colors",token:"${c}",parse:nn.parse},y1={regex:rd,countKey:"Numbers",token:"${n}",parse:oo.parse};function ip(n,{regex:e,countKey:t,token:r,parse:o}){const a=n.tokenised.match(e);a&&(n["num"+t]=a.length,n.tokenised=n.tokenised.replace(e,r),n.values.push(...a.map(o)))}function Nh(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&ip(t,m1),ip(t,g1),ip(t,y1),t}function v1(n){return Nh(n).values}function x1(n){const{values:e,numColors:t,numVars:r,tokenised:o}=Nh(n),a=e.length;return c=>{let d=o;for(let p=0;p<a;p++)p<r?d=d.replace(m1.token,c[p]):p<r+t?d=d.replace(g1.token,nn.transform(c[p])):d=d.replace(y1.token,Bl(c[p]));return d}}const D4=n=>typeof n=="number"?0:n;function V4(n){const e=v1(n);return x1(n)(e.map(D4))}const ni={test:j4,parse:v1,createTransformer:x1,getAnimatableNone:V4},w1=(n,e)=>t=>`${t>0?e:n}`;function _1(n,e){return typeof n=="number"?t=>lt(n,e,t):nn.test(n)?p1(n,e):n.startsWith("var(")?w1(n,e):T1(n,e)}const E1=(n,e)=>{const t=[...n],r=t.length,o=n.map((a,c)=>_1(a,e[c]));return a=>{for(let c=0;c<r;c++)t[c]=o[c](a);return t}},L4=(n,e)=>{const t={...n,...e},r={};for(const o in t)n[o]!==void 0&&e[o]!==void 0&&(r[o]=_1(n[o],e[o]));return o=>{for(const a in r)t[a]=r[a](o);return t}},T1=(n,e)=>{const t=ni.createTransformer(e),r=Nh(n),o=Nh(e);return r.numVars===o.numVars&&r.numColors===o.numColors&&r.numNumbers>=o.numNumbers?Ys(E1(r.values,o.values),t):w1(n,e)},ic=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},Ox=(n,e)=>t=>lt(n,e,t);function O4(n){return typeof n=="number"?Ox:typeof n=="string"?nn.test(n)?p1:T1:Array.isArray(n)?E1:typeof n=="object"?L4:Ox}function M4(n,e,t){const r=[],o=t||O4(n[0]),a=n.length-1;for(let c=0;c<a;c++){let d=o(n[c],n[c+1]);if(e){const p=Array.isArray(e)?e[c]||mt:e;d=Ys(p,d)}r.push(d)}return r}function S1(n,e,{clamp:t=!0,ease:r,mixer:o}={}){const a=n.length;if(vg(a===e.length),a===1)return()=>e[0];n[0]>n[a-1]&&(n=[...n].reverse(),e=[...e].reverse());const c=M4(e,r,o),d=c.length,p=m=>{let x=0;if(d>1)for(;x<n.length-2&&!(m<n[x+1]);x++);const w=ic(n[x],n[x+1],m);return c[x](w)};return t?m=>p(ti(n[0],n[a-1],m)):p}function U4(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const o=ic(0,e,r);n.push(lt(t,1,o))}}function F4(n){const e=[0];return U4(e,n.length-1),e}function B4(n,e){return n.map(t=>t*e)}function z4(n,e){return n.map(()=>e||l1).splice(0,n.length-1)}function kh({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const o=T4(r)?r.map(Vx):Vx(r),a={done:!1,value:e[0]},c=B4(t&&t.length===e.length?t:F4(e),n),d=S1(c,e,{ease:Array.isArray(o)?o:z4(e,o)});return{calculatedDuration:n,next:p=>(a.value=d(p),a.done=p>=n,a)}}function b1(n,e){return e?n*(1e3/e):0}const $4=5;function I1(n,e,t){const r=Math.max(e-$4,0);return b1(t-n(r),e-r)}const op=.001,q4=.01,G4=10,H4=.05,W4=1;function K4({duration:n=800,bounce:e=.25,velocity:t=0,mass:r=1}){let o,a,c=1-e;c=ti(H4,W4,c),n=ti(q4,G4,ns(n)),c<1?(o=m=>{const x=m*c,w=x*n,E=x-t,S=Qp(m,c),V=Math.exp(-w);return op-E/S*V},a=m=>{const w=m*c*n,E=w*t+t,S=Math.pow(c,2)*Math.pow(m,2)*n,V=Math.exp(-w),D=Qp(Math.pow(m,2),c);return(-o(m)+op>0?-1:1)*((E-S)*V)/D}):(o=m=>{const x=Math.exp(-m*n),w=(m-t)*n+1;return-op+x*w},a=m=>{const x=Math.exp(-m*n),w=(t-m)*(n*n);return x*w});const d=5/n,p=Y4(o,a,d);if(n=qi(n),isNaN(p))return{stiffness:100,damping:10,duration:n};{const m=Math.pow(p,2)*r;return{stiffness:m,damping:c*2*Math.sqrt(r*m),duration:n}}}const Q4=12;function Y4(n,e,t){let r=t;for(let o=1;o<Q4;o++)r=r-n(r)/e(r);return r}function Qp(n,e){return n*Math.sqrt(1-e*e)}const X4=["duration","bounce"],J4=["stiffness","damping","mass"];function Mx(n,e){return e.some(t=>n[t]!==void 0)}function Z4(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!Mx(n,J4)&&Mx(n,X4)){const t=K4(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function P1({keyframes:n,restDelta:e,restSpeed:t,...r}){const o=n[0],a=n[n.length-1],c={done:!1,value:o},{stiffness:d,damping:p,mass:m,duration:x,velocity:w,isResolvedFromDuration:E}=Z4({...r,velocity:-ns(r.velocity||0)}),S=w||0,V=p/(2*Math.sqrt(d*m)),D=a-o,N=ns(Math.sqrt(d/m)),B=Math.abs(D)<5;t||(t=B?.01:2),e||(e=B?.005:.5);let U;if(V<1){const j=Qp(N,V);U=K=>{const Z=Math.exp(-V*N*K);return a-Z*((S+V*N*D)/j*Math.sin(j*K)+D*Math.cos(j*K))}}else if(V===1)U=j=>a-Math.exp(-N*j)*(D+(S+N*D)*j);else{const j=N*Math.sqrt(V*V-1);U=K=>{const Z=Math.exp(-V*N*K),ie=Math.min(j*K,300);return a-Z*((S+V*N*D)*Math.sinh(ie)+j*D*Math.cosh(ie))/j}}return{calculatedDuration:E&&x||null,next:j=>{const K=U(j);if(E)c.done=j>=x;else{let Z=S;j!==0&&(V<1?Z=I1(U,j,K):Z=0);const ie=Math.abs(Z)<=t,R=Math.abs(a-K)<=e;c.done=ie&&R}return c.value=c.done?a:K,c}}}function Ux({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:o=10,bounceStiffness:a=500,modifyTarget:c,min:d,max:p,restDelta:m=.5,restSpeed:x}){const w=n[0],E={done:!1,value:w},S=I=>d!==void 0&&I<d||p!==void 0&&I>p,V=I=>d===void 0?p:p===void 0||Math.abs(d-I)<Math.abs(p-I)?d:p;let D=t*e;const N=w+D,B=c===void 0?N:c(N);B!==N&&(D=B-w);const U=I=>-D*Math.exp(-I/r),j=I=>B+U(I),K=I=>{const P=U(I),L=j(I);E.done=Math.abs(P)<=m,E.value=E.done?B:L};let Z,ie;const R=I=>{S(E.value)&&(Z=I,ie=P1({keyframes:[E.value,V(E.value)],velocity:I1(j,I,E.value),damping:o,stiffness:a,restDelta:m,restSpeed:x}))};return R(0),{calculatedDuration:null,next:I=>{let P=!1;return!ie&&Z===void 0&&(P=!0,K(I),R(I)),Z!==void 0&&I>Z?ie.next(I-Z):(!P&&K(I),E)}}}const eV=n=>{const e=({timestamp:t})=>n(t);return{start:()=>et.update(e,!0),stop:()=>ls(e),now:()=>Kt.isProcessing?Kt.timestamp:performance.now()}},Fx=2e4;function Bx(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<Fx;)e+=t,r=n.next(e);return e>=Fx?1/0:e}const tV={decay:Ux,inertia:Ux,tween:kh,keyframes:kh,spring:P1};function Ah({autoplay:n=!0,delay:e=0,driver:t=eV,keyframes:r,type:o="keyframes",repeat:a=0,repeatDelay:c=0,repeatType:d="loop",onPlay:p,onStop:m,onComplete:x,onUpdate:w,...E}){let S=1,V=!1,D,N;const B=()=>{N=new Promise(O=>{D=O})};B();let U;const j=tV[o]||kh;let K;j!==kh&&typeof r[0]!="number"&&(K=S1([0,100],r,{clamp:!1}),r=[0,100]);const Z=j({...E,keyframes:r});let ie;d==="mirror"&&(ie=j({...E,keyframes:[...r].reverse(),velocity:-(E.velocity||0)}));let R="idle",I=null,P=null,L=null;Z.calculatedDuration===null&&a&&(Z.calculatedDuration=Bx(Z));const{calculatedDuration:F}=Z;let $=1/0,A=1/0;F!==null&&($=F+c,A=$*(a+1)-c);let Ie=0;const $e=O=>{if(P===null)return;S>0&&(P=Math.min(P,O)),S<0&&(P=Math.min(O-A/S,P)),I!==null?Ie=I:Ie=Math.round(O-P)*S;const J=Ie-e*(S>=0?1:-1),fe=S>=0?J<0:J>A;Ie=Math.max(J,0),R==="finished"&&I===null&&(Ie=A);let le=Ie,ue=Z;if(a){const We=Math.min(Ie,A)/$;let it=Math.floor(We),Dt=We%1;!Dt&&We>=1&&(Dt=1),Dt===1&&it--,it=Math.min(it,a+1),!!(it%2)&&(d==="reverse"?(Dt=1-Dt,c&&(Dt-=c/$)):d==="mirror"&&(ue=ie)),le=ti(0,1,Dt)*$}const ve=fe?{done:!1,value:r[0]}:ue.next(le);K&&(ve.value=K(ve.value));let{done:De}=ve;!fe&&F!==null&&(De=S>=0?Ie>=A:Ie<=0);const Be=I===null&&(R==="finished"||R==="running"&&De);return w&&w(ve.value),Be&&oe(),ve},je=()=>{U&&U.stop(),U=void 0},Ce=()=>{R="idle",je(),D(),B(),P=L=null},oe=()=>{R="finished",x&&x(),je(),D()},q=()=>{if(V)return;U||(U=t($e));const O=U.now();p&&p(),I!==null?P=O-I:(!P||R==="finished")&&(P=O),R==="finished"&&B(),L=P,I=null,R="running",U.start()};n&&q();const X={then(O,J){return N.then(O,J)},get time(){return ns(Ie)},set time(O){O=qi(O),Ie=O,I!==null||!U||S===0?I=O:P=U.now()-O/S},get duration(){const O=Z.calculatedDuration===null?Bx(Z):Z.calculatedDuration;return ns(O)},get speed(){return S},set speed(O){O===S||!U||(S=O,X.time=ns(Ie))},get state(){return R},play:q,pause:()=>{R="paused",I=Ie},stop:()=>{V=!0,R!=="idle"&&(R="idle",m&&m(),Ce())},cancel:()=>{L!==null&&$e(L),Ce()},complete:()=>{R="finished"},sample:O=>(P=0,$e(O))};return X}function nV(n){let e;return()=>(e===void 0&&(e=n()),e)}const rV=nV(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),sV=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Gu=10,iV=2e4,oV=(n,e)=>e.type==="spring"||n==="backgroundColor"||!s1(e.ease);function aV(n,e,{onUpdate:t,onComplete:r,...o}){if(!(rV()&&sV.has(e)&&!o.repeatDelay&&o.repeatType!=="mirror"&&o.damping!==0&&o.type!=="inertia"))return!1;let c=!1,d,p,m=!1;const x=()=>{p=new Promise(j=>{d=j})};x();let{keyframes:w,duration:E=300,ease:S,times:V}=o;if(oV(e,o)){const j=Ah({...o,repeat:0,delay:0});let K={done:!1,value:w[0]};const Z=[];let ie=0;for(;!K.done&&ie<iV;)K=j.sample(ie),Z.push(K.value),ie+=Gu;V=void 0,w=Z,E=ie-Gu,S="linear"}const D=g4(n.owner.current,e,w,{...o,duration:E,ease:S,times:V}),N=()=>{m=!1,D.cancel()},B=()=>{m=!0,et.update(N),d(),x()};return D.onfinish=()=>{m||(n.set(y4(w,o)),r&&r(),B())},{then(j,K){return p.then(j,K)},attachTimeline(j){return D.timeline=j,D.onfinish=null,mt},get time(){return ns(D.currentTime||0)},set time(j){D.currentTime=qi(j)},get speed(){return D.playbackRate},set speed(j){D.playbackRate=j},get duration(){return ns(E)},play:()=>{c||(D.play(),ls(N))},pause:()=>D.pause(),stop:()=>{if(c=!0,D.playState==="idle")return;const{currentTime:j}=D;if(j){const K=Ah({...o,autoplay:!1});n.setWithVelocity(K.sample(j-Gu).value,K.sample(j).value,Gu)}B()},complete:()=>{m||D.finish()},cancel:B}}function lV({keyframes:n,delay:e,onUpdate:t,onComplete:r}){const o=()=>(t&&t(n[n.length-1]),r&&r(),{time:0,speed:1,duration:0,play:mt,pause:mt,stop:mt,then:a=>(a(),Promise.resolve()),cancel:mt,complete:mt});return e?Ah({keyframes:[0,1],duration:0,delay:e,onComplete:o}):o()}const cV={type:"spring",stiffness:500,damping:25,restSpeed:10},uV=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),hV={type:"keyframes",duration:.8},dV={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},fV=(n,{keyframes:e})=>e.length>2?hV:io.has(n)?n.startsWith("scale")?uV(e[1]):cV:dV,Yp=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ni.test(e)||e==="0")&&!e.startsWith("url(")),pV=new Set(["brightness","contrast","saturate","opacity"]);function mV(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(rd)||[];if(!r)return n;const o=t.replace(r,"");let a=pV.has(e)?1:0;return r!==t&&(a*=100),e+"("+a+o+")"}const gV=/([a-z-]*)\(.*?\)/g,Xp={...ni,getAnimatableNone:n=>{const e=n.match(gV);return e?e.map(mV).join(" "):n}},yV={...BT,color:nn,backgroundColor:nn,outlineColor:nn,fill:nn,stroke:nn,borderColor:nn,borderTopColor:nn,borderRightColor:nn,borderBottomColor:nn,borderLeftColor:nn,filter:Xp,WebkitFilter:Xp},Eg=n=>yV[n];function N1(n,e){let t=Eg(n);return t!==Xp&&(t=ni),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const k1=n=>/^0[^.\s]+$/.test(n);function vV(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||k1(n)}function xV(n,e,t,r){const o=Yp(e,t);let a;Array.isArray(t)?a=[...t]:a=[null,t];const c=r.from!==void 0?r.from:n.get();let d;const p=[];for(let m=0;m<a.length;m++)a[m]===null&&(a[m]=m===0?c:a[m-1]),vV(a[m])&&p.push(m),typeof a[m]=="string"&&a[m]!=="none"&&a[m]!=="0"&&(d=a[m]);if(o&&p.length&&d)for(let m=0;m<p.length;m++){const x=p[m];a[x]=N1(e,d)}return a}function wV({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:o,repeat:a,repeatType:c,repeatDelay:d,from:p,elapsed:m,...x}){return!!Object.keys(x).length}function Tg(n,e){return n[e]||n.default||n}const _V={skipAnimations:!1},Sg=(n,e,t,r={})=>o=>{const a=Tg(r,n)||{},c=a.delay||r.delay||0;let{elapsed:d=0}=r;d=d-qi(c);const p=xV(e,n,t,a),m=p[0],x=p[p.length-1],w=Yp(n,m),E=Yp(n,x);let S={keyframes:p,velocity:e.getVelocity(),ease:"easeOut",...a,delay:-d,onUpdate:V=>{e.set(V),a.onUpdate&&a.onUpdate(V)},onComplete:()=>{o(),a.onComplete&&a.onComplete()}};if(wV(a)||(S={...S,...fV(n,S)}),S.duration&&(S.duration=qi(S.duration)),S.repeatDelay&&(S.repeatDelay=qi(S.repeatDelay)),!w||!E||m4.current||a.type===!1||_V.skipAnimations)return lV(S);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const V=aV(e,n,S);if(V)return V}return Ah(S)};function Ch(n){return!!(pn(n)&&n.add)}const A1=n=>/^\-?\d*\.?\d+$/.test(n);function bg(n,e){n.indexOf(e)===-1&&n.push(e)}function Ig(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class Pg{constructor(){this.subscriptions=[]}add(e){return bg(this.subscriptions,e),()=>Ig(this.subscriptions,e)}notify(e,t,r){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](e,t,r);else for(let a=0;a<o;a++){const c=this.subscriptions[a];c&&c(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const EV=n=>!isNaN(parseFloat(n));class TV{constructor(e,t={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,o=!0)=>{this.prev=this.current,this.current=r;const{delta:a,timestamp:c}=Kt;this.lastUpdated!==c&&(this.timeDelta=a,this.lastUpdated=c,et.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),o&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>et.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=EV(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Pg);const r=this.events[e].add(t);return e==="change"?()=>{r(),et.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?b1(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function _a(n,e){return new TV(n,e)}const C1=n=>e=>e.test(n),SV={test:n=>n==="auto",parse:n=>n},R1=[oo,Te,Pr,Ls,CD,AD,SV],Il=n=>R1.find(C1(n)),bV=[...R1,nn,ni],IV=n=>bV.find(C1(n));function PV(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,_a(t))}function NV(n,e){const t=id(n,e);let{transitionEnd:r={},transition:o={},...a}=t?n.makeTargetAnimatable(t,!1):{};a={...a,...r};for(const c in a){const d=GD(a[c]);PV(n,c,d)}}function kV(n,e,t){var r,o;const a=Object.keys(e).filter(d=>!n.hasValue(d)),c=a.length;if(c)for(let d=0;d<c;d++){const p=a[d],m=e[p];let x=null;Array.isArray(m)&&(x=m[0]),x===null&&(x=(o=(r=t[p])!==null&&r!==void 0?r:n.readValue(p))!==null&&o!==void 0?o:e[p]),x!=null&&(typeof x=="string"&&(A1(x)||k1(x))?x=parseFloat(x):!IV(x)&&ni.test(m)&&(x=N1(p,m)),n.addValue(p,_a(x,{owner:n})),t[p]===void 0&&(t[p]=x),x!==null&&n.setBaseTarget(p,x))}}function AV(n,e){return e?(e[n]||e.default||e).from:void 0}function CV(n,e,t){const r={};for(const o in n){const a=AV(o,e);if(a!==void 0)r[o]=a;else{const c=t.getValue(o);c&&(r[o]=c.get())}}return r}function RV({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function jV(n,e){const t=n.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}else return t!==e}function j1(n,e,{delay:t=0,transitionOverride:r,type:o}={}){let{transition:a=n.getDefaultTransition(),transitionEnd:c,...d}=n.makeTargetAnimatable(e);const p=n.getValue("willChange");r&&(a=r);const m=[],x=o&&n.animationState&&n.animationState.getState()[o];for(const w in d){const E=n.getValue(w),S=d[w];if(!E||S===void 0||x&&RV(x,w))continue;const V={delay:t,elapsed:0,...Tg(a||{},w)};if(window.HandoffAppearAnimations){const B=n.getProps()[DT];if(B){const U=window.HandoffAppearAnimations(B,w,E,et);U!==null&&(V.elapsed=U,V.isHandoff=!0)}}let D=!V.isHandoff&&!jV(E,S);if(V.type==="spring"&&(E.getVelocity()||V.velocity)&&(D=!1),E.animation&&(D=!1),D)continue;E.start(Sg(w,E,S,n.shouldReduceMotion&&io.has(w)?{type:!1}:V));const N=E.animation;Ch(p)&&(p.add(w),N.then(()=>p.remove(w))),m.push(N)}return c&&Promise.all(m).then(()=>{c&&NV(n,c)}),m}function Jp(n,e,t={}){const r=id(n,e,t.custom);let{transition:o=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(o=t.transitionOverride);const a=r?()=>Promise.all(j1(n,r,t)):()=>Promise.resolve(),c=n.variantChildren&&n.variantChildren.size?(p=0)=>{const{delayChildren:m=0,staggerChildren:x,staggerDirection:w}=o;return DV(n,e,m+p,x,w,t)}:()=>Promise.resolve(),{when:d}=o;if(d){const[p,m]=d==="beforeChildren"?[a,c]:[c,a];return p().then(()=>m())}else return Promise.all([a(),c(t.delay)])}function DV(n,e,t=0,r=0,o=1,a){const c=[],d=(n.variantChildren.size-1)*r,p=o===1?(m=0)=>m*r:(m=0)=>d-m*r;return Array.from(n.variantChildren).sort(VV).forEach((m,x)=>{m.notify("AnimationStart",e),c.push(Jp(m,e,{...a,delay:t+p(x)}).then(()=>m.notify("AnimationComplete",e)))}),Promise.all(c)}function VV(n,e){return n.sortNodePosition(e)}function LV(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const o=e.map(a=>Jp(n,a,t));r=Promise.all(o)}else if(typeof e=="string")r=Jp(n,e,t);else{const o=typeof e=="function"?id(n,e,t.custom):e;r=Promise.all(j1(n,o,t))}return r.then(()=>n.notify("AnimationComplete",e))}const OV=[...lg].reverse(),MV=lg.length;function UV(n){return e=>Promise.all(e.map(({animation:t,options:r})=>LV(n,t,r)))}function FV(n){let e=UV(n);const t=zV();let r=!0;const o=(p,m)=>{const x=id(n,m);if(x){const{transition:w,transitionEnd:E,...S}=x;p={...p,...S,...E}}return p};function a(p){e=p(n)}function c(p,m){const x=n.getProps(),w=n.getVariantContext(!0)||{},E=[],S=new Set;let V={},D=1/0;for(let B=0;B<MV;B++){const U=OV[B],j=t[U],K=x[U]!==void 0?x[U]:w[U],Z=rc(K),ie=U===m?j.isActive:null;ie===!1&&(D=B);let R=K===w[U]&&K!==x[U]&&Z;if(R&&r&&n.manuallyAnimateOnMount&&(R=!1),j.protectedKeys={...V},!j.isActive&&ie===null||!K&&!j.prevProp||td(K)||typeof K=="boolean")continue;let P=BV(j.prevProp,K)||U===m&&j.isActive&&!R&&Z||B>D&&Z,L=!1;const F=Array.isArray(K)?K:[K];let $=F.reduce(o,{});ie===!1&&($={});const{prevResolvedValues:A={}}=j,Ie={...A,...$},$e=je=>{P=!0,S.has(je)&&(L=!0,S.delete(je)),j.needsAnimating[je]=!0};for(const je in Ie){const Ce=$[je],oe=A[je];if(V.hasOwnProperty(je))continue;let q=!1;Ph(Ce)&&Ph(oe)?q=!n1(Ce,oe):q=Ce!==oe,q?Ce!==void 0?$e(je):S.add(je):Ce!==void 0&&S.has(je)?$e(je):j.protectedKeys[je]=!0}j.prevProp=K,j.prevResolvedValues=$,j.isActive&&(V={...V,...$}),r&&n.blockInitialAnimation&&(P=!1),P&&(!R||L)&&E.push(...F.map(je=>({animation:je,options:{type:U,...p}})))}if(S.size){const B={};S.forEach(U=>{const j=n.getBaseTarget(U);j!==void 0&&(B[U]=j)}),E.push({animation:B})}let N=!!E.length;return r&&(x.initial===!1||x.initial===x.animate)&&!n.manuallyAnimateOnMount&&(N=!1),r=!1,N?e(E):Promise.resolve()}function d(p,m,x){var w;if(t[p].isActive===m)return Promise.resolve();(w=n.variantChildren)===null||w===void 0||w.forEach(S=>{var V;return(V=S.animationState)===null||V===void 0?void 0:V.setActive(p,m)}),t[p].isActive=m;const E=c(x,p);for(const S in t)t[S].protectedKeys={};return E}return{animateChanges:c,setActive:d,setAnimateFunction:a,getState:()=>t}}function BV(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!n1(e,n):!1}function Vi(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function zV(){return{animate:Vi(!0),whileInView:Vi(),whileHover:Vi(),whileTap:Vi(),whileDrag:Vi(),whileFocus:Vi(),exit:Vi()}}class $V extends ii{constructor(e){super(e),e.animationState||(e.animationState=FV(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),td(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let qV=0;class GV extends ii{constructor(){super(...arguments),this.id=qV++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:r}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===o)return;const a=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});t&&!e&&a.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const HV={animation:{Feature:$V},exit:{Feature:GV}},zx=(n,e)=>Math.abs(n-e);function WV(n,e){const t=zx(n.x,e.x),r=zx(n.y,e.y);return Math.sqrt(t**2+r**2)}class D1{constructor(e,t,{transformPagePoint:r,contextWindow:o,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=lp(this.lastMoveEventInfo,this.history),E=this.startEvent!==null,S=WV(w.offset,{x:0,y:0})>=3;if(!E&&!S)return;const{point:V}=w,{timestamp:D}=Kt;this.history.push({...V,timestamp:D});const{onStart:N,onMove:B}=this.handlers;E||(N&&N(this.lastMoveEvent,w),this.startEvent=this.lastMoveEvent),B&&B(this.lastMoveEvent,w)},this.handlePointerMove=(w,E)=>{this.lastMoveEvent=w,this.lastMoveEventInfo=ap(E,this.transformPagePoint),et.update(this.updatePoint,!0)},this.handlePointerUp=(w,E)=>{this.end();const{onEnd:S,onSessionEnd:V,resumeAnimation:D}=this.handlers;if(this.dragSnapToOrigin&&D&&D(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=lp(w.type==="pointercancel"?this.lastMoveEventInfo:ap(E,this.transformPagePoint),this.history);this.startEvent&&S&&S(w,N),V&&V(w,N)},!XT(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=r,this.contextWindow=o||window;const c=sd(e),d=ap(c,this.transformPagePoint),{point:p}=d,{timestamp:m}=Kt;this.history=[{...p,timestamp:m}];const{onSessionStart:x}=t;x&&x(e,lp(d,this.history)),this.removeListeners=Ys(ts(this.contextWindow,"pointermove",this.handlePointerMove),ts(this.contextWindow,"pointerup",this.handlePointerUp),ts(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ls(this.updatePoint)}}function ap(n,e){return e?{point:e(n.point)}:n}function $x(n,e){return{x:n.x-e.x,y:n.y-e.y}}function lp({point:n},e){return{point:n,delta:$x(n,V1(e)),offset:$x(n,KV(e)),velocity:QV(e,.1)}}function KV(n){return n[0]}function V1(n){return n[n.length-1]}function QV(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const o=V1(n);for(;t>=0&&(r=n[t],!(o.timestamp-r.timestamp>qi(e)));)t--;if(!r)return{x:0,y:0};const a=ns(o.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const c={x:(o.x-r.x)/a,y:(o.y-r.y)/a};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function Tn(n){return n.max-n.min}function Zp(n,e=0,t=.01){return Math.abs(n-e)<=t}function qx(n,e,t,r=.5){n.origin=r,n.originPoint=lt(e.min,e.max,n.origin),n.scale=Tn(t)/Tn(e),(Zp(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=lt(t.min,t.max,n.origin)-n.originPoint,(Zp(n.translate)||isNaN(n.translate))&&(n.translate=0)}function zl(n,e,t,r){qx(n.x,e.x,t.x,r?r.originX:void 0),qx(n.y,e.y,t.y,r?r.originY:void 0)}function Gx(n,e,t){n.min=t.min+e.min,n.max=n.min+Tn(e)}function YV(n,e,t){Gx(n.x,e.x,t.x),Gx(n.y,e.y,t.y)}function Hx(n,e,t){n.min=e.min-t.min,n.max=n.min+Tn(e)}function $l(n,e,t){Hx(n.x,e.x,t.x),Hx(n.y,e.y,t.y)}function XV(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?lt(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?lt(t,n,r.max):Math.min(n,t)),n}function Wx(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function JV(n,{top:e,left:t,bottom:r,right:o}){return{x:Wx(n.x,t,o),y:Wx(n.y,e,r)}}function Kx(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function ZV(n,e){return{x:Kx(n.x,e.x),y:Kx(n.y,e.y)}}function eL(n,e){let t=.5;const r=Tn(n),o=Tn(e);return o>r?t=ic(e.min,e.max-r,n.min):r>o&&(t=ic(n.min,n.max-o,e.min)),ti(0,1,t)}function tL(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const em=.35;function nL(n=em){return n===!1?n=0:n===!0&&(n=em),{x:Qx(n,"left","right"),y:Qx(n,"top","bottom")}}function Qx(n,e,t){return{min:Yx(n,e),max:Yx(n,t)}}function Yx(n,e){return typeof n=="number"?n:n[e]||0}const Xx=()=>({translate:0,scale:1,origin:0,originPoint:0}),aa=()=>({x:Xx(),y:Xx()}),Jx=()=>({min:0,max:0}),wt=()=>({x:Jx(),y:Jx()});function Ln(n){return[n("x"),n("y")]}function L1({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function rL({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function sL(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function cp(n){return n===void 0||n===1}function tm({scale:n,scaleX:e,scaleY:t}){return!cp(n)||!cp(e)||!cp(t)}function Oi(n){return tm(n)||O1(n)||n.z||n.rotate||n.rotateX||n.rotateY}function O1(n){return Zx(n.x)||Zx(n.y)}function Zx(n){return n&&n!=="0%"}function Rh(n,e,t){const r=n-t,o=e*r;return t+o}function ew(n,e,t,r,o){return o!==void 0&&(n=Rh(n,o,r)),Rh(n,t,r)+e}function nm(n,e=0,t=1,r,o){n.min=ew(n.min,e,t,r,o),n.max=ew(n.max,e,t,r,o)}function M1(n,{x:e,y:t}){nm(n.x,e.translate,e.scale,e.originPoint),nm(n.y,t.translate,t.scale,t.originPoint)}function iL(n,e,t,r=!1){const o=t.length;if(!o)return;e.x=e.y=1;let a,c;for(let d=0;d<o;d++){a=t[d],c=a.projectionDelta;const p=a.instance;p&&p.style&&p.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&la(n,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,M1(n,c)),r&&Oi(a.latestValues)&&la(n,a.latestValues))}e.x=tw(e.x),e.y=tw(e.y)}function tw(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function Os(n,e){n.min=n.min+e,n.max=n.max+e}function nw(n,e,[t,r,o]){const a=e[o]!==void 0?e[o]:.5,c=lt(n.min,n.max,a);nm(n,e[t],e[r],c,e.scale)}const oL=["x","scaleX","originX"],aL=["y","scaleY","originY"];function la(n,e){nw(n.x,e,oL),nw(n.y,e,aL)}function U1(n,e){return L1(sL(n.getBoundingClientRect(),e))}function lL(n,e,t){const r=U1(n,t),{scroll:o}=e;return o&&(Os(r.x,o.offset.x),Os(r.y,o.offset.y)),r}const F1=({current:n})=>n?n.ownerDocument.defaultView:null,cL=new WeakMap;class uL{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=wt(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const o=x=>{const{dragSnapToOrigin:w}=this.getProps();w?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(sd(x,"page").point)},a=(x,w)=>{const{drag:E,dragPropagation:S,onDragStart:V}=this.getProps();if(E&&!S&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=ZT(E),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ln(N=>{let B=this.getAxisMotionValue(N).get()||0;if(Pr.test(B)){const{projection:U}=this.visualElement;if(U&&U.layout){const j=U.layout.layoutBox[N];j&&(B=Tn(j)*(parseFloat(B)/100))}}this.originPoint[N]=B}),V&&et.update(()=>V(x,w),!1,!0);const{animationState:D}=this.visualElement;D&&D.setActive("whileDrag",!0)},c=(x,w)=>{const{dragPropagation:E,dragDirectionLock:S,onDirectionLock:V,onDrag:D}=this.getProps();if(!E&&!this.openGlobalLock)return;const{offset:N}=w;if(S&&this.currentDirection===null){this.currentDirection=hL(N),this.currentDirection!==null&&V&&V(this.currentDirection);return}this.updateAxis("x",w.point,N),this.updateAxis("y",w.point,N),this.visualElement.render(),D&&D(x,w)},d=(x,w)=>this.stop(x,w),p=()=>Ln(x=>{var w;return this.getAnimationState(x)==="paused"&&((w=this.getAxisMotionValue(x).animation)===null||w===void 0?void 0:w.play())}),{dragSnapToOrigin:m}=this.getProps();this.panSession=new D1(e,{onSessionStart:o,onStart:a,onMove:c,onSessionEnd:d,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,contextWindow:F1(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:o}=t;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&et.update(()=>a(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:o}=this.getProps();if(!r||!Hu(e,o,this.currentDirection))return;const a=this.getAxisMotionValue(e);let c=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(c=XV(c,this.constraints[e],this.elastic[e])),a.set(c)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;t&&ia(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&o?this.constraints=JV(o.layoutBox,t):this.constraints=!1,this.elastic=nL(r),a!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&Ln(c=>{this.getAxisMotionValue(c)&&(this.constraints[c]=tL(o.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!ia(e))return!1;const r=e.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const a=lL(r,o.root,this.visualElement.getTransformPagePoint());let c=ZV(o.layout.layoutBox,a);if(t){const d=t(rL(c));this.hasMutatedConstraints=!!d,d&&(c=L1(d))}return c}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:o,dragTransition:a,dragSnapToOrigin:c,onDragTransitionEnd:d}=this.getProps(),p=this.constraints||{},m=Ln(x=>{if(!Hu(x,t,this.currentDirection))return;let w=p&&p[x]||{};c&&(w={min:0,max:0});const E=o?200:1e6,S=o?40:1e7,V={type:"inertia",velocity:r?e[x]:0,bounceStiffness:E,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...a,...w};return this.startAxisValueAnimation(x,V)});return Promise.all(m).then(d)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return r.start(Sg(e,r,0,t))}stopAnimation(){Ln(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ln(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),o=r[t];return o||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ln(t=>{const{drag:r}=this.getProps();if(!Hu(t,r,this.currentDirection))return;const{projection:o}=this.visualElement,a=this.getAxisMotionValue(t);if(o&&o.layout){const{min:c,max:d}=o.layout.layoutBox[t];a.set(e[t]-lt(c,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!ia(t)||!r||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};Ln(c=>{const d=this.getAxisMotionValue(c);if(d){const p=d.get();o[c]=eL({min:p,max:p},this.constraints[c])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ln(c=>{if(!Hu(c,e,null))return;const d=this.getAxisMotionValue(c),{min:p,max:m}=this.constraints[c];d.set(lt(p,m,o[c]))})}addListeners(){if(!this.visualElement.current)return;cL.set(this.visualElement,this);const e=this.visualElement.current,t=ts(e,"pointerdown",p=>{const{drag:m,dragListener:x=!0}=this.getProps();m&&x&&this.start(p)}),r=()=>{const{dragConstraints:p}=this.getProps();ia(p)&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,a=o.addEventListener("measure",r);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),r();const c=Zr(window,"resize",()=>this.scalePositionWithinConstraints()),d=o.addEventListener("didUpdate",({delta:p,hasLayoutChanged:m})=>{this.isDragging&&m&&(Ln(x=>{const w=this.getAxisMotionValue(x);w&&(this.originPoint[x]+=p[x].translate,w.set(w.get()+p[x].translate))}),this.visualElement.render())});return()=>{c(),t(),a(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:o=!1,dragConstraints:a=!1,dragElastic:c=em,dragMomentum:d=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:o,dragConstraints:a,dragElastic:c,dragMomentum:d}}}function Hu(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function hL(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class dL extends ii{constructor(e){super(e),this.removeGroupControls=mt,this.removeListeners=mt,this.controls=new uL(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||mt}unmount(){this.removeGroupControls(),this.removeListeners()}}const rw=n=>(e,t)=>{n&&et.update(()=>n(e,t))};class fL extends ii{constructor(){super(...arguments),this.removePointerDownListener=mt}onPointerDown(e){this.session=new D1(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:F1(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:o}=this.node.getProps();return{onSessionStart:rw(e),onStart:rw(t),onMove:r,onEnd:(a,c)=>{delete this.session,o&&et.update(()=>o(a,c))}}}mount(){this.removePointerDownListener=ts(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function pL(){const n=C.useContext(Zh);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:r}=n,o=C.useId();return C.useEffect(()=>r(o),[]),!e&&t?[!1,()=>t&&t(o)]:[!0]}const ih={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function sw(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Pl={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Te.test(n))n=parseFloat(n);else return n;const t=sw(n,e.target.x),r=sw(n,e.target.y);return`${t}% ${r}%`}},mL={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,o=ni.parse(n);if(o.length>5)return r;const a=ni.createTransformer(n),c=typeof o[0]!="number"?1:0,d=t.x.scale*e.x,p=t.y.scale*e.y;o[0+c]/=d,o[1+c]/=p;const m=lt(d,p,.5);return typeof o[2+c]=="number"&&(o[2+c]/=m),typeof o[3+c]=="number"&&(o[3+c]/=m),a(o)}};class gL extends jh.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:o}=this.props,{projection:a}=e;TD(yL),a&&(t.group&&t.group.add(a),r&&r.register&&o&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),ih.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:o,isPresent:a}=this.props,c=r.projection;return c&&(c.isPresent=a,o||e.layoutDependency!==t||t===void 0?c.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?c.promote():c.relegate()||et.postRender(()=>{const d=c.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:o}=e;o&&(o.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(o),r&&r.deregister&&r.deregister(o))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function B1(n){const[e,t]=pL(),r=C.useContext(ug);return jh.createElement(gL,{...n,layoutGroup:r,switchLayoutGroup:C.useContext(LT),isPresent:e,safeToRemove:t})}const yL={borderRadius:{...Pl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Pl,borderTopRightRadius:Pl,borderBottomLeftRadius:Pl,borderBottomRightRadius:Pl,boxShadow:mL},z1=["TopLeft","TopRight","BottomLeft","BottomRight"],vL=z1.length,iw=n=>typeof n=="string"?parseFloat(n):n,ow=n=>typeof n=="number"||Te.test(n);function xL(n,e,t,r,o,a){o?(n.opacity=lt(0,t.opacity!==void 0?t.opacity:1,wL(r)),n.opacityExit=lt(e.opacity!==void 0?e.opacity:1,0,_L(r))):a&&(n.opacity=lt(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let c=0;c<vL;c++){const d=`border${z1[c]}Radius`;let p=aw(e,d),m=aw(t,d);if(p===void 0&&m===void 0)continue;p||(p=0),m||(m=0),p===0||m===0||ow(p)===ow(m)?(n[d]=Math.max(lt(iw(p),iw(m),r),0),(Pr.test(m)||Pr.test(p))&&(n[d]+="%")):n[d]=m}(e.rotate||t.rotate)&&(n.rotate=lt(e.rotate||0,t.rotate||0,r))}function aw(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const wL=$1(0,.5,h1),_L=$1(.5,.95,mt);function $1(n,e,t){return r=>r<n?0:r>e?1:t(ic(n,e,r))}function lw(n,e){n.min=e.min,n.max=e.max}function Dn(n,e){lw(n.x,e.x),lw(n.y,e.y)}function cw(n,e,t,r,o){return n-=e,n=Rh(n,1/t,r),o!==void 0&&(n=Rh(n,1/o,r)),n}function EL(n,e=0,t=1,r=.5,o,a=n,c=n){if(Pr.test(e)&&(e=parseFloat(e),e=lt(c.min,c.max,e/100)-c.min),typeof e!="number")return;let d=lt(a.min,a.max,r);n===a&&(d-=e),n.min=cw(n.min,e,t,d,o),n.max=cw(n.max,e,t,d,o)}function uw(n,e,[t,r,o],a,c){EL(n,e[t],e[r],e[o],e.scale,a,c)}const TL=["x","scaleX","originX"],SL=["y","scaleY","originY"];function hw(n,e,t,r){uw(n.x,e,TL,t?t.x:void 0,r?r.x:void 0),uw(n.y,e,SL,t?t.y:void 0,r?r.y:void 0)}function dw(n){return n.translate===0&&n.scale===1}function q1(n){return dw(n.x)&&dw(n.y)}function bL(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function G1(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function fw(n){return Tn(n.x)/Tn(n.y)}class IL{constructor(){this.members=[]}add(e){bg(this.members,e),e.scheduleRender()}remove(e){if(Ig(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(o=>e===o);if(t===0)return!1;let r;for(let o=t;o>=0;o--){const a=this.members[o];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:o}=e.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function pw(n,e,t){let r="";const o=n.x.translate/e.x,a=n.y.translate/e.y;if((o||a)&&(r=`translate3d(${o}px, ${a}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:p,rotateX:m,rotateY:x}=t;p&&(r+=`rotate(${p}deg) `),m&&(r+=`rotateX(${m}deg) `),x&&(r+=`rotateY(${x}deg) `)}const c=n.x.scale*e.x,d=n.y.scale*e.y;return(c!==1||d!==1)&&(r+=`scale(${c}, ${d})`),r||"none"}const PL=(n,e)=>n.depth-e.depth;class NL{constructor(){this.children=[],this.isDirty=!1}add(e){bg(this.children,e),this.isDirty=!0}remove(e){Ig(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(PL),this.isDirty=!1,this.children.forEach(e)}}function kL(n,e){const t=performance.now(),r=({timestamp:o})=>{const a=o-t;a>=e&&(ls(r),n(a-e))};return et.read(r,!0),()=>ls(r)}function AL(n){window.MotionDebug&&window.MotionDebug.record(n)}function CL(n){return n instanceof SVGElement&&n.tagName!=="svg"}function RL(n,e,t){const r=pn(n)?n:_a(n);return r.start(Sg("",r,e,t)),r.animation}const mw=["","X","Y","Z"],jL={visibility:"hidden"},gw=1e3;let DL=0;const Mi={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function H1({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:o}){return class{constructor(c={},d=e?.()){this.id=DL++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Mi.totalNodes=Mi.resolvedTargetDeltas=Mi.recalculatedProjection=0,this.nodes.forEach(OL),this.nodes.forEach(zL),this.nodes.forEach($L),this.nodes.forEach(ML),AL(Mi)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let p=0;p<this.path.length;p++)this.path[p].shouldResetTransform=!0;this.root===this&&(this.nodes=new NL)}addEventListener(c,d){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new Pg),this.eventHandlers.get(c).add(d)}notifyListeners(c,...d){const p=this.eventHandlers.get(c);p&&p.notify(...d)}hasListeners(c){return this.eventHandlers.has(c)}mount(c,d=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=CL(c),this.instance=c;const{layoutId:p,layout:m,visualElement:x}=this.options;if(x&&!x.current&&x.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),d&&(m||p)&&(this.isLayoutDirty=!0),n){let w;const E=()=>this.root.updateBlockedByResize=!1;n(c,()=>{this.root.updateBlockedByResize=!0,w&&w(),w=kL(E,250),ih.hasAnimatedSinceResize&&(ih.hasAnimatedSinceResize=!1,this.nodes.forEach(vw))})}p&&this.root.registerSharedNode(p,this),this.options.animate!==!1&&x&&(p||m)&&this.addEventListener("didUpdate",({delta:w,hasLayoutChanged:E,hasRelativeTargetChanged:S,layout:V})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const D=this.options.transition||x.getDefaultTransition()||KL,{onLayoutAnimationStart:N,onLayoutAnimationComplete:B}=x.getProps(),U=!this.targetLayout||!G1(this.targetLayout,V)||S,j=!E&&S;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||j||E&&(U||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(w,j);const K={...Tg(D,"layout"),onPlay:N,onComplete:B};(x.shouldReduceMotion||this.options.layoutRoot)&&(K.delay=0,K.type=!1),this.startAnimation(K)}else E||vw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=V})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ls(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(qL),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let x=0;x<this.path.length;x++){const w=this.path[x];w.shouldResetTransform=!0,w.updateScroll("snapshot"),w.options.layoutRoot&&w.willUpdate(!1)}const{layoutId:d,layout:p}=this.options;if(d===void 0&&!p)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(yw);return}this.isUpdating||this.nodes.forEach(FL),this.isUpdating=!1,this.nodes.forEach(BL),this.nodes.forEach(VL),this.nodes.forEach(LL),this.clearAllSnapshots();const d=performance.now();Kt.delta=ti(0,1e3/60,d-Kt.timestamp),Kt.timestamp=d,Kt.isProcessing=!0,Zf.update.process(Kt),Zf.preRender.process(Kt),Zf.render.process(Kt),Kt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(UL),this.sharedNodes.forEach(GL)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,et.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){et.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let p=0;p<this.path.length;p++)this.path[p].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=wt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let d=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(d=!1),d&&(this.scroll={animationId:this.root.animationId,phase:c,isRoot:r(this.instance),offset:t(this.instance)})}resetTransform(){if(!o)return;const c=this.isLayoutDirty||this.shouldResetTransform,d=this.projectionDelta&&!q1(this.projectionDelta),p=this.getTransformTemplate(),m=p?p(this.latestValues,""):void 0,x=m!==this.prevTransformTemplateValue;c&&(d||Oi(this.latestValues)||x)&&(o(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const d=this.measurePageBox();let p=this.removeElementScroll(d);return c&&(p=this.removeTransform(p)),QL(p),{animationId:this.root.animationId,measuredBox:d,layoutBox:p,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:c}=this.options;if(!c)return wt();const d=c.measureViewportBox(),{scroll:p}=this.root;return p&&(Os(d.x,p.offset.x),Os(d.y,p.offset.y)),d}removeElementScroll(c){const d=wt();Dn(d,c);for(let p=0;p<this.path.length;p++){const m=this.path[p],{scroll:x,options:w}=m;if(m!==this.root&&x&&w.layoutScroll){if(x.isRoot){Dn(d,c);const{scroll:E}=this.root;E&&(Os(d.x,-E.offset.x),Os(d.y,-E.offset.y))}Os(d.x,x.offset.x),Os(d.y,x.offset.y)}}return d}applyTransform(c,d=!1){const p=wt();Dn(p,c);for(let m=0;m<this.path.length;m++){const x=this.path[m];!d&&x.options.layoutScroll&&x.scroll&&x!==x.root&&la(p,{x:-x.scroll.offset.x,y:-x.scroll.offset.y}),Oi(x.latestValues)&&la(p,x.latestValues)}return Oi(this.latestValues)&&la(p,this.latestValues),p}removeTransform(c){const d=wt();Dn(d,c);for(let p=0;p<this.path.length;p++){const m=this.path[p];if(!m.instance||!Oi(m.latestValues))continue;tm(m.latestValues)&&m.updateSnapshot();const x=wt(),w=m.measurePageBox();Dn(x,w),hw(d,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,x)}return Oi(this.latestValues)&&hw(d,this.latestValues),d}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Kt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var d;const p=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=p.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=p.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=p.isSharedProjectionDirty);const m=!!this.resumingFrom||this!==p;if(!(c||m&&this.isSharedProjectionDirty||this.isProjectionDirty||!((d=this.parent)===null||d===void 0)&&d.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:w,layoutId:E}=this.options;if(!(!this.layout||!(w||E))){if(this.resolvedRelativeTargetAt=Kt.timestamp,!this.targetDelta&&!this.relativeTarget){const S=this.getClosestProjectingParent();S&&S.layout&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wt(),this.relativeTargetOrigin=wt(),$l(this.relativeTargetOrigin,this.layout.layoutBox,S.layout.layoutBox),Dn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=wt(),this.targetWithTransforms=wt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),YV(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Dn(this.target,this.layout.layoutBox),M1(this.target,this.targetDelta)):Dn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const S=this.getClosestProjectingParent();S&&!!S.resumingFrom==!!this.resumingFrom&&!S.options.layoutScroll&&S.target&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wt(),this.relativeTargetOrigin=wt(),$l(this.relativeTargetOrigin,this.target,S.target),Dn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Mi.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||tm(this.parent.latestValues)||O1(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var c;const d=this.getLead(),p=!!this.resumingFrom||this!==d;let m=!0;if((this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty)&&(m=!1),p&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(m=!1),this.resolvedRelativeTargetAt===Kt.timestamp&&(m=!1),m)return;const{layout:x,layoutId:w}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(x||w))return;Dn(this.layoutCorrected,this.layout.layoutBox);const E=this.treeScale.x,S=this.treeScale.y;iL(this.layoutCorrected,this.treeScale,this.path,p),d.layout&&!d.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(d.target=d.layout.layoutBox);const{target:V}=d;if(!V){this.projectionTransform&&(this.projectionDelta=aa(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=aa(),this.projectionDeltaWithTransform=aa());const D=this.projectionTransform;zl(this.projectionDelta,this.layoutCorrected,V,this.latestValues),this.projectionTransform=pw(this.projectionDelta,this.treeScale),(this.projectionTransform!==D||this.treeScale.x!==E||this.treeScale.y!==S)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",V)),Mi.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),c){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(c,d=!1){const p=this.snapshot,m=p?p.latestValues:{},x={...this.latestValues},w=aa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const E=wt(),S=p?p.source:void 0,V=this.layout?this.layout.source:void 0,D=S!==V,N=this.getStack(),B=!N||N.members.length<=1,U=!!(D&&!B&&this.options.crossfade===!0&&!this.path.some(WL));this.animationProgress=0;let j;this.mixTargetDelta=K=>{const Z=K/1e3;xw(w.x,c.x,Z),xw(w.y,c.y,Z),this.setTargetDelta(w),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&($l(E,this.layout.layoutBox,this.relativeParent.layout.layoutBox),HL(this.relativeTarget,this.relativeTargetOrigin,E,Z),j&&bL(this.relativeTarget,j)&&(this.isProjectionDirty=!1),j||(j=wt()),Dn(j,this.relativeTarget)),D&&(this.animationValues=x,xL(x,m,this.latestValues,Z,U,B)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ls(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=et.update(()=>{ih.hasAnimatedSinceResize=!0,this.currentAnimation=RL(0,gw,{...c,onUpdate:d=>{this.mixTargetDelta(d),c.onUpdate&&c.onUpdate(d)},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(gw),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:d,target:p,layout:m,latestValues:x}=c;if(!(!d||!p||!m)){if(this!==c&&this.layout&&m&&W1(this.options.animationType,this.layout.layoutBox,m.layoutBox)){p=this.target||wt();const w=Tn(this.layout.layoutBox.x);p.x.min=c.target.x.min,p.x.max=p.x.min+w;const E=Tn(this.layout.layoutBox.y);p.y.min=c.target.y.min,p.y.max=p.y.min+E}Dn(d,p),la(d,x),zl(this.projectionDeltaWithTransform,this.layoutCorrected,d,x)}}registerSharedNode(c,d){this.sharedNodes.has(c)||this.sharedNodes.set(c,new IL),this.sharedNodes.get(c).add(d);const m=d.options.initialPromotionConfig;d.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(d):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var c;const{layoutId:d}=this.options;return d?((c=this.getStack())===null||c===void 0?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:d}=this.options;return d?(c=this.getStack())===null||c===void 0?void 0:c.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:d,preserveFollowOpacity:p}={}){const m=this.getStack();m&&m.promote(this,p),c&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetRotation(){const{visualElement:c}=this.options;if(!c)return;let d=!1;const{latestValues:p}=c;if((p.rotate||p.rotateX||p.rotateY||p.rotateZ)&&(d=!0),!d)return;const m={};for(let x=0;x<mw.length;x++){const w="rotate"+mw[x];p[w]&&(m[w]=p[w],c.setStaticValue(w,0))}c.render();for(const x in m)c.setStaticValue(x,m[x]);c.scheduleRender()}getProjectionStyles(c){var d,p;if(!this.instance||this.isSVG)return;if(!this.isVisible)return jL;const m={visibility:""},x=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,m.opacity="",m.pointerEvents=sh(c?.pointerEvents)||"",m.transform=x?x(this.latestValues,""):"none",m;const w=this.getLead();if(!this.projectionDelta||!this.layout||!w.target){const D={};return this.options.layoutId&&(D.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,D.pointerEvents=sh(c?.pointerEvents)||""),this.hasProjected&&!Oi(this.latestValues)&&(D.transform=x?x({},""):"none",this.hasProjected=!1),D}const E=w.animationValues||w.latestValues;this.applyTransformsToTarget(),m.transform=pw(this.projectionDeltaWithTransform,this.treeScale,E),x&&(m.transform=x(E,m.transform));const{x:S,y:V}=this.projectionDelta;m.transformOrigin=`${S.origin*100}% ${V.origin*100}% 0`,w.animationValues?m.opacity=w===this?(p=(d=E.opacity)!==null&&d!==void 0?d:this.latestValues.opacity)!==null&&p!==void 0?p:1:this.preserveOpacity?this.latestValues.opacity:E.opacityExit:m.opacity=w===this?E.opacity!==void 0?E.opacity:"":E.opacityExit!==void 0?E.opacityExit:0;for(const D in bh){if(E[D]===void 0)continue;const{correct:N,applyTo:B}=bh[D],U=m.transform==="none"?E[D]:N(E[D],w);if(B){const j=B.length;for(let K=0;K<j;K++)m[B[K]]=U}else m[D]=U}return this.options.layoutId&&(m.pointerEvents=w===this?sh(c?.pointerEvents)||"":"none"),m}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var d;return(d=c.currentAnimation)===null||d===void 0?void 0:d.stop()}),this.root.nodes.forEach(yw),this.root.sharedNodes.clear()}}}function VL(n){n.updateLayout()}function LL(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:o}=n.layout,{animationType:a}=n.options,c=t.source!==n.layout.source;a==="size"?Ln(w=>{const E=c?t.measuredBox[w]:t.layoutBox[w],S=Tn(E);E.min=r[w].min,E.max=E.min+S}):W1(a,t.layoutBox,r)&&Ln(w=>{const E=c?t.measuredBox[w]:t.layoutBox[w],S=Tn(r[w]);E.max=E.min+S,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[w].max=n.relativeTarget[w].min+S)});const d=aa();zl(d,r,t.layoutBox);const p=aa();c?zl(p,n.applyTransform(o,!0),t.measuredBox):zl(p,r,t.layoutBox);const m=!q1(d);let x=!1;if(!n.resumeFrom){const w=n.getClosestProjectingParent();if(w&&!w.resumeFrom){const{snapshot:E,layout:S}=w;if(E&&S){const V=wt();$l(V,t.layoutBox,E.layoutBox);const D=wt();$l(D,r,S.layoutBox),G1(V,D)||(x=!0),w.options.layoutRoot&&(n.relativeTarget=D,n.relativeTargetOrigin=V,n.relativeParent=w)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:p,layoutDelta:d,hasLayoutChanged:m,hasRelativeTargetChanged:x})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function OL(n){Mi.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function ML(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function UL(n){n.clearSnapshot()}function yw(n){n.clearMeasurements()}function FL(n){n.isLayoutDirty=!1}function BL(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function vw(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function zL(n){n.resolveTargetDelta()}function $L(n){n.calcProjection()}function qL(n){n.resetRotation()}function GL(n){n.removeLeadSnapshot()}function xw(n,e,t){n.translate=lt(e.translate,0,t),n.scale=lt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function ww(n,e,t,r){n.min=lt(e.min,t.min,r),n.max=lt(e.max,t.max,r)}function HL(n,e,t,r){ww(n.x,e.x,t.x,r),ww(n.y,e.y,t.y,r)}function WL(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const KL={duration:.45,ease:[.4,0,.1,1]},_w=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),Ew=_w("applewebkit/")&&!_w("chrome/")?Math.round:mt;function Tw(n){n.min=Ew(n.min),n.max=Ew(n.max)}function QL(n){Tw(n.x),Tw(n.y)}function W1(n,e,t){return n==="position"||n==="preserve-aspect"&&!Zp(fw(e),fw(t),.2)}const YL=H1({attachResizeListener:(n,e)=>Zr(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),up={current:void 0},K1=H1({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!up.current){const n=new YL({});n.mount(window),n.setOptions({layoutScroll:!0}),up.current=n}return up.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),XL={pan:{Feature:fL},drag:{Feature:dL,ProjectionNode:K1,MeasureLayout:B1}},JL=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function ZL(n){const e=JL.exec(n);if(!e)return[,];const[,t,r]=e;return[t,r]}function rm(n,e,t=1){const[r,o]=ZL(n);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const c=a.trim();return A1(c)?parseFloat(c):c}else return Hp(o)?rm(o,e,t+1):o}function eO(n,{...e},t){const r=n.current;if(!(r instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(o=>{const a=o.get();if(!Hp(a))return;const c=rm(a,r);c&&o.set(c)});for(const o in e){const a=e[o];if(!Hp(a))continue;const c=rm(a,r);c&&(e[o]=c,t||(t={}),t[o]===void 0&&(t[o]=a))}return{target:e,transitionEnd:t}}const tO=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Q1=n=>tO.has(n),nO=n=>Object.keys(n).some(Q1),Sw=n=>n===oo||n===Te,bw=(n,e)=>parseFloat(n.split(", ")[e]),Iw=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const o=r.match(/^matrix3d\((.+)\)$/);if(o)return bw(o[1],e);{const a=r.match(/^matrix\((.+)\)$/);return a?bw(a[1],n):0}},rO=new Set(["x","y","z"]),sO=vc.filter(n=>!rO.has(n));function iO(n){const e=[];return sO.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const Ea={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:Iw(4,13),y:Iw(5,14)};Ea.translateX=Ea.x;Ea.translateY=Ea.y;const oO=(n,e,t)=>{const r=e.measureViewportBox(),o=e.current,a=getComputedStyle(o),{display:c}=a,d={};c==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(m=>{d[m]=Ea[m](r,a)}),e.render();const p=e.measureViewportBox();return t.forEach(m=>{const x=e.getValue(m);x&&x.jump(d[m]),n[m]=Ea[m](p,a)}),n},aO=(n,e,t={},r={})=>{e={...e},r={...r};const o=Object.keys(e).filter(Q1);let a=[],c=!1;const d=[];if(o.forEach(p=>{const m=n.getValue(p);if(!n.hasValue(p))return;let x=t[p],w=Il(x);const E=e[p];let S;if(Ph(E)){const V=E.length,D=E[0]===null?1:0;x=E[D],w=Il(x);for(let N=D;N<V&&E[N]!==null;N++)S?vg(Il(E[N])===S):S=Il(E[N])}else S=Il(E);if(w!==S)if(Sw(w)&&Sw(S)){const V=m.get();typeof V=="string"&&m.set(parseFloat(V)),typeof E=="string"?e[p]=parseFloat(E):Array.isArray(E)&&S===Te&&(e[p]=E.map(parseFloat))}else w?.transform&&S?.transform&&(x===0||E===0)?x===0?m.set(S.transform(x)):e[p]=w.transform(E):(c||(a=iO(n),c=!0),d.push(p),r[p]=r[p]!==void 0?r[p]:e[p],m.jump(E))}),d.length){const p=d.indexOf("height")>=0?window.pageYOffset:null,m=oO(e,n,d);return a.length&&a.forEach(([x,w])=>{n.getValue(x).set(w)}),n.render(),ed&&p!==null&&window.scrollTo({top:p}),{target:m,transitionEnd:r}}else return{target:e,transitionEnd:r}};function lO(n,e,t,r){return nO(e)?aO(n,e,t,r):{target:e,transitionEnd:r}}const cO=(n,e,t,r)=>{const o=eO(n,e,r);return e=o.target,r=o.transitionEnd,lO(n,e,t,r)},sm={current:null},Y1={current:!1};function uO(){if(Y1.current=!0,!!ed)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>sm.current=n.matches;n.addListener(e),e()}else sm.current=!1}function hO(n,e,t){const{willChange:r}=e;for(const o in e){const a=e[o],c=t[o];if(pn(a))n.addValue(o,a),Ch(r)&&r.add(o);else if(pn(c))n.addValue(o,_a(a,{owner:n})),Ch(r)&&r.remove(o);else if(c!==a)if(n.hasValue(o)){const d=n.getValue(o);!d.hasAnimated&&d.set(a)}else{const d=n.getStaticValue(o);n.addValue(o,_a(d!==void 0?d:a,{owner:n}))}}for(const o in t)e[o]===void 0&&n.removeValue(o);return e}const Pw=new WeakMap,X1=Object.keys(sc),dO=X1.length,Nw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],fO=cg.length;class pO{constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:o,visualState:a},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>et.render(this.render,!1,!0);const{latestValues:d,renderState:p}=a;this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=p,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=o,this.options=c,this.isControllingVariants=nd(t),this.isVariantNode=VT(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...x}=this.scrapeMotionValuesFromProps(t,{});for(const w in x){const E=x[w];d[w]!==void 0&&pn(E)&&(E.set(d[w],!1),Ch(m)&&m.add(w))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,Pw.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),Y1.current||uO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:sm.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Pw.delete(this.current),this.projection&&this.projection.unmount(),ls(this.notifyUpdate),ls(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const r=io.has(e),o=t.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&et.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{o(),a()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},r,o,a){let c,d;for(let p=0;p<dO;p++){const m=X1[p],{isEnabled:x,Feature:w,ProjectionNode:E,MeasureLayout:S}=sc[m];E&&(c=E),x(t)&&(!this.features[m]&&w&&(this.features[m]=new w(this)),S&&(d=S))}if((this.type==="html"||this.type==="svg")&&!this.projection&&c){this.projection=new c(this.latestValues,this.parent&&this.parent.projection);const{layoutId:p,layout:m,drag:x,dragConstraints:w,layoutScroll:E,layoutRoot:S}=t;this.projection.setOptions({layoutId:p,layout:m,alwaysMeasureLayout:!!x||w&&ia(w),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof m=="string"?m:"both",initialPromotionConfig:a,layoutScroll:E,layoutRoot:S})}return d}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):wt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<Nw.length;r++){const o=Nw[r];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const a=e["on"+o];a&&(this.propEventSubscriptions[o]=this.on(o,a))}this.prevMotionValues=hO(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const t={};for(let r=0;r<fO;r++){const o=cg[r],a=this.props[o];(rc(a)||a===!1)&&(t[o]=a)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=_a(t,{owner:this}),this.addValue(e,r)),r}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props,o=typeof r=="string"||typeof r=="object"?(t=yg(this.props,r))===null||t===void 0?void 0:t[e]:void 0;if(r&&o!==void 0)return o;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!pn(a)?a:this.initialValues[e]!==void 0&&o===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Pg),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class J1 extends pO{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...r},{transformValues:o},a){let c=CV(r,e||{},this);if(o&&(t&&(t=o(t)),r&&(r=o(r)),c&&(c=o(c))),a){kV(this,r,c);const d=cO(this,r,c,t);t=d.transitionEnd,r=d.target}return{transition:e,transitionEnd:t,...r}}}function mO(n){return window.getComputedStyle(n)}class gO extends J1{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(io.has(t)){const r=Eg(t);return r&&r.default||0}else{const r=mO(e),o=(UT(t)?r.getPropertyValue(t):r[t])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:t}){return U1(e,t)}build(e,t,r,o){dg(e,t,r,o.transformTemplate)}scrapeMotionValuesFromProps(e,t){return gg(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;pn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,r,o){GT(e,t,r,o)}}class yO extends J1{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(io.has(t)){const r=Eg(t);return r&&r.default||0}return t=HT.has(t)?t:ag(t),e.getAttribute(t)}measureInstanceViewportBox(){return wt()}scrapeMotionValuesFromProps(e,t){return KT(e,t)}build(e,t,r,o){pg(e,t,r,this.isSVGTag,o.transformTemplate)}renderInstance(e,t,r,o){WT(e,t,r,o)}mount(e){this.isSVGTag=mg(e.tagName),super.mount(e)}}const vO=(n,e)=>hg(n)?new yO(e,{enableHardwareAcceleration:!1}):new gO(e,{enableHardwareAcceleration:!0}),xO={layout:{ProjectionNode:K1,MeasureLayout:B1}},wO={...HV,...d4,...XL,...xO},Re=_D((n,e)=>ZD(n,e,wO,vO));function Z1(){const n=C.useRef(!1);return og(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function _O(){const n=Z1(),[e,t]=C.useState(0),r=C.useCallback(()=>{n.current&&t(e+1)},[e]);return[C.useCallback(()=>et.postRender(r),[r]),e]}class EO extends C.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function TO({children:n,isPresent:e}){const t=C.useId(),r=C.useRef(null),o=C.useRef({width:0,height:0,top:0,left:0});return C.useInsertionEffect(()=>{const{width:a,height:c,top:d,left:p}=o.current;if(e||!r.current||!a||!c)return;r.current.dataset.motionPopId=t;const m=document.createElement("style");return document.head.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${c}px !important;
            top: ${d}px !important;
            left: ${p}px !important;
          }
        `),()=>{document.head.removeChild(m)}},[e]),C.createElement(EO,{isPresent:e,childRef:r,sizeRef:o},C.cloneElement(n,{ref:r}))}const hp=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:o,presenceAffectsLayout:a,mode:c})=>{const d=QT(SO),p=C.useId(),m=C.useMemo(()=>({id:p,initial:e,isPresent:t,custom:o,onExitComplete:x=>{d.set(x,!0);for(const w of d.values())if(!w)return;r&&r()},register:x=>(d.set(x,!1),()=>d.delete(x))}),a?void 0:[t]);return C.useMemo(()=>{d.forEach((x,w)=>d.set(w,!1))},[t]),C.useEffect(()=>{!t&&!d.size&&r&&r()},[t]),c==="popLayout"&&(n=C.createElement(TO,{isPresent:t},n)),C.createElement(Zh.Provider,{value:m},n)};function SO(){return new Map}function bO(n){return C.useEffect(()=>()=>n(),[])}const Ui=n=>n.key||"";function IO(n,e){n.forEach(t=>{const r=Ui(t);e.set(r,t)})}function PO(n){const e=[];return C.Children.forEach(n,t=>{C.isValidElement(t)&&e.push(t)}),e}const NO=({children:n,custom:e,initial:t=!0,onExitComplete:r,exitBeforeEnter:o,presenceAffectsLayout:a=!0,mode:c="sync"})=>{const d=C.useContext(ug).forceRender||_O()[0],p=Z1(),m=PO(n);let x=m;const w=C.useRef(new Map).current,E=C.useRef(x),S=C.useRef(new Map).current,V=C.useRef(!0);if(og(()=>{V.current=!1,IO(m,S),E.current=x}),bO(()=>{V.current=!0,S.clear(),w.clear()}),V.current)return C.createElement(C.Fragment,null,x.map(U=>C.createElement(hp,{key:Ui(U),isPresent:!0,initial:t?void 0:!1,presenceAffectsLayout:a,mode:c},U)));x=[...x];const D=E.current.map(Ui),N=m.map(Ui),B=D.length;for(let U=0;U<B;U++){const j=D[U];N.indexOf(j)===-1&&!w.has(j)&&w.set(j,void 0)}return c==="wait"&&w.size&&(x=[]),w.forEach((U,j)=>{if(N.indexOf(j)!==-1)return;const K=S.get(j);if(!K)return;const Z=D.indexOf(j);let ie=U;if(!ie){const R=()=>{w.delete(j);const I=Array.from(S.keys()).filter(P=>!N.includes(P));if(I.forEach(P=>S.delete(P)),E.current=m.filter(P=>{const L=Ui(P);return L===j||I.includes(L)}),!w.size){if(p.current===!1)return;d(),r&&r()}};ie=C.createElement(hp,{key:Ui(K),isPresent:!1,onExitComplete:R,custom:e,presenceAffectsLayout:a,mode:c},K),w.set(j,ie)}x.splice(Z,0,ie)}),x=x.map(U=>{const j=U.key;return w.has(j)?U:C.createElement(hp,{key:Ui(U),isPresent:!0,presenceAffectsLayout:a,mode:c},U)}),C.createElement(C.Fragment,null,w.size?x:x.map(U=>C.cloneElement(U)))},kO="",Wu=new Map;class AO{constructor(){this.baseURL=kO}async getAuthToken(){return ra.currentUser?await ra.currentUser.getIdToken():null}async request(e,t={}){const r=`${this.baseURL}/api${e}`,o=await this.getAuthToken(),a={"Content-Type":"application/json",...t.headers};o&&(a.Authorization=`Bearer ${o}`);const c={...t,headers:a};try{const d=await fetch(r,c);if(!d.ok){const p=await d.json().catch(()=>({}));throw new Error(p.error||`HTTP ${d.status}`)}return await d.json()}catch(d){throw console.error(`API request failed: ${e}`,d),d}}async getGlyphs(e={}){const t=new URLSearchParams;Object.entries(e).forEach(([a,c])=>{c!=null&&c!==""&&t.append(a,c.toString())});const r=`/get-glyphs${t.toString()?"?"+t.toString():""}`;return(await this.request(r)).glyphs}async getGlyph(e){return(await this.request(`/get-glyph/${e}`)).glyph}async uploadGlyph(e){return await this.request("/upload-glyph",{method:"POST",body:JSON.stringify(e)})}async updateGlyph(e,t){return await this.request(`/update-glyph/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteGlyph(e){return await this.request(`/delete-glyph/${e}`,{method:"DELETE"})}async uploadFile(e,t="images"){const r=new FormData;r.append("file",e),r.append("type",t);const o=await this.getAuthToken(),c=await fetch("/api/upload-file",{method:"POST",headers:{Authorization:o?`Bearer ${o}`:""},body:r});if(!c.ok){const d=await c.json();throw new Error(d.error||"Failed to upload file")}return await c.json()}async deleteFile(e,t){return await this.request("/delete-file",{method:"DELETE",body:JSON.stringify({filename:e,type:t})})}getFileUrl(e,t){return`/api/files/${e}/${t}`}cleanImageUrl(e){if(!e)return e;if(Wu.has(e))return Wu.get(e);let t=e;if(e.startsWith("/api/files/"))return Wu.set(e,t),t;if(e.includes("://")){if(e.includes("127.0.0.1:5000")||e.includes("localhost:5000")){const r=e.match(/\/api\/files\/.*$/);r&&(t=r[0])}else if(e.includes("glyphmart.andreibanu.com")){const r=e.match(/\/api\/files\/.*$/);r&&(t=r[0])}}return Wu.set(e,t),t}async recordView(e){try{return(await this.request("/record-view",{method:"POST",body:JSON.stringify({glyphId:e})})).recorded}catch(t){return console.error("Failed to record view:",t),!1}}async recordDownload(e){try{return(await this.request("/record-download",{method:"POST",body:JSON.stringify({glyphId:e})})).recorded}catch(t){return console.error("Failed to record download:",t),!1}}async toggleLike(e){const t=await this.request("/toggle-like",{method:"POST",body:JSON.stringify({glyphId:e})});return{liked:t.liked,totalLikes:t.totalLikes}}async checkLikeStatus(e){return(await this.request(`/check-like-status?glyphId=${e}`)).liked}async getUserLikes(){return(await this.request("/get-user-likes")).glyphs}async getUser(e){return(await this.request(`/get-user/${e}`)).user}async getUserByUsername(e){return(await this.request(`/get-user-by-username/${e}`)).user}async updateUser(e){return await this.request("/update-user",{method:"POST",body:JSON.stringify(e)})}async deleteUserData(){return await this.request("/delete-user-data",{method:"DELETE"})}async healthCheck(){return await this.request("/health")}async getAdminStats(){return await this.request("/admin/stats")}async getAllUsers(){return(await this.request("/admin/users")).users}async adminUpdateUser(e,t){return await this.request(`/admin/users/${e}`,{method:"PUT",body:JSON.stringify(t)})}async makeUserAdmin(e){return await this.request(`/admin/make-admin/${e}`,{method:"POST"})}async addAdminByEmail(e){return await this.request("/admin/add-admin",{method:"POST",body:JSON.stringify({email:e})})}async adminDeleteGlyph(e){return await this.request(`/admin/glyphs/${e}`,{method:"DELETE"})}}const Xe=new AO,fn=n=>Xe.cleanImageUrl(n),CO=()=>{const[n,e]=C.useState(!1),[t,r]=C.useState(""),{currentUser:o,userProfile:a,logout:c}=cr(),d=ar(),p=Zi(),m=o?.uid==="9H3pw5zS6GRDFTZaoYspEmruORj2"||a?.isAdmin===!0,x=async()=>{try{await c(),d("/")}catch(E){console.error("Failed to log out:",E)}},w=E=>{E.preventDefault(),t.trim()&&d(`/search?q=${encodeURIComponent(t.trim())}`)};return h.jsxs("nav",{className:"bg-nothing-black border-b border-nothing-gray-800 sticky top-0 z-50",children:[h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[h.jsxs("div",{className:"flex justify-between items-center h-16",children:[h.jsx("div",{className:"flex-shrink-0",children:h.jsxs(Ge,{to:"/",className:"flex items-center space-x-2",children:[h.jsx("div",{className:"w-8 h-8 bg-nothing-red rounded-full flex items-center justify-center",children:h.jsx("div",{className:"w-4 h-4 bg-nothing-white rounded-full animate-glow"})}),h.jsx("span",{className:"text-xl font-bold text-nothing-white font-nothing",children:"GlyphMart"})]})}),p.pathname!=="/search"&&p.pathname!=="/request-glyphs"&&h.jsx("div",{className:"hidden md:block flex-1 max-w-lg mx-8",children:h.jsxs("form",{onSubmit:w,className:"relative",children:[h.jsx("input",{type:"text",value:t,onChange:E=>r(E.target.value),placeholder:"Search glyphs...",className:"w-full bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg py-2 pl-10 pr-4 text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200"}),h.jsx(Qr,{className:"absolute left-3 top-2.5 h-5 w-5 text-nothing-gray-400"})]})}),h.jsx("div",{className:"hidden md:flex items-center space-x-4",children:o?h.jsxs(h.Fragment,{children:[h.jsxs(Ge,{to:"/upload",className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center space-x-2",children:[h.jsx(kT,{className:"h-4 w-4"}),h.jsx("span",{children:"Upload Glyph"})]}),h.jsxs("div",{className:"relative group",children:[h.jsxs("button",{className:"flex items-center space-x-2 text-nothing-white hover:text-nothing-gray-300 transition-colors duration-200",children:[h.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden border border-nothing-gray-600",children:a?.profilePicture||o.photoURL?h.jsx("img",{src:fn(a?.profilePicture||o.photoURL),alt:"Profile",loading:"lazy",className:"w-full h-full object-cover"}):h.jsx("div",{className:"w-full h-full bg-nothing-gray-700 flex items-center justify-center",children:h.jsx(Qs,{className:"h-4 w-4"})})}),h.jsx("span",{className:"font-medium",children:a?.username||o.displayName})]}),h.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200",children:h.jsxs("div",{className:"py-1",children:[h.jsxs(Ge,{to:`/storefront/${a?.username||o.displayName}`,className:"block px-4 py-2 text-sm text-nothing-white hover:bg-nothing-gray-800 transition-colors duration-200 flex items-center space-x-2",children:[h.jsx(Sx,{className:"h-4 w-4"}),h.jsx("span",{children:"My Storefront"})]}),h.jsxs(Ge,{to:"/liked",className:"block px-4 py-2 text-sm text-nothing-white hover:bg-nothing-gray-800 transition-colors duration-200 flex items-center space-x-2",children:[h.jsx(sr,{className:"h-4 w-4"}),h.jsx("span",{children:"Liked Posts"})]}),h.jsxs(Ge,{to:"/request-glyphs",className:"block px-4 py-2 text-sm text-nothing-white hover:bg-nothing-gray-800 transition-colors duration-200 flex items-center space-x-2",children:[h.jsx($p,{className:"h-4 w-4"}),h.jsx("span",{children:"Request Glyphs"})]}),h.jsxs(Ge,{to:"/settings",className:"block px-4 py-2 text-sm text-nothing-white hover:bg-nothing-gray-800 transition-colors duration-200 flex items-center space-x-2",children:[h.jsx(qp,{className:"h-4 w-4"}),h.jsx("span",{children:"Settings"})]}),m&&h.jsxs(Ge,{to:"/admin",className:"block px-4 py-2 text-sm text-nothing-white hover:bg-nothing-gray-800 transition-colors duration-200 flex items-center space-x-2",children:[h.jsx(sa,{className:"h-4 w-4"}),h.jsx("span",{children:"Admin Panel"})]}),h.jsxs("button",{onClick:x,className:"w-full text-left block px-4 py-2 text-sm text-nothing-white hover:bg-nothing-gray-800 transition-colors duration-200 flex items-center space-x-2",children:[h.jsx(Ex,{className:"h-4 w-4"}),h.jsx("span",{children:"Logout"})]})]})})]})]}):h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx(Ge,{to:"/login",className:"text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200",children:"Login"}),h.jsx(Ge,{to:"/signup",className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",children:"Sign Up"})]})}),h.jsx("div",{className:"md:hidden",children:h.jsx("button",{onClick:()=>e(!n),className:"text-nothing-white hover:text-nothing-gray-300 transition-colors duration-200",children:n?h.jsx(CT,{className:"h-6 w-6"}):h.jsx(sD,{className:"h-6 w-6"})})})]}),h.jsx("div",{className:"md:hidden pb-4",children:h.jsxs("form",{onSubmit:w,className:"relative",children:[h.jsx("input",{type:"text",value:t,onChange:E=>r(E.target.value),placeholder:"Search glyphs...",className:"w-full bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg py-2 pl-10 pr-4 text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200"}),h.jsx(Qr,{className:"absolute left-3 top-2.5 h-5 w-5 text-nothing-gray-400"})]})})]}),h.jsx(NO,{children:n&&h.jsx(Re.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden bg-nothing-gray-900 border-t border-nothing-gray-800",children:h.jsx("div",{className:"px-4 py-4 space-y-4",children:o?h.jsxs(h.Fragment,{children:[h.jsx(Ge,{to:"/upload",className:"block bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 text-center",onClick:()=>e(!1),children:"Upload Glyph"}),h.jsxs(Ge,{to:`/storefront/${a?.username||o.displayName}`,className:"block text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200 flex items-center space-x-2",onClick:()=>e(!1),children:[h.jsx(Sx,{className:"h-4 w-4"}),h.jsx("span",{children:"My Storefront"})]}),h.jsxs(Ge,{to:"/liked",className:"block text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200 flex items-center space-x-2",onClick:()=>e(!1),children:[h.jsx(sr,{className:"h-4 w-4"}),h.jsx("span",{children:"Liked Posts"})]}),h.jsxs(Ge,{to:"/settings",className:"block text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200 flex items-center space-x-2",onClick:()=>e(!1),children:[h.jsx(qp,{className:"h-4 w-4"}),h.jsx("span",{children:"Settings"})]}),m&&h.jsxs(Ge,{to:"/admin",className:"block text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200 flex items-center space-x-2",onClick:()=>e(!1),children:[h.jsx(sa,{className:"h-4 w-4"}),h.jsx("span",{children:"Admin Panel"})]}),h.jsxs("button",{onClick:()=>{x(),e(!1)},className:"block w-full text-left text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200 flex items-center space-x-2",children:[h.jsx(Ex,{className:"h-4 w-4"}),h.jsx("span",{children:"Logout"})]})]}):h.jsxs(h.Fragment,{children:[h.jsx(Ge,{to:"/login",className:"block text-nothing-white hover:text-nothing-gray-300 font-medium transition-colors duration-200",onClick:()=>e(!1),children:"Login"}),h.jsx(Ge,{to:"/signup",className:"block bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 text-center",onClick:()=>e(!1),children:"Sign Up"})]})})})})]})},Ng=jh.memo(({glyph:n})=>{const e=ar(),t=C.useMemo(()=>n.images&&n.images.length>0?fn(n.images[0]):null,[n.images]),r=()=>{e(`/glyph/${n.id}`)},o=a=>{a.stopPropagation()};return h.jsx(Re.div,{whileHover:{y:-5},className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg overflow-hidden hover:border-nothing-gray-700 transition-all duration-300",children:h.jsxs("div",{className:"cursor-pointer",onClick:r,children:[h.jsxs("div",{className:"aspect-square bg-nothing-gray-800 relative overflow-hidden",children:[t?h.jsx("img",{src:t,alt:n.title,loading:"lazy",className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"}):h.jsx("div",{className:"w-full h-full flex items-center justify-center",children:h.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center glyph-animation",children:h.jsx(_r,{className:"h-8 w-8 text-nothing-white"})})}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-nothing-black/80 via-transparent to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300",children:h.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:h.jsxs("div",{className:"flex items-center justify-between text-nothing-white text-sm",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(as,{className:"h-4 w-4"}),h.jsx("span",{children:n.downloads||0})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(sr,{className:"h-4 w-4"}),h.jsx("span",{children:n.likes||0})]})]})})})]}),h.jsxs("div",{className:"p-4",children:[h.jsx("h3",{className:"text-nothing-white font-semibold text-lg mb-2 truncate",children:n.title}),h.jsx("p",{className:"text-nothing-gray-400 text-sm mb-3 line-clamp-2",children:n.description}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs(Ge,{to:`/storefront/${n.creatorUsername}`,className:"text-nothing-red hover:text-red-400 text-sm font-medium transition-colors duration-200",onClick:o,children:["@",n.creatorUsername]}),h.jsxs("div",{className:"flex items-center space-x-4 text-nothing-gray-500 text-sm",children:[h.jsxs("div",{className:"flex items-center space-x-1",children:[h.jsx(as,{className:"h-3 w-3"}),h.jsx("span",{children:n.downloads||0})]}),h.jsxs("div",{className:"flex items-center space-x-1",children:[h.jsx(Fn,{className:"h-3 w-3"}),h.jsx("span",{children:n.views||0})]})]})]})]})]})})});Ng.displayName="GlyphCard";const RO=()=>{const[n,e]=C.useState([]),[t,r]=C.useState([]),[o,a]=C.useState(!0),[c,d]=C.useState("latest");return C.useEffect(()=>{(async()=>{try{const m=await Xe.getGlyphs({sort:"latest",limit:12}),x=await Xe.getGlyphs({sort:"popular",limit:12});e(m),r(x)}catch(m){console.error("Error fetching glyphs:",m)}finally{a(!1)}})()},[]),o?h.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-4 glyph-animation",children:h.jsx(_r,{className:"h-8 w-8 text-nothing-white"})}),h.jsx("p",{className:"text-nothing-gray-400",children:"Loading latest glyphs..."})]})}):h.jsxs("div",{className:"min-h-screen bg-nothing-black",children:[h.jsxs("section",{className:"relative py-20 px-4 sm:px-6 lg:px-8",children:[h.jsx("div",{className:"max-w-7xl mx-auto text-center",children:h.jsxs(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:[h.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-nothing-white mb-6 font-nothing",children:["Glyph",h.jsx("span",{className:"text-nothing-red",children:"Mart"})]}),h.jsx("p",{className:"text-xl md:text-2xl text-nothing-gray-300 mb-8 max-w-3xl mx-auto",children:"Discover, share, and download custom Nothing Phone(3) glyphs created by the community"}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[h.jsx(Ge,{to:"/search",className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-8 py-3 rounded-lg font-semibold text-lg transition-colors duration-200",children:"Browse Glyphs"}),h.jsx(Ge,{to:"/upload",className:"border border-nothing-gray-700 hover:border-nothing-gray-600 text-nothing-white px-8 py-3 rounded-lg font-semibold text-lg transition-colors duration-200",children:"Upload Your Glyph"}),h.jsx(Ge,{to:"/request-glyphs",className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-nothing-white px-8 py-3 rounded-lg font-semibold text-lg transition-colors duration-200",children:"Request Glyph Toys"})]})]})}),h.jsx("div",{className:"absolute top-1/2 left-1/4 transform -translate-y-1/2 opacity-20",children:h.jsx("div",{className:"w-20 h-20 bg-nothing-red rounded-full flex items-center justify-center animate-float",children:h.jsx(_r,{className:"h-10 w-10 text-nothing-white"})})}),h.jsx("div",{className:"absolute top-1/3 right-1/4 transform -translate-y-1/2 opacity-10",children:h.jsx("div",{className:"w-16 h-16 bg-nothing-white rounded-full flex items-center justify-center animate-float",style:{animationDelay:"1s"},children:h.jsx(_r,{className:"h-8 w-8 text-nothing-black"})})})]}),h.jsx("section",{className:"px-4 sm:px-6 lg:px-8 mb-8",children:h.jsx("div",{className:"max-w-7xl mx-auto",children:h.jsxs("div",{className:"flex space-x-4 border-b border-nothing-gray-800",children:[h.jsxs("button",{onClick:()=>d("latest"),className:`flex items-center space-x-2 px-4 py-3 font-medium border-b-2 transition-colors duration-200 ${c==="latest"?"border-nothing-red text-nothing-red":"border-transparent text-nothing-gray-400 hover:text-nothing-white"}`,children:[h.jsx(IT,{className:"h-4 w-4"}),h.jsx("span",{children:"Latest"})]}),h.jsxs("button",{onClick:()=>d("popular"),className:`flex items-center space-x-2 px-4 py-3 font-medium border-b-2 transition-colors duration-200 ${c==="popular"?"border-nothing-red text-nothing-red":"border-transparent text-nothing-gray-400 hover:text-nothing-white"}`,children:[h.jsx(AT,{className:"h-4 w-4"}),h.jsx("span",{children:"Popular"})]})]})})}),h.jsx("section",{className:"px-4 sm:px-6 lg:px-8 pb-20",children:h.jsxs("div",{className:"max-w-7xl mx-auto",children:[h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:(c==="latest"?n:t).map((p,m)=>h.jsx(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:m*.1},children:h.jsx(Ng,{glyph:p})},p.id))}),(c==="latest"?n:t).length===0&&h.jsxs("div",{className:"text-center py-12",children:[h.jsx("div",{className:"w-16 h-16 bg-nothing-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx(_r,{className:"h-8 w-8 text-nothing-gray-600"})}),h.jsx("p",{className:"text-nothing-gray-400 text-lg",children:"No glyphs found"}),h.jsx("p",{className:"text-nothing-gray-500 text-sm mt-2",children:"Be the first to share your custom Nothing Phone(3) glyph!"})]})]})}),h.jsx("footer",{className:"px-4 sm:px-6 lg:px-8 pb-8",children:h.jsx("div",{className:"max-w-7xl mx-auto border-t border-nothing-gray-900 pt-6",children:h.jsxs("div",{className:"text-center space-y-4",children:[h.jsxs("div",{className:"mb-4",children:[h.jsx("p",{className:"text-nothing-gray-400 text-sm mb-3",children:"Enjoying GlyphMart? Support the development!"}),h.jsxs("a",{href:"https://buymeacoffee.com/PzmuV1517",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-2 bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded-lg font-medium text-sm transition-colors duration-200",children:[h.jsx("span",{children:""}),h.jsx("span",{children:"Buy me a coffee"})]})]}),h.jsx("div",{children:h.jsxs("p",{className:"text-nothing-gray-500 text-sm mb-2",children:["Looking for tones instead? Check out"," ",h.jsx("a",{href:"https://glyphtones.firu.dev/",target:"_blank",rel:"noopener noreferrer",className:"text-nothing-gray-400 hover:text-nothing-gray-300 underline transition-colors duration-200 font-medium",children:"GlyphTones"})," ","by Firu - great work!"]})})]})})})]})},jO=()=>{const[n,e]=C.useState({email:"",password:""}),[t,r]=C.useState(!1),[o,a]=C.useState(!1),[c,d]=C.useState(""),{signin:p}=cr(),m=ar(),x=E=>{e({...n,[E.target.name]:E.target.value}),d("")},w=async E=>{E.preventDefault(),a(!0),d("");try{await p(n.email,n.password),m("/")}catch(S){switch(console.error("Login error:",S),S.code){case"auth/user-not-found":d("No account found with this email address.");break;case"auth/wrong-password":d("Incorrect password.");break;case"auth/invalid-email":d("Invalid email address.");break;case"auth/too-many-requests":d("Too many failed attempts. Please try again later.");break;default:d("Failed to sign in. Please try again.")}}finally{a(!1)}};return h.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"max-w-md w-full space-y-8",children:[h.jsxs(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center",children:[h.jsx("div",{className:"flex justify-center mb-6",children:h.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center glyph-animation",children:h.jsx(_r,{className:"h-8 w-8 text-nothing-white"})})}),h.jsx("h2",{className:"text-3xl font-bold text-nothing-white font-nothing",children:"Welcome back"}),h.jsx("p",{className:"mt-2 text-nothing-gray-400",children:"Sign in to your GlyphMart account"})]}),h.jsxs(Re.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"mt-8 space-y-6",onSubmit:w,children:[h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:h.jsx(ig,{className:"h-5 w-5 text-nothing-gray-400"})}),h.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n.email,onChange:x,className:"appearance-none relative block w-full px-10 py-3 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Email address"})]})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:h.jsx(zs,{className:"h-5 w-5 text-nothing-gray-400"})}),h.jsx("input",{id:"password",name:"password",type:t?"text":"password",autoComplete:"current-password",required:!0,value:n.password,onChange:x,className:"appearance-none relative block w-full px-10 py-3 pr-10 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Password"}),h.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>r(!t),children:t?h.jsx(fa,{className:"h-5 w-5 text-nothing-gray-400 hover:text-nothing-gray-300"}):h.jsx(Fn,{className:"h-5 w-5 text-nothing-gray-400 hover:text-nothing-gray-300"})})]})]})]}),c&&h.jsx(Re.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-900/20 border border-red-700 text-red-400 px-4 py-3 rounded-lg text-sm",children:c}),h.jsx("div",{className:"flex items-center justify-between",children:h.jsx("div",{className:"text-sm",children:h.jsx(Ge,{to:"/forgot-password",className:"text-nothing-red hover:text-red-400 transition-colors duration-200",children:"Forgot your password?"})})}),h.jsx("div",{children:h.jsx("button",{type:"submit",disabled:o,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-nothing-white bg-nothing-red hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nothing-red disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:o?h.jsxs("div",{className:"flex items-center",children:[h.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-nothing-white mr-2"}),"Signing in..."]}):"Sign in"})}),h.jsx("div",{className:"text-center",children:h.jsxs("p",{className:"text-nothing-gray-400",children:["Don't have an account?"," ",h.jsx(Ge,{to:"/signup",className:"text-nothing-red hover:text-red-400 font-medium transition-colors duration-200",children:"Sign up"})]})})]})]})})},DO=()=>{const[n,e]=C.useState({email:"",username:"",displayName:"",password:"",confirmPassword:""}),[t,r]=C.useState(!1),[o,a]=C.useState(!1),[c,d]=C.useState(!1),[p,m]=C.useState(""),{signup:x}=cr(),w=ar(),E=D=>{e({...n,[D.target.name]:D.target.value}),m("")},S=()=>n.password!==n.confirmPassword?(m("Passwords do not match"),!1):n.password.length<6?(m("Password must be at least 6 characters long"),!1):n.username.length<3?(m("Username must be at least 3 characters long"),!1):/^[a-zA-Z0-9_]+$/.test(n.username)?!0:(m("Username can only contain letters, numbers, and underscores"),!1),V=async D=>{if(D.preventDefault(),d(!0),m(""),!S()){d(!1);return}try{await x(n.email,n.password,n.username,n.displayName),w("/")}catch(N){switch(console.error("Signup error:",N),N.code){case"auth/email-already-in-use":m("An account with this email already exists.");break;case"auth/invalid-email":m("Invalid email address.");break;case"auth/weak-password":m("Password is too weak.");break;default:m("Failed to create account. Please try again.")}}finally{d(!1)}};return h.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center px-4 sm:px-6 lg:px-8 py-12",children:h.jsxs("div",{className:"max-w-md w-full space-y-8",children:[h.jsxs(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center",children:[h.jsx("div",{className:"flex justify-center mb-6",children:h.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center glyph-animation",children:h.jsx(_r,{className:"h-8 w-8 text-nothing-white"})})}),h.jsx("h2",{className:"text-3xl font-bold text-nothing-white font-nothing",children:"Join GlyphMart"}),h.jsx("p",{className:"mt-2 text-nothing-gray-400",children:"Create your account and start sharing glyphs"})]}),h.jsxs(Re.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"mt-8 space-y-6",onSubmit:V,children:[h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:h.jsx(ig,{className:"h-5 w-5 text-nothing-gray-400"})}),h.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n.email,onChange:E,className:"appearance-none relative block w-full px-10 py-3 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Email address"})]})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"username",className:"sr-only",children:"Username"}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:h.jsx(Yj,{className:"h-5 w-5 text-nothing-gray-400"})}),h.jsx("input",{id:"username",name:"username",type:"text",autoComplete:"username",required:!0,value:n.username,onChange:E,className:"appearance-none relative block w-full px-10 py-3 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Username"})]})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"displayName",className:"sr-only",children:"Display Name"}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:h.jsx(Qs,{className:"h-5 w-5 text-nothing-gray-400"})}),h.jsx("input",{id:"displayName",name:"displayName",type:"text",autoComplete:"name",required:!0,value:n.displayName,onChange:E,className:"appearance-none relative block w-full px-10 py-3 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Display Name"})]})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:h.jsx(zs,{className:"h-5 w-5 text-nothing-gray-400"})}),h.jsx("input",{id:"password",name:"password",type:t?"text":"password",autoComplete:"new-password",required:!0,value:n.password,onChange:E,className:"appearance-none relative block w-full px-10 py-3 pr-10 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Password"}),h.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>r(!t),children:t?h.jsx(fa,{className:"h-5 w-5 text-nothing-gray-400 hover:text-nothing-gray-300"}):h.jsx(Fn,{className:"h-5 w-5 text-nothing-gray-400 hover:text-nothing-gray-300"})})]})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"confirmPassword",className:"sr-only",children:"Confirm Password"}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:h.jsx(zs,{className:"h-5 w-5 text-nothing-gray-400"})}),h.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:o?"text":"password",autoComplete:"new-password",required:!0,value:n.confirmPassword,onChange:E,className:"appearance-none relative block w-full px-10 py-3 pr-10 border border-nothing-gray-700 placeholder-nothing-gray-400 text-nothing-white bg-nothing-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-nothing-red focus:z-10 transition-all duration-200",placeholder:"Confirm Password"}),h.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>a(!o),children:o?h.jsx(fa,{className:"h-5 w-5 text-nothing-gray-400 hover:text-nothing-gray-300"}):h.jsx(Fn,{className:"h-5 w-5 text-nothing-gray-400 hover:text-nothing-gray-300"})})]})]})]}),p&&h.jsx(Re.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-900/20 border border-red-700 text-red-400 px-4 py-3 rounded-lg text-sm",children:p}),h.jsx("div",{children:h.jsx("button",{type:"submit",disabled:c,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-nothing-white bg-nothing-red hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-nothing-red disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:c?h.jsxs("div",{className:"flex items-center",children:[h.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-nothing-white mr-2"}),"Creating account..."]}):"Create Account"})}),h.jsx("div",{className:"text-center",children:h.jsxs("p",{className:"text-nothing-gray-400",children:["Already have an account?"," ",h.jsx(Ge,{to:"/login",className:"text-nothing-red hover:text-red-400 font-medium transition-colors duration-200",children:"Sign in"})]})})]})]})})},oc=({onFileUpload:n,acceptedTypes:e="images",multiple:t=!1,maxFiles:r=5})=>{const[o,a]=C.useState(!1),[c,d]=C.useState([]),[p,m]=C.useState(!1),x=C.useRef(null),w=()=>{switch(e){case"images":return"image/png,image/jpeg,image/jpg,image/gif,image/webp";case"apks":return".apk";case"profile":return"image/png,image/jpeg,image/jpg,image/gif,image/webp";default:return""}},E=j=>j.type?.startsWith("image/")?h.jsx(zp,{className:"w-8 h-8 text-blue-500"}):h.jsx(PT,{className:"w-8 h-8 text-gray-500"}),S=j=>{const K=Array.from(j);if(!t&&K.length>1){alert("Only one file is allowed");return}if(t&&c.length+K.length>r){alert(`Maximum ${r} files allowed`);return}K.forEach(V)},V=async j=>{if(j){a(!0);try{const K=await Xe.uploadFile(j,e),Z={id:Date.now()+Math.random(),name:j.name,url:K.url,thumbnail:K.thumbnail,filename:K.filename,type:K.type,file:j};d(ie=>[...ie,Z]),n(Z)}catch(K){console.error("Upload failed:",K),alert("Upload failed: "+K.message)}finally{a(!1)}}},D=async j=>{try{j.filename&&await Xe.deleteFile(j.filename,j.type),d(K=>K.filter(Z=>Z.id!==j.id)),n(null,j)}catch(K){console.error("Failed to delete file:",K),alert("Failed to delete file: "+K.message)}},N=j=>{j.preventDefault(),j.stopPropagation(),j.type==="dragenter"||j.type==="dragover"?m(!0):j.type==="dragleave"&&m(!1)},B=j=>{j.preventDefault(),j.stopPropagation(),m(!1),j.dataTransfer.files&&j.dataTransfer.files[0]&&S(j.dataTransfer.files)},U=()=>{x.current?.click()};return h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:`border-2 border-dashed rounded-lg p-6 text-center transition-colors cursor-pointer
          ${p?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}
          ${o?"opacity-50 pointer-events-none":""}`,onDragEnter:N,onDragLeave:N,onDragOver:N,onDrop:B,onClick:U,children:[h.jsx("input",{ref:x,type:"file",multiple:t,accept:w(),onChange:j=>S(j.target.files),className:"hidden"}),h.jsx(Gp,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),h.jsx("p",{className:"text-lg font-medium text-gray-700 mb-2",children:o?"Uploading...":`Upload ${e==="apks"?"APK file":"images"}`}),h.jsx("p",{className:"text-sm text-gray-500",children:"Drag and drop files here, or click to select files"}),e==="images"&&h.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Supported: PNG, JPG, JPEG, GIF, WebP (max 50MB each)"}),e==="apks"&&h.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Supported: APK files (max 50MB)"})]}),c.length>0&&h.jsxs("div",{className:"space-y-2",children:[h.jsx("h4",{className:"font-medium text-gray-700",children:"Uploaded Files:"}),h.jsx("div",{className:"grid gap-2",children:c.map(j=>h.jsxs(Re.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[j.thumbnail?h.jsx("img",{src:fn(j.thumbnail),alt:"Preview",className:"w-10 h-10 object-cover rounded"}):E(j.file),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium text-gray-700 truncate max-w-48",children:j.name}),h.jsxs("p",{className:"text-xs text-gray-500",children:[e==="images"?"Image":"APK","  Uploaded"]})]})]}),h.jsx("button",{onClick:()=>D(j),className:"p-1 text-red-500 hover:text-red-700 transition-colors",title:"Remove file",children:h.jsx(CT,{className:"w-4 h-4"})})]},j.id))})]})]})},VO=()=>{const{id:n}=Ow(),[e,t]=C.useState(null),[r,o]=C.useState(!0),[a,c]=C.useState(!1),[d,p]=C.useState(!1),[m,x]=C.useState(!1),[w,E]=C.useState(!1),{currentUser:S,userProfile:V}=cr(),[D,N]=C.useState(!1),[B,U]=C.useState(null),[j,K]=C.useState(!1),[Z,ie]=C.useState(""),[R,I]=C.useState(!1),[P,L]=C.useState(!1),[F,$]=C.useState(!1),[A,Ie]=C.useState([]),$e=ar();C.useEffect(()=>{n&&(async()=>{try{const ue=await Xe.getGlyph(n);if(ue.createdAt&&(ue.createdAt=new Date(ue.createdAt)),t(ue),await Xe.recordView(n),S){const ve=await Xe.checkLikeStatus(n);p(ve)}else p(!1)}catch(ue){console.error("Error fetching glyph:",ue),ue.message.includes("not found")&&$e("/404")}finally{o(!1)}})()},[n,$e,S]);const je=async()=>{if(!(!e.apkUrl&&!e.githubUrl)){if(e.apkUrl)E(!0);else if(e.githubUrl){window.open(e.githubUrl,"_blank");try{await Xe.recordDownload(n)&&t(ue=>({...ue,downloads:(ue.downloads||0)+1}))}catch(le){console.error("Error updating download count:",le)}}}},Ce=async()=>{c(!0);try{const le=await Xe.recordDownload(n),ue=document.createElement("a");ue.href=e.apkUrl,ue.download=`${e.title.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.apk`,document.body.appendChild(ue),ue.click(),document.body.removeChild(ue),le&&t(ve=>({...ve,downloads:(ve.downloads||0)+1}))}catch(le){console.error("Error downloading glyph:",le)}finally{c(!1),E(!1)}},oe=async()=>{if(!S||m){S||$e("/login");return}x(!0);try{const le=await Xe.toggleLike(n);p(le.liked),t(ue=>({...ue,likes:le.totalLikes}))}catch(le){console.error("Error liking glyph:",le)}finally{x(!1)}},q=async()=>{const le=window.location.href;if(navigator.share)try{await navigator.share({title:e.title,text:e.description,url:le})}catch(ue){console.error("Error sharing:",ue),X(le)}else X(le)},X=async le=>{try{await navigator.clipboard.writeText(le),alert("Link copied to clipboard!")}catch(ue){console.error("Error copying to clipboard:",ue)}};C.useEffect(()=>{D&&e&&U({title:e.title,description:e.description,apkUrl:e.apkUrl||"",githubUrl:e.githubUrl||"",instructions:e.instructions||"",images:e.images||[]})},[D,e]);const O=le=>{const{name:ue,value:ve}=le.target;U(De=>({...De,[ue]:ve})),ie("")},J=(le,ue)=>{le?(Ie(ve=>[...ve,le]),U(ve=>({...ve,images:[...ve.images,le.url]}))):ue&&(Ie(ve=>ve.filter(De=>De.id!==ue.id)),U(ve=>({...ve,images:ve.images.filter(De=>De!==ue.url)})))},fe=async le=>{le.preventDefault(),K(!0),ie("");try{await Xe.updateGlyph(e.id,{title:B.title,description:B.description,apkUrl:B.apkUrl,githubUrl:B.githubUrl,instructions:B.instructions,images:B.images}),N(!1),t(ue=>({...ue,...B}))}catch(ue){ie("Failed to update glyph: "+ue.message)}finally{K(!1)}};return r?h.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-4 glyph-animation",children:h.jsx("div",{className:"w-8 h-8 bg-nothing-white rounded-full"})}),h.jsx("p",{className:"text-nothing-gray-400",children:"Loading glyph..."})]})}):e?e.deleted?h.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("h1",{className:"text-2xl font-bold text-red-500 mb-4",children:"Glyph Deleted"}),h.jsx("p",{className:"text-nothing-gray-400 mb-6",children:"This glyph has been deleted by its creator and is no longer available."}),h.jsx(Ge,{to:"/",className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-6 py-3 rounded-lg font-medium transition-colors duration-200",children:"Return to home"})]})}):h.jsxs("div",{className:"min-h-screen bg-nothing-black",children:[h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[h.jsxs("div",{className:"space-y-4",children:[h.jsx(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"aspect-square bg-nothing-gray-900 rounded-lg overflow-hidden",children:e.images&&e.images.length>0?h.jsx("img",{src:fn(e.images[0]),alt:e.title,loading:"lazy",className:"w-full h-full object-cover"}):h.jsx("div",{className:"w-full h-full flex items-center justify-center",children:h.jsx("div",{className:"w-24 h-24 bg-nothing-red rounded-full flex items-center justify-center glyph-animation",children:h.jsx("div",{className:"w-12 h-12 bg-nothing-white rounded-full"})})})}),V&&e.creatorUsername===V.username&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex space-x-3 mt-6",children:[h.jsx("button",{type:"button",onClick:()=>N(!0),className:"px-6 py-3 bg-nothing-gray-700 hover:bg-nothing-gray-800 text-nothing-white rounded-lg font-medium transition-colors duration-200",children:"Edit Glyph"}),h.jsx("button",{type:"button",onClick:()=>I(!0),className:"px-6 py-3 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200",children:"Delete Glyph"})]}),R&&h.jsx("div",{className:"fixed inset-0 bg-nothing-black/80 flex items-center justify-center z-50 p-4",children:h.jsxs(Re.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6 max-w-md w-full",children:[h.jsxs("div",{className:"text-center mb-6",children:[h.jsx("h2",{className:"text-2xl font-bold text-nothing-white mb-4",children:"Delete Glyph?"}),h.jsx("p",{className:"text-nothing-gray-300 mb-4",children:"Are you sure you want to permanently delete this glyph and all its related data? This action cannot be undone."})]}),h.jsxs("div",{className:"flex space-x-3",children:[h.jsx("button",{onClick:async()=>{if(!P){L(!0);try{await Xe.deleteGlyph(e.id)}catch(le){console.error("Error deleting glyph:",le)}finally{L(!1),I(!1),$e("/")}}},disabled:P,className:"flex-1 bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50",children:P?"Deleting...":"Yes, Delete"}),h.jsx("button",{onClick:()=>I(!1),disabled:P,className:"px-4 py-2 border border-nothing-gray-700 text-nothing-white hover:border-nothing-gray-600 rounded-lg font-medium transition-colors duration-200",children:"Cancel"})]})]})})]})]}),h.jsxs(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-bold text-nothing-white mb-4 font-nothing",children:e.title}),h.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[h.jsxs(Ge,{to:`/storefront/${e.creatorUsername||e.creatorId}`,className:"flex items-center space-x-2 text-nothing-red hover:text-red-400 transition-colors duration-200",children:[h.jsx(Qs,{className:"h-4 w-4"}),h.jsxs("span",{className:"font-medium",children:["@",e.creatorUsername||e.creatorId]})]}),h.jsxs("div",{className:"flex items-center space-x-1 text-nothing-gray-400",children:[h.jsx(sg,{className:"h-4 w-4"}),h.jsx("span",{className:"text-sm",children:e.createdAt?.toDate?.()?.toLocaleDateString()||"Unknown date"})]})]}),h.jsx("div",{className:"text-nothing-gray-300 text-lg leading-relaxed mb-6",style:{position:"relative"},children:e.description?h.jsxs("div",{style:{position:"relative"},children:[h.jsx("span",{className:F?"":"glyph-fade-text glyph-line-clamp",style:F?{display:"block",maxHeight:"none",overflow:"visible"}:void 0,children:e.description}),h.jsx("button",{type:"button",onClick:()=>$(le=>!le),className:"ml-2 text-nothing-red hover:underline focus:outline-none relative z-10",style:{marginTop:"0.5em"},children:F?"Show Less":"Show More"})]}):null})]}),h.jsxs("div",{className:"flex items-center space-x-6 py-4 border-y border-nothing-gray-800",children:[h.jsxs("div",{className:"flex items-center space-x-2 text-nothing-gray-400",children:[h.jsx(as,{className:"h-5 w-5"}),h.jsx("span",{children:(()=>{const le=e.downloads||0;return`${le} ${le===1?"download":"downloads"}`})()})]}),h.jsxs("div",{className:"flex items-center space-x-2 text-nothing-gray-400",children:[h.jsx(Fn,{className:"h-5 w-5"}),h.jsx("span",{children:(()=>{const le=e.views||0;return`${le} ${le===1?"view":"views"}`})()})]}),h.jsxs("div",{className:"flex items-center space-x-2 text-nothing-gray-400",children:[h.jsx(sr,{className:"h-5 w-5"}),h.jsx("span",{children:(()=>{const le=e.likes||0;return`${le} ${le===1?"like":"likes"}`})()})]})]}),h.jsxs("div",{className:"flex space-x-4",children:[(e.apkUrl||e.githubUrl)&&h.jsxs("button",{onClick:je,className:"flex-1 bg-nothing-red hover:bg-red-700 text-nothing-white px-6 py-3 rounded-lg font-semibold flex items-center justify-center space-x-2 transition-colors duration-200",children:[h.jsx(as,{className:"h-5 w-5"}),h.jsx("span",{children:e.apkUrl?"Download APK":"View on GitHub"})]}),h.jsxs("button",{onClick:oe,disabled:m,className:`px-6 py-3 rounded-lg font-semibold flex items-center justify-center space-x-2 transition-colors duration-200 min-w-[120px] ${d?"bg-nothing-red text-nothing-white":"border border-nothing-gray-700 text-nothing-white hover:border-nothing-gray-600"} ${m?"opacity-50 cursor-not-allowed":""}`,children:[h.jsx(sr,{className:`h-5 w-5 ${d?"fill-current":""}`}),h.jsx("span",{children:m?"...":d?"Liked":"Like"})]}),h.jsx("button",{onClick:q,className:"px-6 py-3 border border-nothing-gray-700 text-nothing-white hover:border-nothing-gray-600 rounded-lg font-semibold flex items-center justify-center space-x-2 transition-colors duration-200",children:h.jsx(aD,{className:"h-5 w-5"})})]}),(e.githubUrl||e.instructions)&&h.jsxs("div",{className:"space-y-3",children:[h.jsx("h3",{className:"text-lg font-semibold text-nothing-white",children:e.githubUrl&&e.instructions?"Links & Instructions":e.githubUrl?"Repository":"Instructions"}),e.githubUrl&&h.jsxs("a",{href:e.githubUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 text-nothing-gray-300 hover:text-nothing-white transition-colors duration-200",children:[h.jsx(NT,{className:"h-5 w-5"}),h.jsx("span",{children:"View on GitHub"}),h.jsx(Zj,{className:"h-4 w-4"})]}),e.instructions&&h.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-4",children:[h.jsx("h4",{className:"text-nothing-white font-medium mb-2",children:"Installation Instructions"}),h.jsx("p",{className:"text-nothing-gray-300 text-sm whitespace-pre-wrap",children:e.instructions})]})]})]})]})}),w&&h.jsx("div",{className:"fixed inset-0 bg-nothing-black/80 flex items-center justify-center z-50 p-4",children:h.jsxs(Re.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6 max-w-md w-full",children:[h.jsxs("div",{className:"flex items-start space-x-3 mb-4",children:[h.jsx(Kj,{className:"h-6 w-6 text-yellow-500 flex-shrink-0 mt-0.5"}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-nothing-white mb-2",children:"Download Disclaimer"}),h.jsx("p",{className:"text-nothing-gray-300 text-sm",children:"This APK is shared by the community. GlyphMart does not guarantee the safety or functionality of third-party files. Download and install at your own risk."})]})]}),h.jsxs("div",{className:"flex space-x-3",children:[h.jsx("button",{onClick:Ce,disabled:a,className:"flex-1 bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50",children:a?"Downloading...":"I Understand, Download"}),h.jsx("button",{onClick:()=>E(!1),className:"px-4 py-2 border border-nothing-gray-700 text-nothing-white hover:border-nothing-gray-600 rounded-lg font-medium transition-colors duration-200",children:"Cancel"})]})]})}),D&&B?h.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center p-4",children:h.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-8 max-w-lg w-full",children:[h.jsx("h2",{className:"text-2xl font-bold text-nothing-white mb-6",children:"Edit Glyph"}),h.jsxs("form",{onSubmit:fe,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Title"}),h.jsx("input",{type:"text",name:"title",value:B.title,onChange:O,className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Description"}),h.jsx("textarea",{name:"description",value:B.description,onChange:O,rows:4,className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"APK URL"}),h.jsx("input",{type:"url",name:"apkUrl",value:B.apkUrl,onChange:O,className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"GitHub URL"}),h.jsx("input",{type:"url",name:"githubUrl",value:B.githubUrl,onChange:O,className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Instructions"}),h.jsx("textarea",{name:"instructions",value:B.instructions,onChange:O,rows:2,className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Images"}),h.jsxs("div",{className:"space-y-4",children:[B.images&&B.images.length>0&&h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:B.images.map((le,ue)=>h.jsx("div",{className:"relative",children:h.jsx("img",{src:fn(le),alt:`Preview ${ue+1}`,className:"w-full h-24 object-cover rounded-lg"})},ue))}),h.jsx("div",{className:"bg-nothing-gray-800 rounded-lg p-4",children:h.jsx(oc,{onFileUpload:J,acceptedTypes:"images",multiple:!0,maxFiles:5})}),h.jsx("div",{className:"text-center text-nothing-gray-400",children:h.jsx("span",{className:"px-3 py-1 bg-nothing-gray-800 rounded",children:"OR"})}),h.jsx("input",{type:"text",name:"images",value:B.images.join(", "),onChange:le=>U(ue=>({...ue,images:le.target.value.split(",").map(ve=>ve.trim())})),className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white",placeholder:"Or enter image URLs separated by commas"})]})]}),Z&&h.jsx("div",{className:"bg-red-900/20 border border-red-700 text-red-400 px-4 py-2 rounded-lg mb-4",children:Z}),h.jsxs("div",{className:"flex space-x-3 mt-6",children:[h.jsx("button",{type:"submit",disabled:j,className:"px-6 py-3 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50",children:j?"Saving...":"Save Changes"}),h.jsx("button",{type:"button",onClick:()=>N(!1),className:"px-6 py-3 bg-nothing-gray-700 hover:bg-nothing-gray-800 text-nothing-white rounded-lg font-medium transition-colors duration-200",children:"Cancel"})]})]})]})}):h.jsx(h.Fragment,{})]}):h.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("h1",{className:"text-2xl font-bold text-nothing-white mb-4",children:"Glyph not found"}),h.jsx(Ge,{to:"/",className:"text-nothing-red hover:text-red-400",children:"Return to home"})]})})},LO=()=>{const{username:n}=Ow(),[e,t]=C.useState(null),[r,o]=C.useState([]),[a,c]=C.useState(!0),[d,p]=C.useState("latest"),[m,x]=C.useState(""),w=N=>{console.log(N),x(B=>B+`
`+N)};C.useEffect(()=>{n&&(async()=>{try{w("Fetching storefront for username: "+n);const B=await Xe.getUserByUsername(n);w("Found user data: "+JSON.stringify({uid:B.uid,username:B.username,displayName:B.displayName})),t(B),w("Fetching glyphs for creatorId: "+B.uid);const U=await Xe.getGlyphs({creator_id:B.uid,sort:"latest",limit:100});w("Found glyphs: "+U.length),U.length>0?w("First glyph: "+JSON.stringify({id:U[0].id,title:U[0].title,creatorId:U[0].creatorId})):w("No glyphs found for this user. Check if glyphs were created with the correct creatorId."),U.forEach(j=>{j.createdAt&&(j.createdAt=new Date(j.createdAt))}),o(U)}catch(B){w("Error fetching user data: "+B.message),console.error("Error fetching user data:",B)}finally{c(!1)}})()},[n]);const E=()=>{switch(d){case"popular":return[...r].sort((N,B)=>(B.downloads||0)-(N.downloads||0));case"liked":return[...r].sort((N,B)=>(B.likes||0)-(N.likes||0));default:return r}},S=({glyph:N})=>h.jsx(Re.div,{whileHover:{y:-5},className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg overflow-hidden hover:border-nothing-gray-700 transition-all duration-300",children:h.jsxs(Ge,{to:`/glyph/${N.id}`,children:[h.jsxs("div",{className:"aspect-square bg-nothing-gray-800 relative overflow-hidden",children:[N.images&&N.images.length>0?h.jsx("img",{src:fn(N.images[0]),alt:N.title,loading:"lazy",className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"}):h.jsx("div",{className:"w-full h-full flex items-center justify-center",children:h.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center glyph-animation",children:h.jsx(_r,{className:"h-8 w-8 text-nothing-white"})})}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-nothing-black/80 via-transparent to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300",children:h.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:h.jsxs("div",{className:"flex items-center justify-between text-nothing-white text-sm",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(as,{className:"h-4 w-4"}),h.jsx("span",{children:N.downloads||0})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(sr,{className:"h-4 w-4"}),h.jsx("span",{children:N.likes||0})]})]})})})]}),h.jsxs("div",{className:"p-4",children:[h.jsx("h3",{className:"text-nothing-white font-semibold text-lg mb-2 truncate",children:N.title}),h.jsx("p",{className:"text-nothing-gray-400 text-sm mb-3 line-clamp-2",children:N.description}),h.jsxs("div",{className:"flex items-center justify-between text-nothing-gray-500 text-sm",children:[h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsxs("div",{className:"flex items-center space-x-1",children:[h.jsx(as,{className:"h-3 w-3"}),h.jsx("span",{children:N.downloads||0})]}),h.jsxs("div",{className:"flex items-center space-x-1",children:[h.jsx(Fn,{className:"h-3 w-3"}),h.jsx("span",{children:N.views||0})]}),h.jsxs("div",{className:"flex items-center space-x-1",children:[h.jsx(sr,{className:"h-3 w-3"}),h.jsx("span",{children:N.likes||0})]})]}),h.jsx("span",{className:"text-xs",children:N.createdAt?new Date(N.createdAt).toLocaleDateString():"Unknown"})]})]})]})});if(a)return h.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-4 glyph-animation",children:h.jsx(_r,{className:"h-8 w-8 text-nothing-white"})}),h.jsx("p",{className:"text-nothing-gray-400",children:"Loading storefront..."})]})});if(!e)return h.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("h1",{className:"text-2xl font-bold text-nothing-white mb-4",children:"User not found"}),h.jsxs("p",{className:"text-nothing-gray-400 mb-6",children:["The user @",n," does not exist."]}),h.jsx(Ge,{to:"/",className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-6 py-3 rounded-lg font-medium transition-colors duration-200",children:"Return to home"})]})});const V=r.reduce((N,B)=>N+(B.downloads||0),0),D=r.reduce((N,B)=>N+(B.likes||0),0);return h.jsxs("div",{className:"min-h-screen bg-nothing-black",children:[h.jsxs("div",{className:"bg-nothing-gray-900 border-b border-nothing-gray-800 relative overflow-hidden",children:[e.bannerImage&&h.jsxs("div",{className:"absolute inset-0 w-full h-full",children:[h.jsx("img",{src:fn(e.bannerImage),alt:"Profile banner",className:"w-full h-full object-cover opacity-30"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-nothing-gray-900 via-nothing-gray-900/80 to-nothing-gray-900/40"})]}),h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 relative z-10",children:h.jsxs(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center",children:[h.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden mx-auto mb-6 border-4 border-nothing-white shadow-lg",children:e.profilePicture?h.jsx("img",{src:fn(e.profilePicture),alt:e.displayName||e.username,loading:"lazy",className:"w-full h-full object-cover"}):h.jsx("div",{className:"w-full h-full bg-nothing-red flex items-center justify-center",children:h.jsx("span",{className:"text-2xl font-bold text-nothing-white",children:e.displayName?.charAt(0).toUpperCase()||e.username?.charAt(0).toUpperCase()})})}),h.jsx("h1",{className:"text-3xl font-bold text-nothing-white mb-2 font-nothing",children:e.username}),h.jsxs("p",{className:"text-nothing-red text-lg mb-4",children:["@",e.username]}),e.bio&&h.jsx("p",{className:"text-nothing-gray-300 max-w-2xl mx-auto mb-6",children:e.bio}),h.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4 text-nothing-gray-400 text-sm mb-6",children:[e.location&&h.jsxs("div",{className:"flex items-center space-x-1",children:[h.jsx(rD,{className:"h-4 w-4"}),h.jsx("span",{children:e.location})]}),e.website&&h.jsxs("a",{href:e.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 hover:text-nothing-white transition-colors duration-200",children:[h.jsx(tD,{className:"h-4 w-4"}),h.jsx("span",{children:"Website"})]}),h.jsxs("div",{className:"flex items-center space-x-1",children:[h.jsx(sg,{className:"h-4 w-4"}),h.jsxs("span",{children:["Joined ",e.createdAt?new Date(e.createdAt).toLocaleDateString():"Unknown"]})]})]}),h.jsxs("div",{className:"flex items-center justify-center space-x-8",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-2xl font-bold text-nothing-white",children:r.length}),h.jsx("div",{className:"text-nothing-gray-400 text-sm",children:"Glyphs"})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-2xl font-bold text-nothing-white",children:V}),h.jsx("div",{className:"text-nothing-gray-400 text-sm",children:"Downloads"})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-2xl font-bold text-nothing-white",children:D}),h.jsx("div",{className:"text-nothing-gray-400 text-sm",children:"Likes"})]})]})]})})]}),h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[h.jsxs("div",{className:"flex space-x-4 border-b border-nothing-gray-800 mb-8",children:[h.jsx("button",{onClick:()=>p("latest"),className:`px-4 py-3 font-medium border-b-2 transition-colors duration-200 ${d==="latest"?"border-nothing-red text-nothing-red":"border-transparent text-nothing-gray-400 hover:text-nothing-white"}`,children:"Latest"}),h.jsx("button",{onClick:()=>p("popular"),className:`px-4 py-3 font-medium border-b-2 transition-colors duration-200 ${d==="popular"?"border-nothing-red text-nothing-red":"border-transparent text-nothing-gray-400 hover:text-nothing-white"}`,children:"Most Downloaded"}),h.jsx("button",{onClick:()=>p("liked"),className:`px-4 py-3 font-medium border-b-2 transition-colors duration-200 ${d==="liked"?"border-nothing-red text-nothing-red":"border-transparent text-nothing-gray-400 hover:text-nothing-white"}`,children:"Most Liked"})]}),r.length>0?h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:E().map((N,B)=>h.jsx(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:B*.1},children:h.jsx(S,{glyph:N})},N.id))}):h.jsxs("div",{className:"text-center py-12",children:[h.jsx("div",{className:"w-16 h-16 bg-nothing-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx(_r,{className:"h-8 w-8 text-nothing-gray-600"})}),h.jsx("h3",{className:"text-nothing-white text-lg font-medium mb-2",children:"No glyphs yet"}),h.jsxs("p",{className:"text-nothing-gray-400",children:[e.username," hasn't shared any glyphs yet."]})]})]}),m&&h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:h.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg p-4",children:[h.jsx("h3",{className:"text-nothing-white font-bold mb-2",children:"Debug Info:"}),h.jsx("pre",{className:"text-nothing-gray-300 text-xs whitespace-pre-wrap overflow-auto",children:m})]})})]})},OO=()=>{const[n,e]=C.useState({title:"",description:"",images:[],apkUrl:"",githubUrl:"",instructions:""}),[t,r]=C.useState([]),[o,a]=C.useState(null),[c,d]=C.useState(!1),[p,m]=C.useState(""),[x,w]=C.useState(""),{currentUser:E,userProfile:S}=cr(),V=ar(),D=async()=>{try{const Z=await Xe.getGlyphs(),ie=Z.filter(I=>I.creatorId===E.uid),R=`Total glyphs in database: ${Z.length}
My glyphs: ${ie.length}
My UID: ${E.uid}
My username: ${S?.username}
My displayName: ${E.displayName}

My glyphs:
`+ie.map(I=>`- ${I.title} (ID: ${I.id})`).join(`
`);w(R),console.log("Debug info:",R)}catch(Z){console.error("Error checking glyphs:",Z),w("Error checking glyphs: "+Z.message)}};if(!E)return V("/login"),null;const N=Z=>{const{name:ie,value:R}=Z.target;e(I=>({...I,[ie]:R})),m("")},B=(Z,ie)=>{Z?(r(R=>[...R,Z]),e(R=>({...R,images:[...R.images,Z.url]}))):ie&&(r(R=>R.filter(I=>I.id!==ie.id)),e(R=>({...R,images:R.images.filter(I=>I!==ie.url)})))},U=(Z,ie)=>{Z?(a(Z),e(R=>({...R,apkUrl:Z.url}))):ie&&(a(null),e(R=>({...R,apkUrl:""})))},j=()=>{if(!n.title.trim())return m("Title is required"),!1;if(!n.description.trim())return m("Description is required"),!1;if(!n.apkUrl.trim()&&!n.githubUrl.trim())return m("Either APK file or GitHub repository URL is required"),!1;const Z=/^https?:\/\/.+/;return n.githubUrl.trim()&&!Z.test(n.githubUrl)?(m("GitHub URL must be a valid HTTP/HTTPS URL"),!1):!0},K=async Z=>{if(Z.preventDefault(),d(!0),m(""),!j()){d(!1);return}try{const ie={title:n.title.trim(),description:n.description.trim(),images:n.images,apkUrl:n.apkUrl.trim()||null,githubUrl:n.githubUrl.trim()||null,instructions:n.instructions.trim()||null,creatorId:E.uid,creatorUsername:S?.username,downloads:0,views:0,likes:0,createdAt:new Date};console.log("Creating glyph with data:",ie);const R=await Xe.uploadGlyph(ie);console.log("Glyph created with ID:",R.id),V(`/glyph/${R.id}`)}catch(ie){console.error("Error creating glyph:",ie),m("Failed to upload glyph. Please try again.")}finally{d(!1)}};return h.jsx("div",{className:"min-h-screen bg-nothing-black py-12",children:h.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[h.jsxs(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[h.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-6 glyph-animation",children:h.jsx(Gp,{className:"h-8 w-8 text-nothing-white"})}),h.jsx("h1",{className:"text-3xl font-bold text-nothing-white font-nothing mb-4",children:"Share Your Glyph"}),h.jsx("p",{className:"text-nothing-gray-400",children:"Upload your custom Nothing Phone(3) glyph and share it with the community"})]}),h.jsx(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-8",children:h.jsxs("form",{onSubmit:K,className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-nothing-white mb-2",children:"Glyph Title *"}),h.jsx("input",{type:"text",id:"title",name:"title",value:n.title,onChange:N,placeholder:"e.g., Custom Boot Animation Glyph",className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-nothing-white mb-2",children:"Description *"}),h.jsx("textarea",{id:"description",name:"description",value:n.description,onChange:N,rows:4,placeholder:"Describe your glyph, what it does, and any special features...",className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200 resize-vertical",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-nothing-white mb-2",children:"Images (Optional)"}),h.jsx("p",{className:"text-sm text-nothing-gray-400 mb-4",children:"Upload images showcasing your glyph (screenshots, demos, etc.)"}),h.jsx("div",{className:"bg-nothing-gray-800 rounded-lg p-4",children:h.jsx(oc,{onFileUpload:B,acceptedTypes:"images",multiple:!0,maxFiles:5})})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-nothing-white mb-2",children:"APK File or Download URL"}),h.jsx("p",{className:"text-sm text-nothing-gray-400 mb-4",children:"Upload an APK file directly or provide a download URL"}),h.jsx("div",{className:"bg-nothing-gray-800 rounded-lg p-4 mb-4",children:h.jsx(oc,{onFileUpload:U,acceptedTypes:"apks",multiple:!1})}),h.jsx("div",{className:"text-center text-nothing-gray-400 mb-4",children:h.jsx("span",{className:"px-3 py-1 bg-nothing-gray-800 rounded",children:"OR"})}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:h.jsx(nD,{className:"h-5 w-5 text-nothing-gray-400"})}),h.jsx("input",{type:"url",id:"apkUrl",name:"apkUrl",value:n.apkUrl,onChange:N,placeholder:"https://github.com/username/repo/releases/download/v1.0/glyph.apk",className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200",disabled:!!o})]}),h.jsx("p",{className:"text-sm text-nothing-gray-400 mt-2",children:o?"APK file uploaded":"Direct link to your APK file (GitHub Releases, Google Drive, etc.)"})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"githubUrl",className:"block text-sm font-medium text-nothing-white mb-2",children:"GitHub Repository"}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:h.jsx(NT,{className:"h-5 w-5 text-nothing-gray-400"})}),h.jsx("input",{type:"url",id:"githubUrl",name:"githubUrl",value:n.githubUrl,onChange:N,placeholder:"https://github.com/username/repository",className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200"})]}),h.jsx("p",{className:"text-sm text-nothing-gray-400 mt-2",children:"Link to your GitHub repository with source code"})]}),h.jsx("div",{className:"bg-blue-900/20 border border-blue-700 text-blue-400 px-4 py-3 rounded-lg",children:h.jsxs("div",{className:"flex items-start space-x-3",children:[h.jsx("div",{className:"flex-shrink-0 mt-0.5",children:h.jsx("div",{className:"w-4 h-4 bg-blue-400 rounded-full flex items-center justify-center",children:h.jsx("span",{className:"text-blue-900 text-xs font-bold",children:"!"})})}),h.jsxs("div",{className:"text-sm",children:[h.jsx("p",{className:"font-medium mb-1",children:"Download Requirement"}),h.jsx("p",{children:"You must provide either an APK download URL or a GitHub repository link (or both). Users need a way to access your glyph."})]})]})}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"instructions",className:"block text-sm font-medium text-nothing-white mb-2",children:"Installation Instructions (Optional)"}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute top-3 left-3 pointer-events-none",children:h.jsx(PT,{className:"h-5 w-5 text-nothing-gray-400"})}),h.jsx("textarea",{id:"instructions",name:"instructions",value:n.instructions,onChange:N,rows:4,placeholder:`1. Download the APK file
2. Enable installation from unknown sources
3. Install the APK
4. Open Nothing Glyph Composer...`,className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200 resize-vertical"})]})]}),p&&h.jsxs(Re.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-900/20 border border-red-700 text-red-400 px-4 py-3 rounded-lg flex items-start space-x-3",children:[h.jsx(Bp,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),h.jsx("span",{className:"text-sm",children:p})]}),h.jsx("div",{className:"bg-yellow-900/20 border border-yellow-700 text-yellow-400 px-4 py-3 rounded-lg",children:h.jsxs("div",{className:"flex items-start space-x-3",children:[h.jsx(Bp,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),h.jsxs("div",{className:"text-sm",children:[h.jsx("p",{className:"font-medium mb-1",children:"Important Disclaimer"}),h.jsx("p",{children:"By uploading your glyph, you confirm that you own the rights to share this content. GlyphMart is not responsible for the safety or functionality of user-generated content."})]})]})}),h.jsxs("div",{className:"flex justify-end space-x-4",children:[h.jsx("button",{type:"button",onClick:()=>V("/"),className:"px-6 py-3 border border-nothing-gray-700 text-nothing-white hover:border-nothing-gray-600 rounded-lg font-medium transition-colors duration-200",children:"Cancel"}),h.jsx("button",{type:"submit",disabled:c,className:"px-6 py-3 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:c?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-nothing-white"}),h.jsx("span",{children:"Uploading..."})]}):h.jsxs(h.Fragment,{children:[h.jsx(Gp,{className:"h-4 w-4"}),h.jsx("span",{children:"Share Glyph"})]})})]})]})}),h.jsxs(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-nothing-gray-900 rounded-lg p-6 border border-nothing-gray-800 mt-6",children:[h.jsx("h2",{className:"text-nothing-white text-lg font-bold mb-4",children:"Debug: Check My Glyphs"}),h.jsx("button",{type:"button",onClick:D,className:"px-4 py-2 bg-nothing-gray-800 hover:bg-nothing-gray-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 mb-4",children:"Check Database"}),x&&h.jsx("div",{className:"bg-nothing-gray-800 rounded-lg p-4",children:h.jsx("pre",{className:"text-nothing-gray-300 text-xs whitespace-pre-wrap overflow-auto",children:x})})]})]})})},MO=()=>{const[n,e]=gI(),[t,r]=C.useState(n.get("q")||""),[o,a]=C.useState([]),[c,d]=C.useState(!1),[p,m]=C.useState("latest"),[x,w]=C.useState("all"),[E,S]=C.useState(!1);C.useEffect(()=>{const B=n.get("q");B&&(r(B),S(!0),V(B))},[n]);const V=async(B,U=p,j=x)=>{if(B.trim()){S(!0),d(!0);try{const K=await Xe.getGlyphs({search:B,sort:U,limit:100});a(K)}catch(K){console.error("Error searching glyphs:",K),a([])}finally{d(!1)}}},D=B=>{B.preventDefault(),t.trim()&&(e({q:t.trim()}),V(t.trim()))},N=B=>{m(B),t.trim()&&V(t.trim(),B,x)};return h.jsx("div",{className:"min-h-screen bg-nothing-black",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[h.jsx("div",{className:"text-center mb-8",children:h.jsxs(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[h.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-6 glyph-animation",children:h.jsx(Qr,{className:"h-8 w-8 text-nothing-white"})}),h.jsx("h1",{className:"text-3xl font-bold text-nothing-white font-nothing mb-4",children:"Search Glyphs"}),h.jsx("p",{className:"text-nothing-gray-400 max-w-2xl mx-auto",children:"Discover custom Nothing Phone(3) glyphs created by the community"})]})}),h.jsx(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"max-w-2xl mx-auto mb-8",children:h.jsxs("form",{onSubmit:D,className:"relative",children:[h.jsx("input",{type:"text",value:t,onChange:B=>r(B.target.value),placeholder:"Search for glyphs, creators, or keywords...",className:"w-full px-6 py-4 pl-14 pr-16 bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200 text-lg"}),h.jsx(Qr,{className:"absolute left-4 top-4 h-6 w-6 text-nothing-gray-400"}),h.jsx("button",{type:"submit",className:"absolute right-2 top-2 bottom-2 px-4 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-md font-medium transition-colors duration-200",children:"Search"})]})}),(o.length>0||c)&&h.jsxs(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 space-y-4 sm:space-y-0",children:[h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx("span",{className:"text-nothing-gray-400 text-sm",children:c?"Searching...":`${o.length} results found`}),t&&h.jsxs("span",{className:"text-nothing-white text-sm",children:['for "',h.jsx("span",{className:"text-nothing-red",children:t}),'"']})]}),h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(eD,{className:"h-4 w-4 text-nothing-gray-400"}),h.jsx("span",{className:"text-nothing-gray-400 text-sm",children:"Sort by:"})]}),h.jsx("div",{className:"flex space-x-2",children:[{value:"latest",label:"Latest",icon:Qj},{value:"popular",label:"Popular",icon:as},{value:"liked",label:"Most Liked",icon:sr},{value:"viewed",label:"Most Viewed",icon:Fn}].map(({value:B,label:U,icon:j})=>h.jsxs("button",{onClick:()=>N(B),className:`flex items-center space-x-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors duration-200 ${p===B?"bg-nothing-red text-nothing-white":"bg-nothing-gray-800 text-nothing-gray-300 hover:bg-nothing-gray-700"}`,children:[h.jsx(j,{className:"h-4 w-4"}),h.jsx("span",{className:"hidden sm:inline",children:U})]},B))})]})]}),c&&h.jsx("div",{className:"flex items-center justify-center py-12",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-4 glyph-animation",children:h.jsx(Qr,{className:"h-8 w-8 text-nothing-white"})}),h.jsx("p",{className:"text-nothing-gray-400",children:"Searching glyphs..."})]})}),!c&&o.length>0&&h.jsx(Re.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:o.map((B,U)=>h.jsx(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:U*.1},children:h.jsx(Ng,{glyph:B})},B.id))}),!c&&E&&o.length===0&&h.jsxs(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-12",children:[h.jsx("div",{className:"w-16 h-16 bg-nothing-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx(Qr,{className:"h-8 w-8 text-nothing-gray-600"})}),h.jsx("h3",{className:"text-nothing-white text-lg font-medium mb-2",children:"No results found"}),h.jsx("p",{className:"text-nothing-gray-400 mb-6",children:"Try searching with different keywords or browse all glyphs."}),h.jsx(Ge,{to:"/",className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-6 py-3 rounded-lg font-medium transition-colors duration-200",children:"Browse All Glyphs"})]}),!c&&!E&&h.jsxs(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-12",children:[h.jsx("div",{className:"w-16 h-16 bg-nothing-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx(Qr,{className:"h-8 w-8 text-nothing-gray-600"})}),h.jsx("h3",{className:"text-nothing-white text-lg font-medium mb-2",children:"Start searching"}),h.jsx("p",{className:"text-nothing-gray-400 mb-6",children:"Enter a search term to find glyphs, creators, or specific features."}),h.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:["boot animation","notification","charging","custom"].map(B=>h.jsx("button",{onClick:()=>{r(B),e({q:B}),V(B)},className:"px-3 py-1 bg-nothing-gray-800 hover:bg-nothing-gray-700 text-nothing-gray-300 rounded-full text-sm transition-colors duration-200",children:B},B))})]})]})})},UO=()=>{const[n,e]=C.useState([]),[t,r]=C.useState(!0),{currentUser:o}=cr();return C.useEffect(()=>{(async()=>{if(!o){r(!1);return}try{console.log("Fetching liked glyphs for user:",o.uid);const c=await Xe.getUserLikes();console.log("Retrieved liked glyphs:",c),e(c)}catch(c){console.error("Error fetching liked glyphs:",c)}finally{r(!1)}})()},[o]),o?t?h.jsx("div",{className:"min-h-screen bg-nothing-black text-nothing-white flex items-center justify-center",children:h.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-nothing-red"})}):h.jsx("div",{className:"min-h-screen bg-nothing-black text-nothing-white",children:h.jsxs("div",{className:"container mx-auto px-4 py-8",children:[h.jsxs(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[h.jsxs("h1",{className:"text-4xl font-bold mb-2 flex items-center",children:[h.jsx(sr,{className:"h-8 w-8 mr-3 text-nothing-red fill-current"}),"Liked Posts"]}),h.jsxs("p",{className:"text-nothing-gray-400",children:[n.length," glyph",n.length!==1?"s":""," you've liked"]})]}),n.length>0?h.jsx(Re.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:n.map((a,c)=>h.jsx(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:c*.1},className:"group",children:h.jsx(Ge,{to:`/glyph/${a.id}`,children:h.jsxs("div",{className:"bg-nothing-gray-900 rounded-lg overflow-hidden border border-nothing-gray-800 hover:border-nothing-gray-700 transition-all duration-300 hover:scale-105",children:[h.jsxs("div",{className:"aspect-square bg-nothing-gray-800 relative overflow-hidden",children:[a.images&&a.images.length>0?h.jsx("img",{src:fn(a.images[0]),alt:a.title,loading:"lazy",className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}):h.jsx("div",{className:"w-full h-full flex items-center justify-center",children:h.jsx("div",{className:"text-nothing-gray-500 text-6xl",children:""})}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-nothing-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:h.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:h.jsxs("div",{className:"flex items-center justify-between text-nothing-white text-sm",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(as,{className:"h-4 w-4"}),h.jsx("span",{children:a.downloads||0})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Fn,{className:"h-4 w-4"}),h.jsx("span",{children:a.views||0})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(sr,{className:"h-4 w-4 fill-current text-nothing-red"}),h.jsx("span",{children:a.likes||0})]})]})})})]}),h.jsxs("div",{className:"p-4",children:[h.jsx("h3",{className:"font-semibold text-nothing-white mb-2 line-clamp-2",children:a.title}),h.jsx("p",{className:"text-nothing-gray-400 text-sm mb-3 line-clamp-2",children:a.description}),h.jsxs("div",{className:"flex items-center justify-between text-xs text-nothing-gray-500",children:[h.jsxs("div",{className:"flex items-center space-x-1",children:[h.jsx(Qs,{className:"h-3 w-3"}),h.jsx("span",{children:a.creatorUsername})]}),h.jsxs("div",{className:"flex items-center space-x-1",children:[h.jsx(sg,{className:"h-3 w-3"}),h.jsx("span",{children:a.createdAt?.toDate?a.createdAt.toDate().toLocaleDateString():new Date(a.createdAt).toLocaleDateString()})]})]})]})]})})},a.id))}):h.jsxs(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"text-center py-16",children:[h.jsx(sr,{className:"h-16 w-16 mx-auto mb-4 text-nothing-gray-600"}),h.jsx("h2",{className:"text-2xl font-bold mb-2 text-nothing-gray-400",children:"No liked posts yet"}),h.jsx("p",{className:"text-nothing-gray-500 mb-6",children:"Start exploring glyphs and like the ones you love!"}),h.jsx(Ge,{to:"/",className:"bg-nothing-red text-nothing-white px-6 py-3 rounded-lg font-semibold hover:bg-red-600 transition-colors duration-200",children:"Explore Glyphs"})]})]})}):h.jsx("div",{className:"min-h-screen bg-nothing-black text-nothing-white flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Please log in to view your liked posts"}),h.jsx(Ge,{to:"/login",className:"bg-nothing-red text-nothing-white px-6 py-3 rounded-lg font-semibold hover:bg-red-600 transition-colors duration-200",children:"Log In"})]})})},FO=()=>{const{currentUser:n,userProfile:e,logout:t}=cr(),r=ar(),[o,a]=C.useState({displayName:"",username:"",email:"",bio:"",profilePicture:"",bannerImage:""}),[c,d]=C.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[p,m]=C.useState(!1),[x,w]=C.useState(!1),[E,S]=C.useState(!1),[V,D]=C.useState(!1),[N,B]=C.useState(""),[U,j]=C.useState(""),[K,Z]=C.useState("profile"),[ie,R]=C.useState(""),[I,P]=C.useState(!1),[L,F]=C.useState(null),[$,A]=C.useState(null);C.useEffect(()=>{n&&e&&a({displayName:n.displayName||"",username:e.username||"",email:n.email||"",bio:e.bio||"",profilePicture:e.profilePicture||n.photoURL||"",bannerImage:e.bannerImage||""})},[n,e]);const Ie=async q=>{q.preventDefault(),D(!0),j(""),B("");try{o.displayName!==n.displayName&&await Sp(n,{displayName:o.displayName}),o.profilePicture!==n.photoURL&&await Sp(n,{photoURL:o.profilePicture}),o.email!==n.email&&await QN(n,o.email),await Xe.updateUser({username:o.username,displayName:o.displayName,bio:o.bio,profilePicture:o.profilePicture,bannerImage:o.bannerImage,updatedAt:new Date}),B("Profile updated successfully!")}catch(X){console.error("Error updating profile:",X),X.code==="auth/requires-recent-login"?j("Please log out and log back in before updating your email."):j("Failed to update profile: "+X.message)}finally{D(!1)}},$e=(q,X)=>{q?(F(q),a(O=>({...O,profilePicture:q.url}))):X&&(F(null),a(O=>({...O,profilePicture:""})))},je=(q,X)=>{q?(A(q),a(O=>({...O,bannerImage:q.url}))):X&&(A(null),a(O=>({...O,bannerImage:""})))},Ce=async q=>{if(q.preventDefault(),D(!0),j(""),B(""),c.newPassword!==c.confirmPassword){j("New passwords do not match"),D(!1);return}if(c.newPassword.length<6){j("Password must be at least 6 characters long"),D(!1);return}try{const X=Xs.credential(n.email,c.currentPassword);await xv(n,X),await YN(n,c.newPassword),B("Password updated successfully!"),d({currentPassword:"",newPassword:"",confirmPassword:""})}catch(X){console.error("Error updating password:",X),X.code==="auth/wrong-password"?j("Current password is incorrect"):j("Failed to update password: "+X.message)}finally{D(!1)}},oe=async()=>{j(""),B(""),P(!0);try{if(!ie){j("Please enter your current password to confirm deletion."),P(!1);return}const q=Xs.credential(n.email,ie);await xv(n,q),await Xe.deleteUserData(),await n.delete(),B("Account and all glyphs deleted successfully."),t(),r("/")}catch(q){j("Failed to delete account: "+(q.message||q.code))}finally{P(!1)}};return n?h.jsx("div",{className:"min-h-screen bg-nothing-black text-nothing-white",children:h.jsxs("div",{className:"container mx-auto px-4 py-8",children:[h.jsxs(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[h.jsxs("h1",{className:"text-4xl font-bold mb-2 flex items-center",children:[h.jsx(qp,{className:"h-8 w-8 mr-3 text-nothing-red"}),"Settings"]}),h.jsx("p",{className:"text-nothing-gray-400",children:"Manage your account and preferences"})]}),N&&h.jsxs(Re.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-green-900/20 border border-green-700 text-green-400 px-4 py-3 rounded-lg mb-6 flex items-center",children:[h.jsx(Jj,{className:"h-5 w-5 mr-2"}),N]}),U&&h.jsxs(Re.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-900/20 border border-red-700 text-red-400 px-4 py-3 rounded-lg mb-6 flex items-center",children:[h.jsx(Bp,{className:"h-5 w-5 mr-2"}),U]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[h.jsx(Re.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},className:"lg:col-span-1",children:h.jsx("div",{className:"bg-nothing-gray-900 rounded-lg p-6 border border-nothing-gray-800",children:h.jsxs("nav",{className:"space-y-2",children:[h.jsxs("button",{onClick:()=>Z("profile"),className:`w-full text-left px-4 py-3 rounded-lg font-medium transition-colors duration-200 flex items-center space-x-3 ${K==="profile"?"bg-nothing-red text-nothing-white":"text-nothing-gray-400 hover:text-nothing-white hover:bg-nothing-gray-800"}`,children:[h.jsx(Qs,{className:"h-5 w-5"}),h.jsx("span",{children:"Profile"})]}),h.jsxs("button",{onClick:()=>Z("security"),className:`w-full text-left px-4 py-3 rounded-lg font-medium transition-colors duration-200 flex items-center space-x-3 ${K==="security"?"bg-nothing-red text-nothing-white":"text-nothing-gray-400 hover:text-nothing-white hover:bg-nothing-gray-800"}`,children:[h.jsx(zs,{className:"h-5 w-5"}),h.jsx("span",{children:"Security"})]})]})})}),h.jsxs(Re.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5},className:"lg:col-span-3",children:[K==="profile"&&h.jsxs("div",{className:"bg-nothing-gray-900 rounded-lg p-6 border border-nothing-gray-800",children:[h.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Profile Information"}),h.jsxs("form",{onSubmit:Ie,className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Banner Image"}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("div",{className:"w-full h-32 bg-nothing-gray-800 rounded-lg border border-nothing-gray-700 overflow-hidden",children:o.bannerImage?h.jsx("img",{src:fn(o.bannerImage),alt:"Banner preview",className:"w-full h-full object-cover"}):h.jsx("div",{className:"w-full h-full flex items-center justify-center",children:h.jsx(zp,{className:"h-8 w-8 text-nothing-gray-600"})})}),h.jsx("div",{className:"bg-nothing-gray-800 rounded-lg p-4",children:h.jsx(oc,{onFileUpload:je,acceptedTypes:"profile",multiple:!1})}),h.jsx("div",{className:"text-center text-nothing-gray-400",children:h.jsx("span",{className:"px-3 py-1 bg-nothing-gray-800 rounded",children:"OR"})}),h.jsxs("div",{className:"relative",children:[h.jsx(zp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),h.jsx("input",{type:"url",value:o.bannerImage,onChange:q=>a(X=>({...X,bannerImage:q.target.value})),className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"https://example.com/banner-image.jpg",disabled:!!$}),$&&h.jsx("p",{className:"text-sm text-nothing-gray-400 mt-2",children:"Banner image uploaded"})]})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Profile Picture"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx("div",{className:"w-20 h-20 bg-nothing-gray-800 rounded-full border border-nothing-gray-700 overflow-hidden flex-shrink-0",children:o.profilePicture?h.jsx("img",{src:fn(o.profilePicture),alt:"Profile preview",className:"w-full h-full object-cover"}):h.jsx("div",{className:"w-full h-full flex items-center justify-center",children:h.jsx(Qs,{className:"h-8 w-8 text-nothing-gray-600"})})}),h.jsxs("div",{className:"flex-1",children:[h.jsx("p",{className:"text-sm text-nothing-gray-300",children:"Upload a new profile picture"}),h.jsx("p",{className:"text-xs text-nothing-gray-500",children:"Recommended: 400x400px or larger"})]})]}),h.jsx("div",{className:"bg-nothing-gray-800 rounded-lg p-4",children:h.jsx(oc,{onFileUpload:$e,acceptedTypes:"profile",multiple:!1})}),h.jsx("div",{className:"text-center text-nothing-gray-400",children:h.jsx("span",{className:"px-3 py-1 bg-nothing-gray-800 rounded",children:"OR"})}),h.jsxs("div",{className:"relative",children:[h.jsx(Xj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),h.jsx("input",{type:"url",value:o.profilePicture,onChange:q=>a(X=>({...X,profilePicture:q.target.value})),className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"https://example.com/profile-picture.jpg",disabled:!!L}),L&&h.jsx("p",{className:"text-sm text-nothing-gray-400 mt-2",children:"Profile picture uploaded"})]})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Display Name"}),h.jsxs("div",{className:"relative",children:[h.jsx(Qs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),h.jsx("input",{type:"text",value:o.displayName,onChange:q=>a(X=>({...X,displayName:q.target.value})),className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"Your display name"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Username"}),h.jsx("input",{type:"text",value:o.username,onChange:q=>a(X=>({...X,username:q.target.value})),className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"Your username"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Email Address"}),h.jsxs("div",{className:"relative",children:[h.jsx(ig,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),h.jsx("input",{type:"email",value:o.email,onChange:q=>a(X=>({...X,email:q.target.value})),className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"your@email.com"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Bio"}),h.jsx("textarea",{value:o.bio,onChange:q=>a(X=>({...X,bio:q.target.value})),rows:4,className:"w-full px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent resize-none",placeholder:"Tell us about yourself..."})]}),h.jsx("button",{type:"submit",disabled:V,className:"w-full md:w-auto px-6 py-3 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:V?h.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-nothing-white"}):h.jsxs(h.Fragment,{children:[h.jsx(Tx,{className:"h-5 w-5"}),h.jsx("span",{children:"Save Changes"})]})})]})]}),K==="security"&&h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{className:"bg-nothing-gray-900 rounded-lg p-6 border border-nothing-gray-800",children:[h.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Change Password"}),h.jsxs("form",{onSubmit:Ce,className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Current Password"}),h.jsxs("div",{className:"relative",children:[h.jsx(zs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),h.jsx("input",{type:p?"text":"password",value:c.currentPassword,onChange:q=>d(X=>({...X,currentPassword:q.target.value})),className:"w-full pl-10 pr-12 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"Enter current password"}),h.jsx("button",{type:"button",onClick:()=>m(!p),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-nothing-gray-500 hover:text-nothing-white",children:p?h.jsx(fa,{className:"h-5 w-5"}):h.jsx(Fn,{className:"h-5 w-5"})})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"New Password"}),h.jsxs("div",{className:"relative",children:[h.jsx(zs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),h.jsx("input",{type:x?"text":"password",value:c.newPassword,onChange:q=>d(X=>({...X,newPassword:q.target.value})),className:"w-full pl-10 pr-12 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"Enter new password"}),h.jsx("button",{type:"button",onClick:()=>w(!x),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-nothing-gray-500 hover:text-nothing-white",children:x?h.jsx(fa,{className:"h-5 w-5"}):h.jsx(Fn,{className:"h-5 w-5"})})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Confirm New Password"}),h.jsxs("div",{className:"relative",children:[h.jsx(zs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),h.jsx("input",{type:E?"text":"password",value:c.confirmPassword,onChange:q=>d(X=>({...X,confirmPassword:q.target.value})),className:"w-full pl-10 pr-12 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"Confirm new password"}),h.jsx("button",{type:"button",onClick:()=>S(!E),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-nothing-gray-500 hover:text-nothing-white",children:E?h.jsx(fa,{className:"h-5 w-5"}):h.jsx(Fn,{className:"h-5 w-5"})})]})]}),h.jsx("button",{type:"submit",disabled:V,className:"w-full md:w-auto px-6 py-3 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:V?h.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-nothing-white"}):h.jsxs(h.Fragment,{children:[h.jsx(Tx,{className:"h-5 w-5"}),h.jsx("span",{children:"Update Password"})]})})]})]}),h.jsxs("div",{className:"bg-red-900/10 border border-red-700/30 rounded-lg p-6",children:[h.jsx("h2",{className:"text-2xl font-bold mb-4 text-red-400",children:"Danger Zone"}),h.jsx("p",{className:"text-nothing-gray-400 mb-6",children:"Once you delete your account, there is no going back. This will permanently delete all your glyphs and data. Please be certain."}),h.jsxs("form",{onSubmit:q=>{q.preventDefault(),oe()},className:"space-y-4",children:[h.jsx("label",{className:"block text-sm font-medium text-nothing-gray-300 mb-2",children:"Current Password"}),h.jsxs("div",{className:"relative mb-4",children:[h.jsx(zs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-500"}),h.jsx("input",{type:"password",value:ie,onChange:q=>R(q.target.value),className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-500 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent",placeholder:"Enter your current password",required:!0})]}),h.jsx("button",{type:"submit",disabled:I,className:"px-6 py-3 bg-red-600 hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:I?"Deleting...":"Delete Account"})]})]})]})]})]})]})}):(r("/login"),null)},BO=()=>{const{currentUser:n,userProfile:e}=cr(),t=ar(),[r,o]=C.useState({totalUsers:0,totalGlyphs:0,totalDownloads:0,totalViews:0,totalLikes:0,totalAdmins:0,uniqueViewers:0,uniqueDownloaders:0,topGlyphs:[]}),[a,c]=C.useState([]),[d,p]=C.useState(""),[m,x]=C.useState([]),[w,E]=C.useState(null),[S,V]=C.useState(!1),[D,N]=C.useState([]),[B,U]=C.useState(null),[j,K]=C.useState(""),[Z,ie]=C.useState([]),[R,I]=C.useState(!0),[P,L]=C.useState(!1),[F,$]=C.useState("stats"),A=n?.uid==="9H3pw5zS6GRDFTZaoYspEmruORj2"||e?.isAdmin===!0;C.useEffect(()=>{if(!n){t("/login");return}if(!A){t("/");return}Ie()},[n,A,t]);const Ie=async()=>{try{I(!0);const[q,X,O]=await Promise.all([Xe.getAdminStats(),Xe.getAllUsers(),Xe.getGlyphs({limit:1e3})]);o(q),c(X),x(X),N(O);const J=X.filter(fe=>fe.uid==="9H3pw5zS6GRDFTZaoYspEmruORj2"||fe.isAdmin);ie(J)}catch(q){console.error("Error loading admin data:",q)}finally{I(!1)}},$e=q=>{if(p(q),!q.trim())x(a);else{const X=a.filter(O=>O.username?.toLowerCase().includes(q.toLowerCase())||O.displayName?.toLowerCase().includes(q.toLowerCase())||O.email?.toLowerCase().includes(q.toLowerCase()));x(X)}},je=async q=>{try{L(!0),await Xe.makeUserAdmin(q),Ie(),alert("User promoted to admin successfully!")}catch(X){console.error("Error making user admin:",X),alert("Failed to promote user to admin")}finally{L(!1)}},Ce=async()=>{if(j.trim())try{L(!0),await Xe.addAdminByEmail(j),K(""),Ie(),alert("Admin added successfully!")}catch(q){console.error("Error adding admin:",q),alert("Failed to add admin: "+q.message)}finally{L(!1)}},oe=async q=>{if(confirm("Are you sure you want to delete this glyph?"))try{L(!0),await Xe.adminDeleteGlyph(q),N(X=>X.filter(O=>O.id!==q)),alert("Glyph deleted successfully!")}catch(X){console.error("Error deleting glyph:",X),alert("Failed to delete glyph")}finally{L(!1)}};return R?h.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-4 glyph-animation",children:h.jsx(sa,{className:"h-8 w-8 text-nothing-white"})}),h.jsx("p",{className:"text-nothing-gray-400",children:"Loading admin panel..."})]})}):A?h.jsx("div",{className:"min-h-screen bg-nothing-black text-nothing-white",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[h.jsxs(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[h.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[h.jsx(sa,{className:"h-8 w-8 text-nothing-red"}),h.jsx("h1",{className:"text-4xl font-bold font-nothing",children:"Admin Panel"})]}),h.jsxs("p",{className:"text-nothing-gray-400",children:["Welcome back, ",e?.displayName||n?.displayName,". Manage your GlyphMart platform."]})]}),h.jsx("div",{className:"border-b border-nothing-gray-800 mb-8",children:h.jsx("nav",{className:"flex space-x-8",children:[{id:"stats",label:"Statistics",icon:_x},{id:"users",label:"Users",icon:bx},{id:"glyphs",label:"Glyphs",icon:rh},{id:"admins",label:"Admins",icon:lD}].map(({id:q,label:X,icon:O})=>h.jsxs("button",{onClick:()=>$(q),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors duration-200 ${F===q?"border-nothing-red text-nothing-red":"border-transparent text-nothing-gray-400 hover:text-nothing-white hover:border-nothing-gray-600"}`,children:[h.jsx(O,{className:"h-4 w-4"}),h.jsx("span",{children:X})]},q))})}),h.jsxs(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[F==="stats"&&h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[h.jsx("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-nothing-gray-400 text-sm",children:"Total Users"}),h.jsx("p",{className:"text-3xl font-bold text-nothing-white",children:r.totalUsers})]}),h.jsx(bx,{className:"h-8 w-8 text-blue-500"})]})}),h.jsx("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-nothing-gray-400 text-sm",children:"Total Glyphs"}),h.jsx("p",{className:"text-3xl font-bold text-nothing-white",children:r.totalGlyphs})]}),h.jsx(rh,{className:"h-8 w-8 text-green-500"})]})}),h.jsx("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-nothing-gray-400 text-sm",children:"Unique Downloads"}),h.jsx("p",{className:"text-3xl font-bold text-nothing-white",children:r.uniqueDownloaders})]}),h.jsx(as,{className:"h-8 w-8 text-purple-500"})]})}),h.jsx("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-nothing-gray-400 text-sm",children:"Unique Views"}),h.jsx("p",{className:"text-3xl font-bold text-nothing-white",children:r.uniqueViewers})]}),h.jsx(Fn,{className:"h-8 w-8 text-orange-500"})]})})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h3",{className:"text-lg font-semibold text-nothing-white",children:"Additional Metrics"}),h.jsx(AT,{className:"h-6 w-6 text-nothing-red"})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-nothing-gray-400",children:"Total Likes"}),h.jsx("span",{className:"text-nothing-white font-semibold",children:r.totalLikes})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-nothing-gray-400",children:"Active Admins"}),h.jsx("span",{className:"text-nothing-white font-semibold",children:r.totalAdmins})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-nothing-gray-400",children:"Avg Unique Downloads/Glyph"}),h.jsx("span",{className:"text-nothing-white font-semibold",children:(r.totalGlyphs||0)>0?Math.round((r.uniqueDownloaders||0)/r.totalGlyphs):0})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-nothing-gray-400",children:"Avg Unique Views/Glyph"}),h.jsx("span",{className:"text-nothing-white font-semibold",children:(r.totalGlyphs||0)>0?Math.round((r.uniqueViewers||0)/r.totalGlyphs):0})]})]})]}),h.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h3",{className:"text-lg font-semibold text-nothing-white",children:"Top Performing Glyphs"}),h.jsx(_x,{className:"h-6 w-6 text-nothing-red"})]}),h.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:[(r.topGlyphs||[]).slice(0,5).map((q,X)=>h.jsxs("div",{className:"flex items-center justify-between p-2 bg-nothing-gray-800 rounded",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsxs("span",{className:"text-nothing-red font-bold text-sm",children:["#",X+1]}),h.jsx("span",{className:"text-nothing-white text-sm truncate max-w-32",title:q.title,children:q.title})]}),h.jsxs("div",{className:"flex items-center space-x-3 text-xs text-nothing-gray-400",children:[h.jsxs("span",{children:[q.views,"v"]}),h.jsxs("span",{children:[q.downloads,"d"]}),h.jsxs("span",{children:[q.likes,""]})]})]},q.id)),(!r.topGlyphs||r.topGlyphs.length===0)&&h.jsx("div",{className:"text-center text-nothing-gray-400 py-4",children:h.jsx("p",{children:"No glyph data available yet"})})]})]})]}),h.jsx("div",{className:"bg-yellow-900/20 border border-yellow-700/50 rounded-lg p-4",children:h.jsxs("div",{className:"flex items-start space-x-3",children:[h.jsx("div",{className:"flex-shrink-0",children:h.jsx("svg",{className:"w-5 h-5 text-yellow-500 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-yellow-500 font-medium text-sm",children:"Known Issues"}),h.jsx("p",{className:"text-yellow-200/80 text-sm mt-1",children:"Additional metrics and top performing glyphs are currently broken and may not display accurate data."})]})]})})]}),F==="users"&&h.jsxs("div",{className:"space-y-6",children:[h.jsx("div",{className:"flex items-center space-x-4",children:h.jsxs("div",{className:"relative flex-1",children:[h.jsx(Qr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-nothing-gray-400"}),h.jsx("input",{type:"text",placeholder:"Search users by username, name, or email...",value:d,onChange:q=>$e(q.target.value),className:"w-full pl-10 pr-4 py-3 bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent"})]})}),h.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg overflow-hidden",children:[h.jsx("div",{className:"px-6 py-4 border-b border-nothing-gray-800",children:h.jsxs("h3",{className:"text-lg font-semibold",children:["Users (",(m||[]).length,")"]})}),h.jsx("div",{className:"max-h-96 overflow-y-auto",children:(m||[]).map(q=>h.jsx("div",{className:"px-6 py-4 border-b border-nothing-gray-800 last:border-b-0 hover:bg-nothing-gray-800 transition-colors duration-200",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border border-nothing-gray-600",children:q.profilePicture?h.jsx("img",{src:fn(q.profilePicture),alt:q.displayName,loading:"lazy",className:"w-full h-full object-cover"}):h.jsx("div",{className:"w-full h-full bg-nothing-red flex items-center justify-center",children:h.jsx("span",{className:"text-sm font-bold text-nothing-white",children:q.displayName?.charAt(0)?.toUpperCase()||q.username?.charAt(0)?.toUpperCase()||"U"})})}),h.jsxs("div",{children:[h.jsxs("p",{className:"font-semibold text-nothing-white",children:[q.displayName||q.username,(q.uid==="9H3pw5zS6GRDFTZaoYspEmruORj2"||q.isAdmin)&&h.jsx(sa,{className:"inline h-4 w-4 ml-2 text-nothing-red"})]}),h.jsxs("p",{className:"text-sm text-nothing-gray-400",children:["@",q.username]}),h.jsx("p",{className:"text-xs text-nothing-gray-500",children:q.email})]})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[!q.isAdmin&&q.uid!=="9H3pw5zS6GRDFTZaoYspEmruORj2"&&h.jsx("button",{onClick:()=>je(q.uid),disabled:P,className:"px-3 py-1 bg-nothing-red hover:bg-red-700 text-nothing-white text-sm rounded transition-colors duration-200 disabled:opacity-50",children:"Make Admin"}),h.jsx("button",{onClick:()=>E(q),className:"p-2 text-nothing-gray-400 hover:text-nothing-white transition-colors duration-200",children:h.jsx(oD,{className:"h-4 w-4"})})]})]})},q.uid))})]})]}),F==="glyphs"&&h.jsx("div",{className:"space-y-6",children:h.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg overflow-hidden",children:[h.jsx("div",{className:"px-6 py-4 border-b border-nothing-gray-800",children:h.jsxs("h3",{className:"text-lg font-semibold",children:["All Glyphs (",(D||[]).length,")"]})}),h.jsx("div",{className:"max-h-96 overflow-y-auto",children:(D||[]).map(q=>h.jsx("div",{className:"px-6 py-4 border-b border-nothing-gray-800 last:border-b-0 hover:bg-nothing-gray-800 transition-colors duration-200",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx("div",{className:"w-12 h-12 rounded-lg overflow-hidden border border-nothing-gray-600",children:q.images&&q.images.length>0?h.jsx("img",{src:fn(q.images[0]),alt:q.title,loading:"lazy",className:"w-full h-full object-cover"}):h.jsx("div",{className:"w-full h-full bg-nothing-gray-700 flex items-center justify-center",children:h.jsx(rh,{className:"h-6 w-6 text-nothing-gray-500"})})}),h.jsxs("div",{children:[h.jsx("p",{className:"font-semibold text-nothing-white",children:q.title}),h.jsxs("p",{className:"text-sm text-nothing-gray-400",children:["by @",q.creatorUsername]}),h.jsxs("p",{className:"text-xs text-nothing-gray-500",children:[q.downloads||0," downloads  ",q.views||0," views  ",q.likes||0," likes"]})]})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("button",{onClick:()=>t(`/glyph/${q.id}`),className:"px-3 py-1 bg-nothing-gray-700 hover:bg-nothing-gray-600 text-nothing-white text-sm rounded transition-colors duration-200",children:"View"}),h.jsx("button",{onClick:()=>oe(q.id),disabled:P,className:"p-2 text-red-400 hover:text-red-300 transition-colors duration-200 disabled:opacity-50",children:h.jsx(uD,{className:"h-4 w-4"})})]})]})},q.id))})]})}),F==="admins"&&h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg p-6",children:[h.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add New Admin"}),h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx("input",{type:"email",placeholder:"Enter email address",value:j,onChange:q=>K(q.target.value),className:"flex-1 px-4 py-3 bg-nothing-gray-800 border border-nothing-gray-700 rounded-lg text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent"}),h.jsxs("button",{onClick:Ce,disabled:P||!j.trim(),className:"px-6 py-3 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 flex items-center space-x-2",children:[h.jsx(hD,{className:"h-4 w-4"}),h.jsx("span",{children:"Add Admin"})]})]})]}),h.jsxs("div",{className:"bg-nothing-gray-900 border border-nothing-gray-800 rounded-lg overflow-hidden",children:[h.jsx("div",{className:"px-6 py-4 border-b border-nothing-gray-800",children:h.jsxs("h3",{className:"text-lg font-semibold",children:["Current Admins (",Z.length,")"]})}),h.jsx("div",{children:Z.map(q=>h.jsx("div",{className:"px-6 py-4 border-b border-nothing-gray-800 last:border-b-0",children:h.jsx("div",{className:"flex items-center justify-between",children:h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border border-nothing-gray-600",children:q.profilePicture?h.jsx("img",{src:fn(q.profilePicture),alt:q.displayName,loading:"lazy",className:"w-full h-full object-cover"}):h.jsx("div",{className:"w-full h-full bg-nothing-red flex items-center justify-center",children:h.jsx("span",{className:"text-sm font-bold text-nothing-white",children:q.displayName?.charAt(0)?.toUpperCase()||q.username?.charAt(0)?.toUpperCase()||"A"})})}),h.jsxs("div",{children:[h.jsxs("p",{className:"font-semibold text-nothing-white flex items-center",children:[q.displayName||q.username,h.jsx(sa,{className:"h-4 w-4 ml-2 text-nothing-red"}),q.uid==="9H3pw5zS6GRDFTZaoYspEmruORj2"&&h.jsx("span",{className:"ml-2 px-2 py-1 bg-nothing-red text-nothing-white text-xs rounded",children:"Super Admin"})]}),h.jsxs("p",{className:"text-sm text-nothing-gray-400",children:["@",q.username]}),h.jsx("p",{className:"text-xs text-nothing-gray-500",children:q.email})]})]})})},q.uid))})]})]})]},F)]})}):h.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("h1",{className:"text-2xl font-bold text-red-500 mb-4",children:"Access Denied"}),h.jsx("p",{className:"text-nothing-gray-400 mb-6",children:"You don't have permission to access the admin panel."}),h.jsx("button",{onClick:()=>t("/"),className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-6 py-3 rounded-lg font-medium transition-colors duration-200",children:"Return to Home"})]})})},zO=()=>{const[n,e]=C.useState([]),[t,r]=C.useState(!0),[o,a]=C.useState(""),[c,d]=C.useState(!1),{currentUser:p,userProfile:m}=cr(),[x,w]=C.useState({title:"",description:"",tags:"",referenceImages:[],referenceFiles:[]});C.useEffect(()=>{E()},[o]);const E=async()=>{try{r(!0);const U={limit:20,offset:0};o.trim()&&(U.search=o.trim());const j=await fetch(`undefined/api/glyph-requests?${new URLSearchParams(U)}`),K=await j.json();j.ok?e(K.requests||[]):console.error("Error fetching requests:",K.error)}catch(U){console.error("Error fetching requests:",U)}finally{r(!1)}},S=async U=>{if(U.preventDefault(),!p){alert("Please log in to create a request");return}try{const j={title:x.title,description:x.description,tags:x.tags.split(",").map(Z=>Z.trim()).filter(Z=>Z),reference_images:x.referenceImages,reference_files:x.referenceFiles},K=await fetch("undefined/api/glyph-requests",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${await p.getIdToken()}`},body:JSON.stringify(j)});if(K.ok)d(!1),w({title:"",description:"",tags:"",referenceImages:[],referenceFiles:[]}),E();else{const Z=await K.json();alert(Z.error||"Failed to create request")}}catch(j){console.error("Error creating request:",j),alert("Failed to create request")}},V=async U=>{if(!p){alert("Please log in to take on requests");return}try{const j=await fetch(`undefined/api/glyph-requests/${U}/take-on`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${await p.getIdToken()}`},body:JSON.stringify({})});if(j.ok)alert("Successfully took on the request!"),E();else{const K=await j.json();alert(K.error||"Failed to take on request")}}catch(j){console.error("Error taking on request:",j),alert("Failed to take on request")}},D=U=>{try{return new Date(U).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch{return"Unknown date"}},N=U=>{switch(U){case"open":return"text-green-400 bg-green-400/10";case"in_progress":return"text-yellow-400 bg-yellow-400/10";case"completed":return"text-blue-400 bg-blue-400/10";case"cancelled":return"text-red-400 bg-red-400/10";default:return"text-nothing-gray-400 bg-nothing-gray-400/10"}},B=(U,j=150)=>U.length<=j?U:U.substr(0,j)+"...";return t?h.jsx("div",{className:"min-h-screen bg-nothing-black flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"w-16 h-16 bg-nothing-red rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse",children:h.jsx($p,{className:"h-8 w-8 text-nothing-white"})}),h.jsx("p",{className:"text-nothing-gray-400",children:"Loading requests..."})]})}):h.jsxs("div",{className:"min-h-screen bg-nothing-black",children:[h.jsx("section",{className:"relative py-16 px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"max-w-7xl mx-auto",children:[h.jsx("div",{className:"text-center mb-8",children:h.jsxs(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:[h.jsxs("h1",{className:"text-4xl md:text-6xl font-bold text-nothing-white mb-4 font-nothing",children:["Request ",h.jsx("span",{className:"text-nothing-red",children:"Glyph Toys"})]}),h.jsx("p",{className:"text-xl text-nothing-gray-300 mb-8 max-w-3xl mx-auto",children:"Share your ideas for custom Nothing Phone(3) glyphs and let the community bring them to life"})]})}),h.jsx("div",{className:"max-w-4xl mx-auto mb-8",children:h.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[h.jsxs("div",{className:"flex-1 relative",children:[h.jsx("input",{type:"text",value:o,onChange:U=>a(U.target.value),placeholder:"Search requests...",className:"w-full bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg py-3 pl-10 pr-4 text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red focus:border-transparent transition-all duration-200"}),h.jsx(Qr,{className:"absolute left-3 top-3.5 h-5 w-5 text-nothing-gray-400"})]}),p&&h.jsxs("button",{onClick:()=>d(!0),className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-6 py-3 rounded-lg font-semibold transition-colors duration-200 flex items-center space-x-2",children:[h.jsx(kT,{className:"h-5 w-5"}),h.jsx("span",{children:"Create Request"})]})]})})]})}),c&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:h.jsx("div",{className:"bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:h.jsxs("div",{className:"p-6",children:[h.jsx("h3",{className:"text-2xl font-bold text-nothing-white mb-6",children:"Create Glyph Request"}),h.jsxs("form",{onSubmit:S,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-nothing-white font-medium mb-2",children:"Title"}),h.jsx("input",{type:"text",value:x.title,onChange:U=>w({...x,title:U.target.value}),required:!0,className:"w-full bg-nothing-gray-800 border border-nothing-gray-600 rounded-lg py-2 px-3 text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red",placeholder:"Brief title for your glyph idea..."})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-nothing-white font-medium mb-2",children:"Description"}),h.jsx("textarea",{value:x.description,onChange:U=>w({...x,description:U.target.value}),required:!0,rows:6,className:"w-full bg-nothing-gray-800 border border-nothing-gray-600 rounded-lg py-2 px-3 text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red resize-none",placeholder:"Describe your glyph idea in detail. What should it look like? How should it behave? Any specific requirements?"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-nothing-white font-medium mb-2",children:"Tags (comma-separated)"}),h.jsx("input",{type:"text",value:x.tags,onChange:U=>w({...x,tags:U.target.value}),className:"w-full bg-nothing-gray-800 border border-nothing-gray-600 rounded-lg py-2 px-3 text-nothing-white placeholder-nothing-gray-400 focus:outline-none focus:ring-2 focus:ring-nothing-red",placeholder:"animation, gaming, utility, fun, etc."})]}),h.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[h.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-6 py-2 border border-nothing-gray-600 text-nothing-gray-300 rounded-lg hover:bg-nothing-gray-800 transition-colors duration-200",children:"Cancel"}),h.jsx("button",{type:"submit",className:"px-6 py-2 bg-nothing-red hover:bg-red-700 text-nothing-white rounded-lg transition-colors duration-200",children:"Create Request"})]})]})]})})}),h.jsx("section",{className:"px-4 sm:px-6 lg:px-8 pb-20",children:h.jsx("div",{className:"max-w-7xl mx-auto",children:n.length===0?h.jsxs("div",{className:"text-center py-16",children:[h.jsx("div",{className:"w-16 h-16 bg-nothing-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx($p,{className:"h-8 w-8 text-nothing-gray-600"})}),h.jsx("p",{className:"text-nothing-gray-400 text-lg",children:"No requests found"}),h.jsx("p",{className:"text-nothing-gray-500 text-sm mt-2",children:o?"Try a different search term":"Be the first to create a glyph request!"})]}):h.jsx("div",{className:"space-y-6",children:n.map((U,j)=>h.jsx(Re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:j*.1},className:"bg-nothing-gray-900 border border-nothing-gray-700 rounded-lg p-6 hover:border-nothing-gray-600 transition-colors duration-200",children:h.jsx("div",{className:"flex justify-between items-start mb-4",children:h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[h.jsx("h3",{className:"text-xl font-semibold text-nothing-white",children:U.title}),h.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${N(U.status)}`,children:U.status.replace("_"," ").toUpperCase()})]}),h.jsx("p",{className:"text-nothing-gray-300 mb-4 leading-relaxed",children:B(U.description)}),U.tags&&U.tags.length>0&&h.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:U.tags.map((K,Z)=>h.jsxs("span",{className:"inline-flex items-center space-x-1 px-2 py-1 bg-nothing-gray-800 text-nothing-gray-300 text-xs rounded-full",children:[h.jsx(cD,{className:"h-3 w-3"}),h.jsx("span",{children:K})]},Z))}),h.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[U.reference_images&&U.reference_images.length>0&&h.jsxs("span",{className:"inline-flex items-center space-x-1 text-nothing-gray-400 text-sm",children:[h.jsx(rh,{className:"h-4 w-4"}),h.jsxs("span",{children:[U.reference_images.length," image",U.reference_images.length!==1?"s":""]})]}),U.reference_files&&U.reference_files.length>0&&h.jsxs("span",{className:"inline-flex items-center space-x-1 text-nothing-gray-400 text-sm",children:[h.jsx(iD,{className:"h-4 w-4"}),h.jsxs("span",{children:[U.reference_files.length," file",U.reference_files.length!==1?"s":""]})]})]}),h.jsxs("div",{className:"flex items-center justify-between text-sm text-nothing-gray-400",children:[h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsxs("span",{className:"inline-flex items-center space-x-1",children:[h.jsx(Qs,{className:"h-4 w-4"}),h.jsxs("span",{children:["by ",U.user?.username||"Unknown"]})]}),h.jsxs("span",{className:"inline-flex items-center space-x-1",children:[h.jsx(IT,{className:"h-4 w-4"}),h.jsx("span",{children:D(U.created_at)})]})]}),U.status==="open"&&p&&h.jsx("button",{onClick:()=>V(U.id),className:"bg-nothing-red hover:bg-red-700 text-nothing-white px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200",children:"Take On"})]})]})})},U.id))})})})]})},Ku=({children:n})=>{const{currentUser:e}=cr();return e?n:h.jsx(zw,{to:"/login"})},kw=({children:n})=>{const{currentUser:e}=cr();return e?h.jsx(zw,{to:"/"}):n};function $O(){return h.jsx(Gj,{children:h.jsx(dI,{children:h.jsxs("div",{className:"App",children:[h.jsx(CO,{}),h.jsxs(sI,{children:[h.jsx(Vn,{path:"/",element:h.jsx(RO,{})}),h.jsx(Vn,{path:"/login",element:h.jsx(kw,{children:h.jsx(jO,{})})}),h.jsx(Vn,{path:"/signup",element:h.jsx(kw,{children:h.jsx(DO,{})})}),h.jsx(Vn,{path:"/glyph/:id",element:h.jsx(VO,{})}),h.jsx(Vn,{path:"/storefront/:username",element:h.jsx(LO,{})}),h.jsx(Vn,{path:"/upload",element:h.jsx(Ku,{children:h.jsx(OO,{})})}),h.jsx(Vn,{path:"/search",element:h.jsx(MO,{})}),h.jsx(Vn,{path:"/request-glyphs",element:h.jsx(zO,{})}),h.jsx(Vn,{path:"/liked",element:h.jsx(Ku,{children:h.jsx(UO,{})})}),h.jsx(Vn,{path:"/settings",element:h.jsx(Ku,{children:h.jsx(FO,{})})}),h.jsx(Vn,{path:"/admin",element:h.jsx(Ku,{children:h.jsx(BO,{})})})]})]})})})}fb.createRoot(document.getElementById("root")).render(h.jsx(C.StrictMode,{children:h.jsx($O,{})}));
